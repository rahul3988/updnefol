var _j=Object.defineProperty;var Tj=(t,s,r)=>s in t?_j(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var Sa=(t,s,r)=>Tj(t,typeof s!="symbol"?s+"":s,r);function $p(t,s){for(var r=0;r<s.length;r++){const a=s[r];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in t)){const i=Object.getOwnPropertyDescriptor(a,n);i&&Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();function zp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wp={exports:{}},jd={},Vp={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ao=Symbol.for("react.element"),Ej=Symbol.for("react.portal"),Fj=Symbol.for("react.fragment"),Aj=Symbol.for("react.strict_mode"),Pj=Symbol.for("react.profiler"),Dj=Symbol.for("react.provider"),Rj=Symbol.for("react.context"),Lj=Symbol.for("react.forward_ref"),Oj=Symbol.for("react.suspense"),Ij=Symbol.for("react.memo"),Mj=Symbol.for("react.lazy"),Vm=Symbol.iterator;function Bj(t){return t===null||typeof t!="object"?null:(t=Vm&&t[Vm]||t["@@iterator"],typeof t=="function"?t:null)}var Hp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gp=Object.assign,qp={};function el(t,s,r){this.props=t,this.context=s,this.refs=qp,this.updater=r||Hp}el.prototype.isReactComponent={};el.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};el.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jp(){}Jp.prototype=el.prototype;function lx(t,s,r){this.props=t,this.context=s,this.refs=qp,this.updater=r||Hp}var ox=lx.prototype=new Jp;ox.constructor=lx;Gp(ox,el.prototype);ox.isPureReactComponent=!0;var Hm=Array.isArray,Kp=Object.prototype.hasOwnProperty,cx={current:null},Yp={key:!0,ref:!0,__self:!0,__source:!0};function Xp(t,s,r){var a,n={},i=null,l=null;if(s!=null)for(a in s.ref!==void 0&&(l=s.ref),s.key!==void 0&&(i=""+s.key),s)Kp.call(s,a)&&!Yp.hasOwnProperty(a)&&(n[a]=s[a]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(t&&t.defaultProps)for(a in o=t.defaultProps,o)n[a]===void 0&&(n[a]=o[a]);return{$$typeof:Ao,type:t,key:i,ref:l,props:n,_owner:cx.current}}function Uj(t,s){return{$$typeof:Ao,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function dx(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ao}function $j(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var Gm=/\/+/g;function qd(t,s){return typeof t=="object"&&t!==null&&t.key!=null?$j(""+t.key):s.toString(36)}function yc(t,s,r,a,n){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Ao:case Ej:l=!0}}if(l)return l=t,n=n(l),t=a===""?"."+qd(l,0):a,Hm(n)?(r="",t!=null&&(r=t.replace(Gm,"$&/")+"/"),yc(n,s,r,"",function(d){return d})):n!=null&&(dx(n)&&(n=Uj(n,r+(!n.key||l&&l.key===n.key?"":(""+n.key).replace(Gm,"$&/")+"/")+t)),s.push(n)),1;if(l=0,a=a===""?".":a+":",Hm(t))for(var o=0;o<t.length;o++){i=t[o];var c=a+qd(i,o);l+=yc(i,s,r,c,n)}else if(c=Bj(t),typeof c=="function")for(t=c.call(t),o=0;!(i=t.next()).done;)i=i.value,c=a+qd(i,o++),l+=yc(i,s,r,c,n);else if(i==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return l}function zo(t,s,r){if(t==null)return t;var a=[],n=0;return yc(t,a,"","",function(i){return s.call(r,i,n++)}),a}function zj(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var tr={current:null},bc={transition:null},Wj={ReactCurrentDispatcher:tr,ReactCurrentBatchConfig:bc,ReactCurrentOwner:cx};function Qp(){throw Error("act(...) is not supported in production builds of React.")}ct.Children={map:zo,forEach:function(t,s,r){zo(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return zo(t,function(){s++}),s},toArray:function(t){return zo(t,function(s){return s})||[]},only:function(t){if(!dx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ct.Component=el;ct.Fragment=Fj;ct.Profiler=Pj;ct.PureComponent=lx;ct.StrictMode=Aj;ct.Suspense=Oj;ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wj;ct.act=Qp;ct.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var a=Gp({},t.props),n=t.key,i=t.ref,l=t._owner;if(s!=null){if(s.ref!==void 0&&(i=s.ref,l=cx.current),s.key!==void 0&&(n=""+s.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in s)Kp.call(s,c)&&!Yp.hasOwnProperty(c)&&(a[c]=s[c]===void 0&&o!==void 0?o[c]:s[c])}var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];a.children=o}return{$$typeof:Ao,type:t.type,key:n,ref:i,props:a,_owner:l}};ct.createContext=function(t){return t={$$typeof:Rj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Dj,_context:t},t.Consumer=t};ct.createElement=Xp;ct.createFactory=function(t){var s=Xp.bind(null,t);return s.type=t,s};ct.createRef=function(){return{current:null}};ct.forwardRef=function(t){return{$$typeof:Lj,render:t}};ct.isValidElement=dx;ct.lazy=function(t){return{$$typeof:Mj,_payload:{_status:-1,_result:t},_init:zj}};ct.memo=function(t,s){return{$$typeof:Ij,type:t,compare:s===void 0?null:s}};ct.startTransition=function(t){var s=bc.transition;bc.transition={};try{t()}finally{bc.transition=s}};ct.unstable_act=Qp;ct.useCallback=function(t,s){return tr.current.useCallback(t,s)};ct.useContext=function(t){return tr.current.useContext(t)};ct.useDebugValue=function(){};ct.useDeferredValue=function(t){return tr.current.useDeferredValue(t)};ct.useEffect=function(t,s){return tr.current.useEffect(t,s)};ct.useId=function(){return tr.current.useId()};ct.useImperativeHandle=function(t,s,r){return tr.current.useImperativeHandle(t,s,r)};ct.useInsertionEffect=function(t,s){return tr.current.useInsertionEffect(t,s)};ct.useLayoutEffect=function(t,s){return tr.current.useLayoutEffect(t,s)};ct.useMemo=function(t,s){return tr.current.useMemo(t,s)};ct.useReducer=function(t,s,r){return tr.current.useReducer(t,s,r)};ct.useRef=function(t){return tr.current.useRef(t)};ct.useState=function(t){return tr.current.useState(t)};ct.useSyncExternalStore=function(t,s,r){return tr.current.useSyncExternalStore(t,s,r)};ct.useTransition=function(){return tr.current.useTransition()};ct.version="18.3.1";Vp.exports=ct;var y=Vp.exports;const ux=zp(y),Vj=$p({__proto__:null,default:ux},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hj=y,Gj=Symbol.for("react.element"),qj=Symbol.for("react.fragment"),Jj=Object.prototype.hasOwnProperty,Kj=Hj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yj={key:!0,ref:!0,__self:!0,__source:!0};function Zp(t,s,r){var a,n={},i=null,l=null;r!==void 0&&(i=""+r),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(l=s.ref);for(a in s)Jj.call(s,a)&&!Yj.hasOwnProperty(a)&&(n[a]=s[a]);if(t&&t.defaultProps)for(a in s=t.defaultProps,s)n[a]===void 0&&(n[a]=s[a]);return{$$typeof:Gj,type:t,key:i,ref:l,props:n,_owner:Kj.current}}jd.Fragment=qj;jd.jsx=Zp;jd.jsxs=Zp;Wp.exports=jd;var e=Wp.exports,$0={},eg={exports:{}},wr={},tg={exports:{}},sg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(P,k){var X=P.length;P.push(k);e:for(;0<X;){var se=X-1>>>1,B=P[se];if(0<n(B,k))P[se]=k,P[X]=B,X=se;else break e}}function r(P){return P.length===0?null:P[0]}function a(P){if(P.length===0)return null;var k=P[0],X=P.pop();if(X!==k){P[0]=X;e:for(var se=0,B=P.length,L=B>>>1;se<L;){var H=2*(se+1)-1,K=P[H],J=H+1,re=P[J];if(0>n(K,X))J<B&&0>n(re,K)?(P[se]=re,P[J]=X,se=J):(P[se]=K,P[H]=X,se=H);else if(J<B&&0>n(re,X))P[se]=re,P[J]=X,se=J;else break e}}return k}function n(P,k){var X=P.sortIndex-k.sortIndex;return X!==0?X:P.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,p=null,m=3,f=!1,h=!1,x=!1,g=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(P){for(var k=r(d);k!==null;){if(k.callback===null)a(d);else if(k.startTime<=P)a(d),k.sortIndex=k.expirationTime,s(c,k);else break;k=r(d)}}function C(P){if(x=!1,N(P),!h)if(r(c)!==null)h=!0,z(A);else{var k=r(d);k!==null&&Q(C,k.startTime-P)}}function A(P,k){h=!1,x&&(x=!1,j(_),_=-1),f=!0;var X=m;try{for(N(k),p=r(c);p!==null&&(!(p.expirationTime>k)||P&&!R());){var se=p.callback;if(typeof se=="function"){p.callback=null,m=p.priorityLevel;var B=se(p.expirationTime<=k);k=t.unstable_now(),typeof B=="function"?p.callback=B:p===r(c)&&a(c),N(k)}else a(c);p=r(c)}if(p!==null)var L=!0;else{var H=r(d);H!==null&&Q(C,H.startTime-k),L=!1}return L}finally{p=null,m=X,f=!1}}var F=!1,w=null,_=-1,v=5,S=-1;function R(){return!(t.unstable_now()-S<v)}function D(){if(w!==null){var P=t.unstable_now();S=P;var k=!0;try{k=w(!0,P)}finally{k?V():(F=!1,w=null)}}else F=!1}var V;if(typeof b=="function")V=function(){b(D)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,I=O.port2;O.port1.onmessage=D,V=function(){I.postMessage(null)}}else V=function(){g(D,0)};function z(P){w=P,F||(F=!0,V())}function Q(P,k){_=g(function(){P(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){h||f||(h=!0,z(A))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(P){switch(m){case 1:case 2:case 3:var k=3;break;default:k=m}var X=m;m=k;try{return P()}finally{m=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,k){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var X=m;m=P;try{return k()}finally{m=X}},t.unstable_scheduleCallback=function(P,k,X){var se=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?se+X:se):X=se,P){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=X+B,P={id:u++,callback:k,priorityLevel:P,startTime:X,expirationTime:B,sortIndex:-1},X>se?(P.sortIndex=X,s(d,P),r(c)===null&&P===r(d)&&(x?(j(_),_=-1):x=!0,Q(C,X-se))):(P.sortIndex=B,s(c,P),h||f||(h=!0,z(A))),P},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(P){var k=m;return function(){var X=m;m=k;try{return P.apply(this,arguments)}finally{m=X}}}})(sg);tg.exports=sg;var Xj=tg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qj=y,jr=Xj;function ke(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rg=new Set,Ql={};function ii(t,s){Wi(t,s),Wi(t+"Capture",s)}function Wi(t,s){for(Ql[t]=s,t=0;t<s.length;t++)rg.add(s[t])}var Oa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),z0=Object.prototype.hasOwnProperty,Zj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qm={},Jm={};function e1(t){return z0.call(Jm,t)?!0:z0.call(qm,t)?!1:Zj.test(t)?Jm[t]=!0:(qm[t]=!0,!1)}function t1(t,s,r,a){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function s1(t,s,r,a){if(s===null||typeof s>"u"||t1(t,s,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function sr(t,s,r,a,n,i,l){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=i,this.removeEmptyString=l}var As={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){As[t]=new sr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];As[s]=new sr(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){As[t]=new sr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){As[t]=new sr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){As[t]=new sr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){As[t]=new sr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){As[t]=new sr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){As[t]=new sr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){As[t]=new sr(t,5,!1,t.toLowerCase(),null,!1,!1)});var xx=/[\-:]([a-z])/g;function mx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(xx,mx);As[s]=new sr(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(xx,mx);As[s]=new sr(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(xx,mx);As[s]=new sr(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){As[t]=new sr(t,1,!1,t.toLowerCase(),null,!1,!1)});As.xlinkHref=new sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){As[t]=new sr(t,1,!1,t.toLowerCase(),null,!0,!0)});function hx(t,s,r,a){var n=As.hasOwnProperty(s)?As[s]:null;(n!==null?n.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s1(s,r,n,a)&&(r=null),a||n===null?e1(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):n.mustUseProperty?t[n.propertyName]=r===null?n.type===3?!1:"":r:(s=n.attributeName,a=n.attributeNamespace,r===null?t.removeAttribute(s):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,a?t.setAttributeNS(a,s,r):t.setAttribute(s,r))))}var Wa=Qj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wo=Symbol.for("react.element"),bi=Symbol.for("react.portal"),vi=Symbol.for("react.fragment"),fx=Symbol.for("react.strict_mode"),W0=Symbol.for("react.profiler"),ag=Symbol.for("react.provider"),ng=Symbol.for("react.context"),px=Symbol.for("react.forward_ref"),V0=Symbol.for("react.suspense"),H0=Symbol.for("react.suspense_list"),gx=Symbol.for("react.memo"),Xa=Symbol.for("react.lazy"),ig=Symbol.for("react.offscreen"),Km=Symbol.iterator;function dl(t){return t===null||typeof t!="object"?null:(t=Km&&t[Km]||t["@@iterator"],typeof t=="function"?t:null)}var Gt=Object.assign,Jd;function Nl(t){if(Jd===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Jd=s&&s[1]||""}return`
`+Jd+t}var Kd=!1;function Yd(t,s){if(!t||Kd)return"";Kd=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(d){var a=d}Reflect.construct(t,[],s)}else{try{s.call()}catch(d){a=d}t.call(s.prototype)}else{try{throw Error()}catch(d){a=d}t()}}catch(d){if(d&&a&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),i=a.stack.split(`
`),l=n.length-1,o=i.length-1;1<=l&&0<=o&&n[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(n[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||n[l]!==i[o]){var c=`
`+n[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{Kd=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Nl(t):""}function r1(t){switch(t.tag){case 5:return Nl(t.type);case 16:return Nl("Lazy");case 13:return Nl("Suspense");case 19:return Nl("SuspenseList");case 0:case 2:case 15:return t=Yd(t.type,!1),t;case 11:return t=Yd(t.type.render,!1),t;case 1:return t=Yd(t.type,!0),t;default:return""}}function G0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vi:return"Fragment";case bi:return"Portal";case W0:return"Profiler";case fx:return"StrictMode";case V0:return"Suspense";case H0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ng:return(t.displayName||"Context")+".Consumer";case ag:return(t._context.displayName||"Context")+".Provider";case px:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gx:return s=t.displayName||null,s!==null?s:G0(t.type)||"Memo";case Xa:s=t._payload,t=t._init;try{return G0(t(s))}catch{}}return null}function a1(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G0(s);case 8:return s===fx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function bn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function lg(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function n1(t){var s=lg(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),a=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,i=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return n.call(this)},set:function(l){a=""+l,i.call(this,l)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(l){a=""+l},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Vo(t){t._valueTracker||(t._valueTracker=n1(t))}function og(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),a="";return t&&(a=lg(t)?t.checked?"true":"false":t.value),t=a,t!==r?(s.setValue(t),!0):!1}function Oc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function q0(t,s){var r=s.checked;return Gt({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Ym(t,s){var r=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;r=bn(s.value!=null?s.value:r),t._wrapperState={initialChecked:a,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function cg(t,s){s=s.checked,s!=null&&hx(t,"checked",s,!1)}function J0(t,s){cg(t,s);var r=bn(s.value),a=s.type;if(r!=null)a==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?K0(t,s.type,r):s.hasOwnProperty("defaultValue")&&K0(t,s.type,bn(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function Xm(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function K0(t,s,r){(s!=="number"||Oc(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var wl=Array.isArray;function Pi(t,s,r,a){if(t=t.options,s){s={};for(var n=0;n<r.length;n++)s["$"+r[n]]=!0;for(r=0;r<t.length;r++)n=s.hasOwnProperty("$"+t[r].value),t[r].selected!==n&&(t[r].selected=n),n&&a&&(t[r].defaultSelected=!0)}else{for(r=""+bn(r),s=null,n=0;n<t.length;n++){if(t[n].value===r){t[n].selected=!0,a&&(t[n].defaultSelected=!0);return}s!==null||t[n].disabled||(s=t[n])}s!==null&&(s.selected=!0)}}function Y0(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(ke(91));return Gt({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qm(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(ke(92));if(wl(r)){if(1<r.length)throw Error(ke(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:bn(r)}}function dg(t,s){var r=bn(s.value),a=bn(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),a!=null&&(t.defaultValue=""+a)}function Zm(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function ug(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function X0(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?ug(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ho,xg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,a,n){MSApp.execUnsafeLocalFunction(function(){return t(s,r,a,n)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Ho=Ho||document.createElement("div"),Ho.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ho.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Zl(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var Dl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i1=["Webkit","ms","Moz","O"];Object.keys(Dl).forEach(function(t){i1.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Dl[s]=Dl[t]})});function mg(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||Dl.hasOwnProperty(t)&&Dl[t]?(""+s).trim():s+"px"}function hg(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var a=r.indexOf("--")===0,n=mg(r,s[r],a);r==="float"&&(r="cssFloat"),a?t.setProperty(r,n):t[r]=n}}var l1=Gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Q0(t,s){if(s){if(l1[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(ke(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(ke(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(ke(61))}if(s.style!=null&&typeof s.style!="object")throw Error(ke(62))}}function Z0(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eu=null;function yx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tu=null,Di=null,Ri=null;function eh(t){if(t=Ro(t)){if(typeof tu!="function")throw Error(ke(280));var s=t.stateNode;s&&(s=Cd(s),tu(t.stateNode,t.type,s))}}function fg(t){Di?Ri?Ri.push(t):Ri=[t]:Di=t}function pg(){if(Di){var t=Di,s=Ri;if(Ri=Di=null,eh(t),s)for(t=0;t<s.length;t++)eh(s[t])}}function gg(t,s){return t(s)}function yg(){}var Xd=!1;function bg(t,s,r){if(Xd)return t(s,r);Xd=!0;try{return gg(t,s,r)}finally{Xd=!1,(Di!==null||Ri!==null)&&(yg(),pg())}}function eo(t,s){var r=t.stateNode;if(r===null)return null;var a=Cd(r);if(a===null)return null;r=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ke(231,s,typeof r));return r}var su=!1;if(Oa)try{var ul={};Object.defineProperty(ul,"passive",{get:function(){su=!0}}),window.addEventListener("test",ul,ul),window.removeEventListener("test",ul,ul)}catch{su=!1}function o1(t,s,r,a,n,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{s.apply(r,d)}catch(u){this.onError(u)}}var Rl=!1,Ic=null,Mc=!1,ru=null,c1={onError:function(t){Rl=!0,Ic=t}};function d1(t,s,r,a,n,i,l,o,c){Rl=!1,Ic=null,o1.apply(c1,arguments)}function u1(t,s,r,a,n,i,l,o,c){if(d1.apply(this,arguments),Rl){if(Rl){var d=Ic;Rl=!1,Ic=null}else throw Error(ke(198));Mc||(Mc=!0,ru=d)}}function li(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function vg(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function th(t){if(li(t)!==t)throw Error(ke(188))}function x1(t){var s=t.alternate;if(!s){if(s=li(t),s===null)throw Error(ke(188));return s!==t?null:t}for(var r=t,a=s;;){var n=r.return;if(n===null)break;var i=n.alternate;if(i===null){if(a=n.return,a!==null){r=a;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return th(n),t;if(i===a)return th(n),s;i=i.sibling}throw Error(ke(188))}if(r.return!==a.return)r=n,a=i;else{for(var l=!1,o=n.child;o;){if(o===r){l=!0,r=n,a=i;break}if(o===a){l=!0,a=n,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,a=n;break}if(o===a){l=!0,a=i,r=n;break}o=o.sibling}if(!l)throw Error(ke(189))}}if(r.alternate!==a)throw Error(ke(190))}if(r.tag!==3)throw Error(ke(188));return r.stateNode.current===r?t:s}function jg(t){return t=x1(t),t!==null?Ng(t):null}function Ng(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Ng(t);if(s!==null)return s;t=t.sibling}return null}var wg=jr.unstable_scheduleCallback,sh=jr.unstable_cancelCallback,m1=jr.unstable_shouldYield,h1=jr.unstable_requestPaint,Zt=jr.unstable_now,f1=jr.unstable_getCurrentPriorityLevel,bx=jr.unstable_ImmediatePriority,kg=jr.unstable_UserBlockingPriority,Bc=jr.unstable_NormalPriority,p1=jr.unstable_LowPriority,Sg=jr.unstable_IdlePriority,Nd=null,xa=null;function g1(t){if(xa&&typeof xa.onCommitFiberRoot=="function")try{xa.onCommitFiberRoot(Nd,t,void 0,(t.current.flags&128)===128)}catch{}}var ea=Math.clz32?Math.clz32:v1,y1=Math.log,b1=Math.LN2;function v1(t){return t>>>=0,t===0?32:31-(y1(t)/b1|0)|0}var Go=64,qo=4194304;function kl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uc(t,s){var r=t.pendingLanes;if(r===0)return 0;var a=0,n=t.suspendedLanes,i=t.pingedLanes,l=r&268435455;if(l!==0){var o=l&~n;o!==0?a=kl(o):(i&=l,i!==0&&(a=kl(i)))}else l=r&~n,l!==0?a=kl(l):i!==0&&(a=kl(i));if(a===0)return 0;if(s!==0&&s!==a&&!(s&n)&&(n=a&-a,i=s&-s,n>=i||n===16&&(i&4194240)!==0))return s;if(a&4&&(a|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=a;0<s;)r=31-ea(s),n=1<<r,a|=t[r],s&=~n;return a}function j1(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function N1(t,s){for(var r=t.suspendedLanes,a=t.pingedLanes,n=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-ea(i),o=1<<l,c=n[l];c===-1?(!(o&r)||o&a)&&(n[l]=j1(o,s)):c<=s&&(t.expiredLanes|=o),i&=~o}}function au(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Cg(){var t=Go;return Go<<=1,!(Go&4194240)&&(Go=64),t}function Qd(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function Po(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-ea(s),t[s]=r}function w1(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<r;){var n=31-ea(r),i=1<<n;s[n]=0,a[n]=-1,t[n]=-1,r&=~i}}function vx(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var a=31-ea(r),n=1<<a;n&s|t[a]&s&&(t[a]|=s),r&=~n}}var Et=0;function _g(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Tg,jx,Eg,Fg,Ag,nu=!1,Jo=[],on=null,cn=null,dn=null,to=new Map,so=new Map,Za=[],k1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rh(t,s){switch(t){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":dn=null;break;case"pointerover":case"pointerout":to.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":so.delete(s.pointerId)}}function xl(t,s,r,a,n,i){return t===null||t.nativeEvent!==i?(t={blockedOn:s,domEventName:r,eventSystemFlags:a,nativeEvent:i,targetContainers:[n]},s!==null&&(s=Ro(s),s!==null&&jx(s)),t):(t.eventSystemFlags|=a,s=t.targetContainers,n!==null&&s.indexOf(n)===-1&&s.push(n),t)}function S1(t,s,r,a,n){switch(s){case"focusin":return on=xl(on,t,s,r,a,n),!0;case"dragenter":return cn=xl(cn,t,s,r,a,n),!0;case"mouseover":return dn=xl(dn,t,s,r,a,n),!0;case"pointerover":var i=n.pointerId;return to.set(i,xl(to.get(i)||null,t,s,r,a,n)),!0;case"gotpointercapture":return i=n.pointerId,so.set(i,xl(so.get(i)||null,t,s,r,a,n)),!0}return!1}function Pg(t){var s=Mn(t.target);if(s!==null){var r=li(s);if(r!==null){if(s=r.tag,s===13){if(s=vg(r),s!==null){t.blockedOn=s,Ag(t.priority,function(){Eg(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vc(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=iu(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var a=new r.constructor(r.type,r);eu=a,r.target.dispatchEvent(a),eu=null}else return s=Ro(r),s!==null&&jx(s),t.blockedOn=r,!1;s.shift()}return!0}function ah(t,s,r){vc(t)&&r.delete(s)}function C1(){nu=!1,on!==null&&vc(on)&&(on=null),cn!==null&&vc(cn)&&(cn=null),dn!==null&&vc(dn)&&(dn=null),to.forEach(ah),so.forEach(ah)}function ml(t,s){t.blockedOn===s&&(t.blockedOn=null,nu||(nu=!0,jr.unstable_scheduleCallback(jr.unstable_NormalPriority,C1)))}function ro(t){function s(n){return ml(n,t)}if(0<Jo.length){ml(Jo[0],t);for(var r=1;r<Jo.length;r++){var a=Jo[r];a.blockedOn===t&&(a.blockedOn=null)}}for(on!==null&&ml(on,t),cn!==null&&ml(cn,t),dn!==null&&ml(dn,t),to.forEach(s),so.forEach(s),r=0;r<Za.length;r++)a=Za[r],a.blockedOn===t&&(a.blockedOn=null);for(;0<Za.length&&(r=Za[0],r.blockedOn===null);)Pg(r),r.blockedOn===null&&Za.shift()}var Li=Wa.ReactCurrentBatchConfig,$c=!0;function _1(t,s,r,a){var n=Et,i=Li.transition;Li.transition=null;try{Et=1,Nx(t,s,r,a)}finally{Et=n,Li.transition=i}}function T1(t,s,r,a){var n=Et,i=Li.transition;Li.transition=null;try{Et=4,Nx(t,s,r,a)}finally{Et=n,Li.transition=i}}function Nx(t,s,r,a){if($c){var n=iu(t,s,r,a);if(n===null)o0(t,s,a,zc,r),rh(t,a);else if(S1(n,t,s,r,a))a.stopPropagation();else if(rh(t,a),s&4&&-1<k1.indexOf(t)){for(;n!==null;){var i=Ro(n);if(i!==null&&Tg(i),i=iu(t,s,r,a),i===null&&o0(t,s,a,zc,r),i===n)break;n=i}n!==null&&a.stopPropagation()}else o0(t,s,a,null,r)}}var zc=null;function iu(t,s,r,a){if(zc=null,t=yx(a),t=Mn(t),t!==null)if(s=li(t),s===null)t=null;else if(r=s.tag,r===13){if(t=vg(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return zc=t,null}function Dg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(f1()){case bx:return 1;case kg:return 4;case Bc:case p1:return 16;case Sg:return 536870912;default:return 16}default:return 16}}var sn=null,wx=null,jc=null;function Rg(){if(jc)return jc;var t,s=wx,r=s.length,a,n="value"in sn?sn.value:sn.textContent,i=n.length;for(t=0;t<r&&s[t]===n[t];t++);var l=r-t;for(a=1;a<=l&&s[r-a]===n[i-a];a++);return jc=n.slice(t,1<a?1-a:void 0)}function Nc(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Ko(){return!0}function nh(){return!1}function kr(t){function s(r,a,n,i,l){this._reactName=r,this._targetInst=n,this.type=a,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ko:nh,this.isPropagationStopped=nh,this}return Gt(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ko)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ko)},persist:function(){},isPersistent:Ko}),s}var tl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kx=kr(tl),Do=Gt({},tl,{view:0,detail:0}),E1=kr(Do),Zd,e0,hl,wd=Gt({},Do,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hl&&(hl&&t.type==="mousemove"?(Zd=t.screenX-hl.screenX,e0=t.screenY-hl.screenY):e0=Zd=0,hl=t),Zd)},movementY:function(t){return"movementY"in t?t.movementY:e0}}),ih=kr(wd),F1=Gt({},wd,{dataTransfer:0}),A1=kr(F1),P1=Gt({},Do,{relatedTarget:0}),t0=kr(P1),D1=Gt({},tl,{animationName:0,elapsedTime:0,pseudoElement:0}),R1=kr(D1),L1=Gt({},tl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),O1=kr(L1),I1=Gt({},tl,{data:0}),lh=kr(I1),M1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $1(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=U1[t])?!!s[t]:!1}function Sx(){return $1}var z1=Gt({},Do,{key:function(t){if(t.key){var s=M1[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Nc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?B1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sx,charCode:function(t){return t.type==="keypress"?Nc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),W1=kr(z1),V1=Gt({},wd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oh=kr(V1),H1=Gt({},Do,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sx}),G1=kr(H1),q1=Gt({},tl,{propertyName:0,elapsedTime:0,pseudoElement:0}),J1=kr(q1),K1=Gt({},wd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Y1=kr(K1),X1=[9,13,27,32],Cx=Oa&&"CompositionEvent"in window,Ll=null;Oa&&"documentMode"in document&&(Ll=document.documentMode);var Q1=Oa&&"TextEvent"in window&&!Ll,Lg=Oa&&(!Cx||Ll&&8<Ll&&11>=Ll),ch=" ",dh=!1;function Og(t,s){switch(t){case"keyup":return X1.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ig(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ji=!1;function Z1(t,s){switch(t){case"compositionend":return Ig(s);case"keypress":return s.which!==32?null:(dh=!0,ch);case"textInput":return t=s.data,t===ch&&dh?null:t;default:return null}}function eN(t,s){if(ji)return t==="compositionend"||!Cx&&Og(t,s)?(t=Rg(),jc=wx=sn=null,ji=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Lg&&s.locale!=="ko"?null:s.data;default:return null}}var tN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!tN[t.type]:s==="textarea"}function Mg(t,s,r,a){fg(a),s=Wc(s,"onChange"),0<s.length&&(r=new kx("onChange","change",null,r,a),t.push({event:r,listeners:s}))}var Ol=null,ao=null;function sN(t){Kg(t,0)}function kd(t){var s=ki(t);if(og(s))return t}function rN(t,s){if(t==="change")return s}var Bg=!1;if(Oa){var s0;if(Oa){var r0="oninput"in document;if(!r0){var xh=document.createElement("div");xh.setAttribute("oninput","return;"),r0=typeof xh.oninput=="function"}s0=r0}else s0=!1;Bg=s0&&(!document.documentMode||9<document.documentMode)}function mh(){Ol&&(Ol.detachEvent("onpropertychange",Ug),ao=Ol=null)}function Ug(t){if(t.propertyName==="value"&&kd(ao)){var s=[];Mg(s,ao,t,yx(t)),bg(sN,s)}}function aN(t,s,r){t==="focusin"?(mh(),Ol=s,ao=r,Ol.attachEvent("onpropertychange",Ug)):t==="focusout"&&mh()}function nN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kd(ao)}function iN(t,s){if(t==="click")return kd(s)}function lN(t,s){if(t==="input"||t==="change")return kd(s)}function oN(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var aa=typeof Object.is=="function"?Object.is:oN;function no(t,s){if(aa(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),a=Object.keys(s);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!z0.call(s,n)||!aa(t[n],s[n]))return!1}return!0}function hh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fh(t,s){var r=hh(t);t=0;for(var a;r;){if(r.nodeType===3){if(a=t+r.textContent.length,t<=s&&a>=s)return{node:r,offset:s-t};t=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hh(r)}}function $g(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?$g(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function zg(){for(var t=window,s=Oc();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=Oc(t.document)}return s}function _x(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function cN(t){var s=zg(),r=t.focusedElem,a=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&$g(r.ownerDocument.documentElement,r)){if(a!==null&&_x(r)){if(s=a.start,t=a.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var n=r.textContent.length,i=Math.min(a.start,n);a=a.end===void 0?i:Math.min(a.end,n),!t.extend&&i>a&&(n=a,a=i,i=n),n=fh(r,i);var l=fh(r,a);n&&l&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(s=s.createRange(),s.setStart(n.node,n.offset),t.removeAllRanges(),i>a?(t.addRange(s),t.extend(l.node,l.offset)):(s.setEnd(l.node,l.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dN=Oa&&"documentMode"in document&&11>=document.documentMode,Ni=null,lu=null,Il=null,ou=!1;function ph(t,s,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ou||Ni==null||Ni!==Oc(a)||(a=Ni,"selectionStart"in a&&_x(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Il&&no(Il,a)||(Il=a,a=Wc(lu,"onSelect"),0<a.length&&(s=new kx("onSelect","select",null,s,r),t.push({event:s,listeners:a}),s.target=Ni)))}function Yo(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var wi={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionend:Yo("Transition","TransitionEnd")},a0={},Wg={};Oa&&(Wg=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);function Sd(t){if(a0[t])return a0[t];if(!wi[t])return t;var s=wi[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in Wg)return a0[t]=s[r];return t}var Vg=Sd("animationend"),Hg=Sd("animationiteration"),Gg=Sd("animationstart"),qg=Sd("transitionend"),Jg=new Map,gh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kn(t,s){Jg.set(t,s),ii(s,[t])}for(var n0=0;n0<gh.length;n0++){var i0=gh[n0],uN=i0.toLowerCase(),xN=i0[0].toUpperCase()+i0.slice(1);kn(uN,"on"+xN)}kn(Vg,"onAnimationEnd");kn(Hg,"onAnimationIteration");kn(Gg,"onAnimationStart");kn("dblclick","onDoubleClick");kn("focusin","onFocus");kn("focusout","onBlur");kn(qg,"onTransitionEnd");Wi("onMouseEnter",["mouseout","mouseover"]);Wi("onMouseLeave",["mouseout","mouseover"]);Wi("onPointerEnter",["pointerout","pointerover"]);Wi("onPointerLeave",["pointerout","pointerover"]);ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ii("onBeforeInput",["compositionend","keypress","textInput","paste"]);ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sl));function yh(t,s,r){var a=t.type||"unknown-event";t.currentTarget=r,u1(a,s,void 0,t),t.currentTarget=null}function Kg(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var a=t[r],n=a.event;a=a.listeners;e:{var i=void 0;if(s)for(var l=a.length-1;0<=l;l--){var o=a[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&n.isPropagationStopped())break e;yh(n,o,d),i=c}else for(l=0;l<a.length;l++){if(o=a[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&n.isPropagationStopped())break e;yh(n,o,d),i=c}}}if(Mc)throw t=ru,Mc=!1,ru=null,t}function Ot(t,s){var r=s[mu];r===void 0&&(r=s[mu]=new Set);var a=t+"__bubble";r.has(a)||(Yg(s,t,2,!1),r.add(a))}function l0(t,s,r){var a=0;s&&(a|=4),Yg(r,t,a,s)}var Xo="_reactListening"+Math.random().toString(36).slice(2);function io(t){if(!t[Xo]){t[Xo]=!0,rg.forEach(function(r){r!=="selectionchange"&&(mN.has(r)||l0(r,!1,t),l0(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Xo]||(s[Xo]=!0,l0("selectionchange",!1,s))}}function Yg(t,s,r,a){switch(Dg(s)){case 1:var n=_1;break;case 4:n=T1;break;default:n=Nx}r=n.bind(null,s,r,t),n=void 0,!su||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(n=!0),a?n!==void 0?t.addEventListener(s,r,{capture:!0,passive:n}):t.addEventListener(s,r,!0):n!==void 0?t.addEventListener(s,r,{passive:n}):t.addEventListener(s,r,!1)}function o0(t,s,r,a,n){var i=a;if(!(s&1)&&!(s&2)&&a!==null)e:for(;;){if(a===null)return;var l=a.tag;if(l===3||l===4){var o=a.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(l===4)for(l=a.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;l=l.return}for(;o!==null;){if(l=Mn(o),l===null)return;if(c=l.tag,c===5||c===6){a=i=l;continue e}o=o.parentNode}}a=a.return}bg(function(){var d=i,u=yx(r),p=[];e:{var m=Jg.get(t);if(m!==void 0){var f=kx,h=t;switch(t){case"keypress":if(Nc(r)===0)break e;case"keydown":case"keyup":f=W1;break;case"focusin":h="focus",f=t0;break;case"focusout":h="blur",f=t0;break;case"beforeblur":case"afterblur":f=t0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=ih;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=A1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=G1;break;case Vg:case Hg:case Gg:f=R1;break;case qg:f=J1;break;case"scroll":f=E1;break;case"wheel":f=Y1;break;case"copy":case"cut":case"paste":f=O1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=oh}var x=(s&4)!==0,g=!x&&t==="scroll",j=x?m!==null?m+"Capture":null:m;x=[];for(var b=d,N;b!==null;){N=b;var C=N.stateNode;if(N.tag===5&&C!==null&&(N=C,j!==null&&(C=eo(b,j),C!=null&&x.push(lo(b,C,N)))),g)break;b=b.return}0<x.length&&(m=new f(m,h,null,r,u),p.push({event:m,listeners:x}))}}if(!(s&7)){e:{if(m=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",m&&r!==eu&&(h=r.relatedTarget||r.fromElement)&&(Mn(h)||h[Ia]))break e;if((f||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,f?(h=r.relatedTarget||r.toElement,f=d,h=h?Mn(h):null,h!==null&&(g=li(h),h!==g||h.tag!==5&&h.tag!==6)&&(h=null)):(f=null,h=d),f!==h)){if(x=ih,C="onMouseLeave",j="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(x=oh,C="onPointerLeave",j="onPointerEnter",b="pointer"),g=f==null?m:ki(f),N=h==null?m:ki(h),m=new x(C,b+"leave",f,r,u),m.target=g,m.relatedTarget=N,C=null,Mn(u)===d&&(x=new x(j,b+"enter",h,r,u),x.target=N,x.relatedTarget=g,C=x),g=C,f&&h)t:{for(x=f,j=h,b=0,N=x;N;N=fi(N))b++;for(N=0,C=j;C;C=fi(C))N++;for(;0<b-N;)x=fi(x),b--;for(;0<N-b;)j=fi(j),N--;for(;b--;){if(x===j||j!==null&&x===j.alternate)break t;x=fi(x),j=fi(j)}x=null}else x=null;f!==null&&bh(p,m,f,x,!1),h!==null&&g!==null&&bh(p,g,h,x,!0)}}e:{if(m=d?ki(d):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var A=rN;else if(uh(m))if(Bg)A=lN;else{A=nN;var F=aN}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(A=iN);if(A&&(A=A(t,d))){Mg(p,A,r,u);break e}F&&F(t,m,d),t==="focusout"&&(F=m._wrapperState)&&F.controlled&&m.type==="number"&&K0(m,"number",m.value)}switch(F=d?ki(d):window,t){case"focusin":(uh(F)||F.contentEditable==="true")&&(Ni=F,lu=d,Il=null);break;case"focusout":Il=lu=Ni=null;break;case"mousedown":ou=!0;break;case"contextmenu":case"mouseup":case"dragend":ou=!1,ph(p,r,u);break;case"selectionchange":if(dN)break;case"keydown":case"keyup":ph(p,r,u)}var w;if(Cx)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ji?Og(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(Lg&&r.locale!=="ko"&&(ji||_!=="onCompositionStart"?_==="onCompositionEnd"&&ji&&(w=Rg()):(sn=u,wx="value"in sn?sn.value:sn.textContent,ji=!0)),F=Wc(d,_),0<F.length&&(_=new lh(_,t,null,r,u),p.push({event:_,listeners:F}),w?_.data=w:(w=Ig(r),w!==null&&(_.data=w)))),(w=Q1?Z1(t,r):eN(t,r))&&(d=Wc(d,"onBeforeInput"),0<d.length&&(u=new lh("onBeforeInput","beforeinput",null,r,u),p.push({event:u,listeners:d}),u.data=w))}Kg(p,s)})}function lo(t,s,r){return{instance:t,listener:s,currentTarget:r}}function Wc(t,s){for(var r=s+"Capture",a=[];t!==null;){var n=t,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=eo(t,r),i!=null&&a.unshift(lo(t,i,n)),i=eo(t,s),i!=null&&a.push(lo(t,i,n))),t=t.return}return a}function fi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function bh(t,s,r,a,n){for(var i=s._reactName,l=[];r!==null&&r!==a;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===a)break;o.tag===5&&d!==null&&(o=d,n?(c=eo(r,i),c!=null&&l.unshift(lo(r,c,o))):n||(c=eo(r,i),c!=null&&l.push(lo(r,c,o)))),r=r.return}l.length!==0&&t.push({event:s,listeners:l})}var hN=/\r\n?/g,fN=/\u0000|\uFFFD/g;function vh(t){return(typeof t=="string"?t:""+t).replace(hN,`
`).replace(fN,"")}function Qo(t,s,r){if(s=vh(s),vh(t)!==s&&r)throw Error(ke(425))}function Vc(){}var cu=null,du=null;function uu(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var xu=typeof setTimeout=="function"?setTimeout:void 0,pN=typeof clearTimeout=="function"?clearTimeout:void 0,jh=typeof Promise=="function"?Promise:void 0,gN=typeof queueMicrotask=="function"?queueMicrotask:typeof jh<"u"?function(t){return jh.resolve(null).then(t).catch(yN)}:xu;function yN(t){setTimeout(function(){throw t})}function c0(t,s){var r=s,a=0;do{var n=r.nextSibling;if(t.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(a===0){t.removeChild(n),ro(s);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=n}while(r);ro(s)}function un(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Nh(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var sl=Math.random().toString(36).slice(2),ua="__reactFiber$"+sl,oo="__reactProps$"+sl,Ia="__reactContainer$"+sl,mu="__reactEvents$"+sl,bN="__reactListeners$"+sl,vN="__reactHandles$"+sl;function Mn(t){var s=t[ua];if(s)return s;for(var r=t.parentNode;r;){if(s=r[Ia]||r[ua]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=Nh(t);t!==null;){if(r=t[ua])return r;t=Nh(t)}return s}t=r,r=t.parentNode}return null}function Ro(t){return t=t[ua]||t[Ia],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ki(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ke(33))}function Cd(t){return t[oo]||null}var hu=[],Si=-1;function Sn(t){return{current:t}}function It(t){0>Si||(t.current=hu[Si],hu[Si]=null,Si--)}function Rt(t,s){Si++,hu[Si]=t.current,t.current=s}var vn={},zs=Sn(vn),or=Sn(!1),Yn=vn;function Vi(t,s){var r=t.type.contextTypes;if(!r)return vn;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in r)n[i]=s[i];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=n),n}function cr(t){return t=t.childContextTypes,t!=null}function Hc(){It(or),It(zs)}function wh(t,s,r){if(zs.current!==vn)throw Error(ke(168));Rt(zs,s),Rt(or,r)}function Xg(t,s,r){var a=t.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var n in a)if(!(n in s))throw Error(ke(108,a1(t)||"Unknown",n));return Gt({},r,a)}function Gc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vn,Yn=zs.current,Rt(zs,t),Rt(or,or.current),!0}function kh(t,s,r){var a=t.stateNode;if(!a)throw Error(ke(169));r?(t=Xg(t,s,Yn),a.__reactInternalMemoizedMergedChildContext=t,It(or),It(zs),Rt(zs,t)):It(or),Rt(or,r)}var _a=null,_d=!1,d0=!1;function Qg(t){_a===null?_a=[t]:_a.push(t)}function jN(t){_d=!0,Qg(t)}function Cn(){if(!d0&&_a!==null){d0=!0;var t=0,s=Et;try{var r=_a;for(Et=1;t<r.length;t++){var a=r[t];do a=a(!0);while(a!==null)}_a=null,_d=!1}catch(n){throw _a!==null&&(_a=_a.slice(t+1)),wg(bx,Cn),n}finally{Et=s,d0=!1}}return null}var Ci=[],_i=0,qc=null,Jc=0,Fr=[],Ar=0,Xn=null,Ta=1,Ea="";function An(t,s){Ci[_i++]=Jc,Ci[_i++]=qc,qc=t,Jc=s}function Zg(t,s,r){Fr[Ar++]=Ta,Fr[Ar++]=Ea,Fr[Ar++]=Xn,Xn=t;var a=Ta;t=Ea;var n=32-ea(a)-1;a&=~(1<<n),r+=1;var i=32-ea(s)+n;if(30<i){var l=n-n%5;i=(a&(1<<l)-1).toString(32),a>>=l,n-=l,Ta=1<<32-ea(s)+n|r<<n|a,Ea=i+t}else Ta=1<<i|r<<n|a,Ea=t}function Tx(t){t.return!==null&&(An(t,1),Zg(t,1,0))}function Ex(t){for(;t===qc;)qc=Ci[--_i],Ci[_i]=null,Jc=Ci[--_i],Ci[_i]=null;for(;t===Xn;)Xn=Fr[--Ar],Fr[Ar]=null,Ea=Fr[--Ar],Fr[Ar]=null,Ta=Fr[--Ar],Fr[Ar]=null}var vr=null,yr=null,$t=!1,Yr=null;function ey(t,s){var r=Rr(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function Sh(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,vr=t,yr=un(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,vr=t,yr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=Xn!==null?{id:Ta,overflow:Ea}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=Rr(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,vr=t,yr=null,!0):!1;default:return!1}}function fu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pu(t){if($t){var s=yr;if(s){var r=s;if(!Sh(t,s)){if(fu(t))throw Error(ke(418));s=un(r.nextSibling);var a=vr;s&&Sh(t,s)?ey(a,r):(t.flags=t.flags&-4097|2,$t=!1,vr=t)}}else{if(fu(t))throw Error(ke(418));t.flags=t.flags&-4097|2,$t=!1,vr=t}}}function Ch(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vr=t}function Zo(t){if(t!==vr)return!1;if(!$t)return Ch(t),$t=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!uu(t.type,t.memoizedProps)),s&&(s=yr)){if(fu(t))throw ty(),Error(ke(418));for(;s;)ey(t,s),s=un(s.nextSibling)}if(Ch(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ke(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){yr=un(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}yr=null}}else yr=vr?un(t.stateNode.nextSibling):null;return!0}function ty(){for(var t=yr;t;)t=un(t.nextSibling)}function Hi(){yr=vr=null,$t=!1}function Fx(t){Yr===null?Yr=[t]:Yr.push(t)}var NN=Wa.ReactCurrentBatchConfig;function fl(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ke(309));var a=r.stateNode}if(!a)throw Error(ke(147,t));var n=a,i=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===i?s.ref:(s=function(l){var o=n.refs;l===null?delete o[i]:o[i]=l},s._stringRef=i,s)}if(typeof t!="string")throw Error(ke(284));if(!r._owner)throw Error(ke(290,t))}return t}function ec(t,s){throw t=Object.prototype.toString.call(s),Error(ke(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function _h(t){var s=t._init;return s(t._payload)}function sy(t){function s(j,b){if(t){var N=j.deletions;N===null?(j.deletions=[b],j.flags|=16):N.push(b)}}function r(j,b){if(!t)return null;for(;b!==null;)s(j,b),b=b.sibling;return null}function a(j,b){for(j=new Map;b!==null;)b.key!==null?j.set(b.key,b):j.set(b.index,b),b=b.sibling;return j}function n(j,b){return j=fn(j,b),j.index=0,j.sibling=null,j}function i(j,b,N){return j.index=N,t?(N=j.alternate,N!==null?(N=N.index,N<b?(j.flags|=2,b):N):(j.flags|=2,b)):(j.flags|=1048576,b)}function l(j){return t&&j.alternate===null&&(j.flags|=2),j}function o(j,b,N,C){return b===null||b.tag!==6?(b=g0(N,j.mode,C),b.return=j,b):(b=n(b,N),b.return=j,b)}function c(j,b,N,C){var A=N.type;return A===vi?u(j,b,N.props.children,C,N.key):b!==null&&(b.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Xa&&_h(A)===b.type)?(C=n(b,N.props),C.ref=fl(j,b,N),C.return=j,C):(C=Ec(N.type,N.key,N.props,null,j.mode,C),C.ref=fl(j,b,N),C.return=j,C)}function d(j,b,N,C){return b===null||b.tag!==4||b.stateNode.containerInfo!==N.containerInfo||b.stateNode.implementation!==N.implementation?(b=y0(N,j.mode,C),b.return=j,b):(b=n(b,N.children||[]),b.return=j,b)}function u(j,b,N,C,A){return b===null||b.tag!==7?(b=Vn(N,j.mode,C,A),b.return=j,b):(b=n(b,N),b.return=j,b)}function p(j,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return b=g0(""+b,j.mode,N),b.return=j,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Wo:return N=Ec(b.type,b.key,b.props,null,j.mode,N),N.ref=fl(j,null,b),N.return=j,N;case bi:return b=y0(b,j.mode,N),b.return=j,b;case Xa:var C=b._init;return p(j,C(b._payload),N)}if(wl(b)||dl(b))return b=Vn(b,j.mode,N,null),b.return=j,b;ec(j,b)}return null}function m(j,b,N,C){var A=b!==null?b.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return A!==null?null:o(j,b,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Wo:return N.key===A?c(j,b,N,C):null;case bi:return N.key===A?d(j,b,N,C):null;case Xa:return A=N._init,m(j,b,A(N._payload),C)}if(wl(N)||dl(N))return A!==null?null:u(j,b,N,C,null);ec(j,N)}return null}function f(j,b,N,C,A){if(typeof C=="string"&&C!==""||typeof C=="number")return j=j.get(N)||null,o(b,j,""+C,A);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Wo:return j=j.get(C.key===null?N:C.key)||null,c(b,j,C,A);case bi:return j=j.get(C.key===null?N:C.key)||null,d(b,j,C,A);case Xa:var F=C._init;return f(j,b,N,F(C._payload),A)}if(wl(C)||dl(C))return j=j.get(N)||null,u(b,j,C,A,null);ec(b,C)}return null}function h(j,b,N,C){for(var A=null,F=null,w=b,_=b=0,v=null;w!==null&&_<N.length;_++){w.index>_?(v=w,w=null):v=w.sibling;var S=m(j,w,N[_],C);if(S===null){w===null&&(w=v);break}t&&w&&S.alternate===null&&s(j,w),b=i(S,b,_),F===null?A=S:F.sibling=S,F=S,w=v}if(_===N.length)return r(j,w),$t&&An(j,_),A;if(w===null){for(;_<N.length;_++)w=p(j,N[_],C),w!==null&&(b=i(w,b,_),F===null?A=w:F.sibling=w,F=w);return $t&&An(j,_),A}for(w=a(j,w);_<N.length;_++)v=f(w,j,_,N[_],C),v!==null&&(t&&v.alternate!==null&&w.delete(v.key===null?_:v.key),b=i(v,b,_),F===null?A=v:F.sibling=v,F=v);return t&&w.forEach(function(R){return s(j,R)}),$t&&An(j,_),A}function x(j,b,N,C){var A=dl(N);if(typeof A!="function")throw Error(ke(150));if(N=A.call(N),N==null)throw Error(ke(151));for(var F=A=null,w=b,_=b=0,v=null,S=N.next();w!==null&&!S.done;_++,S=N.next()){w.index>_?(v=w,w=null):v=w.sibling;var R=m(j,w,S.value,C);if(R===null){w===null&&(w=v);break}t&&w&&R.alternate===null&&s(j,w),b=i(R,b,_),F===null?A=R:F.sibling=R,F=R,w=v}if(S.done)return r(j,w),$t&&An(j,_),A;if(w===null){for(;!S.done;_++,S=N.next())S=p(j,S.value,C),S!==null&&(b=i(S,b,_),F===null?A=S:F.sibling=S,F=S);return $t&&An(j,_),A}for(w=a(j,w);!S.done;_++,S=N.next())S=f(w,j,_,S.value,C),S!==null&&(t&&S.alternate!==null&&w.delete(S.key===null?_:S.key),b=i(S,b,_),F===null?A=S:F.sibling=S,F=S);return t&&w.forEach(function(D){return s(j,D)}),$t&&An(j,_),A}function g(j,b,N,C){if(typeof N=="object"&&N!==null&&N.type===vi&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Wo:e:{for(var A=N.key,F=b;F!==null;){if(F.key===A){if(A=N.type,A===vi){if(F.tag===7){r(j,F.sibling),b=n(F,N.props.children),b.return=j,j=b;break e}}else if(F.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Xa&&_h(A)===F.type){r(j,F.sibling),b=n(F,N.props),b.ref=fl(j,F,N),b.return=j,j=b;break e}r(j,F);break}else s(j,F);F=F.sibling}N.type===vi?(b=Vn(N.props.children,j.mode,C,N.key),b.return=j,j=b):(C=Ec(N.type,N.key,N.props,null,j.mode,C),C.ref=fl(j,b,N),C.return=j,j=C)}return l(j);case bi:e:{for(F=N.key;b!==null;){if(b.key===F)if(b.tag===4&&b.stateNode.containerInfo===N.containerInfo&&b.stateNode.implementation===N.implementation){r(j,b.sibling),b=n(b,N.children||[]),b.return=j,j=b;break e}else{r(j,b);break}else s(j,b);b=b.sibling}b=y0(N,j.mode,C),b.return=j,j=b}return l(j);case Xa:return F=N._init,g(j,b,F(N._payload),C)}if(wl(N))return h(j,b,N,C);if(dl(N))return x(j,b,N,C);ec(j,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,b!==null&&b.tag===6?(r(j,b.sibling),b=n(b,N),b.return=j,j=b):(r(j,b),b=g0(N,j.mode,C),b.return=j,j=b),l(j)):r(j,b)}return g}var Gi=sy(!0),ry=sy(!1),Kc=Sn(null),Yc=null,Ti=null,Ax=null;function Px(){Ax=Ti=Yc=null}function Dx(t){var s=Kc.current;It(Kc),t._currentValue=s}function gu(t,s,r){for(;t!==null;){var a=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),t===r)break;t=t.return}}function Oi(t,s){Yc=t,Ax=Ti=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(lr=!0),t.firstContext=null)}function Or(t){var s=t._currentValue;if(Ax!==t)if(t={context:t,memoizedValue:s,next:null},Ti===null){if(Yc===null)throw Error(ke(308));Ti=t,Yc.dependencies={lanes:0,firstContext:t}}else Ti=Ti.next=t;return s}var Bn=null;function Rx(t){Bn===null?Bn=[t]:Bn.push(t)}function ay(t,s,r,a){var n=s.interleaved;return n===null?(r.next=r,Rx(s)):(r.next=n.next,n.next=r),s.interleaved=r,Ma(t,a)}function Ma(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Qa=!1;function Lx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ny(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Aa(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function xn(t,s,r){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,jt&2){var n=a.pending;return n===null?s.next=s:(s.next=n.next,n.next=s),a.pending=s,Ma(t,r)}return n=a.interleaved,n===null?(s.next=s,Rx(a)):(s.next=n.next,n.next=s),a.interleaved=s,Ma(t,r)}function wc(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,vx(t,r)}}function Th(t,s){var r=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var n=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?n=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?n=i=s:i=i.next=s}else n=i=s;r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:a.shared,effects:a.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function Xc(t,s,r,a){var n=t.updateQueue;Qa=!1;var i=n.firstBaseUpdate,l=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var p=n.baseState;l=0,u=d=c=null,o=i;do{var m=o.lane,f=o.eventTime;if((a&m)===m){u!==null&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var h=t,x=o;switch(m=s,f=r,x.tag){case 1:if(h=x.payload,typeof h=="function"){p=h.call(f,p,m);break e}p=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=x.payload,m=typeof h=="function"?h.call(f,p,m):h,m==null)break e;p=Gt({},p,m);break e;case 2:Qa=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,m=n.effects,m===null?n.effects=[o]:m.push(o))}else f={eventTime:f,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=f,c=p):u=u.next=f,l|=m;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;m=o,o=m.next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}while(!0);if(u===null&&(c=p),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=u,s=n.shared.interleaved,s!==null){n=s;do l|=n.lane,n=n.next;while(n!==s)}else i===null&&(n.shared.lanes=0);Zn|=l,t.lanes=l,t.memoizedState=p}}function Eh(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var a=t[s],n=a.callback;if(n!==null){if(a.callback=null,a=r,typeof n!="function")throw Error(ke(191,n));n.call(a)}}}var Lo={},ma=Sn(Lo),co=Sn(Lo),uo=Sn(Lo);function Un(t){if(t===Lo)throw Error(ke(174));return t}function Ox(t,s){switch(Rt(uo,s),Rt(co,t),Rt(ma,Lo),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:X0(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=X0(s,t)}It(ma),Rt(ma,s)}function qi(){It(ma),It(co),It(uo)}function iy(t){Un(uo.current);var s=Un(ma.current),r=X0(s,t.type);s!==r&&(Rt(co,t),Rt(ma,r))}function Ix(t){co.current===t&&(It(ma),It(co))}var Wt=Sn(0);function Qc(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var u0=[];function Mx(){for(var t=0;t<u0.length;t++)u0[t]._workInProgressVersionPrimary=null;u0.length=0}var kc=Wa.ReactCurrentDispatcher,x0=Wa.ReactCurrentBatchConfig,Qn=0,Ht=null,xs=null,js=null,Zc=!1,Ml=!1,xo=0,wN=0;function Ds(){throw Error(ke(321))}function Bx(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!aa(t[r],s[r]))return!1;return!0}function Ux(t,s,r,a,n,i){if(Qn=i,Ht=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,kc.current=t===null||t.memoizedState===null?_N:TN,t=r(a,n),Ml){i=0;do{if(Ml=!1,xo=0,25<=i)throw Error(ke(301));i+=1,js=xs=null,s.updateQueue=null,kc.current=EN,t=r(a,n)}while(Ml)}if(kc.current=ed,s=xs!==null&&xs.next!==null,Qn=0,js=xs=Ht=null,Zc=!1,s)throw Error(ke(300));return t}function $x(){var t=xo!==0;return xo=0,t}function da(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return js===null?Ht.memoizedState=js=t:js=js.next=t,js}function Ir(){if(xs===null){var t=Ht.alternate;t=t!==null?t.memoizedState:null}else t=xs.next;var s=js===null?Ht.memoizedState:js.next;if(s!==null)js=s,xs=t;else{if(t===null)throw Error(ke(310));xs=t,t={memoizedState:xs.memoizedState,baseState:xs.baseState,baseQueue:xs.baseQueue,queue:xs.queue,next:null},js===null?Ht.memoizedState=js=t:js=js.next=t}return js}function mo(t,s){return typeof s=="function"?s(t):s}function m0(t){var s=Ir(),r=s.queue;if(r===null)throw Error(ke(311));r.lastRenderedReducer=t;var a=xs,n=a.baseQueue,i=r.pending;if(i!==null){if(n!==null){var l=n.next;n.next=i.next,i.next=l}a.baseQueue=n=i,r.pending=null}if(n!==null){i=n.next,a=a.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((Qn&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:t(a,d.action);else{var p={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=p,l=a):c=c.next=p,Ht.lanes|=u,Zn|=u}d=d.next}while(d!==null&&d!==i);c===null?l=a:c.next=o,aa(a,s.memoizedState)||(lr=!0),s.memoizedState=a,s.baseState=l,s.baseQueue=c,r.lastRenderedState=a}if(t=r.interleaved,t!==null){n=t;do i=n.lane,Ht.lanes|=i,Zn|=i,n=n.next;while(n!==t)}else n===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function h0(t){var s=Ir(),r=s.queue;if(r===null)throw Error(ke(311));r.lastRenderedReducer=t;var a=r.dispatch,n=r.pending,i=s.memoizedState;if(n!==null){r.pending=null;var l=n=n.next;do i=t(i,l.action),l=l.next;while(l!==n);aa(i,s.memoizedState)||(lr=!0),s.memoizedState=i,s.baseQueue===null&&(s.baseState=i),r.lastRenderedState=i}return[i,a]}function ly(){}function oy(t,s){var r=Ht,a=Ir(),n=s(),i=!aa(a.memoizedState,n);if(i&&(a.memoizedState=n,lr=!0),a=a.queue,zx(uy.bind(null,r,a,t),[t]),a.getSnapshot!==s||i||js!==null&&js.memoizedState.tag&1){if(r.flags|=2048,ho(9,dy.bind(null,r,a,n,s),void 0,null),ws===null)throw Error(ke(349));Qn&30||cy(r,s,n)}return n}function cy(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=Ht.updateQueue,s===null?(s={lastEffect:null,stores:null},Ht.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function dy(t,s,r,a){s.value=r,s.getSnapshot=a,xy(s)&&my(t)}function uy(t,s,r){return r(function(){xy(s)&&my(t)})}function xy(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!aa(t,r)}catch{return!0}}function my(t){var s=Ma(t,1);s!==null&&ta(s,t,1,-1)}function Fh(t){var s=da();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mo,lastRenderedState:t},s.queue=t,t=t.dispatch=CN.bind(null,Ht,t),[s.memoizedState,t]}function ho(t,s,r,a){return t={tag:t,create:s,destroy:r,deps:a,next:null},s=Ht.updateQueue,s===null?(s={lastEffect:null,stores:null},Ht.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(a=r.next,r.next=t,t.next=a,s.lastEffect=t)),t}function hy(){return Ir().memoizedState}function Sc(t,s,r,a){var n=da();Ht.flags|=t,n.memoizedState=ho(1|s,r,void 0,a===void 0?null:a)}function Td(t,s,r,a){var n=Ir();a=a===void 0?null:a;var i=void 0;if(xs!==null){var l=xs.memoizedState;if(i=l.destroy,a!==null&&Bx(a,l.deps)){n.memoizedState=ho(s,r,i,a);return}}Ht.flags|=t,n.memoizedState=ho(1|s,r,i,a)}function Ah(t,s){return Sc(8390656,8,t,s)}function zx(t,s){return Td(2048,8,t,s)}function fy(t,s){return Td(4,2,t,s)}function py(t,s){return Td(4,4,t,s)}function gy(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function yy(t,s,r){return r=r!=null?r.concat([t]):null,Td(4,4,gy.bind(null,s,t),r)}function Wx(){}function by(t,s){var r=Ir();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&Bx(s,a[1])?a[0]:(r.memoizedState=[t,s],t)}function vy(t,s){var r=Ir();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&Bx(s,a[1])?a[0]:(t=t(),r.memoizedState=[t,s],t)}function jy(t,s,r){return Qn&21?(aa(r,s)||(r=Cg(),Ht.lanes|=r,Zn|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,lr=!0),t.memoizedState=r)}function kN(t,s){var r=Et;Et=r!==0&&4>r?r:4,t(!0);var a=x0.transition;x0.transition={};try{t(!1),s()}finally{Et=r,x0.transition=a}}function Ny(){return Ir().memoizedState}function SN(t,s,r){var a=hn(t);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},wy(t))ky(s,r);else if(r=ay(t,s,r,a),r!==null){var n=Xs();ta(r,t,a,n),Sy(r,s,a)}}function CN(t,s,r){var a=hn(t),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(wy(t))ky(s,n);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=s.lastRenderedReducer,i!==null))try{var l=s.lastRenderedState,o=i(l,r);if(n.hasEagerState=!0,n.eagerState=o,aa(o,l)){var c=s.interleaved;c===null?(n.next=n,Rx(s)):(n.next=c.next,c.next=n),s.interleaved=n;return}}catch{}finally{}r=ay(t,s,n,a),r!==null&&(n=Xs(),ta(r,t,a,n),Sy(r,s,a))}}function wy(t){var s=t.alternate;return t===Ht||s!==null&&s===Ht}function ky(t,s){Ml=Zc=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function Sy(t,s,r){if(r&4194240){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,vx(t,r)}}var ed={readContext:Or,useCallback:Ds,useContext:Ds,useEffect:Ds,useImperativeHandle:Ds,useInsertionEffect:Ds,useLayoutEffect:Ds,useMemo:Ds,useReducer:Ds,useRef:Ds,useState:Ds,useDebugValue:Ds,useDeferredValue:Ds,useTransition:Ds,useMutableSource:Ds,useSyncExternalStore:Ds,useId:Ds,unstable_isNewReconciler:!1},_N={readContext:Or,useCallback:function(t,s){return da().memoizedState=[t,s===void 0?null:s],t},useContext:Or,useEffect:Ah,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,Sc(4194308,4,gy.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Sc(4194308,4,t,s)},useInsertionEffect:function(t,s){return Sc(4,2,t,s)},useMemo:function(t,s){var r=da();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var a=da();return s=r!==void 0?r(s):s,a.memoizedState=a.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=SN.bind(null,Ht,t),[a.memoizedState,t]},useRef:function(t){var s=da();return t={current:t},s.memoizedState=t},useState:Fh,useDebugValue:Wx,useDeferredValue:function(t){return da().memoizedState=t},useTransition:function(){var t=Fh(!1),s=t[0];return t=kN.bind(null,t[1]),da().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var a=Ht,n=da();if($t){if(r===void 0)throw Error(ke(407));r=r()}else{if(r=s(),ws===null)throw Error(ke(349));Qn&30||cy(a,s,r)}n.memoizedState=r;var i={value:r,getSnapshot:s};return n.queue=i,Ah(uy.bind(null,a,i,t),[t]),a.flags|=2048,ho(9,dy.bind(null,a,i,r,s),void 0,null),r},useId:function(){var t=da(),s=ws.identifierPrefix;if($t){var r=Ea,a=Ta;r=(a&~(1<<32-ea(a)-1)).toString(32)+r,s=":"+s+"R"+r,r=xo++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=wN++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},TN={readContext:Or,useCallback:by,useContext:Or,useEffect:zx,useImperativeHandle:yy,useInsertionEffect:fy,useLayoutEffect:py,useMemo:vy,useReducer:m0,useRef:hy,useState:function(){return m0(mo)},useDebugValue:Wx,useDeferredValue:function(t){var s=Ir();return jy(s,xs.memoizedState,t)},useTransition:function(){var t=m0(mo)[0],s=Ir().memoizedState;return[t,s]},useMutableSource:ly,useSyncExternalStore:oy,useId:Ny,unstable_isNewReconciler:!1},EN={readContext:Or,useCallback:by,useContext:Or,useEffect:zx,useImperativeHandle:yy,useInsertionEffect:fy,useLayoutEffect:py,useMemo:vy,useReducer:h0,useRef:hy,useState:function(){return h0(mo)},useDebugValue:Wx,useDeferredValue:function(t){var s=Ir();return xs===null?s.memoizedState=t:jy(s,xs.memoizedState,t)},useTransition:function(){var t=h0(mo)[0],s=Ir().memoizedState;return[t,s]},useMutableSource:ly,useSyncExternalStore:oy,useId:Ny,unstable_isNewReconciler:!1};function Gr(t,s){if(t&&t.defaultProps){s=Gt({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function yu(t,s,r,a){s=t.memoizedState,r=r(a,s),r=r==null?s:Gt({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ed={isMounted:function(t){return(t=t._reactInternals)?li(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var a=Xs(),n=hn(t),i=Aa(a,n);i.payload=s,r!=null&&(i.callback=r),s=xn(t,i,n),s!==null&&(ta(s,t,n,a),wc(s,t,n))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var a=Xs(),n=hn(t),i=Aa(a,n);i.tag=1,i.payload=s,r!=null&&(i.callback=r),s=xn(t,i,n),s!==null&&(ta(s,t,n,a),wc(s,t,n))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=Xs(),a=hn(t),n=Aa(r,a);n.tag=2,s!=null&&(n.callback=s),s=xn(t,n,a),s!==null&&(ta(s,t,a,r),wc(s,t,a))}};function Ph(t,s,r,a,n,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,i,l):s.prototype&&s.prototype.isPureReactComponent?!no(r,a)||!no(n,i):!0}function Cy(t,s,r){var a=!1,n=vn,i=s.contextType;return typeof i=="object"&&i!==null?i=Or(i):(n=cr(s)?Yn:zs.current,a=s.contextTypes,i=(a=a!=null)?Vi(t,n):vn),s=new s(r,i),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ed,t.stateNode=s,s._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=i),s}function Dh(t,s,r,a){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,a),s.state!==t&&Ed.enqueueReplaceState(s,s.state,null)}function bu(t,s,r,a){var n=t.stateNode;n.props=r,n.state=t.memoizedState,n.refs={},Lx(t);var i=s.contextType;typeof i=="object"&&i!==null?n.context=Or(i):(i=cr(s)?Yn:zs.current,n.context=Vi(t,i)),n.state=t.memoizedState,i=s.getDerivedStateFromProps,typeof i=="function"&&(yu(t,s,i,r),n.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(s=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),s!==n.state&&Ed.enqueueReplaceState(n,n.state,null),Xc(t,r,n,a),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function Ji(t,s){try{var r="",a=s;do r+=r1(a),a=a.return;while(a);var n=r}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:s,stack:n,digest:null}}function f0(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function vu(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var FN=typeof WeakMap=="function"?WeakMap:Map;function _y(t,s,r){r=Aa(-1,r),r.tag=3,r.payload={element:null};var a=s.value;return r.callback=function(){sd||(sd=!0,Fu=a),vu(t,s)},r}function Ty(t,s,r){r=Aa(-1,r),r.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var n=s.value;r.payload=function(){return a(n)},r.callback=function(){vu(t,s)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){vu(t,s),typeof a!="function"&&(mn===null?mn=new Set([this]):mn.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})}),r}function Rh(t,s,r){var a=t.pingCache;if(a===null){a=t.pingCache=new FN;var n=new Set;a.set(s,n)}else n=a.get(s),n===void 0&&(n=new Set,a.set(s,n));n.has(r)||(n.add(r),t=VN.bind(null,t,s,r),s.then(t,t))}function Lh(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Oh(t,s,r,a,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=Aa(-1,1),s.tag=2,xn(r,s,1))),r.lanes|=1),t)}var AN=Wa.ReactCurrentOwner,lr=!1;function qs(t,s,r,a){s.child=t===null?ry(s,null,r,a):Gi(s,t.child,r,a)}function Ih(t,s,r,a,n){r=r.render;var i=s.ref;return Oi(s,n),a=Ux(t,s,r,a,i,n),r=$x(),t!==null&&!lr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,Ba(t,s,n)):($t&&r&&Tx(s),s.flags|=1,qs(t,s,a,n),s.child)}function Mh(t,s,r,a,n){if(t===null){var i=r.type;return typeof i=="function"&&!Xx(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=i,Ey(t,s,i,a,n)):(t=Ec(r.type,null,a,s,s.mode,n),t.ref=s.ref,t.return=s,s.child=t)}if(i=t.child,!(t.lanes&n)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:no,r(l,a)&&t.ref===s.ref)return Ba(t,s,n)}return s.flags|=1,t=fn(i,a),t.ref=s.ref,t.return=s,s.child=t}function Ey(t,s,r,a,n){if(t!==null){var i=t.memoizedProps;if(no(i,a)&&t.ref===s.ref)if(lr=!1,s.pendingProps=a=i,(t.lanes&n)!==0)t.flags&131072&&(lr=!0);else return s.lanes=t.lanes,Ba(t,s,n)}return ju(t,s,r,a,n)}function Fy(t,s,r){var a=s.pendingProps,n=a.children,i=t!==null?t.memoizedState:null;if(a.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rt(Fi,hr),hr|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Rt(Fi,hr),hr|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:r,Rt(Fi,hr),hr|=a}else i!==null?(a=i.baseLanes|r,s.memoizedState=null):a=r,Rt(Fi,hr),hr|=a;return qs(t,s,n,r),s.child}function Ay(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function ju(t,s,r,a,n){var i=cr(r)?Yn:zs.current;return i=Vi(s,i),Oi(s,n),r=Ux(t,s,r,a,i,n),a=$x(),t!==null&&!lr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,Ba(t,s,n)):($t&&a&&Tx(s),s.flags|=1,qs(t,s,r,n),s.child)}function Bh(t,s,r,a,n){if(cr(r)){var i=!0;Gc(s)}else i=!1;if(Oi(s,n),s.stateNode===null)Cc(t,s),Cy(s,r,a),bu(s,r,a,n),a=!0;else if(t===null){var l=s.stateNode,o=s.memoizedProps;l.props=o;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=Or(d):(d=cr(r)?Yn:zs.current,d=Vi(s,d));var u=r.getDerivedStateFromProps,p=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";p||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==a||c!==d)&&Dh(s,l,a,d),Qa=!1;var m=s.memoizedState;l.state=m,Xc(s,a,l,n),c=s.memoizedState,o!==a||m!==c||or.current||Qa?(typeof u=="function"&&(yu(s,r,u,a),c=s.memoizedState),(o=Qa||Ph(s,r,o,a,m,c,d))?(p||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(s.flags|=4194308)):(typeof l.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=c),l.props=a,l.state=c,l.context=d,a=o):(typeof l.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{l=s.stateNode,ny(t,s),o=s.memoizedProps,d=s.type===s.elementType?o:Gr(s.type,o),l.props=d,p=s.pendingProps,m=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=Or(c):(c=cr(r)?Yn:zs.current,c=Vi(s,c));var f=r.getDerivedStateFromProps;(u=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==p||m!==c)&&Dh(s,l,a,c),Qa=!1,m=s.memoizedState,l.state=m,Xc(s,a,l,n);var h=s.memoizedState;o!==p||m!==h||or.current||Qa?(typeof f=="function"&&(yu(s,r,f,a),h=s.memoizedState),(d=Qa||Ph(s,r,d,a,m,h,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(a,h,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(a,h,c)),typeof l.componentDidUpdate=="function"&&(s.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(s.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=h),l.props=a,l.state=h,l.context=c,a=d):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(s.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(s.flags|=1024),a=!1)}return Nu(t,s,r,a,i,n)}function Nu(t,s,r,a,n,i){Ay(t,s);var l=(s.flags&128)!==0;if(!a&&!l)return n&&kh(s,r,!1),Ba(t,s,i);a=s.stateNode,AN.current=s;var o=l&&typeof r.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,t!==null&&l?(s.child=Gi(s,t.child,null,i),s.child=Gi(s,null,o,i)):qs(t,s,o,i),s.memoizedState=a.state,n&&kh(s,r,!0),s.child}function Py(t){var s=t.stateNode;s.pendingContext?wh(t,s.pendingContext,s.pendingContext!==s.context):s.context&&wh(t,s.context,!1),Ox(t,s.containerInfo)}function Uh(t,s,r,a,n){return Hi(),Fx(n),s.flags|=256,qs(t,s,r,a),s.child}var wu={dehydrated:null,treeContext:null,retryLane:0};function ku(t){return{baseLanes:t,cachePool:null,transitions:null}}function Dy(t,s,r){var a=s.pendingProps,n=Wt.current,i=!1,l=(s.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(n&2)!==0),o?(i=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),Rt(Wt,n&1),t===null)return pu(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(l=a.children,t=a.fallback,i?(a=s.mode,i=s.child,l={mode:"hidden",children:l},!(a&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Pd(l,a,0,null),t=Vn(t,a,r,null),i.return=s,t.return=s,i.sibling=t,s.child=i,s.child.memoizedState=ku(r),s.memoizedState=wu,t):Vx(s,l));if(n=t.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return PN(t,s,l,a,o,n,r);if(i){i=a.fallback,l=s.mode,n=t.child,o=n.sibling;var c={mode:"hidden",children:a.children};return!(l&1)&&s.child!==n?(a=s.child,a.childLanes=0,a.pendingProps=c,s.deletions=null):(a=fn(n,c),a.subtreeFlags=n.subtreeFlags&14680064),o!==null?i=fn(o,i):(i=Vn(i,l,r,null),i.flags|=2),i.return=s,a.return=s,a.sibling=i,s.child=a,a=i,i=s.child,l=t.child.memoizedState,l=l===null?ku(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~r,s.memoizedState=wu,a}return i=t.child,t=i.sibling,a=fn(i,{mode:"visible",children:a.children}),!(s.mode&1)&&(a.lanes=r),a.return=s,a.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=a,s.memoizedState=null,a}function Vx(t,s){return s=Pd({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function tc(t,s,r,a){return a!==null&&Fx(a),Gi(s,t.child,null,r),t=Vx(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function PN(t,s,r,a,n,i,l){if(r)return s.flags&256?(s.flags&=-257,a=f0(Error(ke(422))),tc(t,s,l,a)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(i=a.fallback,n=s.mode,a=Pd({mode:"visible",children:a.children},n,0,null),i=Vn(i,n,l,null),i.flags|=2,a.return=s,i.return=s,a.sibling=i,s.child=a,s.mode&1&&Gi(s,t.child,null,l),s.child.memoizedState=ku(l),s.memoizedState=wu,i);if(!(s.mode&1))return tc(t,s,l,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var o=a.dgst;return a=o,i=Error(ke(419)),a=f0(i,a,void 0),tc(t,s,l,a)}if(o=(l&t.childLanes)!==0,lr||o){if(a=ws,a!==null){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|l)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,Ma(t,n),ta(a,t,n,-1))}return Yx(),a=f0(Error(ke(421))),tc(t,s,l,a)}return n.data==="$?"?(s.flags|=128,s.child=t.child,s=HN.bind(null,t),n._reactRetry=s,null):(t=i.treeContext,yr=un(n.nextSibling),vr=s,$t=!0,Yr=null,t!==null&&(Fr[Ar++]=Ta,Fr[Ar++]=Ea,Fr[Ar++]=Xn,Ta=t.id,Ea=t.overflow,Xn=s),s=Vx(s,a.children),s.flags|=4096,s)}function $h(t,s,r){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s),gu(t.return,s,r)}function p0(t,s,r,a,n){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(i.isBackwards=s,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=r,i.tailMode=n)}function Ry(t,s,r){var a=s.pendingProps,n=a.revealOrder,i=a.tail;if(qs(t,s,a.children,r),a=Wt.current,a&2)a=a&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$h(t,r,s);else if(t.tag===19)$h(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(Rt(Wt,a),!(s.mode&1))s.memoizedState=null;else switch(n){case"forwards":for(r=s.child,n=null;r!==null;)t=r.alternate,t!==null&&Qc(t)===null&&(n=r),r=r.sibling;r=n,r===null?(n=s.child,s.child=null):(n=r.sibling,r.sibling=null),p0(s,!1,n,r,i);break;case"backwards":for(r=null,n=s.child,s.child=null;n!==null;){if(t=n.alternate,t!==null&&Qc(t)===null){s.child=n;break}t=n.sibling,n.sibling=r,r=n,n=t}p0(s,!0,r,null,i);break;case"together":p0(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Cc(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Ba(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),Zn|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(ke(153));if(s.child!==null){for(t=s.child,r=fn(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=fn(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function DN(t,s,r){switch(s.tag){case 3:Py(s),Hi();break;case 5:iy(s);break;case 1:cr(s.type)&&Gc(s);break;case 4:Ox(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,n=s.memoizedProps.value;Rt(Kc,a._currentValue),a._currentValue=n;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(Rt(Wt,Wt.current&1),s.flags|=128,null):r&s.child.childLanes?Dy(t,s,r):(Rt(Wt,Wt.current&1),t=Ba(t,s,r),t!==null?t.sibling:null);Rt(Wt,Wt.current&1);break;case 19:if(a=(r&s.childLanes)!==0,t.flags&128){if(a)return Ry(t,s,r);s.flags|=128}if(n=s.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Rt(Wt,Wt.current),a)break;return null;case 22:case 23:return s.lanes=0,Fy(t,s,r)}return Ba(t,s,r)}var Ly,Su,Oy,Iy;Ly=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Su=function(){};Oy=function(t,s,r,a){var n=t.memoizedProps;if(n!==a){t=s.stateNode,Un(ma.current);var i=null;switch(r){case"input":n=q0(t,n),a=q0(t,a),i=[];break;case"select":n=Gt({},n,{value:void 0}),a=Gt({},a,{value:void 0}),i=[];break;case"textarea":n=Y0(t,n),a=Y0(t,a),i=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=Vc)}Q0(r,a);var l;r=null;for(d in n)if(!a.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var o=n[d];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ql.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in a){var c=a[d];if(o=n!=null?n[d]:void 0,a.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ql.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ot("scroll",t),i||o===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(s.updateQueue=d)&&(s.flags|=4)}};Iy=function(t,s,r,a){r!==a&&(s.flags|=4)};function pl(t,s){if(!$t)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function Rs(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,a=0;if(s)for(var n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=a,t.childLanes=r,s}function RN(t,s,r){var a=s.pendingProps;switch(Ex(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rs(s),null;case 1:return cr(s.type)&&Hc(),Rs(s),null;case 3:return a=s.stateNode,qi(),It(or),It(zs),Mx(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Zo(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Yr!==null&&(Du(Yr),Yr=null))),Su(t,s),Rs(s),null;case 5:Ix(s);var n=Un(uo.current);if(r=s.type,t!==null&&s.stateNode!=null)Oy(t,s,r,a,n),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(ke(166));return Rs(s),null}if(t=Un(ma.current),Zo(s)){a=s.stateNode,r=s.type;var i=s.memoizedProps;switch(a[ua]=s,a[oo]=i,t=(s.mode&1)!==0,r){case"dialog":Ot("cancel",a),Ot("close",a);break;case"iframe":case"object":case"embed":Ot("load",a);break;case"video":case"audio":for(n=0;n<Sl.length;n++)Ot(Sl[n],a);break;case"source":Ot("error",a);break;case"img":case"image":case"link":Ot("error",a),Ot("load",a);break;case"details":Ot("toggle",a);break;case"input":Ym(a,i),Ot("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},Ot("invalid",a);break;case"textarea":Qm(a,i),Ot("invalid",a)}Q0(r,i),n=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?a.textContent!==o&&(i.suppressHydrationWarning!==!0&&Qo(a.textContent,o,t),n=["children",o]):typeof o=="number"&&a.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Qo(a.textContent,o,t),n=["children",""+o]):Ql.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Ot("scroll",a)}switch(r){case"input":Vo(a),Xm(a,i,!0);break;case"textarea":Vo(a),Zm(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=Vc)}a=n,s.updateQueue=a,a!==null&&(s.flags|=4)}else{l=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ug(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=l.createElement(r,{is:a.is}):(t=l.createElement(r),r==="select"&&(l=t,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):t=l.createElementNS(t,r),t[ua]=s,t[oo]=a,Ly(t,s,!1,!1),s.stateNode=t;e:{switch(l=Z0(r,a),r){case"dialog":Ot("cancel",t),Ot("close",t),n=a;break;case"iframe":case"object":case"embed":Ot("load",t),n=a;break;case"video":case"audio":for(n=0;n<Sl.length;n++)Ot(Sl[n],t);n=a;break;case"source":Ot("error",t),n=a;break;case"img":case"image":case"link":Ot("error",t),Ot("load",t),n=a;break;case"details":Ot("toggle",t),n=a;break;case"input":Ym(t,a),n=q0(t,a),Ot("invalid",t);break;case"option":n=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},n=Gt({},a,{value:void 0}),Ot("invalid",t);break;case"textarea":Qm(t,a),n=Y0(t,a),Ot("invalid",t);break;default:n=a}Q0(r,n),o=n;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?hg(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&xg(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Zl(t,c):typeof c=="number"&&Zl(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ql.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ot("scroll",t):c!=null&&hx(t,i,c,l))}switch(r){case"input":Vo(t),Xm(t,a,!1);break;case"textarea":Vo(t),Zm(t);break;case"option":a.value!=null&&t.setAttribute("value",""+bn(a.value));break;case"select":t.multiple=!!a.multiple,i=a.value,i!=null?Pi(t,!!a.multiple,i,!1):a.defaultValue!=null&&Pi(t,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=Vc)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Rs(s),null;case 6:if(t&&s.stateNode!=null)Iy(t,s,t.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(ke(166));if(r=Un(uo.current),Un(ma.current),Zo(s)){if(a=s.stateNode,r=s.memoizedProps,a[ua]=s,(i=a.nodeValue!==r)&&(t=vr,t!==null))switch(t.tag){case 3:Qo(a.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Qo(a.nodeValue,r,(t.mode&1)!==0)}i&&(s.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[ua]=s,s.stateNode=a}return Rs(s),null;case 13:if(It(Wt),a=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($t&&yr!==null&&s.mode&1&&!(s.flags&128))ty(),Hi(),s.flags|=98560,i=!1;else if(i=Zo(s),a!==null&&a.dehydrated!==null){if(t===null){if(!i)throw Error(ke(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ke(317));i[ua]=s}else Hi(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Rs(s),i=!1}else Yr!==null&&(Du(Yr),Yr=null),i=!0;if(!i)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(s.child.flags|=8192,s.mode&1&&(t===null||Wt.current&1?hs===0&&(hs=3):Yx())),s.updateQueue!==null&&(s.flags|=4),Rs(s),null);case 4:return qi(),Su(t,s),t===null&&io(s.stateNode.containerInfo),Rs(s),null;case 10:return Dx(s.type._context),Rs(s),null;case 17:return cr(s.type)&&Hc(),Rs(s),null;case 19:if(It(Wt),i=s.memoizedState,i===null)return Rs(s),null;if(a=(s.flags&128)!==0,l=i.rendering,l===null)if(a)pl(i,!1);else{if(hs!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(l=Qc(t),l!==null){for(s.flags|=128,pl(i,!1),a=l.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=r,r=s.child;r!==null;)i=r,t=a,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Rt(Wt,Wt.current&1|2),s.child}t=t.sibling}i.tail!==null&&Zt()>Ki&&(s.flags|=128,a=!0,pl(i,!1),s.lanes=4194304)}else{if(!a)if(t=Qc(l),t!==null){if(s.flags|=128,a=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),pl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!$t)return Rs(s),null}else 2*Zt()-i.renderingStartTime>Ki&&r!==1073741824&&(s.flags|=128,a=!0,pl(i,!1),s.lanes=4194304);i.isBackwards?(l.sibling=s.child,s.child=l):(r=i.last,r!==null?r.sibling=l:s.child=l,i.last=l)}return i.tail!==null?(s=i.tail,i.rendering=s,i.tail=s.sibling,i.renderingStartTime=Zt(),s.sibling=null,r=Wt.current,Rt(Wt,a?r&1|2:r&1),s):(Rs(s),null);case 22:case 23:return Kx(),a=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(s.flags|=8192),a&&s.mode&1?hr&1073741824&&(Rs(s),s.subtreeFlags&6&&(s.flags|=8192)):Rs(s),null;case 24:return null;case 25:return null}throw Error(ke(156,s.tag))}function LN(t,s){switch(Ex(s),s.tag){case 1:return cr(s.type)&&Hc(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return qi(),It(or),It(zs),Mx(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return Ix(s),null;case 13:if(It(Wt),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(ke(340));Hi()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return It(Wt),null;case 4:return qi(),null;case 10:return Dx(s.type._context),null;case 22:case 23:return Kx(),null;case 24:return null;default:return null}}var sc=!1,Is=!1,ON=typeof WeakSet=="function"?WeakSet:Set,Me=null;function Ei(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){qt(t,s,a)}else r.current=null}function Cu(t,s,r){try{r()}catch(a){qt(t,s,a)}}var zh=!1;function IN(t,s){if(cu=$c,t=zg(),_x(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var n=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,d=0,u=0,p=t,m=null;t:for(;;){for(var f;p!==r||n!==0&&p.nodeType!==3||(o=l+n),p!==i||a!==0&&p.nodeType!==3||(c=l+a),p.nodeType===3&&(l+=p.nodeValue.length),(f=p.firstChild)!==null;)m=p,p=f;for(;;){if(p===t)break t;if(m===r&&++d===n&&(o=l),m===i&&++u===a&&(c=l),(f=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=f}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(du={focusedElem:t,selectionRange:r},$c=!1,Me=s;Me!==null;)if(s=Me,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Me=t;else for(;Me!==null;){s=Me;try{var h=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var x=h.memoizedProps,g=h.memoizedState,j=s.stateNode,b=j.getSnapshotBeforeUpdate(s.elementType===s.type?x:Gr(s.type,x),g);j.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var N=s.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(C){qt(s,s.return,C)}if(t=s.sibling,t!==null){t.return=s.return,Me=t;break}Me=s.return}return h=zh,zh=!1,h}function Bl(t,s,r){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&t)===t){var i=n.destroy;n.destroy=void 0,i!==void 0&&Cu(s,r,i)}n=n.next}while(n!==a)}}function Fd(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var a=r.create;r.destroy=a()}r=r.next}while(r!==s)}}function _u(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function My(t){var s=t.alternate;s!==null&&(t.alternate=null,My(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[ua],delete s[oo],delete s[mu],delete s[bN],delete s[vN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function By(t){return t.tag===5||t.tag===3||t.tag===4}function Wh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||By(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Tu(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Vc));else if(a!==4&&(t=t.child,t!==null))for(Tu(t,s,r),t=t.sibling;t!==null;)Tu(t,s,r),t=t.sibling}function Eu(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(Eu(t,s,r),t=t.sibling;t!==null;)Eu(t,s,r),t=t.sibling}var Cs=null,qr=!1;function qa(t,s,r){for(r=r.child;r!==null;)Uy(t,s,r),r=r.sibling}function Uy(t,s,r){if(xa&&typeof xa.onCommitFiberUnmount=="function")try{xa.onCommitFiberUnmount(Nd,r)}catch{}switch(r.tag){case 5:Is||Ei(r,s);case 6:var a=Cs,n=qr;Cs=null,qa(t,s,r),Cs=a,qr=n,Cs!==null&&(qr?(t=Cs,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Cs.removeChild(r.stateNode));break;case 18:Cs!==null&&(qr?(t=Cs,r=r.stateNode,t.nodeType===8?c0(t.parentNode,r):t.nodeType===1&&c0(t,r),ro(t)):c0(Cs,r.stateNode));break;case 4:a=Cs,n=qr,Cs=r.stateNode.containerInfo,qr=!0,qa(t,s,r),Cs=a,qr=n;break;case 0:case 11:case 14:case 15:if(!Is&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var i=n,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Cu(r,s,l),n=n.next}while(n!==a)}qa(t,s,r);break;case 1:if(!Is&&(Ei(r,s),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(o){qt(r,s,o)}qa(t,s,r);break;case 21:qa(t,s,r);break;case 22:r.mode&1?(Is=(a=Is)||r.memoizedState!==null,qa(t,s,r),Is=a):qa(t,s,r);break;default:qa(t,s,r)}}function Vh(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new ON),s.forEach(function(a){var n=GN.bind(null,t,a);r.has(a)||(r.add(a),a.then(n,n))})}}function zr(t,s){var r=s.deletions;if(r!==null)for(var a=0;a<r.length;a++){var n=r[a];try{var i=t,l=s,o=l;e:for(;o!==null;){switch(o.tag){case 5:Cs=o.stateNode,qr=!1;break e;case 3:Cs=o.stateNode.containerInfo,qr=!0;break e;case 4:Cs=o.stateNode.containerInfo,qr=!0;break e}o=o.return}if(Cs===null)throw Error(ke(160));Uy(i,l,n),Cs=null,qr=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){qt(n,s,d)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)$y(s,t),s=s.sibling}function $y(t,s){var r=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zr(s,t),ia(t),a&4){try{Bl(3,t,t.return),Fd(3,t)}catch(x){qt(t,t.return,x)}try{Bl(5,t,t.return)}catch(x){qt(t,t.return,x)}}break;case 1:zr(s,t),ia(t),a&512&&r!==null&&Ei(r,r.return);break;case 5:if(zr(s,t),ia(t),a&512&&r!==null&&Ei(r,r.return),t.flags&32){var n=t.stateNode;try{Zl(n,"")}catch(x){qt(t,t.return,x)}}if(a&4&&(n=t.stateNode,n!=null)){var i=t.memoizedProps,l=r!==null?r.memoizedProps:i,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&cg(n,i),Z0(o,l);var d=Z0(o,i);for(l=0;l<c.length;l+=2){var u=c[l],p=c[l+1];u==="style"?hg(n,p):u==="dangerouslySetInnerHTML"?xg(n,p):u==="children"?Zl(n,p):hx(n,u,p,d)}switch(o){case"input":J0(n,i);break;case"textarea":dg(n,i);break;case"select":var m=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Pi(n,!!i.multiple,f,!1):m!==!!i.multiple&&(i.defaultValue!=null?Pi(n,!!i.multiple,i.defaultValue,!0):Pi(n,!!i.multiple,i.multiple?[]:"",!1))}n[oo]=i}catch(x){qt(t,t.return,x)}}break;case 6:if(zr(s,t),ia(t),a&4){if(t.stateNode===null)throw Error(ke(162));n=t.stateNode,i=t.memoizedProps;try{n.nodeValue=i}catch(x){qt(t,t.return,x)}}break;case 3:if(zr(s,t),ia(t),a&4&&r!==null&&r.memoizedState.isDehydrated)try{ro(s.containerInfo)}catch(x){qt(t,t.return,x)}break;case 4:zr(s,t),ia(t);break;case 13:zr(s,t),ia(t),n=t.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(qx=Zt())),a&4&&Vh(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(Is=(d=Is)||u,zr(s,t),Is=d):zr(s,t),ia(t),a&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(Me=t,u=t.child;u!==null;){for(p=Me=u;Me!==null;){switch(m=Me,f=m.child,m.tag){case 0:case 11:case 14:case 15:Bl(4,m,m.return);break;case 1:Ei(m,m.return);var h=m.stateNode;if(typeof h.componentWillUnmount=="function"){a=m,r=m.return;try{s=a,h.props=s.memoizedProps,h.state=s.memoizedState,h.componentWillUnmount()}catch(x){qt(a,r,x)}}break;case 5:Ei(m,m.return);break;case 22:if(m.memoizedState!==null){Gh(p);continue}}f!==null?(f.return=m,Me=f):Gh(p)}u=u.sibling}e:for(u=null,p=t;;){if(p.tag===5){if(u===null){u=p;try{n=p.stateNode,d?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=p.stateNode,c=p.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=mg("display",l))}catch(x){qt(t,t.return,x)}}}else if(p.tag===6){if(u===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(x){qt(t,t.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:zr(s,t),ia(t),a&4&&Vh(t);break;case 21:break;default:zr(s,t),ia(t)}}function ia(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(By(r)){var a=r;break e}r=r.return}throw Error(ke(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(Zl(n,""),a.flags&=-33);var i=Wh(t);Eu(t,i,n);break;case 3:case 4:var l=a.stateNode.containerInfo,o=Wh(t);Tu(t,o,l);break;default:throw Error(ke(161))}}catch(c){qt(t,t.return,c)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function MN(t,s,r){Me=t,zy(t)}function zy(t,s,r){for(var a=(t.mode&1)!==0;Me!==null;){var n=Me,i=n.child;if(n.tag===22&&a){var l=n.memoizedState!==null||sc;if(!l){var o=n.alternate,c=o!==null&&o.memoizedState!==null||Is;o=sc;var d=Is;if(sc=l,(Is=c)&&!d)for(Me=n;Me!==null;)l=Me,c=l.child,l.tag===22&&l.memoizedState!==null?qh(n):c!==null?(c.return=l,Me=c):qh(n);for(;i!==null;)Me=i,zy(i),i=i.sibling;Me=n,sc=o,Is=d}Hh(t)}else n.subtreeFlags&8772&&i!==null?(i.return=n,Me=i):Hh(t)}}function Hh(t){for(;Me!==null;){var s=Me;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Is||Fd(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!Is)if(r===null)a.componentDidMount();else{var n=s.elementType===s.type?r.memoizedProps:Gr(s.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=s.updateQueue;i!==null&&Eh(s,i,a);break;case 3:var l=s.updateQueue;if(l!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}Eh(s,l,r)}break;case 5:var o=s.stateNode;if(r===null&&s.flags&4){r=o;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var d=s.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var p=u.dehydrated;p!==null&&ro(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}Is||s.flags&512&&_u(s)}catch(m){qt(s,s.return,m)}}if(s===t){Me=null;break}if(r=s.sibling,r!==null){r.return=s.return,Me=r;break}Me=s.return}}function Gh(t){for(;Me!==null;){var s=Me;if(s===t){Me=null;break}var r=s.sibling;if(r!==null){r.return=s.return,Me=r;break}Me=s.return}}function qh(t){for(;Me!==null;){var s=Me;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{Fd(4,s)}catch(c){qt(s,r,c)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var n=s.return;try{a.componentDidMount()}catch(c){qt(s,n,c)}}var i=s.return;try{_u(s)}catch(c){qt(s,i,c)}break;case 5:var l=s.return;try{_u(s)}catch(c){qt(s,l,c)}}}catch(c){qt(s,s.return,c)}if(s===t){Me=null;break}var o=s.sibling;if(o!==null){o.return=s.return,Me=o;break}Me=s.return}}var BN=Math.ceil,td=Wa.ReactCurrentDispatcher,Hx=Wa.ReactCurrentOwner,Lr=Wa.ReactCurrentBatchConfig,jt=0,ws=null,is=null,Ts=0,hr=0,Fi=Sn(0),hs=0,fo=null,Zn=0,Ad=0,Gx=0,Ul=null,ir=null,qx=0,Ki=1/0,Ca=null,sd=!1,Fu=null,mn=null,rc=!1,rn=null,rd=0,$l=0,Au=null,_c=-1,Tc=0;function Xs(){return jt&6?Zt():_c!==-1?_c:_c=Zt()}function hn(t){return t.mode&1?jt&2&&Ts!==0?Ts&-Ts:NN.transition!==null?(Tc===0&&(Tc=Cg()),Tc):(t=Et,t!==0||(t=window.event,t=t===void 0?16:Dg(t.type)),t):1}function ta(t,s,r,a){if(50<$l)throw $l=0,Au=null,Error(ke(185));Po(t,r,a),(!(jt&2)||t!==ws)&&(t===ws&&(!(jt&2)&&(Ad|=r),hs===4&&en(t,Ts)),dr(t,a),r===1&&jt===0&&!(s.mode&1)&&(Ki=Zt()+500,_d&&Cn()))}function dr(t,s){var r=t.callbackNode;N1(t,s);var a=Uc(t,t===ws?Ts:0);if(a===0)r!==null&&sh(r),t.callbackNode=null,t.callbackPriority=0;else if(s=a&-a,t.callbackPriority!==s){if(r!=null&&sh(r),s===1)t.tag===0?jN(Jh.bind(null,t)):Qg(Jh.bind(null,t)),gN(function(){!(jt&6)&&Cn()}),r=null;else{switch(_g(a)){case 1:r=bx;break;case 4:r=kg;break;case 16:r=Bc;break;case 536870912:r=Sg;break;default:r=Bc}r=Yy(r,Wy.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function Wy(t,s){if(_c=-1,Tc=0,jt&6)throw Error(ke(327));var r=t.callbackNode;if(Ii()&&t.callbackNode!==r)return null;var a=Uc(t,t===ws?Ts:0);if(a===0)return null;if(a&30||a&t.expiredLanes||s)s=ad(t,a);else{s=a;var n=jt;jt|=2;var i=Hy();(ws!==t||Ts!==s)&&(Ca=null,Ki=Zt()+500,Wn(t,s));do try{zN();break}catch(o){Vy(t,o)}while(!0);Px(),td.current=i,jt=n,is!==null?s=0:(ws=null,Ts=0,s=hs)}if(s!==0){if(s===2&&(n=au(t),n!==0&&(a=n,s=Pu(t,n))),s===1)throw r=fo,Wn(t,0),en(t,a),dr(t,Zt()),r;if(s===6)en(t,a);else{if(n=t.current.alternate,!(a&30)&&!UN(n)&&(s=ad(t,a),s===2&&(i=au(t),i!==0&&(a=i,s=Pu(t,i))),s===1))throw r=fo,Wn(t,0),en(t,a),dr(t,Zt()),r;switch(t.finishedWork=n,t.finishedLanes=a,s){case 0:case 1:throw Error(ke(345));case 2:Pn(t,ir,Ca);break;case 3:if(en(t,a),(a&130023424)===a&&(s=qx+500-Zt(),10<s)){if(Uc(t,0)!==0)break;if(n=t.suspendedLanes,(n&a)!==a){Xs(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=xu(Pn.bind(null,t,ir,Ca),s);break}Pn(t,ir,Ca);break;case 4:if(en(t,a),(a&4194240)===a)break;for(s=t.eventTimes,n=-1;0<a;){var l=31-ea(a);i=1<<l,l=s[l],l>n&&(n=l),a&=~i}if(a=n,a=Zt()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*BN(a/1960))-a,10<a){t.timeoutHandle=xu(Pn.bind(null,t,ir,Ca),a);break}Pn(t,ir,Ca);break;case 5:Pn(t,ir,Ca);break;default:throw Error(ke(329))}}}return dr(t,Zt()),t.callbackNode===r?Wy.bind(null,t):null}function Pu(t,s){var r=Ul;return t.current.memoizedState.isDehydrated&&(Wn(t,s).flags|=256),t=ad(t,s),t!==2&&(s=ir,ir=r,s!==null&&Du(s)),t}function Du(t){ir===null?ir=t:ir.push.apply(ir,t)}function UN(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var n=r[a],i=n.getSnapshot;n=n.value;try{if(!aa(i(),n))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function en(t,s){for(s&=~Gx,s&=~Ad,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-ea(s),a=1<<r;t[r]=-1,s&=~a}}function Jh(t){if(jt&6)throw Error(ke(327));Ii();var s=Uc(t,0);if(!(s&1))return dr(t,Zt()),null;var r=ad(t,s);if(t.tag!==0&&r===2){var a=au(t);a!==0&&(s=a,r=Pu(t,a))}if(r===1)throw r=fo,Wn(t,0),en(t,s),dr(t,Zt()),r;if(r===6)throw Error(ke(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Pn(t,ir,Ca),dr(t,Zt()),null}function Jx(t,s){var r=jt;jt|=1;try{return t(s)}finally{jt=r,jt===0&&(Ki=Zt()+500,_d&&Cn())}}function ei(t){rn!==null&&rn.tag===0&&!(jt&6)&&Ii();var s=jt;jt|=1;var r=Lr.transition,a=Et;try{if(Lr.transition=null,Et=1,t)return t()}finally{Et=a,Lr.transition=r,jt=s,!(jt&6)&&Cn()}}function Kx(){hr=Fi.current,It(Fi)}function Wn(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,pN(r)),is!==null)for(r=is.return;r!==null;){var a=r;switch(Ex(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Hc();break;case 3:qi(),It(or),It(zs),Mx();break;case 5:Ix(a);break;case 4:qi();break;case 13:It(Wt);break;case 19:It(Wt);break;case 10:Dx(a.type._context);break;case 22:case 23:Kx()}r=r.return}if(ws=t,is=t=fn(t.current,null),Ts=hr=s,hs=0,fo=null,Gx=Ad=Zn=0,ir=Ul=null,Bn!==null){for(s=0;s<Bn.length;s++)if(r=Bn[s],a=r.interleaved,a!==null){r.interleaved=null;var n=a.next,i=r.pending;if(i!==null){var l=i.next;i.next=n,a.next=l}r.pending=a}Bn=null}return t}function Vy(t,s){do{var r=is;try{if(Px(),kc.current=ed,Zc){for(var a=Ht.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}Zc=!1}if(Qn=0,js=xs=Ht=null,Ml=!1,xo=0,Hx.current=null,r===null||r.return===null){hs=1,fo=s,is=null;break}e:{var i=t,l=r.return,o=r,c=s;if(s=Ts,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,p=u.tag;if(!(u.mode&1)&&(p===0||p===11||p===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=Lh(l);if(f!==null){f.flags&=-257,Oh(f,l,o,i,s),f.mode&1&&Rh(i,d,s),s=f,c=d;var h=s.updateQueue;if(h===null){var x=new Set;x.add(c),s.updateQueue=x}else h.add(c);break e}else{if(!(s&1)){Rh(i,d,s),Yx();break e}c=Error(ke(426))}}else if($t&&o.mode&1){var g=Lh(l);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Oh(g,l,o,i,s),Fx(Ji(c,o));break e}}i=c=Ji(c,o),hs!==4&&(hs=2),Ul===null?Ul=[i]:Ul.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,s&=-s,i.lanes|=s;var j=_y(i,c,s);Th(i,j);break e;case 1:o=c;var b=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(mn===null||!mn.has(N)))){i.flags|=65536,s&=-s,i.lanes|=s;var C=Ty(i,o,s);Th(i,C);break e}}i=i.return}while(i!==null)}qy(r)}catch(A){s=A,is===r&&r!==null&&(is=r=r.return);continue}break}while(!0)}function Hy(){var t=td.current;return td.current=ed,t===null?ed:t}function Yx(){(hs===0||hs===3||hs===2)&&(hs=4),ws===null||!(Zn&268435455)&&!(Ad&268435455)||en(ws,Ts)}function ad(t,s){var r=jt;jt|=2;var a=Hy();(ws!==t||Ts!==s)&&(Ca=null,Wn(t,s));do try{$N();break}catch(n){Vy(t,n)}while(!0);if(Px(),jt=r,td.current=a,is!==null)throw Error(ke(261));return ws=null,Ts=0,hs}function $N(){for(;is!==null;)Gy(is)}function zN(){for(;is!==null&&!m1();)Gy(is)}function Gy(t){var s=Ky(t.alternate,t,hr);t.memoizedProps=t.pendingProps,s===null?qy(t):is=s,Hx.current=null}function qy(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=LN(r,s),r!==null){r.flags&=32767,is=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{hs=6,is=null;return}}else if(r=RN(r,s,hr),r!==null){is=r;return}if(s=s.sibling,s!==null){is=s;return}is=s=t}while(s!==null);hs===0&&(hs=5)}function Pn(t,s,r){var a=Et,n=Lr.transition;try{Lr.transition=null,Et=1,WN(t,s,r,a)}finally{Lr.transition=n,Et=a}return null}function WN(t,s,r,a){do Ii();while(rn!==null);if(jt&6)throw Error(ke(327));r=t.finishedWork;var n=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ke(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(w1(t,i),t===ws&&(is=ws=null,Ts=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||rc||(rc=!0,Yy(Bc,function(){return Ii(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Lr.transition,Lr.transition=null;var l=Et;Et=1;var o=jt;jt|=4,Hx.current=null,IN(t,r),$y(r,t),cN(du),$c=!!cu,du=cu=null,t.current=r,MN(r),h1(),jt=o,Et=l,Lr.transition=i}else t.current=r;if(rc&&(rc=!1,rn=t,rd=n),i=t.pendingLanes,i===0&&(mn=null),g1(r.stateNode),dr(t,Zt()),s!==null)for(a=t.onRecoverableError,r=0;r<s.length;r++)n=s[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(sd)throw sd=!1,t=Fu,Fu=null,t;return rd&1&&t.tag!==0&&Ii(),i=t.pendingLanes,i&1?t===Au?$l++:($l=0,Au=t):$l=0,Cn(),null}function Ii(){if(rn!==null){var t=_g(rd),s=Lr.transition,r=Et;try{if(Lr.transition=null,Et=16>t?16:t,rn===null)var a=!1;else{if(t=rn,rn=null,rd=0,jt&6)throw Error(ke(331));var n=jt;for(jt|=4,Me=t.current;Me!==null;){var i=Me,l=i.child;if(Me.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(Me=d;Me!==null;){var u=Me;switch(u.tag){case 0:case 11:case 15:Bl(8,u,i)}var p=u.child;if(p!==null)p.return=u,Me=p;else for(;Me!==null;){u=Me;var m=u.sibling,f=u.return;if(My(u),u===d){Me=null;break}if(m!==null){m.return=f,Me=m;break}Me=f}}}var h=i.alternate;if(h!==null){var x=h.child;if(x!==null){h.child=null;do{var g=x.sibling;x.sibling=null,x=g}while(x!==null)}}Me=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Me=l;else e:for(;Me!==null;){if(i=Me,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Bl(9,i,i.return)}var j=i.sibling;if(j!==null){j.return=i.return,Me=j;break e}Me=i.return}}var b=t.current;for(Me=b;Me!==null;){l=Me;var N=l.child;if(l.subtreeFlags&2064&&N!==null)N.return=l,Me=N;else e:for(l=b;Me!==null;){if(o=Me,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Fd(9,o)}}catch(A){qt(o,o.return,A)}if(o===l){Me=null;break e}var C=o.sibling;if(C!==null){C.return=o.return,Me=C;break e}Me=o.return}}if(jt=n,Cn(),xa&&typeof xa.onPostCommitFiberRoot=="function")try{xa.onPostCommitFiberRoot(Nd,t)}catch{}a=!0}return a}finally{Et=r,Lr.transition=s}}return!1}function Kh(t,s,r){s=Ji(r,s),s=_y(t,s,1),t=xn(t,s,1),s=Xs(),t!==null&&(Po(t,1,s),dr(t,s))}function qt(t,s,r){if(t.tag===3)Kh(t,t,r);else for(;s!==null;){if(s.tag===3){Kh(s,t,r);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(mn===null||!mn.has(a))){t=Ji(r,t),t=Ty(s,t,1),s=xn(s,t,1),t=Xs(),s!==null&&(Po(s,1,t),dr(s,t));break}}s=s.return}}function VN(t,s,r){var a=t.pingCache;a!==null&&a.delete(s),s=Xs(),t.pingedLanes|=t.suspendedLanes&r,ws===t&&(Ts&r)===r&&(hs===4||hs===3&&(Ts&130023424)===Ts&&500>Zt()-qx?Wn(t,0):Gx|=r),dr(t,s)}function Jy(t,s){s===0&&(t.mode&1?(s=qo,qo<<=1,!(qo&130023424)&&(qo=4194304)):s=1);var r=Xs();t=Ma(t,s),t!==null&&(Po(t,s,r),dr(t,r))}function HN(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),Jy(t,r)}function GN(t,s){var r=0;switch(t.tag){case 13:var a=t.stateNode,n=t.memoizedState;n!==null&&(r=n.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(ke(314))}a!==null&&a.delete(s),Jy(t,r)}var Ky;Ky=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||or.current)lr=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return lr=!1,DN(t,s,r);lr=!!(t.flags&131072)}else lr=!1,$t&&s.flags&1048576&&Zg(s,Jc,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;Cc(t,s),t=s.pendingProps;var n=Vi(s,zs.current);Oi(s,r),n=Ux(null,s,a,t,n,r);var i=$x();return s.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,cr(a)?(i=!0,Gc(s)):i=!1,s.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Lx(s),n.updater=Ed,s.stateNode=n,n._reactInternals=s,bu(s,a,t,r),s=Nu(null,s,a,!0,i,r)):(s.tag=0,$t&&i&&Tx(s),qs(null,s,n,r),s=s.child),s;case 16:a=s.elementType;e:{switch(Cc(t,s),t=s.pendingProps,n=a._init,a=n(a._payload),s.type=a,n=s.tag=JN(a),t=Gr(a,t),n){case 0:s=ju(null,s,a,t,r);break e;case 1:s=Bh(null,s,a,t,r);break e;case 11:s=Ih(null,s,a,t,r);break e;case 14:s=Mh(null,s,a,Gr(a.type,t),r);break e}throw Error(ke(306,a,""))}return s;case 0:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Gr(a,n),ju(t,s,a,n,r);case 1:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Gr(a,n),Bh(t,s,a,n,r);case 3:e:{if(Py(s),t===null)throw Error(ke(387));a=s.pendingProps,i=s.memoizedState,n=i.element,ny(t,s),Xc(s,a,null,r);var l=s.memoizedState;if(a=l.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},s.updateQueue.baseState=i,s.memoizedState=i,s.flags&256){n=Ji(Error(ke(423)),s),s=Uh(t,s,a,r,n);break e}else if(a!==n){n=Ji(Error(ke(424)),s),s=Uh(t,s,a,r,n);break e}else for(yr=un(s.stateNode.containerInfo.firstChild),vr=s,$t=!0,Yr=null,r=ry(s,null,a,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Hi(),a===n){s=Ba(t,s,r);break e}qs(t,s,a,r)}s=s.child}return s;case 5:return iy(s),t===null&&pu(s),a=s.type,n=s.pendingProps,i=t!==null?t.memoizedProps:null,l=n.children,uu(a,n)?l=null:i!==null&&uu(a,i)&&(s.flags|=32),Ay(t,s),qs(t,s,l,r),s.child;case 6:return t===null&&pu(s),null;case 13:return Dy(t,s,r);case 4:return Ox(s,s.stateNode.containerInfo),a=s.pendingProps,t===null?s.child=Gi(s,null,a,r):qs(t,s,a,r),s.child;case 11:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Gr(a,n),Ih(t,s,a,n,r);case 7:return qs(t,s,s.pendingProps,r),s.child;case 8:return qs(t,s,s.pendingProps.children,r),s.child;case 12:return qs(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(a=s.type._context,n=s.pendingProps,i=s.memoizedProps,l=n.value,Rt(Kc,a._currentValue),a._currentValue=l,i!==null)if(aa(i.value,l)){if(i.children===n.children&&!or.current){s=Ba(t,s,r);break e}}else for(i=s.child,i!==null&&(i.return=s);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===a){if(i.tag===1){c=Aa(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),gu(i.return,r,s),o.lanes|=r;break}c=c.next}}else if(i.tag===10)l=i.type===s.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(ke(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),gu(l,r,s),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===s){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}qs(t,s,n.children,r),s=s.child}return s;case 9:return n=s.type,a=s.pendingProps.children,Oi(s,r),n=Or(n),a=a(n),s.flags|=1,qs(t,s,a,r),s.child;case 14:return a=s.type,n=Gr(a,s.pendingProps),n=Gr(a.type,n),Mh(t,s,a,n,r);case 15:return Ey(t,s,s.type,s.pendingProps,r);case 17:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Gr(a,n),Cc(t,s),s.tag=1,cr(a)?(t=!0,Gc(s)):t=!1,Oi(s,r),Cy(s,a,n),bu(s,a,n,r),Nu(null,s,a,!0,t,r);case 19:return Ry(t,s,r);case 22:return Fy(t,s,r)}throw Error(ke(156,s.tag))};function Yy(t,s){return wg(t,s)}function qN(t,s,r,a){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(t,s,r,a){return new qN(t,s,r,a)}function Xx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function JN(t){if(typeof t=="function")return Xx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===px)return 11;if(t===gx)return 14}return 2}function fn(t,s){var r=t.alternate;return r===null?(r=Rr(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ec(t,s,r,a,n,i){var l=2;if(a=t,typeof t=="function")Xx(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case vi:return Vn(r.children,n,i,s);case fx:l=8,n|=8;break;case W0:return t=Rr(12,r,s,n|2),t.elementType=W0,t.lanes=i,t;case V0:return t=Rr(13,r,s,n),t.elementType=V0,t.lanes=i,t;case H0:return t=Rr(19,r,s,n),t.elementType=H0,t.lanes=i,t;case ig:return Pd(r,n,i,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ag:l=10;break e;case ng:l=9;break e;case px:l=11;break e;case gx:l=14;break e;case Xa:l=16,a=null;break e}throw Error(ke(130,t==null?t:typeof t,""))}return s=Rr(l,r,s,n),s.elementType=t,s.type=a,s.lanes=i,s}function Vn(t,s,r,a){return t=Rr(7,t,a,s),t.lanes=r,t}function Pd(t,s,r,a){return t=Rr(22,t,a,s),t.elementType=ig,t.lanes=r,t.stateNode={isHidden:!1},t}function g0(t,s,r){return t=Rr(6,t,null,s),t.lanes=r,t}function y0(t,s,r){return s=Rr(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function KN(t,s,r,a,n){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qd(0),this.expirationTimes=Qd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qd(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Qx(t,s,r,a,n,i,l,o,c){return t=new KN(t,s,r,o,c),s===1?(s=1,i===!0&&(s|=8)):s=0,i=Rr(3,null,null,s),t.current=i,i.stateNode=t,i.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lx(i),t}function YN(t,s,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bi,key:a==null?null:""+a,children:t,containerInfo:s,implementation:r}}function Xy(t){if(!t)return vn;t=t._reactInternals;e:{if(li(t)!==t||t.tag!==1)throw Error(ke(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(cr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(ke(171))}if(t.tag===1){var r=t.type;if(cr(r))return Xg(t,r,s)}return s}function Qy(t,s,r,a,n,i,l,o,c){return t=Qx(r,a,!0,t,n,i,l,o,c),t.context=Xy(null),r=t.current,a=Xs(),n=hn(r),i=Aa(a,n),i.callback=s??null,xn(r,i,n),t.current.lanes=n,Po(t,n,a),dr(t,a),t}function Dd(t,s,r,a){var n=s.current,i=Xs(),l=hn(n);return r=Xy(r),s.context===null?s.context=r:s.pendingContext=r,s=Aa(i,l),s.payload={element:t},a=a===void 0?null:a,a!==null&&(s.callback=a),t=xn(n,s,l),t!==null&&(ta(t,n,l,i),wc(t,n,l)),l}function nd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Yh(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function Zx(t,s){Yh(t,s),(t=t.alternate)&&Yh(t,s)}function XN(){return null}var Zy=typeof reportError=="function"?reportError:function(t){console.error(t)};function em(t){this._internalRoot=t}Rd.prototype.render=em.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(ke(409));Dd(t,s,null,null)};Rd.prototype.unmount=em.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;ei(function(){Dd(null,t,null,null)}),s[Ia]=null}};function Rd(t){this._internalRoot=t}Rd.prototype.unstable_scheduleHydration=function(t){if(t){var s=Fg();t={blockedOn:null,target:t,priority:s};for(var r=0;r<Za.length&&s!==0&&s<Za[r].priority;r++);Za.splice(r,0,t),r===0&&Pg(t)}};function tm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ld(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Xh(){}function QN(t,s,r,a,n){if(n){if(typeof a=="function"){var i=a;a=function(){var d=nd(l);i.call(d)}}var l=Qy(s,a,t,0,null,!1,!1,"",Xh);return t._reactRootContainer=l,t[Ia]=l.current,io(t.nodeType===8?t.parentNode:t),ei(),l}for(;n=t.lastChild;)t.removeChild(n);if(typeof a=="function"){var o=a;a=function(){var d=nd(c);o.call(d)}}var c=Qx(t,0,!1,null,null,!1,!1,"",Xh);return t._reactRootContainer=c,t[Ia]=c.current,io(t.nodeType===8?t.parentNode:t),ei(function(){Dd(s,c,r,a)}),c}function Od(t,s,r,a,n){var i=r._reactRootContainer;if(i){var l=i;if(typeof n=="function"){var o=n;n=function(){var c=nd(l);o.call(c)}}Dd(s,l,t,n)}else l=QN(r,s,t,n,a);return nd(l)}Tg=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=kl(s.pendingLanes);r!==0&&(vx(s,r|1),dr(s,Zt()),!(jt&6)&&(Ki=Zt()+500,Cn()))}break;case 13:ei(function(){var a=Ma(t,1);if(a!==null){var n=Xs();ta(a,t,1,n)}}),Zx(t,1)}};jx=function(t){if(t.tag===13){var s=Ma(t,134217728);if(s!==null){var r=Xs();ta(s,t,134217728,r)}Zx(t,134217728)}};Eg=function(t){if(t.tag===13){var s=hn(t),r=Ma(t,s);if(r!==null){var a=Xs();ta(r,t,s,a)}Zx(t,s)}};Fg=function(){return Et};Ag=function(t,s){var r=Et;try{return Et=t,s()}finally{Et=r}};tu=function(t,s,r){switch(s){case"input":if(J0(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var a=r[s];if(a!==t&&a.form===t.form){var n=Cd(a);if(!n)throw Error(ke(90));og(a),J0(a,n)}}}break;case"textarea":dg(t,r);break;case"select":s=r.value,s!=null&&Pi(t,!!r.multiple,s,!1)}};gg=Jx;yg=ei;var ZN={usingClientEntryPoint:!1,Events:[Ro,ki,Cd,fg,pg,Jx]},gl={findFiberByHostInstance:Mn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ew={bundleType:gl.bundleType,version:gl.version,rendererPackageName:gl.rendererPackageName,rendererConfig:gl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jg(t),t===null?null:t.stateNode},findFiberByHostInstance:gl.findFiberByHostInstance||XN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{Nd=ac.inject(ew),xa=ac}catch{}}wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZN;wr.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tm(s))throw Error(ke(200));return YN(t,s,null,r)};wr.createRoot=function(t,s){if(!tm(t))throw Error(ke(299));var r=!1,a="",n=Zy;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(n=s.onRecoverableError)),s=Qx(t,1,!1,null,null,r,!1,a,n),t[Ia]=s.current,io(t.nodeType===8?t.parentNode:t),new em(s)};wr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(ke(188)):(t=Object.keys(t).join(","),Error(ke(268,t)));return t=jg(s),t=t===null?null:t.stateNode,t};wr.flushSync=function(t){return ei(t)};wr.hydrate=function(t,s,r){if(!Ld(s))throw Error(ke(200));return Od(null,t,s,!0,r)};wr.hydrateRoot=function(t,s,r){if(!tm(t))throw Error(ke(405));var a=r!=null&&r.hydratedSources||null,n=!1,i="",l=Zy;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),s=Qy(s,null,t,1,r??null,n,!1,i,l),t[Ia]=s.current,io(t),a)for(t=0;t<a.length;t++)r=a[t],n=r._getVersion,n=n(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,n]:s.mutableSourceEagerHydrationData.push(r,n);return new Rd(s)};wr.render=function(t,s,r){if(!Ld(s))throw Error(ke(200));return Od(null,t,s,!1,r)};wr.unmountComponentAtNode=function(t){if(!Ld(t))throw Error(ke(40));return t._reactRootContainer?(ei(function(){Od(null,null,t,!1,function(){t._reactRootContainer=null,t[Ia]=null})}),!0):!1};wr.unstable_batchedUpdates=Jx;wr.unstable_renderSubtreeIntoContainer=function(t,s,r,a){if(!Ld(r))throw Error(ke(200));if(t==null||t._reactInternals===void 0)throw Error(ke(38));return Od(t,s,r,!1,a)};wr.version="18.3.1-next-f1338f8080-20240426";function eb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eb)}catch(t){console.error(t)}}eb(),eg.exports=wr;var sm=eg.exports;const tw=zp(sm),sw=$p({__proto__:null,default:tw},[sm]);var Qh=sm;$0.createRoot=Qh.createRoot,$0.hydrateRoot=Qh.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bt(){return Bt=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Bt.apply(this,arguments)}var Xt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Xt||(Xt={}));const Zh="popstate";function rw(t){t===void 0&&(t={});function s(a,n){let{pathname:i,search:l,hash:o}=a.location;return po("",{pathname:i,search:l,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:ti(n)}return nw(s,r,null,t)}function tt(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function Yi(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function aw(){return Math.random().toString(36).substr(2,8)}function ef(t,s){return{usr:t.state,key:t.key,idx:s}}function po(t,s,r,a){return r===void 0&&(r=null),Bt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?Va(s):s,{state:r,key:s&&s.key||a||aw()})}function ti(t){let{pathname:s="/",search:r="",hash:a=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(s+=a.charAt(0)==="#"?a:"#"+a),s}function Va(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let a=t.indexOf("?");a>=0&&(s.search=t.substr(a),t=t.substr(0,a)),t&&(s.pathname=t)}return s}function nw(t,s,r,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:i=!1}=a,l=n.history,o=Xt.Pop,c=null,d=u();d==null&&(d=0,l.replaceState(Bt({},l.state,{idx:d}),""));function u(){return(l.state||{idx:null}).idx}function p(){o=Xt.Pop;let g=u(),j=g==null?null:g-d;d=g,c&&c({action:o,location:x.location,delta:j})}function m(g,j){o=Xt.Push;let b=po(x.location,g,j);d=u()+1;let N=ef(b,d),C=x.createHref(b);try{l.pushState(N,"",C)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;n.location.assign(C)}i&&c&&c({action:o,location:x.location,delta:1})}function f(g,j){o=Xt.Replace;let b=po(x.location,g,j);d=u();let N=ef(b,d),C=x.createHref(b);l.replaceState(N,"",C),i&&c&&c({action:o,location:x.location,delta:0})}function h(g){let j=n.location.origin!=="null"?n.location.origin:n.location.href,b=typeof g=="string"?g:ti(g);return b=b.replace(/ $/,"%20"),tt(j,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,j)}let x={get action(){return o},get location(){return t(n,l)},listen(g){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(Zh,p),c=g,()=>{n.removeEventListener(Zh,p),c=null}},createHref(g){return s(n,g)},createURL:h,encodeLocation(g){let j=h(g);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:m,replace:f,go(g){return l.go(g)}};return x}var Tt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Tt||(Tt={}));const iw=new Set(["lazy","caseSensitive","path","id","index","children"]);function lw(t){return t.index===!0}function id(t,s,r,a){return r===void 0&&(r=[]),a===void 0&&(a={}),t.map((n,i)=>{let l=[...r,String(i)],o=typeof n.id=="string"?n.id:l.join("-");if(tt(n.index!==!0||!n.children,"Cannot specify children on an index route"),tt(!a[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),lw(n)){let c=Bt({},n,s(n),{id:o});return a[o]=c,c}else{let c=Bt({},n,s(n),{id:o,children:void 0});return a[o]=c,n.children&&(c.children=id(n.children,s,l,a)),c}})}function Rn(t,s,r){return r===void 0&&(r="/"),Fc(t,s,r,!1)}function Fc(t,s,r,a){let n=typeof s=="string"?Va(s):s,i=rl(n.pathname||"/",r);if(i==null)return null;let l=tb(t);cw(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=vw(i);o=yw(l[c],d,a)}return o}function ow(t,s){let{route:r,pathname:a,params:n}=t;return{id:r.id,pathname:a,params:n,data:s[r.id],handle:r.handle}}function tb(t,s,r,a){s===void 0&&(s=[]),r===void 0&&(r=[]),a===void 0&&(a="");let n=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(tt(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let d=Pa([a,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(tt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),tb(i.children,s,u,d)),!(i.path==null&&!i.index)&&s.push({path:d,score:pw(d,i.index),routesMeta:u})};return t.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))n(i,l);else for(let c of sb(i.path))n(i,l,c)}),s}function sb(t){let s=t.split("/");if(s.length===0)return[];let[r,...a]=s,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let l=sb(a.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),n&&o.push(...l),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function cw(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:gw(s.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const dw=/^:[\w-]+$/,uw=3,xw=2,mw=1,hw=10,fw=-2,tf=t=>t==="*";function pw(t,s){let r=t.split("/"),a=r.length;return r.some(tf)&&(a+=fw),s&&(a+=xw),r.filter(n=>!tf(n)).reduce((n,i)=>n+(dw.test(i)?uw:i===""?mw:hw),a)}function gw(t,s){return t.length===s.length&&t.slice(0,-1).every((a,n)=>a===s[n])?t[t.length-1]-s[s.length-1]:0}function yw(t,s,r){r===void 0&&(r=!1);let{routesMeta:a}=t,n={},i="/",l=[];for(let o=0;o<a.length;++o){let c=a[o],d=o===a.length-1,u=i==="/"?s:s.slice(i.length)||"/",p=sf({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!p&&d&&r&&!a[a.length-1].route.index&&(p=sf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!p)return null;Object.assign(n,p.params),l.push({params:n,pathname:Pa([i,p.pathname]),pathnameBase:ww(Pa([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=Pa([i,p.pathnameBase]))}return l}function sf(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,a]=bw(t.path,t.caseSensitive,t.end),n=s.match(r);if(!n)return null;let i=n[0],l=i.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:a.reduce((d,u,p)=>{let{paramName:m,isOptional:f}=u;if(m==="*"){let x=o[p]||"";l=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const h=o[p];return f&&!h?d[m]=void 0:d[m]=(h||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:t}}function bw(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),Yi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(a.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,s?void 0:"i"),a]}function vw(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Yi(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function rl(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,a=t.charAt(r);return a&&a!=="/"?null:t.slice(r)||"/"}function jw(t,s){s===void 0&&(s="/");let{pathname:r,search:a="",hash:n=""}=typeof t=="string"?Va(t):t;return{pathname:r?r.startsWith("/")?r:Nw(r,s):s,search:kw(a),hash:Sw(n)}}function Nw(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function b0(t,s,r,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rb(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function Id(t,s){let r=rb(t);return s?r.map((a,n)=>n===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function Md(t,s,r,a){a===void 0&&(a=!1);let n;typeof t=="string"?n=Va(t):(n=Bt({},t),tt(!n.pathname||!n.pathname.includes("?"),b0("?","pathname","search",n)),tt(!n.pathname||!n.pathname.includes("#"),b0("#","pathname","hash",n)),tt(!n.search||!n.search.includes("#"),b0("#","search","hash",n)));let i=t===""||n.pathname==="",l=i?"/":n.pathname,o;if(l==null)o=r;else{let p=s.length-1;if(!a&&l.startsWith("..")){let m=l.split("/");for(;m[0]==="..";)m.shift(),p-=1;n.pathname=m.join("/")}o=p>=0?s[p]:"/"}let c=jw(n,o),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Pa=t=>t.join("/").replace(/\/\/+/g,"/"),ww=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),kw=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Sw=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class ld{constructor(s,r,a,n){n===void 0&&(n=!1),this.status=s,this.statusText=r||"",this.internal=n,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}}function go(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ab=["post","put","patch","delete"],Cw=new Set(ab),_w=["get",...ab],Tw=new Set(_w),Ew=new Set([301,302,303,307,308]),Fw=new Set([307,308]),v0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Aw={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},yl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},rm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pw=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),nb="remix-router-transitions";function Dw(t){const s=t.window?t.window:typeof window<"u"?window:void 0,r=typeof s<"u"&&typeof s.document<"u"&&typeof s.document.createElement<"u",a=!r;tt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let n;if(t.mapRouteProperties)n=t.mapRouteProperties;else if(t.detectErrorBoundary){let ee=t.detectErrorBoundary;n=oe=>({hasErrorBoundary:ee(oe)})}else n=Pw;let i={},l=id(t.routes,n,void 0,i),o,c=t.basename||"/",d=t.dataStrategy||Iw,u=t.patchRoutesOnNavigation,p=Bt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),m=null,f=new Set,h=null,x=null,g=null,j=t.hydrationData!=null,b=Rn(l,t.history.location,c),N=!1,C=null;if(b==null&&!u){let ee=ar(404,{pathname:t.history.location.pathname}),{matches:oe,route:de}=hf(l);b=oe,C={[de.id]:ee}}b&&!t.hydrationData&&we(b,l,t.history.location.pathname).active&&(b=null);let A;if(b)if(b.some(ee=>ee.route.lazy))A=!1;else if(!b.some(ee=>ee.route.loader))A=!0;else if(p.v7_partialHydration){let ee=t.hydrationData?t.hydrationData.loaderData:null,oe=t.hydrationData?t.hydrationData.errors:null;if(oe){let de=b.findIndex(ge=>oe[ge.route.id]!==void 0);A=b.slice(0,de+1).every(ge=>!Lu(ge.route,ee,oe))}else A=b.every(de=>!Lu(de.route,ee,oe))}else A=t.hydrationData!=null;else if(A=!1,b=[],p.v7_partialHydration){let ee=we(null,l,t.history.location.pathname);ee.active&&ee.matches&&(N=!0,b=ee.matches)}let F,w={historyAction:t.history.action,location:t.history.location,matches:b,initialized:A,navigation:v0,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||C,fetchers:new Map,blockers:new Map},_=Xt.Pop,v=!1,S,R=!1,D=new Map,V=null,O=!1,I=!1,z=[],Q=new Set,P=new Map,k=0,X=-1,se=new Map,B=new Set,L=new Map,H=new Map,K=new Set,J=new Map,re=new Map,q;function ae(){if(m=t.history.listen(ee=>{let{action:oe,location:de,delta:ge}=ee;if(q){q(),q=void 0;return}Yi(re.size===0||ge!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ee=me({currentLocation:w.location,nextLocation:de,historyAction:oe});if(Ee&&ge!=null){let M=new Promise(G=>{q=G});t.history.go(ge*-1),he(Ee,{state:"blocked",location:de,proceed(){he(Ee,{state:"proceeding",proceed:void 0,reset:void 0,location:de}),M.then(()=>t.history.go(ge))},reset(){let G=new Map(w.blockers);G.set(Ee,yl),Y({blockers:G})}});return}return Le(oe,de)}),r){Xw(s,D);let ee=()=>Qw(s,D);s.addEventListener("pagehide",ee),V=()=>s.removeEventListener("pagehide",ee)}return w.initialized||Le(Xt.Pop,w.location,{initialHydration:!0}),F}function xe(){m&&m(),V&&V(),f.clear(),S&&S.abort(),w.fetchers.forEach((ee,oe)=>Xe(oe)),w.blockers.forEach((ee,oe)=>$r(oe))}function _e(ee){return f.add(ee),()=>f.delete(ee)}function Y(ee,oe){oe===void 0&&(oe={}),w=Bt({},w,ee);let de=[],ge=[];p.v7_fetcherPersist&&w.fetchers.forEach((Ee,M)=>{Ee.state==="idle"&&(K.has(M)?ge.push(M):de.push(M))}),K.forEach(Ee=>{!w.fetchers.has(Ee)&&!P.has(Ee)&&ge.push(Ee)}),[...f].forEach(Ee=>Ee(w,{deletedFetchers:ge,viewTransitionOpts:oe.viewTransitionOpts,flushSync:oe.flushSync===!0})),p.v7_fetcherPersist?(de.forEach(Ee=>w.fetchers.delete(Ee)),ge.forEach(Ee=>Xe(Ee))):ge.forEach(Ee=>K.delete(Ee))}function Fe(ee,oe,de){var ge,Ee;let{flushSync:M}=de===void 0?{}:de,G=w.actionData!=null&&w.navigation.formMethod!=null&&Jr(w.navigation.formMethod)&&w.navigation.state==="loading"&&((ge=ee.state)==null?void 0:ge._isRedirect)!==!0,E;oe.actionData?Object.keys(oe.actionData).length>0?E=oe.actionData:E=null:G?E=w.actionData:E=null;let T=oe.loaderData?xf(w.loaderData,oe.loaderData,oe.matches||[],oe.errors):w.loaderData,U=w.blockers;U.size>0&&(U=new Map(U),U.forEach((te,le)=>U.set(le,yl)));let W=v===!0||w.navigation.formMethod!=null&&Jr(w.navigation.formMethod)&&((Ee=ee.state)==null?void 0:Ee._isRedirect)!==!0;o&&(l=o,o=void 0),O||_===Xt.Pop||(_===Xt.Push?t.history.push(ee,ee.state):_===Xt.Replace&&t.history.replace(ee,ee.state));let Z;if(_===Xt.Pop){let te=D.get(w.location.pathname);te&&te.has(ee.pathname)?Z={currentLocation:w.location,nextLocation:ee}:D.has(ee.pathname)&&(Z={currentLocation:ee,nextLocation:w.location})}else if(R){let te=D.get(w.location.pathname);te?te.add(ee.pathname):(te=new Set([ee.pathname]),D.set(w.location.pathname,te)),Z={currentLocation:w.location,nextLocation:ee}}Y(Bt({},oe,{actionData:E,loaderData:T,historyAction:_,location:ee,initialized:!0,navigation:v0,revalidation:"idle",restoreScrollPosition:Te(ee,oe.matches||w.matches),preventScrollReset:W,blockers:U}),{viewTransitionOpts:Z,flushSync:M===!0}),_=Xt.Pop,v=!1,R=!1,O=!1,I=!1,z=[]}async function Be(ee,oe){if(typeof ee=="number"){t.history.go(ee);return}let de=Ru(w.location,w.matches,c,p.v7_prependBasename,ee,p.v7_relativeSplatPath,oe==null?void 0:oe.fromRouteId,oe==null?void 0:oe.relative),{path:ge,submission:Ee,error:M}=rf(p.v7_normalizeFormMethod,!1,de,oe),G=w.location,E=po(w.location,ge,oe&&oe.state);E=Bt({},E,t.history.encodeLocation(E));let T=oe&&oe.replace!=null?oe.replace:void 0,U=Xt.Push;T===!0?U=Xt.Replace:T===!1||Ee!=null&&Jr(Ee.formMethod)&&Ee.formAction===w.location.pathname+w.location.search&&(U=Xt.Replace);let W=oe&&"preventScrollReset"in oe?oe.preventScrollReset===!0:void 0,Z=(oe&&oe.flushSync)===!0,te=me({currentLocation:G,nextLocation:E,historyAction:U});if(te){he(te,{state:"blocked",location:E,proceed(){he(te,{state:"proceeding",proceed:void 0,reset:void 0,location:E}),Be(ee,oe)},reset(){let le=new Map(w.blockers);le.set(te,yl),Y({blockers:le})}});return}return await Le(U,E,{submission:Ee,pendingError:M,preventScrollReset:W,replace:oe&&oe.replace,enableViewTransition:oe&&oe.viewTransition,flushSync:Z})}function He(){if(lt(),Y({revalidation:"loading"}),w.navigation.state!=="submitting"){if(w.navigation.state==="idle"){Le(w.historyAction,w.location,{startUninterruptedRevalidation:!0});return}Le(_||w.historyAction,w.navigation.location,{overrideNavigation:w.navigation,enableViewTransition:R===!0})}}async function Le(ee,oe,de){S&&S.abort(),S=null,_=ee,O=(de&&de.startUninterruptedRevalidation)===!0,$e(w.location,w.matches),v=(de&&de.preventScrollReset)===!0,R=(de&&de.enableViewTransition)===!0;let ge=o||l,Ee=de&&de.overrideNavigation,M=de!=null&&de.initialHydration&&w.matches&&w.matches.length>0&&!N?w.matches:Rn(ge,oe,c),G=(de&&de.flushSync)===!0;if(M&&w.initialized&&!I&&Ww(w.location,oe)&&!(de&&de.submission&&Jr(de.submission.formMethod))){Fe(oe,{matches:M},{flushSync:G});return}let E=we(M,ge,oe.pathname);if(E.active&&E.matches&&(M=E.matches),!M){let{error:ce,notFoundMatches:ie,route:ue}=be(oe.pathname);Fe(oe,{matches:ie,loaderData:{},errors:{[ue.id]:ce}},{flushSync:G});return}S=new AbortController;let T=pi(t.history,oe,S.signal,de&&de.submission),U;if(de&&de.pendingError)U=[Ln(M).route.id,{type:Tt.error,error:de.pendingError}];else if(de&&de.submission&&Jr(de.submission.formMethod)){let ce=await ve(T,oe,de.submission,M,E.active,{replace:de.replace,flushSync:G});if(ce.shortCircuited)return;if(ce.pendingActionResult){let[ie,ue]=ce.pendingActionResult;if(fr(ue)&&go(ue.error)&&ue.error.status===404){S=null,Fe(oe,{matches:ce.matches,loaderData:{},errors:{[ie]:ue.error}});return}}M=ce.matches||M,U=ce.pendingActionResult,Ee=j0(oe,de.submission),G=!1,E.active=!1,T=pi(t.history,T.url,T.signal)}let{shortCircuited:W,matches:Z,loaderData:te,errors:le}=await et(T,oe,M,E.active,Ee,de&&de.submission,de&&de.fetcherSubmission,de&&de.replace,de&&de.initialHydration===!0,G,U);W||(S=null,Fe(oe,Bt({matches:Z||M},mf(U),{loaderData:te,errors:le})))}async function ve(ee,oe,de,ge,Ee,M){M===void 0&&(M={}),lt();let G=Kw(oe,de);if(Y({navigation:G},{flushSync:M.flushSync===!0}),Ee){let U=await Ge(ge,oe.pathname,ee.signal);if(U.type==="aborted")return{shortCircuited:!0};if(U.type==="error"){let W=Ln(U.partialMatches).route.id;return{matches:U.partialMatches,pendingActionResult:[W,{type:Tt.error,error:U.error}]}}else if(U.matches)ge=U.matches;else{let{notFoundMatches:W,error:Z,route:te}=be(oe.pathname);return{matches:W,pendingActionResult:[te.id,{type:Tt.error,error:Z}]}}}let E,T=Cl(ge,oe);if(!T.route.action&&!T.route.lazy)E={type:Tt.error,error:ar(405,{method:ee.method,pathname:oe.pathname,routeId:T.route.id})};else if(E=(await Ct("action",w,ee,[T],ge,null))[T.route.id],ee.signal.aborted)return{shortCircuited:!0};if($n(E)){let U;return M&&M.replace!=null?U=M.replace:U=cf(E.response.headers.get("Location"),new URL(ee.url),c)===w.location.pathname+w.location.search,await it(ee,E,!0,{submission:de,replace:U}),{shortCircuited:!0}}if(an(E))throw ar(400,{type:"defer-action"});if(fr(E)){let U=Ln(ge,T.route.id);return(M&&M.replace)!==!0&&(_=Xt.Push),{matches:ge,pendingActionResult:[U.route.id,E]}}return{matches:ge,pendingActionResult:[T.route.id,E]}}async function et(ee,oe,de,ge,Ee,M,G,E,T,U,W){let Z=Ee||j0(oe,M),te=M||G||pf(Z),le=!O&&(!p.v7_partialHydration||!T);if(ge){if(le){let ft=wt(W);Y(Bt({navigation:Z},ft!==void 0?{actionData:ft}:{}),{flushSync:U})}let Ke=await Ge(de,oe.pathname,ee.signal);if(Ke.type==="aborted")return{shortCircuited:!0};if(Ke.type==="error"){let ft=Ln(Ke.partialMatches).route.id;return{matches:Ke.partialMatches,loaderData:{},errors:{[ft]:Ke.error}}}else if(Ke.matches)de=Ke.matches;else{let{error:ft,notFoundMatches:pt,route:At}=be(oe.pathname);return{matches:pt,loaderData:{},errors:{[At.id]:ft}}}}let ce=o||l,[ie,ue]=nf(t.history,w,de,te,oe,p.v7_partialHydration&&T===!0,p.v7_skipActionErrorRevalidation,I,z,Q,K,L,B,ce,c,W);if(ye(Ke=>!(de&&de.some(ft=>ft.route.id===Ke))||ie&&ie.some(ft=>ft.route.id===Ke)),X=++k,ie.length===0&&ue.length===0){let Ke=na();return Fe(oe,Bt({matches:de,loaderData:{},errors:W&&fr(W[1])?{[W[0]]:W[1].error}:null},mf(W),Ke?{fetchers:new Map(w.fetchers)}:{}),{flushSync:U}),{shortCircuited:!0}}if(le){let Ke={};if(!ge){Ke.navigation=Z;let ft=wt(W);ft!==void 0&&(Ke.actionData=ft)}ue.length>0&&(Ke.fetchers=fe(ue)),Y(Ke,{flushSync:U})}ue.forEach(Ke=>{bt(Ke.key),Ke.controller&&P.set(Ke.key,Ke.controller)});let Ne=()=>ue.forEach(Ke=>bt(Ke.key));S&&S.signal.addEventListener("abort",Ne);let{loaderResults:Ae,fetcherResults:je}=await St(w,de,ie,ue,ee);if(ee.signal.aborted)return{shortCircuited:!0};S&&S.signal.removeEventListener("abort",Ne),ue.forEach(Ke=>P.delete(Ke.key));let Ce=nc(Ae);if(Ce)return await it(ee,Ce.result,!0,{replace:E}),{shortCircuited:!0};if(Ce=nc(je),Ce)return B.add(Ce.key),await it(ee,Ce.result,!0,{replace:E}),{shortCircuited:!0};let{loaderData:ze,errors:dt}=uf(w,de,Ae,W,ue,je,J);J.forEach((Ke,ft)=>{Ke.subscribe(pt=>{(pt||Ke.done)&&J.delete(ft)})}),p.v7_partialHydration&&T&&w.errors&&(dt=Bt({},w.errors,dt));let rt=na(),_t=ka(X),Ps=rt||_t||ue.length>0;return Bt({matches:de,loaderData:ze,errors:dt},Ps?{fetchers:new Map(w.fetchers)}:{})}function wt(ee){if(ee&&!fr(ee[1]))return{[ee[0]]:ee[1].data};if(w.actionData)return Object.keys(w.actionData).length===0?null:w.actionData}function fe(ee){return ee.forEach(oe=>{let de=w.fetchers.get(oe.key),ge=bl(void 0,de?de.data:void 0);w.fetchers.set(oe.key,ge)}),new Map(w.fetchers)}function ne(ee,oe,de,ge){if(a)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");bt(ee);let Ee=(ge&&ge.flushSync)===!0,M=o||l,G=Ru(w.location,w.matches,c,p.v7_prependBasename,de,p.v7_relativeSplatPath,oe,ge==null?void 0:ge.relative),E=Rn(M,G,c),T=we(E,M,G);if(T.active&&T.matches&&(E=T.matches),!E){pe(ee,oe,ar(404,{pathname:G}),{flushSync:Ee});return}let{path:U,submission:W,error:Z}=rf(p.v7_normalizeFormMethod,!0,G,ge);if(Z){pe(ee,oe,Z,{flushSync:Ee});return}let te=Cl(E,U),le=(ge&&ge.preventScrollReset)===!0;if(W&&Jr(W.formMethod)){Ue(ee,oe,U,te,E,T.active,Ee,le,W);return}L.set(ee,{routeId:oe,path:U}),kt(ee,oe,U,te,E,T.active,Ee,le,W)}async function Ue(ee,oe,de,ge,Ee,M,G,E,T){lt(),L.delete(ee);function U(vt){if(!vt.route.action&&!vt.route.lazy){let Gs=ar(405,{method:T.formMethod,pathname:de,routeId:oe});return pe(ee,oe,Gs,{flushSync:G}),!0}return!1}if(!M&&U(ge))return;let W=w.fetchers.get(ee);ot(ee,Yw(T,W),{flushSync:G});let Z=new AbortController,te=pi(t.history,de,Z.signal,T);if(M){let vt=await Ge(Ee,new URL(te.url).pathname,te.signal,ee);if(vt.type==="aborted")return;if(vt.type==="error"){pe(ee,oe,vt.error,{flushSync:G});return}else if(vt.matches){if(Ee=vt.matches,ge=Cl(Ee,de),U(ge))return}else{pe(ee,oe,ar(404,{pathname:de}),{flushSync:G});return}}P.set(ee,Z);let le=k,ie=(await Ct("action",w,te,[ge],Ee,ee))[ge.route.id];if(te.signal.aborted){P.get(ee)===Z&&P.delete(ee);return}if(p.v7_fetcherPersist&&K.has(ee)){if($n(ie)||fr(ie)){ot(ee,Ya(void 0));return}}else{if($n(ie))if(P.delete(ee),X>le){ot(ee,Ya(void 0));return}else return B.add(ee),ot(ee,bl(T)),it(te,ie,!1,{fetcherSubmission:T,preventScrollReset:E});if(fr(ie)){pe(ee,oe,ie.error);return}}if(an(ie))throw ar(400,{type:"defer-action"});let ue=w.navigation.location||w.location,Ne=pi(t.history,ue,Z.signal),Ae=o||l,je=w.navigation.state!=="idle"?Rn(Ae,w.navigation.location,c):w.matches;tt(je,"Didn't find any matches after fetcher action");let Ce=++k;se.set(ee,Ce);let ze=bl(T,ie.data);w.fetchers.set(ee,ze);let[dt,rt]=nf(t.history,w,je,T,ue,!1,p.v7_skipActionErrorRevalidation,I,z,Q,K,L,B,Ae,c,[ge.route.id,ie]);rt.filter(vt=>vt.key!==ee).forEach(vt=>{let Gs=vt.key,En=w.fetchers.get(Gs),at=bl(void 0,En?En.data:void 0);w.fetchers.set(Gs,at),bt(Gs),vt.controller&&P.set(Gs,vt.controller)}),Y({fetchers:new Map(w.fetchers)});let _t=()=>rt.forEach(vt=>bt(vt.key));Z.signal.addEventListener("abort",_t);let{loaderResults:Ps,fetcherResults:Ke}=await St(w,je,dt,rt,Ne);if(Z.signal.aborted)return;Z.signal.removeEventListener("abort",_t),se.delete(ee),P.delete(ee),rt.forEach(vt=>P.delete(vt.key));let ft=nc(Ps);if(ft)return it(Ne,ft.result,!1,{preventScrollReset:E});if(ft=nc(Ke),ft)return B.add(ft.key),it(Ne,ft.result,!1,{preventScrollReset:E});let{loaderData:pt,errors:At}=uf(w,je,Ps,void 0,rt,Ke,J);if(w.fetchers.has(ee)){let vt=Ya(ie.data);w.fetchers.set(ee,vt)}ka(Ce),w.navigation.state==="loading"&&Ce>X?(tt(_,"Expected pending action"),S&&S.abort(),Fe(w.navigation.location,{matches:je,loaderData:pt,errors:At,fetchers:new Map(w.fetchers)})):(Y({errors:At,loaderData:xf(w.loaderData,pt,je,At),fetchers:new Map(w.fetchers)}),I=!1)}async function kt(ee,oe,de,ge,Ee,M,G,E,T){let U=w.fetchers.get(ee);ot(ee,bl(T,U?U.data:void 0),{flushSync:G});let W=new AbortController,Z=pi(t.history,de,W.signal);if(M){let ie=await Ge(Ee,new URL(Z.url).pathname,Z.signal,ee);if(ie.type==="aborted")return;if(ie.type==="error"){pe(ee,oe,ie.error,{flushSync:G});return}else if(ie.matches)Ee=ie.matches,ge=Cl(Ee,de);else{pe(ee,oe,ar(404,{pathname:de}),{flushSync:G});return}}P.set(ee,W);let te=k,ce=(await Ct("loader",w,Z,[ge],Ee,ee))[ge.route.id];if(an(ce)&&(ce=await am(ce,Z.signal,!0)||ce),P.get(ee)===W&&P.delete(ee),!Z.signal.aborted){if(K.has(ee)){ot(ee,Ya(void 0));return}if($n(ce))if(X>te){ot(ee,Ya(void 0));return}else{B.add(ee),await it(Z,ce,!1,{preventScrollReset:E});return}if(fr(ce)){pe(ee,oe,ce.error);return}tt(!an(ce),"Unhandled fetcher deferred data"),ot(ee,Ya(ce.data))}}async function it(ee,oe,de,ge){let{submission:Ee,fetcherSubmission:M,preventScrollReset:G,replace:E}=ge===void 0?{}:ge;oe.response.headers.has("X-Remix-Revalidate")&&(I=!0);let T=oe.response.headers.get("Location");tt(T,"Expected a Location header on the redirect Response"),T=cf(T,new URL(ee.url),c);let U=po(w.location,T,{_isRedirect:!0});if(r){let ie=!1;if(oe.response.headers.has("X-Remix-Reload-Document"))ie=!0;else if(rm.test(T)){const ue=t.history.createURL(T);ie=ue.origin!==s.location.origin||rl(ue.pathname,c)==null}if(ie){E?s.location.replace(T):s.location.assign(T);return}}S=null;let W=E===!0||oe.response.headers.has("X-Remix-Replace")?Xt.Replace:Xt.Push,{formMethod:Z,formAction:te,formEncType:le}=w.navigation;!Ee&&!M&&Z&&te&&le&&(Ee=pf(w.navigation));let ce=Ee||M;if(Fw.has(oe.response.status)&&ce&&Jr(ce.formMethod))await Le(W,U,{submission:Bt({},ce,{formAction:T}),preventScrollReset:G||v,enableViewTransition:de?R:void 0});else{let ie=j0(U,Ee);await Le(W,U,{overrideNavigation:ie,fetcherSubmission:M,preventScrollReset:G||v,enableViewTransition:de?R:void 0})}}async function Ct(ee,oe,de,ge,Ee,M){let G,E={};try{G=await Mw(d,ee,oe,de,ge,Ee,M,i,n)}catch(T){return ge.forEach(U=>{E[U.route.id]={type:Tt.error,error:T}}),E}for(let[T,U]of Object.entries(G))if(Vw(U)){let W=U.result;E[T]={type:Tt.redirect,response:$w(W,de,T,Ee,c,p.v7_relativeSplatPath)}}else E[T]=await Uw(U);return E}async function St(ee,oe,de,ge,Ee){let M=ee.matches,G=Ct("loader",ee,Ee,de,oe,null),E=Promise.all(ge.map(async W=>{if(W.matches&&W.match&&W.controller){let te=(await Ct("loader",ee,pi(t.history,W.path,W.controller.signal),[W.match],W.matches,W.key))[W.match.route.id];return{[W.key]:te}}else return Promise.resolve({[W.key]:{type:Tt.error,error:ar(404,{pathname:W.path})}})})),T=await G,U=(await E).reduce((W,Z)=>Object.assign(W,Z),{});return await Promise.all([qw(oe,T,Ee.signal,M,ee.loaderData),Jw(oe,U,ge)]),{loaderResults:T,fetcherResults:U}}function lt(){I=!0,z.push(...ye()),L.forEach((ee,oe)=>{P.has(oe)&&Q.add(oe),bt(oe)})}function ot(ee,oe,de){de===void 0&&(de={}),w.fetchers.set(ee,oe),Y({fetchers:new Map(w.fetchers)},{flushSync:(de&&de.flushSync)===!0})}function pe(ee,oe,de,ge){ge===void 0&&(ge={});let Ee=Ln(w.matches,oe);Xe(ee),Y({errors:{[Ee.route.id]:de},fetchers:new Map(w.fetchers)},{flushSync:(ge&&ge.flushSync)===!0})}function Oe(ee){return H.set(ee,(H.get(ee)||0)+1),K.has(ee)&&K.delete(ee),w.fetchers.get(ee)||Aw}function Xe(ee){let oe=w.fetchers.get(ee);P.has(ee)&&!(oe&&oe.state==="loading"&&se.has(ee))&&bt(ee),L.delete(ee),se.delete(ee),B.delete(ee),p.v7_fetcherPersist&&K.delete(ee),Q.delete(ee),w.fetchers.delete(ee)}function Ft(ee){let oe=(H.get(ee)||0)-1;oe<=0?(H.delete(ee),K.add(ee),p.v7_fetcherPersist||Xe(ee)):H.set(ee,oe),Y({fetchers:new Map(w.fetchers)})}function bt(ee){let oe=P.get(ee);oe&&(oe.abort(),P.delete(ee))}function Hs(ee){for(let oe of ee){let de=Oe(oe),ge=Ya(de.data);w.fetchers.set(oe,ge)}}function na(){let ee=[],oe=!1;for(let de of B){let ge=w.fetchers.get(de);tt(ge,"Expected fetcher: "+de),ge.state==="loading"&&(B.delete(de),ee.push(de),oe=!0)}return Hs(ee),oe}function ka(ee){let oe=[];for(let[de,ge]of se)if(ge<ee){let Ee=w.fetchers.get(de);tt(Ee,"Expected fetcher: "+de),Ee.state==="loading"&&(bt(de),se.delete(de),oe.push(de))}return Hs(oe),oe.length>0}function Ga(ee,oe){let de=w.blockers.get(ee)||yl;return re.get(ee)!==oe&&re.set(ee,oe),de}function $r(ee){w.blockers.delete(ee),re.delete(ee)}function he(ee,oe){let de=w.blockers.get(ee)||yl;tt(de.state==="unblocked"&&oe.state==="blocked"||de.state==="blocked"&&oe.state==="blocked"||de.state==="blocked"&&oe.state==="proceeding"||de.state==="blocked"&&oe.state==="unblocked"||de.state==="proceeding"&&oe.state==="unblocked","Invalid blocker state transition: "+de.state+" -> "+oe.state);let ge=new Map(w.blockers);ge.set(ee,oe),Y({blockers:ge})}function me(ee){let{currentLocation:oe,nextLocation:de,historyAction:ge}=ee;if(re.size===0)return;re.size>1&&Yi(!1,"A router only supports one blocker at a time");let Ee=Array.from(re.entries()),[M,G]=Ee[Ee.length-1],E=w.blockers.get(M);if(!(E&&E.state==="proceeding")&&G({currentLocation:oe,nextLocation:de,historyAction:ge}))return M}function be(ee){let oe=ar(404,{pathname:ee}),de=o||l,{matches:ge,route:Ee}=hf(de);return ye(),{notFoundMatches:ge,route:Ee,error:oe}}function ye(ee){let oe=[];return J.forEach((de,ge)=>{(!ee||ee(ge))&&(de.cancel(),oe.push(ge),J.delete(ge))}),oe}function Pe(ee,oe,de){if(h=ee,g=oe,x=de||null,!j&&w.navigation===v0){j=!0;let ge=Te(w.location,w.matches);ge!=null&&Y({restoreScrollPosition:ge})}return()=>{h=null,g=null,x=null}}function Re(ee,oe){return x&&x(ee,oe.map(ge=>ow(ge,w.loaderData)))||ee.key}function $e(ee,oe){if(h&&g){let de=Re(ee,oe);h[de]=g()}}function Te(ee,oe){if(h){let de=Re(ee,oe),ge=h[de];if(typeof ge=="number")return ge}return null}function we(ee,oe,de){if(u)if(ee){if(Object.keys(ee[0].params).length>0)return{active:!0,matches:Fc(oe,de,c,!0)}}else return{active:!0,matches:Fc(oe,de,c,!0)||[]};return{active:!1,matches:null}}async function Ge(ee,oe,de,ge){if(!u)return{type:"success",matches:ee};let Ee=ee;for(;;){let M=o==null,G=o||l,E=i;try{await u({signal:de,path:oe,matches:Ee,fetcherKey:ge,patch:(W,Z)=>{de.aborted||of(W,Z,G,E,n)}})}catch(W){return{type:"error",error:W,partialMatches:Ee}}finally{M&&!de.aborted&&(l=[...l])}if(de.aborted)return{type:"aborted"};let T=Rn(G,oe,c);if(T)return{type:"success",matches:T};let U=Fc(G,oe,c,!0);if(!U||Ee.length===U.length&&Ee.every((W,Z)=>W.route.id===U[Z].route.id))return{type:"success",matches:null};Ee=U}}function st(ee){i={},o=id(ee,n,void 0,i)}function ut(ee,oe){let de=o==null;of(ee,oe,o||l,i,n),de&&(l=[...l],Y({}))}return F={get basename(){return c},get future(){return p},get state(){return w},get routes(){return l},get window(){return s},initialize:ae,subscribe:_e,enableScrollRestoration:Pe,navigate:Be,fetch:ne,revalidate:He,createHref:ee=>t.history.createHref(ee),encodeLocation:ee=>t.history.encodeLocation(ee),getFetcher:Oe,deleteFetcher:Ft,dispose:xe,getBlocker:Ga,deleteBlocker:$r,patchRoutes:ut,_internalFetchControllers:P,_internalActiveDeferreds:J,_internalSetRoutes:st},F}function Rw(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Ru(t,s,r,a,n,i,l,o){let c,d;if(l){c=[];for(let p of s)if(c.push(p),p.route.id===l){d=p;break}}else c=s,d=s[s.length-1];let u=Md(n||".",Id(c,i),rl(t.pathname,r)||t.pathname,o==="path");if(n==null&&(u.search=t.search,u.hash=t.hash),(n==null||n===""||n===".")&&d){let p=nm(u.search);if(d.route.index&&!p)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&p){let m=new URLSearchParams(u.search),f=m.getAll("index");m.delete("index"),f.filter(x=>x).forEach(x=>m.append("index",x));let h=m.toString();u.search=h?"?"+h:""}}return a&&r!=="/"&&(u.pathname=u.pathname==="/"?r:Pa([r,u.pathname])),ti(u)}function rf(t,s,r,a){if(!a||!Rw(a))return{path:r};if(a.formMethod&&!Gw(a.formMethod))return{path:r,error:ar(405,{method:a.formMethod})};let n=()=>({path:r,error:ar(400,{type:"invalid-body"})}),i=a.formMethod||"get",l=t?i.toUpperCase():i.toLowerCase(),o=ob(r);if(a.body!==void 0){if(a.formEncType==="text/plain"){if(!Jr(l))return n();let m=typeof a.body=="string"?a.body:a.body instanceof FormData||a.body instanceof URLSearchParams?Array.from(a.body.entries()).reduce((f,h)=>{let[x,g]=h;return""+f+x+"="+g+`
`},""):String(a.body);return{path:r,submission:{formMethod:l,formAction:o,formEncType:a.formEncType,formData:void 0,json:void 0,text:m}}}else if(a.formEncType==="application/json"){if(!Jr(l))return n();try{let m=typeof a.body=="string"?JSON.parse(a.body):a.body;return{path:r,submission:{formMethod:l,formAction:o,formEncType:a.formEncType,formData:void 0,json:m,text:void 0}}}catch{return n()}}}tt(typeof FormData=="function","FormData is not available in this environment");let c,d;if(a.formData)c=Ou(a.formData),d=a.formData;else if(a.body instanceof FormData)c=Ou(a.body),d=a.body;else if(a.body instanceof URLSearchParams)c=a.body,d=df(c);else if(a.body==null)c=new URLSearchParams,d=new FormData;else try{c=new URLSearchParams(a.body),d=df(c)}catch{return n()}let u={formMethod:l,formAction:o,formEncType:a&&a.formEncType||"application/x-www-form-urlencoded",formData:d,json:void 0,text:void 0};if(Jr(u.formMethod))return{path:r,submission:u};let p=Va(r);return s&&p.search&&nm(p.search)&&c.append("index",""),p.search="?"+c,{path:ti(p),submission:u}}function af(t,s,r){r===void 0&&(r=!1);let a=t.findIndex(n=>n.route.id===s);return a>=0?t.slice(0,r?a+1:a):t}function nf(t,s,r,a,n,i,l,o,c,d,u,p,m,f,h,x){let g=x?fr(x[1])?x[1].error:x[1].data:void 0,j=t.createURL(s.location),b=t.createURL(n),N=r;i&&s.errors?N=af(r,Object.keys(s.errors)[0],!0):x&&fr(x[1])&&(N=af(r,x[0]));let C=x?x[1].statusCode:void 0,A=l&&C&&C>=400,F=N.filter((_,v)=>{let{route:S}=_;if(S.lazy)return!0;if(S.loader==null)return!1;if(i)return Lu(S,s.loaderData,s.errors);if(Lw(s.loaderData,s.matches[v],_)||c.some(V=>V===_.route.id))return!0;let R=s.matches[v],D=_;return lf(_,Bt({currentUrl:j,currentParams:R.params,nextUrl:b,nextParams:D.params},a,{actionResult:g,actionStatus:C,defaultShouldRevalidate:A?!1:o||j.pathname+j.search===b.pathname+b.search||j.search!==b.search||ib(R,D)}))}),w=[];return p.forEach((_,v)=>{if(i||!r.some(O=>O.route.id===_.routeId)||u.has(v))return;let S=Rn(f,_.path,h);if(!S){w.push({key:v,routeId:_.routeId,path:_.path,matches:null,match:null,controller:null});return}let R=s.fetchers.get(v),D=Cl(S,_.path),V=!1;m.has(v)?V=!1:d.has(v)?(d.delete(v),V=!0):R&&R.state!=="idle"&&R.data===void 0?V=o:V=lf(D,Bt({currentUrl:j,currentParams:s.matches[s.matches.length-1].params,nextUrl:b,nextParams:r[r.length-1].params},a,{actionResult:g,actionStatus:C,defaultShouldRevalidate:A?!1:o})),V&&w.push({key:v,routeId:_.routeId,path:_.path,matches:S,match:D,controller:new AbortController})}),[F,w]}function Lu(t,s,r){if(t.lazy)return!0;if(!t.loader)return!1;let a=s!=null&&s[t.id]!==void 0,n=r!=null&&r[t.id]!==void 0;return!a&&n?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!a&&!n}function Lw(t,s,r){let a=!s||r.route.id!==s.route.id,n=t[r.route.id]===void 0;return a||n}function ib(t,s){let r=t.route.path;return t.pathname!==s.pathname||r!=null&&r.endsWith("*")&&t.params["*"]!==s.params["*"]}function lf(t,s){if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate(s);if(typeof r=="boolean")return r}return s.defaultShouldRevalidate}function of(t,s,r,a,n){var i;let l;if(t){let d=a[t];tt(d,"No route found to patch children into: routeId = "+t),d.children||(d.children=[]),l=d.children}else l=r;let o=s.filter(d=>!l.some(u=>lb(d,u))),c=id(o,n,[t||"_","patch",String(((i=l)==null?void 0:i.length)||"0")],a);l.push(...c)}function lb(t,s){return"id"in t&&"id"in s&&t.id===s.id?!0:t.index===s.index&&t.path===s.path&&t.caseSensitive===s.caseSensitive?(!t.children||t.children.length===0)&&(!s.children||s.children.length===0)?!0:t.children.every((r,a)=>{var n;return(n=s.children)==null?void 0:n.some(i=>lb(r,i))}):!1}async function Ow(t,s,r){if(!t.lazy)return;let a=await t.lazy();if(!t.lazy)return;let n=r[t.id];tt(n,"No route found in manifest");let i={};for(let l in a){let c=n[l]!==void 0&&l!=="hasErrorBoundary";Yi(!c,'Route "'+n.id+'" has a static property "'+l+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+l+'" will be ignored.')),!c&&!iw.has(l)&&(i[l]=a[l])}Object.assign(n,i),Object.assign(n,Bt({},s(n),{lazy:void 0}))}async function Iw(t){let{matches:s}=t,r=s.filter(n=>n.shouldLoad);return(await Promise.all(r.map(n=>n.resolve()))).reduce((n,i,l)=>Object.assign(n,{[r[l].route.id]:i}),{})}async function Mw(t,s,r,a,n,i,l,o,c,d){let u=i.map(f=>f.route.lazy?Ow(f.route,c,o):void 0),p=i.map((f,h)=>{let x=u[h],g=n.some(b=>b.route.id===f.route.id);return Bt({},f,{shouldLoad:g,resolve:async b=>(b&&a.method==="GET"&&(f.route.lazy||f.route.loader)&&(g=!0),g?Bw(s,a,f,x,b,d):Promise.resolve({type:Tt.data,result:void 0}))})}),m=await t({matches:p,request:a,params:i[0].params,fetcherKey:l,context:d});try{await Promise.all(u)}catch{}return m}async function Bw(t,s,r,a,n,i){let l,o,c=d=>{let u,p=new Promise((h,x)=>u=x);o=()=>u(),s.signal.addEventListener("abort",o);let m=h=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+r.route.id+"]"))):d({request:s,params:r.params,context:i},...h!==void 0?[h]:[]),f=(async()=>{try{return{type:"data",result:await(n?n(x=>m(x)):m())}}catch(h){return{type:"error",result:h}}})();return Promise.race([f,p])};try{let d=r.route[t];if(a)if(d){let u,[p]=await Promise.all([c(d).catch(m=>{u=m}),a]);if(u!==void 0)throw u;l=p}else if(await a,d=r.route[t],d)l=await c(d);else if(t==="action"){let u=new URL(s.url),p=u.pathname+u.search;throw ar(405,{method:s.method,pathname:p,routeId:r.route.id})}else return{type:Tt.data,result:void 0};else if(d)l=await c(d);else{let u=new URL(s.url),p=u.pathname+u.search;throw ar(404,{pathname:p})}tt(l.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:Tt.error,result:d}}finally{o&&s.signal.removeEventListener("abort",o)}return l}async function Uw(t){let{result:s,type:r}=t;if(cb(s)){let p;try{let m=s.headers.get("Content-Type");m&&/\bapplication\/json\b/.test(m)?s.body==null?p=null:p=await s.json():p=await s.text()}catch(m){return{type:Tt.error,error:m}}return r===Tt.error?{type:Tt.error,error:new ld(s.status,s.statusText,p),statusCode:s.status,headers:s.headers}:{type:Tt.data,data:p,statusCode:s.status,headers:s.headers}}if(r===Tt.error){if(ff(s)){var a,n;if(s.data instanceof Error){var i,l;return{type:Tt.error,error:s.data,statusCode:(i=s.init)==null?void 0:i.status,headers:(l=s.init)!=null&&l.headers?new Headers(s.init.headers):void 0}}return{type:Tt.error,error:new ld(((a=s.init)==null?void 0:a.status)||500,void 0,s.data),statusCode:go(s)?s.status:void 0,headers:(n=s.init)!=null&&n.headers?new Headers(s.init.headers):void 0}}return{type:Tt.error,error:s,statusCode:go(s)?s.status:void 0}}if(Hw(s)){var o,c;return{type:Tt.deferred,deferredData:s,statusCode:(o=s.init)==null?void 0:o.status,headers:((c=s.init)==null?void 0:c.headers)&&new Headers(s.init.headers)}}if(ff(s)){var d,u;return{type:Tt.data,data:s.data,statusCode:(d=s.init)==null?void 0:d.status,headers:(u=s.init)!=null&&u.headers?new Headers(s.init.headers):void 0}}return{type:Tt.data,data:s}}function $w(t,s,r,a,n,i){let l=t.headers.get("Location");if(tt(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!rm.test(l)){let o=a.slice(0,a.findIndex(c=>c.route.id===r)+1);l=Ru(new URL(s.url),o,n,!0,l,i),t.headers.set("Location",l)}return t}function cf(t,s,r){if(rm.test(t)){let a=t,n=a.startsWith("//")?new URL(s.protocol+a):new URL(a),i=rl(n.pathname,r)!=null;if(n.origin===s.origin&&i)return n.pathname+n.search+n.hash}return t}function pi(t,s,r,a){let n=t.createURL(ob(s)).toString(),i={signal:r};if(a&&Jr(a.formMethod)){let{formMethod:l,formEncType:o}=a;i.method=l.toUpperCase(),o==="application/json"?(i.headers=new Headers({"Content-Type":o}),i.body=JSON.stringify(a.json)):o==="text/plain"?i.body=a.text:o==="application/x-www-form-urlencoded"&&a.formData?i.body=Ou(a.formData):i.body=a.formData}return new Request(n,i)}function Ou(t){let s=new URLSearchParams;for(let[r,a]of t.entries())s.append(r,typeof a=="string"?a:a.name);return s}function df(t){let s=new FormData;for(let[r,a]of t.entries())s.append(r,a);return s}function zw(t,s,r,a,n){let i={},l=null,o,c=!1,d={},u=r&&fr(r[1])?r[1].error:void 0;return t.forEach(p=>{if(!(p.route.id in s))return;let m=p.route.id,f=s[m];if(tt(!$n(f),"Cannot handle redirect results in processLoaderData"),fr(f)){let h=f.error;u!==void 0&&(h=u,u=void 0),l=l||{};{let x=Ln(t,m);l[x.route.id]==null&&(l[x.route.id]=h)}i[m]=void 0,c||(c=!0,o=go(f.error)?f.error.status:500),f.headers&&(d[m]=f.headers)}else an(f)?(a.set(m,f.deferredData),i[m]=f.deferredData.data,f.statusCode!=null&&f.statusCode!==200&&!c&&(o=f.statusCode),f.headers&&(d[m]=f.headers)):(i[m]=f.data,f.statusCode&&f.statusCode!==200&&!c&&(o=f.statusCode),f.headers&&(d[m]=f.headers))}),u!==void 0&&r&&(l={[r[0]]:u},i[r[0]]=void 0),{loaderData:i,errors:l,statusCode:o||200,loaderHeaders:d}}function uf(t,s,r,a,n,i,l){let{loaderData:o,errors:c}=zw(s,r,a,l);return n.forEach(d=>{let{key:u,match:p,controller:m}=d,f=i[u];if(tt(f,"Did not find corresponding fetcher result"),!(m&&m.signal.aborted))if(fr(f)){let h=Ln(t.matches,p==null?void 0:p.route.id);c&&c[h.route.id]||(c=Bt({},c,{[h.route.id]:f.error})),t.fetchers.delete(u)}else if($n(f))tt(!1,"Unhandled fetcher revalidation redirect");else if(an(f))tt(!1,"Unhandled fetcher deferred data");else{let h=Ya(f.data);t.fetchers.set(u,h)}}),{loaderData:o,errors:c}}function xf(t,s,r,a){let n=Bt({},s);for(let i of r){let l=i.route.id;if(s.hasOwnProperty(l)?s[l]!==void 0&&(n[l]=s[l]):t[l]!==void 0&&i.route.loader&&(n[l]=t[l]),a&&a.hasOwnProperty(l))break}return n}function mf(t){return t?fr(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ln(t,s){return(s?t.slice(0,t.findIndex(a=>a.route.id===s)+1):[...t]).reverse().find(a=>a.route.hasErrorBoundary===!0)||t[0]}function hf(t){let s=t.length===1?t[0]:t.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:s}],route:s}}function ar(t,s){let{pathname:r,routeId:a,method:n,type:i,message:l}=s===void 0?{}:s,o="Unknown Server Error",c="Unknown @remix-run/router error";return t===400?(o="Bad Request",n&&r&&a?c="You made a "+n+' request to "'+r+'" but '+('did not provide a `loader` for route "'+a+'", ')+"so there is no way to handle the request.":i==="defer-action"?c="defer() is not supported in actions":i==="invalid-body"&&(c="Unable to encode submission body")):t===403?(o="Forbidden",c='Route "'+a+'" does not match URL "'+r+'"'):t===404?(o="Not Found",c='No route matches URL "'+r+'"'):t===405&&(o="Method Not Allowed",n&&r&&a?c="You made a "+n.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+a+'", ')+"so there is no way to handle the request.":n&&(c='Invalid request method "'+n.toUpperCase()+'"')),new ld(t||500,o,new Error(c),!0)}function nc(t){let s=Object.entries(t);for(let r=s.length-1;r>=0;r--){let[a,n]=s[r];if($n(n))return{key:a,result:n}}}function ob(t){let s=typeof t=="string"?Va(t):t;return ti(Bt({},s,{hash:""}))}function Ww(t,s){return t.pathname!==s.pathname||t.search!==s.search?!1:t.hash===""?s.hash!=="":t.hash===s.hash?!0:s.hash!==""}function Vw(t){return cb(t.result)&&Ew.has(t.result.status)}function an(t){return t.type===Tt.deferred}function fr(t){return t.type===Tt.error}function $n(t){return(t&&t.type)===Tt.redirect}function ff(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function Hw(t){let s=t;return s&&typeof s=="object"&&typeof s.data=="object"&&typeof s.subscribe=="function"&&typeof s.cancel=="function"&&typeof s.resolveData=="function"}function cb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function Gw(t){return Tw.has(t.toLowerCase())}function Jr(t){return Cw.has(t.toLowerCase())}async function qw(t,s,r,a,n){let i=Object.entries(s);for(let l=0;l<i.length;l++){let[o,c]=i[l],d=t.find(m=>(m==null?void 0:m.route.id)===o);if(!d)continue;let u=a.find(m=>m.route.id===d.route.id),p=u!=null&&!ib(u,d)&&(n&&n[d.route.id])!==void 0;an(c)&&p&&await am(c,r,!1).then(m=>{m&&(s[o]=m)})}}async function Jw(t,s,r){for(let a=0;a<r.length;a++){let{key:n,routeId:i,controller:l}=r[a],o=s[n];t.find(d=>(d==null?void 0:d.route.id)===i)&&an(o)&&(tt(l,"Expected an AbortController for revalidating fetcher deferred result"),await am(o,l.signal,!0).then(d=>{d&&(s[n]=d)}))}}async function am(t,s,r){if(r===void 0&&(r=!1),!await t.deferredData.resolveData(s)){if(r)try{return{type:Tt.data,data:t.deferredData.unwrappedData}}catch(n){return{type:Tt.error,error:n}}return{type:Tt.data,data:t.deferredData.data}}}function nm(t){return new URLSearchParams(t).getAll("index").some(s=>s==="")}function Cl(t,s){let r=typeof s=="string"?Va(s).search:s.search;if(t[t.length-1].route.index&&nm(r||""))return t[t.length-1];let a=rb(t);return a[a.length-1]}function pf(t){let{formMethod:s,formAction:r,formEncType:a,text:n,formData:i,json:l}=t;if(!(!s||!r||!a)){if(n!=null)return{formMethod:s,formAction:r,formEncType:a,formData:void 0,json:void 0,text:n};if(i!=null)return{formMethod:s,formAction:r,formEncType:a,formData:i,json:void 0,text:void 0};if(l!==void 0)return{formMethod:s,formAction:r,formEncType:a,formData:void 0,json:l,text:void 0}}}function j0(t,s){return s?{state:"loading",location:t,formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Kw(t,s){return{state:"submitting",location:t,formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text}}function bl(t,s){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:s}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:s}}function Yw(t,s){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:s?s.data:void 0}}function Ya(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Xw(t,s){try{let r=t.sessionStorage.getItem(nb);if(r){let a=JSON.parse(r);for(let[n,i]of Object.entries(a||{}))i&&Array.isArray(i)&&s.set(n,new Set(i||[]))}}catch{}}function Qw(t,s){if(s.size>0){let r={};for(let[a,n]of s)r[a]=[...n];try{t.sessionStorage.setItem(nb,JSON.stringify(r))}catch(a){Yi(!1,"Failed to save applied view transitions in sessionStorage ("+a+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yo(){return yo=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},yo.apply(this,arguments)}const Bd=y.createContext(null),db=y.createContext(null),_n=y.createContext(null),Ud=y.createContext(null),ba=y.createContext({outlet:null,matches:[],isDataRoute:!1}),ub=y.createContext(null);function Zw(t,s){let{relative:r}=s===void 0?{}:s;al()||tt(!1);let{basename:a,navigator:n}=y.useContext(_n),{hash:i,pathname:l,search:o}=hb(t,{relative:r}),c=l;return a!=="/"&&(c=l==="/"?a:Pa([a,l])),n.createHref({pathname:c,search:o,hash:i})}function al(){return y.useContext(Ud)!=null}function oi(){return al()||tt(!1),y.useContext(Ud).location}function xb(t){y.useContext(_n).static||y.useLayoutEffect(t)}function va(){let{isDataRoute:t}=y.useContext(ba);return t?mk():ek()}function ek(){al()||tt(!1);let t=y.useContext(Bd),{basename:s,future:r,navigator:a}=y.useContext(_n),{matches:n}=y.useContext(ba),{pathname:i}=oi(),l=JSON.stringify(Id(n,r.v7_relativeSplatPath)),o=y.useRef(!1);return xb(()=>{o.current=!0}),y.useCallback(function(d,u){if(u===void 0&&(u={}),!o.current)return;if(typeof d=="number"){a.go(d);return}let p=Md(d,JSON.parse(l),i,u.relative==="path");t==null&&s!=="/"&&(p.pathname=p.pathname==="/"?s:Pa([s,p.pathname])),(u.replace?a.replace:a.push)(p,u.state,u)},[s,a,l,i,t])}const tk=y.createContext(null);function sk(t){let s=y.useContext(ba).outlet;return s&&y.createElement(tk.Provider,{value:t},s)}function mb(){let{matches:t}=y.useContext(ba),s=t[t.length-1];return s?s.params:{}}function hb(t,s){let{relative:r}=s===void 0?{}:s,{future:a}=y.useContext(_n),{matches:n}=y.useContext(ba),{pathname:i}=oi(),l=JSON.stringify(Id(n,a.v7_relativeSplatPath));return y.useMemo(()=>Md(t,JSON.parse(l),i,r==="path"),[t,l,i,r])}function rk(t,s){return fb(t,s)}function fb(t,s,r,a){al()||tt(!1);let{navigator:n}=y.useContext(_n),{matches:i}=y.useContext(ba),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=oi(),u;if(s){var p;let g=typeof s=="string"?Va(s):s;c==="/"||(p=g.pathname)!=null&&p.startsWith(c)||tt(!1),u=g}else u=d;let m=u.pathname||"/",f=m;if(c!=="/"){let g=c.replace(/^\//,"").split("/");f="/"+m.replace(/^\//,"").split("/").slice(g.length).join("/")}let h=Rn(t,{pathname:f}),x=ok(h&&h.map(g=>Object.assign({},g,{params:Object.assign({},o,g.params),pathname:Pa([c,n.encodeLocation?n.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:Pa([c,n.encodeLocation?n.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,r,a);return s&&x?y.createElement(Ud.Provider,{value:{location:yo({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Xt.Pop}},x):x}function ak(){let t=xk(),s=go(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},s),r?y.createElement("pre",{style:n},r):null,null)}const nk=y.createElement(ak,null);class ik extends y.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?y.createElement(ba.Provider,{value:this.props.routeContext},y.createElement(ub.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lk(t){let{routeContext:s,match:r,children:a}=t,n=y.useContext(Bd);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),y.createElement(ba.Provider,{value:s},a)}function ok(t,s,r,a){var n;if(s===void 0&&(s=[]),r===void 0&&(r=null),a===void 0&&(a=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=a)!=null&&i.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,o=(n=r)==null?void 0:n.errors;if(o!=null){let u=l.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);u>=0||tt(!1),l=l.slice(0,Math.min(l.length,u+1))}let c=!1,d=-1;if(r&&a&&a.v7_partialHydration)for(let u=0;u<l.length;u++){let p=l[u];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=u),p.route.id){let{loaderData:m,errors:f}=r,h=p.route.loader&&m[p.route.id]===void 0&&(!f||f[p.route.id]===void 0);if(p.route.lazy||h){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((u,p,m)=>{let f,h=!1,x=null,g=null;r&&(f=o&&p.route.id?o[p.route.id]:void 0,x=p.route.errorElement||nk,c&&(d<0&&m===0?(hk("route-fallback"),h=!0,g=null):d===m&&(h=!0,g=p.route.hydrateFallbackElement||null)));let j=s.concat(l.slice(0,m+1)),b=()=>{let N;return f?N=x:h?N=g:p.route.Component?N=y.createElement(p.route.Component,null):p.route.element?N=p.route.element:N=u,y.createElement(lk,{match:p,routeContext:{outlet:u,matches:j,isDataRoute:r!=null},children:N})};return r&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?y.createElement(ik,{location:r.location,revalidation:r.revalidation,component:x,error:f,children:b(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):b()},null)}var pb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(pb||{}),gb=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(gb||{});function ck(t){let s=y.useContext(Bd);return s||tt(!1),s}function dk(t){let s=y.useContext(db);return s||tt(!1),s}function uk(t){let s=y.useContext(ba);return s||tt(!1),s}function yb(t){let s=uk(),r=s.matches[s.matches.length-1];return r.route.id||tt(!1),r.route.id}function xk(){var t;let s=y.useContext(ub),r=dk(gb.UseRouteError),a=yb();return s!==void 0?s:(t=r.errors)==null?void 0:t[a]}function mk(){let{router:t}=ck(pb.UseNavigateStable),s=yb(),r=y.useRef(!1);return xb(()=>{r.current=!0}),y.useCallback(function(n,i){i===void 0&&(i={}),r.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,yo({fromRouteId:s},i)))},[t,s])}const gf={};function hk(t,s,r){gf[t]||(gf[t]=!0)}function fk(t,s){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!s||s.v7_relativeSplatPath),s&&(s.v7_fetcherPersist,s.v7_normalizeFormMethod,s.v7_partialHydration,s.v7_skipActionErrorRevalidation)}function od(t){let{to:s,replace:r,state:a,relative:n}=t;al()||tt(!1);let{future:i,static:l}=y.useContext(_n),{matches:o}=y.useContext(ba),{pathname:c}=oi(),d=va(),u=Md(s,Id(o,i.v7_relativeSplatPath),c,n==="path"),p=JSON.stringify(u);return y.useEffect(()=>d(JSON.parse(p),{replace:r,state:a,relative:n}),[d,p,n,r,a]),null}function bb(t){return sk(t.context)}function De(t){tt(!1)}function pk(t){let{basename:s="/",children:r=null,location:a,navigationType:n=Xt.Pop,navigator:i,static:l=!1,future:o}=t;al()&&tt(!1);let c=s.replace(/^\/*/,"/"),d=y.useMemo(()=>({basename:c,navigator:i,static:l,future:yo({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof a=="string"&&(a=Va(a));let{pathname:u="/",search:p="",hash:m="",state:f=null,key:h="default"}=a,x=y.useMemo(()=>{let g=rl(u,c);return g==null?null:{location:{pathname:g,search:p,hash:m,state:f,key:h},navigationType:n}},[c,u,p,m,f,h,n]);return x==null?null:y.createElement(_n.Provider,{value:d},y.createElement(Ud.Provider,{children:r,value:x}))}function gk(t){let{children:s,location:r}=t;return rk(Iu(s),r)}new Promise(()=>{});function Iu(t,s){s===void 0&&(s=[]);let r=[];return y.Children.forEach(t,(a,n)=>{if(!y.isValidElement(a))return;let i=[...s,n];if(a.type===y.Fragment){r.push.apply(r,Iu(a.props.children,i));return}a.type!==De&&tt(!1),!a.props.index||!a.props.children||tt(!1);let l={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=Iu(a.props.children,i)),r.push(l)}),r}function yk(t){let s={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(s,{element:y.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(s,{hydrateFallbackElement:y.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(s,{errorElement:y.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bo(){return bo=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},bo.apply(this,arguments)}function bk(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,i;for(i=0;i<a.length;i++)n=a[i],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function vk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function jk(t,s){return t.button===0&&(!s||s==="_self")&&!vk(t)}const Nk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wk="6";try{window.__reactRouterVersion=wk}catch{}function kk(t,s){return Dw({basename:void 0,future:bo({},void 0,{v7_prependBasename:!0}),history:rw({window:void 0}),hydrationData:Sk(),routes:t,mapRouteProperties:yk,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function Sk(){var t;let s=(t=window)==null?void 0:t.__staticRouterHydrationData;return s&&s.errors&&(s=bo({},s,{errors:Ck(s.errors)})),s}function Ck(t){if(!t)return null;let s=Object.entries(t),r={};for(let[a,n]of s)if(n&&n.__type==="RouteErrorResponse")r[a]=new ld(n.status,n.statusText,n.data,n.internal===!0);else if(n&&n.__type==="Error"){if(n.__subType){let i=window[n.__subType];if(typeof i=="function")try{let l=new i(n.message);l.stack="",r[a]=l}catch{}}if(r[a]==null){let i=new Error(n.message);i.stack="",r[a]=i}}else r[a]=n;return r}const _k=y.createContext({isTransitioning:!1}),Tk=y.createContext(new Map),Ek="startTransition",yf=Vj[Ek],Fk="flushSync",bf=sw[Fk];function Ak(t){yf?yf(t):t()}function vl(t){bf?bf(t):t()}class Pk{constructor(){this.status="pending",this.promise=new Promise((s,r)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",s(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",r(a))}})}}function Dk(t){let{fallbackElement:s,router:r,future:a}=t,[n,i]=y.useState(r.state),[l,o]=y.useState(),[c,d]=y.useState({isTransitioning:!1}),[u,p]=y.useState(),[m,f]=y.useState(),[h,x]=y.useState(),g=y.useRef(new Map),{v7_startTransition:j}=a||{},b=y.useCallback(_=>{j?Ak(_):_()},[j]),N=y.useCallback((_,v)=>{let{deletedFetchers:S,flushSync:R,viewTransitionOpts:D}=v;_.fetchers.forEach((O,I)=>{O.data!==void 0&&g.current.set(I,O.data)}),S.forEach(O=>g.current.delete(O));let V=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!D||V){R?vl(()=>i(_)):b(()=>i(_));return}if(R){vl(()=>{m&&(u&&u.resolve(),m.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:D.currentLocation,nextLocation:D.nextLocation})});let O=r.window.document.startViewTransition(()=>{vl(()=>i(_))});O.finished.finally(()=>{vl(()=>{p(void 0),f(void 0),o(void 0),d({isTransitioning:!1})})}),vl(()=>f(O));return}m?(u&&u.resolve(),m.skipTransition(),x({state:_,currentLocation:D.currentLocation,nextLocation:D.nextLocation})):(o(_),d({isTransitioning:!0,flushSync:!1,currentLocation:D.currentLocation,nextLocation:D.nextLocation}))},[r.window,m,u,g,b]);y.useLayoutEffect(()=>r.subscribe(N),[r,N]),y.useEffect(()=>{c.isTransitioning&&!c.flushSync&&p(new Pk)},[c]),y.useEffect(()=>{if(u&&l&&r.window){let _=l,v=u.promise,S=r.window.document.startViewTransition(async()=>{b(()=>i(_)),await v});S.finished.finally(()=>{p(void 0),f(void 0),o(void 0),d({isTransitioning:!1})}),f(S)}},[b,l,u,r.window]),y.useEffect(()=>{u&&l&&n.location.key===l.location.key&&u.resolve()},[u,m,n.location,l]),y.useEffect(()=>{!c.isTransitioning&&h&&(o(h.state),d({isTransitioning:!0,flushSync:!1,currentLocation:h.currentLocation,nextLocation:h.nextLocation}),x(void 0))},[c.isTransitioning,h]),y.useEffect(()=>{},[]);let C=y.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:_=>r.navigate(_),push:(_,v,S)=>r.navigate(_,{state:v,preventScrollReset:S==null?void 0:S.preventScrollReset}),replace:(_,v,S)=>r.navigate(_,{replace:!0,state:v,preventScrollReset:S==null?void 0:S.preventScrollReset})}),[r]),A=r.basename||"/",F=y.useMemo(()=>({router:r,navigator:C,static:!1,basename:A}),[r,C,A]),w=y.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return y.useEffect(()=>fk(a,r.future),[a,r.future]),y.createElement(y.Fragment,null,y.createElement(Bd.Provider,{value:F},y.createElement(db.Provider,{value:n},y.createElement(Tk.Provider,{value:g.current},y.createElement(_k.Provider,{value:c},y.createElement(pk,{basename:A,location:n.location,navigationType:n.historyAction,navigator:C,future:w},n.initialized||r.future.v7_partialHydration?y.createElement(Rk,{routes:r.routes,future:r.future,state:n}):s))))),null)}const Rk=y.memo(Lk);function Lk(t){let{routes:s,future:r,state:a}=t;return fb(s,void 0,a,r)}const Ok=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ik=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hn=y.forwardRef(function(s,r){let{onClick:a,relative:n,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:p}=s,m=bk(s,Nk),{basename:f}=y.useContext(_n),h,x=!1;if(typeof d=="string"&&Ik.test(d)&&(h=d,Ok))try{let N=new URL(window.location.href),C=d.startsWith("//")?new URL(N.protocol+d):new URL(d),A=rl(C.pathname,f);C.origin===N.origin&&A!=null?d=A+C.search+C.hash:x=!0}catch{}let g=Zw(d,{relative:n}),j=Mk(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:n,viewTransition:p});function b(N){a&&a(N),N.defaultPrevented||j(N)}return y.createElement("a",bo({},m,{href:h||g,onClick:x||i?a:b,ref:r,target:c}))});var vf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(vf||(vf={}));var jf;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(jf||(jf={}));function Mk(t,s){let{target:r,replace:a,state:n,preventScrollReset:i,relative:l,viewTransition:o}=s===void 0?{}:s,c=va(),d=oi(),u=hb(t,{relative:l});return y.useCallback(p=>{if(jk(p,r)){p.preventDefault();let m=a!==void 0?a:ti(d)===ti(u);c(t,{replace:m,state:n,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,a,n,r,t,i,l,o])}const Nf="http://192.168.1.36:2000";class Bk{constructor(){Sa(this,"authState",{user:null,isAuthenticated:!1,isLoading:!0,error:null});Sa(this,"listeners",new Set);this.initializeFromStorage()}initializeFromStorage(){try{const s=localStorage.getItem("auth_token"),r=localStorage.getItem("user");if(s&&r){const a=JSON.parse(r),n={...a,permissions:Array.isArray(a==null?void 0:a.permissions)?a.permissions:typeof(a==null?void 0:a.permissions)=="string"?a.permissions.split(",").map(i=>i.trim()).filter(Boolean):[]};this.authState={user:n,isAuthenticated:!0,isLoading:!1,error:null}}else this.initializeEmptyState()}catch(s){console.error("Failed to initialize auth from storage:",s),this.authState={user:null,isAuthenticated:!1,isLoading:!1,error:"Failed to restore authentication"}}}initializeEmptyState(){this.authState={user:null,isAuthenticated:!1,isLoading:!1,error:null}}subscribe(s){return this.listeners.add(s),()=>{this.listeners.delete(s)}}notifyListeners(){this.listeners.forEach(s=>s({...this.authState}))}areStatesEqual(s,r){if(s.isAuthenticated!==r.isAuthenticated||s.isLoading!==r.isLoading||s.error!==r.error)return!1;const a=s.user,n=r.user;if(a===null&&n===null)return!0;if(a===null||n===null)return!1;const i=a.permissions?[...a.permissions].sort():[],l=n.permissions?[...n.permissions].sort():[];return a.id===n.id&&a.email===n.email&&a.role===n.role&&a.name===n.name&&JSON.stringify(i)===JSON.stringify(l)}setAuthState(s){const r={...this.authState,...s};this.areStatesEqual(this.authState,r)||(this.authState=r,this.notifyListeners())}getAuthState(){return{...this.authState}}async login(s){try{this.setAuthState({isLoading:!0,error:null});const r=await fetch(`${Nf}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(r.ok){const a=await r.json(),{user:n,token:i}=a;return localStorage.setItem("auth_token",i),localStorage.setItem("user",JSON.stringify(n)),this.setAuthState({user:n,isAuthenticated:!0,isLoading:!1,error:null}),!0}else{const a=await r.json();return this.setAuthState({isLoading:!1,error:a.message||"Login failed. Please check your credentials."}),!1}}catch{return this.setAuthState({isLoading:!1,error:"Login failed. Please check your credentials."}),!1}}async logout(){try{localStorage.removeItem("auth_token"),localStorage.removeItem("user"),this.setAuthState({user:null,isAuthenticated:!1,isLoading:!1,error:null})}catch(s){console.error("Logout error:",s)}}async checkAuth(){try{this.setAuthState({isLoading:!0});const s=localStorage.getItem("auth_token"),r=localStorage.getItem("user");if(!s||!r)return this.setAuthState({user:null,isAuthenticated:!1,isLoading:!1,error:null}),!1;const a=JSON.parse(r);return(await fetch(`${Nf}/api/auth/verify`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).ok?(this.setAuthState({user:a,isAuthenticated:!0,isLoading:!1,error:null}),!0):(localStorage.removeItem("auth_token"),localStorage.removeItem("user"),this.setAuthState({user:null,isAuthenticated:!1,isLoading:!1,error:null}),!1)}catch(s){return console.error("Auth check error:",s),localStorage.removeItem("auth_token"),localStorage.removeItem("user"),this.setAuthState({user:null,isAuthenticated:!1,isLoading:!1,error:"Authentication check failed"}),!1}}getCurrentUser(){return this.authState.user}hasPermission(s){const r=this.authState.user;return r?(Array.isArray(r.permissions)?r.permissions:typeof r.permissions=="string"?r.permissions.split(",").map(n=>n.trim()).filter(Boolean):[]).includes(s):!1}hasRole(s){return this.authState.user?this.authState.user.role===s:!1}async updateProfile(s){try{if(!this.authState.user)return!1;const r={...this.authState.user,...s};return localStorage.setItem("user",JSON.stringify(r)),this.setAuthState({user:r}),!0}catch(r){return console.error("Profile update error:",r),!1}}async changePassword(s,r){try{return console.log("Changing password..."),!0}catch(a){return console.error("Password change error:",a),!1}}}const Fn=new Bk,vb=y.createContext(void 0);function Uk({children:t}){var h,x,g,j,b;const[s,r]=y.useState(Fn.getAuthState());y.useEffect(()=>{const N=Fn.subscribe(r);return Fn.checkAuth(),N},[]);const a=y.useCallback(async(N,C)=>await Fn.login({email:N,password:C}),[]),n=y.useCallback(async()=>{await Fn.logout()},[]),i=y.useCallback(N=>Fn.hasPermission(N),[]),l=y.useCallback(N=>Fn.hasRole(N),[]),o=(h=s.user)==null?void 0:h.id,c=(x=s.user)==null?void 0:x.email,d=(g=s.user)==null?void 0:g.role,u=(j=s.user)==null?void 0:j.name,p=(b=s.user)==null?void 0:b.permissions,m=y.useMemo(()=>{if(!s.user)return null;const N=(p==null?void 0:p.slice().sort().join(","))||"";return`${o}-${c}-${d}-${u}-${N}`},[o,c,d,u,p]),f=y.useMemo(()=>{var N;return{isAuthenticated:s.isAuthenticated,user:s.user,role:((N=s.user)==null?void 0:N.role)||"viewer",isLoading:s.isLoading,error:s.error,login:a,logout:n,hasPermission:i,hasRole:l}},[s.isAuthenticated,s.isLoading,s.error,m,a,n,i,l]);return e.jsx(vb.Provider,{value:f,children:t})}function im(){const t=y.useContext(vb);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function $k({allow:t}){const{isAuthenticated:s,role:r,isLoading:a}=im();return a?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s?t&&!t.includes(r)?e.jsx(od,{to:"/admin",replace:!0},"redirect-to-home"):e.jsx(bb,{}):e.jsx(od,{to:"/admin/login",replace:!0},"redirect-to-login")}function ms({permission:t,anyOf:s,role:r,children:a,fallback:n=null}){const{hasPermission:i,hasRole:l}=im();let o=!0;return r&&(o=o&&l(r)),t&&(o=o&&i(t)),Array.isArray(s)&&s.length>0&&(o=o&&s.some(c=>i(c))),o?e.jsx(e.Fragment,{children:a}):e.jsx(e.Fragment,{children:n})}/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wk=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,r,a)=>a?a.toUpperCase():r.toLowerCase()),wf=t=>{const s=Wk(t);return s.charAt(0).toUpperCase()+s.slice(1)},jb=(...t)=>t.filter((s,r,a)=>!!s&&s.trim()!==""&&a.indexOf(s)===r).join(" ").trim(),Vk=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=y.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:l,...o},c)=>y.createElement("svg",{ref:c,...Hk,width:s,height:s,stroke:t,strokeWidth:a?Number(r)*24/Number(s):r,className:jb("lucide",n),...!i&&!Vk(o)&&{"aria-hidden":"true"},...o},[...l.map(([d,u])=>y.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(t,s)=>{const r=y.forwardRef(({className:a,...n},i)=>y.createElement(Gk,{ref:i,iconNode:s,className:jb(`lucide-${zk(wf(t))}`,`lucide-${t}`,a),...n}));return r.displayName=wf(t),r};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Dn=Se("activity",qk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Kk=Se("arrow-left",Jk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Xk=Se("arrow-right",Yk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],kf=Se("award",Qk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Sf=Se("ban",Zk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Da=Se("bell",e2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Cf=Se("bot",t2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],r2=Se("brain",s2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Nb=Se("building-2",a2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Mr=Se("calendar",n2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ss=Se("chart-column",i2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],cd=Se("check",l2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],lm=Se("chevron-down",o2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],om=Se("chevron-up",c2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],vo=Se("circle-alert",d2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],x2=Se("circle-check",u2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Vt=Se("circle-check-big",m2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],es=Se("circle-x",h2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],os=Se("clock",f2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],_f=Se("code",p2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Xi=Se("copy",g2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],si=Se("credit-card",y2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]],Mu=Se("crop",b2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],j2=Se("database",v2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],jo=Se("dollar-sign",N2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ja=Se("download",w2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],S2=Se("external-link",k2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Bu=Se("eye-off",C2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nt=Se("eye",_2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],wb=Se("facebook",T2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],gs=Se("file-text",E2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],A2=Se("flag",F2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],nl=Se("funnel",P2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],N0=Se("gift",D2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Gn=Se("globe",R2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],O2=Se("grip-vertical",L2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],M2=Se("hash",I2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Mi=Se("heart",B2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],qn=Se("image",U2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],z2=Se("info",$2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],kb=Se("instagram",W2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Uu=Se("key",V2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],G2=Se("loader-circle",H2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ts=Se("mail",q2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],cm=Se("map-pin",J2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],pn=Se("message-circle",K2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],fs=Se("message-square",Y2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Q2=Se("mic",X2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],e4=Se("monitor",Z2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],s4=Se("mouse-pointer-click",t4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],$u=Se("mouse-pointer",r4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ha=Se("package",a4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],zu=Se("palette",n4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],l4=Se("paperclip",i4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],jn=Se("pause",o4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Wu=Se("pen",c4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],u4=Se("percent",d4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],fa=Se("phone",x4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Ua=Se("play",m4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ss=Se("plus",h4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],p4=Se("receipt",f4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],br=Se("refresh-cw",g4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Sb=Se("rotate-ccw",y4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ms=Se("save",b4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],bs=Se("search",v4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],sa=Se("send",j4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ns=Se("settings",N4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Cb=Se("shield",w4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],S4=Se("shopping-bag",k4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Qs=Se("shopping-cart",C4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],dm=Se("smartphone",_4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],_b=Se("smile",T4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],_l=Se("sparkles",E4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Tb=Se("square-check-big",F4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],xr=Se("square-pen",A4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],D4=Se("square-x",P4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ur=Se("star",R4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Eb=Se("tag",L4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],cs=Se("target",O4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Mt=Se("trash-2",I4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],zt=Se("trending-up",M4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],w0=Se("type",B4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],On=Se("upload",U4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Pt=Se("users",$4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],pa=Se("user",z4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],V4=Se("video",W4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Fb=Se("wallet",H4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],q4=Se("wifi-off",G4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],K4=Se("wifi",J4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],X4=Se("workflow",Y4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Qt=Se("x",Q4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],Ab=Se("youtube",Z4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],zl=Se("zap",e3),t3=()=>"http://192.168.1.36:2000",s3=t3();class r3{constructor(){Sa(this,"baseURL");this.baseURL=s3}async request(s,r={}){const a=`${this.baseURL}${s}`,n=localStorage.getItem("auth_token"),i=localStorage.getItem("role")||"admin",l=localStorage.getItem("permissions")||"orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update",o={headers:{"Content-Type":"application/json",...n&&{Authorization:`Bearer ${n}`},"x-user-role":i,"x-user-permissions":l,...r.headers},...r};try{const c=await fetch(a,o);if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);return await c.json()}catch(c){throw console.error(`API request failed for ${s}:`,c),c}}async getLoyaltyPrograms(){return this.request("/api/loyalty-program")}async createLoyaltyProgram(s){return this.request("/api/loyalty-program",{method:"POST",body:JSON.stringify(s)})}async updateLoyaltyProgram(s,r){return this.request(`/api/loyalty-program/${s}`,{method:"PUT",body:JSON.stringify(r)})}async getAffiliatePrograms(){return this.request("/api/affiliate-program")}async createAffiliateProgram(s){return this.request("/api/affiliate-program",{method:"POST",body:JSON.stringify(s)})}async getCashbackSystems(){return this.request("/api/cashback-system")}async createCashbackSystem(s){return this.request("/api/cashback-system",{method:"POST",body:JSON.stringify(s)})}async getCashbackWallet(){return this.request("/api/cashback/wallet")}async getCashbackOffers(){return this.request("/api/cashback/offers")}async getCashbackTransactions(){return this.request("/api/cashback/transactions")}async redeemCashback(s){return this.request("/api/cashback/redeem",{method:"POST",body:JSON.stringify(s)})}async getEmailCampaigns(){return this.request("/api/email-marketing/campaigns")}async createEmailCampaign(s){return this.request("/api/email-marketing/campaigns",{method:"POST",body:JSON.stringify(s)})}async updateEmailCampaign(s,r){return this.request(`/api/email-marketing/campaigns/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteEmailCampaign(s){return this.request(`/api/email-marketing/campaigns/${s}`,{method:"DELETE"})}async getEmailTemplates(){return this.request("/api/email-marketing/templates")}async createEmailTemplate(s){return this.request("/api/email-marketing/templates",{method:"POST",body:JSON.stringify(s)})}async updateEmailTemplate(s,r){return this.request(`/api/email-marketing/templates/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteEmailTemplate(s){return this.request(`/api/email-marketing/templates/${s}`,{method:"DELETE"})}async sendEmailCampaign(s){return this.request("/api/email-marketing/campaigns/send",{method:"POST",body:JSON.stringify(s)})}async getEmailLists(){return this.request("/api/email-marketing/lists")}async createEmailList(s){return this.request("/api/email-marketing/lists",{method:"POST",body:JSON.stringify(s)})}async addEmailSubscribers(s){return this.request("/api/email-marketing/lists/subscribers",{method:"POST",body:JSON.stringify(s)})}async getEmailSendingLogs(s){const r=s?`?campaign_id=${s}`:"";return this.request(`/api/email-marketing/logs${r}`)}async getEmailAutomations(){return this.request("/api/email-marketing/automations")}async createEmailAutomation(s){return this.request("/api/email-marketing/automations",{method:"POST",body:JSON.stringify(s)})}async updateEmailAutomation(s,r){return this.request(`/api/email-marketing/automations/${s}`,{method:"PUT",body:JSON.stringify(r)})}async getSMSCampaigns(){return this.request("/api/sms-marketing/campaigns")}async createSMSCampaign(s){return this.request("/api/sms-marketing/campaigns",{method:"POST",body:JSON.stringify(s)})}async updateSMSCampaign(s,r){return this.request(`/api/sms-marketing/campaigns/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteSMSCampaign(s){return this.request(`/api/sms-marketing/campaigns/${s}`,{method:"DELETE"})}async getSMSTemplates(){return this.request("/api/sms-marketing/templates")}async getSMSAutomations(){return this.request("/api/sms-marketing/automations")}async createSMSAutomation(s){return this.request("/api/sms-marketing/automations",{method:"POST",body:JSON.stringify(s)})}async updateSMSAutomation(s,r){return this.request(`/api/sms-marketing/automations/${s}`,{method:"PUT",body:JSON.stringify(r)})}async getPushNotifications(){return this.request("/api/push-notifications")}async createPushNotification(s){return this.request("/api/push-notifications",{method:"POST",body:JSON.stringify(s)})}async getPushTemplates(){return this.request("/api/push-notifications/templates")}async getPushAutomations(){return this.request("/api/push-notifications/automations")}async getWhatsAppChats(){return this.request("/api/whatsapp-chat/sessions")}async getWhatsAppTemplates(){return this.request("/api/whatsapp-chat/templates")}async getWhatsAppAutomations(){return this.request("/api/whatsapp-chat/automations")}async getLiveChatSessions(){return this.request("/api/live-chat/sessions")}async getLiveChatAgents(){return this.request("/api/live-chat/agents")}async getLiveChatWidgets(){return this.request("/api/live-chat/widgets")}async getLiveChatMessages(s){const r=new URLSearchParams({sessionId:String(s)}).toString();return this.request(`/api/live-chat/messages?${r}`)}async sendLiveChatMessage(s){return this.request("/api/live-chat/messages",{method:"POST",body:JSON.stringify(s)})}async getAnalyticsData(){return this.request("/api/advanced-analytics")}async getForms(){return this.request("/api/form-builder")}async createForm(s){return this.request("/api/form-builder",{method:"POST",body:JSON.stringify(s)})}async getCustomerJourneys(s,r){const a=new URLSearchParams;s&&a.append("timeRange",s),r&&a.append("eventFilter",r);const n=a.toString();return this.request(`/api/journey-tracking${n?`?${n}`:""}`)}async getActionableInsights(){return this.request("/api/actionable_insights")}async getAIFeatures(){return this.request("/api/ai/features")}async getAITasks(){return this.request("/api/ai/tasks")}async getJourneyFunnels(){return this.request("/api/journey_funnels")}async getPersonalizationRules(){return this.request("/api/personalization_rules")}async getCustomerSegments(){return this.request("/api/customer_segments")}async createCustomerSegment(s){return this.request("/api/customer_segments",{method:"POST",body:JSON.stringify(s)})}async getCustomerSegmentAggregates(){return this.request("/api/customer_segments/aggregate")}async updateCustomerSegment(s,r){return this.request(`/api/customer_segments/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteCustomerSegment(s){return this.request(`/api/customer_segments/${s}`,{method:"DELETE"})}async getCustomAudiences(){return this.request("/api/custom_audiences")}async createCustomAudience(s){return this.request("/api/custom_audiences",{method:"POST",body:JSON.stringify(s)})}async getWorkflows(){return this.request("/api/workflows")}async createWorkflow(s){return this.request("/api/workflows",{method:"POST",body:JSON.stringify(s)})}async updateWorkflow(s,r){return this.request(`/api/workflows/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteWorkflow(s){return this.request(`/api/workflows/${s}`,{method:"DELETE"})}async getOmniChannelCampaigns(){return this.request("/api/omni_channel_campaigns")}async getAPIConfigurations(){return this.request("/api/api-manager")}async getAPIConfiguration(s){return this.request(`/api/api-manager/${s}`)}async createAPIConfiguration(s){return this.request("/api/api-manager",{method:"POST",body:JSON.stringify(s)})}async updateAPIConfiguration(s,r){return this.request(`/api/api-manager/${s}`,{method:"PUT",body:JSON.stringify(r)})}async patchAPIConfiguration(s,r){return this.request(`/api/api-manager/${s}`,{method:"PATCH",body:JSON.stringify(r)})}async deleteAPIConfiguration(s){return this.request(`/api/api-manager/${s}`,{method:"DELETE"})}async testAPIConfiguration(s,r="connection"){return this.request(`/api/api-manager/${s}/test`,{method:"POST",body:JSON.stringify({testType:r})})}async getProducts(){return this.request("/api/products")}async createProduct(s){return this.request("/api/products",{method:"POST",body:JSON.stringify(s)})}async getCustomers(){return this.request("/api/customers")}async getUsers(){return this.request("/api/users")}async getAnalytics(){return this.request("/api/analytics")}async getPaymentGateways(){return this.request("/api/payment-gateways")}async createPaymentGateway(s){return this.request("/api/payment-gateways",{method:"POST",body:JSON.stringify(s)})}async updatePaymentGateway(s,r){return this.request(`/api/payment-gateways/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deletePaymentGateway(s){return this.request(`/api/payment-gateways/${s}`,{method:"DELETE"})}async getOrderDelivery(s){return this.request(`/api/order-delivery/${s}`)}async updateOrderDelivery(s){return this.request("/api/order-delivery",{method:"POST",body:JSON.stringify(s)})}async getProductReviews(s){return this.request(`/api/product-reviews/${s}`)}async createProductReview(s){return this.request("/api/product-reviews",{method:"POST",body:JSON.stringify(s)})}async updateProductReview(s,r){return this.request(`/api/product-reviews/${s}`,{method:"PUT",body:JSON.stringify(r)})}async getShiprocketConfig(){return this.request("/api/shiprocket/config")}async updateShiprocketConfig(s){return this.request("/api/shiprocket/config",{method:"POST",body:JSON.stringify(s)})}async createShiprocketShipment(s){return this.request(`/api/shiprocket/orders/${s}/shipment`,{method:"POST"})}async createShiprocketAwb(s){return this.request(`/api/shiprocket/orders/${s}/awb`,{method:"POST"})}async getShiprocketTracking(s){return this.request(`/api/shiprocket/orders/${s}/track`)}async checkShiprocketServiceability(s){const r=new URLSearchParams({pickup_postcode:s.pickup_postcode,delivery_postcode:s.delivery_postcode,cod:s.cod??"0",weight:s.weight??"0.5"}).toString();return this.request(`/api/shiprocket/serviceability?${r}`)}async getDiscounts(){return this.request("/api/discounts")}async createDiscount(s){return this.request("/api/discounts",{method:"POST",body:JSON.stringify(s)})}async getDiscountUsage(){return this.request("/api/discounts/usage")}async getOrders(){return this.request("/api/orders")}async createOrder(s){return this.request("/api/orders",{method:"POST",body:JSON.stringify(s)})}async updateOrder(s,r){return this.request(`/api/orders/${s}`,{method:"PUT",body:JSON.stringify(r)})}async getContactMessages(){return this.request("/api/contact/messages")}async updateContactMessageStatus(s,r){return this.request(`/api/contact/messages/${s}`,{method:"PUT",body:JSON.stringify({status:r})})}async getAdminNotifications(s="all",r=50){return this.request(`/api/admin/notifications?status=${s}&limit=${r}`)}async getAdminNotificationUnreadCount(){return this.request("/api/admin/notifications/unread-count")}async markNotificationAsRead(s){return this.request(`/api/admin/notifications/${s}/read`,{method:"PUT"})}async markAllNotificationsAsRead(){return this.request("/api/admin/notifications/read-all",{method:"PUT"})}async deleteNotification(s){return this.request(`/api/admin/notifications/${s}`,{method:"DELETE"})}}const Qe=new r3,ga=Object.create(null);ga.open="0";ga.close="1";ga.ping="2";ga.pong="3";ga.message="4";ga.upgrade="5";ga.noop="6";const Ac=Object.create(null);Object.keys(ga).forEach(t=>{Ac[ga[t]]=t});const Vu={type:"error",data:"parser error"},Pb=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Db=typeof ArrayBuffer=="function",Rb=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,um=({type:t,data:s},r,a)=>Pb&&s instanceof Blob?r?a(s):Tf(s,a):Db&&(s instanceof ArrayBuffer||Rb(s))?r?a(s):Tf(new Blob([s]),a):a(ga[t]+(s||"")),Tf=(t,s)=>{const r=new FileReader;return r.onload=function(){const a=r.result.split(",")[1];s("b"+(a||""))},r.readAsDataURL(t)};function Ef(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let k0;function a3(t,s){if(Pb&&t.data instanceof Blob)return t.data.arrayBuffer().then(Ef).then(s);if(Db&&(t.data instanceof ArrayBuffer||Rb(t.data)))return s(Ef(t.data));um(t,!1,r=>{k0||(k0=new TextEncoder),s(k0.encode(r))})}const Ff="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Tl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Ff.length;t++)Tl[Ff.charCodeAt(t)]=t;const n3=t=>{let s=t.length*.75,r=t.length,a,n=0,i,l,o,c;t[t.length-1]==="="&&(s--,t[t.length-2]==="="&&s--);const d=new ArrayBuffer(s),u=new Uint8Array(d);for(a=0;a<r;a+=4)i=Tl[t.charCodeAt(a)],l=Tl[t.charCodeAt(a+1)],o=Tl[t.charCodeAt(a+2)],c=Tl[t.charCodeAt(a+3)],u[n++]=i<<2|l>>4,u[n++]=(l&15)<<4|o>>2,u[n++]=(o&3)<<6|c&63;return d},i3=typeof ArrayBuffer=="function",xm=(t,s)=>{if(typeof t!="string")return{type:"message",data:Lb(t,s)};const r=t.charAt(0);return r==="b"?{type:"message",data:l3(t.substring(1),s)}:Ac[r]?t.length>1?{type:Ac[r],data:t.substring(1)}:{type:Ac[r]}:Vu},l3=(t,s)=>{if(i3){const r=n3(t);return Lb(r,s)}else return{base64:!0,data:t}},Lb=(t,s)=>{switch(s){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Ob="",o3=(t,s)=>{const r=t.length,a=new Array(r);let n=0;t.forEach((i,l)=>{um(i,!1,o=>{a[l]=o,++n===r&&s(a.join(Ob))})})},c3=(t,s)=>{const r=t.split(Ob),a=[];for(let n=0;n<r.length;n++){const i=xm(r[n],s);if(a.push(i),i.type==="error")break}return a};function d3(){return new TransformStream({transform(t,s){a3(t,r=>{const a=r.length;let n;if(a<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,a);else if(a<65536){n=new Uint8Array(3);const i=new DataView(n.buffer);i.setUint8(0,126),i.setUint16(1,a)}else{n=new Uint8Array(9);const i=new DataView(n.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(a))}t.data&&typeof t.data!="string"&&(n[0]|=128),s.enqueue(n),s.enqueue(r)})}})}let S0;function ic(t){return t.reduce((s,r)=>s+r.length,0)}function lc(t,s){if(t[0].length===s)return t.shift();const r=new Uint8Array(s);let a=0;for(let n=0;n<s;n++)r[n]=t[0][a++],a===t[0].length&&(t.shift(),a=0);return t.length&&a<t[0].length&&(t[0]=t[0].slice(a)),r}function u3(t,s){S0||(S0=new TextDecoder);const r=[];let a=0,n=-1,i=!1;return new TransformStream({transform(l,o){for(r.push(l);;){if(a===0){if(ic(r)<1)break;const c=lc(r,1);i=(c[0]&128)===128,n=c[0]&127,n<126?a=3:n===126?a=1:a=2}else if(a===1){if(ic(r)<2)break;const c=lc(r,2);n=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),a=3}else if(a===2){if(ic(r)<8)break;const c=lc(r,8),d=new DataView(c.buffer,c.byteOffset,c.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){o.enqueue(Vu);break}n=u*Math.pow(2,32)+d.getUint32(4),a=3}else{if(ic(r)<n)break;const c=lc(r,n);o.enqueue(xm(i?c:S0.decode(c),s)),a=0}if(n===0||n>t){o.enqueue(Vu);break}}}})}const Ib=4;function ls(t){if(t)return x3(t)}function x3(t){for(var s in ls.prototype)t[s]=ls.prototype[s];return t}ls.prototype.on=ls.prototype.addEventListener=function(t,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(s),this};ls.prototype.once=function(t,s){function r(){this.off(t,r),s.apply(this,arguments)}return r.fn=s,this.on(t,r),this};ls.prototype.off=ls.prototype.removeListener=ls.prototype.removeAllListeners=ls.prototype.removeEventListener=function(t,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var a,n=0;n<r.length;n++)if(a=r[n],a===s||a.fn===s){r.splice(n,1);break}return r.length===0&&delete this._callbacks["$"+t],this};ls.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),r=this._callbacks["$"+t],a=1;a<arguments.length;a++)s[a-1]=arguments[a];if(r){r=r.slice(0);for(var a=0,n=r.length;a<n;++a)r[a].apply(this,s)}return this};ls.prototype.emitReserved=ls.prototype.emit;ls.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};ls.prototype.hasListeners=function(t){return!!this.listeners(t).length};const $d=typeof Promise=="function"&&typeof Promise.resolve=="function"?s=>Promise.resolve().then(s):(s,r)=>r(s,0),Pr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),m3="arraybuffer";function Mb(t,...s){return s.reduce((r,a)=>(t.hasOwnProperty(a)&&(r[a]=t[a]),r),{})}const h3=Pr.setTimeout,f3=Pr.clearTimeout;function zd(t,s){s.useNativeTimers?(t.setTimeoutFn=h3.bind(Pr),t.clearTimeoutFn=f3.bind(Pr)):(t.setTimeoutFn=Pr.setTimeout.bind(Pr),t.clearTimeoutFn=Pr.clearTimeout.bind(Pr))}const p3=1.33;function g3(t){return typeof t=="string"?y3(t):Math.ceil((t.byteLength||t.size)*p3)}function y3(t){let s=0,r=0;for(let a=0,n=t.length;a<n;a++)s=t.charCodeAt(a),s<128?r+=1:s<2048?r+=2:s<55296||s>=57344?r+=3:(a++,r+=4);return r}function Bb(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function b3(t){let s="";for(let r in t)t.hasOwnProperty(r)&&(s.length&&(s+="&"),s+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return s}function v3(t){let s={},r=t.split("&");for(let a=0,n=r.length;a<n;a++){let i=r[a].split("=");s[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return s}class j3 extends Error{constructor(s,r,a){super(s),this.description=r,this.context=a,this.type="TransportError"}}class mm extends ls{constructor(s){super(),this.writable=!1,zd(this,s),this.opts=s,this.query=s.query,this.socket=s.socket,this.supportsBinary=!s.forceBase64}onError(s,r,a){return super.emitReserved("error",new j3(s,r,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(s){this.readyState==="open"&&this.write(s)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(s){const r=xm(s,this.socket.binaryType);this.onPacket(r)}onPacket(s){super.emitReserved("packet",s)}onClose(s){this.readyState="closed",super.emitReserved("close",s)}pause(s){}createUri(s,r={}){return s+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const s=this.opts.hostname;return s.indexOf(":")===-1?s:"["+s+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(s){const r=b3(s);return r.length?"?"+r:""}}class N3 extends mm{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(s){this.readyState="pausing";const r=()=>{this.readyState="paused",s()};if(this._polling||!this.writable){let a=0;this._polling&&(a++,this.once("pollComplete",function(){--a||r()})),this.writable||(a++,this.once("drain",function(){--a||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(s){const r=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};c3(s,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const s=()=>{this.write([{type:"close"}])};this.readyState==="open"?s():this.once("open",s)}write(s){this.writable=!1,o3(s,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const s=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Bb()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(s,r)}}let Ub=!1;try{Ub=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const w3=Ub;function k3(){}class S3 extends N3{constructor(s){if(super(s),typeof location<"u"){const r=location.protocol==="https:";let a=location.port;a||(a=r?"443":"80"),this.xd=typeof location<"u"&&s.hostname!==location.hostname||a!==s.port}}doWrite(s,r){const a=this.request({method:"POST",data:s});a.on("success",r),a.on("error",(n,i)=>{this.onError("xhr post error",n,i)})}doPoll(){const s=this.request();s.on("data",this.onData.bind(this)),s.on("error",(r,a)=>{this.onError("xhr poll error",r,a)}),this.pollXhr=s}}let Bi=class Pc extends ls{constructor(s,r,a){super(),this.createRequest=s,zd(this,a),this._opts=a,this._method=a.method||"GET",this._uri=r,this._data=a.data!==void 0?a.data:null,this._create()}_create(){var s;const r=Mb(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const a=this._xhr=this.createRequest(r);try{a.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){a.setDisableHeaderCheck&&a.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&a.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{a.setRequestHeader("Accept","*/*")}catch{}(s=this._opts.cookieJar)===null||s===void 0||s.addCookies(a),"withCredentials"in a&&(a.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(a.timeout=this._opts.requestTimeout),a.onreadystatechange=()=>{var n;a.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(a.getResponseHeader("set-cookie"))),a.readyState===4&&(a.status===200||a.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof a.status=="number"?a.status:0)},0))},a.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=Pc.requestsCount++,Pc.requests[this._index]=this)}_onError(s){this.emitReserved("error",s,this._xhr),this._cleanup(!0)}_cleanup(s){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=k3,s)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Pc.requests[this._index],this._xhr=null}}_onLoad(){const s=this._xhr.responseText;s!==null&&(this.emitReserved("data",s),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Bi.requestsCount=0;Bi.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Af);else if(typeof addEventListener=="function"){const t="onpagehide"in Pr?"pagehide":"unload";addEventListener(t,Af,!1)}}function Af(){for(let t in Bi.requests)Bi.requests.hasOwnProperty(t)&&Bi.requests[t].abort()}const C3=function(){const t=$b({xdomain:!1});return t&&t.responseType!==null}();class _3 extends S3{constructor(s){super(s);const r=s&&s.forceBase64;this.supportsBinary=C3&&!r}request(s={}){return Object.assign(s,{xd:this.xd},this.opts),new Bi($b,this.uri(),s)}}function $b(t){const s=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!s||w3))return new XMLHttpRequest}catch{}if(!s)try{return new Pr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const zb=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class T3 extends mm{get name(){return"websocket"}doOpen(){const s=this.uri(),r=this.opts.protocols,a=zb?{}:Mb(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(s,r,a)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=s=>this.onClose({description:"websocket connection closed",context:s}),this.ws.onmessage=s=>this.onData(s.data),this.ws.onerror=s=>this.onError("websocket error",s)}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const a=s[r],n=r===s.length-1;um(a,this.supportsBinary,i=>{try{this.doWrite(a,i)}catch{}n&&$d(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const s=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Bb()),this.supportsBinary||(r.b64=1),this.createUri(s,r)}}const C0=Pr.WebSocket||Pr.MozWebSocket;class E3 extends T3{createSocket(s,r,a){return zb?new C0(s,r,a):r?new C0(s,r):new C0(s)}doWrite(s,r){this.ws.send(r)}}class F3 extends mm{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(s){return this.emitReserved("error",s)}this._transport.closed.then(()=>{this.onClose()}).catch(s=>{this.onError("webtransport error",s)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(s=>{const r=u3(Number.MAX_SAFE_INTEGER,this.socket.binaryType),a=s.readable.pipeThrough(r).getReader(),n=d3();n.readable.pipeTo(s.writable),this._writer=n.writable.getWriter();const i=()=>{a.read().then(({done:o,value:c})=>{o||(this.onPacket(c),i())}).catch(o=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const a=s[r],n=r===s.length-1;this._writer.write(a).then(()=>{n&&$d(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var s;(s=this._transport)===null||s===void 0||s.close()}}const A3={websocket:E3,webtransport:F3,polling:_3},P3=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,D3=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Hu(t){if(t.length>8e3)throw"URI too long";const s=t,r=t.indexOf("["),a=t.indexOf("]");r!=-1&&a!=-1&&(t=t.substring(0,r)+t.substring(r,a).replace(/:/g,";")+t.substring(a,t.length));let n=P3.exec(t||""),i={},l=14;for(;l--;)i[D3[l]]=n[l]||"";return r!=-1&&a!=-1&&(i.source=s,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=R3(i,i.path),i.queryKey=L3(i,i.query),i}function R3(t,s){const r=/\/{2,9}/g,a=s.replace(r,"/").split("/");return(s.slice(0,1)=="/"||s.length===0)&&a.splice(0,1),s.slice(-1)=="/"&&a.splice(a.length-1,1),a}function L3(t,s){const r={};return s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,n,i){n&&(r[n]=i)}),r}const Gu=typeof addEventListener=="function"&&typeof removeEventListener=="function",Dc=[];Gu&&addEventListener("offline",()=>{Dc.forEach(t=>t())},!1);class gn extends ls{constructor(s,r){if(super(),this.binaryType=m3,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,s&&typeof s=="object"&&(r=s,s=null),s){const a=Hu(s);r.hostname=a.host,r.secure=a.protocol==="https"||a.protocol==="wss",r.port=a.port,a.query&&(r.query=a.query)}else r.host&&(r.hostname=Hu(r.host).host);zd(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(a=>{const n=a.prototype.name;this.transports.push(n),this._transportsByName[n]=a}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=v3(this.opts.query)),Gu&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Dc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(s){const r=Object.assign({},this.opts.query);r.EIO=Ib,r.transport=s,this.id&&(r.sid=this.id);const a=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[s]);return new this._transportsByName[s](a)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const s=this.opts.rememberUpgrade&&gn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(s);r.open(),this.setTransport(r)}setTransport(s){this.transport&&this.transport.removeAllListeners(),this.transport=s,s.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",gn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",s),this.emitReserved("heartbeat"),s.type){case"open":this.onHandshake(JSON.parse(s.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=s.data,this._onError(r);break;case"message":this.emitReserved("data",s.data),this.emitReserved("message",s.data);break}}onHandshake(s){this.emitReserved("handshake",s),this.id=s.sid,this.transport.query.sid=s.sid,this._pingInterval=s.pingInterval,this._pingTimeout=s.pingTimeout,this._maxPayload=s.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const s=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+s,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},s),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const s=this._getWritablePackets();this.transport.send(s),this._prevBufferLen=s.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let a=0;a<this.writeBuffer.length;a++){const n=this.writeBuffer[a].data;if(n&&(r+=g3(n)),a>0&&r>this._maxPayload)return this.writeBuffer.slice(0,a);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const s=Date.now()>this._pingTimeoutTime;return s&&(this._pingTimeoutTime=0,$d(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),s}write(s,r,a){return this._sendPacket("message",s,r,a),this}send(s,r,a){return this._sendPacket("message",s,r,a),this}_sendPacket(s,r,a,n){if(typeof r=="function"&&(n=r,r=void 0),typeof a=="function"&&(n=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const i={type:s,data:r,options:a};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const s=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),s()},a=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():s()}):this.upgrading?a():s()),this}_onError(s){if(gn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",s),this._onClose("transport error",s)}_onClose(s,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Gu&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const a=Dc.indexOf(this._offlineEventListener);a!==-1&&Dc.splice(a,1)}this.readyState="closed",this.id=null,this.emitReserved("close",s,r),this.writeBuffer=[],this._prevBufferLen=0}}}gn.protocol=Ib;class O3 extends gn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let s=0;s<this._upgrades.length;s++)this._probe(this._upgrades[s])}_probe(s){let r=this.createTransport(s),a=!1;gn.priorWebsocketSuccess=!1;const n=()=>{a||(r.send([{type:"ping",data:"probe"}]),r.once("packet",p=>{if(!a)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;gn.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const m=new Error("probe error");m.transport=r.name,this.emitReserved("upgradeError",m)}}))};function i(){a||(a=!0,u(),r.close(),r=null)}const l=p=>{const m=new Error("probe error: "+p);m.transport=r.name,i(),this.emitReserved("upgradeError",m)};function o(){l("transport closed")}function c(){l("socket closed")}function d(p){r&&p.name!==r.name&&i()}const u=()=>{r.removeListener("open",n),r.removeListener("error",l),r.removeListener("close",o),this.off("close",c),this.off("upgrading",d)};r.once("open",n),r.once("error",l),r.once("close",o),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&s!=="webtransport"?this.setTimeoutFn(()=>{a||r.open()},200):r.open()}onHandshake(s){this._upgrades=this._filterUpgrades(s.upgrades),super.onHandshake(s)}_filterUpgrades(s){const r=[];for(let a=0;a<s.length;a++)~this.transports.indexOf(s[a])&&r.push(s[a]);return r}}let I3=class extends O3{constructor(s,r={}){const a=typeof s=="object"?s:r;(!a.transports||a.transports&&typeof a.transports[0]=="string")&&(a.transports=(a.transports||["polling","websocket","webtransport"]).map(n=>A3[n]).filter(n=>!!n)),super(s,a)}};function M3(t,s="",r){let a=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),a=Hu(t)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const i=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+i+":"+a.port+s,a.href=a.protocol+"://"+i+(r&&r.port===a.port?"":":"+a.port),a}const B3=typeof ArrayBuffer=="function",U3=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Wb=Object.prototype.toString,$3=typeof Blob=="function"||typeof Blob<"u"&&Wb.call(Blob)==="[object BlobConstructor]",z3=typeof File=="function"||typeof File<"u"&&Wb.call(File)==="[object FileConstructor]";function hm(t){return B3&&(t instanceof ArrayBuffer||U3(t))||$3&&t instanceof Blob||z3&&t instanceof File}function Rc(t,s){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,a=t.length;r<a;r++)if(Rc(t[r]))return!0;return!1}if(hm(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Rc(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&Rc(t[r]))return!0;return!1}function W3(t){const s=[],r=t.data,a=t;return a.data=qu(r,s),a.attachments=s.length,{packet:a,buffers:s}}function qu(t,s){if(!t)return t;if(hm(t)){const r={_placeholder:!0,num:s.length};return s.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let a=0;a<t.length;a++)r[a]=qu(t[a],s);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=qu(t[a],s));return r}return t}function V3(t,s){return t.data=Ju(t.data,s),delete t.attachments,t}function Ju(t,s){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<s.length)return s[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=Ju(t[r],s);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=Ju(t[r],s));return t}const H3=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],G3=5;var mt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(mt||(mt={}));class q3{constructor(s){this.replacer=s}encode(s){return(s.type===mt.EVENT||s.type===mt.ACK)&&Rc(s)?this.encodeAsBinary({type:s.type===mt.EVENT?mt.BINARY_EVENT:mt.BINARY_ACK,nsp:s.nsp,data:s.data,id:s.id}):[this.encodeAsString(s)]}encodeAsString(s){let r=""+s.type;return(s.type===mt.BINARY_EVENT||s.type===mt.BINARY_ACK)&&(r+=s.attachments+"-"),s.nsp&&s.nsp!=="/"&&(r+=s.nsp+","),s.id!=null&&(r+=s.id),s.data!=null&&(r+=JSON.stringify(s.data,this.replacer)),r}encodeAsBinary(s){const r=W3(s),a=this.encodeAsString(r.packet),n=r.buffers;return n.unshift(a),n}}function Pf(t){return Object.prototype.toString.call(t)==="[object Object]"}class fm extends ls{constructor(s){super(),this.reviver=s}add(s){let r;if(typeof s=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(s);const a=r.type===mt.BINARY_EVENT;a||r.type===mt.BINARY_ACK?(r.type=a?mt.EVENT:mt.ACK,this.reconstructor=new J3(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(hm(s)||s.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(s),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+s)}decodeString(s){let r=0;const a={type:Number(s.charAt(0))};if(mt[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===mt.BINARY_EVENT||a.type===mt.BINARY_ACK){const i=r+1;for(;s.charAt(++r)!=="-"&&r!=s.length;);const l=s.substring(i,r);if(l!=Number(l)||s.charAt(r)!=="-")throw new Error("Illegal attachments");a.attachments=Number(l)}if(s.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(s.charAt(r)===","||r===s.length););a.nsp=s.substring(i,r)}else a.nsp="/";const n=s.charAt(r+1);if(n!==""&&Number(n)==n){const i=r+1;for(;++r;){const l=s.charAt(r);if(l==null||Number(l)!=l){--r;break}if(r===s.length)break}a.id=Number(s.substring(i,r+1))}if(s.charAt(++r)){const i=this.tryParse(s.substr(r));if(fm.isPayloadValid(a.type,i))a.data=i;else throw new Error("invalid payload")}return a}tryParse(s){try{return JSON.parse(s,this.reviver)}catch{return!1}}static isPayloadValid(s,r){switch(s){case mt.CONNECT:return Pf(r);case mt.DISCONNECT:return r===void 0;case mt.CONNECT_ERROR:return typeof r=="string"||Pf(r);case mt.EVENT:case mt.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&H3.indexOf(r[0])===-1);case mt.ACK:case mt.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class J3{constructor(s){this.packet=s,this.buffers=[],this.reconPack=s}takeBinaryData(s){if(this.buffers.push(s),this.buffers.length===this.reconPack.attachments){const r=V3(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const K3=Object.freeze(Object.defineProperty({__proto__:null,Decoder:fm,Encoder:q3,get PacketType(){return mt},protocol:G3},Symbol.toStringTag,{value:"Module"}));function Kr(t,s,r){return t.on(s,r),function(){t.off(s,r)}}const Y3=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Vb extends ls{constructor(s,r,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=s,this.nsp=r,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const s=this.io;this.subs=[Kr(s,"open",this.onopen.bind(this)),Kr(s,"packet",this.onpacket.bind(this)),Kr(s,"error",this.onerror.bind(this)),Kr(s,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...s){return s.unshift("message"),this.emit.apply(this,s),this}emit(s,...r){var a,n,i;if(Y3.hasOwnProperty(s))throw new Error('"'+s.toString()+'" is a reserved event name');if(r.unshift(s),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const l={type:mt.EVENT,data:r};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const u=this.ids++,p=r.pop();this._registerAckCallback(u,p),l.id=u}const o=(n=(a=this.io.engine)===null||a===void 0?void 0:a.transport)===null||n===void 0?void 0:n.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(s,r){var a;const n=(a=this.flags.timeout)!==null&&a!==void 0?a:this._opts.ackTimeout;if(n===void 0){this.acks[s]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[s];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===s&&this.sendBuffer.splice(o,1);r.call(this,new Error("operation has timed out"))},n),l=(...o)=>{this.io.clearTimeoutFn(i),r.apply(this,o)};l.withError=!0,this.acks[s]=l}emitWithAck(s,...r){return new Promise((a,n)=>{const i=(l,o)=>l?n(l):a(o);i.withError=!0,r.push(i),this.emit(s,...r)})}_addToQueue(s){let r;typeof s[s.length-1]=="function"&&(r=s.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:s,flags:Object.assign({fromQueue:!0},this.flags)};s.push((n,...i)=>a!==this._queue[0]?void 0:(n!==null?a.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(n)):(this._queue.shift(),r&&r(null,...i)),a.pending=!1,this._drainQueue())),this._queue.push(a),this._drainQueue()}_drainQueue(s=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!s||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(s){s.nsp=this.nsp,this.io._packet(s)}onopen(){typeof this.auth=="function"?this.auth(s=>{this._sendConnectPacket(s)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(s){this.packet({type:mt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},s):s})}onerror(s){this.connected||this.emitReserved("connect_error",s)}onclose(s,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",s,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(s=>{if(!this.sendBuffer.some(a=>String(a.id)===s)){const a=this.acks[s];delete this.acks[s],a.withError&&a.call(this,new Error("socket has been disconnected"))}})}onpacket(s){if(s.nsp===this.nsp)switch(s.type){case mt.CONNECT:s.data&&s.data.sid?this.onconnect(s.data.sid,s.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case mt.EVENT:case mt.BINARY_EVENT:this.onevent(s);break;case mt.ACK:case mt.BINARY_ACK:this.onack(s);break;case mt.DISCONNECT:this.ondisconnect();break;case mt.CONNECT_ERROR:this.destroy();const a=new Error(s.data.message);a.data=s.data.data,this.emitReserved("connect_error",a);break}}onevent(s){const r=s.data||[];s.id!=null&&r.push(this.ack(s.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(s){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const a of r)a.apply(this,s)}super.emit.apply(this,s),this._pid&&s.length&&typeof s[s.length-1]=="string"&&(this._lastOffset=s[s.length-1])}ack(s){const r=this;let a=!1;return function(...n){a||(a=!0,r.packet({type:mt.ACK,id:s,data:n}))}}onack(s){const r=this.acks[s.id];typeof r=="function"&&(delete this.acks[s.id],r.withError&&s.data.unshift(null),r.apply(this,s.data))}onconnect(s,r){this.id=s,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(s=>this.emitEvent(s)),this.receiveBuffer=[],this.sendBuffer.forEach(s=>{this.notifyOutgoingListeners(s),this.packet(s)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(s=>s()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:mt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(s){return this.flags.compress=s,this}get volatile(){return this.flags.volatile=!0,this}timeout(s){return this.flags.timeout=s,this}onAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(s),this}prependAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(s),this}offAny(s){if(!this._anyListeners)return this;if(s){const r=this._anyListeners;for(let a=0;a<r.length;a++)if(s===r[a])return r.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(s),this}prependAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(s),this}offAnyOutgoing(s){if(!this._anyOutgoingListeners)return this;if(s){const r=this._anyOutgoingListeners;for(let a=0;a<r.length;a++)if(s===r[a])return r.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(s){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const a of r)a.apply(this,s.data)}}}function il(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}il.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var s=Math.random(),r=Math.floor(s*this.jitter*t);t=Math.floor(s*10)&1?t+r:t-r}return Math.min(t,this.max)|0};il.prototype.reset=function(){this.attempts=0};il.prototype.setMin=function(t){this.ms=t};il.prototype.setMax=function(t){this.max=t};il.prototype.setJitter=function(t){this.jitter=t};class Ku extends ls{constructor(s,r){var a;super(),this.nsps={},this.subs=[],s&&typeof s=="object"&&(r=s,s=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,zd(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((a=r.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new il({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=s;const n=r.parser||K3;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(s){return arguments.length?(this._reconnection=!!s,s||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(s){return s===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=s,this)}reconnectionDelay(s){var r;return s===void 0?this._reconnectionDelay:(this._reconnectionDelay=s,(r=this.backoff)===null||r===void 0||r.setMin(s),this)}randomizationFactor(s){var r;return s===void 0?this._randomizationFactor:(this._randomizationFactor=s,(r=this.backoff)===null||r===void 0||r.setJitter(s),this)}reconnectionDelayMax(s){var r;return s===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=s,(r=this.backoff)===null||r===void 0||r.setMax(s),this)}timeout(s){return arguments.length?(this._timeout=s,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(s){if(~this._readyState.indexOf("open"))return this;this.engine=new I3(this.uri,this.opts);const r=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const n=Kr(r,"open",function(){a.onopen(),s&&s()}),i=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),s?s(o):this.maybeReconnectOnOpen()},l=Kr(r,"error",i);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{n(),i(new Error("timeout")),r.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(n),this.subs.push(l),this}connect(s){return this.open(s)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const s=this.engine;this.subs.push(Kr(s,"ping",this.onping.bind(this)),Kr(s,"data",this.ondata.bind(this)),Kr(s,"error",this.onerror.bind(this)),Kr(s,"close",this.onclose.bind(this)),Kr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(s){try{this.decoder.add(s)}catch(r){this.onclose("parse error",r)}}ondecoded(s){$d(()=>{this.emitReserved("packet",s)},this.setTimeoutFn)}onerror(s){this.emitReserved("error",s)}socket(s,r){let a=this.nsps[s];return a?this._autoConnect&&!a.active&&a.connect():(a=new Vb(this,s,r),this.nsps[s]=a),a}_destroy(s){const r=Object.keys(this.nsps);for(const a of r)if(this.nsps[a].active)return;this._close()}_packet(s){const r=this.encoder.encode(s);for(let a=0;a<r.length;a++)this.engine.write(r[a],s.options)}cleanup(){this.subs.forEach(s=>s()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(s,r){var a;this.cleanup(),(a=this.engine)===null||a===void 0||a.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",s,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const s=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{s.skipReconnect||(this.emitReserved("reconnect_attempt",s.backoff.attempts),!s.skipReconnect&&s.open(n=>{n?(s._reconnecting=!1,s.reconnect(),this.emitReserved("reconnect_error",n)):s.onreconnect()}))},r);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}}onreconnect(){const s=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",s)}}const jl={};function Lc(t,s){typeof t=="object"&&(s=t,t=void 0),s=s||{};const r=M3(t,s.path||"/socket.io"),a=r.source,n=r.id,i=r.path,l=jl[n]&&i in jl[n].nsps,o=s.forceNew||s["force new connection"]||s.multiplex===!1||l;let c;return o?c=new Ku(a,s):(jl[n]||(jl[n]=new Ku(a,s)),c=jl[n]),r.query&&!s.query&&(s.query=r.queryKey),c.socket(r.path,s)}Object.assign(Lc,{Manager:Ku,Socket:Vb,io:Lc,connect:Lc});class X3{constructor(){Sa(this,"socket",null);Sa(this,"listeners",new Map);Sa(this,"isConnecting",!1)}connect(){var r;if((r=this.socket)!=null&&r.connected||this.isConnecting)return;this.isConnecting=!0;const s="http://192.168.1.36:2000";this.socket&&!this.socket.connected&&(this.socket.removeAllListeners(),this.socket.disconnect(),this.socket=null),this.socket=Lc(s,{transports:["websocket","polling"],timeout:2e4,forceNew:!1,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3,randomizationFactor:.5}),this.socket.on("connect",()=>{var a;console.log("Connected to server"),this.isConnecting=!1,(a=this.socket)==null||a.emit("join-admin")}),this.socket.on("disconnect",a=>{console.log("Disconnected from server:",a)}),this.socket.on("connect_error",a=>{console.error("Socket connection error:",a),this.isConnecting=!1}),this.socket.on("update",a=>{console.log("Received update:",a),this.notifyListeners("update",a),a.type&&this.notifyListeners(a.type,a.data||a)}),this.socket.on("live-chat:message",a=>{this.notifyListeners("live-chat:message",a)}),this.socket.on("live-chat:typing",a=>{this.notifyListeners("live-chat:typing",a)}),this.socket.on("error",a=>{console.error("Socket error:",a)})}disconnect(){if(this.socket){const s=this.socket.connected;this.socket.removeAllListeners(),this.socket.disconnect(),this.socket=null,this.isConnecting=!1,s&&console.log("Socket disconnected")}}subscribe(s,r){var a;return this.listeners.has(s)||this.listeners.set(s,[]),(a=this.listeners.get(s))==null||a.push(r),()=>{const n=this.listeners.get(s);if(n){const i=n.indexOf(r);i>-1&&n.splice(i,1)}}}notifyListeners(s,r){const a=this.listeners.get(s);a&&a.forEach(n=>n(r))}emit(s,r){var a;(a=this.socket)!=null&&a.connected&&this.socket.emit(s,r)}isConnected(){var s;return((s=this.socket)==null?void 0:s.connected)||!1}}const Je=new X3;function Q3(){const[t,s]=y.useState([]),[r,a]=y.useState(0),[n,i]=y.useState(!1),l=va(),o=async()=>{try{const f=await Qe.getAdminNotifications("all",20);if(f.data){s(f.data);const h=f.data.filter(x=>x.status==="unread");a(h.length)}}catch(f){console.error("Error fetching notifications:",f)}},c=async()=>{try{const f=await Qe.getAdminNotificationUnreadCount();f.data&&a(f.data.count)}catch(f){console.error("Error fetching unread count:",f)}},d=async f=>{try{await Qe.markNotificationAsRead(f),s(h=>h.map(x=>x.id===f?{...x,status:"read"}:x)),c()}catch(h){console.error("Error marking notification as read:",h)}},u=async()=>{try{await Qe.markAllNotificationsAsRead(),s(f=>f.map(h=>({...h,status:"read"}))),a(0)}catch(f){console.error("Error marking all as read:",f)}},p=f=>{d(f.id),f.link&&l(f.link),i(!1)};y.useEffect(()=>{o(),c();const f=Je.subscribe("new-notification",h=>{s(x=>[h,...x]),h.status==="unread"&&a(x=>x+1)});return()=>{f&&f()}},[]);const m=f=>{switch(f){case"urgent":return"border-l-4 border-red-500 bg-red-50";case"high":return"border-l-4 border-orange-500 bg-orange-50";case"medium":return"border-l-4 border-yellow-500 bg-yellow-50";default:return"border-l-4 border-blue-500 bg-blue-50"}};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>i(!n),className:"relative p-2 text-gray-600 hover:text-gray-900 focus:outline-none",children:[e.jsx(Da,{className:"w-6 h-6"}),r>0&&e.jsx("span",{className:"absolute top-0 right-0 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:r>9?"9+":r})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl z-50 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Da,{className:"w-5 h-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),r>0&&e.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-600 text-xs font-semibold rounded-full",children:[r," new"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[r>0&&e.jsx("button",{onClick:u,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Mark all read"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Qt,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:t.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Da,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No notifications"})]}):t.map(f=>e.jsx("button",{onClick:()=>p(f),className:`w-full text-left p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors ${m(f.priority)} ${f.status==="read"?"opacity-70":""}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[f.icon&&e.jsx("span",{className:"text-2xl flex-shrink-0",children:f.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm font-semibold ${f.status==="unread"?"text-gray-900":"text-gray-600"}`,children:f.title}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:f.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:new Date(f.created_at).toLocaleString()})]}),f.status==="unread"&&e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-1"})]})},f.id))}),t.length>0&&e.jsx("div",{className:"p-3 border-t border-gray-200",children:e.jsx("button",{onClick:()=>l("/admin/notifications"),className:"w-full py-2 text-sm text-center text-blue-600 hover:text-blue-700 font-medium",children:"View all notifications"})})]})]})]})}const Z3=()=>{const t=oi(),s=va(),[r,a]=y.useState(!0),[n,i]=y.useState(""),[l,o]=y.useState(!1),[c,d]=y.useState([]),u=[{title:"Overview",icon:"",defaultOpen:!0,items:[{name:"Dashboard",href:"/admin/",icon:"",current:t.pathname==="/admin/"}]},{title:"Sales & Orders",icon:"",defaultOpen:!0,items:[{name:"Orders",href:"/admin/orders",icon:"",badge:"4",current:t.pathname==="/admin/orders"},{name:"Shipments",href:"/admin/shipments",icon:"",current:t.pathname==="/admin/shipments"},{name:"Returns",href:"/admin/returns",icon:"",current:t.pathname==="/admin/returns"}]},{title:"Catalog Management",icon:"",items:[{name:"Products",href:"/admin/products",icon:"",current:t.pathname==="/admin/products"},{name:"Categories",href:"/admin/categories",icon:"",current:t.pathname==="/admin/categories"},{name:"Inventory",href:"/admin/inventory",icon:"",badge:"NEW",current:t.pathname==="/admin/inventory"}]},{title:"Customers & CRM",icon:"",items:[{name:"Customers",href:"/admin/customers",icon:"",current:t.pathname==="/admin/customers"},{name:"Customer Segmentation",href:"/admin/customer-segmentation",icon:"",current:t.pathname==="/admin/customer-segmentation"},{name:"Journey Tracking",href:"/admin/journey-tracking",icon:"",current:t.pathname==="/admin/journey-tracking"},{name:"Journey Funnel",href:"/admin/journey-funnel",icon:"",current:t.pathname==="/admin/journey-funnel"}]},{title:"Customer Engagement",icon:"",items:[{name:"Live Chat",href:"/admin/live-chat",icon:"",current:t.pathname==="/admin/live-chat"},{name:"WhatsApp Chat",href:"/admin/whatsapp-chat",icon:"",current:t.pathname==="/admin/whatsapp-chat"},{name:"Contact Messages",href:"/admin/contact-messages",icon:"",current:t.pathname==="/admin/contact-messages"},{name:"Loyalty Program",href:"/admin/loyalty-program",icon:"",current:t.pathname==="/admin/loyalty-program"},{name:"Affiliate Program",href:"/admin/affiliate-program",icon:"",current:t.pathname==="/admin/affiliate-program"},{name:"Affiliate Requests",href:"/admin/affiliate-requests",icon:"",badge:"3",current:t.pathname==="/admin/affiliate-requests"},{name:"Cashback System",href:"/admin/cashback",icon:"",current:t.pathname==="/admin/cashback"}]},{title:"Marketing",icon:"",items:[{name:"Marketing",href:"/admin/marketing",icon:"",current:t.pathname==="/admin/marketing"},{name:"Meta Ads",href:"/admin/meta-ads",icon:"",badge:"NEW",current:t.pathname==="/admin/meta-ads"},{name:"WhatsApp Subscriptions",href:"/admin/whatsapp-subscriptions",icon:"",current:t.pathname==="/admin/whatsapp-subscriptions"},{name:"Discounts",href:"/admin/discounts",icon:"",current:t.pathname==="/admin/discounts"},{name:"Custom Audience",href:"/admin/custom-audience",icon:"",current:t.pathname==="/admin/custom-audience"},{name:"Omni Channel",href:"/admin/omni-channel",icon:"",current:t.pathname==="/admin/omni-channel"}]},{title:"AI Features",icon:"",items:[{name:"AI Box",href:"/admin/ai-box",icon:"",current:t.pathname==="/admin/ai-box"},{name:"AI Personalization",href:"/admin/ai-personalization",icon:"",current:t.pathname==="/admin/ai-personalization"}]},{title:"Analytics",icon:"",items:[{name:"Analytics",href:"/admin/analytics",icon:"",current:t.pathname==="/admin/analytics"},{name:"Actionable Analytics",href:"/admin/actionable-analytics",icon:"",current:t.pathname==="/admin/actionable-analytics"}]},{title:"Finance",icon:"",items:[{name:"Invoices",href:"/admin/invoices",icon:"",current:t.pathname==="/admin/invoices"},{name:"Tax",href:"/admin/tax",icon:"",current:t.pathname==="/admin/tax"},{name:"Payment Options",href:"/admin/payment-options",icon:"",current:t.pathname==="/admin/payment-options"},{name:"Coin Withdrawals",href:"/admin/coin-withdrawals",icon:"",current:t.pathname==="/admin/coin-withdrawals"}]},{title:"Content",icon:"",items:[{name:"CMS",href:"/admin/cms",icon:"",current:t.pathname==="/admin/cms"},{name:"Homepage Layout",href:"/admin/homepage-layout",icon:"",badge:"NEW",current:t.pathname==="/admin/homepage-layout"},{name:"Product Collections",href:"/admin/product-collections",icon:"",badge:"NEW",current:t.pathname==="/admin/product-collections"},{name:"Video Manager",href:"/admin/video-manager",icon:"",current:t.pathname==="/admin/video-manager"},{name:"Blog Requests",href:"/admin/blog-requests",icon:"",current:t.pathname==="/admin/blog-requests"}]},{title:"Notifications",icon:"",items:[{name:"WhatsApp Management",href:"/admin/whatsapp-management",icon:"",current:t.pathname==="/admin/whatsapp-management"},{name:"WhatsApp Notifications",href:"/admin/whatsapp-notifications",icon:"",current:t.pathname==="/admin/whatsapp-notifications"}]},{title:"Automation",icon:"",items:[{name:"Workflow Automation",href:"/admin/workflow-automation",icon:"",current:t.pathname==="/admin/workflow-automation"},{name:"Form Builder",href:"/admin/form-builder",icon:"",current:t.pathname==="/admin/form-builder"},{name:"Form Submissions",href:"/admin/form-submissions",icon:"",current:t.pathname==="/admin/form-submissions"}]},{title:"System",icon:"",items:[{name:"Users",href:"/admin/users",icon:"",current:t.pathname==="/admin/users"},{name:"API Manager",href:"/admin/api-manager",icon:"",current:t.pathname==="/admin/api-manager"},{name:"Alert Settings",href:"/admin/system/alerts",icon:"",current:t.pathname==="/admin/system/alerts"},{name:"Staff Accounts",href:"/admin/system/staff",icon:"",current:t.pathname==="/admin/system/staff"},{name:"Roles & Permissions",href:"/admin/system/roles",icon:"",current:t.pathname==="/admin/system/roles"},{name:"Audit Logs",href:"/admin/system/audit-logs",icon:"",current:t.pathname==="/admin/system/audit-logs"}]},{title:"Sales Channels",icon:"",items:[{name:"Facebook & Instagram",href:"/admin/facebook",icon:"",current:t.pathname==="/admin/facebook"},{name:"FB Shop Integration",href:"/admin/fb-shop",icon:"",badge:"NEW",current:t.pathname==="/admin/fb-shop"},{name:"Online Store",href:"/admin/store",icon:"",current:t.pathname==="/admin/store"},{name:"Google & YouTube",href:"/admin/google",icon:"",current:t.pathname==="/admin/google"},{name:"Marketplaces",href:"/admin/marketplaces",icon:"",badge:"NEW",current:t.pathname==="/admin/marketplaces"}]},{title:"Operations",icon:"",items:[{name:"Warehouses",href:"/admin/warehouses",icon:"",badge:"NEW",current:t.pathname==="/admin/warehouses"},{name:"POS System",href:"/admin/pos",icon:"",badge:"NEW",current:t.pathname==="/admin/pos"}]}],p=u.flatMap(j=>j.items.map(b=>({...b,category:j.title,description:`${j.title} - ${b.name}`}))),m=u.flatMap(j=>j.items.map(b=>({...b,category:j.title}))).sort((j,b)=>j.name.localeCompare(b.name)),f={"/admin/orders":{permission:"orders:read"},"/admin/shipments":{permission:"shipping:read"},"/admin/returns":{permission:"returns:read"},"/admin/products":{permission:"products:read"},"/admin/categories":{permission:"products:read"},"/admin/inventory":{permission:"inventory:read"},"/admin/analytics":{permission:"analytics:read"},"/admin/marketing":{permission:"marketing:read"},"/admin/discounts":{permission:"discounts:read"},"/admin/users":{permission:"users:read"},"/admin/settings":{role:"admin"},"/admin/warehouses":{permission:"inventory:read"},"/admin/pos":{anyOf:["pos:read","pos:update"]},"/admin/marketplaces":{role:"admin"},"/admin/fb-shop":{role:"admin"},"/admin/payment-options":{permission:"payments:read"},"/admin/cms":{permission:"cms:read"},"/admin/blog-requests":{permission:"cms:read"},"/admin/video-manager":{permission:"cms:read"},"/admin/whatsapp-management":{permission:"notifications:read"},"/admin/whatsapp-notifications":{permission:"notifications:read"}},h=j=>{if(i(j),j.length<2){d([]),o(!1);return}const b=p.filter(N=>N.name.toLowerCase().includes(j.toLowerCase())||N.description.toLowerCase().includes(j.toLowerCase())||N.category.toLowerCase().includes(j.toLowerCase()));d(b),o(!0)},x=j=>{s(j.href),i(""),o(!1)},g=()=>{i(""),d([]),o(!1)};return y.useEffect(()=>{const j=N=>{N.target.closest(".search-container")||o(!1)},b=N=>{if((N.ctrlKey||N.metaKey)&&N.key==="k"){N.preventDefault();const C=document.querySelector(".search-input");C&&C.focus()}N.key==="Escape"&&(o(!1),i(""))};return document.addEventListener("mousedown",j),document.addEventListener("keydown",b),()=>{document.removeEventListener("mousedown",j),document.removeEventListener("keydown",b)}},[]),e.jsxs("div",{className:"flex h-screen bg-[var(--brand-background)] text-[var(--text-primary)]",children:[r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>a(!1)}),e.jsx("div",{className:`sidebar w-72 h-screen fixed left-0 top-0 z-50 overflow-y-auto border-r border-[var(--brand-border)] ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[var(--brand-border)]",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-brand-secondary rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"N"})}),e.jsx("span",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Nefol Admin"})]}),e.jsx("button",{onClick:()=>a(!r),className:"text-[var(--text-muted)] hover:text-[var(--text-primary)]",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("nav",{className:"flex-1 px-4 py-4 space-y-1 overflow-y-auto",children:e.jsx("div",{className:"space-y-1",children:m.map(j=>{const b=f[j.href]||{};return e.jsx(ms,{permission:b.permission,anyOf:b.anyOf,role:b.role,children:e.jsxs(Hn,{to:j.href,className:`nav-item ${j.current?"active":""}`,children:[e.jsx("span",{className:"text-lg",children:j.icon}),e.jsx("span",{className:"font-medium",children:j.name}),j.badge&&e.jsx("span",{className:"badge ml-auto",children:j.badge})]})},j.name)})})}),e.jsx("div",{className:"p-4 border-t border-[var(--brand-border)]",children:e.jsxs(Hn,{to:"/admin/settings",className:"nav-item",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("span",{className:"font-medium",children:"Settings"})]})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden ml-72 lg:ml-72 md:ml-0",children:[e.jsx("header",{className:"bg-[var(--brand-surface)] border-b border-[var(--brand-border)] px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>a(!r),className:"text-[var(--text-muted)] hover:text-[var(--text-primary)]",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsxs("div",{className:"search-container relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[var(--text-muted)] w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search admin options... (e.g., CMS, Blog, Products)",value:n,onChange:j=>h(j.target.value),className:"search-input w-96 pl-10 pr-20 py-2 border border-[var(--brand-border)] bg-[var(--brand-surface)] text-[var(--text-secondary)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--brand-accent)]"}),n&&e.jsx("button",{onClick:g,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-[var(--text-muted)] hover:text-[var(--text-secondary)]",children:e.jsx(Qt,{className:"w-5 h-5"})}),!n&&e.jsx("div",{className:"absolute right-3 top-2.5 text-xs text-[var(--text-muted)]",children:e.jsx("kbd",{className:"px-2 py-1 bg-[var(--brand-highlight)] rounded text-xs",children:"Ctrl+K"})})]}),l&&c.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-[var(--brand-surface)] border border-[var(--brand-border)] rounded-lg shadow-xl z-50 max-h-96 overflow-y-auto",children:c.map((j,b)=>e.jsxs("button",{onClick:()=>x(j),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-[var(--brand-highlight)] text-left border-b border-[var(--brand-border)] last:border-b-0",children:[e.jsx("span",{className:"text-lg",children:j.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-[var(--text-primary)] font-medium",children:j.name}),e.jsx("div",{className:"text-sm text-[var(--text-muted)] truncate",children:j.description}),e.jsx("div",{className:"text-xs text-[var(--brand-accent)]",children:j.category})]}),e.jsx(Xk,{className:"w-4 h-4 text-[var(--text-muted)] flex-shrink-0"})]},b))}),l&&c.length===0&&n.length>=2&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-[var(--brand-surface)] border border-[var(--brand-border)] rounded-lg shadow-xl z-50 p-4",children:e.jsxs("div",{className:"text-[var(--text-muted)] text-center",children:[e.jsx(bs,{className:"w-8 h-8 mx-auto mb-2 opacity-50 text-[var(--text-muted)]"}),e.jsxs("p",{children:['No options found for "',n,'"']}),e.jsx("p",{className:"text-sm mt-1",children:"Try searching for:"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2 justify-center",children:["products","orders","analytics","marketing","customers","cms","blog"].map(j=>e.jsx("button",{onClick:()=>h(j),className:"px-2 py-1 bg-[var(--brand-highlight)] hover:bg-[var(--brand-accent-soft)] rounded text-xs text-[var(--text-secondary)]",children:j},j))})]})})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-[var(--text-muted)]",children:"2 live visitors"})]}),e.jsx(Q3,{}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-brand-secondary rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"N"})}),e.jsx("span",{className:"text-sm font-medium text-[var(--text-secondary)]",children:"Nefol Admin"})]})]})]})}),e.jsx("main",{className:"flex-1 overflow-auto bg-[var(--brand-background)]",children:e.jsx("div",{className:"page-container",children:e.jsx(bb,{})})})]})]})},Hb=y.createContext(null);function Sr(){const t=y.useContext(Hb);if(!t)throw new Error("useToast must be used within ToastProvider");return t}function eS({children:t}){const[s,r]=y.useState([]),a=y.useCallback((i,l)=>{const o=Date.now()+Math.floor(Math.random()*1e3);r(c=>[...c,{id:o,type:i,message:l}]),setTimeout(()=>r(c=>c.filter(d=>d.id!==o)),3500)},[]),n=y.useMemo(()=>({notify:a}),[a]);return e.jsxs(Hb.Provider,{value:n,children:[t,e.jsx("div",{className:"fixed top-4 right-4 z-[1000] space-y-2",children:s.map(i=>e.jsx("div",{className:`px-4 py-2 rounded shadow text-sm ${i.type==="success"?"bg-green-600 text-white":i.type==="error"?"bg-red-600 text-white":"bg-slate-800 text-white"}`,children:i.message},i.id))})]})}function tS(){const[t,s]=y.useState(0),[r,a]=y.useState([]),[n,i]=y.useState({}),[l,o]=y.useState(0),[c,d]=y.useState([]);y.useEffect(()=>{Je.isConnected()||Je.connect();const h=Je.subscribe("live-users-count",b=>{console.log(" Live users count:",b.count),s(b.count||0)}),x=Je.subscribe("page-view-update",b=>{console.log(" Page view:",b),i(N=>({...N,[b.page]:(N[b.page]||0)+1})),u({type:"page-view",data:b,timestamp:new Date().toISOString()})}),g=Je.subscribe("cart-update",b=>{console.log(" Cart update:",b),o(N=>N+1),u({type:"cart-update",data:b,timestamp:new Date().toISOString()})}),j=Je.subscribe("user-action-update",b=>{var N;console.log(" User action:",b),b.action==="search"&&((N=b.data)!=null&&N.query)&&d(C=>[b.data.query,...C.slice(0,9)]),u({type:"user-action",data:b,timestamp:new Date().toISOString()})});return()=>{h(),x(),g(),j()}},[]);const u=h=>{a(x=>[h,...x.slice(0,19)])},p=h=>{switch(h){case"page-view":return e.jsx(nt,{className:"h-4 w-4 text-blue-500"});case"cart-update":return e.jsx(Qs,{className:"h-4 w-4 text-green-500"});case"user-action":return e.jsx(Dn,{className:"h-4 w-4 text-purple-500"});default:return e.jsx(Dn,{className:"h-4 w-4 text-gray-500"})}},m=h=>{var x;switch(h.type){case"page-view":return`User viewed ${h.data.page}`;case"cart-update":return`Cart ${h.data.action}: ${((x=h.data.data)==null?void 0:x.productName)||"item"}`;case"user-action":return`${h.data.action}: ${JSON.stringify(h.data.data).substring(0,50)}`;default:return"Unknown activity"}},f=Object.entries(n).sort(([,h],[,x])=>x-h).slice(0,5);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"metric-card bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900 dark:to-blue-800 border-blue-200 dark:border-blue-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-300 mb-2",children:"Live Users"}),e.jsx("p",{className:"text-4xl font-bold text-blue-900 dark:text-blue-100",children:t})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Pt,{className:"h-12 w-12 text-blue-500 dark:text-blue-400"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-pulse"})]})]}),e.jsxs("div",{className:"mt-3 flex items-center text-sm text-blue-600 dark:text-blue-300",children:[e.jsx(Dn,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Active now"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Total Page Views"}),e.jsx("p",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100",children:Object.values(n).reduce((h,x)=>h+x,0)})]}),e.jsx(nt,{className:"h-12 w-12 text-gray-400 dark:text-gray-600"})]}),e.jsxs("div",{className:"mt-3 flex items-center text-sm text-green-600 dark:text-green-400",children:[e.jsx(zt,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Since session start"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Cart Events"}),e.jsx("p",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100",children:l})]}),e.jsx(Qs,{className:"h-12 w-12 text-gray-400 dark:text-gray-600"})]}),e.jsxs("div",{className:"mt-3 flex items-center text-sm text-blue-600 dark:text-blue-400",children:[e.jsx(Dn,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Add, remove, update"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center",children:[e.jsx(Dn,{className:"h-5 w-5 mr-2 text-purple-500"}),"Live Activity Feed"]}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:r.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(Dn,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Waiting for user activity..."})]}):r.map((h,x)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("div",{className:"mt-1",children:p(h.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 truncate",children:m(h)}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center mt-1",children:[e.jsx(os,{className:"h-3 w-3 mr-1"}),new Date(h.timestamp).toLocaleTimeString()]})]})]},x))})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[e.jsx(zt,{className:"h-5 w-5 mr-2 text-green-500"}),"Top Pages (This Session)"]}),e.jsx("div",{className:"space-y-3",children:f.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(nt,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No page views yet..."})]}):f.map(([h,x],g)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 text-white rounded-full font-bold text-sm",children:g+1}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:h||"/"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[x," ",x===1?"view":"views"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:x})})]},h))})]})]}),c.length>0&&e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Recent Search Queries"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((h,x)=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm",children:h},x))})]})]})}const sS=()=>{const t=va(),[s,r]=y.useState(!0),[a,n]=y.useState(null),[i,l]=y.useState([]),[o,c]=y.useState(0),[d,u]=y.useState(!0),[p,m]=y.useState(""),h="http://192.168.1.36:2000";y.useEffect(()=>{Je.isConnected()||Je.connect(),x();const C=setInterval(()=>{x()},3e4);return()=>clearInterval(C)},[]);const x=async()=>{var C,A;try{u(!0),m("");const[F,w,_]=await Promise.all([fetch(`${h}/api/dashboard/metrics`),fetch(`${h}/api/dashboard/action-items`),fetch(`${h}/api/dashboard/live-visitors`)]);if(F.ok){const v=await F.json(),S=v.data||v;n(S)}else n({sessions:0,sessionsChange:0,totalSales:0,salesChange:0,orders:0,ordersChange:0,conversionRate:0,conversionChange:0});if(w.ok){const v=await w.json(),S=((C=v.data)==null?void 0:C.items)||v.items||[];l(S)}if(_.ok){const v=await _.json(),S=((A=v.data)==null?void 0:A.count)||v.count||0;c(S)}}catch(F){console.error("Failed to load dashboard data:",F),m("Failed to load dashboard data"),n({sessions:0,sessionsChange:0,totalSales:0,salesChange:0,orders:0,ordersChange:0,conversionRate:0,conversionChange:0})}finally{u(!1)}},g=(C,A)=>{if(C==null)return"0";switch(A){case"sessions":return C.toLocaleString();case"totalSales":return`${C.toLocaleString()}`;case"orders":return C.toString();case"conversionRate":return`${C.toFixed(2)}%`;default:return C.toString()}},j=C=>C==null?"+0.0%":`${C>=0?"+":""}${C.toFixed(1)}%`,b=C=>C==null?"neutral":C>=0?"up":"down",N=a?[{title:"Sessions",value:g(a.sessions,"sessions"),change:j(a.sessionsChange),trend:b(a.sessionsChange),icon:""},{title:"Total sales",value:g(a.totalSales,"totalSales"),change:j(a.salesChange),trend:b(a.salesChange),icon:""},{title:"Orders",value:g(a.orders,"orders"),change:j(a.ordersChange),trend:b(a.ordersChange),icon:""},{title:"Conversion rate",value:g(a.conversionRate,"conversionRate"),change:j(a.conversionChange),trend:b(a.conversionChange),icon:""}]:[];return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsx(tS,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>t("/admin/analytics"),className:"flex items-center space-x-2 px-4 py-2 border rounded-xl hover:bg-[var(--arctic-blue-lighter)] transition-all duration-300",style:{borderColor:"var(--arctic-blue-light)",color:"var(--arctic-blue-primary-dark)"},title:"View analytics for last 30 days",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{children:"Last 30 days"})]}),e.jsxs("button",{onClick:()=>t("/admin/analytics"),className:"flex items-center space-x-2 px-4 py-2 border rounded-xl hover:bg-[var(--arctic-blue-lighter)] transition-all duration-300",style:{borderColor:"var(--arctic-blue-light)",color:"var(--arctic-blue-primary-dark)"},title:"View analytics for all channels",children:[e.jsx("span",{children:"All channels"}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsxs("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:[o," live visitors"]})]})]}),p&&e.jsx("div",{className:"metric-card",style:{backgroundColor:"#FEF2F2",borderColor:"#FECACA"},children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-red-600",children:p}),e.jsx("button",{onClick:x,className:"ml-auto text-red-600 hover:text-red-800 underline transition-colors",children:"Retry"})]})}),d&&!p&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((C,A)=>e.jsxs("div",{className:"metric-card animate-pulse",children:[e.jsx("div",{className:"h-4 rounded mb-4",style:{backgroundColor:"var(--arctic-blue-light)"}}),e.jsx("div",{className:"h-8 rounded",style:{backgroundColor:"var(--arctic-blue-light)"}})]},A))}),!d&&!p&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:N.map((C,A)=>e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:C.icon}),e.jsx("h3",{className:"text-sm font-medium",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:C.title})]}),e.jsx("button",{onClick:()=>t("/admin/analytics"),className:"transition-colors hover:opacity-70",style:{color:"var(--arctic-blue-primary)"},title:"View detailed analytics",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]}),e.jsxs("div",{className:"flex items-baseline space-x-3",children:[e.jsx("span",{className:"text-3xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:C.value}),e.jsxs("div",{className:`flex items-center space-x-1 text-sm font-medium ${C.trend==="up"?"text-green-600":"text-red-600"}`,children:[C.trend==="up"?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 17l9.2-9.2M17 17V7H7"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 7l-9.2 9.2M7 7v10h10"})}),e.jsx("span",{children:C.change})]})]})]},A))}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Sessions"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"var(--arctic-blue-primary)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Current Period"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"var(--arctic-blue-light)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Previous Period"})]})]})]}),e.jsx("div",{className:"h-64 rounded-xl flex items-center justify-center border-2 border-dashed",style:{backgroundColor:"var(--arctic-blue-lighter)",borderColor:"var(--arctic-blue-light)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",style:{color:"var(--arctic-blue-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--text-muted)"},children:"Performance chart will be displayed here"}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Chart integration coming soon"})]})})]}),!d&&!p&&i.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map((C,A)=>e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:C.icon}),e.jsx("span",{className:`font-medium ${C.color}`,children:C.title})]})},A))}),s&&a&&a.orders>=10&&e.jsxs("div",{className:"metric-card relative",style:{background:"linear-gradient(135deg, var(--arctic-blue-lighter) 0%, var(--arctic-blue-light) 100%)",borderColor:"var(--arctic-blue-primary)"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-xl font-light mb-3",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:["Congratulations on reaching ",a.orders||0," orders!"]}),e.jsx("p",{className:"mb-6",style:{color:"var(--text-muted)",letterSpacing:"0.02em"},children:"This is just the beginning of your journey. Keep pushing forward and watch your business grow with each new customer."}),e.jsx("button",{onClick:()=>t("/admin/orders"),className:"btn-primary",children:"View orders report"})]}),e.jsx("div",{className:"ml-8",children:e.jsx("div",{className:"w-24 h-24 rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg, var(--arctic-blue-primary) 0%, var(--arctic-blue-primary-dark) 100%)"},children:e.jsx("span",{className:"text-4xl",children:""})})})]}),e.jsx("button",{onClick:()=>r(!1),className:"absolute top-4 right-4 transition-colors hover:opacity-70",style:{color:"var(--text-muted)"},children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})};function $a({open:t,title:s="Are you sure?",description:r,confirmText:a="Confirm",cancelText:n="Cancel",onConfirm:i,onClose:l}){return t?e.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-5",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:s}),r&&e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:r}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:l,className:"px-3 py-2 text-sm border rounded",children:n}),e.jsx("button",{onClick:()=>{i(),l()},className:"px-3 py-2 text-sm rounded bg-red-600 text-white",children:a})]})]})}):null}function rS(){const t=va(),{notify:s}=Sr(),[r,a]=y.useState([]),[n,i]=y.useState(!1),[l,o]=y.useState(""),[c,d]=y.useState(""),[u,p]=y.useState(""),[m,f]=y.useState(""),[h,x]=y.useState(""),[g,j]=y.useState(""),[b,N]=y.useState(""),[C,A]=y.useState([]),w="http://192.168.1.36:2000",_=y.useMemo(()=>{const z=localStorage.getItem("auth_token");return{"Content-Type":"application/json",...z?{Authorization:`Bearer ${z}`}:{},"x-user-permissions":"orders:read,orders:update,shipping:update,invoices:read","x-user-role":"admin"}},[]),v=async()=>{try{i(!0),o("");const z=new URLSearchParams;c&&z.set("status",c),u&&z.set("q",u),m&&z.set("from",m),h&&z.set("to",h),g&&z.set("payment_status",g),b&&z.set("cod",b);const Q=await fetch(`${w}/api/orders?${z.toString()}`,{headers:_});if(!Q.ok){Q.status===403?o("Access denied. You do not have permission to view orders."):o(`Failed to load orders: ${Q.status} ${Q.statusText}`),a([]);return}const P=await Q.json();let k=Array.isArray(P)?P:P&&Array.isArray(P.data)?P.data:[];const X=k.map(se=>({...se,customer:se.customer_name||se.customer||"",createdAt:se.created_at||se.createdAt||new Date().toISOString()}));a(X),X.length===0&&k.length===0&&o("Invalid response format from server"),A([])}catch(z){console.error("Error loading orders:",z),o("Failed to load orders"),a([])}finally{i(!1)}};y.useEffect(()=>{v();const z=Je.subscribe("order_created",P=>{console.log("New order received:",P);const k={...P,customer:P.customer_name||P.customer||"",createdAt:P.created_at||P.createdAt||new Date().toISOString()};a(X=>[k,...X])}),Q=Je.subscribe("order_updated",P=>{console.log("Order updated:",P);const k={...P,customer:P.customer_name||P.customer||"",createdAt:P.created_at||P.createdAt||new Date().toISOString()};a(X=>X.map(se=>se.id===k.id?k:se))});return()=>{z(),Q()}},[]);const S=async(z,Q)=>{try{const P=await fetch(`${w}/api/orders/${z}`,{method:"PUT",headers:_,body:JSON.stringify({status:Q})});if(!P.ok){const k=await P.json();throw new Error(k.error||"Status update failed")}await v(),s("success",`Order ${z} updated to ${Q}`)}catch(P){console.error("Update failed:",P),s("error",`Update failed: ${P.message}`)}},R=(z,Q)=>{A(P=>Q?Array.from(new Set([...P,z])):P.filter(k=>k!==z))},D=async z=>{if(C.length===0)return alert("Select orders first");if(!(await fetch(`${w}/api/bulk/orders/status`,{method:"POST",headers:_,body:JSON.stringify({orderIds:C,status:z})})).ok){s("error","Bulk status failed");return}await v(),s("success",`Bulk marked ${z}`)},V=async()=>{if(C.length===0)return alert("Select orders first");if(!(await fetch(`${w}/api/bulk/shipping/labels`,{method:"POST",headers:_,body:JSON.stringify({orderIds:C})})).ok){s("error","Bulk labels failed");return}s("success","Labels queued")},O=async()=>{if(C.length===0)return alert("Select orders first");const z=await fetch(`${w}/api/bulk/invoices/download`,{method:"POST",headers:_,body:JSON.stringify({orderIds:C})});if(!z.ok){s("error","Bulk invoices failed");return}const Q=await z.json();console.log("Invoice links:",Q==null?void 0:Q.links),s("success","Invoice links generated (check console)")},I=async z=>{try{const Q=await fetch(`${w}/api/shiprocket/orders/${z}/awb`,{method:"POST",headers:_}),P=await Q.json();if(!Q.ok||!(P!=null&&P.success))throw new Error((P==null?void 0:P.error)||"Failed to create AWB");alert("AWB created successfully")}catch(Q){alert((Q==null?void 0:Q.message)||"Failed to create AWB")}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
          :root {
            --arctic-blue-primary: #7DD3D3;
            --arctic-blue-primary-hover: #5EC4C4;
            --arctic-blue-primary-dark: #4A9FAF;
            --arctic-blue-light: #E0F5F5;
            --arctic-blue-lighter: #F0F9F9;
            --arctic-blue-background: #F4F9F9;
          }
        `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Orders"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage and track all customer orders"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:v,className:"btn-secondary",children:"Refresh"}),e.jsx("button",{onClick:()=>{const z=new URLSearchParams;c&&z.set("status",c),u&&z.set("q",u),m&&z.set("from",m),h&&z.set("to",h),window.open(`${w}/api/orders/export?${z.toString()}`,"_blank")},className:"btn-secondary",children:"Export CSV"}),e.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[e.jsx(ms,{permission:"orders:update",children:e.jsx("button",{onClick:()=>D("paid"),className:"btn-secondary",children:"Bulk Mark Paid"})}),e.jsx(ms,{permission:"orders:update",children:e.jsx("button",{onClick:()=>D("shipped"),className:"btn-secondary",children:"Bulk Mark Shipped"})}),e.jsx(ms,{permission:"shipping:update",children:e.jsx("button",{onClick:V,className:"btn-secondary",children:"Bulk Labels"})}),e.jsx(ms,{permission:"invoices:read",children:e.jsx("button",{onClick:O,className:"btn-secondary",children:"Bulk Invoices"})})]})]})]}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("input",{value:u,onChange:z=>p(z.target.value),placeholder:"Search order #",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsxs("select",{value:c,onChange:z=>d(z.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsxs("select",{value:g,onChange:z=>j(z.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"},children:[e.jsx("option",{value:"",children:"Any Payment"}),e.jsx("option",{value:"unpaid",children:"Unpaid"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"refunded",children:"Refunded"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsxs("select",{value:b,onChange:z=>N(z.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"},children:[e.jsx("option",{value:"",children:"COD/Prepaid"}),e.jsx("option",{value:"true",children:"COD"}),e.jsx("option",{value:"false",children:"Prepaid"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 md:col-span-5",children:[e.jsx("input",{type:"date",value:m,onChange:z=>f(z.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("input",{type:"date",value:h,onChange:z=>x(z.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("button",{onClick:v,className:"btn-primary md:col-span-2",children:"Apply Filters"})]})]})}),e.jsx("div",{className:"metric-card",children:n?e.jsx("p",{children:"Loading..."}):l?e.jsx("p",{className:"text-red-600",children:l}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"border-b text-xs uppercase",style:{borderColor:"var(--arctic-blue-light)",color:"var(--text-muted)"},children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-4 pr-4",children:e.jsx("input",{type:"checkbox",onChange:z=>{z.target.checked&&Array.isArray(r)?A(r.map(Q=>Q.id)):A([])},checked:C.length>0&&Array.isArray(r)&&C.length===r.length})}),e.jsx("th",{className:"py-4 pr-4 font-medium",children:"ID"}),e.jsx("th",{className:"py-4 pr-4 font-medium",children:"Customer"}),e.jsx("th",{className:"py-4 pr-4 font-medium",children:"Total"}),e.jsx("th",{className:"py-4 pr-4 font-medium",children:"Status"}),e.jsx("th",{className:"py-4 pr-4 font-medium",children:"Placed"}),e.jsx("th",{className:"py-4 pr-4 font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:Array.isArray(r)&&r.length>0?r.map(z=>e.jsxs("tr",{className:"border-b transition-colors hover:bg-[var(--arctic-blue-lighter)]",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsx("td",{className:"py-4 pr-4",children:e.jsx("input",{type:"checkbox",checked:C.includes(z.id),onChange:Q=>R(z.id,Q.target.checked)})}),e.jsx("td",{className:"py-4 pr-4 font-medium",style:{color:"var(--text-primary)"},children:z.id}),e.jsx("td",{className:"py-4 pr-4",style:{color:"var(--text-secondary)"},children:z.customer}),e.jsxs("td",{className:"py-4 pr-4 font-semibold",style:{color:"var(--arctic-blue-primary-dark)"},children:["",Number(z.total).toFixed(2)]}),e.jsx("td",{className:"py-4 pr-4",children:e.jsx("span",{className:`px-3 py-1 text-xs rounded-full font-medium ${z.status==="paid"?"bg-green-100 text-green-800":z.status==="shipped"?"bg-blue-100 text-blue-800":z.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:z.status})}),e.jsx("td",{className:"py-4 pr-4",style:{color:"var(--text-muted)"},children:z.createdAt?(()=>{try{const Q=new Date(z.createdAt);return isNaN(Q.getTime())?"Invalid Date":Q.toLocaleString()}catch{return"Invalid Date"}})():"Invalid Date"}),e.jsx("td",{className:"py-4 pr-4",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>t(`/admin/orders/${z.id}`),className:"btn-secondary text-xs px-3 py-1.5",children:"Details"}),e.jsx(ms,{permission:"orders:update",children:e.jsx("button",{onClick:()=>S(z.id,"paid"),className:"btn-secondary text-xs px-3 py-1.5",children:"Mark Paid"})}),e.jsx(ms,{permission:"orders:update",children:e.jsx("button",{onClick:()=>S(z.id,"shipped"),className:"btn-secondary text-xs px-3 py-1.5",children:"Mark Shipped"})}),e.jsx(ms,{permission:"shipping:update",children:e.jsx("button",{onClick:()=>I(z.id),className:"btn-secondary text-xs px-3 py-1.5",children:"Create AWB"})}),e.jsx(ms,{permission:"orders:update",children:e.jsx(aS,{onConfirm:()=>S(z.id,"cancelled")})})]})})]},z.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"py-12 text-center",style:{color:"var(--text-muted)"},children:l||"No orders found"})})})]})})})]})})}function aS({onConfirm:t}){const[s,r]=y.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>r(!0),className:"bg-red-600 text-white px-2 py-1 text-xs rounded hover:bg-red-700",children:"Cancel"}),e.jsx($a,{open:s,onClose:()=>r(!1),onConfirm:t,title:"Cancel this order?",description:"This action cannot be undone.",confirmText:"Cancel Order"})]})}function nS(){const t=va(),[s,r]=y.useState([]),[a,n]=y.useState(!0),[i,l]=y.useState(null),[o,c]=y.useState(""),[d,u]=y.useState("with_orders"),[p,m]=y.useState("total_spent"),[f,h]=y.useState("desc"),g="http://192.168.1.36:2000";y.useEffect(()=>{j()},[]);const j=async()=>{try{n(!0),l(null);const A=await fetch(`${g}/api/users`);if(A.ok){const w=(await A.json()).filter(_=>(parseInt(String(_.total_orders||0),10)||0)>0).map(_=>({..._,total_orders:parseInt(String(_.total_orders||0),10)||0,total_spent:parseFloat(String(_.total_spent||0))||0,loyalty_points:parseInt(String(_.loyalty_points||0),10)||0}));r(w)}else l("Failed to fetch customers")}catch(A){console.error("Error fetching customers:",A),l("Failed to fetch customers")}finally{n(!1)}},b=s.filter(A=>{var S,R,D;const F=((S=A.name)==null?void 0:S.toLowerCase().includes(o.toLowerCase()))||((R=A.email)==null?void 0:R.toLowerCase().includes(o.toLowerCase()))||((D=A.phone)==null?void 0:D.toLowerCase().includes(o.toLowerCase())),w=parseInt(String(A.total_orders||0),10)||0,_=parseFloat(String(A.total_spent||0))||0,v=d==="all"||d==="with_orders"&&w>0||d==="high_value"&&_>=5e3;return F&&v}).sort((A,F)=>{let w,_;switch(p){case"total_spent":w=parseFloat(String(A.total_spent||0))||0,_=parseFloat(String(F.total_spent||0))||0;break;case"total_orders":w=parseInt(String(A.total_orders||0),10)||0,_=parseInt(String(F.total_orders||0),10)||0;break;case"member_since":w=new Date(A.member_since).getTime(),_=new Date(F.member_since).getTime();break;default:return 0}return f==="asc"?w>_?1:-1:w<_?1:-1}),N=A=>{const F=parseFloat(String(A||0))||0;return F>=1e4?{level:"Platinum",color:"text-purple-600 bg-purple-100 dark:bg-purple-900/20 dark:text-purple-300"}:F>=5e3?{level:"Gold",color:"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20 dark:text-yellow-300"}:F>=2e3?{level:"Silver",color:"text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300"}:{level:"Bronze",color:"text-orange-600 bg-orange-100 dark:bg-orange-900/20 dark:text-orange-300"}},C={totalCustomers:s.length,totalRevenue:s.reduce((A,F)=>{const w=parseFloat(String(F.total_spent||0))||0;return A+w},0),totalOrders:s.reduce((A,F)=>{const w=parseInt(String(F.total_orders||0),10)||0;return A+w},0),averageOrderValue:(()=>{const A=s.reduce((w,_)=>{const v=parseFloat(String(_.total_spent||0))||0;return w+v},0),F=s.reduce((w,_)=>{const v=parseInt(String(_.total_orders||0),10)||0;return w+v},0);return F>0?A/F:0})(),highValueCustomers:s.filter(A=>(parseFloat(String(A.total_spent||0))||0)>=5e3).length};return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Customers"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage your customers and their order history"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pt,{className:"h-8 w-8",style:{color:"var(--arctic-blue-primary)"}}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:C.totalCustomers})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(jo,{className:"h-8 w-8",style:{color:"var(--arctic-blue-primary)"}}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:["",C.totalRevenue.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ha,{className:"h-8 w-8",style:{color:"var(--arctic-blue-primary)"}}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:C.totalOrders})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(zt,{className:"h-8 w-8 text-orange-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Avg Order Value"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:isNaN(C.averageOrderValue)||C.averageOrderValue===0?"0":`${Math.round(C.averageOrderValue).toLocaleString("en-IN")}`})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ur,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"High Value"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:C.highValueCustomers})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[e.jsx("div",{className:"flex-1 w-full",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search customers by name, email, or phone...",value:o,onChange:A=>c(A.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(nl,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:d,onChange:A=>u(A.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Customers"}),e.jsx("option",{value:"with_orders",children:"With Orders"}),e.jsx("option",{value:"high_value",children:"High Value (5000+)"})]}),e.jsxs("select",{value:`${p}-${f}`,onChange:A=>{const[F,w]=A.target.value.split("-");m(F),h(w)},className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"total_spent-desc",children:"Highest Revenue"}),e.jsx("option",{value:"total_spent-asc",children:"Lowest Revenue"}),e.jsx("option",{value:"total_orders-desc",children:"Most Orders"}),e.jsx("option",{value:"total_orders-asc",children:"Least Orders"}),e.jsx("option",{value:"member_since-desc",children:"Newest"}),e.jsx("option",{value:"member_since-asc",children:"Oldest"})]})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[i&&e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400",children:[e.jsx("p",{className:"text-red-700 dark:text-red-300",children:i}),e.jsx("button",{onClick:j,className:"mt-2 text-red-600 dark:text-red-400 hover:underline",children:"Retry"})]}),b.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Pt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No customers found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:o?"Try adjusting your search terms":"No customers have placed orders yet"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Orders"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Tier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Member Since"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:b.map(A=>{const F=N(A.total_spent||0);return e.jsxs("tr",{onClick:()=>t(`/admin/users/${A.id}`),className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900/20 flex items-center justify-center",children:e.jsx(Pt,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:A.name||"N/A"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",A.id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ts,{className:"h-4 w-4 text-gray-400"}),A.email||"N/A"]}),A.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fa,{className:"h-4 w-4 text-gray-400"}),A.phone]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(jo,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["",(parseFloat(String(A.total_spent||0))||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:parseInt(String(A.total_orders||0),10)||0})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${F.color}`,children:F.level})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mr,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:new Date(A.member_since).toLocaleDateString()})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${A.is_verified?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300"}`,children:A.is_verified?"Verified":"Unverified"})})]},A.id)})})]})}),b.length>0&&e.jsx("div",{className:"px-6 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",b.length," of ",s.length," customers"]})})]})]})}const Df="http://192.168.1.36:2000";function iS(){const t=va(),[s,r]=y.useState([]),[a,n]=y.useState([]),[i,l]=y.useState(!0),[o,c]=y.useState(null),[d,u]=y.useState(""),[p,m]=y.useState("all"),[f,h]=y.useState(!1);y.useEffect(()=>{j(),x()},[]);const x=async()=>{try{const C=await fetch(`${Df}/api/forms/submissions`);if(C.ok){const A=await C.json();n(A.submissions||A||[])}}catch(C){console.error("Error fetching form submissions:",C)}},g=C=>a.filter(A=>{const F=A.data||{};return F.email===C||F.Email===C}),j=async()=>{try{l(!0);const C=await fetch(`${Df}/api/users`);if(C.ok){const A=await C.json();r(A)}else c("Failed to fetch users")}catch{c("Failed to fetch users")}finally{l(!1)}},b=s.filter(C=>{const A=C.name.toLowerCase().includes(d.toLowerCase())||C.email.toLowerCase().includes(d.toLowerCase()),F=p==="all"||p==="verified"&&C.is_verified||p==="unverified"&&!C.is_verified;return A&&F}),N=C=>C>=5e3?{level:"Gold",color:"text-yellow-600 bg-yellow-100"}:C>=2e3?{level:"Silver",color:"text-gray-600 bg-gray-100"}:{level:"Bronze",color:"text-orange-600 bg-orange-100"};return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Users"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage your customer base"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>h(!f),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[e.jsx(gs,{className:"h-4 w-4"}),e.jsxs("span",{children:["Form Submissions (",a.length,")"]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 px-4 py-2 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Total Users"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:s.length})]})]})]}),f&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Form Submissions"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),a.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No form submissions yet"}):e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:a.map(C=>{const A=C.data||{},F=A.email||A.Email||"N/A",w=A.name||A.Name||"Anonymous",_=s.find(v=>v.email===F);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:C.form_name||`Form #${C.form_id}`}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Submitted by: ",w," (",F,")",_&&e.jsxs("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:["(User ID: ",_.id,")"]})]})]}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(C.created_at).toLocaleString()})]}),e.jsx("div",{className:"space-y-1 mt-2",children:Object.entries(A).map(([v,S])=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:[v,":"]})," ",e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:String(S)})]},v))})]},C.id)})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search users by name or email...",value:d,onChange:C=>u(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsxs("select",{value:p,onChange:C=>m(C.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Users"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"unverified",children:"Unverified"})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[o&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400",children:e.jsx("p",{className:"text-red-700 dark:text-red-300",children:o})}),b.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Pt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No users found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:d?"Try adjusting your search terms":"No users have signed up yet"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Loyalty"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Orders"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Member Since"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Form Submissions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:b.map(C=>{const A=N(C.loyalty_points),F=g(C.email);return e.jsxs("tr",{onClick:()=>t(`/admin/users/${C.id}`),className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900/20 flex items-center justify-center",children:e.jsx(Pt,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:C.name}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",C.id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ts,{className:"h-4 w-4 text-gray-400"}),C.email]}),C.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fa,{className:"h-4 w-4 text-gray-400"}),C.phone]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ur,{className:"h-4 w-4 text-yellow-500"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[C.loyalty_points.toLocaleString()," pts"]})]}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${A.color}`,children:A.level})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:C.total_orders})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${C.is_verified?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300"}`,children:C.is_verified?"Verified":"Unverified"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mr,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:new Date(C.member_since).toLocaleDateString()})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:F.length})]}),F.length>0&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Latest: ",new Date(F[0].created_at).toLocaleDateString()]})]})]},C.id)})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pt,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ur,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Verified Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.filter(C=>C.is_verified).length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ha,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.reduce((C,A)=>C+A.total_orders,0)})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ur,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Points"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.reduce((C,A)=>C+A.loyalty_points,0).toLocaleString()})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(gs,{className:"h-8 w-8 text-indigo-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Form Submissions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.length})]})]})})]})]})}function lS(){return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Categories"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Organize your products into categories"})]}),e.jsx("button",{className:"btn-primary",children:"Add Category"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"mb-4 text-xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Category Management"}),e.jsx("p",{style:{color:"var(--text-muted)",letterSpacing:"0.02em"},children:"Category management features coming soon. This will include creating, editing, and organizing product categories."})]})]})}function oS(){const[t,s]=y.useState("Nefol Store"),[r,a]=y.useState("support@nefol.com"),[n,i]=y.useState("Light"),[l,o]=y.useState("INR ()"),c=()=>{alert("Settings saved successfully!"),console.log("Settings:",{storeName:t,supportEmail:r,theme:n,currency:l})};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Settings"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Configure your store settings and preferences"})]}),e.jsx("button",{onClick:c,className:"btn-primary",children:"Save Changes"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"mb-4 text-xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Store Settings"}),e.jsx("p",{className:"mb-6",style:{color:"var(--text-muted)",letterSpacing:"0.02em"},children:"Configure your store settings and preferences."}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 font-semibold text-gray-900",children:"General"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Name"}),e.jsx("input",{value:t,onChange:d=>s(d.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"Nefol Store"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Support Email"}),e.jsx("input",{value:r,onChange:d=>a(d.target.value),type:"email",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"support@nefol.com"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 font-semibold text-gray-900",children:"Appearance"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Theme"}),e.jsxs("select",{value:n,onChange:d=>i(d.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",children:[e.jsx("option",{children:"Light"}),e.jsx("option",{children:"Dark"}),e.jsx("option",{children:"Auto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsxs("select",{value:l,onChange:d=>o(d.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",children:[e.jsx("option",{children:"INR ()"}),e.jsx("option",{children:"USD ($)"}),e.jsx("option",{children:"EUR ()"})]})]})]})]})]})]})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Gb=1252,cS=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],pm={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},gm=function(t){cS.indexOf(t)!=-1&&(Gb=pm[0]=t)};function dS(){gm(1252)}var Qr=function(t){gm(t)};function qb(){Qr(1200),dS()}function Rf(t){for(var s=[],r=0,a=t.length;r<a;++r)s[r]=t.charCodeAt(r);return s}function uS(t){for(var s=[],r=0;r<t.length>>1;++r)s[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return s.join("")}function Jb(t){for(var s=[],r=0;r<t.length>>1;++r)s[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return s.join("")}var El=function(t){var s=t.charCodeAt(0),r=t.charCodeAt(1);return s==255&&r==254?uS(t.slice(2)):s==254&&r==255?Jb(t.slice(2)):s==65279?t.slice(1):t},oc=function(s){return String.fromCharCode(s)},Lf=function(s){return String.fromCharCode(s)},No,nn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Of(t){for(var s="",r=0,a=0,n=0,i=0,l=0,o=0,c=0,d=0;d<t.length;)r=t.charCodeAt(d++),i=r>>2,a=t.charCodeAt(d++),l=(r&3)<<4|a>>4,n=t.charCodeAt(d++),o=(a&15)<<2|n>>6,c=n&63,isNaN(a)?o=c=64:isNaN(n)&&(c=64),s+=nn.charAt(i)+nn.charAt(l)+nn.charAt(o)+nn.charAt(c);return s}function Nr(t){var s="",r=0,a=0,n=0,i=0,l=0,o=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<t.length;)i=nn.indexOf(t.charAt(d++)),l=nn.indexOf(t.charAt(d++)),r=i<<2|l>>4,s+=String.fromCharCode(r),o=nn.indexOf(t.charAt(d++)),a=(l&15)<<4|o>>2,o!==64&&(s+=String.fromCharCode(a)),c=nn.indexOf(t.charAt(d++)),n=(o&3)<<6|c,c!==64&&(s+=String.fromCharCode(n));return s}var ht=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),ci=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(s,r){return r?new Buffer(s,r):new Buffer(s)}:Buffer.from.bind(Buffer)}return function(){}}();function Nn(t){return ht?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function If(t){return ht?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Xr=function(s){return ht?ci(s,"binary"):s.split("").map(function(r){return r.charCodeAt(0)&255})};function di(t){if(Array.isArray(t))return t.map(function(a){return String.fromCharCode(a)}).join("");for(var s=[],r=0;r<t.length;++r)s[r]=String.fromCharCode(t[r]);return s.join("")}function ym(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return ym(new Uint8Array(t));for(var s=new Array(t.length),r=0;r<t.length;++r)s[r]=t[r];return s}var tn=ht?function(t){return Buffer.concat(t.map(function(s){return Buffer.isBuffer(s)?s:ci(s)}))}:function(t){if(typeof Uint8Array<"u"){var s=0,r=0;for(s=0;s<t.length;++s)r+=t[s].length;var a=new Uint8Array(r),n=0;for(s=0,r=0;s<t.length;r+=n,++s)if(n=t[s].length,t[s]instanceof Uint8Array)a.set(t[s],r);else{if(typeof t[s]=="string")throw"wtf";a.set(new Uint8Array(t[s]),r)}return a}return[].concat.apply([],t.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function xS(t){for(var s=[],r=0,a=t.length+250,n=Nn(t.length+255),i=0;i<t.length;++i){var l=t.charCodeAt(i);if(l<128)n[r++]=l;else if(l<2048)n[r++]=192|l>>6&31,n[r++]=128|l&63;else if(l>=55296&&l<57344){l=(l&1023)+64;var o=t.charCodeAt(++i)&1023;n[r++]=240|l>>8&7,n[r++]=128|l>>2&63,n[r++]=128|o>>6&15|(l&3)<<4,n[r++]=128|o&63}else n[r++]=224|l>>12&15,n[r++]=128|l>>6&63,n[r++]=128|l&63;r>a&&(s.push(n.slice(0,r)),r=0,n=Nn(65535),a=65530)}return s.push(n.slice(0,r)),tn(s)}var Zs=/\u0000/g,Fl=/[\u0001-\u0006]/g;function Ui(t){for(var s="",r=t.length-1;r>=0;)s+=t.charAt(r--);return s}function Zr(t,s){var r=""+t;return r.length>=s?r:Jt("0",s-r.length)+r}function bm(t,s){var r=""+t;return r.length>=s?r:Jt(" ",s-r.length)+r}function dd(t,s){var r=""+t;return r.length>=s?r:r+Jt(" ",s-r.length)}function mS(t,s){var r=""+Math.round(t);return r.length>=s?r:Jt("0",s-r.length)+r}function hS(t,s){var r=""+t;return r.length>=s?r:Jt("0",s-r.length)+r}var Mf=Math.pow(2,32);function gi(t,s){if(t>Mf||t<-Mf)return mS(t,s);var r=Math.round(t);return hS(r,s)}function ud(t,s){return s=s||0,t.length>=7+s&&(t.charCodeAt(s)|32)===103&&(t.charCodeAt(s+1)|32)===101&&(t.charCodeAt(s+2)|32)===110&&(t.charCodeAt(s+3)|32)===101&&(t.charCodeAt(s+4)|32)===114&&(t.charCodeAt(s+5)|32)===97&&(t.charCodeAt(s+6)|32)===108}var Bf=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],_0=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function fS(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Ze={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Uf={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},pS={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function xd(t,s,r){for(var a=t<0?-1:1,n=t*a,i=0,l=1,o=0,c=1,d=0,u=0,p=Math.floor(n);d<s&&(p=Math.floor(n),o=p*l+i,u=p*d+c,!(n-p<5e-8));)n=1/(n-p),i=l,l=o,c=d,d=u;if(u>s&&(d>s?(u=c,o=i):(u=d,o=l)),!r)return[0,a*o,u];var m=Math.floor(a*o/u);return[m,a*o-m*u,u]}function zn(t,s,r){if(t>2958465||t<0)return null;var a=t|0,n=Math.floor(86400*(t-a)),i=0,l=[],o={D:a,T:n,u:86400*(t-a)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),s&&s.date1904&&(a+=1462),o.u>.9999&&(o.u=0,++n==86400&&(o.T=n=0,++a,++o.D)),a===60)l=r?[1317,10,29]:[1900,2,29],i=3;else if(a===0)l=r?[1317,8,29]:[1900,1,0],i=6;else{a>60&&--a;var c=new Date(1900,0,1);c.setDate(c.getDate()+a-1),l=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),a<60&&(i=(i+6)%7),r&&(i=NS(c,l))}return o.y=l[0],o.m=l[1],o.d=l[2],o.S=n%60,n=Math.floor(n/60),o.M=n%60,n=Math.floor(n/60),o.H=n,o.q=i,o}var Kb=new Date(1899,11,31,0,0,0),gS=Kb.getTime(),yS=new Date(1900,2,1,0,0,0);function Yb(t,s){var r=t.getTime();return s?r-=1461*24*60*60*1e3:t>=yS&&(r+=24*60*60*1e3),(r-(gS+(t.getTimezoneOffset()-Kb.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function vm(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function bS(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function vS(t){var s=t<0?12:11,r=vm(t.toFixed(12));return r.length<=s||(r=t.toPrecision(10),r.length<=s)?r:t.toExponential(5)}function jS(t){var s=vm(t.toFixed(11));return s.length>(t<0?12:11)||s==="0"||s==="-0"?t.toPrecision(6):s}function wo(t){var s=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return s>=-4&&s<=-1?r=t.toPrecision(10+s):Math.abs(s)<=9?r=vS(t):s===10?r=t.toFixed(10).substr(0,12):r=jS(t),vm(bS(r.toUpperCase()))}function ri(t,s){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):wo(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Br(14,Yb(t,s&&s.date1904),s)}throw new Error("unsupported value in General format: "+t)}function NS(t,s){s[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function wS(t,s,r,a){var n="",i=0,l=0,o=r.y,c,d=0;switch(t){case 98:o=r.y+543;case 121:switch(s.length){case 1:case 2:c=o%100,d=2;break;default:c=o%1e4,d=4;break}break;case 109:switch(s.length){case 1:case 2:c=r.m,d=s.length;break;case 3:return _0[r.m-1][1];case 5:return _0[r.m-1][0];default:return _0[r.m-1][2]}break;case 100:switch(s.length){case 1:case 2:c=r.d,d=s.length;break;case 3:return Bf[r.q][0];default:return Bf[r.q][1]}break;case 104:switch(s.length){case 1:case 2:c=1+(r.H+11)%12,d=s.length;break;default:throw"bad hour format: "+s}break;case 72:switch(s.length){case 1:case 2:c=r.H,d=s.length;break;default:throw"bad hour format: "+s}break;case 77:switch(s.length){case 1:case 2:c=r.M,d=s.length;break;default:throw"bad minute format: "+s}break;case 115:if(s!="s"&&s!="ss"&&s!=".0"&&s!=".00"&&s!=".000")throw"bad second format: "+s;return r.u===0&&(s=="s"||s=="ss")?Zr(r.S,s.length):(a>=2?l=a===3?1e3:100:l=a===1?10:1,i=Math.round(l*(r.S+r.u)),i>=60*l&&(i=0),s==="s"?i===0?"0":""+i/l:(n=Zr(i,2+a),s==="ss"?n.substr(0,2):"."+n.substr(2,s.length-1)));case 90:switch(s){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+s}d=s.length===3?1:2;break;case 101:c=o,d=1;break}var u=d>0?Zr(c,d):"";return u}function ln(t){var s=3;if(t.length<=s)return t;for(var r=t.length%s,a=t.substr(0,r);r!=t.length;r+=s)a+=(a.length>0?",":"")+t.substr(r,s);return a}var Xb=/%/g;function kS(t,s,r){var a=s.replace(Xb,""),n=s.length-a.length;return Ra(t,a,r*Math.pow(10,2*n))+Jt("%",n)}function SS(t,s,r){for(var a=s.length-1;s.charCodeAt(a-1)===44;)--a;return Ra(t,s.substr(0,a),r/Math.pow(10,3*(s.length-a)))}function Qb(t,s){var r,a=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+Qb(t,-s);var n=t.indexOf(".");n===-1&&(n=t.indexOf("E"));var i=Math.floor(Math.log(s)*Math.LOG10E)%n;if(i<0&&(i+=n),r=(s/Math.pow(10,i)).toPrecision(a+1+(n+i)%n),r.indexOf("e")===-1){var l=Math.floor(Math.log(s)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+i):r+="E+"+(l-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,n)+"."+r.substr(2+n),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,d,u){return c+d+u.substr(0,(n+i)%n)+"."+u.substr(i)+"E"})}else r=s.toExponential(a);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Zb=/# (\?+)( ?)\/( ?)(\d+)/;function CS(t,s,r){var a=parseInt(t[4],10),n=Math.round(s*a),i=Math.floor(n/a),l=n-i*a,o=a;return r+(i===0?"":""+i)+" "+(l===0?Jt(" ",t[1].length+1+t[4].length):bm(l,t[1].length)+t[2]+"/"+t[3]+Zr(o,t[4].length))}function _S(t,s,r){return r+(s===0?"":""+s)+Jt(" ",t[1].length+2+t[4].length)}var ev=/^#*0*\.([0#]+)/,tv=/\).*[0#]/,sv=/\(###\) ###\\?-####/;function Js(t){for(var s="",r,a=0;a!=t.length;++a)switch(r=t.charCodeAt(a)){case 35:break;case 63:s+=" ";break;case 48:s+="0";break;default:s+=String.fromCharCode(r)}return s}function $f(t,s){var r=Math.pow(10,s);return""+Math.round(t*r)/r}function zf(t,s){var r=t-Math.floor(t),a=Math.pow(10,s);return s<(""+Math.round(r*a)).length?0:Math.round(r*a)}function TS(t,s){return s<(""+Math.round((t-Math.floor(t))*Math.pow(10,s))).length?1:0}function ES(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Tr(t,s,r){if(t.charCodeAt(0)===40&&!s.match(tv)){var a=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Tr("n",a,r):"("+Tr("n",a,-r)+")"}if(s.charCodeAt(s.length-1)===44)return SS(t,s,r);if(s.indexOf("%")!==-1)return kS(t,s,r);if(s.indexOf("E")!==-1)return Qb(s,r);if(s.charCodeAt(0)===36)return"$"+Tr(t,s.substr(s.charAt(1)==" "?2:1),r);var n,i,l,o,c=Math.abs(r),d=r<0?"-":"";if(s.match(/^00+$/))return d+gi(c,s.length);if(s.match(/^[#?]+$/))return n=gi(r,0),n==="0"&&(n=""),n.length>s.length?n:Js(s.substr(0,s.length-n.length))+n;if(i=s.match(Zb))return CS(i,c,d);if(s.match(/^#+0+$/))return d+gi(c,s.length-s.indexOf("0"));if(i=s.match(ev))return n=$f(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Js(i[1])).replace(/\.$/,"."+Js(i[1])).replace(/\.(\d*)$/,function(h,x){return"."+x+Jt("0",Js(i[1]).length-x.length)}),s.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),i=s.match(/^(0*)\.(#*)$/))return d+$f(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=s.match(/^#{1,3},##0(\.?)$/))return d+ln(gi(c,0));if(i=s.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Tr(t,s,-r):ln(""+(Math.floor(r)+TS(r,i[1].length)))+"."+Zr(zf(r,i[1].length),i[1].length);if(i=s.match(/^#,#*,#0/))return Tr(t,s.replace(/^#,#*,/,""),r);if(i=s.match(/^([0#]+)(\\?-([0#]+))+$/))return n=Ui(Tr(t,s.replace(/[\\-]/g,""),r)),l=0,Ui(Ui(s.replace(/\\/g,"")).replace(/[0#]/g,function(h){return l<n.length?n.charAt(l++):h==="0"?"0":""}));if(s.match(sv))return n=Tr(t,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var u="";if(i=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=xd(c,Math.pow(10,l)-1,!1),n=""+d,u=Ra("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),n+=u+i[2]+"/"+i[3],u=dd(o[2],l),u.length<i[4].length&&(u=Js(i[4].substr(i[4].length-u.length))+u),n+=u,n;if(i=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=xd(c,Math.pow(10,l)-1,!0),d+(o[0]||(o[1]?"":"0"))+" "+(o[1]?bm(o[1],l)+i[2]+"/"+i[3]+dd(o[2],l):Jt(" ",2*l+1+i[2].length+i[3].length));if(i=s.match(/^[#0?]+$/))return n=gi(r,0),s.length<=n.length?n:Js(s.substr(0,s.length-n.length))+n;if(i=s.match(/^([#0?]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=n.indexOf(".");var p=s.indexOf(".")-l,m=s.length-n.length-p;return Js(s.substr(0,p)+n+s.substr(s.length-m))}if(i=s.match(/^00,000\.([#0]*0)$/))return l=zf(r,i[1].length),r<0?"-"+Tr(t,s,-r):ln(ES(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(h){return"00,"+(h.length<3?Zr(0,3-h.length):"")+h})+"."+Zr(l,i[1].length);switch(s){case"###,##0.00":return Tr(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var f=ln(gi(c,0));return f!=="0"?d+f:"";case"###,###.00":return Tr(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Tr(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+s+"|")}function FS(t,s,r){for(var a=s.length-1;s.charCodeAt(a-1)===44;)--a;return Ra(t,s.substr(0,a),r/Math.pow(10,3*(s.length-a)))}function AS(t,s,r){var a=s.replace(Xb,""),n=s.length-a.length;return Ra(t,a,r*Math.pow(10,2*n))+Jt("%",n)}function rv(t,s){var r,a=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+rv(t,-s);var n=t.indexOf(".");n===-1&&(n=t.indexOf("E"));var i=Math.floor(Math.log(s)*Math.LOG10E)%n;if(i<0&&(i+=n),r=(s/Math.pow(10,i)).toPrecision(a+1+(n+i)%n),!r.match(/[Ee]/)){var l=Math.floor(Math.log(s)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+i):r+="E+"+(l-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,d,u){return c+d+u.substr(0,(n+i)%n)+"."+u.substr(i)+"E"})}else r=s.toExponential(a);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function ca(t,s,r){if(t.charCodeAt(0)===40&&!s.match(tv)){var a=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ca("n",a,r):"("+ca("n",a,-r)+")"}if(s.charCodeAt(s.length-1)===44)return FS(t,s,r);if(s.indexOf("%")!==-1)return AS(t,s,r);if(s.indexOf("E")!==-1)return rv(s,r);if(s.charCodeAt(0)===36)return"$"+ca(t,s.substr(s.charAt(1)==" "?2:1),r);var n,i,l,o,c=Math.abs(r),d=r<0?"-":"";if(s.match(/^00+$/))return d+Zr(c,s.length);if(s.match(/^[#?]+$/))return n=""+r,r===0&&(n=""),n.length>s.length?n:Js(s.substr(0,s.length-n.length))+n;if(i=s.match(Zb))return _S(i,c,d);if(s.match(/^#+0+$/))return d+Zr(c,s.length-s.indexOf("0"));if(i=s.match(ev))return n=(""+r).replace(/^([^\.]+)$/,"$1."+Js(i[1])).replace(/\.$/,"."+Js(i[1])),n=n.replace(/\.(\d*)$/,function(h,x){return"."+x+Jt("0",Js(i[1]).length-x.length)}),s.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),i=s.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=s.match(/^#{1,3},##0(\.?)$/))return d+ln(""+c);if(i=s.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ca(t,s,-r):ln(""+r)+"."+Jt("0",i[1].length);if(i=s.match(/^#,#*,#0/))return ca(t,s.replace(/^#,#*,/,""),r);if(i=s.match(/^([0#]+)(\\?-([0#]+))+$/))return n=Ui(ca(t,s.replace(/[\\-]/g,""),r)),l=0,Ui(Ui(s.replace(/\\/g,"")).replace(/[0#]/g,function(h){return l<n.length?n.charAt(l++):h==="0"?"0":""}));if(s.match(sv))return n=ca(t,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var u="";if(i=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=xd(c,Math.pow(10,l)-1,!1),n=""+d,u=Ra("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),n+=u+i[2]+"/"+i[3],u=dd(o[2],l),u.length<i[4].length&&(u=Js(i[4].substr(i[4].length-u.length))+u),n+=u,n;if(i=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=xd(c,Math.pow(10,l)-1,!0),d+(o[0]||(o[1]?"":"0"))+" "+(o[1]?bm(o[1],l)+i[2]+"/"+i[3]+dd(o[2],l):Jt(" ",2*l+1+i[2].length+i[3].length));if(i=s.match(/^[#0?]+$/))return n=""+r,s.length<=n.length?n:Js(s.substr(0,s.length-n.length))+n;if(i=s.match(/^([#0]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=n.indexOf(".");var p=s.indexOf(".")-l,m=s.length-n.length-p;return Js(s.substr(0,p)+n+s.substr(s.length-m))}if(i=s.match(/^00,000\.([#0]*0)$/))return r<0?"-"+ca(t,s,-r):ln(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(h){return"00,"+(h.length<3?Zr(0,3-h.length):"")+h})+"."+Zr(0,i[1].length);switch(s){case"###,###":case"##,###":case"#,###":var f=ln(""+c);return f!=="0"?d+f:"";default:if(s.match(/\.[0#?]*$/))return ca(t,s.slice(0,s.lastIndexOf(".")),r)+Js(s.slice(s.lastIndexOf(".")))}throw new Error("unsupported format |"+s+"|")}function Ra(t,s,r){return(r|0)===r?ca(t,s,r):Tr(t,s,r)}function PS(t){for(var s=[],r=!1,a=0,n=0;a<t.length;++a)switch(t.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:s[s.length]=t.substr(n,a-n),n=a+1}if(s[s.length]=t.substr(n),r===!0)throw new Error("Format |"+t+"| unterminated string ");return s}var av=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function ll(t){for(var s=0,r="",a="";s<t.length;)switch(r=t.charAt(s)){case"G":ud(t,s)&&(s+=6),s++;break;case'"':for(;t.charCodeAt(++s)!==34&&s<t.length;);++s;break;case"\\":s+=2;break;case"_":s+=2;break;case"@":++s;break;case"B":case"b":if(t.charAt(s+1)==="1"||t.charAt(s+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(s,3).toUpperCase()==="A/P"||t.substr(s,5).toUpperCase()==="AM/PM"||t.substr(s,5).toUpperCase()==="/")return!0;++s;break;case"[":for(a=r;t.charAt(s++)!=="]"&&s<t.length;)a+=t.charAt(s);if(a.match(av))return!0;break;case".":case"0":case"#":for(;s<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++s))>-1||r=="\\"&&t.charAt(s+1)=="-"&&"0#".indexOf(t.charAt(s+2))>-1););break;case"?":for(;t.charAt(++s)===r;);break;case"*":++s,(t.charAt(s)==" "||t.charAt(s)=="*")&&++s;break;case"(":case")":++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;s<t.length&&"0123456789".indexOf(t.charAt(++s))>-1;);break;case" ":++s;break;default:++s;break}return!1}function DS(t,s,r,a){for(var n=[],i="",l=0,o="",c="t",d,u,p,m="H";l<t.length;)switch(o=t.charAt(l)){case"G":if(!ud(t,l))throw new Error("unrecognized character "+o+" in "+t);n[n.length]={t:"G",v:"General"},l+=7;break;case'"':for(i="";(p=t.charCodeAt(++l))!==34&&l<t.length;)i+=String.fromCharCode(p);n[n.length]={t:"t",v:i},++l;break;case"\\":var f=t.charAt(++l),h=f==="("||f===")"?f:"t";n[n.length]={t:h,v:f},++l;break;case"_":n[n.length]={t:"t",v:" "},l+=2;break;case"@":n[n.length]={t:"T",v:s},++l;break;case"B":case"b":if(t.charAt(l+1)==="1"||t.charAt(l+1)==="2"){if(d==null&&(d=zn(s,r,t.charAt(l+1)==="2"),d==null))return"";n[n.length]={t:"X",v:t.substr(l,2)},c=o,l+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(s<0||d==null&&(d=zn(s,r),d==null))return"";for(i=o;++l<t.length&&t.charAt(l).toLowerCase()===o;)i+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=m),n[n.length]={t:o,v:i},c=o;break;case"A":case"a":case"":var x={t:o,v:o};if(d==null&&(d=zn(s,r)),t.substr(l,3).toUpperCase()==="A/P"?(d!=null&&(x.v=d.H>=12?"P":"A"),x.t="T",m="h",l+=3):t.substr(l,5).toUpperCase()==="AM/PM"?(d!=null&&(x.v=d.H>=12?"PM":"AM"),x.t="T",l+=5,m="h"):t.substr(l,5).toUpperCase()==="/"?(d!=null&&(x.v=d.H>=12?"":""),x.t="T",l+=5,m="h"):(x.t="t",++l),d==null&&x.t==="T")return"";n[n.length]=x,c=o;break;case"[":for(i=o;t.charAt(l++)!=="]"&&l<t.length;)i+=t.charAt(l);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(av)){if(d==null&&(d=zn(s,r),d==null))return"";n[n.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",ll(t)||(n[n.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=o;++l<t.length&&(o=t.charAt(l))==="0";)i+=o;n[n.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++l<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(l))>-1;)i+=o;n[n.length]={t:"n",v:i};break;case"?":for(i=o;t.charAt(++l)===o;)i+=o;n[n.length]={t:o,v:i},c=o;break;case"*":++l,(t.charAt(l)==" "||t.charAt(l)=="*")&&++l;break;case"(":case")":n[n.length]={t:a===1?"t":o,v:o},++l;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;l<t.length&&"0123456789".indexOf(t.charAt(++l))>-1;)i+=t.charAt(l);n[n.length]={t:"D",v:i};break;case" ":n[n.length]={t:o,v:o},++l;break;case"$":n[n.length]={t:"t",v:"$"},++l;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);n[n.length]={t:"t",v:o},++l;break}var g=0,j=0,b;for(l=n.length-1,c="t";l>=0;--l)switch(n[l].t){case"h":case"H":n[l].t=m,c="h",g<1&&(g=1);break;case"s":(b=n[l].v.match(/\.0+$/))&&(j=Math.max(j,b[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=n[l].t;break;case"m":c==="s"&&(n[l].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&n[l].v.match(/[Hh]/)&&(g=1),g<2&&n[l].v.match(/[Mm]/)&&(g=2),g<3&&n[l].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var N="",C;for(l=0;l<n.length;++l)switch(n[l].t){case"t":case"T":case" ":case"D":break;case"X":n[l].v="",n[l].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[l].v=wS(n[l].t.charCodeAt(0),n[l].v,d,j),n[l].t="t";break;case"n":case"?":for(C=l+1;n[C]!=null&&((o=n[C].t)==="?"||o==="D"||(o===" "||o==="t")&&n[C+1]!=null&&(n[C+1].t==="?"||n[C+1].t==="t"&&n[C+1].v==="/")||n[l].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(n[C].v==="/"||n[C].v===" "&&n[C+1]!=null&&n[C+1].t=="?"));)n[l].v+=n[C].v,n[C]={v:"",t:";"},++C;N+=n[l].v,l=C-1;break;case"G":n[l].t="t",n[l].v=ri(s,r);break}var A="",F,w;if(N.length>0){N.charCodeAt(0)==40?(F=s<0&&N.charCodeAt(0)===45?-s:s,w=Ra("n",N,F)):(F=s<0&&a>1?-s:s,w=Ra("n",N,F),F<0&&n[0]&&n[0].t=="t"&&(w=w.substr(1),n[0].v="-"+n[0].v)),C=w.length-1;var _=n.length;for(l=0;l<n.length;++l)if(n[l]!=null&&n[l].t!="t"&&n[l].v.indexOf(".")>-1){_=l;break}var v=n.length;if(_===n.length&&w.indexOf("E")===-1){for(l=n.length-1;l>=0;--l)n[l]==null||"n?".indexOf(n[l].t)===-1||(C>=n[l].v.length-1?(C-=n[l].v.length,n[l].v=w.substr(C+1,n[l].v.length)):C<0?n[l].v="":(n[l].v=w.substr(0,C+1),C=-1),n[l].t="t",v=l);C>=0&&v<n.length&&(n[v].v=w.substr(0,C+1)+n[v].v)}else if(_!==n.length&&w.indexOf("E")===-1){for(C=w.indexOf(".")-1,l=_;l>=0;--l)if(!(n[l]==null||"n?".indexOf(n[l].t)===-1)){for(u=n[l].v.indexOf(".")>-1&&l===_?n[l].v.indexOf(".")-1:n[l].v.length-1,A=n[l].v.substr(u+1);u>=0;--u)C>=0&&(n[l].v.charAt(u)==="0"||n[l].v.charAt(u)==="#")&&(A=w.charAt(C--)+A);n[l].v=A,n[l].t="t",v=l}for(C>=0&&v<n.length&&(n[v].v=w.substr(0,C+1)+n[v].v),C=w.indexOf(".")+1,l=_;l<n.length;++l)if(!(n[l]==null||"n?(".indexOf(n[l].t)===-1&&l!==_)){for(u=n[l].v.indexOf(".")>-1&&l===_?n[l].v.indexOf(".")+1:0,A=n[l].v.substr(0,u);u<n[l].v.length;++u)C<w.length&&(A+=w.charAt(C++));n[l].v=A,n[l].t="t",v=l}}}for(l=0;l<n.length;++l)n[l]!=null&&"n?".indexOf(n[l].t)>-1&&(F=a>1&&s<0&&l>0&&n[l-1].v==="-"?-s:s,n[l].v=Ra(n[l].t,n[l].v,F),n[l].t="t");var S="";for(l=0;l!==n.length;++l)n[l]!=null&&(S+=n[l].v);return S}var Wf=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Vf(t,s){if(s==null)return!1;var r=parseFloat(s[2]);switch(s[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function RS(t,s){var r=PS(t),a=r.length,n=r[a-1].indexOf("@");if(a<4&&n>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof s!="number")return[4,r.length===4||n>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=n>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=n>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=n>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=s>0?r[0]:s<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var l=r[0].match(Wf),o=r[1].match(Wf);return Vf(s,l)?[a,r[0]]:Vf(s,o)?[a,r[1]]:[a,r[l!=null&&o!=null?2:1]]}return[a,i]}function Br(t,s,r){r==null&&(r={});var a="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?a=r.dateNF:a=t;break;case"number":t==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:Ze)[t],a==null&&(a=r.table&&r.table[Uf[t]]||Ze[Uf[t]]),a==null&&(a=pS[t]||"General");break}if(ud(a,0))return ri(s,r);s instanceof Date&&(s=Yb(s,r.date1904));var n=RS(a,s);if(ud(n[1]))return ri(s,r);if(s===!0)s="TRUE";else if(s===!1)s="FALSE";else if(s===""||s==null)return"";return DS(n[1],s,r,n[0])}function Jn(t,s){if(typeof s!="number"){s=+s||-1;for(var r=0;r<392;++r){if(Ze[r]==null){s<0&&(s=r);continue}if(Ze[r]==t){s=r;break}}s<0&&(s=391)}return Ze[s]=t,s}function nv(){Ze=fS()}var LS={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},iv=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function OS(t){var s=typeof t=="number"?Ze[t]:t;return s=s.replace(iv,"(\\d+)"),new RegExp("^"+s+"$")}function IS(t,s,r){var a=-1,n=-1,i=-1,l=-1,o=-1,c=-1;(s.match(iv)||[]).forEach(function(p,m){var f=parseInt(r[m+1],10);switch(p.toLowerCase().charAt(0)){case"y":a=f;break;case"d":i=f;break;case"h":l=f;break;case"s":c=f;break;case"m":l>=0?o=f:n=f;break}}),c>=0&&o==-1&&n>=0&&(o=n,n=-1);var d=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return l==-1&&o==-1&&c==-1?d:a==-1&&n==-1&&i==-1?u:d+"T"+u}var MS=function(){var t={};t.version="1.2.0";function s(){for(var w=0,_=new Array(256),v=0;v!=256;++v)w=v,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,_[v]=w;return typeof Int32Array<"u"?new Int32Array(_):_}var r=s();function a(w){var _=0,v=0,S=0,R=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(S=0;S!=256;++S)R[S]=w[S];for(S=0;S!=256;++S)for(v=w[S],_=256+S;_<4096;_+=256)v=R[_]=v>>>8^w[v&255];var D=[];for(S=1;S!=16;++S)D[S-1]=typeof Int32Array<"u"?R.subarray(S*256,S*256+256):R.slice(S*256,S*256+256);return D}var n=a(r),i=n[0],l=n[1],o=n[2],c=n[3],d=n[4],u=n[5],p=n[6],m=n[7],f=n[8],h=n[9],x=n[10],g=n[11],j=n[12],b=n[13],N=n[14];function C(w,_){for(var v=_^-1,S=0,R=w.length;S<R;)v=v>>>8^r[(v^w.charCodeAt(S++))&255];return~v}function A(w,_){for(var v=_^-1,S=w.length-15,R=0;R<S;)v=N[w[R++]^v&255]^b[w[R++]^v>>8&255]^j[w[R++]^v>>16&255]^g[w[R++]^v>>>24]^x[w[R++]]^h[w[R++]]^f[w[R++]]^m[w[R++]]^p[w[R++]]^u[w[R++]]^d[w[R++]]^c[w[R++]]^o[w[R++]]^l[w[R++]]^i[w[R++]]^r[w[R++]];for(S+=15;R<S;)v=v>>>8^r[(v^w[R++])&255];return~v}function F(w,_){for(var v=_^-1,S=0,R=w.length,D=0,V=0;S<R;)D=w.charCodeAt(S++),D<128?v=v>>>8^r[(v^D)&255]:D<2048?(v=v>>>8^r[(v^(192|D>>6&31))&255],v=v>>>8^r[(v^(128|D&63))&255]):D>=55296&&D<57344?(D=(D&1023)+64,V=w.charCodeAt(S++)&1023,v=v>>>8^r[(v^(240|D>>8&7))&255],v=v>>>8^r[(v^(128|D>>2&63))&255],v=v>>>8^r[(v^(128|V>>6&15|(D&3)<<4))&255],v=v>>>8^r[(v^(128|V&63))&255]):(v=v>>>8^r[(v^(224|D>>12&15))&255],v=v>>>8^r[(v^(128|D>>6&63))&255],v=v>>>8^r[(v^(128|D&63))&255]);return~v}return t.table=r,t.bstr=C,t.buf=A,t.str=F,t}(),gt=function(){var s={};s.version="1.2.1";function r(M,G){for(var E=M.split("/"),T=G.split("/"),U=0,W=0,Z=Math.min(E.length,T.length);U<Z;++U){if(W=E[U].length-T[U].length)return W;if(E[U]!=T[U])return E[U]<T[U]?-1:1}return E.length-T.length}function a(M){if(M.charAt(M.length-1)=="/")return M.slice(0,-1).indexOf("/")===-1?M:a(M.slice(0,-1));var G=M.lastIndexOf("/");return G===-1?M:M.slice(0,G+1)}function n(M){if(M.charAt(M.length-1)=="/")return n(M.slice(0,-1));var G=M.lastIndexOf("/");return G===-1?M:M.slice(G+1)}function i(M,G){typeof G=="string"&&(G=new Date(G));var E=G.getHours();E=E<<6|G.getMinutes(),E=E<<5|G.getSeconds()>>>1,M.write_shift(2,E);var T=G.getFullYear()-1980;T=T<<4|G.getMonth()+1,T=T<<5|G.getDate(),M.write_shift(2,T)}function l(M){var G=M.read_shift(2)&65535,E=M.read_shift(2)&65535,T=new Date,U=E&31;E>>>=5;var W=E&15;E>>>=4,T.setMilliseconds(0),T.setFullYear(E+1980),T.setMonth(W-1),T.setDate(U);var Z=G&31;G>>>=5;var te=G&63;return G>>>=6,T.setHours(G),T.setMinutes(te),T.setSeconds(Z<<1),T}function o(M){_s(M,0);for(var G={},E=0;M.l<=M.length-4;){var T=M.read_shift(2),U=M.read_shift(2),W=M.l+U,Z={};switch(T){case 21589:E=M.read_shift(1),E&1&&(Z.mtime=M.read_shift(4)),U>5&&(E&2&&(Z.atime=M.read_shift(4)),E&4&&(Z.ctime=M.read_shift(4))),Z.mtime&&(Z.mt=new Date(Z.mtime*1e3));break}M.l=W,G[T]=Z}return G}var c;function d(){return c||(c={})}function u(M,G){if(M[0]==80&&M[1]==75)return me(M,G);if((M[0]|32)==109&&(M[1]|32)==105)return st(M,G);if(M.length<512)throw new Error("CFB file size "+M.length+" < 512");var E=3,T=512,U=0,W=0,Z=0,te=0,le=0,ce=[],ie=M.slice(0,512);_s(ie,0);var ue=p(ie);switch(E=ue[0],E){case 3:T=512;break;case 4:T=4096;break;case 0:if(ue[1]==0)return me(M,G);default:throw new Error("Major Version: Expected 3 or 4 saw "+E)}T!==512&&(ie=M.slice(0,T),_s(ie,28));var Ne=M.slice(0,T);m(ie,E);var Ae=ie.read_shift(4,"i");if(E===3&&Ae!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ae);ie.l+=4,Z=ie.read_shift(4,"i"),ie.l+=4,ie.chk("00100000","Mini Stream Cutoff Size: "),te=ie.read_shift(4,"i"),U=ie.read_shift(4,"i"),le=ie.read_shift(4,"i"),W=ie.read_shift(4,"i");for(var je=-1,Ce=0;Ce<109&&(je=ie.read_shift(4,"i"),!(je<0));++Ce)ce[Ce]=je;var ze=f(M,T);g(le,W,ze,T,ce);var dt=b(ze,Z,ce,T);dt[Z].name="!Directory",U>0&&te!==V&&(dt[te].name="!MiniFAT"),dt[ce[0]].name="!FAT",dt.fat_addrs=ce,dt.ssz=T;var rt={},_t=[],Ps=[],Ke=[];N(Z,dt,ze,_t,U,rt,Ps,te),h(Ps,Ke,_t),_t.shift();var ft={FileIndex:Ps,FullPaths:Ke};return G&&G.raw&&(ft.raw={header:Ne,sectors:ze}),ft}function p(M){if(M[M.l]==80&&M[M.l+1]==75)return[0,0];M.chk(O,"Header Signature: "),M.l+=16;var G=M.read_shift(2,"u");return[M.read_shift(2,"u"),G]}function m(M,G){var E=9;switch(M.l+=2,E=M.read_shift(2)){case 9:if(G!=3)throw new Error("Sector Shift: Expected 9 saw "+E);break;case 12:if(G!=4)throw new Error("Sector Shift: Expected 12 saw "+E);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+E)}M.chk("0600","Mini Sector Shift: "),M.chk("000000000000","Reserved: ")}function f(M,G){for(var E=Math.ceil(M.length/G)-1,T=[],U=1;U<E;++U)T[U-1]=M.slice(U*G,(U+1)*G);return T[E-1]=M.slice(E*G),T}function h(M,G,E){for(var T=0,U=0,W=0,Z=0,te=0,le=E.length,ce=[],ie=[];T<le;++T)ce[T]=ie[T]=T,G[T]=E[T];for(;te<ie.length;++te)T=ie[te],U=M[T].L,W=M[T].R,Z=M[T].C,ce[T]===T&&(U!==-1&&ce[U]!==U&&(ce[T]=ce[U]),W!==-1&&ce[W]!==W&&(ce[T]=ce[W])),Z!==-1&&(ce[Z]=T),U!==-1&&T!=ce[T]&&(ce[U]=ce[T],ie.lastIndexOf(U)<te&&ie.push(U)),W!==-1&&T!=ce[T]&&(ce[W]=ce[T],ie.lastIndexOf(W)<te&&ie.push(W));for(T=1;T<le;++T)ce[T]===T&&(W!==-1&&ce[W]!==W?ce[T]=ce[W]:U!==-1&&ce[U]!==U&&(ce[T]=ce[U]));for(T=1;T<le;++T)if(M[T].type!==0){if(te=T,te!=ce[te])do te=ce[te],G[T]=G[te]+"/"+G[T];while(te!==0&&ce[te]!==-1&&te!=ce[te]);ce[T]=-1}for(G[0]+="/",T=1;T<le;++T)M[T].type!==2&&(G[T]+="/")}function x(M,G,E){for(var T=M.start,U=M.size,W=[],Z=T;E&&U>0&&Z>=0;)W.push(G.slice(Z*D,Z*D+D)),U-=D,Z=In(E,Z*4);return W.length===0?us(0):tn(W).slice(0,M.size)}function g(M,G,E,T,U){var W=V;if(M===V){if(G!==0)throw new Error("DIFAT chain shorter than expected")}else if(M!==-1){var Z=E[M],te=(T>>>2)-1;if(!Z)return;for(var le=0;le<te&&(W=In(Z,le*4))!==V;++le)U.push(W);g(In(Z,T-4),G-1,E,T,U)}}function j(M,G,E,T,U){var W=[],Z=[];U||(U=[]);var te=T-1,le=0,ce=0;for(le=G;le>=0;){U[le]=!0,W[W.length]=le,Z.push(M[le]);var ie=E[Math.floor(le*4/T)];if(ce=le*4&te,T<4+ce)throw new Error("FAT boundary crossed: "+le+" 4 "+T);if(!M[ie])break;le=In(M[ie],ce)}return{nodes:W,data:ep([Z])}}function b(M,G,E,T){var U=M.length,W=[],Z=[],te=[],le=[],ce=T-1,ie=0,ue=0,Ne=0,Ae=0;for(ie=0;ie<U;++ie)if(te=[],Ne=ie+G,Ne>=U&&(Ne-=U),!Z[Ne]){le=[];var je=[];for(ue=Ne;ue>=0;){je[ue]=!0,Z[ue]=!0,te[te.length]=ue,le.push(M[ue]);var Ce=E[Math.floor(ue*4/T)];if(Ae=ue*4&ce,T<4+Ae)throw new Error("FAT boundary crossed: "+ue+" 4 "+T);if(!M[Ce]||(ue=In(M[Ce],Ae),je[ue]))break}W[Ne]={nodes:te,data:ep([le])}}return W}function N(M,G,E,T,U,W,Z,te){for(var le=0,ce=T.length?2:0,ie=G[M].data,ue=0,Ne=0,Ae;ue<ie.length;ue+=128){var je=ie.slice(ue,ue+128);_s(je,64),Ne=je.read_shift(2),Ae=Sm(je,0,Ne-ce),T.push(Ae);var Ce={name:Ae,type:je.read_shift(1),color:je.read_shift(1),L:je.read_shift(4,"i"),R:je.read_shift(4,"i"),C:je.read_shift(4,"i"),clsid:je.read_shift(16),state:je.read_shift(4,"i"),start:0,size:0},ze=je.read_shift(2)+je.read_shift(2)+je.read_shift(2)+je.read_shift(2);ze!==0&&(Ce.ct=C(je,je.l-8));var dt=je.read_shift(2)+je.read_shift(2)+je.read_shift(2)+je.read_shift(2);dt!==0&&(Ce.mt=C(je,je.l-8)),Ce.start=je.read_shift(4,"i"),Ce.size=je.read_shift(4,"i"),Ce.size<0&&Ce.start<0&&(Ce.size=Ce.type=0,Ce.start=V,Ce.name=""),Ce.type===5?(le=Ce.start,U>0&&le!==V&&(G[le].name="!StreamData")):Ce.size>=4096?(Ce.storage="fat",G[Ce.start]===void 0&&(G[Ce.start]=j(E,Ce.start,G.fat_addrs,G.ssz)),G[Ce.start].name=Ce.name,Ce.content=G[Ce.start].data.slice(0,Ce.size)):(Ce.storage="minifat",Ce.size<0?Ce.size=0:le!==V&&Ce.start!==V&&G[le]&&(Ce.content=x(Ce,G[le].data,(G[te]||{}).data))),Ce.content&&_s(Ce.content,0),W[Ae]=Ce,Z.push(Ce)}}function C(M,G){return new Date((pr(M,G+4)/1e7*Math.pow(2,32)+pr(M,G)/1e7-11644473600)*1e3)}function A(M,G){return d(),u(c.readFileSync(M),G)}function F(M,G){var E=G&&G.type;switch(E||ht&&Buffer.isBuffer(M)&&(E="buffer"),E||"base64"){case"file":return A(M,G);case"base64":return u(Xr(Nr(M)),G);case"binary":return u(Xr(M),G)}return u(M,G)}function w(M,G){var E=G||{},T=E.root||"Root Entry";if(M.FullPaths||(M.FullPaths=[]),M.FileIndex||(M.FileIndex=[]),M.FullPaths.length!==M.FileIndex.length)throw new Error("inconsistent CFB structure");M.FullPaths.length===0&&(M.FullPaths[0]=T+"/",M.FileIndex[0]={name:T,type:5}),E.CLSID&&(M.FileIndex[0].clsid=E.CLSID),_(M)}function _(M){var G="Sh33tJ5";if(!gt.find(M,"/"+G)){var E=us(4);E[0]=55,E[1]=E[3]=50,E[2]=54,M.FileIndex.push({name:G,type:2,content:E,size:4,L:69,R:69,C:69}),M.FullPaths.push(M.FullPaths[0]+G),v(M)}}function v(M,G){w(M);for(var E=!1,T=!1,U=M.FullPaths.length-1;U>=0;--U){var W=M.FileIndex[U];switch(W.type){case 0:T?E=!0:(M.FileIndex.pop(),M.FullPaths.pop());break;case 1:case 2:case 5:T=!0,isNaN(W.R*W.L*W.C)&&(E=!0),W.R>-1&&W.L>-1&&W.R==W.L&&(E=!0);break;default:E=!0;break}}if(!(!E&&!G)){var Z=new Date(1987,1,19),te=0,le=Object.create?Object.create(null):{},ce=[];for(U=0;U<M.FullPaths.length;++U)le[M.FullPaths[U]]=!0,M.FileIndex[U].type!==0&&ce.push([M.FullPaths[U],M.FileIndex[U]]);for(U=0;U<ce.length;++U){var ie=a(ce[U][0]);T=le[ie],T||(ce.push([ie,{name:n(ie).replace("/",""),type:1,clsid:z,ct:Z,mt:Z,content:null}]),le[ie]=!0)}for(ce.sort(function(Ae,je){return r(Ae[0],je[0])}),M.FullPaths=[],M.FileIndex=[],U=0;U<ce.length;++U)M.FullPaths[U]=ce[U][0],M.FileIndex[U]=ce[U][1];for(U=0;U<ce.length;++U){var ue=M.FileIndex[U],Ne=M.FullPaths[U];if(ue.name=n(Ne).replace("/",""),ue.L=ue.R=ue.C=-(ue.color=1),ue.size=ue.content?ue.content.length:0,ue.start=0,ue.clsid=ue.clsid||z,U===0)ue.C=ce.length>1?1:-1,ue.size=0,ue.type=5;else if(Ne.slice(-1)=="/"){for(te=U+1;te<ce.length&&a(M.FullPaths[te])!=Ne;++te);for(ue.C=te>=ce.length?-1:te,te=U+1;te<ce.length&&a(M.FullPaths[te])!=a(Ne);++te);ue.R=te>=ce.length?-1:te,ue.type=1}else a(M.FullPaths[U+1]||"")==a(Ne)&&(ue.R=U+1),ue.type=2}}}function S(M,G){var E=G||{};if(E.fileType=="mad")return ut(M,E);switch(v(M),E.fileType){case"zip":return ye(M,E)}var T=function(Ae){for(var je=0,Ce=0,ze=0;ze<Ae.FileIndex.length;++ze){var dt=Ae.FileIndex[ze];if(dt.content){var rt=dt.content.length;rt>0&&(rt<4096?je+=rt+63>>6:Ce+=rt+511>>9)}}for(var _t=Ae.FullPaths.length+3>>2,Ps=je+7>>3,Ke=je+127>>7,ft=Ps+Ce+_t+Ke,pt=ft+127>>7,At=pt<=109?0:Math.ceil((pt-109)/127);ft+pt+At+127>>7>pt;)At=++pt<=109?0:Math.ceil((pt-109)/127);var vt=[1,At,pt,Ke,_t,Ce,je,0];return Ae.FileIndex[0].size=je<<6,vt[7]=(Ae.FileIndex[0].start=vt[0]+vt[1]+vt[2]+vt[3]+vt[4]+vt[5])+(vt[6]+7>>3),vt}(M),U=us(T[7]<<9),W=0,Z=0;{for(W=0;W<8;++W)U.write_shift(1,I[W]);for(W=0;W<8;++W)U.write_shift(2,0);for(U.write_shift(2,62),U.write_shift(2,3),U.write_shift(2,65534),U.write_shift(2,9),U.write_shift(2,6),W=0;W<3;++W)U.write_shift(2,0);for(U.write_shift(4,0),U.write_shift(4,T[2]),U.write_shift(4,T[0]+T[1]+T[2]+T[3]-1),U.write_shift(4,0),U.write_shift(4,4096),U.write_shift(4,T[3]?T[0]+T[1]+T[2]-1:V),U.write_shift(4,T[3]),U.write_shift(-4,T[1]?T[0]-1:V),U.write_shift(4,T[1]),W=0;W<109;++W)U.write_shift(-4,W<T[2]?T[1]+W:-1)}if(T[1])for(Z=0;Z<T[1];++Z){for(;W<236+Z*127;++W)U.write_shift(-4,W<T[2]?T[1]+W:-1);U.write_shift(-4,Z===T[1]-1?V:Z+1)}var te=function(Ae){for(Z+=Ae;W<Z-1;++W)U.write_shift(-4,W+1);Ae&&(++W,U.write_shift(-4,V))};for(Z=W=0,Z+=T[1];W<Z;++W)U.write_shift(-4,Q.DIFSECT);for(Z+=T[2];W<Z;++W)U.write_shift(-4,Q.FATSECT);te(T[3]),te(T[4]);for(var le=0,ce=0,ie=M.FileIndex[0];le<M.FileIndex.length;++le)ie=M.FileIndex[le],ie.content&&(ce=ie.content.length,!(ce<4096)&&(ie.start=Z,te(ce+511>>9)));for(te(T[6]+7>>3);U.l&511;)U.write_shift(-4,Q.ENDOFCHAIN);for(Z=W=0,le=0;le<M.FileIndex.length;++le)ie=M.FileIndex[le],ie.content&&(ce=ie.content.length,!(!ce||ce>=4096)&&(ie.start=Z,te(ce+63>>6)));for(;U.l&511;)U.write_shift(-4,Q.ENDOFCHAIN);for(W=0;W<T[4]<<2;++W){var ue=M.FullPaths[W];if(!ue||ue.length===0){for(le=0;le<17;++le)U.write_shift(4,0);for(le=0;le<3;++le)U.write_shift(4,-1);for(le=0;le<12;++le)U.write_shift(4,0);continue}ie=M.FileIndex[W],W===0&&(ie.start=ie.size?ie.start-1:V);var Ne=W===0&&E.root||ie.name;if(ce=2*(Ne.length+1),U.write_shift(64,Ne,"utf16le"),U.write_shift(2,ce),U.write_shift(1,ie.type),U.write_shift(1,ie.color),U.write_shift(-4,ie.L),U.write_shift(-4,ie.R),U.write_shift(-4,ie.C),ie.clsid)U.write_shift(16,ie.clsid,"hex");else for(le=0;le<4;++le)U.write_shift(4,0);U.write_shift(4,ie.state||0),U.write_shift(4,0),U.write_shift(4,0),U.write_shift(4,0),U.write_shift(4,0),U.write_shift(4,ie.start),U.write_shift(4,ie.size),U.write_shift(4,0)}for(W=1;W<M.FileIndex.length;++W)if(ie=M.FileIndex[W],ie.size>=4096)if(U.l=ie.start+1<<9,ht&&Buffer.isBuffer(ie.content))ie.content.copy(U,U.l,0,ie.size),U.l+=ie.size+511&-512;else{for(le=0;le<ie.size;++le)U.write_shift(1,ie.content[le]);for(;le&511;++le)U.write_shift(1,0)}for(W=1;W<M.FileIndex.length;++W)if(ie=M.FileIndex[W],ie.size>0&&ie.size<4096)if(ht&&Buffer.isBuffer(ie.content))ie.content.copy(U,U.l,0,ie.size),U.l+=ie.size+63&-64;else{for(le=0;le<ie.size;++le)U.write_shift(1,ie.content[le]);for(;le&63;++le)U.write_shift(1,0)}if(ht)U.l=U.length;else for(;U.l<U.length;)U.write_shift(1,0);return U}function R(M,G){var E=M.FullPaths.map(function(le){return le.toUpperCase()}),T=E.map(function(le){var ce=le.split("/");return ce[ce.length-(le.slice(-1)=="/"?2:1)]}),U=!1;G.charCodeAt(0)===47?(U=!0,G=E[0].slice(0,-1)+G):U=G.indexOf("/")!==-1;var W=G.toUpperCase(),Z=U===!0?E.indexOf(W):T.indexOf(W);if(Z!==-1)return M.FileIndex[Z];var te=!W.match(Fl);for(W=W.replace(Zs,""),te&&(W=W.replace(Fl,"!")),Z=0;Z<E.length;++Z)if((te?E[Z].replace(Fl,"!"):E[Z]).replace(Zs,"")==W||(te?T[Z].replace(Fl,"!"):T[Z]).replace(Zs,"")==W)return M.FileIndex[Z];return null}var D=64,V=-2,O="d0cf11e0a1b11ae1",I=[208,207,17,224,161,177,26,225],z="00000000000000000000000000000000",Q={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:V,FREESECT:-1,HEADER_SIGNATURE:O,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:z,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function P(M,G,E){d();var T=S(M,E);c.writeFileSync(G,T)}function k(M){for(var G=new Array(M.length),E=0;E<M.length;++E)G[E]=String.fromCharCode(M[E]);return G.join("")}function X(M,G){var E=S(M,G);switch(G&&G.type||"buffer"){case"file":return d(),c.writeFileSync(G.filename,E),E;case"binary":return typeof E=="string"?E:k(E);case"base64":return Of(typeof E=="string"?E:k(E));case"buffer":if(ht)return Buffer.isBuffer(E)?E:ci(E);case"array":return typeof E=="string"?Xr(E):E}return E}var se;function B(M){try{var G=M.InflateRaw,E=new G;if(E._processChunk(new Uint8Array([3,0]),E._finishFlushFlag),E.bytesRead)se=M;else throw new Error("zlib does not expose bytesRead")}catch(T){console.error("cannot use native zlib: "+(T.message||T))}}function L(M,G){if(!se)return $r(M,G);var E=se.InflateRaw,T=new E,U=T._processChunk(M.slice(M.l),T._finishFlushFlag);return M.l+=T.bytesRead,U}function H(M){return se?se.deflateRawSync(M):Oe(M)}var K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],re=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function q(M){var G=(M<<1|M<<11)&139536|(M<<5|M<<15)&558144;return(G>>16|G>>8|G)&255}for(var ae=typeof Uint8Array<"u",xe=ae?new Uint8Array(256):[],_e=0;_e<256;++_e)xe[_e]=q(_e);function Y(M,G){var E=xe[M&255];return G<=8?E>>>8-G:(E=E<<8|xe[M>>8&255],G<=16?E>>>16-G:(E=E<<8|xe[M>>16&255],E>>>24-G))}function Fe(M,G){var E=G&7,T=G>>>3;return(M[T]|(E<=6?0:M[T+1]<<8))>>>E&3}function Be(M,G){var E=G&7,T=G>>>3;return(M[T]|(E<=5?0:M[T+1]<<8))>>>E&7}function He(M,G){var E=G&7,T=G>>>3;return(M[T]|(E<=4?0:M[T+1]<<8))>>>E&15}function Le(M,G){var E=G&7,T=G>>>3;return(M[T]|(E<=3?0:M[T+1]<<8))>>>E&31}function ve(M,G){var E=G&7,T=G>>>3;return(M[T]|(E<=1?0:M[T+1]<<8))>>>E&127}function et(M,G,E){var T=G&7,U=G>>>3,W=(1<<E)-1,Z=M[U]>>>T;return E<8-T||(Z|=M[U+1]<<8-T,E<16-T)||(Z|=M[U+2]<<16-T,E<24-T)||(Z|=M[U+3]<<24-T),Z&W}function wt(M,G,E){var T=G&7,U=G>>>3;return T<=5?M[U]|=(E&7)<<T:(M[U]|=E<<T&255,M[U+1]=(E&7)>>8-T),G+3}function fe(M,G,E){var T=G&7,U=G>>>3;return E=(E&1)<<T,M[U]|=E,G+1}function ne(M,G,E){var T=G&7,U=G>>>3;return E<<=T,M[U]|=E&255,E>>>=8,M[U+1]=E,G+8}function Ue(M,G,E){var T=G&7,U=G>>>3;return E<<=T,M[U]|=E&255,E>>>=8,M[U+1]=E&255,M[U+2]=E>>>8,G+16}function kt(M,G){var E=M.length,T=2*E>G?2*E:G+5,U=0;if(E>=G)return M;if(ht){var W=If(T);if(M.copy)M.copy(W);else for(;U<M.length;++U)W[U]=M[U];return W}else if(ae){var Z=new Uint8Array(T);if(Z.set)Z.set(M);else for(;U<E;++U)Z[U]=M[U];return Z}return M.length=T,M}function it(M){for(var G=new Array(M),E=0;E<M;++E)G[E]=0;return G}function Ct(M,G,E){var T=1,U=0,W=0,Z=0,te=0,le=M.length,ce=ae?new Uint16Array(32):it(32);for(W=0;W<32;++W)ce[W]=0;for(W=le;W<E;++W)M[W]=0;le=M.length;var ie=ae?new Uint16Array(le):it(le);for(W=0;W<le;++W)ce[U=M[W]]++,T<U&&(T=U),ie[W]=0;for(ce[0]=0,W=1;W<=T;++W)ce[W+16]=te=te+ce[W-1]<<1;for(W=0;W<le;++W)te=M[W],te!=0&&(ie[W]=ce[te+16]++);var ue=0;for(W=0;W<le;++W)if(ue=M[W],ue!=0)for(te=Y(ie[W],T)>>T-ue,Z=(1<<T+4-ue)-1;Z>=0;--Z)G[te|Z<<ue]=ue&15|W<<4;return T}var St=ae?new Uint16Array(512):it(512),lt=ae?new Uint16Array(32):it(32);if(!ae){for(var ot=0;ot<512;++ot)St[ot]=0;for(ot=0;ot<32;++ot)lt[ot]=0}(function(){for(var M=[],G=0;G<32;G++)M.push(5);Ct(M,lt,32);var E=[];for(G=0;G<=143;G++)E.push(8);for(;G<=255;G++)E.push(9);for(;G<=279;G++)E.push(7);for(;G<=287;G++)E.push(8);Ct(E,St,288)})();var pe=function(){for(var G=ae?new Uint8Array(32768):[],E=0,T=0;E<re.length-1;++E)for(;T<re[E+1];++T)G[T]=E;for(;T<32768;++T)G[T]=29;var U=ae?new Uint8Array(259):[];for(E=0,T=0;E<J.length-1;++E)for(;T<J[E+1];++T)U[T]=E;function W(te,le){for(var ce=0;ce<te.length;){var ie=Math.min(65535,te.length-ce),ue=ce+ie==te.length;for(le.write_shift(1,+ue),le.write_shift(2,ie),le.write_shift(2,~ie&65535);ie-- >0;)le[le.l++]=te[ce++]}return le.l}function Z(te,le){for(var ce=0,ie=0,ue=ae?new Uint16Array(32768):[];ie<te.length;){var Ne=Math.min(65535,te.length-ie);if(Ne<10){for(ce=wt(le,ce,+(ie+Ne==te.length)),ce&7&&(ce+=8-(ce&7)),le.l=ce/8|0,le.write_shift(2,Ne),le.write_shift(2,~Ne&65535);Ne-- >0;)le[le.l++]=te[ie++];ce=le.l*8;continue}ce=wt(le,ce,+(ie+Ne==te.length)+2);for(var Ae=0;Ne-- >0;){var je=te[ie];Ae=(Ae<<5^je)&32767;var Ce=-1,ze=0;if((Ce=ue[Ae])&&(Ce|=ie&-32768,Ce>ie&&(Ce-=32768),Ce<ie))for(;te[Ce+ze]==te[ie+ze]&&ze<250;)++ze;if(ze>2){je=U[ze],je<=22?ce=ne(le,ce,xe[je+1]>>1)-1:(ne(le,ce,3),ce+=5,ne(le,ce,xe[je-23]>>5),ce+=3);var dt=je<8?0:je-4>>2;dt>0&&(Ue(le,ce,ze-J[je]),ce+=dt),je=G[ie-Ce],ce=ne(le,ce,xe[je]>>3),ce-=3;var rt=je<4?0:je-2>>1;rt>0&&(Ue(le,ce,ie-Ce-re[je]),ce+=rt);for(var _t=0;_t<ze;++_t)ue[Ae]=ie&32767,Ae=(Ae<<5^te[ie])&32767,++ie;Ne-=ze-1}else je<=143?je=je+48:ce=fe(le,ce,1),ce=ne(le,ce,xe[je]),ue[Ae]=ie&32767,++ie}ce=ne(le,ce,0)-1}return le.l=(ce+7)/8|0,le.l}return function(le,ce){return le.length<8?W(le,ce):Z(le,ce)}}();function Oe(M){var G=us(50+Math.floor(M.length*1.1)),E=pe(M,G);return G.slice(0,E)}var Xe=ae?new Uint16Array(32768):it(32768),Ft=ae?new Uint16Array(32768):it(32768),bt=ae?new Uint16Array(128):it(128),Hs=1,na=1;function ka(M,G){var E=Le(M,G)+257;G+=5;var T=Le(M,G)+1;G+=5;var U=He(M,G)+4;G+=4;for(var W=0,Z=ae?new Uint8Array(19):it(19),te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],le=1,ce=ae?new Uint8Array(8):it(8),ie=ae?new Uint8Array(8):it(8),ue=Z.length,Ne=0;Ne<U;++Ne)Z[K[Ne]]=W=Be(M,G),le<W&&(le=W),ce[W]++,G+=3;var Ae=0;for(ce[0]=0,Ne=1;Ne<=le;++Ne)ie[Ne]=Ae=Ae+ce[Ne-1]<<1;for(Ne=0;Ne<ue;++Ne)(Ae=Z[Ne])!=0&&(te[Ne]=ie[Ae]++);var je=0;for(Ne=0;Ne<ue;++Ne)if(je=Z[Ne],je!=0){Ae=xe[te[Ne]]>>8-je;for(var Ce=(1<<7-je)-1;Ce>=0;--Ce)bt[Ae|Ce<<je]=je&7|Ne<<3}var ze=[];for(le=1;ze.length<E+T;)switch(Ae=bt[ve(M,G)],G+=Ae&7,Ae>>>=3){case 16:for(W=3+Fe(M,G),G+=2,Ae=ze[ze.length-1];W-- >0;)ze.push(Ae);break;case 17:for(W=3+Be(M,G),G+=3;W-- >0;)ze.push(0);break;case 18:for(W=11+ve(M,G),G+=7;W-- >0;)ze.push(0);break;default:ze.push(Ae),le<Ae&&(le=Ae);break}var dt=ze.slice(0,E),rt=ze.slice(E);for(Ne=E;Ne<286;++Ne)dt[Ne]=0;for(Ne=T;Ne<30;++Ne)rt[Ne]=0;return Hs=Ct(dt,Xe,286),na=Ct(rt,Ft,30),G}function Ga(M,G){if(M[0]==3&&!(M[1]&3))return[Nn(G),2];for(var E=0,T=0,U=If(G||1<<18),W=0,Z=U.length>>>0,te=0,le=0;!(T&1);){if(T=Be(M,E),E+=3,T>>>1)T>>1==1?(te=9,le=5):(E=ka(M,E),te=Hs,le=na);else{E&7&&(E+=8-(E&7));var ce=M[E>>>3]|M[(E>>>3)+1]<<8;if(E+=32,ce>0)for(!G&&Z<W+ce&&(U=kt(U,W+ce),Z=U.length);ce-- >0;)U[W++]=M[E>>>3],E+=8;continue}for(;;){!G&&Z<W+32767&&(U=kt(U,W+32767),Z=U.length);var ie=et(M,E,te),ue=T>>>1==1?St[ie]:Xe[ie];if(E+=ue&15,ue>>>=4,!(ue>>>8&255))U[W++]=ue;else{if(ue==256)break;ue-=257;var Ne=ue<8?0:ue-4>>2;Ne>5&&(Ne=0);var Ae=W+J[ue];Ne>0&&(Ae+=et(M,E,Ne),E+=Ne),ie=et(M,E,le),ue=T>>>1==1?lt[ie]:Ft[ie],E+=ue&15,ue>>>=4;var je=ue<4?0:ue-2>>1,Ce=re[ue];for(je>0&&(Ce+=et(M,E,je),E+=je),!G&&Z<Ae&&(U=kt(U,Ae+100),Z=U.length);W<Ae;)U[W]=U[W-Ce],++W}}}return G?[U,E+7>>>3]:[U.slice(0,W),E+7>>>3]}function $r(M,G){var E=M.slice(M.l||0),T=Ga(E,G);return M.l+=T[1],T[0]}function he(M,G){if(M)typeof console<"u"&&console.error(G);else throw new Error(G)}function me(M,G){var E=M;_s(E,0);var T=[],U=[],W={FileIndex:T,FullPaths:U};w(W,{root:G.root});for(var Z=E.length-4;(E[Z]!=80||E[Z+1]!=75||E[Z+2]!=5||E[Z+3]!=6)&&Z>=0;)--Z;E.l=Z+4,E.l+=4;var te=E.read_shift(2);E.l+=6;var le=E.read_shift(4);for(E.l=le,Z=0;Z<te;++Z){E.l+=20;var ce=E.read_shift(4),ie=E.read_shift(4),ue=E.read_shift(2),Ne=E.read_shift(2),Ae=E.read_shift(2);E.l+=8;var je=E.read_shift(4),Ce=o(E.slice(E.l+ue,E.l+ue+Ne));E.l+=ue+Ne+Ae;var ze=E.l;E.l=je+4,be(E,ce,ie,W,Ce),E.l=ze}return W}function be(M,G,E,T,U){M.l+=2;var W=M.read_shift(2),Z=M.read_shift(2),te=l(M);if(W&8257)throw new Error("Unsupported ZIP encryption");for(var le=M.read_shift(4),ce=M.read_shift(4),ie=M.read_shift(4),ue=M.read_shift(2),Ne=M.read_shift(2),Ae="",je=0;je<ue;++je)Ae+=String.fromCharCode(M[M.l++]);if(Ne){var Ce=o(M.slice(M.l,M.l+Ne));(Ce[21589]||{}).mt&&(te=Ce[21589].mt),((U||{})[21589]||{}).mt&&(te=U[21589].mt)}M.l+=Ne;var ze=M.slice(M.l,M.l+ce);switch(Z){case 8:ze=L(M,ie);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Z)}var dt=!1;W&8&&(le=M.read_shift(4),le==134695760&&(le=M.read_shift(4),dt=!0),ce=M.read_shift(4),ie=M.read_shift(4)),ce!=G&&he(dt,"Bad compressed size: "+G+" != "+ce),ie!=E&&he(dt,"Bad uncompressed size: "+E+" != "+ie),oe(T,Ae,ze,{unsafe:!0,mt:te})}function ye(M,G){var E=G||{},T=[],U=[],W=us(1),Z=E.compression?8:0,te=0,le=0,ce=0,ie=0,ue=0,Ne=M.FullPaths[0],Ae=Ne,je=M.FileIndex[0],Ce=[],ze=0;for(le=1;le<M.FullPaths.length;++le)if(Ae=M.FullPaths[le].slice(Ne.length),je=M.FileIndex[le],!(!je.size||!je.content||Ae=="Sh33tJ5")){var dt=ie,rt=us(Ae.length);for(ce=0;ce<Ae.length;++ce)rt.write_shift(1,Ae.charCodeAt(ce)&127);rt=rt.slice(0,rt.l),Ce[ue]=MS.buf(je.content,0);var _t=je.content;Z==8&&(_t=H(_t)),W=us(30),W.write_shift(4,67324752),W.write_shift(2,20),W.write_shift(2,te),W.write_shift(2,Z),je.mt?i(W,je.mt):W.write_shift(4,0),W.write_shift(-4,Ce[ue]),W.write_shift(4,_t.length),W.write_shift(4,je.content.length),W.write_shift(2,rt.length),W.write_shift(2,0),ie+=W.length,T.push(W),ie+=rt.length,T.push(rt),ie+=_t.length,T.push(_t),W=us(46),W.write_shift(4,33639248),W.write_shift(2,0),W.write_shift(2,20),W.write_shift(2,te),W.write_shift(2,Z),W.write_shift(4,0),W.write_shift(-4,Ce[ue]),W.write_shift(4,_t.length),W.write_shift(4,je.content.length),W.write_shift(2,rt.length),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(4,0),W.write_shift(4,dt),ze+=W.l,U.push(W),ze+=rt.length,U.push(rt),++ue}return W=us(22),W.write_shift(4,101010256),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(2,ue),W.write_shift(2,ue),W.write_shift(4,ze),W.write_shift(4,ie),W.write_shift(2,0),tn([tn(T),tn(U),W])}var Pe={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Re(M,G){if(M.ctype)return M.ctype;var E=M.name||"",T=E.match(/\.([^\.]+)$/);return T&&Pe[T[1]]||G&&(T=(E=G).match(/[\.\\]([^\.\\])+$/),T&&Pe[T[1]])?Pe[T[1]]:"application/octet-stream"}function $e(M){for(var G=Of(M),E=[],T=0;T<G.length;T+=76)E.push(G.slice(T,T+76));return E.join(`\r
`)+`\r
`}function Te(M){var G=M.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ce){var ie=ce.charCodeAt(0).toString(16).toUpperCase();return"="+(ie.length==1?"0"+ie:ie)});G=G.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),G.charAt(0)==`
`&&(G="=0D"+G.slice(1)),G=G.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var E=[],T=G.split(`\r
`),U=0;U<T.length;++U){var W=T[U];if(W.length==0){E.push("");continue}for(var Z=0;Z<W.length;){var te=76,le=W.slice(Z,Z+te);le.charAt(te-1)=="="?te--:le.charAt(te-2)=="="?te-=2:le.charAt(te-3)=="="&&(te-=3),le=W.slice(Z,Z+te),Z+=te,Z<W.length&&(le+="="),E.push(le)}}return E.join(`\r
`)}function we(M){for(var G=[],E=0;E<M.length;++E){for(var T=M[E];E<=M.length&&T.charAt(T.length-1)=="=";)T=T.slice(0,T.length-1)+M[++E];G.push(T)}for(var U=0;U<G.length;++U)G[U]=G[U].replace(/[=][0-9A-Fa-f]{2}/g,function(W){return String.fromCharCode(parseInt(W.slice(1),16))});return Xr(G.join(`\r
`))}function Ge(M,G,E){for(var T="",U="",W="",Z,te=0;te<10;++te){var le=G[te];if(!le||le.match(/^\s*$/))break;var ce=le.match(/^(.*?):\s*([^\s].*)$/);if(ce)switch(ce[1].toLowerCase()){case"content-location":T=ce[2].trim();break;case"content-type":W=ce[2].trim();break;case"content-transfer-encoding":U=ce[2].trim();break}}switch(++te,U.toLowerCase()){case"base64":Z=Xr(Nr(G.slice(te).join("")));break;case"quoted-printable":Z=we(G.slice(te));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+U)}var ie=oe(M,T.slice(E.length),Z,{unsafe:!0});W&&(ie.ctype=W)}function st(M,G){if(k(M.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var E=G&&G.root||"",T=(ht&&Buffer.isBuffer(M)?M.toString("binary"):k(M)).split(`\r
`),U=0,W="";for(U=0;U<T.length;++U)if(W=T[U],!!/^Content-Location:/i.test(W)&&(W=W.slice(W.indexOf("file")),E||(E=W.slice(0,W.lastIndexOf("/")+1)),W.slice(0,E.length)!=E))for(;E.length>0&&(E=E.slice(0,E.length-1),E=E.slice(0,E.lastIndexOf("/")+1),W.slice(0,E.length)!=E););var Z=(T[1]||"").match(/boundary="(.*?)"/);if(!Z)throw new Error("MAD cannot find boundary");var te="--"+(Z[1]||""),le=[],ce=[],ie={FileIndex:le,FullPaths:ce};w(ie);var ue,Ne=0;for(U=0;U<T.length;++U){var Ae=T[U];Ae!==te&&Ae!==te+"--"||(Ne++&&Ge(ie,T.slice(ue,U),E),ue=U)}return ie}function ut(M,G){var E=G||{},T=E.boundary||"SheetJS";T="------="+T;for(var U=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+T.slice(2)+'"',"","",""],W=M.FullPaths[0],Z=W,te=M.FileIndex[0],le=1;le<M.FullPaths.length;++le)if(Z=M.FullPaths[le].slice(W.length),te=M.FileIndex[le],!(!te.size||!te.content||Z=="Sh33tJ5")){Z=Z.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(ze){return"_x"+ze.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(ze){return"_u"+ze.charCodeAt(0).toString(16)+"_"});for(var ce=te.content,ie=ht&&Buffer.isBuffer(ce)?ce.toString("binary"):k(ce),ue=0,Ne=Math.min(1024,ie.length),Ae=0,je=0;je<=Ne;++je)(Ae=ie.charCodeAt(je))>=32&&Ae<128&&++ue;var Ce=ue>=Ne*4/5;U.push(T),U.push("Content-Location: "+(E.root||"file:///C:/SheetJS/")+Z),U.push("Content-Transfer-Encoding: "+(Ce?"quoted-printable":"base64")),U.push("Content-Type: "+Re(te,Z)),U.push(""),U.push(Ce?Te(ie):$e(ie))}return U.push(T+`--\r
`),U.join(`\r
`)}function ee(M){var G={};return w(G,M),G}function oe(M,G,E,T){var U=T&&T.unsafe;U||w(M);var W=!U&&gt.find(M,G);if(!W){var Z=M.FullPaths[0];G.slice(0,Z.length)==Z?Z=G:(Z.slice(-1)!="/"&&(Z+="/"),Z=(Z+G).replace("//","/")),W={name:n(G),type:2},M.FileIndex.push(W),M.FullPaths.push(Z),U||gt.utils.cfb_gc(M)}return W.content=E,W.size=E?E.length:0,T&&(T.CLSID&&(W.clsid=T.CLSID),T.mt&&(W.mt=T.mt),T.ct&&(W.ct=T.ct)),W}function de(M,G){w(M);var E=gt.find(M,G);if(E){for(var T=0;T<M.FileIndex.length;++T)if(M.FileIndex[T]==E)return M.FileIndex.splice(T,1),M.FullPaths.splice(T,1),!0}return!1}function ge(M,G,E){w(M);var T=gt.find(M,G);if(T){for(var U=0;U<M.FileIndex.length;++U)if(M.FileIndex[U]==T)return M.FileIndex[U].name=n(E),M.FullPaths[U]=E,!0}return!1}function Ee(M){v(M,!0)}return s.find=R,s.read=F,s.parse=u,s.write=X,s.writeFile=P,s.utils={cfb_new:ee,cfb_add:oe,cfb_del:de,cfb_mov:ge,cfb_gc:Ee,ReadShift:Wl,CheckField:Tv,prep_blob:_s,bconcat:tn,use_zlib:B,_deflateRaw:Oe,_inflateRaw:$r,consts:Q},s}();function BS(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var s=File(t);s.open("r"),s.encoding="binary";var r=s.read();return s.close(),r}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+t)}function ya(t){for(var s=Object.keys(t),r=[],a=0;a<s.length;++a)Object.prototype.hasOwnProperty.call(t,s[a])&&r.push(s[a]);return r}function jm(t){for(var s=[],r=ya(t),a=0;a!==r.length;++a)s[t[r[a]]]=r[a];return s}var md=new Date(1899,11,30,0,0,0);function er(t,s){var r=t.getTime(),a=md.getTime()+(t.getTimezoneOffset()-md.getTimezoneOffset())*6e4;return(r-a)/(24*60*60*1e3)}var lv=new Date,US=md.getTime()+(lv.getTimezoneOffset()-md.getTimezoneOffset())*6e4,Hf=lv.getTimezoneOffset();function Wd(t){var s=new Date;return s.setTime(t*24*60*60*1e3+US),s.getTimezoneOffset()!==Hf&&s.setTime(s.getTime()+(s.getTimezoneOffset()-Hf)*6e4),s}function $S(t){var s=0,r=0,a=!1,n=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!n)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var i=1;i!=n.length;++i)if(n[i]){switch(r=1,i>3&&(a=!0),n[i].slice(n[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+n[i].slice(n[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(a)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}s+=r*parseInt(n[i],10)}return s}var Gf=new Date("2017-02-19T19:06:09.000Z"),ov=isNaN(Gf.getFullYear())?new Date("2/19/17"):Gf,zS=ov.getFullYear()==2017;function ks(t,s){var r=new Date(t);if(zS)return s>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):s<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(ov.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return t.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var n=t.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);return t.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function ai(t,s){if(ht&&Buffer.isBuffer(t)){if(s){if(t[0]==255&&t[1]==254)return Pl(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Pl(Jb(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(s){if(t[0]==255&&t[1]==254)return Pl(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Pl(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var a=[],n=0;n!=t.length;++n)a.push(String.fromCharCode(t[n]));return a.join("")}function Es(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=Es(t[r]));return s}function Jt(t,s){for(var r="";r.length<s;)r+=t;return r}function ra(t){var s=Number(t);if(!isNaN(s))return isFinite(s)?s:NaN;if(!/\d/.test(t))return s;var r=1,a=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(s=Number(a))||(a=a.replace(/[(](.*)[)]/,function(n,i){return r=-r,i}),!isNaN(s=Number(a)))?s/r:s}var WS=["january","february","march","april","may","june","july","august","september","october","november","december"];function Qi(t){var s=new Date(t),r=new Date(NaN),a=s.getYear(),n=s.getMonth(),i=s.getDate();if(isNaN(i))return r;var l=t.toLowerCase();if(l.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(l=l.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),l.length>3&&WS.indexOf(l)==-1)return r}else if(l.match(/[a-z]/))return r;return a<0||a>8099?r:(n>0||i>1)&&a!=101?s:t.match(/[^-0-9:,\/\\]/)?r:s}var VS=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,a,n){if(t||typeof a=="string")return r.split(a);for(var i=r.split(a),l=[i[0]],o=1;o<i.length;++o)l.push(n),l.push(i[o]);return l}}();function cv(t){return t?t.content&&t.type?ai(t.content,!0):t.data?El(t.data):t.asNodeBuffer&&ht?El(t.asNodeBuffer().toString("binary")):t.asBinary?El(t.asBinary()):t._data&&t._data.getContent?El(ai(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function dv(t){if(!t)return null;if(t.data)return Rf(t.data);if(t.asNodeBuffer&&ht)return t.asNodeBuffer();if(t._data&&t._data.getContent){var s=t._data.getContent();return typeof s=="string"?Rf(s):Array.prototype.slice.call(s)}return t.content&&t.type?t.content:null}function HS(t){return t&&t.name.slice(-4)===".bin"?dv(t):cv(t)}function Er(t,s){for(var r=t.FullPaths||ya(t.files),a=s.toLowerCase().replace(/[\/]/g,"\\"),n=a.replace(/\\/g,"/"),i=0;i<r.length;++i){var l=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==l||n==l)return t.files?t.files[r[i]]:t.FileIndex[i]}return null}function Nm(t,s){var r=Er(t,s);if(r==null)throw new Error("Cannot find file "+s+" in zip");return r}function as(t,s,r){if(!r)return HS(Nm(t,s));if(!s)return null;try{return as(t,s)}catch{return null}}function gr(t,s,r){if(!r)return cv(Nm(t,s));if(!s)return null;try{return gr(t,s)}catch{return null}}function GS(t,s,r){return dv(Nm(t,s))}function qf(t){for(var s=t.FullPaths||ya(t.files),r=[],a=0;a<s.length;++a)s[a].slice(-1)!="/"&&r.push(s[a].replace(/^Root Entry[\/]/,""));return r.sort()}function qS(t,s,r){if(t.FullPaths){if(typeof r=="string"){var a;return ht?a=ci(r):a=xS(r),gt.utils.cfb_add(t,s,a)}gt.utils.cfb_add(t,s,r)}else t.file(s,r)}function uv(t,s){switch(s.type){case"base64":return gt.read(t,{type:"base64"});case"binary":return gt.read(t,{type:"binary"});case"buffer":case"array":return gt.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+s.type)}function Al(t,s){if(t.charAt(0)=="/")return t.slice(1);var r=s.split("/");s.slice(-1)!="/"&&r.pop();for(var a=t.split("/");a.length!==0;){var n=a.shift();n===".."?r.pop():n!=="."&&r.push(n)}return r.join("/")}var xv=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,JS=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,Jf=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,KS=/<[^>]*>/g,Vs=xv.match(Jf)?Jf:KS,YS=/<\w*:/,XS=/<(\/?)\w+:/;function qe(t,s,r){for(var a={},n=0,i=0;n!==t.length&&!((i=t.charCodeAt(n))===32||i===10||i===13);++n);if(s||(a[0]=t.slice(0,n)),n===t.length)return a;var l=t.match(JS),o=0,c="",d=0,u="",p="",m=1;if(l)for(d=0;d!=l.length;++d){for(p=l[d],i=0;i!=p.length&&p.charCodeAt(i)!==61;++i);for(u=p.slice(0,i).trim();p.charCodeAt(i+1)==32;)++i;for(m=(n=p.charCodeAt(i+1))==34||n==39?1:0,c=p.slice(i+1+m,p.length-m),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),a[u]=c,a[u.toLowerCase()]=c;else{var f=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(a[f]&&u.slice(o-3,o)=="ext")continue;a[f]=c,a[f.toLowerCase()]=c}}return a}function Na(t){return t.replace(XS,"<$1")}var mv={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},QS=jm(mv),Nt=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,s=/_x([\da-fA-F]{4})_/ig;return function r(a){var n=a+"",i=n.indexOf("<![CDATA[");if(i==-1)return n.replace(t,function(o,c){return mv[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(s,function(o,c){return String.fromCharCode(parseInt(c,16))});var l=n.indexOf("]]>");return r(n.slice(0,i))+n.slice(i+9,l)+r(n.slice(l+3))}}(),ZS=/[&<>'"]/g,e6=/[\u0000-\u001f]/g;function wm(t){var s=t+"";return s.replace(ZS,function(r){return QS[r]}).replace(/\n/g,"<br/>").replace(e6,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var Kf=function(){var t=/&#(\d+);/g;function s(r,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(t,s)}}();function Ut(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function T0(t){for(var s="",r=0,a=0,n=0,i=0,l=0,o=0;r<t.length;){if(a=t.charCodeAt(r++),a<128){s+=String.fromCharCode(a);continue}if(n=t.charCodeAt(r++),a>191&&a<224){l=(a&31)<<6,l|=n&63,s+=String.fromCharCode(l);continue}if(i=t.charCodeAt(r++),a<240){s+=String.fromCharCode((a&15)<<12|(n&63)<<6|i&63);continue}l=t.charCodeAt(r++),o=((a&7)<<18|(n&63)<<12|(i&63)<<6|l&63)-65536,s+=String.fromCharCode(55296+(o>>>10&1023)),s+=String.fromCharCode(56320+(o&1023))}return s}function Yf(t){var s=Nn(2*t.length),r,a,n=1,i=0,l=0,o;for(a=0;a<t.length;a+=n)n=1,(o=t.charCodeAt(a))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(a+1)&63),n=2):o<240?(r=(o&15)*4096+(t.charCodeAt(a+1)&63)*64+(t.charCodeAt(a+2)&63),n=3):(n=4,r=(o&7)*262144+(t.charCodeAt(a+1)&63)*4096+(t.charCodeAt(a+2)&63)*64+(t.charCodeAt(a+3)&63),r-=65536,l=55296+(r>>>10&1023),r=56320+(r&1023)),l!==0&&(s[i++]=l&255,s[i++]=l>>>8,l=0),s[i++]=r%256,s[i++]=r>>>8;return s.slice(0,i).toString("ucs2")}function Xf(t){return ci(t,"binary").toString("utf8")}var cc="foo bar baz",Lt=ht&&(Xf(cc)==T0(cc)&&Xf||Yf(cc)==T0(cc)&&Yf)||T0,Pl=ht?function(t){return ci(t,"utf8").toString("binary")}:function(t){for(var s=[],r=0,a=0,n=0;r<t.length;)switch(a=t.charCodeAt(r++),!0){case a<128:s.push(String.fromCharCode(a));break;case a<2048:s.push(String.fromCharCode(192+(a>>6))),s.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,n=t.charCodeAt(r++)-56320+(a<<10),s.push(String.fromCharCode(240+(n>>18&7))),s.push(String.fromCharCode(144+(n>>12&63))),s.push(String.fromCharCode(128+(n>>6&63))),s.push(String.fromCharCode(128+(n&63)));break;default:s.push(String.fromCharCode(224+(a>>12))),s.push(String.fromCharCode(128+(a>>6&63))),s.push(String.fromCharCode(128+(a&63)))}return s.join("")},ko=function(){var t={};return function(r,a){var n=r+"|"+(a||"");return t[n]?t[n]:t[n]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",a||"")}}(),hv=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(s){return[new RegExp("&"+s[0]+";","ig"),s[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),n=0;n<t.length;++n)a=a.replace(t[n][0],t[n][1]);return a}}(),t6=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),s6=/<\/?(?:vt:)?variant>/g,r6=/<(?:vt:)([^>]*)>([\s\S]*)</;function Qf(t,s){var r=qe(t),a=t.match(t6(r.baseType))||[],n=[];if(a.length!=r.size){if(s.WTF)throw new Error("unexpected vector length "+a.length+" != "+r.size);return n}return a.forEach(function(i){var l=i.replace(s6,"").match(r6);l&&n.push({v:Lt(l[2]),t:l[1]})}),n}var a6=/(^\s|\s$|\n)/;function n6(t){return ya(t).map(function(s){return" "+s+'="'+t[s]+'"'}).join("")}function i6(t,s,r){return"<"+t+(r!=null?n6(r):"")+(s!=null?(s.match(a6)?' xml:space="preserve"':"")+">"+s+"</"+t:"/")+">"}function km(t){if(ht&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Lt(di(ym(t)));throw new Error("Bad input format: expected Buffer or string")}var So=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,l6={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},o6=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function c6(t,s){for(var r=1-2*(t[s+7]>>>7),a=((t[s+7]&127)<<4)+(t[s+6]>>>4&15),n=t[s+6]&15,i=5;i>=0;--i)n=n*256+t[s+i];return a==2047?n==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,n+=Math.pow(2,52)),r*Math.pow(2,a-52)*n)}function d6(t,s,r){var a=(s<0||1/s==-1/0?1:0)<<7,n=0,i=0,l=a?-s:s;isFinite(l)?l==0?n=i=0:(n=Math.floor(Math.log(l)/Math.LN2),i=l*Math.pow(2,52-n),n<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?n=-1022:(i-=Math.pow(2,52),n+=1023)):(n=2047,i=isNaN(s)?26985:0);for(var o=0;o<=5;++o,i/=256)t[r+o]=i&255;t[r+6]=(n&15)<<4|i&15,t[r+7]=n>>4|a}var Zf=function(t){for(var s=[],r=10240,a=0;a<t[0].length;++a)if(t[0][a])for(var n=0,i=t[0][a].length;n<i;n+=r)s.push.apply(s,t[0][a].slice(n,n+r));return s},ep=ht?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(s){return Buffer.isBuffer(s)?s:ci(s)})):Zf(t)}:Zf,tp=function(t,s,r){for(var a=[],n=s;n<r;n+=2)a.push(String.fromCharCode(Fa(t,n)));return a.join("").replace(Zs,"")},Sm=ht?function(t,s,r){return Buffer.isBuffer(t)?t.toString("utf16le",s,r).replace(Zs,""):tp(t,s,r)}:tp,sp=function(t,s,r){for(var a=[],n=s;n<s+r;++n)a.push(("0"+t[n].toString(16)).slice(-2));return a.join("")},fv=ht?function(t,s,r){return Buffer.isBuffer(t)?t.toString("hex",s,s+r):sp(t,s,r)}:sp,rp=function(t,s,r){for(var a=[],n=s;n<r;n++)a.push(String.fromCharCode(yi(t,n)));return a.join("")},Oo=ht?function(s,r,a){return Buffer.isBuffer(s)?s.toString("utf8",r,a):rp(s,r,a)}:rp,pv=function(t,s){var r=pr(t,s);return r>0?Oo(t,s+4,s+4+r-1):""},gv=pv,yv=function(t,s){var r=pr(t,s);return r>0?Oo(t,s+4,s+4+r-1):""},bv=yv,vv=function(t,s){var r=2*pr(t,s);return r>0?Oo(t,s+4,s+4+r-1):""},jv=vv,Nv=function(s,r){var a=pr(s,r);return a>0?Sm(s,r+4,r+4+a):""},wv=Nv,kv=function(t,s){var r=pr(t,s);return r>0?Oo(t,s+4,s+4+r):""},Sv=kv,Cv=function(t,s){return c6(t,s)},hd=Cv,_v=function(s){return Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array};ht&&(gv=function(s,r){if(!Buffer.isBuffer(s))return pv(s,r);var a=s.readUInt32LE(r);return a>0?s.toString("utf8",r+4,r+4+a-1):""},bv=function(s,r){if(!Buffer.isBuffer(s))return yv(s,r);var a=s.readUInt32LE(r);return a>0?s.toString("utf8",r+4,r+4+a-1):""},jv=function(s,r){if(!Buffer.isBuffer(s))return vv(s,r);var a=2*s.readUInt32LE(r);return s.toString("utf16le",r+4,r+4+a-1)},wv=function(s,r){if(!Buffer.isBuffer(s))return Nv(s,r);var a=s.readUInt32LE(r);return s.toString("utf16le",r+4,r+4+a)},Sv=function(s,r){if(!Buffer.isBuffer(s))return kv(s,r);var a=s.readUInt32LE(r);return s.toString("utf8",r+4,r+4+a)},hd=function(s,r){return Buffer.isBuffer(s)?s.readDoubleLE(r):Cv(s,r)},_v=function(s){return Buffer.isBuffer(s)||Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array});var yi=function(t,s){return t[s]},Fa=function(t,s){return t[s+1]*256+t[s]},u6=function(t,s){var r=t[s+1]*256+t[s];return r<32768?r:(65535-r+1)*-1},pr=function(t,s){return t[s+3]*(1<<24)+(t[s+2]<<16)+(t[s+1]<<8)+t[s]},In=function(t,s){return t[s+3]<<24|t[s+2]<<16|t[s+1]<<8|t[s]},x6=function(t,s){return t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3]};function Wl(t,s){var r="",a,n,i=[],l,o,c,d;switch(s){case"dbcs":if(d=this.l,ht&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(Fa(this,d)),d+=2;t*=2;break;case"utf8":r=Oo(this,this.l,this.l+t);break;case"utf16le":t*=2,r=Sm(this,this.l,this.l+t);break;case"wstr":return Wl.call(this,t,"dbcs");case"lpstr-ansi":r=gv(this,this.l),t=4+pr(this,this.l);break;case"lpstr-cp":r=bv(this,this.l),t=4+pr(this,this.l);break;case"lpwstr":r=jv(this,this.l),t=4+2*pr(this,this.l);break;case"lpp4":t=4+pr(this,this.l),r=wv(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+pr(this,this.l),r=Sv(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(l=yi(this,this.l+t++))!==0;)i.push(oc(l));r=i.join("");break;case"_wstr":for(t=0,r="";(l=Fa(this,this.l+t))!==0;)i.push(oc(l)),t+=2;t+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return l=yi(this,d),this.l=d+1,o=Wl.call(this,t-c,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(oc(Fa(this,d))),d+=2}r=i.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return l=yi(this,d),this.l=d+1,o=Wl.call(this,t-c,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(oc(yi(this,d))),d+=1}r=i.join("");break;default:switch(t){case 1:return a=yi(this,this.l),this.l++,a;case 2:return a=(s==="i"?u6:Fa)(this,this.l),this.l+=2,a;case 4:case-4:return s==="i"||!(this[this.l+3]&128)?(a=(t>0?In:x6)(this,this.l),this.l+=4,a):(n=pr(this,this.l),this.l+=4,n);case 8:case-8:if(s==="f")return t==8?n=hd(this,this.l):n=hd([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;t=8;case 16:r=fv(this,this.l,t);break}}return this.l+=t,r}var m6=function(t,s,r){t[r]=s&255,t[r+1]=s>>>8&255,t[r+2]=s>>>16&255,t[r+3]=s>>>24&255},h6=function(t,s,r){t[r]=s&255,t[r+1]=s>>8&255,t[r+2]=s>>16&255,t[r+3]=s>>24&255},f6=function(t,s,r){t[r]=s&255,t[r+1]=s>>>8&255};function p6(t,s,r){var a=0,n=0;if(r==="dbcs"){for(n=0;n!=s.length;++n)f6(this,s.charCodeAt(n),this.l+2*n);a=2*s.length}else if(r==="sbcs"){for(s=s.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=s.length;++n)this[this.l+n]=s.charCodeAt(n)&255;a=s.length}else if(r==="hex"){for(;n<t;++n)this[this.l++]=parseInt(s.slice(2*n,2*n+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+t,this.length);for(n=0;n<Math.min(s.length,t);++n){var l=s.charCodeAt(n);this[this.l++]=l&255,this[this.l++]=l>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(t){case 1:a=1,this[this.l]=s&255;break;case 2:a=2,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255;break;case 3:a=3,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255,s>>>=8,this[this.l+2]=s&255;break;case 4:a=4,m6(this,s,this.l);break;case 8:if(a=8,r==="f"){d6(this,s,this.l);break}case 16:break;case-4:a=4,h6(this,s,this.l);break}return this.l+=a,this}function Tv(t,s){var r=fv(this,this.l,t.length>>1);if(r!==t)throw new Error(s+"Expected "+t+" saw "+r);this.l+=t.length>>1}function _s(t,s){t.l=s,t.read_shift=Wl,t.chk=Tv,t.write_shift=p6}function Ws(t,s){t.l+=s}function us(t){var s=Nn(t);return _s(s,0),s}function Ha(t,s,r){if(t){var a,n,i;_s(t,t.l||0);for(var l=t.length,o=0,c=0;t.l<l;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var d=vd[o]||vd[65535];for(a=t.read_shift(1),i=a&127,n=1;n<4&&a&128;++n)i+=((a=t.read_shift(1))&127)<<7*n;c=t.l+i;var u=d.f&&d.f(t,i,r);if(t.l=c,s(u,d,o))return}}}function Yu(){var t=[],s=ht?256:2048,r=function(d){var u=us(d);return _s(u,0),u},a=r(s),n=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&t.push(a),a=null)},i=function(d){return a&&d<a.length-a.l?a:(n(),a=r(Math.max(d+1,s)))},l=function(){return n(),tn(t)},o=function(d){n(),a=d,a.l==null&&(a.l=a.length),i(s)};return{next:i,push:o,end:l,_bufs:t}}function Vl(t,s,r){var a=Es(t);if(s.s?(a.cRel&&(a.c+=s.s.c),a.rRel&&(a.r+=s.s.r)):(a.cRel&&(a.c+=s.c),a.rRel&&(a.r+=s.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function ap(t,s,r){var a=Es(t);return a.s=Vl(a.s,s.s,r),a.e=Vl(a.e,s.s,r),a}function Hl(t,s){if(t.cRel&&t.c<0)for(t=Es(t);t.c<0;)t.c+=s>8?16384:256;if(t.rRel&&t.r<0)for(t=Es(t);t.r<0;)t.r+=s>8?1048576:s>5?65536:16384;var r=Ye(t);return!t.cRel&&t.cRel!=null&&(r=b6(r)),!t.rRel&&t.rRel!=null&&(r=g6(r)),r}function E0(t,s){return t.s.r==0&&!t.s.rRel&&t.e.r==(s.biff>=12?1048575:s.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+ps(t.s.c)+":"+(t.e.cRel?"":"$")+ps(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(s.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Fs(t.s.r)+":"+(t.e.rRel?"":"$")+Fs(t.e.r):Hl(t.s,s.biff)+":"+Hl(t.e,s.biff)}function Cm(t){return parseInt(y6(t),10)-1}function Fs(t){return""+(t+1)}function g6(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function y6(t){return t.replace(/\$(\d+)$/,"$1")}function _m(t){for(var s=v6(t),r=0,a=0;a!==s.length;++a)r=26*r+s.charCodeAt(a)-64;return r-1}function ps(t){if(t<0)throw new Error("invalid column "+t);var s="";for(++t;t;t=Math.floor((t-1)/26))s=String.fromCharCode((t-1)%26+65)+s;return s}function b6(t){return t.replace(/^([A-Z])/,"$$$1")}function v6(t){return t.replace(/^\$([A-Z])/,"$1")}function j6(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ys(t){for(var s=0,r=0,a=0;a<t.length;++a){var n=t.charCodeAt(a);n>=48&&n<=57?s=10*s+(n-48):n>=65&&n<=90&&(r=26*r+(n-64))}return{c:r-1,r:s-1}}function Ye(t){for(var s=t.c+1,r="";s;s=(s-1)/26|0)r=String.fromCharCode((s-1)%26+65)+r;return r+(t.r+1)}function ol(t){var s=t.indexOf(":");return s==-1?{s:Ys(t),e:Ys(t)}:{s:Ys(t.slice(0,s)),e:Ys(t.slice(s+1))}}function yt(t,s){return typeof s>"u"||typeof s=="number"?yt(t.s,t.e):(typeof t!="string"&&(t=Ye(t)),typeof s!="string"&&(s=Ye(s)),t==s?t:t+":"+s)}function Kt(t){var s={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,n=0,i=t.length;for(r=0;a<i&&!((n=t.charCodeAt(a)-64)<1||n>26);++a)r=26*r+n;for(s.s.c=--r,r=0;a<i&&!((n=t.charCodeAt(a)-48)<0||n>9);++a)r=10*r+n;if(s.s.r=--r,a===i||n!=10)return s.e.c=s.s.c,s.e.r=s.s.r,s;for(++a,r=0;a!=i&&!((n=t.charCodeAt(a)-64)<1||n>26);++a)r=26*r+n;for(s.e.c=--r,r=0;a!=i&&!((n=t.charCodeAt(a)-48)<0||n>9);++a)r=10*r+n;return s.e.r=--r,s}function np(t,s){var r=t.t=="d"&&s instanceof Date;if(t.z!=null)try{return t.w=Br(t.z,r?er(s):s)}catch{}try{return t.w=Br((t.XF||{}).numFmtId||(r?14:0),r?er(s):s)}catch{return""+s}}function za(t,s,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?mi[t.v]||t.v:s==null?np(t,t.v):np(t,s))}function Tn(t,s){var r=s&&s.sheet?s.sheet:"Sheet1",a={};return a[r]=t,{SheetNames:[r],Sheets:a}}function Ev(t,s,r){var a=r||{},n=t?Array.isArray(t):a.dense,i=t||(n?[]:{}),l=0,o=0;if(i&&a.origin!=null){if(typeof a.origin=="number")l=a.origin;else{var c=typeof a.origin=="string"?Ys(a.origin):a.origin;l=c.r,o=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=Kt(i["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),l==-1&&(d.e.r=l=u.e.r+1)}for(var p=0;p!=s.length;++p)if(s[p]){if(!Array.isArray(s[p]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=s[p].length;++m)if(!(typeof s[p][m]>"u")){var f={v:s[p][m]},h=l+p,x=o+m;if(d.s.r>h&&(d.s.r=h),d.s.c>x&&(d.s.c=x),d.e.r<h&&(d.e.r=h),d.e.c<x&&(d.e.c=x),s[p][m]&&typeof s[p][m]=="object"&&!Array.isArray(s[p][m])&&!(s[p][m]instanceof Date))f=s[p][m];else if(Array.isArray(f.v)&&(f.f=s[p][m][1],f.v=f.v[0]),f.v===null)if(f.f)f.t="n";else if(a.nullError)f.t="e",f.v=0;else if(a.sheetStubs)f.t="z";else continue;else typeof f.v=="number"?f.t="n":typeof f.v=="boolean"?f.t="b":f.v instanceof Date?(f.z=a.dateNF||Ze[14],a.cellDates?(f.t="d",f.w=Br(f.z,er(f.v))):(f.t="n",f.v=er(f.v),f.w=Br(f.z,f.v))):f.t="s";if(n)i[h]||(i[h]=[]),i[h][x]&&i[h][x].z&&(f.z=i[h][x].z),i[h][x]=f;else{var g=Ye({c:x,r:h});i[g]&&i[g].z&&(f.z=i[g].z),i[g]=f}}}return d.s.c<1e7&&(i["!ref"]=yt(d)),i}function cl(t,s){return Ev(null,t,s)}function N6(t){return t.read_shift(4,"i")}function $s(t){var s=t.read_shift(4);return s===0?"":t.read_shift(s,"dbcs")}function w6(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function Tm(t,s){var r=t.l,a=t.read_shift(1),n=$s(t),i=[],l={t:n,h:n};if(a&1){for(var o=t.read_shift(4),c=0;c!=o;++c)i.push(w6(t));l.r=i}else l.r=[{ich:0,ifnt:0}];return t.l=r+s,l}var k6=Tm;function Ur(t){var s=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:s,iStyleRef:r}}function ui(t){var s=t.read_shift(2);return s+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:s}}var S6=$s;function Em(t){var s=t.read_shift(4);return s===0||s===4294967295?"":t.read_shift(s,"dbcs")}var C6=$s,Xu=Em;function Fm(t){var s=t.slice(t.l,t.l+4),r=s[0]&1,a=s[0]&2;t.l+=4;var n=a===0?hd([0,0,0,0,s[0]&252,s[1],s[2],s[3]],0):In(s,0)>>2;return r?n/100:n}function Fv(t){var s={s:{},e:{}};return s.s.r=t.read_shift(4),s.e.r=t.read_shift(4),s.s.c=t.read_shift(4),s.e.c=t.read_shift(4),s}var xi=Fv;function Bs(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function _6(t){var s={},r=t.read_shift(1),a=r>>>1,n=t.read_shift(1),i=t.read_shift(2,"i"),l=t.read_shift(1),o=t.read_shift(1),c=t.read_shift(1);switch(t.l++,a){case 0:s.auto=1;break;case 1:s.index=n;var d=Kn[n];d&&(s.rgb=_o(d));break;case 2:s.rgb=_o([l,o,c]);break;case 3:s.theme=n;break}return i!=0&&(s.tint=i>0?i/32767:i/32768),s}function T6(t){var s=t.read_shift(1);t.l++;var r={fBold:s&1,fItalic:s&2,fUnderline:s&4,fStrikeout:s&8,fOutline:s&16,fShadow:s&32,fCondense:s&64,fExtend:s&128};return r}function Av(t,s){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=t.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return t.l-=4,t.read_shift(0,s==1?"lpstr":"lpwstr")}function E6(t){return Av(t,1)}function F6(t){return Av(t,2)}var Am=2,nr=3,dc=11,ip=12,fd=19,uc=64,A6=65,P6=71,D6=4108,R6=4126,vs=80,Pv=81,L6=[vs,Pv],O6={1:{n:"CodePage",t:Am},2:{n:"Category",t:vs},3:{n:"PresentationFormat",t:vs},4:{n:"ByteCount",t:nr},5:{n:"LineCount",t:nr},6:{n:"ParagraphCount",t:nr},7:{n:"SlideCount",t:nr},8:{n:"NoteCount",t:nr},9:{n:"HiddenCount",t:nr},10:{n:"MultimediaClipCount",t:nr},11:{n:"ScaleCrop",t:dc},12:{n:"HeadingPairs",t:D6},13:{n:"TitlesOfParts",t:R6},14:{n:"Manager",t:vs},15:{n:"Company",t:vs},16:{n:"LinksUpToDate",t:dc},17:{n:"CharacterCount",t:nr},19:{n:"SharedDoc",t:dc},22:{n:"HyperlinksChanged",t:dc},23:{n:"AppVersion",t:nr,p:"version"},24:{n:"DigSig",t:A6},26:{n:"ContentType",t:vs},27:{n:"ContentStatus",t:vs},28:{n:"Language",t:vs},29:{n:"Version",t:vs},255:{},2147483648:{n:"Locale",t:fd},2147483651:{n:"Behavior",t:fd},1919054434:{}},I6={1:{n:"CodePage",t:Am},2:{n:"Title",t:vs},3:{n:"Subject",t:vs},4:{n:"Author",t:vs},5:{n:"Keywords",t:vs},6:{n:"Comments",t:vs},7:{n:"Template",t:vs},8:{n:"LastAuthor",t:vs},9:{n:"RevNumber",t:vs},10:{n:"EditTime",t:uc},11:{n:"LastPrinted",t:uc},12:{n:"CreatedDate",t:uc},13:{n:"ModifiedDate",t:uc},14:{n:"PageCount",t:nr},15:{n:"WordCount",t:nr},16:{n:"CharCount",t:nr},17:{n:"Thumbnail",t:P6},18:{n:"Application",t:vs},19:{n:"DocSecurity",t:nr},255:{},2147483648:{n:"Locale",t:fd},2147483651:{n:"Behavior",t:fd},1919054434:{}},lp={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},M6=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function B6(t){return t.map(function(s){return[s>>16&255,s>>8&255,s&255]})}var U6=B6([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Kn=Es(U6),mi={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Dv={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},op={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function $6(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function z6(t){var s=$6();if(!t||!t.match)return s;var r={};if((t.match(Vs)||[]).forEach(function(a){var n=qe(a);switch(n[0].replace(YS,"<")){case"<?xml":break;case"<Types":s.xmlns=n["xmlns"+(n[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[n.Extension]=n.ContentType;break;case"<Override":s[op[n.ContentType]]!==void 0&&s[op[n.ContentType]].push(n.PartName);break}}),s.xmlns!==l6.CT)throw new Error("Unknown Namespace: "+s.xmlns);return s.calcchain=s.calcchains.length>0?s.calcchains[0]:"",s.sst=s.strs.length>0?s.strs[0]:"",s.style=s.styles.length>0?s.styles[0]:"",s.defaults=r,delete s.calcchains,s}var Ai={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Qu(t){var s=t.lastIndexOf("/");return t.slice(0,s+1)+"_rels/"+t.slice(s+1)+".rels"}function Gl(t,s){var r={"!id":{}};if(!t)return r;s.charAt(0)!=="/"&&(s="/"+s);var a={};return(t.match(Vs)||[]).forEach(function(n){var i=qe(n);if(i[0]==="<Relationship"){var l={};l.Type=i.Type,l.Target=i.Target,l.Id=i.Id,i.TargetMode&&(l.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:Al(i.Target,s);r[o]=l,a[i.Id]=l}}),r["!id"]=a,r}var W6="application/vnd.oasis.opendocument.spreadsheet";function V6(t,s){for(var r=km(t),a,n;a=So.exec(r);)switch(a[3]){case"manifest":break;case"file-entry":if(n=qe(a[0],!1),n.path=="/"&&n.type!==W6)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(s&&s.WTF)throw a}}var ql=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],H6=function(){for(var t=new Array(ql.length),s=0;s<ql.length;++s){var r=ql[s],a="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[s]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return t}();function Rv(t){var s={};t=Lt(t);for(var r=0;r<ql.length;++r){var a=ql[r],n=t.match(H6[r]);n!=null&&n.length>0&&(s[a[1]]=Nt(n[1])),a[2]==="date"&&s[a[1]]&&(s[a[1]]=ks(s[a[1]]))}return s}var G6=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function Lv(t,s,r,a){var n=[];if(typeof t=="string")n=Qf(t,a);else for(var i=0;i<t.length;++i)n=n.concat(t[i].map(function(u){return{v:u}}));var l=typeof s=="string"?Qf(s,a).map(function(u){return u.v}):s,o=0,c=0;if(l.length>0)for(var d=0;d!==n.length;d+=2){switch(c=+n[d+1].v,n[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=l.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=l.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=l.slice(o,o+c);break}o+=c}}function q6(t,s,r){var a={};return s||(s={}),t=Lt(t),G6.forEach(function(n){var i=(t.match(ko(n[0]))||[])[1];switch(n[2]){case"string":i&&(s[n[1]]=Nt(i));break;case"bool":s[n[1]]=i==="true";break;case"raw":var l=t.match(new RegExp("<"+n[0]+"[^>]*>([\\s\\S]*?)</"+n[0]+">"));l&&l.length>0&&(a[n[1]]=l[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&Lv(a.HeadingPairs,a.TitlesOfParts,s,r),s}var J6=/<[^>]+>[^<]*/g;function K6(t,s){var r={},a="",n=t.match(J6);if(n)for(var i=0;i!=n.length;++i){var l=n[i],o=qe(l);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":a=Nt(o.name);break;case"</property>":a=null;break;default:if(l.indexOf("<vt:")===0){var c=l.split(">"),d=c[0].slice(4),u=c[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[a]=Nt(u);break;case"bool":r[a]=Ut(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[a]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[a]=parseFloat(u);break;case"filetime":case"date":r[a]=ks(u);break;case"cy":case"error":r[a]=Nt(u);break;default:if(d.slice(-1)=="/")break;s.WTF&&typeof console<"u"&&console.warn("Unexpected",l,d,c)}}else if(l.slice(0,2)!=="</"){if(s.WTF)throw new Error(l)}}}return r}var Y6={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},F0;function X6(t,s,r){F0||(F0=jm(Y6)),s=F0[s]||s,t[s]=r}function Pm(t){var s=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+s/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Ov(t,s,r){var a=t.l,n=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-a&3;)++t.l;return n}function Iv(t,s,r){var a=t.read_shift(0,"lpwstr");return a}function Mv(t,s,r){return s===31?Iv(t):Ov(t,s,r)}function Zu(t,s,r){return Mv(t,s,r===!1?0:4)}function Q6(t,s){if(!s)throw new Error("VtUnalignedString must have positive length");return Mv(t,s,0)}function Z6(t){for(var s=t.read_shift(4),r=[],a=0;a!=s;++a){var n=t.l;r[a]=t.read_shift(0,"lpwstr").replace(Zs,""),t.l-n&2&&(t.l+=2)}return r}function eC(t){for(var s=t.read_shift(4),r=[],a=0;a!=s;++a)r[a]=t.read_shift(0,"lpstr-cp").replace(Zs,"");return r}function tC(t){var s=t.l,r=pd(t,Pv);t[t.l]==0&&t[t.l+1]==0&&t.l-s&2&&(t.l+=2);var a=pd(t,nr);return[r,a]}function sC(t){for(var s=t.read_shift(4),r=[],a=0;a<s/2;++a)r.push(tC(t));return r}function cp(t,s){for(var r=t.read_shift(4),a={},n=0;n!=r;++n){var i=t.read_shift(4),l=t.read_shift(4);a[i]=t.read_shift(l,s===1200?"utf16le":"utf8").replace(Zs,"").replace(Fl,"!"),s===1200&&l%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),a}function Bv(t){var s=t.read_shift(4),r=t.slice(t.l,t.l+s);return t.l+=s,(s&3)>0&&(t.l+=4-(s&3)&3),r}function rC(t){var s={};return s.Size=t.read_shift(4),t.l+=s.Size+3-(s.Size-1)%4,s}function pd(t,s,r){var a=t.read_shift(2),n,i=r||{};if(t.l+=2,s!==ip&&a!==s&&L6.indexOf(s)===-1&&!((s&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+s+" saw "+a);switch(s===ip?a:s){case 2:return n=t.read_shift(2,"i"),i.raw||(t.l+=2),n;case 3:return n=t.read_shift(4,"i"),n;case 11:return t.read_shift(4)!==0;case 19:return n=t.read_shift(4),n;case 30:return Ov(t,a,4).replace(Zs,"");case 31:return Iv(t);case 64:return Pm(t);case 65:return Bv(t);case 71:return rC(t);case 80:return Zu(t,a,!i.raw).replace(Zs,"");case 81:return Q6(t,a).replace(Zs,"");case 4108:return sC(t);case 4126:case 4127:return a==4127?Z6(t):eC(t);default:throw new Error("TypedPropertyValue unrecognized type "+s+" "+a)}}function dp(t,s){var r=t.l,a=t.read_shift(4),n=t.read_shift(4),i=[],l=0,o=0,c=-1,d={};for(l=0;l!=n;++l){var u=t.read_shift(4),p=t.read_shift(4);i[l]=[u,p+r]}i.sort(function(b,N){return b[1]-N[1]});var m={};for(l=0;l!=n;++l){if(t.l!==i[l][1]){var f=!0;if(l>0&&s)switch(s[i[l-1][0]].t){case 2:t.l+2===i[l][1]&&(t.l+=2,f=!1);break;case 80:t.l<=i[l][1]&&(t.l=i[l][1],f=!1);break;case 4108:t.l<=i[l][1]&&(t.l=i[l][1],f=!1);break}if((!s||l==0)&&t.l<=i[l][1]&&(f=!1,t.l=i[l][1]),f)throw new Error("Read Error: Expected address "+i[l][1]+" at "+t.l+" :"+l)}if(s){var h=s[i[l][0]];if(m[h.n]=pd(t,h.t,{raw:!0}),h.p==="version"&&(m[h.n]=String(m[h.n]>>16)+"."+("0000"+String(m[h.n]&65535)).slice(-4)),h.n=="CodePage")switch(m[h.n]){case 0:m[h.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Qr(o=m[h.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[h.n])}}else if(i[l][0]===1){if(o=m.CodePage=pd(t,Am),Qr(o),c!==-1){var x=t.l;t.l=i[c][1],d=cp(t,o),t.l=x}}else if(i[l][0]===0){if(o===0){c=l,t.l=i[l+1][1];continue}d=cp(t,o)}else{var g=d[i[l][0]],j;switch(t[t.l]){case 65:t.l+=4,j=Bv(t);break;case 30:t.l+=4,j=Zu(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,j=Zu(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,j=t.read_shift(4,"i");break;case 19:t.l+=4,j=t.read_shift(4);break;case 5:t.l+=4,j=t.read_shift(8,"f");break;case 11:t.l+=4,j=Yt(t,4);break;case 64:t.l+=4,j=ks(Pm(t));break;default:throw new Error("unparsed value: "+t[t.l])}m[g]=j}}return t.l=r+a,m}function up(t,s,r){var a=t.content;if(!a)return{};_s(a,0);var n,i,l,o,c=0;a.chk("feff","Byte Order: "),a.read_shift(2);var d=a.read_shift(4),u=a.read_shift(16);if(u!==gt.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(n=a.read_shift(4),n!==1&&n!==2)throw new Error("Unrecognized #Sets: "+n);if(i=a.read_shift(16),o=a.read_shift(4),n===1&&o!==a.l)throw new Error("Length mismatch: "+o+" !== "+a.l);n===2&&(l=a.read_shift(16),c=a.read_shift(4));var p=dp(a,s),m={SystemIdentifier:d};for(var f in p)m[f]=p[f];if(m.FMTID=i,n===1)return m;if(c-a.l==2&&(a.l+=2),a.l!==c)throw new Error("Length mismatch 2: "+a.l+" !== "+c);var h;try{h=dp(a,null)}catch{}for(f in h)m[f]=h[f];return m.FMTID=[i,l],m}function Ja(t,s){return t.read_shift(s),null}function aC(t,s,r){for(var a=[],n=t.l+s;t.l<n;)a.push(r(t,n-t.l));if(n!==t.l)throw new Error("Slurp error");return a}function Yt(t,s){return t.read_shift(s)===1}function ns(t){return t.read_shift(2,"u")}function Uv(t,s){return aC(t,s,ns)}function nC(t){var s=t.read_shift(1),r=t.read_shift(1);return r===1?s:s===1}function Io(t,s,r){var a=t.read_shift(r&&r.biff>=12?2:1),n="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=t.read_shift(1);i&&(n="dbcs-cont")}else r.biff==12&&(n="wstr");r.biff>=2&&r.biff<=5&&(n="cpstr");var l=a?t.read_shift(a,n):"";return l}function iC(t){var s=t.read_shift(2),r=t.read_shift(1),a=r&4,n=r&8,i=1+(r&1),l=0,o,c={};n&&(l=t.read_shift(2)),a&&(o=t.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",u=s===0?"":t.read_shift(s,d);return n&&(t.l+=4*l),a&&(t.l+=o),c.t=u,n||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function ni(t,s,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(s,"cpstr");if(r.biff>=12)return t.read_shift(s,"dbcs-cont")}var n=t.read_shift(1);return n===0?a=t.read_shift(s,"sbcs-cont"):a=t.read_shift(s,"dbcs-cont"),a}function Mo(t,s,r){var a=t.read_shift(r&&r.biff==2?1:2);return a===0?(t.l++,""):ni(t,a,r)}function hi(t,s,r){if(r.biff>5)return Mo(t,s,r);var a=t.read_shift(1);return a===0?(t.l++,""):t.read_shift(a,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function lC(t){var s=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[s,r]}function oC(t){var s=t.read_shift(4),r=t.l,a=!1;s>24&&(t.l+=s-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),t.l=r);var n=t.read_shift((a?s-24:s)>>1,"utf16le").replace(Zs,"");return a&&(t.l+=24),n}function cC(t){for(var s=t.read_shift(2),r="";s-- >0;)r+="../";var a=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var n=t.read_shift(4);if(n===0)return r+a.replace(/\\/g,"/");var i=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var l=t.read_shift(i>>1,"utf16le").replace(Zs,"");return r+l}function dC(t,s){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return oC(t);case"0303000000000000c000000000000046":return cC(t);default:throw new Error("Unsupported Moniker "+r)}}function xc(t){var s=t.read_shift(4),r=s>0?t.read_shift(s,"utf16le").replace(Zs,""):"";return r}function uC(t,s){var r=t.l+s,a=t.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var n=t.read_shift(2);t.l+=2;var i,l,o,c,d="",u,p;n&16&&(i=xc(t,r-t.l)),n&128&&(l=xc(t,r-t.l)),(n&257)===257&&(o=xc(t,r-t.l)),(n&257)===1&&(c=dC(t,r-t.l)),n&8&&(d=xc(t,r-t.l)),n&32&&(u=t.read_shift(16)),n&64&&(p=Pm(t)),t.l=r;var m=l||o||c||"";m&&d&&(m+="#"+d),m||(m="#"+d),n&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var f={Target:m};return u&&(f.guid=u),p&&(f.time=p),i&&(f.Tooltip=i),f}function $v(t){var s=t.read_shift(1),r=t.read_shift(1),a=t.read_shift(1),n=t.read_shift(1);return[s,r,a,n]}function zv(t,s){var r=$v(t);return r[3]=0,r}function wa(t){var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(2);return{r:s,c:r,ixfe:a}}function xC(t){var s=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:s,flags:r}}function mC(t,s,r){return s===0?"":hi(t,s,r)}function hC(t,s,r){var a=r.biff>8?4:2,n=t.read_shift(a),i=t.read_shift(a,"i"),l=t.read_shift(a,"i");return[n,i,l]}function Wv(t){var s=t.read_shift(2),r=Fm(t);return[s,r]}function fC(t,s,r){t.l+=4,s-=4;var a=t.l+s,n=Io(t,s,r),i=t.read_shift(2);if(a-=t.l,i!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+i);return t.l+=i,n}function Vd(t){var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(2),n=t.read_shift(2);return{s:{c:a,r:s},e:{c:n,r}}}function Vv(t){var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(1),n=t.read_shift(1);return{s:{c:a,r:s},e:{c:n,r}}}var pC=Vv;function Hv(t){t.l+=4;var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(2);return t.l+=12,[r,s,a]}function gC(t){var s={};return t.l+=4,t.l+=16,s.fSharedNote=t.read_shift(2),t.l+=4,s}function yC(t){var s={};return t.l+=4,t.cf=t.read_shift(2),s}function Ls(t){t.l+=2,t.l+=t.read_shift(2)}var bC={0:Ls,4:Ls,5:Ls,6:Ls,7:yC,8:Ls,9:Ls,10:Ls,11:Ls,12:Ls,13:gC,14:Ls,15:Ls,16:Ls,17:Ls,18:Ls,19:Ls,20:Ls,21:Hv};function vC(t,s){for(var r=t.l+s,a=[];t.l<r;){var n=t.read_shift(2);t.l-=2;try{a.push(bC[n](t,r-t.l))}catch{return t.l=r,a}}return t.l!=r&&(t.l=r),a}function mc(t,s){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),s-=2,s>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(s>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(s),r}function jC(t,s){return s===0||t.read_shift(2),1200}function NC(t,s,r){if(r.enc)return t.l+=s,"";var a=t.l,n=hi(t,0,r);return t.read_shift(s+a-t.l),n}function wC(t,s,r){var a=r&&r.biff==8||s==2?t.read_shift(2):(t.l+=s,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function kC(t,s,r){var a=t.read_shift(4),n=t.read_shift(1)&3,i=t.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var l=Io(t,0,r);return l.length===0&&(l="Sheet1"),{pos:a,hs:n,dt:i,name:l}}function SC(t,s){for(var r=t.l+s,a=t.read_shift(4),n=t.read_shift(4),i=[],l=0;l!=n&&t.l<r;++l)i.push(iC(t));return i.Count=a,i.Unique=n,i}function CC(t,s){var r={};return r.dsst=t.read_shift(2),t.l+=s-2,r}function _C(t){var s={};s.r=t.read_shift(2),s.c=t.read_shift(2),s.cnt=t.read_shift(2)-s.c;var r=t.read_shift(2);t.l+=4;var a=t.read_shift(1);return t.l+=3,a&7&&(s.level=a&7),a&32&&(s.hidden=!0),a&64&&(s.hpt=r/20),s}function TC(t){var s=xC(t);if(s.type!=2211)throw new Error("Invalid Future Record "+s.type);var r=t.read_shift(4);return r!==0}function EC(t){return t.read_shift(2),t.read_shift(4)}function xp(t,s,r){var a=0;r&&r.biff==2||(a=t.read_shift(2));var n=t.read_shift(2);r&&r.biff==2&&(a=1-(n>>15),n&=32767);var i={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[i,n]}function FC(t){var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2),o=t.read_shift(2),c=t.read_shift(2),d=t.read_shift(2);return{Pos:[s,r],Dim:[a,n],Flags:i,CurTab:l,FirstTab:o,Selected:c,TabRatio:d}}function AC(t,s,r){if(r&&r.biff>=2&&r.biff<5)return{};var a=t.read_shift(2);return{RTL:a&64}}function PC(){}function DC(t,s,r){var a={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return a.name=Io(t,0,r),a}function RC(t){var s=wa(t);return s.isst=t.read_shift(4),s}function LC(t,s,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=t.l+s,n=wa(t);r.biff==2&&t.l++;var i=Mo(t,a-t.l,r);return n.val=i,n}function OC(t,s,r){var a=t.read_shift(2),n=hi(t,0,r);return[a,n]}var IC=hi;function mp(t,s,r){var a=t.l+s,n=r.biff==8||!r.biff?4:2,i=t.read_shift(n),l=t.read_shift(n),o=t.read_shift(2),c=t.read_shift(2);return t.l=a,{s:{r:i,c:o},e:{r:l,c}}}function MC(t){var s=t.read_shift(2),r=t.read_shift(2),a=Wv(t);return{r:s,c:r,ixfe:a[0],rknum:a[1]}}function BC(t,s){for(var r=t.l+s-2,a=t.read_shift(2),n=t.read_shift(2),i=[];t.l<r;)i.push(Wv(t));if(t.l!==r)throw new Error("MulRK read error");var l=t.read_shift(2);if(i.length!=l-n+1)throw new Error("MulRK length mismatch");return{r:a,c:n,C:l,rkrec:i}}function UC(t,s){for(var r=t.l+s-2,a=t.read_shift(2),n=t.read_shift(2),i=[];t.l<r;)i.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var l=t.read_shift(2);if(i.length!=l-n+1)throw new Error("MulBlank length mismatch");return{r:a,c:n,C:l,ixfe:i}}function $C(t,s,r,a){var n={},i=t.read_shift(4),l=t.read_shift(4),o=t.read_shift(4),c=t.read_shift(2);return n.patternType=M6[o>>26],a.cellStyles&&(n.alc=i&7,n.fWrap=i>>3&1,n.alcV=i>>4&7,n.fJustLast=i>>7&1,n.trot=i>>8&255,n.cIndent=i>>16&15,n.fShrinkToFit=i>>20&1,n.iReadOrder=i>>22&2,n.fAtrNum=i>>26&1,n.fAtrFnt=i>>27&1,n.fAtrAlc=i>>28&1,n.fAtrBdr=i>>29&1,n.fAtrPat=i>>30&1,n.fAtrProt=i>>31&1,n.dgLeft=l&15,n.dgRight=l>>4&15,n.dgTop=l>>8&15,n.dgBottom=l>>12&15,n.icvLeft=l>>16&127,n.icvRight=l>>23&127,n.grbitDiag=l>>30&3,n.icvTop=o&127,n.icvBottom=o>>7&127,n.icvDiag=o>>14&127,n.dgDiag=o>>21&15,n.icvFore=c&127,n.icvBack=c>>7&127,n.fsxButton=c>>14&1),n}function zC(t,s,r){var a={};return a.ifnt=t.read_shift(2),a.numFmtId=t.read_shift(2),a.flags=t.read_shift(2),a.fStyle=a.flags>>2&1,s-=6,a.data=$C(t,s,a.fStyle,r),a}function WC(t){t.l+=4;var s=[t.read_shift(2),t.read_shift(2)];if(s[0]!==0&&s[0]--,s[1]!==0&&s[1]--,s[0]>7||s[1]>7)throw new Error("Bad Gutters: "+s.join("|"));return s}function hp(t,s,r){var a=wa(t);(r.biff==2||s==9)&&++t.l;var n=nC(t);return a.val=n,a.t=n===!0||n===!1?"b":"e",a}function VC(t,s,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=wa(t),n=Bs(t);return a.val=n,a}var fp=mC;function HC(t,s,r){var a=t.l+s,n=t.read_shift(2),i=t.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,n];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var l=ni(t,i),o=[];a>t.l;)o.push(Mo(t));return[i,n,l,o]}function pp(t,s,r){var a=t.read_shift(2),n,i={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return r.sbcch===14849&&(n=fC(t,s-2,r)),i.body=n||t.read_shift(s-2),typeof n=="string"&&(i.Name=n),i}var GC=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function gp(t,s,r){var a=t.l+s,n=t.read_shift(2),i=t.read_shift(1),l=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),c=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var d=ni(t,l,r);n&32&&(d=GC[d.charCodeAt(0)]);var u=a-t.l;r&&r.biff==2&&--u;var p=a==t.l||o===0||!(u>0)?[]:_E(t,u,r,o);return{chKey:i,Name:d,itab:c,rgce:p}}function Gv(t,s,r){if(r.biff<8)return qC(t,s,r);for(var a=[],n=t.l+s,i=t.read_shift(r.biff>8?4:2);i--!==0;)a.push(hC(t,r.biff>8?12:6,r));if(t.l!=n)throw new Error("Bad ExternSheet: "+t.l+" != "+n);return a}function qC(t,s,r){t[t.l+1]==3&&t[t.l]++;var a=Io(t,s,r);return a.charCodeAt(0)==3?a.slice(1):a}function JC(t,s,r){if(r.biff<8){t.l+=s;return}var a=t.read_shift(2),n=t.read_shift(2),i=ni(t,a,r),l=ni(t,n,r);return[i,l]}function KC(t,s,r){var a=Vv(t);t.l++;var n=t.read_shift(1);return s-=8,[TE(t,s,r),n,a]}function yp(t,s,r){var a=pC(t);switch(r.biff){case 2:t.l++,s-=7;break;case 3:case 4:t.l+=2,s-=8;break;default:t.l+=6,s-=12}return[a,SE(t,s,r)]}function YC(t){var s=t.read_shift(4)!==0,r=t.read_shift(4)!==0,a=t.read_shift(4);return[s,r,a]}function XC(t,s,r){if(!(r.biff<8)){var a=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2),o=hi(t,0,r);return r.biff<8&&t.read_shift(1),[{r:a,c:n},o,l,i]}}function QC(t,s,r){return XC(t,s,r)}function ZC(t,s){for(var r=[],a=t.read_shift(2);a--;)r.push(Vd(t));return r}function e_(t,s,r){if(r&&r.biff<8)return s_(t,s,r);var a=Hv(t),n=vC(t,s-22,a[1]);return{cmo:a,ft:n}}var t_={8:function(t,s){var r=t.l+s;t.l+=10;var a=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var n=t.read_shift(1);return t.l+=n,t.l=r,{fmt:a}}};function s_(t,s,r){t.l+=4;var a=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,s-=36;var l=[];return l.push((t_[a]||Ws)(t,s,r)),{cmo:[n,a,i],ft:l}}function r_(t,s,r){var a=t.l,n="";try{t.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],l;[0,5,7,11,12,14].indexOf(i)==-1?t.l+=6:l=lC(t,6,r);var o=t.read_shift(2);t.read_shift(2),ns(t,2);var c=t.read_shift(2);t.l+=c;for(var d=1;d<t.lens.length-1;++d){if(t.l-a!=t.lens[d])throw new Error("TxO: bad continue record");var u=t[t.l],p=ni(t,t.lens[d+1]-t.lens[d]-1);if(n+=p,n.length>=(u?o:2*o))break}if(n.length!==o&&n.length!==o*2)throw new Error("cchText: "+o+" != "+n.length);return t.l=a+s,{t:n}}catch{return t.l=a+s,{t:n}}}function a_(t,s){var r=Vd(t);t.l+=16;var a=uC(t,s-24);return[r,a]}function n_(t,s){t.read_shift(2);var r=Vd(t),a=t.read_shift((s-10)/2,"dbcs-cont");return a=a.replace(Zs,""),[r,a]}function i_(t){var s=[0,0],r;return r=t.read_shift(2),s[0]=lp[r]||r,r=t.read_shift(2),s[1]=lp[r]||r,s}function l_(t){for(var s=t.read_shift(2),r=[];s-- >0;)r.push(zv(t));return r}function o_(t){for(var s=t.read_shift(2),r=[];s-- >0;)r.push(zv(t));return r}function c_(t){t.l+=2;var s={cxfs:0,crc:0};return s.cxfs=t.read_shift(2),s.crc=t.read_shift(4),s}function qv(t,s,r){if(!r.cellStyles)return Ws(t,s);var a=r&&r.biff>=12?4:2,n=t.read_shift(a),i=t.read_shift(a),l=t.read_shift(a),o=t.read_shift(a),c=t.read_shift(2);a==2&&(t.l+=2);var d={s:n,e:i,w:l,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function d_(t,s){var r={};return s<32||(t.l+=16,r.header=Bs(t),r.footer=Bs(t),t.l+=2),r}function u_(t,s,r){var a={area:!1};if(r.biff!=5)return t.l+=s,a;var n=t.read_shift(1);return t.l+=3,n&16&&(a.area=!0),a}var x_=wa,m_=Uv,h_=Mo;function f_(t){var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(4),n={fmt:s,env:r,len:a,data:t.slice(t.l,t.l+a)};return t.l+=a,n}function p_(t,s,r){r.biffguess&&r.biff==5&&(r.biff=2);var a=wa(t);++t.l;var n=hi(t,s-7,r);return a.t="str",a.val=n,a}function g_(t){var s=wa(t);++t.l;var r=Bs(t);return s.t="n",s.val=r,s}function y_(t){var s=wa(t);++t.l;var r=t.read_shift(2);return s.t="n",s.val=r,s}function b_(t){var s=t.read_shift(1);return s===0?(t.l++,""):t.read_shift(s,"sbcs-cont")}function v_(t,s){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=s-13}function j_(t,s,r){var a=t.l+s,n=wa(t),i=t.read_shift(2),l=ni(t,i,r);return t.l=a,n.t="str",n.val=l,n}var N_=[2,3,48,49,131,139,140,245],bp=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},s=jm({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var d=[],u=Nn(1);switch(c.type){case"base64":u=Xr(Nr(o));break;case"binary":u=Xr(o);break;case"buffer":case"array":u=o;break}_s(u,0);var p=u.read_shift(1),m=!!(p&136),f=!1,h=!1;switch(p){case 2:break;case 3:break;case 48:f=!0,m=!0;break;case 49:f=!0,m=!0;break;case 131:break;case 139:break;case 140:h=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+p.toString(16))}var x=0,g=521;p==2&&(x=u.read_shift(2)),u.l+=3,p!=2&&(x=u.read_shift(4)),x>1048576&&(x=1e6),p!=2&&(g=u.read_shift(2));var j=u.read_shift(2),b=c.codepage||1252;p!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(b=t[u[u.l]]),u.l+=1,u.l+=2),h&&(u.l+=36);for(var N=[],C={},A=Math.min(u.length,p==2?521:g-10-(f?264:0)),F=h?32:11;u.l<A&&u[u.l]!=13;)switch(C={},C.name=No.utils.decode(b,u.slice(u.l,u.l+F)).replace(/[\u0000\r\n].*$/g,""),u.l+=F,C.type=String.fromCharCode(u.read_shift(1)),p!=2&&!h&&(C.offset=u.read_shift(4)),C.len=u.read_shift(1),p==2&&(C.offset=u.read_shift(2)),C.dec=u.read_shift(1),C.name.length&&N.push(C),p!=2&&(u.l+=h?13:14),C.type){case"B":(!f||C.len!=8)&&c.WTF&&console.log("Skipping "+C.name+":"+C.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+C.name+":"+C.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+C.type)}if(u[u.l]!==13&&(u.l=g-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=g;var w=0,_=0;for(d[0]=[],_=0;_!=N.length;++_)d[0][_]=N[_].name;for(;x-- >0;){if(u[u.l]===42){u.l+=j;continue}for(++u.l,d[++w]=[],_=0,_=0;_!=N.length;++_){var v=u.slice(u.l,u.l+N[_].len);u.l+=N[_].len,_s(v,0);var S=No.utils.decode(b,v);switch(N[_].type){case"C":S.trim().length&&(d[w][_]=S.replace(/\s+$/,""));break;case"D":S.length===8?d[w][_]=new Date(+S.slice(0,4),+S.slice(4,6)-1,+S.slice(6,8)):d[w][_]=S;break;case"F":d[w][_]=parseFloat(S.trim());break;case"+":case"I":d[w][_]=h?v.read_shift(-4,"i")^2147483648:v.read_shift(4,"i");break;case"L":switch(S.trim().toUpperCase()){case"Y":case"T":d[w][_]=!0;break;case"N":case"F":d[w][_]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+S+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+p.toString(16));d[w][_]="##MEMO##"+(h?parseInt(S.trim(),10):v.read_shift(4));break;case"N":S=S.replace(/\u0000/g,"").trim(),S&&S!="."&&(d[w][_]=+S||0);break;case"@":d[w][_]=new Date(v.read_shift(-8,"f")-621356832e5);break;case"T":d[w][_]=new Date((v.read_shift(4)-2440588)*864e5+v.read_shift(4));break;case"Y":d[w][_]=v.read_shift(4,"i")/1e4+v.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[w][_]=-v.read_shift(-8,"f");break;case"B":if(f&&N[_].len==8){d[w][_]=v.read_shift(8,"f");break}case"G":case"P":v.l+=N[_].len;break;case"0":if(N[_].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+N[_].type)}}}if(p!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=N,d}function a(o,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=cl(r(o,d),d);return u["!cols"]=d.DBF.map(function(p){return{wch:p.len,DBF:p}}),delete d.DBF,u}function n(o,c){try{return Tn(a(o,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function l(o,c){var d=c||{};if(+d.codepage>=0&&Qr(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=Yu(),p=ix(o,{header:1,raw:!0,cellDates:!0}),m=p[0],f=p.slice(1),h=o["!cols"]||[],x=0,g=0,j=0,b=1;for(x=0;x<m.length;++x){if(((h[x]||{}).DBF||{}).name){m[x]=h[x].DBF.name,++j;continue}if(m[x]!=null){if(++j,typeof m[x]=="number"&&(m[x]=m[x].toString(10)),typeof m[x]!="string")throw new Error("DBF Invalid column name "+m[x]+" |"+typeof m[x]+"|");if(m.indexOf(m[x])!==x){for(g=0;g<1024;++g)if(m.indexOf(m[x]+"_"+g)==-1){m[x]+="_"+g;break}}}}var N=Kt(o["!ref"]),C=[],A=[],F=[];for(x=0;x<=N.e.c-N.s.c;++x){var w="",_="",v=0,S=[];for(g=0;g<f.length;++g)f[g][x]!=null&&S.push(f[g][x]);if(S.length==0||m[x]==null){C[x]="?";continue}for(g=0;g<S.length;++g){switch(typeof S[g]){case"number":_="B";break;case"string":_="C";break;case"boolean":_="L";break;case"object":_=S[g]instanceof Date?"D":"C";break;default:_="C"}v=Math.max(v,String(S[g]).length),w=w&&w!=_?"C":_}v>250&&(v=250),_=((h[x]||{}).DBF||{}).type,_=="C"&&h[x].DBF.len>v&&(v=h[x].DBF.len),w=="B"&&_=="N"&&(w="N",F[x]=h[x].DBF.dec,v=h[x].DBF.len),A[x]=w=="C"||_=="N"?v:i[w]||0,b+=A[x],C[x]=w}var R=u.next(32);for(R.write_shift(4,318902576),R.write_shift(4,f.length),R.write_shift(2,296+32*j),R.write_shift(2,b),x=0;x<4;++x)R.write_shift(4,0);for(R.write_shift(4,0|(+s[Gb]||3)<<8),x=0,g=0;x<m.length;++x)if(m[x]!=null){var D=u.next(32),V=(m[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);D.write_shift(1,V,"sbcs"),D.write_shift(1,C[x]=="?"?"C":C[x],"sbcs"),D.write_shift(4,g),D.write_shift(1,A[x]||i[C[x]]||0),D.write_shift(1,F[x]||0),D.write_shift(1,2),D.write_shift(4,0),D.write_shift(1,0),D.write_shift(4,0),D.write_shift(4,0),g+=A[x]||i[C[x]]||0}var O=u.next(264);for(O.write_shift(4,13),x=0;x<65;++x)O.write_shift(4,0);for(x=0;x<f.length;++x){var I=u.next(b);for(I.write_shift(1,0),g=0;g<m.length;++g)if(m[g]!=null)switch(C[g]){case"L":I.write_shift(1,f[x][g]==null?63:f[x][g]?84:70);break;case"B":I.write_shift(8,f[x][g]||0,"f");break;case"N":var z="0";for(typeof f[x][g]=="number"&&(z=f[x][g].toFixed(F[g]||0)),j=0;j<A[g]-z.length;++j)I.write_shift(1,32);I.write_shift(1,z,"sbcs");break;case"D":f[x][g]?(I.write_shift(4,("0000"+f[x][g].getFullYear()).slice(-4),"sbcs"),I.write_shift(2,("00"+(f[x][g].getMonth()+1)).slice(-2),"sbcs"),I.write_shift(2,("00"+f[x][g].getDate()).slice(-2),"sbcs")):I.write_shift(8,"00000000","sbcs");break;case"C":var Q=String(f[x][g]!=null?f[x][g]:"").slice(0,A[g]);for(I.write_shift(1,Q,"sbcs"),j=0;j<A[g]-Q.length;++j)I.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:n,to_sheet:a,from_sheet:l}}(),w_=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},s=new RegExp("\x1BN("+ya(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,f){var h=t[f];return typeof h=="number"?Lf(h):h},a=function(m,f,h){var x=f.charCodeAt(0)-32<<4|h.charCodeAt(0)-48;return x==59?m:Lf(x)};t["|"]=254;function n(m,f){switch(f.type){case"base64":return i(Nr(m),f);case"binary":return i(m,f);case"buffer":return i(ht&&Buffer.isBuffer(m)?m.toString("binary"):di(m),f);case"array":return i(ai(m),f)}throw new Error("Unrecognized type "+f.type)}function i(m,f){var h=m.split(/[\n\r]+/),x=-1,g=-1,j=0,b=0,N=[],C=[],A=null,F={},w=[],_=[],v=[],S=0,R;for(+f.codepage>=0&&Qr(+f.codepage);j!==h.length;++j){S=0;var D=h[j].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(s,r),V=D.replace(/;;/g,"\0").split(";").map(function(K){return K.replace(/\u0000/g,";")}),O=V[0],I;if(D.length>0)switch(O){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":V[1].charAt(0)=="P"&&C.push(D.slice(3).replace(/;;/g,";"));break;case"C":var z=!1,Q=!1,P=!1,k=!1,X=-1,se=-1;for(b=1;b<V.length;++b)switch(V[b].charAt(0)){case"A":break;case"X":g=parseInt(V[b].slice(1))-1,Q=!0;break;case"Y":for(x=parseInt(V[b].slice(1))-1,Q||(g=0),R=N.length;R<=x;++R)N[R]=[];break;case"K":I=V[b].slice(1),I.charAt(0)==='"'?I=I.slice(1,I.length-1):I==="TRUE"?I=!0:I==="FALSE"?I=!1:isNaN(ra(I))?isNaN(Qi(I).getDate())||(I=ks(I)):(I=ra(I),A!==null&&ll(A)&&(I=Wd(I))),z=!0;break;case"E":k=!0;var B=$i(V[b].slice(1),{r:x,c:g});N[x][g]=[N[x][g],B];break;case"S":P=!0,N[x][g]=[N[x][g],"S5S"];break;case"G":break;case"R":X=parseInt(V[b].slice(1))-1;break;case"C":se=parseInt(V[b].slice(1))-1;break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+D)}if(z&&(N[x][g]&&N[x][g].length==2?N[x][g][0]=I:N[x][g]=I,A=null),P){if(k)throw new Error("SYLK shared formula cannot have own formula");var L=X>-1&&N[X][se];if(!L||!L[1])throw new Error("SYLK shared formula cannot find base");N[x][g][1]=rj(L[1],{r:x-X,c:g-se})}break;case"F":var H=0;for(b=1;b<V.length;++b)switch(V[b].charAt(0)){case"X":g=parseInt(V[b].slice(1))-1,++H;break;case"Y":for(x=parseInt(V[b].slice(1))-1,R=N.length;R<=x;++R)N[R]=[];break;case"M":S=parseInt(V[b].slice(1))/20;break;case"F":break;case"G":break;case"P":A=C[parseInt(V[b].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(v=V[b].slice(1).split(" "),R=parseInt(v[0],10);R<=parseInt(v[1],10);++R)S=parseInt(v[2],10),_[R-1]=S===0?{hidden:!0}:{wch:S},Zi(_[R-1]);break;case"C":g=parseInt(V[b].slice(1))-1,_[g]||(_[g]={});break;case"R":x=parseInt(V[b].slice(1))-1,w[x]||(w[x]={}),S>0?(w[x].hpt=S,w[x].hpx=To(S)):S===0&&(w[x].hidden=!0);break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+D)}H<1&&(A=null);break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+D)}}return w.length>0&&(F["!rows"]=w),_.length>0&&(F["!cols"]=_),f&&f.sheetRows&&(N=N.slice(0,f.sheetRows)),[N,F]}function l(m,f){var h=n(m,f),x=h[0],g=h[1],j=cl(x,f);return ya(g).forEach(function(b){j[b]=g[b]}),j}function o(m,f){return Tn(l(m,f),f)}function c(m,f,h,x){var g="C;Y"+(h+1)+";X"+(x+1)+";K";switch(m.t){case"n":g+=m.v||0,m.f&&!m.F&&(g+=";E"+cT(m.f,{r:h,c:x}));break;case"b":g+=m.v?"TRUE":"FALSE";break;case"e":g+=m.w||m.v;break;case"d":g+='"'+(m.w||m.v)+'"';break;case"s":g+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function d(m,f){f.forEach(function(h,x){var g="F;W"+(x+1)+" "+(x+1)+" ";h.hidden?g+="0":(typeof h.width=="number"&&!h.wpx&&(h.wpx=yd(h.width)),typeof h.wpx=="number"&&!h.wch&&(h.wch=bd(h.wpx)),typeof h.wch=="number"&&(g+=Math.round(h.wch))),g.charAt(g.length-1)!=" "&&m.push(g)})}function u(m,f){f.forEach(function(h,x){var g="F;";h.hidden?g+="M0;":h.hpt?g+="M"+20*h.hpt+";":h.hpx&&(g+="M"+20*ej(h.hpx)+";"),g.length>2&&m.push(g+"R"+(x+1))})}function p(m,f){var h=["ID;PWXL;N;E"],x=[],g=Kt(m["!ref"]),j,b=Array.isArray(m),N=`\r
`;h.push("P;PGeneral"),h.push("F;P0;DG0G8;M255"),m["!cols"]&&d(h,m["!cols"]),m["!rows"]&&u(h,m["!rows"]),h.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var C=g.s.r;C<=g.e.r;++C)for(var A=g.s.c;A<=g.e.c;++A){var F=Ye({r:C,c:A});j=b?(m[C]||[])[A]:m[F],!(!j||j.v==null&&(!j.f||j.F))&&x.push(c(j,m,C,A))}return h.join(N)+N+x.join(N)+N+"E"+N}return{to_workbook:o,to_sheet:l,from_sheet:p}}(),k_=function(){function t(i,l){switch(l.type){case"base64":return s(Nr(i),l);case"binary":return s(i,l);case"buffer":return s(ht&&Buffer.isBuffer(i)?i.toString("binary"):di(i),l);case"array":return s(ai(i),l)}throw new Error("Unrecognized type "+l.type)}function s(i,l){for(var o=i.split(`
`),c=-1,d=-1,u=0,p=[];u!==o.length;++u){if(o[u].trim()==="BOT"){p[++c]=[],d=0;continue}if(!(c<0)){var m=o[u].trim().split(","),f=m[0],h=m[1];++u;for(var x=o[u]||"";(x.match(/["]/g)||[]).length&1&&u<o.length-1;)x+=`
`+o[++u];switch(x=x.trim(),+f){case-1:if(x==="BOT"){p[++c]=[],d=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?p[c][d]=!0:x==="FALSE"?p[c][d]=!1:isNaN(ra(h))?isNaN(Qi(h).getDate())?p[c][d]=h:p[c][d]=ks(h):p[c][d]=ra(h),++d;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),p[c][d++]=x!==""?x:null;break}if(x==="EOD")break}}return l&&l.sheetRows&&(p=p.slice(0,l.sheetRows)),p}function r(i,l){return cl(t(i,l),l)}function a(i,l){return Tn(r(i,l),l)}var n=function(){var i=function(c,d,u,p,m){c.push(d),c.push(u+","+p),c.push('"'+m.replace(/"/g,'""')+'"')},l=function(c,d,u,p){c.push(d+","+u),c.push(d==1?'"'+p.replace(/"/g,'""')+'"':p)};return function(c){var d=[],u=Kt(c["!ref"]),p,m=Array.isArray(c);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,u.e.r-u.s.r+1,""),i(d,"TUPLES",0,u.e.c-u.s.c+1,""),i(d,"DATA",0,0,"");for(var f=u.s.r;f<=u.e.r;++f){l(d,-1,0,"BOT");for(var h=u.s.c;h<=u.e.c;++h){var x=Ye({r:f,c:h});if(p=m?(c[f]||[])[h]:c[x],!p){l(d,1,0,"");continue}switch(p.t){case"n":var g=p.w;!g&&p.v!=null&&(g=p.v),g==null?p.f&&!p.F?l(d,1,0,"="+p.f):l(d,1,0,""):l(d,0,g,"V");break;case"b":l(d,0,p.v?1:0,p.v?"TRUE":"FALSE");break;case"s":l(d,1,0,isNaN(p.v)?p.v:'="'+p.v+'"');break;case"d":p.w||(p.w=Br(p.z||Ze[14],er(ks(p.v)))),l(d,0,p.w,"V");break;default:l(d,1,0,"")}}}l(d,-1,0,"EOD");var j=`\r
`,b=d.join(j);return b}}();return{to_workbook:a,to_sheet:r,from_sheet:n}}(),S_=function(){function t(p){return p.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function s(p){return p.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(p,m){for(var f=p.split(`
`),h=-1,x=-1,g=0,j=[];g!==f.length;++g){var b=f[g].trim().split(":");if(b[0]==="cell"){var N=Ys(b[1]);if(j.length<=N.r)for(h=j.length;h<=N.r;++h)j[h]||(j[h]=[]);switch(h=N.r,x=N.c,b[2]){case"t":j[h][x]=t(b[3]);break;case"v":j[h][x]=+b[3];break;case"vtf":var C=b[b.length-1];case"vtc":switch(b[3]){case"nl":j[h][x]=!!+b[4];break;default:j[h][x]=+b[4];break}b[2]=="vtf"&&(j[h][x]=[j[h][x],C])}}}return m&&m.sheetRows&&(j=j.slice(0,m.sheetRows)),j}function a(p,m){return cl(r(p,m),m)}function n(p,m){return Tn(a(p,m),m)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),l=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(p){if(!p||!p["!ref"])return"";for(var m=[],f=[],h,x="",g=ol(p["!ref"]),j=Array.isArray(p),b=g.s.r;b<=g.e.r;++b)for(var N=g.s.c;N<=g.e.c;++N)if(x=Ye({r:b,c:N}),h=j?(p[b]||[])[N]:p[x],!(!h||h.v==null||h.t==="z")){switch(f=["cell",x,"t"],h.t){case"s":case"str":f.push(s(h.v));break;case"n":h.f?(f[2]="vtf",f[3]="n",f[4]=h.v,f[5]=s(h.f)):(f[2]="v",f[3]=h.v);break;case"b":f[2]="vt"+(h.f?"f":"c"),f[3]="nl",f[4]=h.v?"1":"0",f[5]=s(h.f||(h.v?"TRUE":"FALSE"));break;case"d":var C=er(ks(h.v));f[2]="vtc",f[3]="nd",f[4]=""+C,f[5]=h.w||Br(h.z||Ze[14],C);break;case"e":continue}m.push(f.join(":"))}return m.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function u(p){return[i,l,o,l,d(p),c].join(`
`)}return{to_workbook:n,to_sheet:a,from_sheet:u}}(),Co=function(){function t(u,p,m,f,h){h.raw?p[m][f]=u:u===""||(u==="TRUE"?p[m][f]=!0:u==="FALSE"?p[m][f]=!1:isNaN(ra(u))?isNaN(Qi(u).getDate())?p[m][f]=u:p[m][f]=ks(u):p[m][f]=ra(u))}function s(u,p){var m=p||{},f=[];if(!u||u.length===0)return f;for(var h=u.split(/[\r\n]/),x=h.length-1;x>=0&&h[x].length===0;)--x;for(var g=10,j=0,b=0;b<=x;++b)j=h[b].indexOf(" "),j==-1?j=h[b].length:j++,g=Math.max(g,j);for(b=0;b<=x;++b){f[b]=[];var N=0;for(t(h[b].slice(0,g).trim(),f,b,N,m),N=1;N<=(h[b].length-g)/10+1;++N)t(h[b].slice(g+(N-1)*10,g+N*10).trim(),f,b,N,m)}return m.sheetRows&&(f=f.slice(0,m.sheetRows)),f}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function n(u){for(var p={},m=!1,f=0,h=0;f<u.length;++f)(h=u.charCodeAt(f))==34?m=!m:!m&&h in r&&(p[h]=(p[h]||0)+1);h=[];for(f in p)Object.prototype.hasOwnProperty.call(p,f)&&h.push([p[f],f]);if(!h.length){p=a;for(f in p)Object.prototype.hasOwnProperty.call(p,f)&&h.push([p[f],f])}return h.sort(function(x,g){return x[0]-g[0]||a[x[1]]-a[g[1]]}),r[h.pop()[1]]||44}function i(u,p){var m=p||{},f="",h=m.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(f=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(f=u.charAt(4),u=u.slice(6)):f=n(u.slice(0,1024)):m&&m.FS?f=m.FS:f=n(u.slice(0,1024));var g=0,j=0,b=0,N=0,C=0,A=f.charCodeAt(0),F=!1,w=0,_=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var v=m.dateNF!=null?OS(m.dateNF):null;function S(){var R=u.slice(N,C),D={};if(R.charAt(0)=='"'&&R.charAt(R.length-1)=='"'&&(R=R.slice(1,-1).replace(/""/g,'"')),R.length===0)D.t="z";else if(m.raw)D.t="s",D.v=R;else if(R.trim().length===0)D.t="s",D.v=R;else if(R.charCodeAt(0)==61)R.charCodeAt(1)==34&&R.charCodeAt(R.length-1)==34?(D.t="s",D.v=R.slice(2,-1).replace(/""/g,'"')):uT(R)?(D.t="n",D.f=R.slice(1)):(D.t="s",D.v=R);else if(R=="TRUE")D.t="b",D.v=!0;else if(R=="FALSE")D.t="b",D.v=!1;else if(!isNaN(b=ra(R)))D.t="n",m.cellText!==!1&&(D.w=R),D.v=b;else if(!isNaN(Qi(R).getDate())||v&&R.match(v)){D.z=m.dateNF||Ze[14];var V=0;v&&R.match(v)&&(R=IS(R,m.dateNF,R.match(v)||[]),V=1),m.cellDates?(D.t="d",D.v=ks(R,V)):(D.t="n",D.v=er(ks(R,V))),m.cellText!==!1&&(D.w=Br(D.z,D.v instanceof Date?er(D.v):D.v)),m.cellNF||delete D.z}else D.t="s",D.v=R;if(D.t=="z"||(m.dense?(h[g]||(h[g]=[]),h[g][j]=D):h[Ye({c:j,r:g})]=D),N=C+1,_=u.charCodeAt(N),x.e.c<j&&(x.e.c=j),x.e.r<g&&(x.e.r=g),w==A)++j;else if(j=0,++g,m.sheetRows&&m.sheetRows<=g)return!0}e:for(;C<u.length;++C)switch(w=u.charCodeAt(C)){case 34:_===34&&(F=!F);break;case A:case 10:case 13:if(!F&&S())break e;break}return C-N>0&&S(),h["!ref"]=yt(x),h}function l(u,p){return!(p&&p.PRN)||p.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,p):cl(s(u,p),p)}function o(u,p){var m="",f=p.type=="string"?[0,0,0,0]:Um(u,p);switch(p.type){case"base64":m=Nr(u);break;case"binary":m=u;break;case"buffer":p.codepage==65001?m=u.toString("utf8"):p.codepage&&typeof No<"u"||(m=ht&&Buffer.isBuffer(u)?u.toString("binary"):di(u));break;case"array":m=ai(u);break;case"string":m=u;break;default:throw new Error("Unrecognized type "+p.type)}return f[0]==239&&f[1]==187&&f[2]==191?m=Lt(m.slice(3)):p.type!="string"&&p.type!="buffer"&&p.codepage==65001?m=Lt(m):p.type=="binary"&&typeof No<"u",m.slice(0,19)=="socialcalc:version:"?S_.to_sheet(p.type=="string"?m:Lt(m),p):l(m,p)}function c(u,p){return Tn(o(u,p),p)}function d(u){for(var p=[],m=Kt(u["!ref"]),f,h=Array.isArray(u),x=m.s.r;x<=m.e.r;++x){for(var g=[],j=m.s.c;j<=m.e.c;++j){var b=Ye({r:x,c:j});if(f=h?(u[x]||[])[j]:u[b],!f||f.v==null){g.push("          ");continue}for(var N=(f.w||(za(f),f.w)||"").slice(0,10);N.length<10;)N+=" ";g.push(N+(j===0?" ":""))}p.push(g.join(""))}return p.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:d}}();function C_(t,s){var r=s||{},a=!!r.WTF;r.WTF=!0;try{var n=w_.to_workbook(t,r);return r.WTF=a,n}catch(i){if(r.WTF=a,!i.message.match(/SYLK bad record ID/)&&a)throw i;return Co.to_workbook(t,s)}}var Jl=function(){function t(B,L,H){if(B){_s(B,B.l||0);for(var K=H.Enum||X;B.l<B.length;){var J=B.read_shift(2),re=K[J]||K[65535],q=B.read_shift(2),ae=B.l+q,xe=re.f&&re.f(B,q,H);if(B.l=ae,L(xe,re,J))return}}}function s(B,L){switch(L.type){case"base64":return r(Xr(Nr(B)),L);case"binary":return r(Xr(B),L);case"buffer":case"array":return r(B,L)}throw"Unsupported type "+L.type}function r(B,L){if(!B)return B;var H=L||{},K=H.dense?[]:{},J="Sheet1",re="",q=0,ae={},xe=[],_e=[],Y={s:{r:0,c:0},e:{r:0,c:0}},Fe=H.sheetRows||0;if(B[2]==0&&(B[3]==8||B[3]==9)&&B.length>=16&&B[14]==5&&B[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(B[2]==2)H.Enum=X,t(B,function(ve,et,wt){switch(wt){case 0:H.vers=ve,ve>=4096&&(H.qpro=!0);break;case 6:Y=ve;break;case 204:ve&&(re=ve);break;case 222:re=ve;break;case 15:case 51:H.qpro||(ve[1].v=ve[1].v.slice(1));case 13:case 14:case 16:wt==14&&(ve[2]&112)==112&&(ve[2]&15)>1&&(ve[2]&15)<15&&(ve[1].z=H.dateNF||Ze[14],H.cellDates&&(ve[1].t="d",ve[1].v=Wd(ve[1].v))),H.qpro&&ve[3]>q&&(K["!ref"]=yt(Y),ae[J]=K,xe.push(J),K=H.dense?[]:{},Y={s:{r:0,c:0},e:{r:0,c:0}},q=ve[3],J=re||"Sheet"+(q+1),re="");var fe=H.dense?(K[ve[0].r]||[])[ve[0].c]:K[Ye(ve[0])];if(fe){fe.t=ve[1].t,fe.v=ve[1].v,ve[1].z!=null&&(fe.z=ve[1].z),ve[1].f!=null&&(fe.f=ve[1].f);break}H.dense?(K[ve[0].r]||(K[ve[0].r]=[]),K[ve[0].r][ve[0].c]=ve[1]):K[Ye(ve[0])]=ve[1];break}},H);else if(B[2]==26||B[2]==14)H.Enum=se,B[2]==14&&(H.qpro=!0,B.l=0),t(B,function(ve,et,wt){switch(wt){case 204:J=ve;break;case 22:ve[1].v=ve[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ve[3]>q&&(K["!ref"]=yt(Y),ae[J]=K,xe.push(J),K=H.dense?[]:{},Y={s:{r:0,c:0},e:{r:0,c:0}},q=ve[3],J="Sheet"+(q+1)),Fe>0&&ve[0].r>=Fe)break;H.dense?(K[ve[0].r]||(K[ve[0].r]=[]),K[ve[0].r][ve[0].c]=ve[1]):K[Ye(ve[0])]=ve[1],Y.e.c<ve[0].c&&(Y.e.c=ve[0].c),Y.e.r<ve[0].r&&(Y.e.r=ve[0].r);break;case 27:ve[14e3]&&(_e[ve[14e3][0]]=ve[14e3][1]);break;case 1537:_e[ve[0]]=ve[1],ve[0]==q&&(J=ve[1]);break}},H);else throw new Error("Unrecognized LOTUS BOF "+B[2]);if(K["!ref"]=yt(Y),ae[re||J]=K,xe.push(re||J),!_e.length)return{SheetNames:xe,Sheets:ae};for(var Be={},He=[],Le=0;Le<_e.length;++Le)ae[xe[Le]]?(He.push(_e[Le]||xe[Le]),Be[_e[Le]]=ae[_e[Le]]||ae[xe[Le]]):(He.push(_e[Le]),Be[_e[Le]]={"!ref":"A1"});return{SheetNames:He,Sheets:Be}}function a(B,L){var H=L||{};if(+H.codepage>=0&&Qr(+H.codepage),H.type=="string")throw new Error("Cannot write WK1 to JS string");var K=Yu(),J=Kt(B["!ref"]),re=Array.isArray(B),q=[];Vr(K,0,i(1030)),Vr(K,6,c(J));for(var ae=Math.min(J.e.r,8191),xe=J.s.r;xe<=ae;++xe)for(var _e=Fs(xe),Y=J.s.c;Y<=J.e.c;++Y){xe===J.s.r&&(q[Y]=ps(Y));var Fe=q[Y]+_e,Be=re?(B[xe]||[])[Y]:B[Fe];if(!(!Be||Be.t=="z"))if(Be.t=="n")(Be.v|0)==Be.v&&Be.v>=-32768&&Be.v<=32767?Vr(K,13,f(xe,Y,Be.v)):Vr(K,14,x(xe,Y,Be.v));else{var He=za(Be);Vr(K,15,p(xe,Y,He.slice(0,239)))}}return Vr(K,1),K.end()}function n(B,L){var H=L||{};if(+H.codepage>=0&&Qr(+H.codepage),H.type=="string")throw new Error("Cannot write WK3 to JS string");var K=Yu();Vr(K,0,l(B));for(var J=0,re=0;J<B.SheetNames.length;++J)(B.Sheets[B.SheetNames[J]]||{})["!ref"]&&Vr(K,27,k(B.SheetNames[J],re++));var q=0;for(J=0;J<B.SheetNames.length;++J){var ae=B.Sheets[B.SheetNames[J]];if(!(!ae||!ae["!ref"])){for(var xe=Kt(ae["!ref"]),_e=Array.isArray(ae),Y=[],Fe=Math.min(xe.e.r,8191),Be=xe.s.r;Be<=Fe;++Be)for(var He=Fs(Be),Le=xe.s.c;Le<=xe.e.c;++Le){Be===xe.s.r&&(Y[Le]=ps(Le));var ve=Y[Le]+He,et=_e?(ae[Be]||[])[Le]:ae[ve];if(!(!et||et.t=="z"))if(et.t=="n")Vr(K,23,S(Be,Le,q,et.v));else{var wt=za(et);Vr(K,22,w(Be,Le,q,wt.slice(0,239)))}}++q}}return Vr(K,1),K.end()}function i(B){var L=us(2);return L.write_shift(2,B),L}function l(B){var L=us(26);L.write_shift(2,4096),L.write_shift(2,4),L.write_shift(4,0);for(var H=0,K=0,J=0,re=0;re<B.SheetNames.length;++re){var q=B.SheetNames[re],ae=B.Sheets[q];if(!(!ae||!ae["!ref"])){++J;var xe=ol(ae["!ref"]);H<xe.e.r&&(H=xe.e.r),K<xe.e.c&&(K=xe.e.c)}}return H>8191&&(H=8191),L.write_shift(2,H),L.write_shift(1,J),L.write_shift(1,K),L.write_shift(2,0),L.write_shift(2,0),L.write_shift(1,1),L.write_shift(1,2),L.write_shift(4,0),L.write_shift(4,0),L}function o(B,L,H){var K={s:{c:0,r:0},e:{c:0,r:0}};return L==8&&H.qpro?(K.s.c=B.read_shift(1),B.l++,K.s.r=B.read_shift(2),K.e.c=B.read_shift(1),B.l++,K.e.r=B.read_shift(2),K):(K.s.c=B.read_shift(2),K.s.r=B.read_shift(2),L==12&&H.qpro&&(B.l+=2),K.e.c=B.read_shift(2),K.e.r=B.read_shift(2),L==12&&H.qpro&&(B.l+=2),K.s.c==65535&&(K.s.c=K.e.c=K.s.r=K.e.r=0),K)}function c(B){var L=us(8);return L.write_shift(2,B.s.c),L.write_shift(2,B.s.r),L.write_shift(2,B.e.c),L.write_shift(2,B.e.r),L}function d(B,L,H){var K=[{c:0,r:0},{t:"n",v:0},0,0];return H.qpro&&H.vers!=20768?(K[0].c=B.read_shift(1),K[3]=B.read_shift(1),K[0].r=B.read_shift(2),B.l+=2):(K[2]=B.read_shift(1),K[0].c=B.read_shift(2),K[0].r=B.read_shift(2)),K}function u(B,L,H){var K=B.l+L,J=d(B,L,H);if(J[1].t="s",H.vers==20768){B.l++;var re=B.read_shift(1);return J[1].v=B.read_shift(re,"utf8"),J}return H.qpro&&B.l++,J[1].v=B.read_shift(K-B.l,"cstr"),J}function p(B,L,H){var K=us(7+H.length);K.write_shift(1,255),K.write_shift(2,L),K.write_shift(2,B),K.write_shift(1,39);for(var J=0;J<K.length;++J){var re=H.charCodeAt(J);K.write_shift(1,re>=128?95:re)}return K.write_shift(1,0),K}function m(B,L,H){var K=d(B,L,H);return K[1].v=B.read_shift(2,"i"),K}function f(B,L,H){var K=us(7);return K.write_shift(1,255),K.write_shift(2,L),K.write_shift(2,B),K.write_shift(2,H,"i"),K}function h(B,L,H){var K=d(B,L,H);return K[1].v=B.read_shift(8,"f"),K}function x(B,L,H){var K=us(13);return K.write_shift(1,255),K.write_shift(2,L),K.write_shift(2,B),K.write_shift(8,H,"f"),K}function g(B,L,H){var K=B.l+L,J=d(B,L,H);if(J[1].v=B.read_shift(8,"f"),H.qpro)B.l=K;else{var re=B.read_shift(2);C(B.slice(B.l,B.l+re),J),B.l+=re}return J}function j(B,L,H){var K=L&32768;return L&=-32769,L=(K?B:0)+(L>=8192?L-16384:L),(K?"":"$")+(H?ps(L):Fs(L))}var b={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},N=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function C(B,L){_s(B,0);for(var H=[],K=0,J="",re="",q="",ae="";B.l<B.length;){var xe=B[B.l++];switch(xe){case 0:H.push(B.read_shift(8,"f"));break;case 1:re=j(L[0].c,B.read_shift(2),!0),J=j(L[0].r,B.read_shift(2),!1),H.push(re+J);break;case 2:{var _e=j(L[0].c,B.read_shift(2),!0),Y=j(L[0].r,B.read_shift(2),!1);re=j(L[0].c,B.read_shift(2),!0),J=j(L[0].r,B.read_shift(2),!1),H.push(_e+Y+":"+re+J)}break;case 3:if(B.l<B.length){console.error("WK1 premature formula end");return}break;case 4:H.push("("+H.pop()+")");break;case 5:H.push(B.read_shift(2));break;case 6:{for(var Fe="";xe=B[B.l++];)Fe+=String.fromCharCode(xe);H.push('"'+Fe.replace(/"/g,'""')+'"')}break;case 8:H.push("-"+H.pop());break;case 23:H.push("+"+H.pop());break;case 22:H.push("NOT("+H.pop()+")");break;case 20:case 21:ae=H.pop(),q=H.pop(),H.push(["AND","OR"][xe-20]+"("+q+","+ae+")");break;default:if(xe<32&&N[xe])ae=H.pop(),q=H.pop(),H.push(q+N[xe]+ae);else if(b[xe]){if(K=b[xe][1],K==69&&(K=B[B.l++]),K>H.length){console.error("WK1 bad formula parse 0x"+xe.toString(16)+":|"+H.join("|")+"|");return}var Be=H.slice(-K);H.length-=K,H.push(b[xe][0]+"("+Be.join(",")+")")}else return xe<=7?console.error("WK1 invalid opcode "+xe.toString(16)):xe<=24?console.error("WK1 unsupported op "+xe.toString(16)):xe<=30?console.error("WK1 invalid opcode "+xe.toString(16)):xe<=115?console.error("WK1 unsupported function opcode "+xe.toString(16)):console.error("WK1 unrecognized opcode "+xe.toString(16))}}H.length==1?L[1].f=""+H[0]:console.error("WK1 bad formula parse |"+H.join("|")+"|")}function A(B){var L=[{c:0,r:0},{t:"n",v:0},0];return L[0].r=B.read_shift(2),L[3]=B[B.l++],L[0].c=B[B.l++],L}function F(B,L){var H=A(B);return H[1].t="s",H[1].v=B.read_shift(L-4,"cstr"),H}function w(B,L,H,K){var J=us(6+K.length);J.write_shift(2,B),J.write_shift(1,H),J.write_shift(1,L),J.write_shift(1,39);for(var re=0;re<K.length;++re){var q=K.charCodeAt(re);J.write_shift(1,q>=128?95:q)}return J.write_shift(1,0),J}function _(B,L){var H=A(B);H[1].v=B.read_shift(2);var K=H[1].v>>1;if(H[1].v&1)switch(K&7){case 0:K=(K>>3)*5e3;break;case 1:K=(K>>3)*500;break;case 2:K=(K>>3)/20;break;case 3:K=(K>>3)/200;break;case 4:K=(K>>3)/2e3;break;case 5:K=(K>>3)/2e4;break;case 6:K=(K>>3)/16;break;case 7:K=(K>>3)/64;break}return H[1].v=K,H}function v(B,L){var H=A(B),K=B.read_shift(4),J=B.read_shift(4),re=B.read_shift(2);if(re==65535)return K===0&&J===3221225472?(H[1].t="e",H[1].v=15):K===0&&J===3489660928?(H[1].t="e",H[1].v=42):H[1].v=0,H;var q=re&32768;return re=(re&32767)-16446,H[1].v=(1-q*2)*(J*Math.pow(2,re+32)+K*Math.pow(2,re)),H}function S(B,L,H,K){var J=us(14);if(J.write_shift(2,B),J.write_shift(1,H),J.write_shift(1,L),K==0)return J.write_shift(4,0),J.write_shift(4,0),J.write_shift(2,65535),J;var re=0,q=0,ae=0,xe=0;return K<0&&(re=1,K=-K),q=Math.log2(K)|0,K/=Math.pow(2,q-31),xe=K>>>0,xe&2147483648||(K/=2,++q,xe=K>>>0),K-=xe,xe|=2147483648,xe>>>=0,K*=Math.pow(2,32),ae=K>>>0,J.write_shift(4,ae),J.write_shift(4,xe),q+=16383+(re?32768:0),J.write_shift(2,q),J}function R(B,L){var H=v(B);return B.l+=L-14,H}function D(B,L){var H=A(B),K=B.read_shift(4);return H[1].v=K>>6,H}function V(B,L){var H=A(B),K=B.read_shift(8,"f");return H[1].v=K,H}function O(B,L){var H=V(B);return B.l+=L-10,H}function I(B,L){return B[B.l+L-1]==0?B.read_shift(L,"cstr"):""}function z(B,L){var H=B[B.l++];H>L-1&&(H=L-1);for(var K="";K.length<H;)K+=String.fromCharCode(B[B.l++]);return K}function Q(B,L,H){if(!(!H.qpro||L<21)){var K=B.read_shift(1);B.l+=17,B.l+=1,B.l+=2;var J=B.read_shift(L-21,"cstr");return[K,J]}}function P(B,L){for(var H={},K=B.l+L;B.l<K;){var J=B.read_shift(2);if(J==14e3){for(H[J]=[0,""],H[J][0]=B.read_shift(2);B[B.l];)H[J][1]+=String.fromCharCode(B[B.l]),B.l++;B.l++}}return H}function k(B,L){var H=us(5+B.length);H.write_shift(2,14e3),H.write_shift(2,L);for(var K=0;K<B.length;++K){var J=B.charCodeAt(K);H[H.l++]=J>127?95:J}return H[H.l++]=0,H}var X={0:{n:"BOF",f:ns},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:h},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:I},222:{n:"SHEETNAMELP",f:z},65535:{n:""}},se={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:F},23:{n:"NUMBER17",f:v},24:{n:"NUMBER18",f:_},25:{n:"FORMULA19",f:R},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:P},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:D},38:{n:"??"},39:{n:"NUMBER27",f:V},40:{n:"FORMULA28",f:O},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:I},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Q},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:n,to_workbook:s}}();function __(t){var s={},r=t.match(Vs),a=0,n=!1;if(r)for(;a!=r.length;++a){var i=qe(r[a]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":s.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;s.cp=pm[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":s.outline=1;break;case"</outline>":break;case"<rFont":s.name=i.val;break;case"<sz":s.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":s.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":s.uval="double";break;case"singleAccounting":s.uval="single-accounting";break;case"doubleAccounting":s.uval="double-accounting";break}case"<u>":case"<u/>":s.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":s.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":s.i=1;break;case"</i>":break;case"<color":i.rgb&&(s.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":s.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":s.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(i[0].charCodeAt(1)!==47&&!n)throw new Error("Unrecognized rich format "+i[0])}}return s}var T_=function(){var t=ko("t"),s=ko("rPr");function r(i){var l=i.match(t);if(!l)return{t:"s",v:""};var o={t:"s",v:Nt(l[1])},c=i.match(s);return c&&(o.s=__(c[1])),o}var a=/<(?:\w+:)?r>/g,n=/<\/(?:\w+:)?r>/;return function(l){return l.replace(a,"").split(n).map(r).filter(function(o){return o.v})}}(),E_=function(){var s=/(\r\n|\n)/g;function r(n,i,l){var o=[];n.u&&o.push("text-decoration: underline;"),n.uval&&o.push("text-underline-style:"+n.uval+";"),n.sz&&o.push("font-size:"+n.sz+"pt;"),n.outline&&o.push("text-effect: outline;"),n.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),n.b&&(i.push("<b>"),l.push("</b>")),n.i&&(i.push("<i>"),l.push("</i>")),n.strike&&(i.push("<s>"),l.push("</s>"));var c=n.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),l.push("</"+c+">")),l.push("</span>"),n}function a(n){var i=[[],n.v,[]];return n.v?(n.s&&r(n.s,i[0],i[2]),i[0].join("")+i[1].replace(s,"<br/>")+i[2].join("")):""}return function(i){return i.map(a).join("")}}(),F_=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,A_=/<(?:\w+:)?r>/,P_=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function Dm(t,s){var r=s?s.cellHTML:!0,a={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=Nt(Lt(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=Lt(t),r&&(a.h=wm(a.t))):t.match(A_)&&(a.r=Lt(t),a.t=Nt(Lt((t.replace(P_,"").match(F_)||[]).join("").replace(Vs,""))),r&&(a.h=E_(T_(a.r)))),a):{t:""}}var D_=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,R_=/<(?:\w+:)?(?:si|sstItem)>/g,L_=/<\/(?:\w+:)?(?:si|sstItem)>/;function O_(t,s){var r=[],a="";if(!t)return r;var n=t.match(D_);if(n){a=n[2].replace(R_,"").split(L_);for(var i=0;i!=a.length;++i){var l=Dm(a[i].trim(),s);l!=null&&(r[r.length]=l)}n=qe(n[1]),r.Count=n.count,r.Unique=n.uniqueCount}return r}function I_(t){return[t.read_shift(4),t.read_shift(4)]}function M_(t,s){var r=[],a=!1;return Ha(t,function(i,l,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(l.T,!a||s.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Jv(t){for(var s=[],r=t.split(""),a=0;a<r.length;++a)s[a]=r[a].charCodeAt(0);return s}function La(t,s){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),s>=4&&(t.l+=s-4),r}function B_(t){var s={};return s.id=t.read_shift(0,"lpp4"),s.R=La(t,4),s.U=La(t,4),s.W=La(t,4),s}function U_(t){for(var s=t.read_shift(4),r=t.l+s-4,a={},n=t.read_shift(4),i=[];n-- >0;)i.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(a.name=t.read_shift(0,"lpp4"),a.comps=i,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return a}function $_(t){var s=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)s.push(U_(t));return s}function z_(t){var s=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)s.push(t.read_shift(0,"lpp4"));return s}function W_(t){var s={};return t.read_shift(4),t.l+=4,s.id=t.read_shift(0,"lpp4"),s.name=t.read_shift(0,"lpp4"),s.R=La(t,4),s.U=La(t,4),s.W=La(t,4),s}function V_(t){var s=W_(t);if(s.ename=t.read_shift(0,"8lpp4"),s.blksz=t.read_shift(4),s.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return s}function Kv(t,s){var r=t.l+s,a={};a.Flags=t.read_shift(4)&63,t.l+=4,a.AlgID=t.read_shift(4);var n=!1;switch(a.AlgID){case 26126:case 26127:case 26128:n=a.Flags==36;break;case 26625:n=a.Flags==4;break;case 0:n=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!n)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=t.read_shift(4),a.KeySize=t.read_shift(4),a.ProviderType=t.read_shift(4),t.l+=8,a.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,a}function Yv(t,s){var r={},a=t.l+s;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,a),t.l=a,r}function H_(t){var s=La(t);switch(s.Minor){case 2:return[s.Minor,G_(t)];case 3:return[s.Minor,q_()];case 4:return[s.Minor,J_(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+s.Minor)}function G_(t){var s=t.read_shift(4);if((s&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),a=Kv(t,r),n=Yv(t,t.length-t.l);return{t:"Std",h:a,v:n}}function q_(){throw new Error("File is password-protected: ECMA-376 Extensible")}function J_(t){var s=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),a={};return r.replace(Vs,function(i){var l=qe(i);switch(Na(l[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":s.forEach(function(o){a[o]=l[o]});break;case"<dataIntegrity":a.encryptedHmacKey=l.encryptedHmacKey,a.encryptedHmacValue=l.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=l.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(l);break;default:throw l[0]}}),a}function K_(t,s){var r={},a=r.EncryptionVersionInfo=La(t,4);if(s-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);r.Flags=t.read_shift(4),s-=4;var n=t.read_shift(4);return s-=4,r.EncryptionHeader=Kv(t,n),s-=n,r.EncryptionVerifier=Yv(t,s),r}function Y_(t){var s={},r=s.EncryptionVersionInfo=La(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return s.Salt=t.read_shift(16),s.EncryptedVerifier=t.read_shift(16),s.EncryptedVerifierHash=t.read_shift(16),s}function X_(t){var s=0,r,a=Jv(t),n=a.length+1,i,l,o,c,d;for(r=Nn(n),r[0]=a.length,i=1;i!=n;++i)r[i]=a[i-1];for(i=n-1;i>=0;--i)l=r[i],o=s&16384?1:0,c=s<<1&32767,d=o|c,s=d^l;return s^52811}var Xv=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],s=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(l){return(l/2|l*128)&255},n=function(l,o){return a(l^o)},i=function(l){for(var o=s[l.length-1],c=104,d=l.length-1;d>=0;--d)for(var u=l[d],p=0;p!=7;++p)u&64&&(o^=r[c]),u*=2,--c;return o};return function(l){for(var o=Jv(l),c=i(o),d=o.length,u=Nn(16),p=0;p!=16;++p)u[p]=0;var m,f,h;for((d&1)===1&&(m=c>>8,u[d]=n(t[0],m),--d,m=c&255,f=o[o.length-1],u[d]=n(f,m));d>0;)--d,m=c>>8,u[d]=n(o[d],m),--d,m=c&255,u[d]=n(o[d],m);for(d=15,h=15-o.length;h>0;)m=c>>8,u[d]=n(t[h],m),--d,--h,m=c&255,u[d]=n(o[d],m),--d,--h;return u}}(),Q_=function(t,s,r,a,n){n||(n=s),a||(a=Xv(t));var i,l;for(i=0;i!=s.length;++i)l=s[i],l^=a[r],l=(l>>5|l<<3)&255,n[i]=l,++r;return[n,r,a]},Z_=function(t){var s=0,r=Xv(t);return function(a){var n=Q_("",a,s,r);return s=n[1],n[0]}};function e5(t,s,r,a){var n={key:ns(t),verificationBytes:ns(t)};return r.password&&(n.verifier=X_(r.password)),a.valid=n.verificationBytes===n.verifier,a.valid&&(a.insitu=Z_(r.password)),n}function t5(t,s,r){var a=r||{};return a.Info=t.read_shift(2),t.l-=2,a.Info===1?a.Data=Y_(t):a.Data=K_(t,s),a}function s5(t,s,r){var a={Type:r.biff>=8?t.read_shift(2):0};return a.Type?t5(t,s-2,a):e5(t,r.biff>=8?s:s-2,r,a),a}var r5=function(){function t(n,i){switch(i.type){case"base64":return s(Nr(n),i);case"binary":return s(n,i);case"buffer":return s(ht&&Buffer.isBuffer(n)?n.toString("binary"):di(n),i);case"array":return s(ai(n),i)}throw new Error("Unrecognized type "+i.type)}function s(n,i){var l=i||{},o=l.dense?[]:{},c=n.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,p){Array.isArray(o)&&(o[p]=[]);for(var m=/\\\w+\b/g,f=0,h,x=-1;h=m.exec(u);){switch(h[0]){case"\\cell":var g=u.slice(f,m.lastIndex-h[0].length);if(g[0]==" "&&(g=g.slice(1)),++x,g.length){var j={v:g,t:"s"};Array.isArray(o)?o[p][x]=j:o[Ye({r:p,c:x})]=j}break}f=m.lastIndex}x>d.e.c&&(d.e.c=x)}),o["!ref"]=yt(d),o}function r(n,i){return Tn(t(n,i),i)}function a(n){for(var i=["{\\rtf1\\ansi"],l=Kt(n["!ref"]),o,c=Array.isArray(n),d=l.s.r;d<=l.e.r;++d){i.push("\\trowd\\trautofit1");for(var u=l.s.c;u<=l.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=l.s.c;u<=l.e.c;++u){var p=Ye({r:d,c:u});o=c?(n[d]||[])[u]:n[p],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(za(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:a}}();function a5(t){var s=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(s.slice(0,2),16),parseInt(s.slice(2,4),16),parseInt(s.slice(4,6),16)]}function _o(t){for(var s=0,r=1;s!=3;++s)r=r*256+(t[s]>255?255:t[s]<0?0:t[s]);return r.toString(16).toUpperCase().slice(1)}function n5(t){var s=t[0]/255,r=t[1]/255,a=t[2]/255,n=Math.max(s,r,a),i=Math.min(s,r,a),l=n-i;if(l===0)return[0,0,s];var o=0,c=0,d=n+i;switch(c=l/(d>1?2-d:d),n){case s:o=((r-a)/l+6)%6;break;case r:o=(a-s)/l+2;break;case a:o=(s-r)/l+4;break}return[o/6,c,d/2]}function i5(t){var s=t[0],r=t[1],a=t[2],n=r*2*(a<.5?a:1-a),i=a-n/2,l=[i,i,i],o=6*s,c;if(r!==0)switch(o|0){case 0:case 6:c=n*o,l[0]+=n,l[1]+=c;break;case 1:c=n*(2-o),l[0]+=c,l[1]+=n;break;case 2:c=n*(o-2),l[1]+=n,l[2]+=c;break;case 3:c=n*(4-o),l[1]+=c,l[2]+=n;break;case 4:c=n*(o-4),l[2]+=n,l[0]+=c;break;case 5:c=n*(6-o),l[2]+=c,l[0]+=n;break}for(var d=0;d!=3;++d)l[d]=Math.round(l[d]*255);return l}function gd(t,s){if(s===0)return t;var r=n5(a5(t));return s<0?r[2]=r[2]*(1+s):r[2]=1-(1-r[2])*(1-s),_o(i5(r))}var Qv=6,l5=15,o5=1,Ks=Qv;function yd(t){return Math.floor((t+Math.round(128/Ks)/256)*Ks)}function bd(t){return Math.floor((t-5)/Ks*100+.5)/100}function ex(t){return Math.round((t*Ks+5)/Ks*256)/256}function A0(t){return ex(bd(yd(t)))}function Rm(t){var s=Math.abs(t-A0(t)),r=Ks;if(s>.005)for(Ks=o5;Ks<l5;++Ks)Math.abs(t-A0(t))<=s&&(s=Math.abs(t-A0(t)),r=Ks);Ks=r}function Zi(t){t.width?(t.wpx=yd(t.width),t.wch=bd(t.wpx),t.MDW=Ks):t.wpx?(t.wch=bd(t.wpx),t.width=ex(t.wch),t.MDW=Ks):typeof t.wch=="number"&&(t.width=ex(t.wch),t.wpx=yd(t.width),t.MDW=Ks),t.customWidth&&delete t.customWidth}var c5=96,Zv=c5;function ej(t){return t*96/Zv}function To(t){return t*Zv/96}var d5={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function u5(t,s,r,a){s.Borders=[];var n={},i=!1;(t[0].match(Vs)||[]).forEach(function(l){var o=qe(l);switch(Na(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":n={},o.diagonalUp&&(n.diagonalUp=Ut(o.diagonalUp)),o.diagonalDown&&(n.diagonalDown=Ut(o.diagonalDown)),s.Borders.push(n);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function x5(t,s,r,a){s.Fills=[];var n={},i=!1;(t[0].match(Vs)||[]).forEach(function(l){var o=qe(l);switch(Na(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":n={},s.Fills.push(n);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":s.Fills.push(n),n={};break;case"<patternFill":case"<patternFill>":o.patternType&&(n.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":n.bgColor||(n.bgColor={}),o.indexed&&(n.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(n.bgColor.theme=parseInt(o.theme,10)),o.tint&&(n.bgColor.tint=parseFloat(o.tint)),o.rgb&&(n.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":n.fgColor||(n.fgColor={}),o.theme&&(n.fgColor.theme=parseInt(o.theme,10)),o.tint&&(n.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(n.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function m5(t,s,r,a){s.Fonts=[];var n={},i=!1;(t[0].match(Vs)||[]).forEach(function(l){var o=qe(l);switch(Na(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":s.Fonts.push(n),n={};break;case"<name":o.val&&(n.name=Lt(o.val));break;case"<name/>":case"</name>":break;case"<b":n.bold=o.val?Ut(o.val):1;break;case"<b/>":n.bold=1;break;case"<i":n.italic=o.val?Ut(o.val):1;break;case"<i/>":n.italic=1;break;case"<u":switch(o.val){case"none":n.underline=0;break;case"single":n.underline=1;break;case"double":n.underline=2;break;case"singleAccounting":n.underline=33;break;case"doubleAccounting":n.underline=34;break}break;case"<u/>":n.underline=1;break;case"<strike":n.strike=o.val?Ut(o.val):1;break;case"<strike/>":n.strike=1;break;case"<outline":n.outline=o.val?Ut(o.val):1;break;case"<outline/>":n.outline=1;break;case"<shadow":n.shadow=o.val?Ut(o.val):1;break;case"<shadow/>":n.shadow=1;break;case"<condense":n.condense=o.val?Ut(o.val):1;break;case"<condense/>":n.condense=1;break;case"<extend":n.extend=o.val?Ut(o.val):1;break;case"<extend/>":n.extend=1;break;case"<sz":o.val&&(n.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(n.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(n.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(n.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=pm[parseInt(o.val,10)];break;case"<color":if(n.color||(n.color={}),o.auto&&(n.color.auto=Ut(o.auto)),o.rgb)n.color.rgb=o.rgb.slice(-6);else if(o.indexed){n.color.index=parseInt(o.indexed,10);var c=Kn[n.color.index];n.color.index==81&&(c=Kn[1]),c||(c=Kn[1]),n.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(n.color.theme=parseInt(o.theme,10),o.tint&&(n.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(n.color.rgb=gd(r.themeElements.clrScheme[n.color.theme].rgb,n.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function h5(t,s,r){s.NumberFmt=[];for(var a=ya(Ze),n=0;n<a.length;++n)s.NumberFmt[a[n]]=Ze[a[n]];var i=t[0].match(Vs);if(i)for(n=0;n<i.length;++n){var l=qe(i[n]);switch(Na(l[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Nt(Lt(l.formatCode)),c=parseInt(l.numFmtId,10);if(s.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&s.NumberFmt[c]!=null;--c);s.NumberFmt[c]=o}Jn(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+l[0]+" in numFmts")}}}var hc=["numFmtId","fillId","fontId","borderId","xfId"],fc=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function f5(t,s,r){s.CellXf=[];var a,n=!1;(t[0].match(Vs)||[]).forEach(function(i){var l=qe(i),o=0;switch(Na(l[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=l,delete a[0],o=0;o<hc.length;++o)a[hc[o]]&&(a[hc[o]]=parseInt(a[hc[o]],10));for(o=0;o<fc.length;++o)a[fc[o]]&&(a[fc[o]]=Ut(a[fc[o]]));if(s.NumberFmt&&a.numFmtId>392){for(o=392;o>60;--o)if(s.NumberFmt[a.numFmtId]==s.NumberFmt[o]){a.numFmtId=o;break}}s.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};l.vertical&&(c.vertical=l.vertical),l.horizontal&&(c.horizontal=l.horizontal),l.textRotation!=null&&(c.textRotation=l.textRotation),l.indent&&(c.indent=l.indent),l.wrapText&&(c.wrapText=Ut(l.wrapText)),a.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":n=!0;break;case"</AlternateContent>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(r&&r.WTF&&!n)throw new Error("unrecognized "+l[0]+" in cellXfs")}})}var p5=function(){var s=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,n=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,d){var u={};if(!o)return u;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var p;return(p=o.match(s))&&h5(p,u,d),(p=o.match(n))&&m5(p,u,c,d),(p=o.match(a))&&x5(p,u,c,d),(p=o.match(i))&&u5(p,u,c,d),(p=o.match(r))&&f5(p,u,d),u}}();function g5(t,s){var r=t.read_shift(2),a=$s(t);return[r,a]}function y5(t,s,r){var a={};a.sz=t.read_shift(2)/20;var n=T6(t);n.fItalic&&(a.italic=1),n.fCondense&&(a.condense=1),n.fExtend&&(a.extend=1),n.fShadow&&(a.shadow=1),n.fOutline&&(a.outline=1),n.fStrikeout&&(a.strike=1);var i=t.read_shift(2);switch(i===700&&(a.bold=1),t.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var l=t.read_shift(1);l!=0&&(a.underline=l);var o=t.read_shift(1);o>0&&(a.family=o);var c=t.read_shift(1);switch(c>0&&(a.charset=c),t.l++,a.color=_6(t),t.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=$s(t),a}var b5=Ws;function v5(t,s){var r=t.l+s,a=t.read_shift(2),n=t.read_shift(2);return t.l=r,{ixfe:a,numFmtId:n}}var j5=Ws;function N5(t,s,r){var a={};a.NumberFmt=[];for(var n in Ze)a.NumberFmt[n]=Ze[n];a.CellXf=[],a.Fonts=[];var i=[],l=!1;return Ha(t,function(c,d,u){switch(u){case 44:a.NumberFmt[c[0]]=c[1],Jn(c[1],c[0]);break;case 43:a.Fonts.push(c),c.color.theme!=null&&s&&s.themeElements&&s.themeElements.clrScheme&&(c.color.rgb=gd(s.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&a.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:i.push(u),l=!0;break;case 38:i.pop(),l=!1;break;default:if(d.T>0)i.push(u);else if(d.T<0)i.pop();else if(!l||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),a}var w5=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function k5(t,s,r){s.themeElements.clrScheme=[];var a={};(t[0].match(Vs)||[]).forEach(function(n){var i=qe(n);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=i.val;break;case"<a:sysClr":a.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(s.themeElements.clrScheme[w5.indexOf(i[0])]=a,a={}):a.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function S5(){}function C5(){}var _5=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,T5=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,E5=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function F5(t,s,r){s.themeElements={};var a;[["clrScheme",_5,k5],["fontScheme",T5,S5],["fmtScheme",E5,C5]].forEach(function(n){if(!(a=t.match(n[1])))throw new Error(n[0]+" not found in themeElements");n[2](a,s,r)})}var A5=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function tj(t,s){(!t||t.length===0)&&(t=P5());var r,a={};if(!(r=t.match(A5)))throw new Error("themeElements not found in theme");return F5(r[0],a,s),a.raw=t,a}function P5(t,s){var r=[xv];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function D5(t,s,r){var a=t.l+s,n=t.read_shift(4);if(n!==124226){if(!r.cellStyles){t.l=a;return}var i=t.slice(t.l);t.l=a;var l;try{l=uv(i,{type:"array"})}catch{return}var o=gr(l,"theme/theme/theme1.xml",!0);if(o)return tj(o,r)}}function R5(t){return t.read_shift(4)}function L5(t){var s={};switch(s.xclrType=t.read_shift(2),s.nTintShade=t.read_shift(2),s.xclrType){case 0:t.l+=4;break;case 1:s.xclrValue=O5(t,4);break;case 2:s.xclrValue=$v(t);break;case 3:s.xclrValue=R5(t);break;case 4:t.l+=4;break}return t.l+=8,s}function O5(t,s){return Ws(t,s)}function I5(t,s){return Ws(t,s)}function M5(t){var s=t.read_shift(2),r=t.read_shift(2)-4,a=[s];switch(s){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=L5(t);break;case 6:a[1]=I5(t,r);break;case 14:case 15:a[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+s+" "+r)}return a}function B5(t,s){var r=t.l+s;t.l+=2;var a=t.read_shift(2);t.l+=2;for(var n=t.read_shift(2),i=[];n-- >0;)i.push(M5(t,r-t.l));return{ixfe:a,ext:i}}function U5(t,s){s.forEach(function(r){switch(r[0]){}})}function $5(t,s){return{flags:t.read_shift(4),version:t.read_shift(4),name:$s(t)}}function z5(t){for(var s=[],r=t.read_shift(4);r-- >0;)s.push([t.read_shift(4),t.read_shift(4)]);return s}function W5(t){return t.l+=4,t.read_shift(4)!=0}function V5(t,s,r){var a={Types:[],Cell:[],Value:[]},n=r||{},i=[],l=!1,o=2;return Ha(t,function(c,d,u){switch(u){case 335:a.Types.push({name:c.name});break;case 51:c.forEach(function(p){o==1?a.Cell.push({type:a.Types[p[0]-1].name,index:p[1]}):o==0&&a.Value.push({type:a.Types[p[0]-1].name,index:p[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:i.push(u),l=!0;break;case 36:i.pop(),l=!1;break;default:if(!d.T){if(!l||n.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),a}function H5(t,s,r){var a={Types:[],Cell:[],Value:[]};if(!t)return a;var n=!1,i=2,l;return t.replace(Vs,function(o){var c=qe(o);switch(Na(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<a.Types.length;++d)a.Types[d].name==c.name&&(l=a.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?a.Cell.push({type:a.Types[c.t-1].name,index:+c.v}):i==0&&a.Value.push({type:a.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<rvb":if(!l)break;l.offsets||(l.offsets=[]),l.offsets.push(+c.i);break;default:if(!n&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),a}function G5(t){var s=[];if(!t)return s;var r=1;return(t.match(Vs)||[]).forEach(function(a){var n=qe(a);switch(n[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete n[0],n.i?r=n.i:n.i=r,s.push(n);break}}),s}function q5(t){var s={};s.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),s.r=Ye(r);var a=t.read_shift(1);return a&2&&(s.l="1"),a&8&&(s.a="1"),s}function J5(t,s,r){var a=[];return Ha(t,function(i,l,o){switch(o){case 63:a.push(i);break;default:if(!l.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),a}function K5(t,s,r,a){if(!t)return t;var n=a||{},i=!1;Ha(t,function(o,c,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||n.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},n)}function Y5(t,s){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return s["!id"][r].Target}function vp(t,s,r,a){var n=Array.isArray(t),i;s.forEach(function(l){var o=Ys(l.ref);if(n?(t[o.r]||(t[o.r]=[]),i=t[o.r][o.c]):i=t[l.ref],!i){i={t:"z"},n?t[o.r][o.c]=i:t[l.ref]=i;var c=Kt(t["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var d=yt(c);d!==t["!ref"]&&(t["!ref"]=d)}i.c||(i.c=[]);var u={a:l.author,t:l.t,r:l.r,T:r};l.h&&(u.h=l.h);for(var p=i.c.length-1;p>=0;--p){if(!r&&i.c[p].T)return;r&&!i.c[p].T&&i.c.splice(p,1)}if(r&&a){for(p=0;p<a.length;++p)if(u.a==a[p].id){u.a=a[p].name||u.a;break}}i.c.push(u)})}function X5(t,s){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],a=[],n=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);n&&n[1]&&n[1].split(/<\/\w*:?author>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=qe(o[0]),d={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},u=Ys(c.ref);if(!(s.sheetRows&&s.sheetRows<=u.r)){var p=l.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!p&&!!p[1]&&Dm(p[1])||{r:"",t:"",h:""};d.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),d.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),s.cellHTML&&(d.h=m.h),a.push(d)}}}}),a}function Q5(t,s){var r=[],a=!1,n={},i=0;return t.replace(Vs,function(o,c){var d=qe(o);switch(Na(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":n={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":n.t!=null&&r.push(n);break;case"<text>":case"<text":i=c+o.length;break;case"</text>":n.t=t.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&s.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return o}),r}function Z5(t,s){var r=[],a=!1;return t.replace(Vs,function(i){var l=qe(i);switch(Na(l[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:l.displayname,id:l.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&s.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return i}),r}function eT(t){var s={};s.iauthor=t.read_shift(4);var r=xi(t);return s.rfx=r.s,s.ref=Ye(r.s),t.l+=16,s}var tT=$s;function sT(t,s){var r=[],a=[],n={},i=!1;return Ha(t,function(o,c,d){switch(d){case 632:a.push(o);break;case 635:n=o;break;case 637:n.t=o.t,n.h=o.h,n.r=o.r;break;case 636:if(n.author=a[n.iauthor],delete n.iauthor,s.sheetRows&&n.rfx&&s.sheetRows<=n.rfx.r)break;n.t||(n.t=""),delete n.rfx,r.push(n);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}var rT="application/vnd.ms-office.vbaProject";function aT(t){var s=gt.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,a){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var n=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");gt.utils.cfb_add(s,n,t.FileIndex[a].content)}}),gt.write(s)}function nT(){return{"!type":"dialog"}}function iT(){return{"!type":"dialog"}}function lT(){return{"!type":"macro"}}function oT(){return{"!type":"macro"}}var $i=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,s={r:0,c:0};function r(a,n,i,l){var o=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),l.length==0?o=!0:l.charAt(0)=="["&&(o=!0,l=l.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,u=l.length>0?parseInt(l,10)|0:0;return o?u+=s.c:--u,c?d+=s.r:--d,n+(o?"":"$")+ps(u)+(c?"":"$")+Fs(d)}return function(n,i){return s=i,n.replace(t,r)}}(),sj=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,cT=function(){return function(s,r){return s.replace(sj,function(a,n,i,l,o,c){var d=_m(l)-(i?0:r.c),u=Cm(c)-(o?0:r.r),p=u==0?"":o?u+1:"["+u+"]",m=d==0?"":i?d+1:"["+d+"]";return n+"R"+p+"C"+m})}}();function rj(t,s){return t.replace(sj,function(r,a,n,i,l,o){return a+(n=="$"?n+i:ps(_m(i)+s.c))+(l=="$"?l+o:Fs(Cm(o)+s.r))})}function dT(t,s,r){var a=ol(s),n=a.s,i=Ys(r),l={r:i.r-n.r,c:i.c-n.c};return rj(t,l)}function uT(t){return t.length!=1}function jp(t){return t.replace(/_xlfn\./g,"")}function rs(t){t.l+=1}function wn(t,s){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function aj(t,s,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return nj(t);r.biff==12&&(a=4)}var n=t.read_shift(a),i=t.read_shift(a),l=wn(t),o=wn(t);return{s:{r:n,c:l[0],cRel:l[1],rRel:l[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function nj(t){var s=wn(t),r=wn(t),a=t.read_shift(1),n=t.read_shift(1);return{s:{r:s[0],c:a,cRel:s[1],rRel:s[2]},e:{r:r[0],c:n,cRel:r[1],rRel:r[2]}}}function xT(t,s,r){if(r.biff<8)return nj(t);var a=t.read_shift(r.biff==12?4:2),n=t.read_shift(r.biff==12?4:2),i=wn(t),l=wn(t);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:n,c:l[0],cRel:l[1],rRel:l[2]}}}function ij(t,s,r){if(r&&r.biff>=2&&r.biff<=5)return mT(t);var a=t.read_shift(r&&r.biff==12?4:2),n=wn(t);return{r:a,c:n[0],cRel:n[1],rRel:n[2]}}function mT(t){var s=wn(t),r=t.read_shift(1);return{r:s[0],c:r,cRel:s[1],rRel:s[2]}}function hT(t){var s=t.read_shift(2),r=t.read_shift(2);return{r:s,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function fT(t,s,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return pT(t);var n=t.read_shift(a>=12?4:2),i=t.read_shift(2),l=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;n>524287;)n-=1048576;if(l==1)for(;i>8191;)i=i-16384;return{r:n,c:i,cRel:l,rRel:o}}function pT(t){var s=t.read_shift(2),r=t.read_shift(1),a=(s&32768)>>15,n=(s&16384)>>14;return s&=16383,a==1&&s>=8192&&(s=s-16384),n==1&&r>=128&&(r=r-256),{r:s,c:r,cRel:n,rRel:a}}function gT(t,s,r){var a=(t[t.l++]&96)>>5,n=aj(t,r.biff>=2&&r.biff<=5?6:8,r);return[a,n]}function yT(t,s,r){var a=(t[t.l++]&96)>>5,n=t.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}var l=aj(t,i,r);return[a,n,l]}function bT(t,s,r){var a=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function vT(t,s,r){var a=(t[t.l++]&96)>>5,n=t.read_shift(2),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}return t.l+=i,[a,n]}function jT(t,s,r){var a=(t[t.l++]&96)>>5,n=xT(t,s-1,r);return[a,n]}function NT(t,s,r){var a=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[a]}function Np(t){var s=t[t.l+1]&1,r=1;return t.l+=4,[s,r]}function wT(t,s,r){t.l+=2;for(var a=t.read_shift(r&&r.biff==2?1:2),n=[],i=0;i<=a;++i)n.push(t.read_shift(r&&r.biff==2?1:2));return n}function kT(t,s,r){var a=t[t.l+1]&255?1:0;return t.l+=2,[a,t.read_shift(r&&r.biff==2?1:2)]}function ST(t,s,r){var a=t[t.l+1]&255?1:0;return t.l+=2,[a,t.read_shift(r&&r.biff==2?1:2)]}function CT(t){var s=t[t.l+1]&255?1:0;return t.l+=2,[s,t.read_shift(2)]}function _T(t,s,r){var a=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[a]}function lj(t){var s=t.read_shift(1),r=t.read_shift(1);return[s,r]}function TT(t){return t.read_shift(2),lj(t)}function ET(t){return t.read_shift(2),lj(t)}function FT(t,s,r){var a=(t[t.l]&96)>>5;t.l+=1;var n=ij(t,0,r);return[a,n]}function AT(t,s,r){var a=(t[t.l]&96)>>5;t.l+=1;var n=fT(t,0,r);return[a,n]}function PT(t,s,r){var a=(t[t.l]&96)>>5;t.l+=1;var n=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var i=ij(t,0,r);return[a,n,i]}function DT(t,s,r){var a=(t[t.l]&96)>>5;t.l+=1;var n=t.read_shift(r&&r.biff<=3?1:2);return[RE[n],dj[n],a]}function RT(t,s,r){var a=t[t.l++],n=t.read_shift(1),i=r&&r.biff<=3?[a==88?-1:0,t.read_shift(1)]:LT(t);return[n,(i[0]===0?dj:DE)[i[1]]]}function LT(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function OT(t,s,r){t.l+=r&&r.biff==2?3:4}function IT(t,s,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var a=t.read_shift(2),n=t.read_shift(r&&r.biff==2?1:2);return[a,n]}function MT(t){return t.l++,mi[t.read_shift(1)]}function BT(t){return t.l++,t.read_shift(2)}function UT(t){return t.l++,t.read_shift(1)!==0}function $T(t){return t.l++,Bs(t)}function zT(t,s,r){return t.l++,Io(t,s-1,r)}function WT(t,s){var r=[t.read_shift(1)];if(s==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Yt(t,1)?"TRUE":"FALSE",s!=12&&(t.l+=7);break;case 37:case 16:r[1]=mi[t[t.l]],t.l+=s==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Bs(t);break;case 2:r[1]=hi(t,0,{biff:s>0&&s<8?2:s});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function VT(t,s,r){for(var a=t.read_shift(r.biff==12?4:2),n=[],i=0;i!=a;++i)n.push((r.biff==12?xi:Vd)(t));return n}function HT(t,s,r){var a=0,n=0;r.biff==12?(a=t.read_shift(4),n=t.read_shift(4)):(n=1+t.read_shift(1),a=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--n==0&&(n=256));for(var i=0,l=[];i!=a&&(l[i]=[]);++i)for(var o=0;o!=n;++o)l[i][o]=WT(t,r.biff);return l}function GT(t,s,r){var a=t.read_shift(1)>>>5&3,n=!r||r.biff>=8?4:2,i=t.read_shift(n);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[a,0,i]}function qT(t,s,r){if(r.biff==5)return JT(t);var a=t.read_shift(1)>>>5&3,n=t.read_shift(2),i=t.read_shift(4);return[a,n,i]}function JT(t){var s=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var a=t.read_shift(2);return t.l+=12,[s,r,a]}function KT(t,s,r){var a=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var n=t.read_shift(r&&r.biff==2?1:2);return[a,n]}function YT(t,s,r){var a=t.read_shift(1)>>>5&3,n=t.read_shift(r&&r.biff==2?1:2);return[a,n]}function XT(t,s,r){var a=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[a]}function QT(t,s,r){var a=(t[t.l++]&96)>>5,n=t.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return t.l+=i,[a,n]}var ZT=Ws,eE=Ws,tE=Ws;function Bo(t,s,r){return t.l+=2,[hT(t)]}function Lm(t){return t.l+=6,[]}var sE=Bo,rE=Lm,aE=Lm,nE=Bo;function oj(t){return t.l+=2,[ns(t),t.read_shift(2)&1]}var iE=Bo,lE=oj,oE=Lm,cE=Bo,dE=Bo,uE=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function xE(t){t.l+=2;var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(4),n=t.read_shift(2),i=t.read_shift(2),l=uE[r>>2&31];return{ixti:s,coltype:r&3,rt:l,idx:a,c:n,C:i}}function mE(t){return t.l+=2,[t.read_shift(4)]}function hE(t,s,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function fE(t,s,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function pE(t){var s=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[s,r]}function gE(t){var s=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[s,r]}function yE(t){return t.l+=4,[0,0]}var wp={1:{n:"PtgExp",f:IT},2:{n:"PtgTbl",f:tE},3:{n:"PtgAdd",f:rs},4:{n:"PtgSub",f:rs},5:{n:"PtgMul",f:rs},6:{n:"PtgDiv",f:rs},7:{n:"PtgPower",f:rs},8:{n:"PtgConcat",f:rs},9:{n:"PtgLt",f:rs},10:{n:"PtgLe",f:rs},11:{n:"PtgEq",f:rs},12:{n:"PtgGe",f:rs},13:{n:"PtgGt",f:rs},14:{n:"PtgNe",f:rs},15:{n:"PtgIsect",f:rs},16:{n:"PtgUnion",f:rs},17:{n:"PtgRange",f:rs},18:{n:"PtgUplus",f:rs},19:{n:"PtgUminus",f:rs},20:{n:"PtgPercent",f:rs},21:{n:"PtgParen",f:rs},22:{n:"PtgMissArg",f:rs},23:{n:"PtgStr",f:zT},26:{n:"PtgSheet",f:hE},27:{n:"PtgEndSheet",f:fE},28:{n:"PtgErr",f:MT},29:{n:"PtgBool",f:UT},30:{n:"PtgInt",f:BT},31:{n:"PtgNum",f:$T},32:{n:"PtgArray",f:NT},33:{n:"PtgFunc",f:DT},34:{n:"PtgFuncVar",f:RT},35:{n:"PtgName",f:GT},36:{n:"PtgRef",f:FT},37:{n:"PtgArea",f:gT},38:{n:"PtgMemArea",f:KT},39:{n:"PtgMemErr",f:ZT},40:{n:"PtgMemNoMem",f:eE},41:{n:"PtgMemFunc",f:YT},42:{n:"PtgRefErr",f:XT},43:{n:"PtgAreaErr",f:bT},44:{n:"PtgRefN",f:AT},45:{n:"PtgAreaN",f:jT},46:{n:"PtgMemAreaN",f:pE},47:{n:"PtgMemNoMemN",f:gE},57:{n:"PtgNameX",f:qT},58:{n:"PtgRef3d",f:PT},59:{n:"PtgArea3d",f:yT},60:{n:"PtgRefErr3d",f:QT},61:{n:"PtgAreaErr3d",f:vT},255:{}},bE={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},vE={1:{n:"PtgElfLel",f:oj},2:{n:"PtgElfRw",f:cE},3:{n:"PtgElfCol",f:sE},6:{n:"PtgElfRwV",f:dE},7:{n:"PtgElfColV",f:nE},10:{n:"PtgElfRadical",f:iE},11:{n:"PtgElfRadicalS",f:oE},13:{n:"PtgElfColS",f:rE},15:{n:"PtgElfColSV",f:aE},16:{n:"PtgElfRadicalLel",f:lE},25:{n:"PtgList",f:xE},29:{n:"PtgSxName",f:mE},255:{}},jE={0:{n:"PtgAttrNoop",f:yE},1:{n:"PtgAttrSemi",f:_T},2:{n:"PtgAttrIf",f:ST},4:{n:"PtgAttrChoose",f:wT},8:{n:"PtgAttrGoto",f:kT},16:{n:"PtgAttrSum",f:OT},32:{n:"PtgAttrBaxcel",f:Np},33:{n:"PtgAttrBaxcel",f:Np},64:{n:"PtgAttrSpace",f:TT},65:{n:"PtgAttrSpaceSemi",f:ET},128:{n:"PtgAttrIfError",f:CT},255:{}};function Uo(t,s,r,a){if(a.biff<8)return Ws(t,s);for(var n=t.l+s,i=[],l=0;l!==r.length;++l)switch(r[l][0]){case"PtgArray":r[l][1]=HT(t,0,a),i.push(r[l][1]);break;case"PtgMemArea":r[l][2]=VT(t,r[l][1],a),i.push(r[l][2]);break;case"PtgExp":a&&a.biff==12&&(r[l][1][1]=t.read_shift(4),i.push(r[l][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[l][0]}return s=n-t.l,s!==0&&i.push(Ws(t,s)),i}function $o(t,s,r){for(var a=t.l+s,n,i,l=[];a!=t.l;)s=a-t.l,i=t[t.l],n=wp[i]||wp[bE[i]],(i===24||i===25)&&(n=(i===24?vE:jE)[t[t.l+1]]),!n||!n.f?Ws(t,s):l.push([n.n,n.f(t,s,r)]);return l}function NE(t){for(var s=[],r=0;r<t.length;++r){for(var a=t[r],n=[],i=0;i<a.length;++i){var l=a[i];if(l)switch(l[0]){case 2:n.push('"'+l[1].replace(/"/g,'""')+'"');break;default:n.push(l[1])}else n.push("")}s.push(n.join(","))}return s.join(";")}var wE={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function kE(t,s){if(!t&&!(s&&s.biff<=5&&s.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function cj(t,s,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[s]))return t.SheetNames[s];if(!t.XTI)return"SH33TJSERR6";var a=t.XTI[s];if(r.biff<8)return s>1e4&&(s-=65536),s<0&&(s=-s),s==0?"":t.XTI[s-1];if(!a)return"SH33TJSERR1";var n="";if(r.biff>8)switch(t[a[0]][0]){case 357:return n=a[1]==-1?"#REF":t.SheetNames[a[1]],a[1]==a[2]?n:n+":"+t.SheetNames[a[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[a[0]][0];case 355:default:return"SH33TJSSRC"+t[a[0]][0]}switch(t[a[0]][0][0]){case 1025:return n=a[1]==-1?"#REF":t.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?n:n+":"+t.SheetNames[a[2]];case 14849:return t[a[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return t[a[0]][0][3]?(n=a[1]==-1?"#REF":t[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?n:n+":"+t[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function kp(t,s,r){var a=cj(t,s,r);return a=="#REF"?a:kE(a,r)}function Os(t,s,r,a,n){var i=n&&n.biff||8,l={s:{c:0,r:0}},o=[],c,d,u,p=0,m=0,f,h="";if(!t[0]||!t[0][0])return"";for(var x=-1,g="",j=0,b=t[0].length;j<b;++j){var N=t[0][j];switch(N[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),d=o.pop(),x>=0){switch(t[0][x][1][0]){case 0:g=Jt(" ",t[0][x][1][1]);break;case 1:g=Jt("\r",t[0][x][1][1]);break;default:if(g="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][x][1][0])}d=d+g,x=-1}o.push(d+wE[N[0]]+c);break;case"PtgIsect":c=o.pop(),d=o.pop(),o.push(d+" "+c);break;case"PtgUnion":c=o.pop(),d=o.pop(),o.push(d+","+c);break;case"PtgRange":c=o.pop(),d=o.pop(),o.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Vl(N[1][1],l,n),o.push(Hl(u,i));break;case"PtgRefN":u=r?Vl(N[1][1],r,n):N[1][1],o.push(Hl(u,i));break;case"PtgRef3d":p=N[1][1],u=Vl(N[1][2],l,n),h=kp(a,p,n),o.push(h+"!"+Hl(u,i));break;case"PtgFunc":case"PtgFuncVar":var C=N[1][0],A=N[1][1];C||(C=0),C&=127;var F=C==0?[]:o.slice(-C);o.length-=C,A==="User"&&(A=F.shift()),o.push(A+"("+F.join(",")+")");break;case"PtgBool":o.push(N[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(N[1]);break;case"PtgNum":o.push(String(N[1]));break;case"PtgStr":o.push('"'+N[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(N[1]);break;case"PtgAreaN":f=ap(N[1][1],r?{s:r}:l,n),o.push(E0(f,n));break;case"PtgArea":f=ap(N[1][1],l,n),o.push(E0(f,n));break;case"PtgArea3d":p=N[1][1],f=N[1][2],h=kp(a,p,n),o.push(h+"!"+E0(f,n));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=N[1][2];var w=(a.names||[])[m-1]||(a[0]||[])[m],_=w?w.Name:"SH33TJSNAME"+String(m);_&&_.slice(0,6)=="_xlfn."&&!n.xlfn&&(_=_.slice(6)),o.push(_);break;case"PtgNameX":var v=N[1][1];m=N[1][2];var S;if(n.biff<=5)v<0&&(v=-v),a[v]&&(S=a[v][m]);else{var R="";if(((a[v]||[])[0]||[])[0]==14849||(((a[v]||[])[0]||[])[0]==1025?a[v][m]&&a[v][m].itab>0&&(R=a.SheetNames[a[v][m].itab-1]+"!"):R=a.SheetNames[m-1]+"!"),a[v]&&a[v][m])R+=a[v][m].Name;else if(a[0]&&a[0][m])R+=a[0][m].Name;else{var D=(cj(a,v,n)||"").split(";;");D[m-1]?R=D[m-1]:R+="SH33TJSERRX"}o.push(R);break}S||(S={Name:"SH33TJSERRY"}),o.push(S.Name);break;case"PtgParen":var V="(",O=")";if(x>=0){switch(g="",t[0][x][1][0]){case 2:V=Jt(" ",t[0][x][1][1])+V;break;case 3:V=Jt("\r",t[0][x][1][1])+V;break;case 4:O=Jt(" ",t[0][x][1][1])+O;break;case 5:O=Jt("\r",t[0][x][1][1])+O;break;default:if(n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][x][1][0])}x=-1}o.push(V+o.pop()+O);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:N[1][1],r:N[1][0]};var I={c:r.c,r:r.r};if(a.sharedf[Ye(u)]){var z=a.sharedf[Ye(u)];o.push(Os(z,l,I,a,n))}else{var Q=!1;for(c=0;c!=a.arrayf.length;++c)if(d=a.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){o.push(Os(d[1],l,I,a,n)),Q=!0;break}Q||o.push(N[1])}break;case"PtgArray":o.push("{"+NE(N[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=j;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+N[1].idx+"[#"+N[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(N));default:throw new Error("Unrecognized Formula Token: "+String(N))}var P=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(n.biff!=3&&x>=0&&P.indexOf(t[0][j][0])==-1){N=t[0][x];var k=!0;switch(N[1][0]){case 4:k=!1;case 0:g=Jt(" ",N[1][1]);break;case 5:k=!1;case 1:g=Jt("\r",N[1][1]);break;default:if(g="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+N[1][0])}o.push((k?g:"")+o.pop()+(k?"":g)),x=-1}}if(o.length>1&&n.WTF)throw new Error("bad formula stack");return o[0]}function SE(t,s,r){var a=t.l+s,n=r.biff==2?1:2,i,l=t.read_shift(n);if(l==65535)return[[],Ws(t,s-2)];var o=$o(t,l,r);return s!==l+n&&(i=Uo(t,s-l-n,o,r)),t.l=a,[o,i]}function CE(t,s,r){var a=t.l+s,n=r.biff==2?1:2,i,l=t.read_shift(n);if(l==65535)return[[],Ws(t,s-2)];var o=$o(t,l,r);return s!==l+n&&(i=Uo(t,s-l-n,o,r)),t.l=a,[o,i]}function _E(t,s,r,a){var n=t.l+s,i=$o(t,a,r),l;return n!==t.l&&(l=Uo(t,n-t.l,i,r)),[i,l]}function TE(t,s,r){var a=t.l+s,n,i=t.read_shift(2),l=$o(t,i,r);return i==65535?[[],Ws(t,s-2)]:(s!==i+2&&(n=Uo(t,a-i-2,l,r)),[l,n])}function EE(t){var s;if(Fa(t,t.l+6)!==65535)return[Bs(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return s=t[t.l+2]===1,t.l+=8,[s,"b"];case 2:return s=t[t.l+2],t.l+=8,[s,"e"];case 3:return t.l+=8,["","s"]}return[]}function P0(t,s,r){var a=t.l+s,n=wa(t);r.biff==2&&++t.l;var i=EE(t),l=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=CE(t,a-t.l,r);return{cell:n,val:i[0],formula:o,shared:l>>3&1,tt:i[1]}}function Hd(t,s,r){var a=t.read_shift(4),n=$o(t,a,r),i=t.read_shift(4),l=i>0?Uo(t,i,n,r):null;return[n,l]}var FE=Hd,Gd=Hd,AE=Hd,PE=Hd,DE={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},dj={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},RE={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Sp(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(s,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function D0(t){var s=t.split(":"),r=s[0].split(".")[0];return[r,s[0].split(".")[1]+(s.length>1?":"+(s[1].split(".")[1]||s[1].split(".")[0]):"")]}var Kl={},zi={};function Yl(t,s){if(t){var r=[.7,.7,.75,.75,.3,.3];s=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function uj(t,s,r,a,n,i){try{a.cellNF&&(t.z=Ze[s])}catch(o){if(a.WTF)throw o}if(!(t.t==="z"&&!a.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=ks(t.v)),(!a||a.cellText!==!1)&&t.t!=="z")try{if(Ze[s]==null&&Jn(LS[s]||"General",s),t.t==="e")t.w=t.w||mi[t.v];else if(s===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=wo(t.v);else if(t.t==="d"){var l=er(t.v);(l|0)===l?t.w=l.toString(10):t.w=wo(l)}else{if(t.v===void 0)return"";t.w=ri(t.v,zi)}else t.t==="d"?t.w=Br(s,er(t.v),zi):t.w=Br(s,t.v,zi)}catch(o){if(a.WTF)throw o}if(a.cellStyles&&r!=null)try{t.s=i.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=gd(n.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),a.WTF&&(t.s.fgColor.raw_rgb=n.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=gd(n.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),a.WTF&&(t.s.bgColor.raw_rgb=n.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(a.WTF&&i.Fills)throw o}}}function LE(t,s){var r=Kt(s);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=yt(r))}var OE=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,IE=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,ME=/<(?:\w:)?hyperlink [^>]*>/mg,BE=/"(\w*:\w*)"/,UE=/<(?:\w:)?col\b[^>]*[\/]?>/g,$E=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,zE=/<(?:\w:)?pageMargins[^>]*\/>/g,xj=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,WE=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,VE=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function HE(t,s,r,a,n,i,l){if(!t)return t;a||(a={"!id":{}});var o=s.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",u="",p=t.match(IE);p?(d=t.slice(0,p.index),u=t.slice(p.index+p[0].length)):d=u=t;var m=d.match(xj);m?Om(m[0],o,n,r):(m=d.match(WE))&&GE(m[0],m[1]||"",o,n,r);var f=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(f>0){var h=d.slice(f,f+50).match(BE);h&&LE(o,h[1])}var x=d.match(VE);x&&x[1]&&QE(x[1],n);var g=[];if(s.cellStyles){var j=d.match(UE);j&&KE(g,j)}p&&ZE(p[1],o,s,c,i,l);var b=u.match($E);b&&(o["!autofilter"]=YE(b[0]));var N=[],C=u.match(OE);if(C)for(f=0;f!=C.length;++f)N[f]=Kt(C[f].slice(C[f].indexOf('"')+1));var A=u.match(ME);A&&qE(o,A,a);var F=u.match(zE);if(F&&(o["!margins"]=JE(qe(F[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=yt(c)),s.sheetRows>0&&o["!ref"]){var w=Kt(o["!ref"]);s.sheetRows<=+w.e.r&&(w.e.r=s.sheetRows-1,w.e.r>c.e.r&&(w.e.r=c.e.r),w.e.r<w.s.r&&(w.s.r=w.e.r),w.e.c>c.e.c&&(w.e.c=c.e.c),w.e.c<w.s.c&&(w.s.c=w.e.c),o["!fullref"]=o["!ref"],o["!ref"]=yt(w))}return g.length>0&&(o["!cols"]=g),N.length>0&&(o["!merges"]=N),o}function Om(t,s,r,a){var n=qe(t);r.Sheets[a]||(r.Sheets[a]={}),n.codeName&&(r.Sheets[a].CodeName=Nt(Lt(n.codeName)))}function GE(t,s,r,a,n){Om(t.slice(0,t.indexOf(">")),r,a,n)}function qE(t,s,r){for(var a=Array.isArray(t),n=0;n!=s.length;++n){var i=qe(Lt(s[n]),!0);if(!i.ref)return;var l=((r||{})["!id"]||[])[i.id];l?(i.Target=l.Target,i.location&&(i.Target+="#"+Nt(i.location))):(i.Target="#"+Nt(i.location),l={Target:i.Target,TargetMode:"Internal"}),i.Rel=l,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=Kt(i.ref),c=o.s.r;c<=o.e.r;++c)for(var d=o.s.c;d<=o.e.c;++d){var u=Ye({c:d,r:c});a?(t[c]||(t[c]=[]),t[c][d]||(t[c][d]={t:"z",v:void 0}),t[c][d].l=i):(t[u]||(t[u]={t:"z",v:void 0}),t[u].l=i)}}}function JE(t){var s={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(s[r]=parseFloat(t[r]))}),s}function KE(t,s){for(var r=!1,a=0;a!=s.length;++a){var n=qe(s[a],!0);n.hidden&&(n.hidden=Ut(n.hidden));var i=parseInt(n.min,10)-1,l=parseInt(n.max,10)-1;for(n.outlineLevel&&(n.level=+n.outlineLevel||0),delete n.min,delete n.max,n.width=+n.width,!r&&n.width&&(r=!0,Rm(n.width)),Zi(n);i<=l;)t[i++]=Es(n)}}function YE(t){var s={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return s}var XE=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function QE(t,s){s.Views||(s.Views=[{}]),(t.match(XE)||[]).forEach(function(r,a){var n=qe(r);s.Views[a]||(s.Views[a]={}),+n.zoomScale&&(s.Views[a].zoom=+n.zoomScale),Ut(n.rightToLeft)&&(s.Views[a].RTL=!0)})}var ZE=function(){var t=/<(?:\w+:)?c[ \/>]/,s=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,n=/ref=["']([^"']*)["']/,i=ko("v"),l=ko("f");return function(c,d,u,p,m,f){for(var h=0,x="",g=[],j=[],b=0,N=0,C=0,A="",F,w,_=0,v=0,S,R,D=0,V=0,O=Array.isArray(f.CellXf),I,z=[],Q=[],P=Array.isArray(d),k=[],X={},se=!1,B=!!u.sheetStubs,L=c.split(s),H=0,K=L.length;H!=K;++H){x=L[H].trim();var J=x.length;if(J!==0){var re=0;e:for(h=0;h<J;++h)switch(x[h]){case">":if(x[h-1]!="/"){++h;break e}if(u&&u.cellStyles){if(w=qe(x.slice(re,h),!0),_=w.r!=null?parseInt(w.r,10):_+1,v=-1,u.sheetRows&&u.sheetRows<_)continue;X={},se=!1,w.ht&&(se=!0,X.hpt=parseFloat(w.ht),X.hpx=To(X.hpt)),w.hidden=="1"&&(se=!0,X.hidden=!0),w.outlineLevel!=null&&(se=!0,X.level=+w.outlineLevel),se&&(k[_-1]=X)}break;case"<":re=h;break}if(re>=h)break;if(w=qe(x.slice(re,h),!0),_=w.r!=null?parseInt(w.r,10):_+1,v=-1,!(u.sheetRows&&u.sheetRows<_)){p.s.r>_-1&&(p.s.r=_-1),p.e.r<_-1&&(p.e.r=_-1),u&&u.cellStyles&&(X={},se=!1,w.ht&&(se=!0,X.hpt=parseFloat(w.ht),X.hpx=To(X.hpt)),w.hidden=="1"&&(se=!0,X.hidden=!0),w.outlineLevel!=null&&(se=!0,X.level=+w.outlineLevel),se&&(k[_-1]=X)),g=x.slice(h).split(t);for(var q=0;q!=g.length&&g[q].trim().charAt(0)=="<";++q);for(g=g.slice(q),h=0;h!=g.length;++h)if(x=g[h].trim(),x.length!==0){if(j=x.match(r),b=h,N=0,C=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,j!=null&&j.length===2){for(b=0,A=j[1],N=0;N!=A.length&&!((C=A.charCodeAt(N)-64)<1||C>26);++N)b=26*b+C;--b,v=b}else++v;for(N=0;N!=x.length&&x.charCodeAt(N)!==62;++N);if(++N,w=qe(x.slice(0,N),!0),w.r||(w.r=Ye({r:_-1,c:v})),A=x.slice(N),F={t:""},(j=A.match(i))!=null&&j[1]!==""&&(F.v=Nt(j[1])),u.cellFormula){if((j=A.match(l))!=null&&j[1]!==""){if(F.f=Nt(Lt(j[1])).replace(/\r\n/g,`
`),u.xlfn||(F.f=jp(F.f)),j[0].indexOf('t="array"')>-1)F.F=(A.match(n)||[])[1],F.F.indexOf(":")>-1&&z.push([Kt(F.F),F.F]);else if(j[0].indexOf('t="shared"')>-1){R=qe(j[0]);var ae=Nt(Lt(j[1]));u.xlfn||(ae=jp(ae)),Q[parseInt(R.si,10)]=[R,ae,w.r]}}else(j=A.match(/<f[^>]*\/>/))&&(R=qe(j[0]),Q[R.si]&&(F.f=dT(Q[R.si][1],Q[R.si][2],w.r)));var xe=Ys(w.r);for(N=0;N<z.length;++N)xe.r>=z[N][0].s.r&&xe.r<=z[N][0].e.r&&xe.c>=z[N][0].s.c&&xe.c<=z[N][0].e.c&&(F.F=z[N][1])}if(w.t==null&&F.v===void 0)if(F.f||F.F)F.v=0,F.t="n";else if(B)F.t="z";else continue;else F.t=w.t||"n";switch(p.s.c>v&&(p.s.c=v),p.e.c<v&&(p.e.c=v),F.t){case"n":if(F.v==""||F.v==null){if(!B)continue;F.t="z"}else F.v=parseFloat(F.v);break;case"s":if(typeof F.v>"u"){if(!B)continue;F.t="z"}else S=Kl[parseInt(F.v,10)],F.v=S.t,F.r=S.r,u.cellHTML&&(F.h=S.h);break;case"str":F.t="s",F.v=F.v!=null?Lt(F.v):"",u.cellHTML&&(F.h=wm(F.v));break;case"inlineStr":j=A.match(a),F.t="s",j!=null&&(S=Dm(j[1]))?(F.v=S.t,u.cellHTML&&(F.h=S.h)):F.v="";break;case"b":F.v=Ut(F.v);break;case"d":u.cellDates?F.v=ks(F.v,1):(F.v=er(ks(F.v,1)),F.t="n");break;case"e":(!u||u.cellText!==!1)&&(F.w=F.v),F.v=Dv[F.v];break}if(D=V=0,I=null,O&&w.s!==void 0&&(I=f.CellXf[w.s],I!=null&&(I.numFmtId!=null&&(D=I.numFmtId),u.cellStyles&&I.fillId!=null&&(V=I.fillId))),uj(F,D,V,u,m,f),u.cellDates&&O&&F.t=="n"&&ll(Ze[D])&&(F.t="d",F.v=Wd(F.v)),w.cm&&u.xlmeta){var _e=(u.xlmeta.Cell||[])[+w.cm-1];_e&&_e.type=="XLDAPR"&&(F.D=!0)}if(P){var Y=Ys(w.r);d[Y.r]||(d[Y.r]=[]),d[Y.r][Y.c]=F}else d[w.r]=F}}}}k.length>0&&(d["!rows"]=k)}}();function eF(t,s){var r={},a=t.l+s;r.r=t.read_shift(4),t.l+=4;var n=t.read_shift(2);t.l+=1;var i=t.read_shift(1);return t.l=a,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=n/20),r}var tF=xi;function sF(){}function rF(t,s){var r={},a=t[t.l];return++t.l,r.above=!(a&64),r.left=!(a&128),t.l+=18,r.name=S6(t),r}function aF(t){var s=Ur(t);return[s]}function nF(t){var s=ui(t);return[s]}function iF(t){var s=Ur(t),r=t.read_shift(1);return[s,r,"b"]}function lF(t){var s=ui(t),r=t.read_shift(1);return[s,r,"b"]}function oF(t){var s=Ur(t),r=t.read_shift(1);return[s,r,"e"]}function cF(t){var s=ui(t),r=t.read_shift(1);return[s,r,"e"]}function dF(t){var s=Ur(t),r=t.read_shift(4);return[s,r,"s"]}function uF(t){var s=ui(t),r=t.read_shift(4);return[s,r,"s"]}function xF(t){var s=Ur(t),r=Bs(t);return[s,r,"n"]}function mj(t){var s=ui(t),r=Bs(t);return[s,r,"n"]}function mF(t){var s=Ur(t),r=Fm(t);return[s,r,"n"]}function hF(t){var s=ui(t),r=Fm(t);return[s,r,"n"]}function fF(t){var s=Ur(t),r=Tm(t);return[s,r,"is"]}function pF(t){var s=Ur(t),r=$s(t);return[s,r,"str"]}function gF(t){var s=ui(t),r=$s(t);return[s,r,"str"]}function yF(t,s,r){var a=t.l+s,n=Ur(t);n.r=r["!row"];var i=t.read_shift(1),l=[n,i,"b"];if(r.cellFormula){t.l+=2;var o=Gd(t,a-t.l,r);l[3]=Os(o,null,n,r.supbooks,r)}else t.l=a;return l}function bF(t,s,r){var a=t.l+s,n=Ur(t);n.r=r["!row"];var i=t.read_shift(1),l=[n,i,"e"];if(r.cellFormula){t.l+=2;var o=Gd(t,a-t.l,r);l[3]=Os(o,null,n,r.supbooks,r)}else t.l=a;return l}function vF(t,s,r){var a=t.l+s,n=Ur(t);n.r=r["!row"];var i=Bs(t),l=[n,i,"n"];if(r.cellFormula){t.l+=2;var o=Gd(t,a-t.l,r);l[3]=Os(o,null,n,r.supbooks,r)}else t.l=a;return l}function jF(t,s,r){var a=t.l+s,n=Ur(t);n.r=r["!row"];var i=$s(t),l=[n,i,"str"];if(r.cellFormula){t.l+=2;var o=Gd(t,a-t.l,r);l[3]=Os(o,null,n,r.supbooks,r)}else t.l=a;return l}var NF=xi;function wF(t,s){var r=t.l+s,a=xi(t),n=Em(t),i=$s(t),l=$s(t),o=$s(t);t.l=r;var c={rfx:a,relId:n,loc:i,display:o};return l&&(c.Tooltip=l),c}function kF(){}function SF(t,s,r){var a=t.l+s,n=Fv(t),i=t.read_shift(1),l=[n];if(l[2]=i,r.cellFormula){var o=FE(t,a-t.l,r);l[1]=o}else t.l=a;return l}function CF(t,s,r){var a=t.l+s,n=xi(t),i=[n];if(r.cellFormula){var l=PE(t,a-t.l,r);i[1]=l,t.l=a}else t.l=a;return i}var _F=["left","right","top","bottom","header","footer"];function TF(t){var s={};return _F.forEach(function(r){s[r]=Bs(t)}),s}function EF(t){var s=t.read_shift(2);return t.l+=28,{RTL:s&32}}function FF(){}function AF(){}function PF(t,s,r,a,n,i,l){if(!t)return t;var o=s||{};a||(a={"!id":{}});var c=o.dense?[]:{},d,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},p=!1,m=!1,f,h,x,g,j,b,N,C,A,F=[];o.biff=12,o["!row"]=0;var w=0,_=!1,v=[],S={},R=o.supbooks||n.supbooks||[[]];if(R.sharedf=S,R.arrayf=v,R.SheetNames=n.SheetNames||n.Sheets.map(function(P){return P.name}),!o.supbooks&&(o.supbooks=R,n.Names))for(var D=0;D<n.Names.length;++D)R[0][D+1]=n.Names[D];var V=[],O=[],I=!1;vd[16]={n:"BrtShortReal",f:mj};var z;if(Ha(t,function(k,X,se){if(!m)switch(se){case 148:d=k;break;case 0:f=k,o.sheetRows&&o.sheetRows<=f.r&&(m=!0),C=Fs(g=f.r),o["!row"]=f.r,(k.hidden||k.hpt||k.level!=null)&&(k.hpt&&(k.hpx=To(k.hpt)),O[k.r]=k);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(h={t:k[2]},k[2]){case"n":h.v=k[1];break;case"s":N=Kl[k[1]],h.v=N.t,h.r=N.r;break;case"b":h.v=!!k[1];break;case"e":h.v=k[1],o.cellText!==!1&&(h.w=mi[h.v]);break;case"str":h.t="s",h.v=k[1];break;case"is":h.t="s",h.v=k[1].t;break}if((x=l.CellXf[k[0].iStyleRef])&&uj(h,x.numFmtId,null,o,i,l),j=k[0].c==-1?j+1:k[0].c,o.dense?(c[g]||(c[g]=[]),c[g][j]=h):c[ps(j)+C]=h,o.cellFormula){for(_=!1,w=0;w<v.length;++w){var B=v[w];f.r>=B[0].s.r&&f.r<=B[0].e.r&&j>=B[0].s.c&&j<=B[0].e.c&&(h.F=yt(B[0]),_=!0)}!_&&k.length>3&&(h.f=k[3])}if(u.s.r>f.r&&(u.s.r=f.r),u.s.c>j&&(u.s.c=j),u.e.r<f.r&&(u.e.r=f.r),u.e.c<j&&(u.e.c=j),o.cellDates&&x&&h.t=="n"&&ll(Ze[x.numFmtId])){var L=zn(h.v);L&&(h.t="d",h.v=new Date(L.y,L.m-1,L.d,L.H,L.M,L.S,L.u))}z&&(z.type=="XLDAPR"&&(h.D=!0),z=void 0);break;case 1:case 12:if(!o.sheetStubs||p)break;h={t:"z",v:void 0},j=k[0].c==-1?j+1:k[0].c,o.dense?(c[g]||(c[g]=[]),c[g][j]=h):c[ps(j)+C]=h,u.s.r>f.r&&(u.s.r=f.r),u.s.c>j&&(u.s.c=j),u.e.r<f.r&&(u.e.r=f.r),u.e.c<j&&(u.e.c=j),z&&(z.type=="XLDAPR"&&(h.D=!0),z=void 0);break;case 176:F.push(k);break;case 49:z=((o.xlmeta||{}).Cell||[])[k-1];break;case 494:var H=a["!id"][k.relId];for(H?(k.Target=H.Target,k.loc&&(k.Target+="#"+k.loc),k.Rel=H):k.relId==""&&(k.Target="#"+k.loc),g=k.rfx.s.r;g<=k.rfx.e.r;++g)for(j=k.rfx.s.c;j<=k.rfx.e.c;++j)o.dense?(c[g]||(c[g]=[]),c[g][j]||(c[g][j]={t:"z",v:void 0}),c[g][j].l=k):(b=Ye({c:j,r:g}),c[b]||(c[b]={t:"z",v:void 0}),c[b].l=k);break;case 426:if(!o.cellFormula)break;v.push(k),A=o.dense?c[g][j]:c[ps(j)+C],A.f=Os(k[1],u,{r:f.r,c:j},R,o),A.F=yt(k[0]);break;case 427:if(!o.cellFormula)break;S[Ye(k[0].s)]=k[1],A=o.dense?c[g][j]:c[ps(j)+C],A.f=Os(k[1],u,{r:f.r,c:j},R,o);break;case 60:if(!o.cellStyles)break;for(;k.e>=k.s;)V[k.e--]={width:k.w/256,hidden:!!(k.flags&1),level:k.level},I||(I=!0,Rm(k.w/256)),Zi(V[k.e+1]);break;case 161:c["!autofilter"]={ref:yt(k)};break;case 476:c["!margins"]=k;break;case 147:n.Sheets[r]||(n.Sheets[r]={}),k.name&&(n.Sheets[r].CodeName=k.name),(k.above||k.left)&&(c["!outline"]={above:k.above,left:k.left});break;case 137:n.Views||(n.Views=[{}]),n.Views[0]||(n.Views[0]={}),k.RTL&&(n.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:p=!0;break;case 36:p=!1;break;case 37:p=!0;break;case 38:p=!1;break;default:if(!X.T){if(!p||o.WTF)throw new Error("Unexpected record 0x"+se.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(u.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(c["!ref"]=yt(d||u)),o.sheetRows&&c["!ref"]){var Q=Kt(c["!ref"]);o.sheetRows<=+Q.e.r&&(Q.e.r=o.sheetRows-1,Q.e.r>u.e.r&&(Q.e.r=u.e.r),Q.e.r<Q.s.r&&(Q.s.r=Q.e.r),Q.e.c>u.e.c&&(Q.e.c=u.e.c),Q.e.c<Q.s.c&&(Q.s.c=Q.e.c),c["!fullref"]=c["!ref"],c["!ref"]=yt(Q))}return F.length>0&&(c["!merges"]=F),V.length>0&&(c["!cols"]=V),O.length>0&&(c["!rows"]=O),c}function DF(t){var s=[],r=t.match(/^<c:numCache>/),a;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var l=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);l&&(s[+l[1]]=r?+l[2]:l[2])});var n=Nt((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){a=i.replace(/<.*?>/g,"")}),[s,n,a]}function RF(t,s,r,a,n,i){var l=i||{"!type":"chart"};if(!t)return i;var o=0,c=0,d="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(p){var m=DF(p);u.s.r=u.s.c=0,u.e.c=o,d=ps(o),m[0].forEach(function(f,h){l[d+Fs(h)]={t:"n",v:f,z:m[1]},c=h}),u.e.r<c&&(u.e.r=c),++o}),o>0&&(l["!ref"]=yt(u)),l}function LF(t,s,r,a,n){if(!t)return t;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l,o=t.match(xj);return o&&Om(o[0],i,n,r),(l=t.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=l[1]),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}function OF(t,s){t.l+=10;var r=$s(t);return{name:r}}function IF(t,s,r,a,n){if(!t)return t;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l=!1;return Ha(t,function(c,d,u){switch(u){case 550:i["!rel"]=c;break;case 651:n.Sheets[r]||(n.Sheets[r]={}),c.name&&(n.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!l||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},s),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}var hj=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],MF=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],BF=[],UF=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function Cp(t,s){for(var r=0;r!=t.length;++r)for(var a=t[r],n=0;n!=s.length;++n){var i=s[n];if(a[i[0]]==null)a[i[0]]=i[1];else switch(i[2]){case"bool":typeof a[i[0]]=="string"&&(a[i[0]]=Ut(a[i[0]]));break;case"int":typeof a[i[0]]=="string"&&(a[i[0]]=parseInt(a[i[0]],10));break}}}function _p(t,s){for(var r=0;r!=s.length;++r){var a=s[r];if(t[a[0]]==null)t[a[0]]=a[1];else switch(a[2]){case"bool":typeof t[a[0]]=="string"&&(t[a[0]]=Ut(t[a[0]]));break;case"int":typeof t[a[0]]=="string"&&(t[a[0]]=parseInt(t[a[0]],10));break}}}function fj(t){_p(t.WBProps,hj),_p(t.CalcPr,UF),Cp(t.WBView,MF),Cp(t.Sheets,BF),zi.date1904=Ut(t.WBProps.date1904)}var $F="][*?/\\".split("");function zF(t,s){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return $F.forEach(function(a){if(t.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var WF=/<\w+:workbook/;function VF(t,s){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,n="xmlns",i={},l=0;if(t.replace(Vs,function(c,d){var u=qe(c);switch(Na(u[0])){case"<?xml":break;case"<workbook":c.match(WF)&&(n="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=u[n];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":hj.forEach(function(p){if(u[p[0]]!=null)switch(p[2]){case"bool":r.WBProps[p[0]]=Ut(u[p[0]]);break;case"int":r.WBProps[p[0]]=parseInt(u[p[0]],10);break;default:r.WBProps[p[0]]=u[p[0]]}}),u.codeName&&(r.WBProps.CodeName=Lt(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=Nt(Lt(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":i={},i.Name=Lt(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),Ut(u.hidden||"0")&&(i.Hidden=!0),l=d+c.length;break;case"</definedName>":i.Ref=Nt(Lt(t.slice(l,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&s.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return c}),o6.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return fj(r),r}function HF(t,s){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=Xu(t),r.name=$s(t),r}function GF(t,s){var r={},a=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var n=s>8?$s(t):"";return n.length>0&&(r.CodeName=n),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function qF(t,s){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=s-8,r}function JF(t,s,r){var a=t.l+s;t.l+=4,t.l+=1;var n=t.read_shift(4),i=C6(t),l=AE(t,0,r),o=Em(t);t.l=a;var c={Name:i,Ptg:l};return n<268435455&&(c.Sheet=n),o&&(c.Comment=o),c}function KF(t,s){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],n=!1;s||(s={}),s.biff=12;var i=[],l=[[]];return l.SheetNames=[],l.XTI=[],vd[16]={n:"BrtFRTArchID$",f:qF},Ha(t,function(c,d,u){switch(u){case 156:l.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(s.SID=c.Sheet),c.Ref=Os(c.Ptg,null,null,l,s),delete s.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:l[0].length?l.push([u,c]):l[0]=[u,c],l[l.length-1].XTI=[];break;case 362:l.length===0&&(l[0]=[],l[0].XTI=[]),l[l.length-1].XTI=l[l.length-1].XTI.concat(c),l.XTI=l.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(u),n=!0;break;case 36:a.pop(),n=!1;break;case 37:a.push(u),n=!0;break;case 38:a.pop(),n=!1;break;case 16:break;default:if(!d.T){if(!n||s.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},s),fj(r),r.Names=i,r.supbooks=l,r}function YF(t,s,r){return s.slice(-4)===".bin"?KF(t,r):VF(t,r)}function XF(t,s,r,a,n,i,l,o){return s.slice(-4)===".bin"?PF(t,a,r,n,i,l,o):HE(t,a,r,n,i,l,o)}function QF(t,s,r,a,n,i,l,o){return s.slice(-4)===".bin"?IF(t,a,r,n,i):LF(t,a,r,n,i)}function ZF(t,s,r,a,n,i,l,o){return s.slice(-4)===".bin"?lT():oT()}function eA(t,s,r,a,n,i,l,o){return s.slice(-4)===".bin"?nT():iT()}function tA(t,s,r,a){return s.slice(-4)===".bin"?N5(t,r,a):p5(t,r,a)}function sA(t,s,r){return tj(t,r)}function rA(t,s,r){return s.slice(-4)===".bin"?M_(t,r):O_(t,r)}function aA(t,s,r){return s.slice(-4)===".bin"?sT(t,r):X5(t,r)}function nA(t,s,r){return s.slice(-4)===".bin"?J5(t):G5(t)}function iA(t,s,r,a){return r.slice(-4)===".bin"?K5(t,s,r,a):void 0}function lA(t,s,r){return s.slice(-4)===".bin"?V5(t,s,r):H5(t,s,r)}var pj=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,gj=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Wr(t,s){var r=t.split(/\s+/),a=[];if(a[0]=r[0],r.length===1)return a;var n=t.match(pj),i,l,o,c;if(n)for(c=0;c!=n.length;++c)i=n[c].match(gj),(l=i[1].indexOf(":"))===-1?a[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(l+1),a[o]=i[2].slice(1,i[2].length-1));return a}function oA(t){var s=t.split(/\s+/),r={};if(s.length===1)return r;var a=t.match(pj),n,i,l,o;if(a)for(o=0;o!=a.length;++o)n=a[o].match(gj),(i=n[1].indexOf(":"))===-1?r[n[1]]=n[2].slice(1,n[2].length-1):(n[1].slice(0,6)==="xmlns:"?l="xmlns"+n[1].slice(6):l=n[1].slice(i+1),r[l]=n[2].slice(1,n[2].length-1));return r}var Xl;function cA(t,s){var r=Xl[t]||Nt(t);return r==="General"?ri(s):Br(r,s)}function dA(t,s,r,a){var n=a;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":n=Ut(a);break;case"i2":case"int":n=parseInt(a,10);break;case"r4":case"float":n=parseFloat(a);break;case"date":case"dateTime.tz":n=ks(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[Nt(s)]=n}function uA(t,s,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||mi[t.v]:s==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=wo(t.v):t.w=ri(t.v):t.w=cA(s||"General",t.v)}catch(i){if(r.WTF)throw i}try{var a=Xl[s]||s||"General";if(r.cellNF&&(t.z=a),r.cellDates&&t.t=="n"&&ll(a)){var n=zn(t.v);n&&(t.t="d",t.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}catch(i){if(r.WTF)throw i}}}function xA(t,s,r){if(r.cellStyles&&s.Interior){var a=s.Interior;a.Pattern&&(a.patternType=d5[a.Pattern]||a.Pattern)}t[s.ID]=s}function mA(t,s,r,a,n,i,l,o,c,d){var u="General",p=a.StyleID,m={};d=d||{};var f=[],h=0;for(p===void 0&&o&&(p=o.StyleID),p===void 0&&l&&(p=l.StyleID);i[p]!==void 0&&(i[p].nf&&(u=i[p].nf),i[p].Interior&&f.push(i[p].Interior),!!i[p].Parent);)p=i[p].Parent;switch(r.Type){case"Boolean":a.t="b",a.v=Ut(t);break;case"String":a.t="s",a.r=Kf(Nt(t)),a.v=t.indexOf("<")>-1?Nt(s||t).replace(/<.*?>/g,""):a.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),a.v=(ks(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),a.v!==a.v?a.v=Nt(t):a.v<60&&(a.v=a.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+t),a.t||(a.t="n");break;case"Error":a.t="e",a.v=Dv[t],d.cellText!==!1&&(a.w=t);break;default:t==""&&s==""?a.t="z":(a.t="s",a.v=Kf(s||t));break}if(uA(a,u,d),d.cellFormula!==!1)if(a.Formula){var x=Nt(a.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),a.f=$i(x,n),delete a.Formula,a.ArrayRange=="RC"?a.F=$i("RC:RC",n):a.ArrayRange&&(a.F=$i(a.ArrayRange,n),c.push([Kt(a.F),a.F]))}else for(h=0;h<c.length;++h)n.r>=c[h][0].s.r&&n.r<=c[h][0].e.r&&n.c>=c[h][0].s.c&&n.c<=c[h][0].e.c&&(a.F=c[h][1]);d.cellStyles&&(f.forEach(function(g){!m.patternType&&g.patternType&&(m.patternType=g.patternType)}),a.s=m),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function hA(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function R0(t,s){var r=s||{};nv();var a=El(km(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(a=Lt(a));var n=a.slice(0,1024).toLowerCase(),i=!1;if(n=n.replace(/".*?"/g,""),(n.indexOf(">")&1023)>Math.min(n.indexOf(",")&1023,n.indexOf(";")&1023)){var l=Es(r);return l.type="string",Co.to_workbook(a,l)}if(n.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(et){n.indexOf("<"+et)>=0&&(i=!0)}),i)return wA(a,r);Xl={"General Number":"General","General Date":Ze[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Ze[15],"Short Date":Ze[14],"Long Time":Ze[19],"Medium Time":Ze[18],"Short Time":Ze[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Ze[2],Standard:Ze[4],Percent:Ze[10],Scientific:Ze[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],d,u={},p=[],m=r.dense?[]:{},f="",h={},x={},g=Wr('<Data ss:Type="String">'),j=0,b=0,N=0,C={s:{r:2e6,c:2e6},e:{r:0,c:0}},A={},F={},w="",_=0,v=[],S={},R={},D=0,V=[],O=[],I={},z=[],Q,P=!1,k=[],X=[],se={},B=0,L=0,H={Sheets:[],WBProps:{date1904:!1}},K={};So.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var J="";o=So.exec(a);)switch(o[3]=(J=o[3]).toLowerCase()){case"data":if(J=="data"){if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?mA(a.slice(j,o.index),w,g,c[c.length-1][0]=="comment"?I:h,{c:b,r:N},A,z[b],x,k,r):(w="",g=Wr(o[0]),j=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(O.length>0&&(h.c=O),(!r.sheetRows||r.sheetRows>N)&&h.v!==void 0&&(r.dense?(m[N]||(m[N]=[]),m[N][b]=h):m[ps(b)+Fs(N)]=h),h.HRef&&(h.l={Target:Nt(h.HRef)},h.HRefScreenTip&&(h.l.Tooltip=h.HRefScreenTip),delete h.HRef,delete h.HRefScreenTip),(h.MergeAcross||h.MergeDown)&&(B=b+(parseInt(h.MergeAcross,10)|0),L=N+(parseInt(h.MergeDown,10)|0),v.push({s:{c:b,r:N},e:{c:B,r:L}})),!r.sheetStubs)h.MergeAcross?b=B+1:++b;else if(h.MergeAcross||h.MergeDown){for(var re=b;re<=B;++re)for(var q=N;q<=L;++q)(re>b||q>N)&&(r.dense?(m[q]||(m[q]=[]),m[q][re]={t:"z"}):m[ps(re)+Fs(q)]={t:"z"});b=B+1}else++b;else h=oA(o[0]),h.Index&&(b=+h.Index-1),b<C.s.c&&(C.s.c=b),b>C.e.c&&(C.e.c=b),o[0].slice(-2)==="/>"&&++b,O=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(N<C.s.r&&(C.s.r=N),N>C.e.r&&(C.e.r=N),o[0].slice(-2)==="/>"&&(x=Wr(o[0]),x.Index&&(N=+x.Index-1)),b=0,++N):(x=Wr(o[0]),x.Index&&(N=+x.Index-1),se={},(x.AutoFitHeight=="0"||x.Height)&&(se.hpx=parseInt(x.Height,10),se.hpt=ej(se.hpx),X[N]=se),x.Hidden=="1"&&(se.hidden=!0,X[N]=se));break;case"worksheet":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"));p.push(f),C.s.r<=C.e.r&&C.s.c<=C.e.c&&(m["!ref"]=yt(C),r.sheetRows&&r.sheetRows<=C.e.r&&(m["!fullref"]=m["!ref"],C.e.r=r.sheetRows-1,m["!ref"]=yt(C))),v.length&&(m["!merges"]=v),z.length>0&&(m["!cols"]=z),X.length>0&&(m["!rows"]=X),u[f]=m}else C={s:{r:2e6,c:2e6},e:{r:0,c:0}},N=b=0,c.push([o[3],!1]),d=Wr(o[0]),f=Nt(d.Name),m=r.dense?[]:{},v=[],k=[],X=[],K={name:f,Hidden:0},H.Sheets.push(K);break;case"table":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),z=[],P=!1}break;case"style":o[1]==="/"?xA(A,F,r):F=Wr(o[0]);break;case"numberformat":F.nf=Nt(Wr(o[0]).Format||"General"),Xl[F.nf]&&(F.nf=Xl[F.nf]);for(var ae=0;ae!=392&&Ze[ae]!=F.nf;++ae);if(ae==392){for(ae=57;ae!=392;++ae)if(Ze[ae]==null){Jn(F.nf,ae);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(Q=Wr(o[0]),Q.Hidden&&(Q.hidden=!0,delete Q.Hidden),Q.Width&&(Q.wpx=parseInt(Q.Width,10)),!P&&Q.wpx>10){P=!0,Ks=Qv;for(var xe=0;xe<z.length;++xe)z[xe]&&Zi(z[xe])}P&&Zi(Q),z[Q.Index-1||z.length]=Q;for(var _e=0;_e<+Q.Span;++_e)z[z.length]=Es(Q);break;case"namedrange":if(o[1]==="/")break;H.Names||(H.Names=[]);var Y=qe(o[0]),Fe={Name:Y.Name,Ref:$i(Y.RefersTo.slice(1),{r:0,c:0})};H.Sheets.length>0&&(Fe.Sheet=H.Sheets.length-1),H.Names.push(Fe);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?w+=a.slice(_,o.index):_=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;F.Interior=Wr(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?X6(S,J,a.slice(D,o.index)):D=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"));hA(I),O.push(I)}else c.push([o[3],!1]),d=Wr(o[0]),I={a:d.Author};break;case"autofilter":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Be=Wr(o[0]);m["!autofilter"]={ref:$i(Be.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return Dp(a,r);var He=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:He=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:He=!1}break;case"excelworkbook":switch(o[3]){case"date1904":H.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:He=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:He=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(a.slice(D,o.index)){case"SheetHidden":K.Hidden=1;break;case"SheetVeryHidden":K.Hidden=2;break}else D=o.index+o[0].length;break;case"header":m["!margins"]||Yl(m["!margins"]={},"xlml"),isNaN(+qe(o[0]).Margin)||(m["!margins"].header=+qe(o[0]).Margin);break;case"footer":m["!margins"]||Yl(m["!margins"]={},"xlml"),isNaN(+qe(o[0]).Margin)||(m["!margins"].footer=+qe(o[0]).Margin);break;case"pagemargins":var Le=qe(o[0]);m["!margins"]||Yl(m["!margins"]={},"xlml"),isNaN(+Le.Top)||(m["!margins"].top=+Le.Top),isNaN(+Le.Left)||(m["!margins"].left=+Le.Left),isNaN(+Le.Right)||(m["!margins"].right=+Le.Right),isNaN(+Le.Bottom)||(m["!margins"].bottom=+Le.Bottom);break;case"displayrighttoleft":H.Views||(H.Views=[]),H.Views[0]||(H.Views[0]={}),H.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:He=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:He=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:He=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:He=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:He=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:He=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:He=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:He=!1}break;case"smarttags":break;default:He=!1;break}if(He||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?dA(R,J,V,a.slice(D,o.index)):(V=o,D=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var ve={};return!r.bookSheets&&!r.bookProps&&(ve.Sheets=u),ve.SheetNames=p,ve.Workbook=H,ve.SSF=Es(Ze),ve.Props=S,ve.Custprops=R,ve}function tx(t,s){switch(Bm(s=s||{}),s.type||"base64"){case"base64":return R0(Nr(t),s);case"binary":case"buffer":case"file":return R0(t,s);case"array":return R0(di(t),s)}}function fA(t){var s={},r=t.content;if(r.l=28,s.AnsiUserType=r.read_shift(0,"lpstr-ansi"),s.AnsiClipboardFormat=E6(r),r.length-r.l<=4)return s;var a=r.read_shift(4);if(a==0||a>40||(r.l-=4,s.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(a=r.read_shift(4),a!==1907505652)||(s.UnicodeClipboardFormat=F6(r),a=r.read_shift(4),a==0||a>40))return s;r.l-=4,s.Reserved2=r.read_shift(0,"lpwstr")}var pA=[60,1084,2066,2165,2175];function gA(t,s,r,a,n){var i=a,l=[],o=r.slice(r.l,r.l+i);if(n&&n.enc&&n.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:n.enc.insitu(o)}l.push(o),r.l+=i;for(var c=Fa(r,r.l),d=sx[c],u=0;d!=null&&pA.indexOf(c)>-1;)i=Fa(r,r.l+2),u=r.l+4,c==2066?u+=4:(c==2165||c==2175)&&(u+=12),o=r.slice(u,r.l+4+i),l.push(o),r.l+=4+i,d=sx[c=Fa(r,r.l)];var p=tn(l);_s(p,0);var m=0;p.lens=[];for(var f=0;f<l.length;++f)p.lens.push(m),m+=l[f].length;if(p.length<a)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+p.length+" < "+a;return s.f(p,p.length,n)}function la(t,s,r){if(t.t!=="z"&&t.XF){var a=0;try{a=t.z||t.XF.numFmtId||0,s.cellNF&&(t.z=Ze[a])}catch(i){if(s.WTF)throw i}if(!s||s.cellText!==!1)try{t.t==="e"?t.w=t.w||mi[t.v]:a===0||a=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=wo(t.v):t.w=ri(t.v):t.w=Br(a,t.v,{date1904:!!r,dateNF:s&&s.dateNF})}catch(i){if(s.WTF)throw i}if(s.cellDates&&a&&t.t=="n"&&ll(Ze[a]||String(a))){var n=zn(t.v);n&&(t.t="d",t.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}}function pc(t,s,r){return{v:t,ixfe:s,t:r}}function yA(t,s){var r={opts:{}},a={},n=s.dense?[]:{},i={},l={},o=null,c=[],d="",u={},p,m="",f,h,x,g,j={},b=[],N,C,A=[],F=[],w={Sheets:[],WBProps:{date1904:!1},Views:[{}]},_={},v=function(Oe){return Oe<8?Kn[Oe]:Oe<64&&F[Oe-8]||Kn[Oe]},S=function(Oe,Xe,Ft){var bt=Xe.XF.data;if(!(!bt||!bt.patternType||!Ft||!Ft.cellStyles)){Xe.s={},Xe.s.patternType=bt.patternType;var Hs;(Hs=_o(v(bt.icvFore)))&&(Xe.s.fgColor={rgb:Hs}),(Hs=_o(v(bt.icvBack)))&&(Xe.s.bgColor={rgb:Hs})}},R=function(Oe,Xe,Ft){if(!(se>1)&&!(Ft.sheetRows&&Oe.r>=Ft.sheetRows)){if(Ft.cellStyles&&Xe.XF&&Xe.XF.data&&S(Oe,Xe,Ft),delete Xe.ixfe,delete Xe.XF,p=Oe,m=Ye(Oe),(!l||!l.s||!l.e)&&(l={s:{r:0,c:0},e:{r:0,c:0}}),Oe.r<l.s.r&&(l.s.r=Oe.r),Oe.c<l.s.c&&(l.s.c=Oe.c),Oe.r+1>l.e.r&&(l.e.r=Oe.r+1),Oe.c+1>l.e.c&&(l.e.c=Oe.c+1),Ft.cellFormula&&Xe.f){for(var bt=0;bt<b.length;++bt)if(!(b[bt][0].s.c>Oe.c||b[bt][0].s.r>Oe.r)&&!(b[bt][0].e.c<Oe.c||b[bt][0].e.r<Oe.r)){Xe.F=yt(b[bt][0]),(b[bt][0].s.c!=Oe.c||b[bt][0].s.r!=Oe.r)&&delete Xe.f,Xe.f&&(Xe.f=""+Os(b[bt][1],l,Oe,k,D));break}}Ft.dense?(n[Oe.r]||(n[Oe.r]=[]),n[Oe.r][Oe.c]=Xe):n[m]=Xe}},D={enc:!1,sbcch:0,snames:[],sharedf:j,arrayf:b,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!s&&!!s.cellStyles,WTF:!!s&&!!s.wtf};s.password&&(D.password=s.password);var V,O=[],I=[],z=[],Q=[],P=!1,k=[];k.SheetNames=D.snames,k.sharedf=D.sharedf,k.arrayf=D.arrayf,k.names=[],k.XTI=[];var X=0,se=0,B=0,L=[],H=[],K;D.codepage=1200,Qr(1200);for(var J=!1;t.l<t.length-1;){var re=t.l,q=t.read_shift(2);if(q===0&&X===10)break;var ae=t.l===t.length?0:t.read_shift(2),xe=sx[q];if(xe&&xe.f){if(s.bookSheets&&X===133&&q!==133)break;if(X=q,xe.r===2||xe.r==12){var _e=t.read_shift(2);if(ae-=2,!D.enc&&_e!==q&&((_e&255)<<8|_e>>8)!==q)throw new Error("rt mismatch: "+_e+"!="+q);xe.r==12&&(t.l+=10,ae-=10)}var Y={};if(q===10?Y=xe.f(t,ae,D):Y=gA(q,xe,t,ae,D),se==0&&[9,521,1033,2057].indexOf(X)===-1)continue;switch(q){case 34:r.opts.Date1904=w.WBProps.date1904=Y;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(D.enc||(t.l=0),D.enc=Y,!s.password)throw new Error("File is password-protected");if(Y.valid==null)throw new Error("Encryption scheme unsupported");if(!Y.valid)throw new Error("Password is incorrect");break;case 92:D.lastuser=Y;break;case 66:var Fe=Number(Y);switch(Fe){case 21010:Fe=1200;break;case 32768:Fe=1e4;break;case 32769:Fe=1252;break}Qr(D.codepage=Fe),J=!0;break;case 317:D.rrtabid=Y;break;case 25:D.winlocked=Y;break;case 439:r.opts.RefreshAll=Y;break;case 12:r.opts.CalcCount=Y;break;case 16:r.opts.CalcDelta=Y;break;case 17:r.opts.CalcIter=Y;break;case 13:r.opts.CalcMode=Y;break;case 14:r.opts.CalcPrecision=Y;break;case 95:r.opts.CalcSaveRecalc=Y;break;case 15:D.CalcRefMode=Y;break;case 2211:r.opts.FullCalc=Y;break;case 129:Y.fDialog&&(n["!type"]="dialog"),Y.fBelow||((n["!outline"]||(n["!outline"]={})).above=!0),Y.fRight||((n["!outline"]||(n["!outline"]={})).left=!0);break;case 224:A.push(Y);break;case 430:k.push([Y]),k[k.length-1].XTI=[];break;case 35:case 547:k[k.length-1].push(Y);break;case 24:case 536:K={Name:Y.Name,Ref:Os(Y.rgce,l,null,k,D)},Y.itab>0&&(K.Sheet=Y.itab-1),k.names.push(K),k[0]||(k[0]=[],k[0].XTI=[]),k[k.length-1].push(Y),Y.Name=="_xlnm._FilterDatabase"&&Y.itab>0&&Y.rgce&&Y.rgce[0]&&Y.rgce[0][0]&&Y.rgce[0][0][0]=="PtgArea3d"&&(H[Y.itab-1]={ref:yt(Y.rgce[0][0][1][2])});break;case 22:D.ExternCount=Y;break;case 23:k.length==0&&(k[0]=[],k[0].XTI=[]),k[k.length-1].XTI=k[k.length-1].XTI.concat(Y),k.XTI=k.XTI.concat(Y);break;case 2196:if(D.biff<8)break;K!=null&&(K.Comment=Y[1]);break;case 18:n["!protect"]=Y;break;case 19:Y!==0&&D.WTF&&console.error("Password verifier: "+Y);break;case 133:i[Y.pos]=Y,D.snames.push(Y.name);break;case 10:{if(--se)break;if(l.e){if(l.e.r>0&&l.e.c>0){if(l.e.r--,l.e.c--,n["!ref"]=yt(l),s.sheetRows&&s.sheetRows<=l.e.r){var Be=l.e.r;l.e.r=s.sheetRows-1,n["!fullref"]=n["!ref"],n["!ref"]=yt(l),l.e.r=Be}l.e.r++,l.e.c++}O.length>0&&(n["!merges"]=O),I.length>0&&(n["!objects"]=I),z.length>0&&(n["!cols"]=z),Q.length>0&&(n["!rows"]=Q),w.Sheets.push(_)}d===""?u=n:a[d]=n,n=s.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(D.biff===8&&(D.biff={9:2,521:3,1033:4}[q]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[Y.BIFFVer]||8),D.biffguess=Y.BIFFVer==0,Y.BIFFVer==0&&Y.dt==4096&&(D.biff=5,J=!0,Qr(D.codepage=28591)),D.biff==8&&Y.BIFFVer==0&&Y.dt==16&&(D.biff=2),se++)break;if(n=s.dense?[]:{},D.biff<8&&!J&&(J=!0,Qr(D.codepage=s.codepage||1252)),D.biff<5||Y.BIFFVer==0&&Y.dt==4096){d===""&&(d="Sheet1"),l={s:{r:0,c:0},e:{r:0,c:0}};var He={pos:t.l-ae,name:d};i[He.pos]=He,D.snames.push(d)}else d=(i[re]||{name:""}).name;Y.dt==32&&(n["!type"]="chart"),Y.dt==64&&(n["!type"]="macro"),O=[],I=[],D.arrayf=b=[],z=[],Q=[],P=!1,_={Hidden:(i[re]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:n["!type"]=="chart"&&(s.dense?(n[Y.r]||[])[Y.c]:n[Ye({c:Y.c,r:Y.r})])&&++Y.c,N={ixfe:Y.ixfe,XF:A[Y.ixfe]||{},v:Y.val,t:"n"},B>0&&(N.z=L[N.ixfe>>8&63]),la(N,s,r.opts.Date1904),R({c:Y.c,r:Y.r},N,s);break;case 5:case 517:N={ixfe:Y.ixfe,XF:A[Y.ixfe],v:Y.val,t:Y.t},B>0&&(N.z=L[N.ixfe>>8&63]),la(N,s,r.opts.Date1904),R({c:Y.c,r:Y.r},N,s);break;case 638:N={ixfe:Y.ixfe,XF:A[Y.ixfe],v:Y.rknum,t:"n"},B>0&&(N.z=L[N.ixfe>>8&63]),la(N,s,r.opts.Date1904),R({c:Y.c,r:Y.r},N,s);break;case 189:for(var Le=Y.c;Le<=Y.C;++Le){var ve=Y.rkrec[Le-Y.c][0];N={ixfe:ve,XF:A[ve],v:Y.rkrec[Le-Y.c][1],t:"n"},B>0&&(N.z=L[N.ixfe>>8&63]),la(N,s,r.opts.Date1904),R({c:Le,r:Y.r},N,s)}break;case 6:case 518:case 1030:{if(Y.val=="String"){o=Y;break}if(N=pc(Y.val,Y.cell.ixfe,Y.tt),N.XF=A[N.ixfe],s.cellFormula){var et=Y.formula;if(et&&et[0]&&et[0][0]&&et[0][0][0]=="PtgExp"){var wt=et[0][0][1][0],fe=et[0][0][1][1],ne=Ye({r:wt,c:fe});j[ne]?N.f=""+Os(Y.formula,l,Y.cell,k,D):N.F=((s.dense?(n[wt]||[])[fe]:n[ne])||{}).F}else N.f=""+Os(Y.formula,l,Y.cell,k,D)}B>0&&(N.z=L[N.ixfe>>8&63]),la(N,s,r.opts.Date1904),R(Y.cell,N,s),o=Y}break;case 7:case 519:if(o)o.val=Y,N=pc(Y,o.cell.ixfe,"s"),N.XF=A[N.ixfe],s.cellFormula&&(N.f=""+Os(o.formula,l,o.cell,k,D)),B>0&&(N.z=L[N.ixfe>>8&63]),la(N,s,r.opts.Date1904),R(o.cell,N,s),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{b.push(Y);var Ue=Ye(Y[0].s);if(f=s.dense?(n[Y[0].s.r]||[])[Y[0].s.c]:n[Ue],s.cellFormula&&f){if(!o||!Ue||!f)break;f.f=""+Os(Y[1],l,Y[0],k,D),f.F=yt(Y[0])}}break;case 1212:{if(!s.cellFormula)break;if(m){if(!o)break;j[Ye(o.cell)]=Y[0],f=s.dense?(n[o.cell.r]||[])[o.cell.c]:n[Ye(o.cell)],(f||{}).f=""+Os(Y[0],l,p,k,D)}}break;case 253:N=pc(c[Y.isst].t,Y.ixfe,"s"),c[Y.isst].h&&(N.h=c[Y.isst].h),N.XF=A[N.ixfe],B>0&&(N.z=L[N.ixfe>>8&63]),la(N,s,r.opts.Date1904),R({c:Y.c,r:Y.r},N,s);break;case 513:s.sheetStubs&&(N={ixfe:Y.ixfe,XF:A[Y.ixfe],t:"z"},B>0&&(N.z=L[N.ixfe>>8&63]),la(N,s,r.opts.Date1904),R({c:Y.c,r:Y.r},N,s));break;case 190:if(s.sheetStubs)for(var kt=Y.c;kt<=Y.C;++kt){var it=Y.ixfe[kt-Y.c];N={ixfe:it,XF:A[it],t:"z"},B>0&&(N.z=L[N.ixfe>>8&63]),la(N,s,r.opts.Date1904),R({c:kt,r:Y.r},N,s)}break;case 214:case 516:case 4:N=pc(Y.val,Y.ixfe,"s"),N.XF=A[N.ixfe],B>0&&(N.z=L[N.ixfe>>8&63]),la(N,s,r.opts.Date1904),R({c:Y.c,r:Y.r},N,s);break;case 0:case 512:se===1&&(l=Y);break;case 252:c=Y;break;case 1054:if(D.biff==4){L[B++]=Y[1];for(var Ct=0;Ct<B+163&&Ze[Ct]!=Y[1];++Ct);Ct>=163&&Jn(Y[1],B+163)}else Jn(Y[1],Y[0]);break;case 30:{L[B++]=Y;for(var St=0;St<B+163&&Ze[St]!=Y;++St);St>=163&&Jn(Y,B+163)}break;case 229:O=O.concat(Y);break;case 93:I[Y.cmo[0]]=D.lastobj=Y;break;case 438:D.lastobj.TxO=Y;break;case 127:D.lastobj.ImData=Y;break;case 440:for(g=Y[0].s.r;g<=Y[0].e.r;++g)for(x=Y[0].s.c;x<=Y[0].e.c;++x)f=s.dense?(n[g]||[])[x]:n[Ye({c:x,r:g})],f&&(f.l=Y[1]);break;case 2048:for(g=Y[0].s.r;g<=Y[0].e.r;++g)for(x=Y[0].s.c;x<=Y[0].e.c;++x)f=s.dense?(n[g]||[])[x]:n[Ye({c:x,r:g})],f&&f.l&&(f.l.Tooltip=Y[1]);break;case 28:{if(D.biff<=5&&D.biff>=2)break;f=s.dense?(n[Y[0].r]||[])[Y[0].c]:n[Ye(Y[0])];var lt=I[Y[2]];f||(s.dense?(n[Y[0].r]||(n[Y[0].r]=[]),f=n[Y[0].r][Y[0].c]={t:"z"}):f=n[Ye(Y[0])]={t:"z"},l.e.r=Math.max(l.e.r,Y[0].r),l.s.r=Math.min(l.s.r,Y[0].r),l.e.c=Math.max(l.e.c,Y[0].c),l.s.c=Math.min(l.s.c,Y[0].c)),f.c||(f.c=[]),h={a:Y[1],t:lt.TxO.t},f.c.push(h)}break;case 2173:U5(A[Y.ixfe],Y.ext);break;case 125:{if(!D.cellStyles)break;for(;Y.e>=Y.s;)z[Y.e--]={width:Y.w/256,level:Y.level||0,hidden:!!(Y.flags&1)},P||(P=!0,Rm(Y.w/256)),Zi(z[Y.e+1])}break;case 520:{var ot={};Y.level!=null&&(Q[Y.r]=ot,ot.level=Y.level),Y.hidden&&(Q[Y.r]=ot,ot.hidden=!0),Y.hpt&&(Q[Y.r]=ot,ot.hpt=Y.hpt,ot.hpx=To(Y.hpt))}break;case 38:case 39:case 40:case 41:n["!margins"]||Yl(n["!margins"]={}),n["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[q]]=Y;break;case 161:n["!margins"]||Yl(n["!margins"]={}),n["!margins"].header=Y.header,n["!margins"].footer=Y.footer;break;case 574:Y.RTL&&(w.Views[0].RTL=!0);break;case 146:F=Y;break;case 2198:V=Y;break;case 140:C=Y;break;case 442:d?_.CodeName=Y||_.name:w.WBProps.CodeName=Y||"ThisWorkbook";break}}else xe||console.error("Missing Info for XLS Record 0x"+q.toString(16)),t.l+=ae}return r.SheetNames=ya(i).sort(function(pe,Oe){return Number(pe)-Number(Oe)}).map(function(pe){return i[pe].name}),s.bookSheets||(r.Sheets=a),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&H.forEach(function(pe,Oe){r.Sheets[r.SheetNames[Oe]]["!autofilter"]=pe}),r.Strings=c,r.SSF=Es(Ze),D.enc&&(r.Encryption=D.enc),V&&(r.Themes=V),r.Metadata={},C!==void 0&&(r.Metadata.Country=C),k.names.length>0&&(w.Names=k.names),r.Workbook=w,r}var Tp={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function bA(t,s,r){var a=gt.find(t,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var n=up(a,O6,Tp.DSI);for(var i in n)s[i]=n[i]}catch(d){if(r.WTF)throw d}var l=gt.find(t,"/!SummaryInformation");if(l&&l.size>0)try{var o=up(l,I6,Tp.SI);for(var c in o)s[c]==null&&(s[c]=o[c])}catch(d){if(r.WTF)throw d}s.HeadingPairs&&s.TitlesOfParts&&(Lv(s.HeadingPairs,s.TitlesOfParts,s,r),delete s.HeadingPairs,delete s.TitlesOfParts)}function yj(t,s){s||(s={}),Bm(s),qb(),s.codepage&&gm(s.codepage);var r,a;if(t.FullPaths){if(gt.find(t,"/encryption"))throw new Error("File is password-protected");r=gt.find(t,"!CompObj"),a=gt.find(t,"/Workbook")||gt.find(t,"/Book")}else{switch(s.type){case"base64":t=Xr(Nr(t));break;case"binary":t=Xr(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}_s(t,0),a={content:t}}var n,i;if(r&&fA(r),s.bookProps&&!s.bookSheets)n={};else{var l=ht?"buffer":"array";if(a&&a.content)n=yA(a.content,s);else if((i=gt.find(t,"PerfectOffice_MAIN"))&&i.content)n=Jl.to_workbook(i.content,(s.type=l,s));else if((i=gt.find(t,"NativeContent_MAIN"))&&i.content)n=Jl.to_workbook(i.content,(s.type=l,s));else throw(i=gt.find(t,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");s.bookVBA&&t.FullPaths&&gt.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(n.vbaraw=aT(t))}var o={};return t.FullPaths&&bA(t,o,s),n.Props=n.Custprops=o,s.bookFiles&&(n.cfb=t),n}var vd={0:{f:eF},1:{f:aF},2:{f:mF},3:{f:oF},4:{f:iF},5:{f:xF},6:{f:pF},7:{f:dF},8:{f:jF},9:{f:vF},10:{f:yF},11:{f:bF},12:{f:nF},13:{f:hF},14:{f:cF},15:{f:lF},16:{f:mj},17:{f:gF},18:{f:uF},19:{f:Tm},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:JF},40:{},42:{},43:{f:y5},44:{f:g5},45:{f:b5},46:{f:j5},47:{f:v5},48:{},49:{f:N6},50:{},51:{f:z5},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:qv},62:{f:fF},63:{f:q5},64:{f:FF},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ws,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:EF},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:rF},148:{f:tF,p:16},151:{f:kF},152:{},153:{f:GF},154:{},155:{},156:{f:HF},157:{},158:{},159:{T:1,f:I_},160:{T:-1},161:{T:1,f:xi},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:NF},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:$5},336:{T:-1},337:{f:W5,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Xu},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Gv},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:SF},427:{f:CF},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:TF},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:sF},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:wF},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Xu},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:tT},633:{T:1},634:{T:-1},635:{T:1,f:eT},636:{T:-1},637:{f:k6},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:OF},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:AF},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},sx={6:{f:P0},10:{f:Ja},12:{f:ns},13:{f:ns},14:{f:Yt},15:{f:Yt},16:{f:Bs},17:{f:Yt},18:{f:Yt},19:{f:ns},20:{f:fp},21:{f:fp},23:{f:Gv},24:{f:gp},25:{f:Yt},26:{},27:{},28:{f:QC},29:{},34:{f:Yt},35:{f:pp},38:{f:Bs},39:{f:Bs},40:{f:Bs},41:{f:Bs},42:{f:Yt},43:{f:Yt},47:{f:s5},49:{f:DC},51:{f:ns},60:{},61:{f:FC},64:{f:Yt},65:{f:PC},66:{f:ns},77:{},80:{},81:{},82:{},85:{f:ns},89:{},90:{},91:{},92:{f:NC},93:{f:e_},94:{},95:{f:Yt},96:{},97:{},99:{f:Yt},125:{f:qv},128:{f:WC},129:{f:wC},130:{f:ns},131:{f:Yt},132:{f:Yt},133:{f:kC},134:{},140:{f:i_},141:{f:ns},144:{},146:{f:o_},151:{},152:{},153:{},154:{},155:{},156:{f:ns},157:{},158:{},160:{f:m_},161:{f:d_},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:BC},190:{f:UC},193:{f:Ja},197:{},198:{},199:{},200:{},201:{},202:{f:Yt},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ns},220:{},221:{f:Yt},222:{},224:{f:zC},225:{f:jC},226:{f:Ja},227:{},229:{f:ZC},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:SC},253:{f:RC},255:{f:CC},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Uv},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Yt},353:{f:Ja},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:HC},431:{f:Yt},432:{},433:{},434:{},437:{},438:{f:r_},439:{f:Yt},440:{f:a_},441:{},442:{f:Mo},443:{},444:{f:ns},445:{},446:{},448:{f:Ja},449:{f:EC,r:2},450:{f:Ja},512:{f:mp},513:{f:x_},515:{f:VC},516:{f:LC},517:{f:hp},519:{f:h_},520:{f:_C},523:{},545:{f:yp},549:{f:xp},566:{},574:{f:AC},638:{f:MC},659:{},1048:{},1054:{f:OC},1084:{},1212:{f:KC},2048:{f:n_},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:mc},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Ja},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:c_,r:12},2173:{f:B5,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Yt,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:JC,r:12},2197:{},2198:{f:D5,r:12},2199:{},2200:{},2201:{},2202:{f:YC,r:12},2203:{f:Ja},2204:{},2205:{},2206:{},2207:{},2211:{f:TC},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ns},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:u_},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:l_},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:mp},1:{},2:{f:y_},3:{f:g_},4:{f:p_},5:{f:hp},7:{f:b_},8:{},9:{f:mc},11:{},22:{f:ns},30:{f:IC},31:{},32:{},33:{f:yp},36:{},37:{f:xp},50:{f:v_},62:{},52:{},67:{},68:{f:ns},69:{},86:{},126:{},127:{f:f_},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:j_},223:{},234:{},354:{},421:{},518:{f:P0},521:{f:mc},536:{f:gp},547:{f:pp},561:{},579:{},1030:{f:P0},1033:{f:mc},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Vr(t,s,r,a){var n=s;if(!isNaN(n)){var i=(r||[]).length||0,l=t.next(4);l.write_shift(2,n),l.write_shift(2,i),i>0&&_v(r)&&t.push(r)}}function Ep(t,s){var r=s||{},a=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var n=t.match(/<table/i);if(!n)throw new Error("Invalid HTML: could not find <table>");var i=t.match(/<\/table/i),l=n.index,o=i&&i.index||t.length,c=VS(t.slice(l,o),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,u=0,p=0,m=0,f={s:{r:1e7,c:1e7},e:{r:0,c:0}},h=[];for(l=0;l<c.length;++l){var x=c[l].trim(),g=x.slice(0,3).toLowerCase();if(g=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}u=0;continue}if(!(g!="<td"&&g!="<th")){var j=x.split(/<\/t[dh]>/i);for(o=0;o<j.length;++o){var b=j[o].trim();if(b.match(/<t[dh]/i)){for(var N=b,C=0;N.charAt(0)=="<"&&(C=N.indexOf(">"))>-1;)N=N.slice(C+1);for(var A=0;A<h.length;++A){var F=h[A];F.s.c==u&&F.s.r<d&&d<=F.e.r&&(u=F.e.c+1,A=-1)}var w=qe(b.slice(0,b.indexOf(">")));m=w.colspan?+w.colspan:1,((p=+w.rowspan)>1||m>1)&&h.push({s:{r:d,c:u},e:{r:d+(p||1)-1,c:u+m-1}});var _=w.t||w["data-t"]||"";if(!N.length){u+=m;continue}if(N=hv(N),f.s.r>d&&(f.s.r=d),f.e.r<d&&(f.e.r=d),f.s.c>u&&(f.s.c=u),f.e.c<u&&(f.e.c=u),!N.length){u+=m;continue}var v={t:"s",v:N};r.raw||!N.trim().length||_=="s"||(N==="TRUE"?v={t:"b",v:!0}:N==="FALSE"?v={t:"b",v:!1}:isNaN(ra(N))?isNaN(Qi(N).getDate())||(v={t:"d",v:ks(N)},r.cellDates||(v={t:"n",v:er(v.v)}),v.z=r.dateNF||Ze[14]):v={t:"n",v:ra(N)}),r.dense?(a[d]||(a[d]=[]),a[d][u]=v):a[Ye({r:d,c:u})]=v,u+=m}}}}return a["!ref"]=yt(f),h.length&&(a["!merges"]=h),a}function vA(t,s,r,a){for(var n=t["!merges"]||[],i=[],l=s.s.c;l<=s.e.c;++l){for(var o=0,c=0,d=0;d<n.length;++d)if(!(n[d].s.r>r||n[d].s.c>l)&&!(n[d].e.r<r||n[d].e.c<l)){if(n[d].s.r<r||n[d].s.c<l){o=-1;break}o=n[d].e.r-n[d].s.r+1,c=n[d].e.c-n[d].s.c+1;break}if(!(o<0)){var u=Ye({r,c:l}),p=a.dense?(t[r]||[])[l]:t[u],m=p&&p.v!=null&&(p.h||wm(p.w||(za(p),p.w)||""))||"",f={};o>1&&(f.rowspan=o),c>1&&(f.colspan=c),a.editable?m='<span contenteditable="true">'+m+"</span>":p&&(f["data-t"]=p&&p.t||"z",p.v!=null&&(f["data-v"]=p.v),p.z!=null&&(f["data-z"]=p.z),p.l&&(p.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+p.l.Target+'">'+m+"</a>")),f.id=(a.id||"sjs")+"-"+u,i.push(i6("td",m,f))}}var h="<tr>";return h+i.join("")+"</tr>"}var jA='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',NA="</body></html>";function wA(t,s){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Tn(Ep(r[0],s),s);var a=$m();return r.forEach(function(n,i){zm(a,Ep(n,s),"Sheet"+(i+1))}),a}function kA(t,s,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function SA(t,s){var r=s||{},a=r.header!=null?r.header:jA,n=r.footer!=null?r.footer:NA,i=[a],l=ol(t["!ref"]);r.dense=Array.isArray(t),i.push(kA(t,l,r));for(var o=l.s.r;o<=l.e.r;++o)i.push(vA(t,l,o,r));return i.push("</table>"+n),i.join("")}function bj(t,s,r){var a=r||{},n=0,i=0;if(a.origin!=null)if(typeof a.origin=="number")n=a.origin;else{var l=typeof a.origin=="string"?Ys(a.origin):a.origin;n=l.r,i=l.c}var o=s.getElementsByTagName("tr"),c=Math.min(a.sheetRows||1e7,o.length),d={s:{r:0,c:0},e:{r:n,c:i}};if(t["!ref"]){var u=ol(t["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),n==-1&&(d.e.r=n=u.e.r+1)}var p=[],m=0,f=t["!rows"]||(t["!rows"]=[]),h=0,x=0,g=0,j=0,b=0,N=0;for(t["!cols"]||(t["!cols"]=[]);h<o.length&&x<c;++h){var C=o[h];if(Fp(C)){if(a.display)continue;f[x]={hidden:!0}}var A=C.children;for(g=j=0;g<A.length;++g){var F=A[g];if(!(a.display&&Fp(F))){var w=F.hasAttribute("data-v")?F.getAttribute("data-v"):F.hasAttribute("v")?F.getAttribute("v"):hv(F.innerHTML),_=F.getAttribute("data-z")||F.getAttribute("z");for(m=0;m<p.length;++m){var v=p[m];v.s.c==j+i&&v.s.r<x+n&&x+n<=v.e.r&&(j=v.e.c+1-i,m=-1)}N=+F.getAttribute("colspan")||1,((b=+F.getAttribute("rowspan")||1)>1||N>1)&&p.push({s:{r:x+n,c:j+i},e:{r:x+n+(b||1)-1,c:j+i+(N||1)-1}});var S={t:"s",v:w},R=F.getAttribute("data-t")||F.getAttribute("t")||"";w!=null&&(w.length==0?S.t=R||"z":a.raw||w.trim().length==0||R=="s"||(w==="TRUE"?S={t:"b",v:!0}:w==="FALSE"?S={t:"b",v:!1}:isNaN(ra(w))?isNaN(Qi(w).getDate())||(S={t:"d",v:ks(w)},a.cellDates||(S={t:"n",v:er(S.v)}),S.z=a.dateNF||Ze[14]):S={t:"n",v:ra(w)})),S.z===void 0&&_!=null&&(S.z=_);var D="",V=F.getElementsByTagName("A");if(V&&V.length)for(var O=0;O<V.length&&!(V[O].hasAttribute("href")&&(D=V[O].getAttribute("href"),D.charAt(0)!="#"));++O);D&&D.charAt(0)!="#"&&(S.l={Target:D}),a.dense?(t[x+n]||(t[x+n]=[]),t[x+n][j+i]=S):t[Ye({c:j+i,r:x+n})]=S,d.e.c<j+i&&(d.e.c=j+i),j+=N}}++x}return p.length&&(t["!merges"]=(t["!merges"]||[]).concat(p)),d.e.r=Math.max(d.e.r,x-1+n),t["!ref"]=yt(d),x>=c&&(t["!fullref"]=yt((d.e.r=o.length-h+x-1+n,d))),t}function vj(t,s){var r=s||{},a=r.dense?[]:{};return bj(a,t,s)}function CA(t,s){return Tn(vj(t,s),s)}function Fp(t){var s="",r=_A(t);return r&&(s=r(t).getPropertyValue("display")),s||(s=t.style&&t.style.display),s==="none"}function _A(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function TA(t){var s=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,n){return Array(parseInt(n,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Nt(s.replace(/<[^>]*>/g,""));return[r]}var Ap={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function jj(t,s){var r=s||{},a=km(t),n=[],i,l,o={name:""},c="",d=0,u,p,m={},f=[],h=r.dense?[]:{},x,g,j={value:""},b="",N=0,C=[],A=-1,F=-1,w={s:{r:1e6,c:1e7},e:{r:0,c:0}},_=0,v={},S=[],R={},D=0,V=0,O=[],I=1,z=1,Q=[],P={Names:[]},k={},X=["",""],se=[],B={},L="",H=0,K=!1,J=!1,re=0;for(So.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=So.exec(a);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"":x[1]==="/"?(w.e.c>=w.s.c&&w.e.r>=w.s.r?h["!ref"]=yt(w):h["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=w.e.r&&(h["!fullref"]=h["!ref"],w.e.r=r.sheetRows-1,h["!ref"]=yt(w)),S.length&&(h["!merges"]=S),O.length&&(h["!rows"]=O),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),f.push(u.name),m[u.name]=h,J=!1):x[0].charAt(x[0].length-2)!=="/"&&(u=qe(x[0],!1),A=F=-1,w.s.r=w.s.c=1e7,w.e.r=w.e.c=0,h=r.dense?[]:{},S=[],O=[],J=!0);break;case"table-row-group":x[1]==="/"?--_:++_;break;case"table-row":case"":if(x[1]==="/"){A+=I,I=1;break}if(p=qe(x[0],!1),p.?A=p.-1:A==-1&&(A=0),I=+p["number-rows-repeated"]||1,I<10)for(re=0;re<I;++re)_>0&&(O[A+re]={level:_});F=-1;break;case"covered-table-cell":x[1]!=="/"&&++F,r.sheetStubs&&(r.dense?(h[A]||(h[A]=[]),h[A][F]={t:"z"}):h[Ye({r:A,c:F})]={t:"z"}),b="",C=[];break;case"table-cell":case"":if(x[0].charAt(x[0].length-2)==="/")++F,j=qe(x[0],!1),z=parseInt(j["number-columns-repeated"]||"1",10),g={t:"z",v:null},j.formula&&r.cellFormula!=!1&&(g.f=Sp(Nt(j.formula))),(j.||j["value-type"])=="string"&&(g.t="s",g.v=Nt(j["string-value"]||""),r.dense?(h[A]||(h[A]=[]),h[A][F]=g):h[Ye({r:A,c:F})]=g),F+=z-1;else if(x[1]!=="/"){++F,b="",N=0,C=[],z=1;var q=I?A+I-1:A;if(F>w.e.c&&(w.e.c=F),F<w.s.c&&(w.s.c=F),A<w.s.r&&(w.s.r=A),q>w.e.r&&(w.e.r=q),j=qe(x[0],!1),se=[],B={},g={t:j.||j["value-type"],v:null},r.cellFormula)if(j.formula&&(j.formula=Nt(j.formula)),j["number-matrix-columns-spanned"]&&j["number-matrix-rows-spanned"]&&(D=parseInt(j["number-matrix-rows-spanned"],10)||0,V=parseInt(j["number-matrix-columns-spanned"],10)||0,R={s:{r:A,c:F},e:{r:A+D-1,c:F+V-1}},g.F=yt(R),Q.push([R,g.F])),j.formula)g.f=Sp(j.formula);else for(re=0;re<Q.length;++re)A>=Q[re][0].s.r&&A<=Q[re][0].e.r&&F>=Q[re][0].s.c&&F<=Q[re][0].e.c&&(g.F=Q[re][1]);switch((j["number-columns-spanned"]||j["number-rows-spanned"])&&(D=parseInt(j["number-rows-spanned"],10)||0,V=parseInt(j["number-columns-spanned"],10)||0,R={s:{r:A,c:F},e:{r:A+D-1,c:F+V-1}},S.push(R)),j["number-columns-repeated"]&&(z=parseInt(j["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=Ut(j["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(j.value);break;case"percentage":g.t="n",g.v=parseFloat(j.value);break;case"currency":g.t="n",g.v=parseFloat(j.value);break;case"date":g.t="d",g.v=ks(j["date-value"]),r.cellDates||(g.t="n",g.v=er(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=$S(j["time-value"])/86400,r.cellDates&&(g.t="d",g.v=Wd(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(j.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",j["string-value"]!=null&&(b=Nt(j["string-value"]),C=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(K=!1,g.t==="s"&&(g.v=b||"",C.length&&(g.R=C),K=N==0),k.Target&&(g.l=k),se.length>0&&(g.c=se,se=[]),b&&r.cellText!==!1&&(g.w=b),K&&(g.t="z",delete g.v),(!K||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=A))for(var ae=0;ae<I;++ae){if(z=parseInt(j["number-columns-repeated"]||"1",10),r.dense)for(h[A+ae]||(h[A+ae]=[]),h[A+ae][F]=ae==0?g:Es(g);--z>0;)h[A+ae][F+z]=Es(g);else for(h[Ye({r:A+ae,c:F})]=g;--z>0;)h[Ye({r:A+ae,c:F+z})]=Es(g);w.e.c<=F&&(w.e.c=F)}z=parseInt(j["number-columns-repeated"]||"1",10),F+=z-1,z=0,g={},b="",C=[]}k={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((i=n.pop())[0]!==x[3])throw"Bad state: "+i}else x[0].charAt(x[0].length-2)!=="/"&&n.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((i=n.pop())[0]!==x[3])throw"Bad state: "+i;B.t=b,C.length&&(B.R=C),B.a=L,se.push(B)}else x[0].charAt(x[0].length-2)!=="/"&&n.push([x[3],!1]);L="",H=0,b="",N=0,C=[];break;case"creator":x[1]==="/"?L=a.slice(H,x.index):H=x.index+x[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((i=n.pop())[0]!==x[3])throw"Bad state: "+i}else x[0].charAt(x[0].length-2)!=="/"&&n.push([x[3],!1]);b="",N=0,C=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(v[o.name]=c,(i=n.pop())[0]!==x[3])throw"Bad state: "+i}else x[0].charAt(x[0].length-2)!=="/"&&(c="",o=qe(x[0],!1),n.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(n[n.length-1][0]){case"time-style":case"date-style":l=qe(x[0],!1),c+=Ap[x[3]][l.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(n[n.length-1][0]){case"time-style":case"date-style":l=qe(x[0],!1),c+=Ap[x[3]][l.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(n[n.length-1][0]){case"number-style":case"date-style":case"time-style":c+=a.slice(d,x.index);break}else d=x.index+x[0].length;break;case"named-range":l=qe(x[0],!1),X=D0(l["cell-range-address"]);var xe={Name:l.name,Ref:X[0]+"!"+X[1]};J&&(xe.Sheet=f.length),P.Names.push(xe);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(n[n.length-1][0])>-1)break;if(x[1]==="/"&&(!j||!j["string-value"])){var _e=TA(a.slice(N,x.index));b=(b.length>0?b+`
`:"")+_e[0]}else qe(x[0],!1),N=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{X=D0(qe(x[0])["target-range-address"]),m[X[0]]["!autofilter"]={ref:X[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(k=qe(x[0],!1),!k.href)break;k.Target=Nt(k.href),delete k.href,k.Target.charAt(0)=="#"&&k.Target.indexOf(".")>-1?(X=D0(k.Target.slice(1)),k.Target="#"+X[0]+"!"+X[1]):k.Target.match(/^\.\.[\\\/]/)&&(k.Target=k.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(x)}}var Y={Sheets:m,SheetNames:f,Workbook:P};return r.bookSheets&&delete Y.Sheets,Y}function Pp(t,s){s=s||{},Er(t,"META-INF/manifest.xml")&&V6(as(t,"META-INF/manifest.xml"),s);var r=gr(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var a=jj(Lt(r),s);return Er(t,"meta.xml")&&(a.Props=Rv(as(t,"meta.xml"))),a}function Dp(t,s){return jj(t,s)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Im(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function rx(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Lt(di(t))}function ax(t){var s=t.reduce(function(n,i){return n+i.length},0),r=new Uint8Array(s),a=0;return t.forEach(function(n){r.set(n,a),a+=n.length}),r}function Rp(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function EA(t,s){for(var r=(t[s+15]&127)<<7|t[s+14]>>1,a=t[s+14]&1,n=s+13;n>=s;--n)a=a*256+t[n];return(t[s+15]&128?-a:a)*Math.pow(10,r-6176)}function Eo(t,s){var r=s?s[0]:0,a=t[r]&127;e:if(t[r++]>=128&&(a|=(t[r]&127)<<7,t[r++]<128||(a|=(t[r]&127)<<14,t[r++]<128)||(a|=(t[r]&127)<<21,t[r++]<128)||(a+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(a+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(a+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return s&&(s[0]=r),a}function ys(t){var s=0,r=t[s]&127;e:if(t[s++]>=128){if(r|=(t[s]&127)<<7,t[s++]<128||(r|=(t[s]&127)<<14,t[s++]<128)||(r|=(t[s]&127)<<21,t[s++]<128))break e;r|=(t[s]&127)<<28}return r}function Us(t){for(var s=[],r=[0];r[0]<t.length;){var a=r[0],n=Eo(t,r),i=n&7;n=Math.floor(n/8);var l=0,o;if(n==0)break;switch(i){case 0:{for(var c=r[0];t[r[0]++]>=128;);o=t.slice(c,r[0])}break;case 5:l=4,o=t.slice(r[0],r[0]+l),r[0]+=l;break;case 1:l=8,o=t.slice(r[0],r[0]+l),r[0]+=l;break;case 2:l=Eo(t,r),o=t.slice(r[0],r[0]+l),r[0]+=l;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(n," at offset ").concat(a))}var d={data:o,type:i};s[n]==null?s[n]=[d]:s[n].push(d)}return s}function Mm(t,s){return(t==null?void 0:t.map(function(r){return s(r.data)}))||[]}function FA(t){for(var s,r=[],a=[0];a[0]<t.length;){var n=Eo(t,a),i=Us(t.slice(a[0],a[0]+n));a[0]+=n;var l={id:ys(i[1][0].data),messages:[]};i[2].forEach(function(o){var c=Us(o.data),d=ys(c[3][0].data);l.messages.push({meta:c,data:t.slice(a[0],a[0]+d)}),a[0]+=d}),(s=i[3])!=null&&s[0]&&(l.merge=ys(i[3][0].data)>>>0>0),r.push(l)}return r}function AA(t,s){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],a=Eo(s,r),n=[];r[0]<s.length;){var i=s[r[0]]&3;if(i==0){var l=s[r[0]++]>>2;if(l<60)++l;else{var o=l-59;l=s[r[0]],o>1&&(l|=s[r[0]+1]<<8),o>2&&(l|=s[r[0]+2]<<16),o>3&&(l|=s[r[0]+3]<<24),l>>>=0,l++,r[0]+=o}n.push(s.slice(r[0],r[0]+l)),r[0]+=l;continue}else{var c=0,d=0;if(i==1?(d=(s[r[0]]>>2&7)+4,c=(s[r[0]++]&224)<<3,c|=s[r[0]++]):(d=(s[r[0]++]>>2)+1,i==2?(c=s[r[0]]|s[r[0]+1]<<8,r[0]+=2):(c=(s[r[0]]|s[r[0]+1]<<8|s[r[0]+2]<<16|s[r[0]+3]<<24)>>>0,r[0]+=4)),n=[ax(n)],c==0)throw new Error("Invalid offset 0");if(c>n[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(n.push(n[0].slice(-c)),d-=c;d>=n[n.length-1].length;)n.push(n[n.length-1]),d-=n[n.length-1].length;n.push(n[0].slice(-c,-c+d))}}var u=ax(n);if(u.length!=a)throw new Error("Unexpected length: ".concat(u.length," != ").concat(a));return u}function PA(t){for(var s=[],r=0;r<t.length;){var a=t[r++],n=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,s.push(AA(a,t.slice(r,r+n))),r+=n}if(r!==t.length)throw new Error("data is not a valid framed stream!");return ax(s)}function DA(t,s,r,a){var n=Im(t),i=n.getUint32(4,!0),l=(a>1?12:8)+Rp(i&(a>1?3470:398))*4,o=-1,c=-1,d=NaN,u=new Date(2001,0,1);i&512&&(o=n.getUint32(l,!0),l+=4),l+=Rp(i&(a>1?12288:4096))*4,i&16&&(c=n.getUint32(l,!0),l+=4),i&32&&(d=n.getFloat64(l,!0),l+=8),i&64&&(u.setTime(u.getTime()+n.getFloat64(l,!0)*1e3),l+=8);var p;switch(t[2]){case 0:break;case 2:p={t:"n",v:d};break;case 3:p={t:"s",v:s[c]};break;case 5:p={t:"d",v:u};break;case 6:p={t:"b",v:d>0};break;case 7:p={t:"n",v:d/86400};break;case 8:p={t:"e",v:0};break;case 9:if(o>-1)p={t:"s",v:r[o]};else if(c>-1)p={t:"s",v:s[c]};else if(!isNaN(d))p={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return p}function RA(t,s,r){var a=Im(t),n=a.getUint32(8,!0),i=12,l=-1,o=-1,c=NaN,d=NaN,u=new Date(2001,0,1);n&1&&(c=EA(t,i),i+=16),n&2&&(d=a.getFloat64(i,!0),i+=8),n&4&&(u.setTime(u.getTime()+a.getFloat64(i,!0)*1e3),i+=8),n&8&&(o=a.getUint32(i,!0),i+=4),n&16&&(l=a.getUint32(i,!0),i+=4);var p;switch(t[1]){case 0:break;case 2:p={t:"n",v:c};break;case 3:p={t:"s",v:s[o]};break;case 5:p={t:"d",v:u};break;case 6:p={t:"b",v:d>0};break;case 7:p={t:"n",v:d/86400};break;case 8:p={t:"e",v:0};break;case 9:if(l>-1)p={t:"s",v:r[l]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(n&31," : ").concat(t.slice(0,4)));break;case 10:p={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(n&31," : ").concat(t.slice(0,4)))}return p}function LA(t,s,r){switch(t[0]){case 0:case 1:case 2:case 3:return DA(t,s,r,t[0]);case 5:return RA(t,s,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function yn(t){var s=Us(t);return Eo(s[1][0].data)}function Lp(t,s){var r=Us(s.data),a=ys(r[1][0].data),n=r[3],i=[];return(n||[]).forEach(function(l){var o=Us(l.data),c=ys(o[1][0].data)>>>0;switch(a){case 1:i[c]=rx(o[3][0].data);break;case 8:{var d=t[yn(o[9][0].data)][0],u=Us(d.data),p=t[yn(u[1][0].data)][0],m=ys(p.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var f=Us(p.data);i[c]=f[3].map(function(h){return rx(h.data)}).join("")}break}}),i}function OA(t,s){var r,a,n,i,l,o,c,d,u,p,m,f,h,x,g=Us(t),j=ys(g[1][0].data)>>>0,b=ys(g[2][0].data)>>>0,N=((a=(r=g[8])==null?void 0:r[0])==null?void 0:a.data)&&ys(g[8][0].data)>0||!1,C,A;if((i=(n=g[7])==null?void 0:n[0])!=null&&i.data&&s!=0)C=(o=(l=g[7])==null?void 0:l[0])==null?void 0:o.data,A=(d=(c=g[6])==null?void 0:c[0])==null?void 0:d.data;else if((p=(u=g[4])==null?void 0:u[0])!=null&&p.data&&s!=1)C=(f=(m=g[4])==null?void 0:m[0])==null?void 0:f.data,A=(x=(h=g[3])==null?void 0:h[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(s," cell storage");for(var F=N?4:1,w=Im(C),_=[],v=0;v<C.length/2;++v){var S=w.getUint16(v*2,!0);S<65535&&_.push([v,S])}if(_.length!=b)throw"Expected ".concat(b," cells, found ").concat(_.length);var R=[];for(v=0;v<_.length-1;++v)R[_[v][0]]=A.subarray(_[v][1]*F,_[v+1][1]*F);return _.length>=1&&(R[_[_.length-1][0]]=A.subarray(_[_.length-1][1]*F)),{R:j,cells:R}}function IA(t,s){var r,a=Us(s.data),n=(r=a==null?void 0:a[7])!=null&&r[0]?ys(a[7][0].data)>>>0>0?1:0:-1,i=Mm(a[5],function(l){return OA(l,n)});return{nrows:ys(a[4][0].data)>>>0,data:i.reduce(function(l,o){return l[o.R]||(l[o.R]=[]),o.cells.forEach(function(c,d){if(l[o.R][d])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(d));l[o.R][d]=c}),l},[])}}function MA(t,s,r){var a,n=Us(s.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(ys(n[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(n[6][0].data));if(i.e.c=(ys(n[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(n[7][0].data));r["!ref"]=yt(i);var l=Us(n[4][0].data),o=Lp(t,t[yn(l[4][0].data)][0]),c=(a=l[17])!=null&&a[0]?Lp(t,t[yn(l[17][0].data)][0]):[],d=Us(l[3][0].data),u=0;d[1].forEach(function(p){var m=Us(p.data),f=t[yn(m[2][0].data)][0],h=ys(f.meta[1][0].data);if(h!=6002)throw new Error("6001 unexpected reference to ".concat(h));var x=IA(t,f);x.data.forEach(function(g,j){g.forEach(function(b,N){var C=Ye({r:u+j,c:N}),A=LA(b,o,c);A&&(r[C]=A)})}),u+=x.nrows})}function BA(t,s){var r=Us(s.data),a={"!ref":"A1"},n=t[yn(r[2][0].data)],i=ys(n[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return MA(t,n[0],a),a}function UA(t,s){var r,a=Us(s.data),n={name:(r=a[1])!=null&&r[0]?rx(a[1][0].data):"",sheets:[]},i=Mm(a[2],yn);return i.forEach(function(l){t[l].forEach(function(o){var c=ys(o.meta[1][0].data);c==6e3&&n.sheets.push(BA(t,o))})}),n}function $A(t,s){var r=$m(),a=Us(s.data),n=Mm(a[1],yn);if(n.forEach(function(i){t[i].forEach(function(l){var o=ys(l.meta[1][0].data);if(o==2){var c=UA(t,l);c.sheets.forEach(function(d,u){zm(r,d,u==0?c.name:c.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function L0(t){var s,r,a,n,i={},l=[];if(t.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var d;try{d=PA(c.content)}catch(p){return console.log("?? "+c.content.length+" "+(p.message||p))}var u;try{u=FA(d)}catch(p){return console.log("## "+(p.message||p))}u.forEach(function(p){i[p.id]=p.messages,l.push(p.id)})}}),!l.length)throw new Error("File has no messages");var o=((n=(a=(r=(s=i==null?void 0:i[1])==null?void 0:s[0])==null?void 0:r.meta)==null?void 0:a[1])==null?void 0:n[0].data)&&ys(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||l.forEach(function(c){i[c].forEach(function(d){var u=ys(d.meta[1][0].data)>>>0;if(u==1)if(!o)o=d;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return $A(i,o)}function zA(t){return function(r){for(var a=0;a!=t.length;++a){var n=t[a];r[n[0]]===void 0&&(r[n[0]]=n[1]),n[2]==="n"&&(r[n[0]]=Number(r[n[0]]))}}}function Bm(t){zA([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function WA(t){return Ai.WS.indexOf(t)>-1?"sheet":t==Ai.CS?"chart":t==Ai.DS?"dialog":t==Ai.MS?"macro":t&&t.length?t:"sheet"}function VA(t,s){if(!t)return 0;try{t=s.map(function(a){return a.id||(a.id=a.strRelID),[a.name,t["!id"][a.id].Target,WA(t["!id"][a.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function HA(t,s,r,a,n,i,l,o,c,d,u,p){try{i[a]=Gl(gr(t,r,!0),s);var m=as(t,s),f;switch(o){case"sheet":f=XF(m,s,n,c,i[a],d,u,p);break;case"chart":if(f=QF(m,s,n,c,i[a],d,u,p),!f||!f["!drawel"])break;var h=Al(f["!drawel"].Target,s),x=Qu(h),g=Y5(gr(t,h,!0),Gl(gr(t,x,!0),h)),j=Al(g,h),b=Qu(j);f=RF(gr(t,j,!0),j,c,Gl(gr(t,b,!0),j),d,f);break;case"macro":f=ZF(m,s,n,c,i[a],d,u,p);break;case"dialog":f=eA(m,s,n,c,i[a],d,u,p);break;default:throw new Error("Unrecognized sheet type "+o)}l[a]=f;var N=[];i&&i[a]&&ya(i[a]).forEach(function(C){var A="";if(i[a][C].Type==Ai.CMNT){A=Al(i[a][C].Target,s);var F=aA(as(t,A,!0),A,c);if(!F||!F.length)return;vp(f,F,!1)}i[a][C].Type==Ai.TCMNT&&(A=Al(i[a][C].Target,s),N=N.concat(Q5(as(t,A,!0),c)))}),N&&N.length&&vp(f,N,!0,c.people||[])}catch(C){if(c.WTF)throw C}}function _r(t){return t.charAt(0)=="/"?t.slice(1):t}function GA(t,s){if(nv(),s=s||{},Bm(s),Er(t,"META-INF/manifest.xml")||Er(t,"objectdata.xml"))return Pp(t,s);if(Er(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof L0<"u"){if(t.FileIndex)return L0(t);var r=gt.utils.cfb_new();return qf(t).forEach(function(O){qS(r,O,GS(t,O))}),L0(r)}throw new Error("Unsupported NUMBERS file")}if(!Er(t,"[Content_Types].xml"))throw Er(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Er(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=qf(t),n=z6(gr(t,"[Content_Types].xml")),i=!1,l,o;if(n.workbooks.length===0&&(o="xl/workbook.xml",as(t,o,!0)&&n.workbooks.push(o)),n.workbooks.length===0){if(o="xl/workbook.bin",!as(t,o,!0))throw new Error("Could not find workbook");n.workbooks.push(o),i=!0}n.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},d={};if(!s.bookSheets&&!s.bookProps){if(Kl=[],n.sst)try{Kl=rA(as(t,_r(n.sst)),n.sst,s)}catch(O){if(s.WTF)throw O}s.cellStyles&&n.themes.length&&(c=sA(gr(t,n.themes[0].replace(/^\//,""),!0)||"",n.themes[0],s)),n.style&&(d=tA(as(t,_r(n.style)),n.style,c,s))}n.links.map(function(O){try{var I=Gl(gr(t,Qu(_r(O))),O);return iA(as(t,_r(O)),I,O,s)}catch{}});var u=YF(as(t,_r(n.workbooks[0])),n.workbooks[0],s),p={},m="";n.coreprops.length&&(m=as(t,_r(n.coreprops[0]),!0),m&&(p=Rv(m)),n.extprops.length!==0&&(m=as(t,_r(n.extprops[0]),!0),m&&q6(m,p,s)));var f={};(!s.bookSheets||s.bookProps)&&n.custprops.length!==0&&(m=gr(t,_r(n.custprops[0]),!0),m&&(f=K6(m,s)));var h={};if((s.bookSheets||s.bookProps)&&(u.Sheets?l=u.Sheets.map(function(I){return I.name}):p.Worksheets&&p.SheetNames.length>0&&(l=p.SheetNames),s.bookProps&&(h.Props=p,h.Custprops=f),s.bookSheets&&typeof l<"u"&&(h.SheetNames=l),s.bookSheets?h.SheetNames:s.bookProps))return h;l={};var x={};s.bookDeps&&n.calcchain&&(x=nA(as(t,_r(n.calcchain)),n.calcchain));var g=0,j={},b,N;{var C=u.Sheets;p.Worksheets=C.length,p.SheetNames=[];for(var A=0;A!=C.length;++A)p.SheetNames[A]=C[A].name}var F=i?"bin":"xml",w=n.workbooks[0].lastIndexOf("/"),_=(n.workbooks[0].slice(0,w+1)+"_rels/"+n.workbooks[0].slice(w+1)+".rels").replace(/^\//,"");Er(t,_)||(_="xl/_rels/workbook."+F+".rels");var v=Gl(gr(t,_,!0),_.replace(/_rels.*/,"s5s"));(n.metadata||[]).length>=1&&(s.xlmeta=lA(as(t,_r(n.metadata[0])),n.metadata[0],s)),(n.people||[]).length>=1&&(s.people=Z5(as(t,_r(n.people[0])),s)),v&&(v=VA(v,u.Sheets));var S=as(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=p.Worksheets;++g){var R="sheet";if(v&&v[g]?(b="xl/"+v[g][1].replace(/[\/]?xl\//,""),Er(t,b)||(b=v[g][1]),Er(t,b)||(b=_.replace(/_rels\/.*$/,"")+v[g][1]),R=v[g][2]):(b="xl/worksheets/sheet"+(g+1-S)+"."+F,b=b.replace(/sheet0\./,"sheet.")),N=b.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),s&&s.sheets!=null)switch(typeof s.sheets){case"number":if(g!=s.sheets)continue e;break;case"string":if(p.SheetNames[g].toLowerCase()!=s.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(s.sheets)){for(var D=!1,V=0;V!=s.sheets.length;++V)typeof s.sheets[V]=="number"&&s.sheets[V]==g&&(D=1),typeof s.sheets[V]=="string"&&s.sheets[V].toLowerCase()==p.SheetNames[g].toLowerCase()&&(D=1);if(!D)continue e}}HA(t,b,N,p.SheetNames[g],g,j,l,R,s,u,c,d)}return h={Directory:n,Workbook:u,Props:p,Custprops:f,Deps:x,Sheets:l,SheetNames:p.SheetNames,Strings:Kl,Styles:d,Themes:c,SSF:Es(Ze)},s&&s.bookFiles&&(t.files?(h.keys=a,h.files=t.files):(h.keys=[],h.files={},t.FullPaths.forEach(function(O,I){O=O.replace(/^Root Entry[\/]/,""),h.keys.push(O),h.files[O]=t.FileIndex[I]}))),s&&s.bookVBA&&(n.vba.length>0?h.vbaraw=as(t,_r(n.vba[0]),!0):n.defaults&&n.defaults.bin===rT&&(h.vbaraw=as(t,"xl/vbaProject.bin",!0))),h}function qA(t,s){var r=s||{},a="Workbook",n=gt.find(t,a);try{if(a="/!DataSpaces/Version",n=gt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(B_(n.content),a="/!DataSpaces/DataSpaceMap",n=gt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=$_(n.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",n=gt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=z_(n.content);if(l.length!=1||l[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",n=gt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);V_(n.content)}catch{}if(a="/EncryptionInfo",n=gt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=H_(n.content);if(a="/EncryptedPackage",n=gt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],n.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],n.content,r.password||"",r);throw new Error("File is password-protected")}function Um(t,s){var r="";switch((s||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Nr(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(s&&s.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function JA(t,s){return gt.find(t,"EncryptedPackage")?qA(t,s):yj(t,s)}function KA(t,s){var r,a=t,n=s||{};return n.type||(n.type=ht&&Buffer.isBuffer(t)?"buffer":"base64"),r=uv(a,n),GA(r,n)}function Nj(t,s){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return tx(t.slice(r),s);default:break e}return Co.to_workbook(t,s)}function YA(t,s){var r="",a=Um(t,s);switch(s.type){case"base64":r=Nr(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=ai(t);break;default:throw new Error("Unrecognized type "+s.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(r=Lt(r)),s.type="binary",Nj(r,s)}function XA(t,s){var r=t;return s.type=="base64"&&(r=Nr(r)),r=No.utils.decode(1200,r.slice(2),"str"),s.type="binary",Nj(r,s)}function QA(t){return t.match(/[^\x00-\x7F]/)?Pl(t):t}function O0(t,s,r,a){return a?(r.type="string",Co.to_workbook(t,r)):Co.to_workbook(s,r)}function nx(t,s){qb();var r=s||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return nx(new Uint8Array(t),(r=Es(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var a=t,n=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),zi={},r.dateNF&&(zi.dateNF=r.dateNF),r.type||(r.type=ht&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=ht?"buffer":"binary",a=BS(t),typeof Uint8Array<"u"&&!ht&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,a=QA(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var l=new ArrayBuffer(3),o=new Uint8Array(l);if(o.foo="bar",!o.foo)return r=Es(r),r.type="array",nx(ym(a),r)}switch((n=Um(a,r))[0]){case 208:if(n[1]===207&&n[2]===17&&n[3]===224&&n[4]===161&&n[5]===177&&n[6]===26&&n[7]===225)return JA(gt.read(a,r),r);break;case 9:if(n[1]<=8)return yj(a,r);break;case 60:return tx(a,r);case 73:if(n[1]===73&&n[2]===42&&n[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(n[1]===68)return C_(a,r);break;case 84:if(n[1]===65&&n[2]===66&&n[3]===76)return k_.to_workbook(a,r);break;case 80:return n[1]===75&&n[2]<9&&n[3]<9?KA(a,r):O0(t,a,r,i);case 239:return n[3]===60?tx(a,r):O0(t,a,r,i);case 255:if(n[1]===254)return XA(a,r);if(n[1]===0&&n[2]===2&&n[3]===0)return Jl.to_workbook(a,r);break;case 0:if(n[1]===0&&(n[2]>=2&&n[3]===0||n[2]===0&&(n[3]===8||n[3]===9)))return Jl.to_workbook(a,r);break;case 3:case 131:case 139:case 140:return bp.to_workbook(a,r);case 123:if(n[1]===92&&n[2]===114&&n[3]===116)return r5.to_workbook(a,r);break;case 10:case 13:case 32:return YA(a,r);case 137:if(n[1]===80&&n[2]===78&&n[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return N_.indexOf(n[0])>-1&&n[2]<=12&&n[3]<=31?bp.to_workbook(a,r):O0(t,a,r,i)}function ZA(t,s,r,a,n,i,l,o){var c=Fs(r),d=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),p=!0,m=n===1?[]:{};if(n!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!l||t[r])for(var f=s.s.c;f<=s.e.c;++f){var h=l?t[r][f]:t[a[f]+c];if(h===void 0||h.t===void 0){if(d===void 0)continue;i[f]!=null&&(m[i[f]]=d);continue}var x=h.v;switch(h.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+h.t)}if(i[f]!=null){if(x==null)if(h.t=="e"&&x===null)m[i[f]]=null;else if(d!==void 0)m[i[f]]=d;else if(u&&x===null)m[i[f]]=null;else continue;else m[i[f]]=u&&(h.t!=="n"||h.t==="n"&&o.rawNumbers!==!1)?x:za(h,x,o);x!=null&&(p=!1)}}return{row:m,isempty:p}}function ix(t,s){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},a=0,n=1,i=[],l=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},d=s||{},u=d.range!=null?d.range:t["!ref"];switch(d.header===1?a=1:d.header==="A"?a=2:Array.isArray(d.header)?a=3:d.header==null&&(a=0),typeof u){case"string":c=Kt(u);break;case"number":c=Kt(t["!ref"]),c.s.r=u;break;default:c=u}a>0&&(n=0);var p=Fs(c.s.r),m=[],f=[],h=0,x=0,g=Array.isArray(t),j=c.s.r,b=0,N={};g&&!t[j]&&(t[j]=[]);var C=d.skipHidden&&t["!cols"]||[],A=d.skipHidden&&t["!rows"]||[];for(b=c.s.c;b<=c.e.c;++b)if(!(C[b]||{}).hidden)switch(m[b]=ps(b),r=g?t[j][b]:t[m[b]+p],a){case 1:i[b]=b-c.s.c;break;case 2:i[b]=m[b];break;case 3:i[b]=d.header[b-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=l=za(r,null,d),x=N[l]||0,!x)N[l]=1;else{do o=l+"_"+x++;while(N[o]);N[l]=x,N[o]=1}i[b]=o}for(j=c.s.r+n;j<=c.e.r;++j)if(!(A[j]||{}).hidden){var F=ZA(t,c,j,m,a,i,g,d);(F.isempty===!1||(a===1?d.blankrows!==!1:d.blankrows))&&(f[h++]=F.row)}return f.length=h,f}var Op=/"/g;function e8(t,s,r,a,n,i,l,o){for(var c=!0,d=[],u="",p=Fs(r),m=s.s.c;m<=s.e.c;++m)if(a[m]){var f=o.dense?(t[r]||[])[m]:t[a[m]+p];if(f==null)u="";else if(f.v!=null){c=!1,u=""+(o.rawNumbers&&f.t=="n"?f.v:za(f,null,o));for(var h=0,x=0;h!==u.length;++h)if((x=u.charCodeAt(h))===n||x===i||x===34||o.forceQuotes){u='"'+u.replace(Op,'""')+'"';break}u=="ID"&&(u='"ID"')}else f.f!=null&&!f.F?(c=!1,u="="+f.f,u.indexOf(",")>=0&&(u='"'+u.replace(Op,'""')+'"')):u="";d.push(u)}return o.blankrows===!1&&c?null:d.join(l)}function wj(t,s){var r=[],a=s??{};if(t==null||t["!ref"]==null)return"";var n=Kt(t["!ref"]),i=a.FS!==void 0?a.FS:",",l=i.charCodeAt(0),o=a.RS!==void 0?a.RS:`
`,c=o.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),u="",p=[];a.dense=Array.isArray(t);for(var m=a.skipHidden&&t["!cols"]||[],f=a.skipHidden&&t["!rows"]||[],h=n.s.c;h<=n.e.c;++h)(m[h]||{}).hidden||(p[h]=ps(h));for(var x=0,g=n.s.r;g<=n.e.r;++g)(f[g]||{}).hidden||(u=e8(t,n,g,p,l,c,i,a),u!=null&&(a.strip&&(u=u.replace(d,"")),(u||a.blankrows!==!1)&&r.push((x++?o:"")+u)));return delete a.dense,r.join("")}function t8(t,s){s||(s={}),s.FS="	",s.RS=`
`;var r=wj(t,s);return r}function s8(t){var s="",r,a="";if(t==null||t["!ref"]==null)return[];var n=Kt(t["!ref"]),i="",l=[],o,c=[],d=Array.isArray(t);for(o=n.s.c;o<=n.e.c;++o)l[o]=ps(o);for(var u=n.s.r;u<=n.e.r;++u)for(i=Fs(u),o=n.s.c;o<=n.e.c;++o)if(s=l[o]+i,r=d?(t[u]||[])[o]:t[s],a="",r!==void 0){if(r.F!=null){if(s=r.F,!r.f)continue;a=r.f,s.indexOf(":")==-1&&(s=s+":"+s)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}c[c.length]=s+"="+a}return c}function kj(t,s,r){var a=r||{},n=+!a.skipHeader,i=t||{},l=0,o=0;if(i&&a.origin!=null)if(typeof a.origin=="number")l=a.origin;else{var c=typeof a.origin=="string"?Ys(a.origin):a.origin;l=c.r,o=c.c}var d,u={s:{c:0,r:0},e:{c:o,r:l+s.length-1+n}};if(i["!ref"]){var p=Kt(i["!ref"]);u.e.c=Math.max(u.e.c,p.e.c),u.e.r=Math.max(u.e.r,p.e.r),l==-1&&(l=p.e.r+1,u.e.r=l+s.length-1+n)}else l==-1&&(l=0,u.e.r=s.length-1+n);var m=a.header||[],f=0;s.forEach(function(x,g){ya(x).forEach(function(j){(f=m.indexOf(j))==-1&&(m[f=m.length]=j);var b=x[j],N="z",C="",A=Ye({c:o+f,r:l+g+n});d=Fo(i,A),b&&typeof b=="object"&&!(b instanceof Date)?i[A]=b:(typeof b=="number"?N="n":typeof b=="boolean"?N="b":typeof b=="string"?N="s":b instanceof Date?(N="d",a.cellDates||(N="n",b=er(b)),C=a.dateNF||Ze[14]):b===null&&a.nullError&&(N="e",b=0),d?(d.t=N,d.v=b,delete d.w,delete d.R,C&&(d.z=C)):i[A]=d={t:N,v:b},C&&(d.z=C))})}),u.e.c=Math.max(u.e.c,o+m.length-1);var h=Fs(l);if(n)for(f=0;f<m.length;++f)i[ps(f+o)+h]={t:"s",v:m[f]};return i["!ref"]=yt(u),i}function r8(t,s){return kj(null,t,s)}function Fo(t,s,r){if(typeof s=="string"){if(Array.isArray(t)){var a=Ys(s);return t[a.r]||(t[a.r]=[]),t[a.r][a.c]||(t[a.r][a.c]={t:"z"})}return t[s]||(t[s]={t:"z"})}return typeof s!="number"?Fo(t,Ye(s)):Fo(t,Ye({r:s,c:r||0}))}function a8(t,s){if(typeof s=="number"){if(s>=0&&t.SheetNames.length>s)return s;throw new Error("Cannot find sheet # "+s)}else if(typeof s=="string"){var r=t.SheetNames.indexOf(s);if(r>-1)return r;throw new Error("Cannot find sheet name |"+s+"|")}else throw new Error("Cannot find sheet |"+s+"|")}function $m(){return{SheetNames:[],Sheets:{}}}function zm(t,s,r,a){var n=1;if(!r)for(;n<=65535&&t.SheetNames.indexOf(r="Sheet"+n)!=-1;++n,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&t.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);n=i&&+i[2]||0;var l=i&&i[1]||r;for(++n;n<=65535&&t.SheetNames.indexOf(r=l+n)!=-1;++n);}if(zF(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=s,r}function n8(t,s,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var a=a8(t,s);switch(t.Workbook.Sheets[a]||(t.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[a].Hidden=r}function i8(t,s){return t.z=s,t}function Sj(t,s,r){return s?(t.l={Target:s},r&&(t.l.Tooltip=r)):delete t.l,t}function l8(t,s,r){return Sj(t,"#"+s,r)}function o8(t,s,r){t.c||(t.c=[]),t.c.push({t:s,a:r||"SheetJS"})}function c8(t,s,r,a){for(var n=typeof s!="string"?s:Kt(s),i=typeof s=="string"?s:yt(s),l=n.s.r;l<=n.e.r;++l)for(var o=n.s.c;o<=n.e.c;++o){var c=Fo(t,l,o);c.t="n",c.F=i,delete c.v,l==n.s.r&&o==n.s.c&&(c.f=r,a&&(c.D=!0))}return t}var d8={encode_col:ps,encode_row:Fs,encode_cell:Ye,encode_range:yt,decode_col:_m,decode_row:Cm,split_cell:j6,decode_cell:Ys,decode_range:ol,format_cell:za,sheet_add_aoa:Ev,sheet_add_json:kj,sheet_add_dom:bj,aoa_to_sheet:cl,json_to_sheet:r8,table_to_sheet:vj,table_to_book:CA,sheet_to_csv:wj,sheet_to_txt:t8,sheet_to_json:ix,sheet_to_html:SA,sheet_to_formulae:s8,sheet_to_row_object_array:ix,sheet_get_cell:Fo,book_new:$m,book_append_sheet:zm,book_set_sheet_visibility:n8,cell_set_number_format:i8,cell_set_hyperlink:Sj,cell_set_internal_link:l8,cell_add_comment:o8,sheet_set_array_formula:c8,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function u8(t){const s=t.split(/\r?\n/).filter(n=>n.trim().length>0);if(s.length===0)return[];const r=Ip(s[0]).map(n=>n.trim()),a=[];for(let n=1;n<s.length;n++){const i=Ip(s[n]);if(i.length===0)continue;const l={};r.forEach((o,c)=>{l[o]=(i[c]??"").trim()}),a.push(l)}return a}function Ip(t){const s=[];let r="",a=!1;for(let n=0;n<t.length;n++){const i=t[n];if(i==='"'){if(a&&t[n+1]==='"'){r+='"',n++;continue}a=!a;continue}if(i===","&&!a){s.push(r),r="";continue}r+=i}return s.push(r),s}function Mp(t){return t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}async function Dr(t,s){const r=new FormData;r.append("file",t);const a=localStorage.getItem("auth_token"),n=localStorage.getItem("role"),i=localStorage.getItem("permissions"),l={};a&&(l.Authorization=`Bearer ${a}`),n&&(l["x-user-role"]=n),i&&(l["x-user-permissions"]=i);const o=await fetch(`${s}/api/upload`,{method:"POST",body:r,headers:l});if(!o.ok){const m=await o.text();let f="upload failed";try{const h=JSON.parse(m);f=h.message||h.error||f}catch{f=m||f}throw new Error(f)}const d=(await o.json()).url;if(!d)throw new Error("upload failed: no URL in response");if(/^https?:\/\//i.test(d))return d;const u=s.replace(/\/$/,""),p=d.startsWith("/")?d:`/${d}`;return`${u}${p}`}function x8(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Products"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage your product catalog"})]}),e.jsx("button",{className:"btn-primary",children:"Add Product"})]}),e.jsx(m8,{})]})})}function m8(){var He,Le,ve,et,wt,fe,ne,Ue,kt,it,Ct,St,lt,ot,pe,Oe,Xe,Ft,bt,Hs,na,ka,Ga,$r,he,me,be,ye,Pe,Re,$e,Te,we,Ge,st,ut,ee,oe,de,ge,Ee,M,G;const{notify:t}=Sr(),[s,r]=y.useState([]),[a,n]=y.useState(!1),[i,l]=y.useState(""),[o,c]=y.useState(""),[d,u]=y.useState(""),[p,m]=y.useState("title"),[f,h]=y.useState("asc"),[x,g]=y.useState(null),[j,b]=y.useState([]),[N,C]=y.useState(!1),[A,F]=y.useState(null),[w,_]=y.useState([]),[v,S]=y.useState([]),[R,D]=y.useState({slug:"",title:"",category:"",price:"",list_image:"",description:"",details:{sku:"",hsn:"",mrp:"",websitePrice:"",discountPercent:"",brand:"",subtitle:"",skinHairType:"",netQuantity:"",unitCount:"",packageContent:"",innerPackaging:"",outerPackaging:"",netWeight:"",deadWeight:"",gstPercent:"",countryOfOrigin:"",manufacturer:"",keyIngredients:"",ingredientBenefits:"",howToUse:"",longDescription:"",bulletHighlights:"",imageLinks:"",videoLinks:"",platformCategoryMapping:"",hazardous:"",badges:""}}),[V,O]=y.useState(null),[I,z]=y.useState([]),P="http://192.168.1.36:2000",k=E=>{if(!E)return"";if(/^https?:\/\//i.test(E))return E;const T=P.replace(/\/$/,""),U=E.startsWith("/")?E:`/${E}`;return`${T}${U}`},X=async()=>{var E;try{n(!0),l(""),console.log(" Loading products from API:",`${P}/api/products`);const T=await fetch(`${P}/api/products?_=${Date.now()}`,{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(console.log(" API Response Status:",T.status,T.ok),!T.ok)throw new Error(`HTTP error! status: ${T.status}`);const U=await T.json();console.log(` Loaded ${(U==null?void 0:U.length)||0} products from database`),console.log(" First product:",((E=U==null?void 0:U[0])==null?void 0:E.title)||"None"),r(Array.isArray(U)?U:[])}catch(T){console.error(" Failed to load products:",T),l("Failed to load products: "+T.message)}finally{n(!1)}};y.useEffect(()=>{X();const E=Je.subscribe("product_updated",U=>{console.log(" Product updated in Products page:",U),X()}),T=Je.subscribe("products_updated",U=>{console.log(" Products updated in Products page:",U),X()});return()=>{E&&E(),T&&T()}},[]);const se=async E=>{E.preventDefault();try{let T=R.list_image||"";if(V)try{T=await Dr(V,P)}catch{t("error","Main image upload failed");return}const U=await fetch(`${P}/api/products`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:R.slug,title:R.title,category:R.category,price:R.price,listImage:T,description:R.description,details:R.details})});if(!U.ok)throw new Error("create failed");const W=await U.json();if(I.length)try{const Z=[];for(const te of I){const le=await Dr(te,P);Z.push(le)}await fetch(`${P}/api/products/${W.id}/images`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({images:Z})})}catch{}await X(),D({slug:"",title:"",category:"",price:"",list_image:"",description:"",details:{...R.details,sku:"",hsn:"",mrp:"",websitePrice:"",discountPercent:""}}),O(null),z([])}catch{t("error","Create failed")}},[B,L]=y.useState(null),[H,K]=y.useState(new Set),[J,re]=y.useState(!1),q=async E=>{try{if(!(await fetch(`${P}/api/products/${E}`,{method:"DELETE"})).ok)throw new Error("delete failed");K(U=>{const W=new Set(U);return W.delete(E),W}),await X(),t("success","Product deleted")}catch{t("error","Delete failed")}},ae=async()=>{if(H.size===0){t("error","No products selected");return}try{const E=Array.from(H),T=await fetch(`${P}/api/products/bulk-delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:E})});if(!T.ok){const W=await T.json().catch(()=>({}));throw new Error(W.error||W.message||"Bulk delete failed")}await X();const U=new Set(H);E.forEach(W=>U.delete(W)),K(U),re(!1),t("success",`Successfully deleted ${E.length} product(s)`)}catch(E){t("error",`Bulk delete failed: ${E.message}`)}},xe=E=>{K(T=>{const U=new Set(T);return U.has(E)?U.delete(E):U.add(E),U})},_e=()=>{H.size===Be.length?K(new Set):K(new Set(Be.map(E=>E.id)))},Y=E=>{g({...E,details:E.details||{sku:"",hsn:"",mrp:"",websitePrice:"",discountPercent:"",brand:"",subtitle:"",skinHairType:"",netQuantity:"",unitCount:"",packageContent:"",innerPackaging:"",outerPackaging:"",netWeight:"",deadWeight:"",gstPercent:"",countryOfOrigin:"",manufacturer:"",keyIngredients:"",ingredientBenefits:"",howToUse:"",longDescription:"",bulletHighlights:"",imageLinks:"",videoLinks:"",platformCategoryMapping:"",hazardous:"",badges:""}})},Fe=async E=>{if(E.preventDefault(),!(!x||!x.id)){if(!x.title||!x.slug){t("error","Slug and Title are required");return}try{if(!(await fetch(`${P}/api/products/${x.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:x.slug,title:x.title,category:x.category,price:x.price,listImage:x.list_image,description:x.description,details:x.details})})).ok)throw new Error("update failed");await X(),g(null),t("success","Product updated")}catch{t("error","Update failed")}}},Be=y.useMemo(()=>{let E=s;if(o){const T=o.toLowerCase();E=E.filter(U=>U.title.toLowerCase().includes(T)||U.slug.toLowerCase().includes(T)||(U.category||"").toLowerCase().includes(T))}return d&&(E=E.filter(T=>(T.category||"")===d)),E=[...E].sort((T,U)=>{const W=f==="asc"?1:-1,Z=p==="price"?Number(T.price)||0:T[p]||"",te=p==="price"?Number(U.price)||0:U[p]||"";return Z<te?-1*W:Z>te?1*W:0}),E},[s,o,d,p,f]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Bulk Import"}),e.jsxs("div",{className:"mb-3 rounded bg-green-50 p-3 text-sm text-green-800",children:[e.jsx("strong",{children:" Enhanced Bulk Import:"})," CSV import will automatically map all product fields including pricing, GST, packaging, ingredients, and more. First image from Image Links will be used as list image. Remaining fields can be updated manually after import."]}),e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center",children:[e.jsx("input",{type:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",onChange:async E=>{var W;const T=(W=E.target.files)==null?void 0:W[0];if(!T)return;const U=await T.arrayBuffer();if(T.name.endsWith(".csv")){let Z=new TextDecoder().decode(new Uint8Array(U));Z.charCodeAt(0)===65279&&(Z=Z.slice(1)),b(u8(Z))}else{const Z=nx(U,{type:"array"}),te=Z.Sheets[Z.SheetNames[0]],le=d8.sheet_to_json(te);b(le)}}}),e.jsx("button",{disabled:!j.length||N,onClick:async()=>{C(!0);try{const E=(ie,ue)=>{const Ne=Object.entries(ie),Ae=ue.find(ze=>Ne.some(([dt])=>dt.toLowerCase().replace(/\s+|_|\(|\)/g,"")===ze.toLowerCase().replace(/\s+|_|\(|\)/g,"")));if(!Ae)return"";const je=Ne.find(([ze])=>ze.toLowerCase().replace(/\s+|_|\(|\)/g,"")===Ae.toLowerCase().replace(/\s+|_|\(|\)/g,""))[0],Ce=ie[je];return Ce==null||Ce===""?"":String(Ce).trim()},T=ie=>ie&&ie.split(",")[0].trim()||"",U=ie=>{if(!ie)return"";const ue=ie.toLowerCase().trim();return ue==="face care"?"Face Care":ue==="hair care"?"Hair Care":ue==="body care"?"Body Care":ue==="combo"||ue.includes("combo")||ue.includes("pack")?"Combo":ue.includes("hair")?"Hair Care":ue.includes("face")&&!ue.includes("hair")?"Face Care":ue.includes("body")?"Body Care":ie.split(" ").map(Ne=>Ne.charAt(0).toUpperCase()+Ne.slice(1).toLowerCase()).join(" ")};let W=0,Z=0;const te=[],le=new Set;for(let ie=0;ie<j.length;ie++){const ue=j[ie],Ne=E(ue,["product name","title","producttitle","name","Product Name"]),Ae=E(ue,["slug","Slug"])||Mp(Ne);let je=Ae,Ce=1;for(;le.has(je);)je=`${Ae}-${Ce}`,Ce++;le.add(je);const ze=E(ue,["product category","category","cat","Product Category"]),dt=U(ze),rt=E(ue,["mrp","MRP","MRP "]),_t=E(ue,["website price","websiteprice","websiteprice","WEBSITE price","websitePrice"]),Ps=E(ue,["discount","discountpercent","discount %","Discount %","discountPercent"]),Ke=_t||rt||E(ue,["price","amount"]),ft=E(ue,["product description (long)","longdescription","description","desc","Product Description (Long)"]),pt=Ke?String(Ke):"",At=E(ue,["image links","imagelinks","Image Links","imageLinks"]),vt=T(At),Gs={sku:E(ue,["sku","SKU"]),hsn:E(ue,["hsn code","hsncode","HSN Code","hsn"]),brand:E(ue,["brand name","brandname","Brand Name","brand"])||"NEFOL",productTitle:E(ue,["product title","producttitle","Product Title","productTitle"]),subtitle:E(ue,["subtitle / tagline","subtitle","Subtitle / Tagline","subtitle"]),subCategory:E(ue,["product sub-category","subcategory","Product Sub-Category","subCategory"]),productType:E(ue,["product type","producttype","Product Type","productType"]),skinHairType:E(ue,["skin/hair type","skinhairtype","Skin/Hair Type","skinHairType"]),mrp:rt||"",websitePrice:_t||"",discountPercent:Ps||(rt&&_t?String(Math.round((parseFloat(rt)-parseFloat(_t))/parseFloat(rt)*100)):""),discount:Ps||"",gst:E(ue,["gst %","gstpercent","GST %","gstPercent","gst"]),gstPercent:E(ue,["gst %","gstpercent","GST %","gstPercent","gst"]),netQuantity:E(ue,["net quantity (content)","netquantity","Net Quantity (Content)","netQuantity"]),unitCount:E(ue,["unit count (pack of)","unitcount","Unit Count (Pack of)","unitCount"]),netWeight:E(ue,["net weight (product only)","netweight","Net Weight (Product Only)","netWeight"]),deadWeight:E(ue,["dead weight (packaging only)","deadweight","Dead Weight (Packaging Only)","deadWeight"]),packageContent:E(ue,["package content details","packagecontent","Package Content Details","packageContent"]),innerPackaging:E(ue,["inner packaging type","innerpackaging","Inner Packaging Type","innerPackaging"]),outerPackaging:E(ue,["outer packaging type","outerpackaging","Outer Packaging Type","outerPackaging"]),countryOfOrigin:E(ue,["country of origin","countryoforigin","Country of Origin","countryOfOrigin"]),manufacturer:E(ue,["manufacturer / packer / importer","manufacturer","Manufacturer / Packer / Importer","manufacturer"]),keyIngredients:E(ue,["key ingredients","keyingredients","Key Ingredients","keyIngredients"]),ingredientBenefits:E(ue,["ingredient benefits","ingredientbenefits","Ingredient Benefits","ingredientBenefits"]),howToUse:E(ue,["how to use (steps)","howtouse","How to Use (Steps)","howToUse","how to use"]),longDescription:ft||E(ue,["product description (long)","longdescription","Product Description (Long)","longDescription"]),bulletHighlights:E(ue,["bullet highlights","bullethighlights","Bullet Highlights","bulletHighlights"]),imageLinks:At||"",videoLinks:E(ue,["video links","videolinks","Video Links","videoLinks"]),platformCategoryMapping:E(ue,["platform category mapping","platformcategorymapping","Platform Category Mapping","platformCategoryMapping"]),hazardous:E(ue,["hazardous / fragile (y/n)","hazardous","Hazardous / Fragile (Y/N)","hazardous"]),badges:E(ue,["special attributes (badges)","badges","Special Attributes (Badges)","badges"])};Object.keys(Gs).forEach(at=>{(Gs[at]===""||Gs[at]===null||Gs[at]===void 0)&&delete Gs[at]});const En={slug:je,title:Ne,category:dt,price:pt,listImage:vt,description:ft,details:Gs};if(!En.title||!En.slug){Z++,te.push(`Row ${ie+1}: missing title/slug`);continue}try{const at=await fetch(`${P}/api/products`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(En)});if(at.ok){const ds=await at.json();W++,console.log(`Product created: ${ds.id} - ${ds.title}`)}else{const ds=await at.json().catch(()=>({}));Z++;const mr=ds.error||ds.message||`HTTP ${at.status}`;te.push(`Row ${ie+1}: ${mr}`),console.error("Failed to create product:",ds)}}catch(at){Z++,te.push(`Row ${ie+1}: Network error - ${at}`),console.error(`Network error for row ${ie+1}:`,at)}}console.log("Import finished. Waiting for database commit..."),await new Promise(ie=>setTimeout(ie,500)),console.log("Reloading products from database..."),await X(),b([]);const ce=`Import complete! Success: ${W}, Failed: ${Z}`;t(Z?"error":"success",ce)}catch(E){console.error("Import failed:",E),t("error",`Import failed: ${E}`)}finally{C(!1)}},className:"rounded bg-blue-600 px-4 py-2 text-sm font-semibold hover:bg-blue-700 disabled:opacity-50",children:N?"Importing...":`Import ${j.length||""}`})]}),!!j.length&&e.jsxs("div",{className:"mt-4 max-h-64 overflow-auto rounded border border-white/10",children:[e.jsxs("table",{className:"w-full text-left text-xs",children:[e.jsx("thead",{className:"sticky top-0 border-b border-white/10 bg-slate-900 text-white/70",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pr-3",children:"title"}),e.jsx("th",{className:"py-2 pr-3",children:"slug"}),e.jsx("th",{className:"py-2 pr-3",children:"category"}),e.jsx("th",{className:"py-2 pr-3",children:"price"}),e.jsx("th",{className:"py-2 pr-3",children:"description"})]})}),e.jsx("tbody",{children:j.slice(0,50).map((E,T)=>e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-1 pr-3",children:E.title}),e.jsx("td",{className:"py-1 pr-3",children:E.slug||Mp(E.title||"")}),e.jsx("td",{className:"py-1 pr-3",children:E.category}),e.jsx("td",{className:"py-1 pr-3",children:E.price}),e.jsx("td",{className:"py-1 pr-3",children:E.description})]},T))})]}),j.length>50&&e.jsxs("div",{className:"p-2 text-center text-xs text-white/60",children:["Showing first 50 of ",j.length]})]})]}),e.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 p-6",children:[e.jsx("h2",{className:"mb-4 text-lg font-semibold",children:"Add Product"}),e.jsxs("form",{onSubmit:se,className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Slug",value:R.slug||"",onChange:E=>D(T=>({...T,slug:E.target.value})),required:!0}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Title",value:R.title||"",onChange:E=>D(T=>({...T,title:E.target.value})),required:!0}),e.jsxs("select",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:R.category||"",onChange:E=>D(T=>({...T,category:E.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"Face Care",children:"Face Care"}),e.jsx("option",{value:"Hair Care",children:"Hair Care"}),e.jsx("option",{value:"Body Care",children:"Body Care"}),e.jsx("option",{value:"Combo",children:"Combo"})]}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Price (display)",value:R.price||"",onChange:E=>D(T=>({...T,price:E.target.value}))}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"SKU",value:((He=R.details)==null?void 0:He.sku)||"",onChange:E=>D(T=>({...T,details:{...T.details||{},sku:E.target.value}}))}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"HSN Code",value:((Le=R.details)==null?void 0:Le.hsn)||"",onChange:E=>D(T=>({...T,details:{...T.details||{},hsn:E.target.value}}))}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"MRP",value:((ve=R.details)==null?void 0:ve.mrp)||"",onChange:E=>{var W;const T=E.target.value,U=(W=R.details)==null?void 0:W.discountPercent;if(T&&U){const Z=parseFloat(T)-parseFloat(T)*parseFloat(U)/100;D(te=>({...te,details:{...te.details||{},mrp:T,websitePrice:Z.toFixed(2)}}))}else D(Z=>({...Z,details:{...Z.details||{},mrp:T}}))}}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Discount %",type:"number",min:"0",max:"100",value:((et=R.details)==null?void 0:et.discountPercent)||"",onChange:E=>{var W;const T=E.target.value,U=(W=R.details)==null?void 0:W.mrp;if(T&&U){const Z=parseFloat(U)-parseFloat(U)*parseFloat(T)/100;D(te=>({...te,details:{...te.details||{},discountPercent:T,websitePrice:Z.toFixed(2)}}))}else D(Z=>({...Z,details:{...Z.details||{},discountPercent:T}}))}}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Website Price (Discounted)",value:((wt=R.details)==null?void 0:wt.websitePrice)||"",onChange:E=>{var W;const T=E.target.value,U=(W=R.details)==null?void 0:W.mrp;if(T&&U){const Z=((parseFloat(U)-parseFloat(T))/parseFloat(U)*100).toFixed(1);D(te=>({...te,details:{...te.details||{},websitePrice:T,discountPercent:Z}}))}else D(Z=>({...Z,details:{...Z.details||{},websitePrice:T}}))}}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"mb-1 text-xs text-white/70",children:"Main Image (upload or fallback URL)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:E=>{var T;return O(((T=E.target.files)==null?void 0:T[0])||null)},className:"rounded border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),e.jsx("span",{className:"text-xs text-white/50",children:"or"}),e.jsx("input",{className:"flex-1 rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"List Image URL (optional)",value:R.list_image||"",onChange:E=>D(T=>({...T,list_image:E.target.value}))})]}),e.jsx("div",{className:"mt-2 text-xs text-white/50",children:"Add additional video in PDP Media below."})]}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"Description",value:R.description||"",onChange:E=>D(T=>({...T,description:E.target.value}))}),e.jsx("textarea",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"How to Use",value:((fe=R.details)==null?void 0:fe.howToUse)||"",onChange:E=>D(T=>({...T,details:{...T.details||{},howToUse:E.target.value}}))}),e.jsx("textarea",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"Key Ingredients",value:((ne=R.details)==null?void 0:ne.keyIngredients)||"",onChange:E=>D(T=>({...T,details:{...T.details||{},keyIngredients:E.target.value}}))}),e.jsx("textarea",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"Ingredient Benefits",value:((Ue=R.details)==null?void 0:Ue.ingredientBenefits)||"",onChange:E=>D(T=>({...T,details:{...T.details||{},ingredientBenefits:E.target.value}}))}),e.jsx("textarea",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"Bullet Highlights",value:((kt=R.details)==null?void 0:kt.bulletHighlights)||"",onChange:E=>D(T=>({...T,details:{...T.details||{},bulletHighlights:E.target.value}}))}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("div",{className:"mb-1 text-xs text-white/70",children:"PDP Media (images or 1 video)"}),e.jsx("input",{multiple:!0,type:"file",accept:"image/*,video/*",onChange:E=>z(Array.from(E.target.files||[])),className:"rounded border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),e.jsx("div",{className:"mt-2 text-xs text-white/50",children:"Tip: Upload up to 7 images and 1 short video (mp4/webm)."})]}),e.jsx("div",{className:"md:col-span-3",children:e.jsx("button",{className:"rounded bg-blue-600 px-4 py-2 font-semibold hover:bg-blue-700",children:"Save"})})]})]}),e.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 p-6",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Products"}),H.size>0&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-sm text-white/70",children:[H.size," selected"]}),e.jsxs("button",{onClick:()=>re(!0),className:"rounded bg-red-600 px-4 py-2 text-sm font-semibold hover:bg-red-700 disabled:opacity-50",disabled:H.size===0,children:["Delete Selected (",H.size,")"]})]})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-2 md:flex-row md:items-center md:justify-end",children:[e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Search...",value:o,onChange:E=>c(E.target.value)}),e.jsxs("select",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:d,onChange:E=>u(E.target.value),children:[e.jsx("option",{value:"",children:"All categories"}),e.jsx("option",{value:"Face Care",children:"Face Care"}),e.jsx("option",{value:"Hair Care",children:"Hair Care"}),e.jsx("option",{value:"Body Care",children:"Body Care"}),e.jsx("option",{value:"Combo",children:"Combo"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:p,onChange:E=>m(E.target.value),children:[e.jsx("option",{value:"title",children:"Title"}),e.jsx("option",{value:"price",children:"Price"}),e.jsx("option",{value:"category",children:"Category"})]}),e.jsx("button",{className:"rounded bg-white/10 px-3 py-2 text-sm hover:bg-white/15",onClick:()=>h(E=>E==="asc"?"desc":"asc"),children:f==="asc"?"Asc":"Desc"})]}),e.jsx("button",{onClick:X,className:"rounded bg-white/10 px-3 py-2 text-sm hover:bg-white/15",children:"Refresh"}),e.jsxs("form",{onSubmit:async E=>{var te;E.preventDefault();const U=(te=E.currentTarget.elements.namedItem("csv").files)==null?void 0:te[0];if(!U)return;const W=new FormData;W.append("file",U),(await fetch(`${P}/api/products-csv/upload`,{method:"POST",body:W})).ok?alert("CSV uploaded"):alert("CSV upload failed")},className:"flex items-center gap-2",children:[e.jsx("input",{name:"csv",type:"file",accept:".csv",className:"rounded border border-gray-300 bg-white px-3 py-2 text-xs text-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),e.jsx("button",{className:"rounded bg-white/10 px-3 py-2 text-sm hover:bg-white/15",children:"Upload CSV"})]})]})]}),a?e.jsx("p",{children:"Loading..."}):i?e.jsx("p",{className:"text-red-400",children:i}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"border-b border-white/10 text-xs uppercase text-white/70",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pr-4",children:e.jsx("input",{type:"checkbox",checked:H.size===Be.length&&Be.length>0,onChange:_e,className:"cursor-pointer"})}),e.jsx("th",{className:"py-2 pr-4",children:"ID"}),e.jsx("th",{className:"py-2 pr-4",children:"Slug"}),e.jsx("th",{className:"py-2 pr-4",children:"Title"}),e.jsx("th",{className:"py-2 pr-4",children:"Category"}),e.jsx("th",{className:"py-2 pr-4",children:"Price"}),e.jsx("th",{className:"py-2 pr-4",children:"Image"}),e.jsx("th",{className:"py-2 pr-4",children:"Actions"})]})}),e.jsx("tbody",{children:Be.map(E=>{var T,U;return e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2 pr-4",children:e.jsx("input",{type:"checkbox",checked:H.has(E.id),onChange:()=>xe(E.id),className:"cursor-pointer"})}),e.jsx("td",{className:"py-2 pr-4",children:E.id}),e.jsx("td",{className:"py-2 pr-4",children:E.slug}),e.jsx("td",{className:"py-2 pr-4",children:E.title}),e.jsx("td",{className:"py-2 pr-4",children:E.category}),e.jsx("td",{className:"py-2 pr-4",children:e.jsx("div",{className:"text-sm",children:(T=E.details)!=null&&T.mrp&&((U=E.details)!=null&&U.websitePrice)?e.jsxs("div",{children:[e.jsxs("div",{className:"text-gray-500 line-through text-xs",children:["",E.details.mrp]}),e.jsxs("div",{className:"font-semibold text-green-600",children:["",E.details.websitePrice]}),e.jsxs("div",{className:"text-xs text-green-500",children:[((parseFloat(E.details.mrp)-parseFloat(E.details.websitePrice))/parseFloat(E.details.mrp)*100).toFixed(0),"% OFF"]})]}):e.jsxs("div",{className:"font-semibold",children:["",E.price]})})}),e.jsx("td",{className:"py-2 pr-4",children:E.list_image?e.jsx("img",{src:k(E.list_image),className:"h-10 w-10 rounded object-cover"}):e.jsx("span",{className:"opacity-50",children:""})}),e.jsx("td",{className:"py-2 pr-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:async()=>{F(E),_([]),S([]);try{const W=await fetch(`${P}/api/products/${E.id}/images`);if(W.ok){const Z=await W.json(),te=[...new Set(Z.filter(ce=>ce.type==="pdp"||!ce.type).map(ce=>ce.url).filter(Boolean))],le=[...new Set(Z.filter(ce=>ce.type==="banner").map(ce=>ce.url).filter(Boolean))];_(te),S(le)}}catch{}},className:"rounded bg-white/10 px-3 py-1 text-xs hover:bg-white/15",children:"Images"}),e.jsx("button",{onClick:()=>Y(E),className:"rounded bg-white/10 px-3 py-1 text-xs hover:bg-white/15",children:"Edit"}),e.jsx("button",{onClick:()=>L(E.id),className:"rounded bg-red-600 px-3 py-1 text-xs hover:bg-red-700",children:"Delete"})]})})]},E.id)})})]})}),A&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",children:e.jsxs("div",{className:"w-full max-w-2xl rounded-lg border border-gray-300 bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Manage Images  ",A.title]}),e.jsx("button",{onClick:()=>F(null),className:"rounded bg-gray-200 px-3 py-1 text-sm text-gray-700 hover:bg-gray-300",children:"Close"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 text-sm text-gray-700",children:"Main image"}),e.jsxs("div",{className:"flex items-center gap-3",children:[A.list_image?e.jsx("img",{src:k(A.list_image),className:"h-16 w-16 rounded object-cover"}):e.jsx("div",{className:"h-16 w-16 rounded border border-gray-300 bg-gray-50"}),e.jsx("input",{type:"file",accept:"image/*",className:"rounded border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",onChange:async E=>{var U;const T=(U=E.target.files)==null?void 0:U[0];if(T)try{const W=await Dr(T,P),Z=await fetch(`${P}/api/products/${A.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({listImage:W})});if(!Z.ok){const te=await Z.text().catch(()=>"");throw new Error(te||"Update failed")}r(te=>te.map(le=>le.id===A.id?{...le,list_image:W}:le)),F(te=>te&&{...te,list_image:W}),await X(),t("success","Main image updated")}catch{t("error","Upload failed")}}})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 text-sm text-gray-700",children:"PDP images"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:w.map((E,T)=>{const U=k(E);return/\.(mp4|webm|ogg)(\?|$)/i.test(U)?e.jsx("video",{src:U,className:"h-16 w-16 rounded object-cover"},T):e.jsx("img",{src:U,className:"h-16 w-16 rounded object-cover"},T)})}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{multiple:!0,type:"file",accept:"image/*,video/*",className:"rounded border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",onChange:async E=>{const T=Array.from(E.target.files||[]);if(T.length)try{const U=[];for(const Z of T){const te=await Dr(Z,P);U.push(te)}await fetch(`${P}/api/products/${A.id}/images`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({images:U,type:"pdp"})});const W=await fetch(`${P}/api/products/${A.id}/images`);if(W.ok){const Z=await W.json(),te=[...new Set(Z.filter(le=>le.type==="pdp"||!le.type).map(le=>le.url).filter(Boolean))];_(te)}await X(),t("success","PDP images uploaded")}catch{t("error","Upload failed")}}})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 text-sm text-gray-700",children:"Banner images"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:v.map((E,T)=>{const U=k(E);return/\.(mp4|webm|ogg)(\?|$)/i.test(U)?e.jsx("video",{src:U,className:"h-16 w-16 rounded object-cover"},T):e.jsx("img",{src:U,className:"h-16 w-16 rounded object-cover"},T)})}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{multiple:!0,type:"file",accept:"image/*,video/*",className:"rounded border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",onChange:async E=>{const T=Array.from(E.target.files||[]);if(T.length)try{const U=[];for(const Z of T){const te=await Dr(Z,P);U.push(te)}await fetch(`${P}/api/products/${A.id}/images`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({images:U,type:"banner"})});const W=await fetch(`${P}/api/products/${A.id}/images`);if(W.ok){const Z=await W.json(),te=[...new Set(Z.filter(le=>le.type==="banner").map(le=>le.url).filter(Boolean))];S(te)}await X(),t("success","Banner images uploaded")}catch{t("error","Upload failed")}}})})]})]})]})}),x&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-black/60 p-4 overflow-y-auto",children:e.jsxs("div",{className:"w-full max-w-4xl rounded-lg border border-gray-300 bg-white shadow-xl my-8",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 z-10 flex items-center justify-between rounded-t-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Edit Product - ",x.title]}),e.jsx("button",{onClick:()=>g(null),className:"rounded bg-gray-200 px-3 py-1 text-sm text-gray-700 hover:bg-gray-300",children:"Close"})]}),e.jsx("div",{className:"max-h-[calc(100vh-8rem)] overflow-y-auto px-6 py-6",children:e.jsxs("form",{onSubmit:Fe,className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Product Name *",value:x.title||"",onChange:E=>g(T=>({...T,title:E.target.value})),required:!0}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Slug *",value:x.slug||"",onChange:E=>g(T=>({...T,slug:E.target.value})),required:!0}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Brand Name",value:((it=x.details)==null?void 0:it.brand)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},brand:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"SKU",value:((Ct=x.details)==null?void 0:Ct.sku)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},sku:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"HSN Code",value:((St=x.details)==null?void 0:St.hsn)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},hsn:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"Product Title",value:((lt=x.details)==null?void 0:lt.productTitle)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},productTitle:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"Subtitle / Tagline",value:((ot=x.details)==null?void 0:ot.subtitle)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},subtitle:E.target.value}}))})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Category & Type"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("select",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:x.category||"",onChange:E=>g(T=>({...T,category:E.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"Face Care",children:"Face Care"}),e.jsx("option",{value:"Hair Care",children:"Hair Care"}),e.jsx("option",{value:"Body Care",children:"Body Care"}),e.jsx("option",{value:"Combo",children:"Combo"})]}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Sub-Category",value:((pe=x.details)==null?void 0:pe.subCategory)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},subCategory:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Product Type",value:((Oe=x.details)==null?void 0:Oe.productType)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},productType:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Skin/Hair Type",value:((Xe=x.details)==null?void 0:Xe.skinHairType)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},skinHairType:E.target.value}}))})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Pricing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"MRP ()"}),e.jsx("input",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"MRP",type:"number",value:((Ft=x.details)==null?void 0:Ft.mrp)||"",onChange:E=>{var W;const T=E.target.value,U=(W=x.details)==null?void 0:W.discountPercent;if(T&&U){const Z=parseFloat(T)-parseFloat(T)*parseFloat(U)/100;g(te=>({...te,details:{...(te==null?void 0:te.details)||{},mrp:T,websitePrice:Z.toFixed(2)}}))}else g(Z=>({...Z,details:{...(Z==null?void 0:Z.details)||{},mrp:T}}))}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Discount %"}),e.jsx("input",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Discount %",type:"number",min:"0",max:"100",value:((bt=x.details)==null?void 0:bt.discount)||((Hs=x.details)==null?void 0:Hs.discountPercent)||"",onChange:E=>{var W;const T=E.target.value,U=(W=x.details)==null?void 0:W.mrp;if(T&&U){const Z=parseFloat(U)-parseFloat(U)*parseFloat(T)/100;g(te=>({...te,details:{...(te==null?void 0:te.details)||{},discount:T,discountPercent:T,websitePrice:Z.toFixed(2)}}))}else g(Z=>({...Z,details:{...(Z==null?void 0:Z.details)||{},discount:T,discountPercent:T}}))}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Website Price ()"}),e.jsx("input",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Website Price",type:"number",value:((na=x.details)==null?void 0:na.websitePrice)||"",onChange:E=>{var W;const T=E.target.value,U=(W=x.details)==null?void 0:W.mrp;if(T&&U){const Z=((parseFloat(U)-parseFloat(T))/parseFloat(U)*100).toFixed(1);g(te=>({...te,details:{...(te==null?void 0:te.details)||{},websitePrice:T,discount:Z,discountPercent:Z}}))}else g(Z=>({...Z,details:{...(Z==null?void 0:Z.details)||{},websitePrice:T}}))}})]}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"GST %",value:((ka=x.details)==null?void 0:ka.gst)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},gst:E.target.value}}))})]}),((Ga=x.details)==null?void 0:Ga.mrp)&&(($r=x.details)==null?void 0:$r.websitePrice)&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mt-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Discount Amount"}),e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:["",(parseFloat(x.details.mrp)-parseFloat(x.details.websitePrice)).toFixed(2)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Discount %"}),e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:[((parseFloat(x.details.mrp)-parseFloat(x.details.websitePrice))/parseFloat(x.details.mrp)*100).toFixed(1),"%"]})]})]})})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Packaging & Quantity"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Net Quantity",value:((he=x.details)==null?void 0:he.netQuantity)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},netQuantity:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Unit Count (Pack of)",value:((me=x.details)==null?void 0:me.unitCount)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},unitCount:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Net Weight",value:((be=x.details)==null?void 0:be.netWeight)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},netWeight:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Dead Weight",value:((ye=x.details)==null?void 0:ye.deadWeight)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},deadWeight:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-2",placeholder:"Package Content Details",value:((Pe=x.details)==null?void 0:Pe.packageContent)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},packageContent:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Inner Packaging Type",value:((Re=x.details)==null?void 0:Re.innerPackaging)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},innerPackaging:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Outer Packaging Type",value:(($e=x.details)==null?void 0:$e.outerPackaging)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},outerPackaging:E.target.value}}))})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Manufacturer & Origin"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Country of Origin",value:((Te=x.details)==null?void 0:Te.countryOfOrigin)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},countryOfOrigin:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Manufacturer / Packer / Importer",value:((we=x.details)==null?void 0:we.manufacturer)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},manufacturer:E.target.value}}))})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Product Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("textarea",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Key Ingredients",rows:2,value:((Ge=x.details)==null?void 0:Ge.keyIngredients)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},keyIngredients:E.target.value}}))}),e.jsx("textarea",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Ingredient Benefits",rows:2,value:((st=x.details)==null?void 0:st.ingredientBenefits)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},ingredientBenefits:E.target.value}}))}),e.jsx("textarea",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"How to Use",rows:2,value:((ut=x.details)==null?void 0:ut.howToUse)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},howToUse:E.target.value}}))}),e.jsx("textarea",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Product Description (Long)",rows:4,value:((ee=x.details)==null?void 0:ee.longDescription)||x.description||"",onChange:E=>{g(T=>({...T,description:E.target.value,details:{...(T==null?void 0:T.details)||{},longDescription:E.target.value}}))}}),e.jsx("textarea",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Bullet Highlights",rows:2,value:((oe=x.details)==null?void 0:oe.bulletHighlights)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},bulletHighlights:E.target.value}}))})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Media & Links"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"List Image URL",value:x.list_image||"",onChange:E=>g(T=>({...T,list_image:E.target.value}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Image Links (comma separated)",value:((de=x.details)==null?void 0:de.imageLinks)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},imageLinks:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Video Links (comma separated)",value:((ge=x.details)==null?void 0:ge.videoLinks)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},videoLinks:E.target.value}}))})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Platform Category Mapping",value:((Ee=x.details)==null?void 0:Ee.platformCategoryMapping)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},platformCategoryMapping:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Hazardous / Fragile (Y/N)",value:((M=x.details)==null?void 0:M.hazardous)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},hazardous:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-2",placeholder:"Special Attributes (Badges)",value:((G=x.details)==null?void 0:G.badges)||"",onChange:E=>g(T=>({...T,details:{...(T==null?void 0:T.details)||{},badges:E.target.value}}))})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-white pt-4 pb-2 -mx-6 px-6 border-t border-gray-200",children:e.jsx("button",{type:"submit",className:"w-full rounded bg-blue-600 px-4 py-3 font-semibold text-white hover:bg-blue-700 transition-colors",children:" Save All Changes"})})]})})]})})]})]}),e.jsx($a,{open:!!B,onClose:()=>L(null),onConfirm:()=>{B!=null&&q(B)},title:"Delete this product?",description:"This action cannot be undone.",confirmText:"Delete"}),e.jsx($a,{open:J,onClose:()=>re(!1),onConfirm:ae,title:`Delete ${H.size} product(s)?`,description:`You are about to delete ${H.size} product(s). This action cannot be undone.`,confirmText:"Delete All"})]})}function h8(){const[t,s]=y.useState({sessions:0,pageViews:0,bounceRate:0,avgSessionDuration:"0:00",conversionRate:0,revenue:0,orders:0,customers:0,sessionsChange:0,pageViewsChange:0,bounceRateChange:0,avgSessionDurationChange:0,conversionRateChange:0,revenueChange:0,ordersChange:0,customersChange:0}),[r,a]=y.useState([]),[n,i]=y.useState([]),[l,o]=y.useState(!0),[c,d]=y.useState("30d"),u="http://192.168.1.36:2000";y.useEffect(()=>{p()},[c]);const p=async()=>{try{o(!0);const g=await(await fetch(`${u}/api/analytics?range=${c}`)).json();s(g.overview||t),a(g.chartData||[]),i(g.topPages||[])}catch(x){console.error("Failed to load analytics:",x),s({sessions:0,pageViews:0,bounceRate:0,avgSessionDuration:"0:00",conversionRate:0,revenue:0,orders:0,customers:0,sessionsChange:0,pageViewsChange:0,bounceRateChange:0,avgSessionDurationChange:0,conversionRateChange:0,revenueChange:0,ordersChange:0,customersChange:0}),a([]),i([])}finally{o(!1)}},m=x=>x==null||isNaN(x)?"0.0%":`${x>=0?"+":""}${x.toFixed(1)}%`,f=x=>x==null||isNaN(x)?"neutral":x>=0?"up":"down",h=[{title:"Sessions",value:(t.sessions||0).toLocaleString(),change:m(t.sessionsChange),trend:f(t.sessionsChange),icon:""},{title:"Page Views",value:(t.pageViews||0).toLocaleString(),change:m(t.pageViewsChange),trend:f(t.pageViewsChange),icon:""},{title:"Bounce Rate",value:`${t.bounceRate||0}%`,change:m(t.bounceRateChange),trend:f(t.bounceRateChange),icon:""},{title:"Avg. Session",value:t.avgSessionDuration||"0:00",change:m(t.avgSessionDurationChange),trend:f(t.avgSessionDurationChange),icon:""},{title:"Conversion Rate",value:`${t.conversionRate||0}%`,change:m(t.conversionRateChange),trend:f(t.conversionRateChange),icon:""},{title:"Revenue",value:`${(t.revenue||0).toLocaleString()}`,change:m(t.revenueChange),trend:f(t.revenueChange),icon:""},{title:"Orders",value:(t.orders||0).toString(),change:m(t.ordersChange),trend:f(t.ordersChange),icon:""},{title:"Customers",value:(t.customers||0).toString(),change:m(t.customersChange),trend:f(t.customersChange),icon:""}];return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Analytics"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Track your business performance and insights"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:c,onChange:x=>d(x.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"},children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]}),e.jsx("button",{onClick:p,className:"btn-secondary",children:"Refresh"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:h.map((x,g)=>e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:x.title}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:x.value})]}),e.jsx("div",{className:"text-2xl",children:x.icon})]}),e.jsxs("div",{className:"mt-4 flex items-center",children:[e.jsx("span",{className:`text-sm font-medium ${x.trend==="up"?"text-green-600":x.trend==="down"?"text-red-600":"text-gray-500"}`,children:x.change}),e.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"vs last period"})]})]},g))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sessions Over Time"}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-2",children:r.map((x,g)=>e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:"bg-brand-secondary rounded-t w-full mb-2",style:{height:`${x.sessions/Math.max(...r.map(j=>j.sessions))*200}px`}}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(x.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},g))})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Over Time"}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-2",children:r.map((x,g)=>e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:"bg-green-500 rounded-t w-full mb-2",style:{height:`${x.revenue/Math.max(...r.map(j=>j.revenue))*200}px`}}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(x.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},g))})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Pages"}),l?e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((x,g)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0 animate-pulse",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-16 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"})]})]},g))}):n.length>0?e.jsx("div",{className:"space-y-3",children:n.map((x,g)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:x.page}),e.jsxs("p",{className:"text-sm text-gray-500",children:[x.unique," unique views"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:x.views}),e.jsx("p",{className:"text-sm text-gray-500",children:"total views"})]})]},g))}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No page data available"})]})]})}function f8(){const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState(!1),[l,o]=y.useState("campaigns"),[c,d]=y.useState(!1),u="http://192.168.1.36:2000";y.useEffect(()=>{p(),m()},[]);const p=async()=>{try{i(!0);const x=await fetch(`${u}/api/marketing/campaigns`);if(!x.ok)throw new Error(`HTTP error! status: ${x.status}`);const g=await x.json();s(Array.isArray(g)?g:[])}catch(x){console.error("Failed to load campaigns:",x),s([])}finally{i(!1)}},m=async()=>{try{const x=await fetch(`${u}/api/marketing/templates`);if(!x.ok)throw new Error(`HTTP error! status: ${x.status}`);const g=await x.json();a(Array.isArray(g)?g:[])}catch(x){console.error("Failed to load templates:",x),a([])}},f=x=>{switch(x){case"active":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"draft":return"bg-gray-100 text-gray-800";case"completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},h=x=>{switch(x){case"email":return"";case"social":return"";case"push":return"";case"sms":return"";default:return""}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Marketing"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage your marketing campaigns and templates"})]}),e.jsx("button",{onClick:()=>d(!0),className:"btn-primary",children:"Create Campaign"})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"campaigns",name:"Campaigns",count:t.length},{id:"templates",name:"Templates",count:r.length},{id:"audiences",name:"Audiences",count:0}].map(x=>e.jsxs("button",{onClick:()=>o(x.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${l===x.id?"border-brand-primary text-brand-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[x.name," (",x.count,")"]},x.id))})}),l==="campaigns"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{title:"Total Campaigns",value:t.length,icon:""},{title:"Active",value:t.filter(x=>x.status==="active").length,icon:""},{title:"Total Sent",value:t.reduce((x,g)=>x+g.sent,0).toLocaleString(),icon:""},{title:"Conversion Rate",value:"3.2%",icon:""}].map((x,g)=>e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:x.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.value})]}),e.jsx("div",{className:"text-2xl",children:x.icon})]})},g))}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"border-b border-gray-200 text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 pr-4",children:"Campaign"}),e.jsx("th",{className:"py-3 pr-4",children:"Type"}),e.jsx("th",{className:"py-3 pr-4",children:"Status"}),e.jsx("th",{className:"py-3 pr-4",children:"Audience"}),e.jsx("th",{className:"py-3 pr-4",children:"Sent"}),e.jsx("th",{className:"py-3 pr-4",children:"Opened"}),e.jsx("th",{className:"py-3 pr-4",children:"Clicked"}),e.jsx("th",{className:"py-3 pr-4",children:"Converted"}),e.jsx("th",{className:"py-3 pr-4",children:"Actions"})]})}),e.jsx("tbody",{children:t.map(x=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:x.name}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(x.createdAt).toLocaleDateString()})]})}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:h(x.type)}),e.jsx("span",{className:"capitalize",children:x.type})]})}),e.jsx("td",{className:"py-3 pr-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${f(x.status)}`,children:x.status})}),e.jsx("td",{className:"py-3 pr-4 text-gray-600",children:x.audience}),e.jsx("td",{className:"py-3 pr-4 font-medium",children:x.sent.toLocaleString()}),e.jsx("td",{className:"py-3 pr-4",children:x.opened.toLocaleString()}),e.jsx("td",{className:"py-3 pr-4",children:x.clicked.toLocaleString()}),e.jsx("td",{className:"py-3 pr-4 font-semibold text-green-600",children:x.converted}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Edit"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"View"}),e.jsx("button",{className:"bg-red-600 text-white px-2 py-1 text-xs rounded hover:bg-red-700",children:"Delete"})]})})]},x.id))})]})})})]}),l==="templates"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Email Templates"}),e.jsx("button",{className:"btn-primary",children:"Create Template"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(x=>e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:x.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:x.subject}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:x.preview}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-500",children:new Date(x.createdAt).toLocaleDateString()}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Edit"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Preview"})]})]})]},x.id))})]}),l==="audiences"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Audience Segments"}),e.jsx("button",{className:"btn-primary",children:"Create Audience"})]}),e.jsx("div",{className:"metric-card",children:e.jsx("p",{className:"text-gray-600",children:"Audience management features coming soon. This will include creating customer segments, importing lists, and managing subscriber preferences."})})]}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"w-full max-w-2xl rounded-lg bg-white p-6 m-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"mb-6 text-xl font-semibold",children:"Create New Campaign"}),e.jsxs("form",{onSubmit:x=>{x.preventDefault();const g=new FormData(x.currentTarget),j={id:t.length+1,name:g.get("name"),type:g.get("type"),status:"draft",audience:g.get("audience"),sent:0,opened:0,clicked:0,converted:0,createdAt:new Date().toISOString().split("T")[0]};s([...t,j]),d(!1)},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Campaign Name"}),e.jsx("input",{type:"text",name:"name",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Summer Sale Campaign",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Campaign Type"}),e.jsxs("select",{name:"type",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"social",children:"Social Media"}),e.jsx("option",{value:"push",children:"Push Notification"}),e.jsx("option",{value:"sms",children:"SMS"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Target Audience"}),e.jsx("input",{type:"text",name:"audience",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"All customers",required:!0})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Campaign"})]})]})]})})]})}const oa="http://192.168.1.36:2000";function p8(){const[t,s]=y.useState("campaigns"),[r,a]=y.useState([]),[n,i]=y.useState([]),[l,o]=y.useState([]),[c,d]=y.useState([]),[u,p]=y.useState(!1),[m,f]=y.useState(""),[h,x]=y.useState(!1),[g,j]=y.useState(!1),[b,N]=y.useState(null),[C,A]=y.useState({ad_account_id:"",pixel_id:"",access_token:""});y.useEffect(()=>{w(),F()},[t]);const F=async()=>{try{const z=await(await fetch(`${oa}/api/meta-ads/config`)).json();z.data&&A({ad_account_id:z.data.ad_account_id||"",pixel_id:z.data.pixel_id||"",access_token:z.data.access_token||""})}catch(I){console.error("Failed to load config:",I)}},w=async()=>{try{if(p(!0),f(""),t==="campaigns"){const z=await(await fetch(`${oa}/api/meta-ads/campaigns`)).json();a(Array.isArray(z.data)?z.data:[])}else if(t==="adsets"){const z=await(await fetch(`${oa}/api/meta-ads/adsets`)).json();i(Array.isArray(z.data)?z.data:[])}else if(t==="ads"){const z=await(await fetch(`${oa}/api/meta-ads/ads`)).json();o(Array.isArray(z.data)?z.data:[])}else if(t==="insights"){const z=await(await fetch(`${oa}/api/meta-ads/insights`)).json();d(Array.isArray(z.data)?z.data:[])}}catch(I){f(I.message||"Failed to load data")}finally{p(!1)}},_=async()=>{var I;try{p(!0);const Q=await(await fetch(`${oa}/api/meta-ads/config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).json();Q.success||(I=Q.data)!=null&&I.success?(alert("Configuration saved successfully!"),j(!1)):alert("Failed to save configuration")}catch{alert("Failed to save configuration")}finally{p(!1)}},v=async I=>{try{p(!0);const Q=await(await fetch(`${oa}/api/meta-ads/campaigns`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).json();Q.success||Q.data?(await w(),x(!1),alert("Campaign created successfully!")):alert(Q.error||"Failed to create campaign")}catch(z){alert(z.message||"Failed to create campaign")}finally{p(!1)}},S=async(I,z)=>{try{const P=await(await fetch(`${oa}/api/meta-ads/campaigns/${I}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:z})})).json();P.success||P.data?await w():alert("Failed to update campaign status")}catch{alert("Failed to update campaign status")}},R=async I=>{if(confirm("Are you sure you want to delete this campaign?"))try{const Q=await(await fetch(`${oa}/api/meta-ads/campaigns/${I}`,{method:"DELETE"})).json();Q.success||Q.data?(await w(),alert("Campaign deleted successfully!")):alert("Failed to delete campaign")}catch{alert("Failed to delete campaign")}},D=async()=>{try{p(!0);const I=r.map(P=>P.campaign_id).join(","),Q=await(await fetch(`${oa}/api/meta-ads/insights/sync?campaign_id=${I}`)).json();Q.success||Q.data?(await w(),alert("Insights synced successfully!")):alert("Failed to sync insights")}catch{alert("Failed to sync insights")}finally{p(!1)}},V=I=>{switch(I==null?void 0:I.toUpperCase()){case"ACTIVE":case"PAUSED":return I==="ACTIVE"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800";case"DELETED":case"ARCHIVED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},O=c.reduce((I,z)=>({impressions:I.impressions+(z.impressions||0),clicks:I.clicks+(z.clicks||0),spend:I.spend+(z.spend||0),reach:I.reach+(z.reach||0),conversions:I.conversions+(z.conversions||0),conversion_value:I.conversion_value+(z.conversion_value||0)}),{impressions:0,clicks:0,spend:0,reach:0,conversions:0,conversion_value:0});return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Meta Ads Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Create and manage your Facebook & Instagram ad campaigns"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>j(!0),className:"btn-secondary flex items-center space-x-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),t==="campaigns"&&e.jsxs("button",{onClick:()=>x(!0),className:"btn-primary flex items-center space-x-2",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Campaign"})]}),t==="insights"&&e.jsxs("button",{onClick:D,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[e.jsx(br,{className:"h-4 w-4"}),e.jsx("span",{children:"Sync Insights"})]})]})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex space-x-8",children:[{id:"campaigns",label:"Campaigns",icon:cs},{id:"adsets",label:"Ad Sets",icon:Pt},{id:"ads",label:"Ads",icon:nt},{id:"insights",label:"Performance",icon:Ss}].map(I=>{const z=I.icon;return e.jsxs("button",{onClick:()=>s(I.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${t===I.id?"":"border-transparent"}`,style:t===I.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{children:I.label})]},I.id)})})}),m&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:m}),u&&!r.length&&!n.length&&!l.length?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})}):e.jsxs(e.Fragment,{children:[t==="campaigns"&&e.jsx("div",{className:"space-y-4",children:r.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(cs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No campaigns yet. Create your first campaign to get started."})]}):e.jsx("div",{className:"grid gap-4",children:r.map(I=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:I.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Objective: ",I.objective,"  ID: ",I.campaign_id]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${V(I.status)}`,children:I.status}),e.jsx("button",{onClick:()=>S(I.campaign_id,I.status==="ACTIVE"?"PAUSED":"ACTIVE"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:I.status==="ACTIVE"?e.jsx(jn,{className:"h-4 w-4"}):e.jsx(Ua,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>R(I.campaign_id),className:"p-2 hover:bg-red-100 dark:hover:bg-red-900 rounded text-red-600",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Daily Budget"}),e.jsx("p",{className:"font-semibold",children:I.daily_budget?`${(I.daily_budget/100).toFixed(2)}`:"Not set"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Lifetime Budget"}),e.jsx("p",{className:"font-semibold",children:I.lifetime_budget?`${(I.lifetime_budget/100).toFixed(2)}`:"Not set"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Created"}),e.jsx("p",{className:"font-semibold",children:I.created_time?new Date(I.created_time).toLocaleDateString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Status"}),e.jsx("p",{className:"font-semibold",children:I.status})]})]})]},I.campaign_id))})}),t==="adsets"&&e.jsx("div",{className:"space-y-4",children:n.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(Pt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No ad sets yet."})]}):e.jsx("div",{className:"grid gap-4",children:n.map(I=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:I.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Campaign ID: ",I.campaign_id]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${V(I.status)}`,children:I.status})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Daily Budget"}),e.jsx("p",{className:"font-semibold",children:I.daily_budget?`${(I.daily_budget/100).toFixed(2)}`:"Not set"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Status"}),e.jsx("p",{className:"font-semibold",children:I.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Ad Set ID"}),e.jsx("p",{className:"font-semibold text-xs",children:I.adset_id})]})]})]},I.adset_id))})}),t==="ads"&&e.jsx("div",{className:"space-y-4",children:l.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(nt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No ads yet."})]}):e.jsx("div",{className:"grid gap-4",children:l.map(I=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:I.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Ad Set: ",I.adset_id,"  Campaign: ",I.campaign_id]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${V(I.status)}`,children:I.status})]}),I.preview_url&&e.jsx("div",{className:"mt-4",children:e.jsx("a",{href:I.preview_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"View Preview "})})]},I.ad_id))})}),t==="insights"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Impressions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:O.impressions.toLocaleString()})]}),e.jsx(nt,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Clicks"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:O.clicks.toLocaleString()})]}),e.jsx(s4,{className:"h-8 w-8 text-green-500"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Spend"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["",O.spend.toFixed(2)]})]}),e.jsx(jo,{className:"h-8 w-8 text-yellow-500"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Conversions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:O.conversions})]}),e.jsx(zt,{className:"h-8 w-8 text-purple-500"})]})})]}),c.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(Ss,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No insights data yet. Sync insights to view performance metrics."})]}):e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Impressions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Clicks"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Spend"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"CPC"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"CTR"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Conversions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:c.map((I,z)=>{var Q,P,k,X,se;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:I.date_start||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:((Q=I.impressions)==null?void 0:Q.toLocaleString())||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:((P=I.clicks)==null?void 0:P.toLocaleString())||0}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:["",((k=I.spend)==null?void 0:k.toFixed(2))||"0.00"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:["",((X=I.cpc)==null?void 0:X.toFixed(2))||"0.00"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:[((se=I.ctr)==null?void 0:se.toFixed(2))||"0.00","%"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:I.conversions||0})]},z)})})]})})]})]}),h&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Create New Campaign"}),e.jsxs("form",{onSubmit:I=>{I.preventDefault();const z=new FormData(I.currentTarget);v({name:z.get("name"),objective:z.get("objective"),status:z.get("status")||"PAUSED",daily_budget:z.get("daily_budget")?parseFloat(z.get("daily_budget")):void 0,lifetime_budget:z.get("lifetime_budget")?parseFloat(z.get("lifetime_budget")):void 0,start_time:z.get("start_time")||void 0,stop_time:z.get("stop_time")||void 0})},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Campaign Name"}),e.jsx("input",{type:"text",name:"name",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100",placeholder:"Summer Sale 2024"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Objective"}),e.jsxs("select",{name:"objective",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100",children:[e.jsx("option",{value:"OUTCOME_TRAFFIC",children:"Traffic"}),e.jsx("option",{value:"OUTCOME_LEADS",children:"Leads"}),e.jsx("option",{value:"OUTCOME_ENGAGEMENT",children:"Engagement"}),e.jsx("option",{value:"OUTCOME_AWARENESS",children:"Awareness"}),e.jsx("option",{value:"OUTCOME_SALES",children:"Sales"}),e.jsx("option",{value:"OUTCOME_APP_PROMOTION",children:"App Promotion"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Daily Budget ()"}),e.jsx("input",{type:"number",name:"daily_budget",min:"0",step:"0.01",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Lifetime Budget ()"}),e.jsx("input",{type:"number",name:"lifetime_budget",min:"0",step:"0.01",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Start Date"}),e.jsx("input",{type:"datetime-local",name:"start_time",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"End Date"}),e.jsx("input",{type:"datetime-local",name:"stop_time",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Status"}),e.jsxs("select",{name:"status",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100",children:[e.jsx("option",{value:"PAUSED",children:"Paused"}),e.jsx("option",{value:"ACTIVE",children:"Active"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Campaign"})]})]})]})}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Meta Ads Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Ad Account ID"}),e.jsx("input",{type:"text",value:C.ad_account_id,onChange:I=>A({...C,ad_account_id:I.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100",placeholder:"act_123456789"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Pixel ID"}),e.jsx("input",{type:"text",value:C.pixel_id,onChange:I=>A({...C,pixel_id:I.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100",placeholder:"123456789012345"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Access Token"}),e.jsx("input",{type:"password",value:C.access_token,onChange:I=>A({...C,access_token:I.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100",placeholder:"Your Meta access token"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Configuration"})]})]})]})})]})}const Bp=()=>"http://192.168.1.36:2000";class g8{constructor(){Sa(this,"config",{api:{baseUrl:Bp(),timeout:3e4,retries:3},features:{loyaltyProgram:!0,affiliateProgram:!0,cashbackSystem:!0,emailMarketing:!0,smsMarketing:!0,pushNotifications:!0,whatsappChat:!0,liveChat:!0,analytics:!0,formBuilder:!0,workflowAutomation:!0,customerSegmentation:!0,journeyTracking:!0,actionableAnalytics:!0,aiBox:!0,journeyFunnel:!0,aiPersonalization:!0,customAudience:!0,omniChannel:!0,apiManager:!0},ui:{theme:"auto",language:"en",timezone:"Asia/Kolkata",dateFormat:"DD/MM/YYYY",currency:"INR"},security:{sessionTimeout:36e5,maxLoginAttempts:5,passwordMinLength:8,requireTwoFactor:!1},notifications:{email:!0,sms:!0,push:!0,inApp:!0}})}getConfig(){return{...this.config}}getSection(s){return{...this.config[s]}}getValue(s,r){return this.config[s][r]}updateSection(s,r){this.config[s]={...this.config[s],...r},this.saveToStorage()}updateValue(s,r,a){this.config[s][r]=a,this.saveToStorage()}reset(){this.config={api:{baseUrl:Bp(),timeout:3e4,retries:3},features:{loyaltyProgram:!0,affiliateProgram:!0,cashbackSystem:!0,emailMarketing:!0,smsMarketing:!0,pushNotifications:!0,whatsappChat:!0,liveChat:!0,analytics:!0,formBuilder:!0,workflowAutomation:!0,customerSegmentation:!0,journeyTracking:!0,actionableAnalytics:!0,aiBox:!0,journeyFunnel:!0,aiPersonalization:!0,customAudience:!0,omniChannel:!0,apiManager:!0},ui:{theme:"auto",language:"en",timezone:"Asia/Kolkata",dateFormat:"DD/MM/YYYY",currency:"INR"},security:{sessionTimeout:36e5,maxLoginAttempts:5,passwordMinLength:8,requireTwoFactor:!1},notifications:{email:!0,sms:!0,push:!0,inApp:!0}},this.saveToStorage()}loadFromStorage(){try{const s=localStorage.getItem("nefol_admin_config");if(s){const r=JSON.parse(s);this.config={...this.config,...r}}}catch(s){console.error("Failed to load config from storage:",s)}}saveToStorage(){try{localStorage.setItem("nefol_admin_config",JSON.stringify(this.config))}catch(s){console.error("Failed to save config to storage:",s)}}isFeatureEnabled(s){return this.config.features[s]}setFeatureEnabled(s,r){this.config.features[s]=r,this.saveToStorage()}getApiConfig(){return this.config.api}getUiConfig(){return this.config.ui}getSecurityConfig(){return this.config.security}getNotificationsConfig(){return this.config.notifications}}const Wm=new g8;Wm.loadFromStorage();function y8(){return Wm.getApiConfig().baseUrl}function b8(){const[t,s]=y.useState([]),[r,a]=y.useState({}),[n,i]=y.useState(!0),[l,o]=y.useState(""),[c,d]=y.useState(1),[u,p]=y.useState({total:0,totalPages:0}),[m,f]=y.useState("all"),h=y8(),x=y.useRef(c),g=y.useRef(m),j=y.useRef(l);y.useEffect(()=>{x.current=c,g.current=m,j.current=l},[c,m,l]);const b=y.useCallback(async()=>{var w;try{i(!0);const _=localStorage.getItem("auth_token")||localStorage.getItem("token"),v=localStorage.getItem("role")||"admin",S=localStorage.getItem("permissions")||"orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update",R=new URLSearchParams({page:x.current.toString(),limit:"50",...j.current&&{search:j.current}}),D=await fetch(`${h}/api/whatsapp/subscriptions?${R}`,{headers:{"Content-Type":"application/json",..._&&{Authorization:`Bearer ${_}`},"x-user-role":v,"x-user-permissions":S}});if(D.ok){const V=await D.json();console.log(" Fetched subscriptions:",((w=V.subscriptions)==null?void 0:w.length)||0,"total");let O=V.subscriptions||[];g.current==="active"?O=O.filter(I=>I.is_active):g.current==="inactive"&&(O=O.filter(I=>!I.is_active)),s(O),p(V.pagination||{})}else{const V=await D.text();console.error(`Failed to fetch subscriptions: ${D.status} ${D.statusText}`,V),D.status===401&&console.error("Authentication failed. Please check your login credentials.")}}catch(_){console.error("Failed to fetch subscriptions:",_)}finally{i(!1)}},[h]);y.useEffect(()=>{const w=setTimeout(()=>{b()},l?500:0);return()=>clearTimeout(w)},[c,m,l,b]),y.useEffect(()=>{N()},[]),y.useEffect(()=>{const w=v=>{var S,R,D;v.type==="whatsapp-subscription"&&(console.log(" Received WhatsApp subscription update, refreshing list..."),b(),N(),Notification.permission==="granted"&&new Notification("New WhatsApp Subscription!",{body:`New subscription: ${((R=(S=v.data)==null?void 0:S.subscription)==null?void 0:R.phone)||((D=v.data)==null?void 0:D.message)||"Unknown"}`,icon:"/favicon.ico"}))},_=Je.subscribe("update",w);return()=>{_&&_()}},[b]);const N=async()=>{try{const w=localStorage.getItem("auth_token")||localStorage.getItem("token"),_=localStorage.getItem("role")||"admin",v=localStorage.getItem("permissions")||"orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update",S=await fetch(`${h}/api/whatsapp/stats`,{headers:{"Content-Type":"application/json",...w&&{Authorization:`Bearer ${w}`},"x-user-role":_,"x-user-permissions":v}});if(S.ok){const R=await S.json();a(R)}else{const R=await S.text();console.error(`Failed to fetch stats: ${S.status} ${S.statusText}`,R),S.status===401&&console.error("Authentication failed. Please check your login credentials.")}}catch(w){console.error("Failed to fetch stats:",w)}},C=w=>w.length===10?`+91 ${w.slice(0,5)} ${w.slice(5)}`:w,A=w=>new Date(w).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),F=()=>{const w=[["Phone","Name","Source","Subscribed At","Status"].join(","),...t.map(R=>[R.phone,R.name||"",R.source||"",R.subscribed_at,R.is_active?"Active":"Inactive"].join(","))].join(`
`),_=new Blob([w],{type:"text/csv"}),v=URL.createObjectURL(_),S=document.createElement("a");S.href=v,S.download=`whatsapp-subscriptions-${new Date().toISOString().split("T")[0]}.csv`,S.click(),setTimeout(()=>URL.revokeObjectURL(v),100)};return y.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[]),e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"WhatsApp Subscriptions"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage and view all WhatsApp subscriptions"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Total Subscribers"}),e.jsx("div",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:r.total_subscribers||0})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Active"}),e.jsx("div",{className:"text-2xl font-light",style:{color:"#059669",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:r.active_subscribers||0})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Last 24 Hours"}),e.jsx("div",{className:"text-2xl font-light",style:{color:"var(--arctic-blue-primary-dark)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:r.new_last_24_hours||0})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Last 7 Days"}),e.jsx("div",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:r.new_last_7_days||0})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex-1 w-full md:w-auto",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by phone or name...",value:l,onChange:w=>o(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:m,onChange:w=>{f(w.target.value),d(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Subscriptions"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]}),e.jsxs("button",{onClick:F,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ja,{className:"w-4 h-4"}),"Export CSV"]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[n?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading subscriptions..."}):t.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"No subscriptions found"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscribed At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(w=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fa,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:C(w.phone)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.name||e.jsx("span",{className:"text-gray-400 italic",children:"Not provided"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:w.source||"Unknown"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mr,{className:"w-4 h-4"}),A(w.subscribed_at)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${w.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:w.is_active?"Active":"Inactive"})})]},w.id))})]})}),u.totalPages>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing page ",c," of ",u.totalPages," (",u.total," total)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>d(Math.max(1,c-1)),disabled:c===1,className:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),e.jsx("button",{onClick:()=>d(Math.min(u.totalPages,c+1)),disabled:c===u.totalPages,className:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]})]})}function v8(){const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState(!1),[l,o]=y.useState("discounts"),[c,d]=y.useState(!1),[u,p]=y.useState(null),[m,f]=y.useState({code:"",name:"",type:"percentage",value:"",min_purchase:"",max_discount:"",usage_limit:"",valid_from:"",valid_until:"",is_active:!0}),x="http://192.168.1.36:2000";y.useEffect(()=>{g(),j()},[]);const g=async()=>{try{i(!0);const S=await fetch(`${x}/api/discounts`);if(S.ok){const R=await S.json();s(R)}else console.error("Failed to load discounts:",await S.text()),s([])}catch(S){console.error("Failed to load discounts:",S),s([])}finally{i(!1)}},j=async()=>{try{const S=await fetch(`${x}/api/discounts/usage`);if(S.ok){const R=await S.json();a(R)}else console.error("Failed to load usage:",await S.text()),a([])}catch(S){console.error("Failed to load usage:",S),a([])}},b=async S=>{S.preventDefault();try{i(!0);const R={code:m.code.toUpperCase(),name:m.name,type:m.type,value:parseFloat(m.value),min_purchase:m.min_purchase?parseFloat(m.min_purchase):null,max_discount:m.max_discount?parseFloat(m.max_discount):null,usage_limit:m.usage_limit?parseInt(m.usage_limit):null,valid_from:m.valid_from||null,valid_until:m.valid_until||null,is_active:m.is_active},D=u?"PUT":"POST",V=u?`${x}/api/discounts/${u.id}`:`${x}/api/discounts`,O=await fetch(V,{method:D,headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(O.ok)await g(),f({code:"",name:"",type:"percentage",value:"",min_purchase:"",max_discount:"",usage_limit:"",valid_from:"",valid_until:"",is_active:!0}),p(null),o("discounts"),alert(u?"Discount updated successfully!":"Discount created successfully!");else{const I=await O.json();alert(I.message||"Failed to save discount")}}catch(R){console.error("Error saving discount:",R),alert("Failed to save discount")}finally{i(!1)}},N=S=>{var R,D,V;p(S),f({code:S.code,name:S.name,type:S.type,value:S.value.toString(),min_purchase:((R=S.min_purchase)==null?void 0:R.toString())||"",max_discount:((D=S.max_discount)==null?void 0:D.toString())||"",usage_limit:((V=S.usage_limit)==null?void 0:V.toString())||"",valid_from:S.valid_from?S.valid_from.split("T")[0]:"",valid_until:S.valid_until?S.valid_until.split("T")[0]:"",is_active:S.is_active}),o("create")},C=async S=>{if(confirm("Are you sure you want to delete this discount?"))try{i(!0),(await fetch(`${x}/api/discounts/${S}`,{method:"DELETE"})).ok?(await g(),alert("Discount deleted successfully!")):alert("Failed to delete discount")}catch(R){console.error("Error deleting discount:",R),alert("Failed to delete discount")}finally{i(!1)}},A=async S=>{try{i(!0),(await fetch(`${x}/api/discounts/${S.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!S.is_active})})).ok?await g():alert("Failed to update discount status")}catch(R){console.error("Error updating discount status:",R),alert("Failed to update discount status")}finally{i(!1)}},F=(S,R)=>S?R&&new Date(R)<new Date?"bg-red-100 text-red-800":"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",w=S=>S.is_active?S.valid_until&&new Date(S.valid_until)<new Date?"Expired":"Active":"Inactive",_=S=>{switch(S){case"percentage":return"";case"fixed":return"";default:return""}},v=S=>{switch(S.type){case"percentage":return`${S.value}%`;case"fixed":return`${S.value}`;case"free_shipping":return"Free Shipping";default:return`${S.value}`}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Discounts"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Create and manage discount codes and promotions"})]}),e.jsx("button",{onClick:()=>d(!0),className:"btn-primary",children:"Create Discount"})]}),e.jsx("div",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"discounts",name:"Discount Codes",count:t.length},{id:"usage",name:"Usage History",count:r.length},{id:"create",name:"Create New",count:0}].map(S=>e.jsxs("button",{onClick:()=>o(S.id),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${l===S.id?"text-[var(--arctic-blue-primary-dark)]":"border-transparent hover:text-[var(--text-primary)]"}`,style:l===S.id?{borderColor:"var(--arctic-blue-primary)"}:{color:"var(--text-muted)"},children:[S.name," (",S.count,")"]},S.id))})}),l==="discounts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{title:"Total Discounts",value:t.length,icon:""},{title:"Active",value:t.filter(S=>S.is_active&&(!S.valid_until||new Date(S.valid_until)>=new Date)).length,icon:""},{title:"Total Uses",value:t.reduce((S,R)=>S+(R.usage_count||0),0),icon:""},{title:"Total Saved",value:`${(Array.isArray(r)?r.reduce((S,R)=>S+(Number(R.discount_amount)||0),0):0).toFixed(2)}`,icon:""}].map((S,R)=>e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:S.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.value})]}),e.jsx("div",{className:"text-2xl",children:S.icon})]})},R))}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"border-b border-gray-200 text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 pr-4",children:"Code"}),e.jsx("th",{className:"py-3 pr-4",children:"Name"}),e.jsx("th",{className:"py-3 pr-4",children:"Type"}),e.jsx("th",{className:"py-3 pr-4",children:"Value"}),e.jsx("th",{className:"py-3 pr-4",children:"Min Amount"}),e.jsx("th",{className:"py-3 pr-4",children:"Usage"}),e.jsx("th",{className:"py-3 pr-4",children:"Status"}),e.jsx("th",{className:"py-3 pr-4",children:"Valid Until"}),e.jsx("th",{className:"py-3 pr-4",children:"Actions"})]})}),e.jsx("tbody",{children:t.map(S=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-3 pr-4",children:e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm font-mono",children:S.code})}),e.jsx("td",{className:"py-3 pr-4 font-medium text-gray-900",children:S.name}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:_(S.type)}),e.jsx("span",{className:"capitalize",children:S.type.replace("_"," ")})]})}),e.jsx("td",{className:"py-3 pr-4 font-semibold",children:v(S)}),e.jsx("td",{className:"py-3 pr-4 text-gray-600",children:S.min_purchase?`${S.min_purchase}`:""}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:S.usage_count||0}),S.usage_limit&&e.jsxs("span",{className:"text-gray-500",children:[" / ",S.usage_limit]})]})}),e.jsx("td",{className:"py-3 pr-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${F(S.is_active,S.valid_until)}`,children:w(S)})}),e.jsx("td",{className:"py-3 pr-4 text-gray-600",children:S.valid_until?new Date(S.valid_until).toLocaleDateString():""}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>N(S),className:"btn-secondary text-xs px-2 py-1",children:"Edit"}),e.jsx("button",{onClick:async()=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(S.code),alert("Discount code copied to clipboard!");else{const R=document.createElement("textarea");R.value=S.code,R.style.position="fixed",R.style.left="-999999px",document.body.appendChild(R),R.select(),document.execCommand("copy"),document.body.removeChild(R),alert(`Discount code copied: ${S.code}`)}}catch{alert(`Discount code: ${S.code}`)}},className:"btn-secondary text-xs px-2 py-1",children:"Copy"}),e.jsx("button",{onClick:()=>A(S),className:`text-xs px-2 py-1 rounded ${S.is_active?"bg-yellow-600 text-white hover:bg-yellow-700":"bg-green-600 text-white hover:bg-green-700"}`,children:S.is_active?"Deactivate":"Activate"}),e.jsx("button",{onClick:()=>C(S.id),className:"bg-red-600 text-white px-2 py-1 text-xs rounded hover:bg-red-700",children:"Delete"})]})})]},S.id))})]})})})]}),l==="usage"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Discount Usage History"}),e.jsx("button",{className:"btn-secondary",children:"Export"})]}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"border-b border-gray-200 text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 pr-4",children:"Customer"}),e.jsx("th",{className:"py-3 pr-4",children:"Order ID"}),e.jsx("th",{className:"py-3 pr-4",children:"Discount Code"}),e.jsx("th",{className:"py-3 pr-4",children:"Amount Saved"}),e.jsx("th",{className:"py-3 pr-4",children:"Used At"})]})}),e.jsx("tbody",{children:r.map(S=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-3 pr-4 text-gray-600",children:S.customer_email}),e.jsxs("td",{className:"py-3 pr-4 font-medium",children:["#",S.order_id]}),e.jsx("td",{className:"py-3 pr-4",children:e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm font-mono",children:S.discount_code||"Unknown"})}),e.jsxs("td",{className:"py-3 pr-4 font-semibold text-green-600",children:["",(S.discount_amount||0).toFixed(2)]}),e.jsx("td",{className:"py-3 pr-4 text-gray-600",children:new Date(S.created_at).toLocaleString()})]},S.id))})]})})})]}),l==="create"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:u?"Edit Discount":"Create New Discount"}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Code *"}),e.jsx("input",{type:"text",required:!0,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"WELCOME10",value:m.code,onChange:S=>f({...m,code:S.target.value.toUpperCase()}),disabled:!!u}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Code cannot be changed after creation"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Name *"}),e.jsx("input",{type:"text",required:!0,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"Welcome Discount",value:m.name,onChange:S=>f({...m,name:S.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",value:m.type,onChange:S=>f({...m,type:S.target.value}),children:[e.jsx("option",{value:"percentage",children:"Percentage"}),e.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value *"}),e.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:m.type==="percentage"?"10":"100",value:m.value,onChange:S=>f({...m,value:S.target.value})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:m.type==="percentage"?"Percentage (0-100)":"Amount in "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Purchase Amount"}),e.jsx("input",{type:"number",min:"0",step:"0.01",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"500",value:m.min_purchase,onChange:S=>f({...m,min_purchase:S.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Discount (for percentage)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"1000",value:m.max_discount,onChange:S=>f({...m,max_discount:S.target.value}),disabled:m.type==="fixed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum discount amount for percentage type"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usage Limit"}),e.jsx("input",{type:"number",min:"1",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"100",value:m.usage_limit,onChange:S=>f({...m,usage_limit:S.target.value})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for unlimited"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("label",{className:"flex items-center space-x-2 mt-2",children:[e.jsx("input",{type:"checkbox",checked:m.is_active,onChange:S=>f({...m,is_active:S.target.checked}),className:"rounded border-gray-300"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid From"}),e.jsx("input",{type:"date",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",value:m.valid_from,onChange:S=>f({...m,valid_from:S.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid Until"}),e.jsx("input",{type:"date",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",value:m.valid_until,onChange:S=>f({...m,valid_until:S.target.value})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>{f({code:"",name:"",type:"percentage",value:"",min_purchase:"",max_discount:"",usage_limit:"",valid_from:"",valid_until:"",is_active:!0}),p(null),o("discounts")},className:"btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":u?"Update Discount":"Create Discount"})]})]})]})})]})}function j8(){const[t,s]=y.useState(!1),[r,a]=y.useState([]),[n,i]=y.useState({totalPosts:0,scheduled:0,engagement:"0",reach:"0"}),[l,o]=y.useState(!0),[c,d]=y.useState(""),u="http://192.168.1.36:2000";y.useEffect(()=>{p()},[]);const p=async()=>{try{o(!0),d("");const[m,f,h]=await Promise.all([fetch(`${u}/api/social/connection-status`),fetch(`${u}/api/social/posts`),fetch(`${u}/api/social/stats`)]);if(m.ok){const x=await m.json();s(x.connected||!1)}if(f.ok){const x=await f.json();a(x.posts||[])}if(h.ok){const x=await h.json();i(x)}}catch(m){console.error("Failed to load social data:",m),d("Failed to load social media data")}finally{o(!1)}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Facebook & Instagram"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage your social media presence"})]}),e.jsx("button",{onClick:()=>s(!t),className:t?"btn-secondary":"btn-primary",children:t?"Disconnect":"Connect Account"})]}),t?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"f"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Facebook Page"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Nefol Skincare"})]})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:"Connected"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{title:"Total Posts",value:"24",icon:""},{title:"Scheduled",value:"3",icon:""},{title:"Engagement",value:"2.4K",icon:""},{title:"Reach",value:"8.7K",icon:""}].map((m,f)=>e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:m.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.value})]}),e.jsx("div",{className:"text-2xl",children:m.icon})]})},f))}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Posts"}),e.jsx("button",{className:"btn-primary",children:"Create Post"})]}),e.jsx("div",{className:"space-y-4",children:r.map(m=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("img",{src:m.image,alt:"Post",className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${m.platform==="facebook"?"bg-blue-100 text-blue-800":"bg-pink-100 text-pink-800"}`,children:m.platform==="facebook"?" Facebook":" Instagram"}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${m.status==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:m.status})]}),e.jsx("p",{className:"text-gray-900 mb-2",children:m.content}),e.jsxs("p",{className:"text-sm text-gray-500",children:[m.status==="scheduled"?"Scheduled for":"Published on"," ",new Date(m.scheduledFor).toLocaleString()]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Edit"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"View"})]})]})},m.id))})]})]}):e.jsxs("div",{className:"metric-card text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Connect Your Social Media"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Connect your Facebook and Instagram accounts to manage posts, stories, and ads from one place."}),e.jsx("button",{onClick:()=>s(!0),className:"btn-primary",children:"Connect Facebook & Instagram"})]})]})}function N8(){const[t,s]=y.useState({name:"Nefol Store",description:"Premium skincare products for healthy, glowing skin",currency:"INR",timezone:"Asia/Kolkata",language:"en",domain:"nefol.com",status:"live"}),[r]=y.useState([{id:1,name:"Nefol Classic",active:!0,preview:"/IMAGES/light theme logo.png"},{id:2,name:"Nefol Dark",active:!1,preview:"/IMAGES/dark theme logo.png"},{id:3,name:"Minimal",active:!1,preview:"/IMAGES/light theme logo.png"}]);return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Online Store"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Configure your online store settings"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Store is live"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Store Status"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"#059669",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:"Live"})]}),e.jsx("div",{className:"text-2xl",children:""})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Domain"}),e.jsx("p",{className:"text-lg font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:"nefol.com"})]}),e.jsx("div",{className:"text-2xl",children:""})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Theme"}),e.jsx("p",{className:"text-lg font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:"Nefol Classic"})]}),e.jsx("div",{className:"text-2xl",children:""})]})})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Store Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Name"}),e.jsx("input",{type:"text",value:t.name,onChange:a=>s({...t,name:a.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsxs("select",{value:t.currency,onChange:a=>s({...t,currency:a.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",children:[e.jsx("option",{value:"INR",children:"Indian Rupee ()"}),e.jsx("option",{value:"USD",children:"US Dollar ($)"}),e.jsx("option",{value:"EUR",children:"Euro ()"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),e.jsxs("select",{value:t.timezone,onChange:a=>s({...t,timezone:a.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",children:[e.jsx("option",{value:"Asia/Kolkata",children:"Asia/Kolkata"}),e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/New_York",children:"America/New_York"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Language"}),e.jsxs("select",{value:t.language,onChange:a=>s({...t,language:a.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"hi",children:"Hindi"}),e.jsx("option",{value:"ta",children:"Tamil"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Description"}),e.jsx("textarea",{value:t.description,onChange:a=>s({...t,description:a.target.value}),rows:3,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none"})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{className:"btn-primary",children:"Save Settings"})})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Store Themes"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:r.map(a=>e.jsxs("div",{className:`border-2 rounded-lg p-4 ${a.active?"border-brand-primary":"border-gray-200"}`,children:[e.jsx("img",{src:a.preview,alt:a.name,className:"w-full h-32 object-cover rounded mb-3"}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:a.name}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${a.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:a.active?"Active":"Inactive"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:a.active?"Customize":"Activate"})]})]},a.id))})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Domain Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Domain"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:t.domain,onChange:a=>s({...t,domain:a.target.value}),className:"flex-1 rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none"}),e.jsx("button",{className:"btn-secondary",children:"Update"})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Domain Configuration"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Make sure to update your DNS settings to point to our servers."})]})]})})]})]})]})}function w8(){const[t,s]=y.useState(!1),[r,a]=y.useState({impressions:0,clicks:0,ctr:0,conversions:0}),[n,i]=y.useState([]),[l,o]=y.useState(!0),[c,d]=y.useState(""),u="http://192.168.1.36:2000";y.useEffect(()=>{p()},[]);const p=async()=>{try{o(!0),d("");const[m,f,h]=await Promise.all([fetch(`${u}/api/google/connection-status`),fetch(`${u}/api/google/analytics`),fetch(`${u}/api/google/campaigns`)]);if(m.ok){const x=await m.json();s(x.connected||!1)}if(f.ok){const x=await f.json();a(x)}if(h.ok){const x=await h.json();i(x.campaigns||[])}}catch(m){console.error("Failed to load Google data:",m),d("Failed to load Google data")}finally{o(!1)}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Google & YouTube"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage Google Ads and YouTube campaigns"})]}),e.jsx("button",{onClick:()=>s(!t),className:t?"btn-secondary":"btn-primary",children:t?"Disconnect":"Connect Google"})]}),c&&e.jsx("div",{className:"metric-card bg-red-50 border-red-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-red-600",children:c}),e.jsx("button",{onClick:p,className:"ml-auto text-red-600 hover:text-red-800 underline",children:"Retry"})]})}),l&&!c&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[...Array(4)].map((m,f)=>e.jsxs("div",{className:"metric-card animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded"})]},f))}),e.jsx("div",{className:"metric-card animate-pulse",children:e.jsx("div",{className:"h-64 bg-gray-200 rounded"})})]}),t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"Y"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"YouTube Channel"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Nefol Skincare"})]})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:"Connected"})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"G"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Google Ads"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Nefol Campaigns"})]})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:"Connected"})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{title:"Impressions",value:r.impressions.toLocaleString(),icon:""},{title:"Clicks",value:r.clicks.toLocaleString(),icon:""},{title:"CTR",value:`${r.ctr}%`,icon:""},{title:"Conversions",value:r.conversions.toString(),icon:""}].map((m,f)=>e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:m.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.value})]}),e.jsx("div",{className:"text-2xl",children:m.icon})]})},f))}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Campaigns"}),e.jsx("button",{className:"btn-primary",children:"Create Campaign"})]}),e.jsx("div",{className:"space-y-4",children:n.length>0?n.map((m,f)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:m.name}),e.jsx("p",{className:"text-sm text-gray-600",children:m.platform})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${m.status==="active"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:m.status}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["",m.spent.toLocaleString()," / ",m.budget.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[m.clicks.toLocaleString()," clicks"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Edit"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"View"})]})]})]})},f)):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No campaigns available"})})]})]}):e.jsxs("div",{className:"metric-card text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Connect Google Services"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Connect your Google Ads and YouTube accounts to manage campaigns and track performance."}),e.jsx("button",{onClick:()=>s(!0),className:"btn-primary",children:"Connect Google Account"})]})]})}function k8(){const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState(!0),[l,o]=y.useState(""),c="http://192.168.1.36:2000";y.useEffect(()=>{(async()=>{try{i(!0),o("");const[h,x]=await Promise.all([fetch(`${c}/api/forms`),fetch(`${c}/api/forms/submissions`)]);if(h.ok){const g=await h.json();a(g.forms||[])}else console.error("Failed to fetch forms"),a([]);if(x.ok){const g=await x.json();s(g.submissions||[])}else console.error("Failed to fetch submissions"),s([])}catch(h){console.error("Error fetching data:",h),o("Failed to load forms data"),a([]),s([])}finally{i(!1)}})()},[]);const[d,u]=y.useState("forms"),p=f=>{switch(f){case"contact":return"";case"newsletter":return"";case"feedback":return"";case"survey":return"";default:return""}},m=f=>f==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800";return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Forms"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Create and manage contact forms and surveys"})]}),e.jsx("button",{className:"btn-primary",children:"Create Form"})]}),l&&e.jsx("div",{className:"metric-card bg-red-50 border-red-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-red-600",children:l}),e.jsx("button",{onClick:()=>window.location.reload(),className:"ml-auto text-red-600 hover:text-red-800 underline",children:"Retry"})]})}),n&&!l&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[...Array(4)].map((f,h)=>e.jsxs("div",{className:"metric-card animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded"})]},h))}),e.jsx("div",{className:"metric-card animate-pulse",children:e.jsx("div",{className:"h-64 bg-gray-200 rounded"})})]}),!n&&!l&&e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"forms",name:"Forms",count:r.length},{id:"submissions",name:"Submissions",count:r.reduce((f,h)=>f+h.submissions,0)},{id:"create",name:"Create New",count:0}].map(f=>e.jsxs("button",{onClick:()=>u(f.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${d===f.id?"border-brand-primary text-brand-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[f.name," (",f.count,")"]},f.id))})}),!n&&!l&&d==="forms"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{title:"Total Forms",value:r.length,icon:""},{title:"Active",value:r.filter(f=>f.status==="active").length,icon:""},{title:"Total Submissions",value:r.reduce((f,h)=>f+h.submissions,0),icon:""},{title:"Avg. Submissions",value:r.length>0?Math.round(r.reduce((f,h)=>f+h.submissions,0)/r.length):0,icon:""}].map((f,h)=>e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:f.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.value})]}),e.jsx("div",{className:"text-2xl",children:f.icon})]})},h))}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"border-b border-gray-200 text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 pr-4",children:"Form"}),e.jsx("th",{className:"py-3 pr-4",children:"Type"}),e.jsx("th",{className:"py-3 pr-4",children:"Status"}),e.jsx("th",{className:"py-3 pr-4",children:"Submissions"}),e.jsx("th",{className:"py-3 pr-4",children:"Created"}),e.jsx("th",{className:"py-3 pr-4",children:"Actions"})]})}),e.jsx("tbody",{children:r.map(f=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:p(f.type)}),e.jsx("span",{className:"font-medium text-gray-900",children:f.name})]})}),e.jsx("td",{className:"py-3 pr-4",children:e.jsx("span",{className:"capitalize text-gray-600",children:f.type})}),e.jsx("td",{className:"py-3 pr-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${m(f.status)}`,children:f.status})}),e.jsx("td",{className:"py-3 pr-4 font-semibold",children:f.submissions}),e.jsx("td",{className:"py-3 pr-4 text-gray-600",children:new Date(f.createdAt).toLocaleDateString()}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Edit"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"View"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Submissions"})]})})]},f.id))})]})})})]}),!n&&!l&&d==="submissions"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Submissions"}),e.jsx("button",{className:"btn-secondary",children:"Export All"})]}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"space-y-4",children:t.length>0?t.map((f,h)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:f.name}),e.jsx("span",{className:"text-gray-500",children:""}),e.jsx("span",{className:"text-sm text-gray-600",children:f.email})]}),e.jsx("p",{className:"text-gray-700 mb-2",children:f.message}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Via ",f.form,"  ",new Date(f.submittedAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Reply"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"View"})]})]})},h)):e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No form submissions available"})})})})]}),!n&&!l&&d==="create"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create New Form"}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Form Name"}),e.jsx("input",{type:"text",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"Contact Form"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Form Type"}),e.jsxs("select",{className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",children:[e.jsx("option",{value:"contact",children:"Contact"}),e.jsx("option",{value:"newsletter",children:"Newsletter"}),e.jsx("option",{value:"feedback",children:"Feedback"}),e.jsx("option",{value:"survey",children:"Survey"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Form Fields"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Name (required)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Email (required)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Message"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Phone Number"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",className:"btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Create Form"})]})]})]})})]})}const S8=()=>{const{notify:t}=Sr(),[s,r]=y.useState([]),[a,n]=y.useState(!1),[i,l]=y.useState(!1),[o,c]=y.useState(null),[d,u]=y.useState(""),[p,m]=y.useState("all"),[f,h]=y.useState(!1),[x,g]=y.useState(null);y.useEffect(()=>{j()},[]);const j=async()=>{try{h(!0);const D="http://192.168.1.36:2000",V=await fetch(`${D}/api/invoices`);if(V.ok){const O=await V.json(),I=Array.isArray(O)?O.filter(z=>z&&typeof z=="object"&&z.invoiceNumber&&z.customerName&&z.customerEmail):[];r(I)}}catch(R){console.error("Failed to load invoices:",R),r([])}finally{h(!1)}},b=s.filter(R=>{var O,I,z;const D=((O=R.invoiceNumber)==null?void 0:O.toLowerCase().includes(d.toLowerCase()))||!1||((I=R.customerName)==null?void 0:I.toLowerCase().includes(d.toLowerCase()))||!1||((z=R.customerEmail)==null?void 0:z.toLowerCase().includes(d.toLowerCase()))||!1,V=p==="all"||R.status===p;return D&&V}),N=R=>{switch(R){case"paid":return"bg-green-100 text-green-800";case"sent":return"bg-blue-100 text-blue-800";case"overdue":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},C=async R=>{h(!0);try{const D=await fetch("/api/invoices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(D.ok){const V=await D.json();r([...s,V]),n(!1),t("success","Invoice created")}}catch(D){console.error("Error creating invoice:",D),t("error","Failed to create invoice")}finally{h(!1)}},A=async R=>{if(o){h(!0);try{const D=await fetch(`/api/invoices/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(D.ok){const V=await D.json();r(s.map(O=>O.id===o.id?V:O)),l(!1),c(null),t("success","Invoice updated")}}catch(D){console.error("Error updating invoice:",D),t("error","Failed to update invoice")}finally{h(!1)}}},F=async R=>{if(R){h(!0);try{const V="http://192.168.1.36:2000";(await fetch(`${V}/api/invoices/${R}`,{method:"DELETE"})).ok&&(r(s.filter(I=>I.id!==R)),t("success","Invoice deleted"))}catch(D){console.error("Error deleting invoice:",D),t("error","Failed to delete invoice")}finally{h(!1)}}},w=async R=>{h(!0);try{const V="http://192.168.1.36:2000";(await fetch(`${V}/api/invoices/${R}/send`,{method:"POST"})).ok&&(r(s.map(I=>I.id===R?{...I,status:"sent"}:I)),t("success","Invoice sent"))}catch(D){console.error("Error sending invoice:",D),t("error","Failed to send invoice")}finally{h(!1)}},_=s.reduce((R,D)=>R+D.total,0),v=s.filter(R=>R.status==="paid").reduce((R,D)=>R+D.total,0),S=s.filter(R=>R.status==="overdue").reduce((R,D)=>R+D.total,0);return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Invoices"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage customer invoices and billing"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Hn,{to:"/admin/invoice-settings",className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Invoice Settings"]}),e.jsxs("button",{onClick:()=>n(!0),className:"btn-primary",children:[e.jsx("span",{className:"text-lg mr-2",children:""}),"Create Invoice"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Invoices"}),e.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:s.length})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-brand-primary",children:["$",_.toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Paid Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",v.toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overdue Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["$",S.toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})})]}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search invoices...",value:d,onChange:R=>u(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsxs("select",{value:p,onChange:R=>m(R.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Invoice #"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Customer"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Order ID"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Amount"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Due Date"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:b.map(R=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx(Hn,{to:`/admin/invoices/${R.id}`,className:"text-brand-primary hover:underline font-medium",children:R.invoiceNumber||"N/A"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:R.customerName||"N/A"}),e.jsx("p",{className:"text-sm text-gray-500",children:R.customerEmail||"N/A"})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(Hn,{to:`/admin/orders/${R.orderId}`,className:"text-brand-primary hover:underline",children:R.orderId||"N/A"})}),e.jsxs("td",{className:"py-3 px-4 font-medium",children:["$",(R.total||0).toFixed(2)]}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N(R.status||"draft")}`,children:(R.status||"draft").charAt(0).toUpperCase()+(R.status||"draft").slice(1)})}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:R.dueDate||"N/A"}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{c(R),l(!0)},className:"text-brand-secondary hover:text-brand-primary",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),R.status==="draft"&&e.jsx("button",{onClick:()=>w(R.id),className:"text-blue-600 hover:text-blue-800",title:"Send Invoice",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})}),e.jsx("button",{onClick:()=>g(R.id),className:"text-red-600 hover:text-red-800",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},R.id))})]})})}),a&&e.jsx(C8,{onClose:()=>n(!1),onSubmit:C,loading:f}),i&&o&&e.jsx(_8,{invoice:o,onClose:()=>{l(!1),c(null)},onSubmit:A,loading:f}),e.jsx($a,{open:!!x,onClose:()=>g(null),onConfirm:()=>{x&&F(x)},title:"Delete this invoice?",description:"This action cannot be undone.",confirmText:"Delete"})]})},C8=({onClose:t,onSubmit:s,loading:r})=>{const[a,n]=y.useState({customerName:"",customerEmail:"",orderId:"",dueDate:"",items:[{id:`item-${Date.now()}`,productName:"",quantity:1,price:0,total:0}]}),i=l=>{l.preventDefault();const o=a.items.reduce((u,p)=>u+p.quantity*p.price,0),c=o*.1,d={...a,amount:o,tax:c,total:o+c,status:"draft",invoiceNumber:`INV-${Date.now()}`,createdAt:new Date().toISOString()};s(d)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Create Invoice"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),e.jsx("input",{type:"text",required:!0,value:a.customerName,onChange:l=>n({...a,customerName:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Email"}),e.jsx("input",{type:"email",required:!0,value:a.customerEmail,onChange:l=>n({...a,customerEmail:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order ID"}),e.jsx("input",{type:"text",required:!0,value:a.orderId,onChange:l=>n({...a,orderId:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",required:!0,value:a.dueDate,onChange:l=>n({...a,dueDate:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Items"}),a.items.map((l,o)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Product Name",value:l.productName,onChange:c=>{const d=[...a.items];d[o].productName=c.target.value,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsx("div",{children:e.jsx("input",{type:"number",placeholder:"Quantity",min:"1",value:l.quantity,onChange:c=>{const d=[...a.items];d[o].quantity=parseInt(c.target.value)||1,d[o].total=d[o].quantity*d[o].price,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsx("div",{children:e.jsx("input",{type:"number",placeholder:"Price",min:"0",step:"0.01",value:l.price,onChange:c=>{const d=[...a.items];d[o].price=parseFloat(c.target.value)||0,d[o].total=d[o].quantity*d[o].price,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})})]},o)),e.jsx("button",{type:"button",onClick:()=>n({...a,items:[...a.items,{id:`item-${Date.now()}`,productName:"",quantity:1,price:0,total:0}]}),className:"text-brand-secondary hover:text-brand-primary",children:"+ Add Item"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r,className:"btn-primary",children:r?"Creating...":"Create Invoice"})]})]})]})})},_8=({invoice:t,onClose:s,onSubmit:r,loading:a})=>{const[n,i]=y.useState({customerName:t.customerName,customerEmail:t.customerEmail,orderId:t.orderId,dueDate:t.dueDate,status:t.status,items:t.items}),l=o=>{o.preventDefault();const c=n.items.reduce((p,m)=>p+m.quantity*m.price,0),d=c*.1,u={...n,amount:c,tax:d,total:c+d};r(u)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Edit Invoice"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),e.jsx("input",{type:"text",required:!0,value:n.customerName,onChange:o=>i({...n,customerName:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Email"}),e.jsx("input",{type:"email",required:!0,value:n.customerEmail,onChange:o=>i({...n,customerEmail:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order ID"}),e.jsx("input",{type:"text",required:!0,value:n.orderId,onChange:o=>i({...n,orderId:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",required:!0,value:n.dueDate,onChange:o=>i({...n,dueDate:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:n.status,onChange:o=>i({...n,status:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"btn-primary",children:a?"Updating...":"Update Invoice"})]})]})]})})},T8=()=>{const[t,s]=y.useState({companyDetails:{companyName:"Nefol",companyAddress:"",companyPhone:"7355384939",companyEmail:"info@nefol.com",gstNumber:"",panNumber:"",bankName:"",accountNumber:"",ifscCode:""},colors:{primaryStart:"#667eea",primaryEnd:"#764ba2",accentStart:"#667eea",accentEnd:"#764ba2"},tax:{rate:18,type:"IGST"},terms:"Thank you for doing business with us.",signatureText:"Authorized Signatory",currency:""}),[r,a]=y.useState(!1),[n,i]=y.useState("idle"),[l,o]=y.useState(!1),[c,d]=y.useState("company"),[u,p]=y.useState(!1),[m,f]=y.useState(!1),[h,x]=y.useState(!1),[g,j]=y.useState(null),[b,N]=y.useState(null);y.useEffect(()=>{C()},[]);const C=async()=>{try{const I="http://192.168.1.36:2000",z=await fetch(`${I}/api/invoice-settings/company-details`);if(z.ok){const P=await z.json();P&&Object.keys(P).length>0&&s(k=>({...k,companyDetails:{companyName:P.companyName||k.companyDetails.companyName||"",companyAddress:P.companyAddress||k.companyDetails.companyAddress||"",companyPhone:P.companyPhone||k.companyDetails.companyPhone||"",companyEmail:P.companyEmail||k.companyDetails.companyEmail||"",gstNumber:P.gstNumber||k.companyDetails.gstNumber||"",panNumber:P.panNumber||k.companyDetails.panNumber||"",bankName:P.bankName||k.companyDetails.bankName||"",accountNumber:P.accountNumber||k.companyDetails.accountNumber||"",ifscCode:P.ifscCode||k.companyDetails.ifscCode||""}}))}const Q=await fetch(`${I}/api/invoice-settings/all`);if(Q.ok){const P=await Q.json();if(P){if(s(k=>({...k,...P.colors&&{colors:P.colors},...P.tax&&{tax:P.tax},...P.terms!==void 0&&{terms:P.terms||""},...P.signatureText!==void 0&&{signatureText:P.signatureText||""},...P.currency!==void 0&&{currency:P.currency||""},...P.companyDetails&&{companyDetails:{companyName:P.companyDetails.companyName||k.companyDetails.companyName||"",companyAddress:P.companyDetails.companyAddress||k.companyDetails.companyAddress||"",companyPhone:P.companyDetails.companyPhone||k.companyDetails.companyPhone||"",companyEmail:P.companyDetails.companyEmail||k.companyDetails.companyEmail||"",gstNumber:P.companyDetails.gstNumber||k.companyDetails.gstNumber||"",panNumber:P.companyDetails.panNumber||k.companyDetails.panNumber||"",bankName:P.companyDetails.bankName||k.companyDetails.bankName||"",accountNumber:P.companyDetails.accountNumber||k.companyDetails.accountNumber||"",ifscCode:P.companyDetails.ifscCode||k.companyDetails.ifscCode||""}},...P.logoUrl!==void 0&&{logoUrl:P.logoUrl||void 0},...P.signatoryPhotoUrl!==void 0&&{signatoryPhotoUrl:P.signatoryPhotoUrl||void 0}})),P.logoUrl){const k=P.logoUrl.startsWith("http")?P.logoUrl:`${I}${P.logoUrl}`;j(k)}if(P.signatoryPhotoUrl){const k=P.signatoryPhotoUrl.startsWith("http")?P.signatoryPhotoUrl:`${I}${P.signatoryPhotoUrl}`;N(k)}}}}catch(O){console.error("Failed to load settings:",O)}},A=async()=>{a(!0),i("idle");try{const I="http://192.168.1.36:2000";await fetch(`${I}/api/invoice-settings/company-details`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t.companyDetails)}),await fetch(`${I}/api/invoice-settings/all`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,logoUrl:t.logoUrl,signatoryPhotoUrl:t.signatoryPhotoUrl})}),i("success"),setTimeout(()=>i("idle"),3e3)}catch(O){console.error("Failed to save settings:",O),i("error"),setTimeout(()=>i("idle"),3e3)}finally{a(!1)}},F=(O,I,z)=>{s(Q=>{const P={...Q};return O==="companyDetails"||O==="colors"||O==="tax"?P[O]={...Q[O],[I]:z}:P[I]=z,P})},w=(O,I)=>{s(z=>({...z,[O]:I}))},_=()=>({background:`linear-gradient(135deg, ${t.colors.primaryStart} 0%, ${t.colors.primaryEnd} 100%)`,color:"white",padding:"20px",borderRadius:"8px",marginBottom:"20px"}),v=()=>"http://192.168.1.36:2000",S=async O=>{var z;const I=(z=O.target.files)==null?void 0:z[0];if(I){if(!I.type.startsWith("image/")){alert("Please select an image file");return}if(I.size>5*1024*1024){alert("Image size must be less than 5MB");return}try{f(!0);const Q=v(),P=await Dr(I,Q),k=P.replace(/^https?:\/\/[^/]+/,"");s(X=>({...X,logoUrl:k})),j(P)}catch(Q){console.error("Failed to upload logo:",Q),alert("Failed to upload logo. Please try again.")}finally{f(!1)}}},R=async O=>{var z;const I=(z=O.target.files)==null?void 0:z[0];if(I){if(!I.type.startsWith("image/")){alert("Please select an image file");return}if(I.size>5*1024*1024){alert("Image size must be less than 5MB");return}try{x(!0);const Q=v(),P=await Dr(I,Q),k=P.replace(/^https?:\/\/[^/]+/,"");s(X=>({...X,signatoryPhotoUrl:k})),N(P)}catch(Q){console.error("Failed to upload signatory photo:",Q),alert("Failed to upload signatory photo. Please try again.")}finally{x(!1)}}},D=()=>{s(O=>({...O,logoUrl:void 0})),j(null)},V=()=>{s(O=>({...O,signatoryPhotoUrl:void 0})),N(null)};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Invoice Settings"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Customize your invoice design and details"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>p(!0),className:"btn-secondary flex items-center gap-2",children:[e.jsx(qn,{className:"w-5 h-5"}),"Upload Images"]}),e.jsxs("button",{onClick:()=>o(!l),className:"btn-secondary flex items-center gap-2",children:[e.jsx(nt,{className:"w-5 h-5"}),l?"Hide":"Show"," Preview"]}),e.jsxs("button",{onClick:A,disabled:r,className:"btn-primary flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),r?"Saving...":"Save All Settings"]})]})]}),n==="success"&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg",children:" All settings saved successfully!"}),n==="error"&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:" Failed to save settings. Please try again."}),e.jsx("div",{className:"flex gap-2 border-b",style:{borderColor:"var(--arctic-blue-light)"},children:["Company","Design","Tax","Terms"].map((O,I)=>e.jsx("button",{onClick:()=>d(O.toLowerCase().replace("tax","tax").replace("terms","terms").replace("company","company").replace("design","design")),className:`px-6 py-3 font-medium transition-colors ${c===(O==="Company"?"company":O==="Design"?"design":O==="Tax"?"tax":"terms")?"border-b-2":""}`,style:c===(O==="Company"?"company":O==="Design"?"design":O==="Tax"?"tax":"terms")?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:O},O))}),e.jsxs("div",{className:"space-y-6",children:[c==="company"&&e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Nb,{className:"w-6 h-6 text-brand-primary"}),e.jsx("h2",{className:"text-xl font-bold text-brand-primary",children:"Company Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Company Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.companyDetails.companyName||"",onChange:O=>F("companyDetails","companyName",O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",value:t.companyDetails.companyPhone||"",onChange:O=>F("companyDetails","companyPhone",O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:t.companyDetails.companyEmail||"",onChange:O=>F("companyDetails","companyEmail",O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST Number"}),e.jsx("input",{type:"text",value:t.companyDetails.gstNumber||"",onChange:O=>F("companyDetails","gstNumber",O.target.value),placeholder:"29ABCDE1234F1Z5",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PAN Number"}),e.jsx("input",{type:"text",value:t.companyDetails.panNumber||"",onChange:O=>F("companyDetails","panNumber",O.target.value),placeholder:"ABCDE1234F",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Complete Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{rows:4,value:t.companyDetails.companyAddress||"",onChange:O=>F("companyDetails","companyAddress",O.target.value),placeholder:"Enter complete company address",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Banking Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Name"}),e.jsx("input",{type:"text",value:t.companyDetails.bankName||"",onChange:O=>F("companyDetails","bankName",O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Number"}),e.jsx("input",{type:"text",value:t.companyDetails.accountNumber||"",onChange:O=>F("companyDetails","accountNumber",O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IFSC Code"}),e.jsx("input",{type:"text",value:t.companyDetails.ifscCode||"",onChange:O=>F("companyDetails","ifscCode",O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]})]})]}),c==="design"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(zu,{className:"w-6 h-6 text-brand-primary"}),e.jsx("h2",{className:"text-xl font-bold text-brand-primary",children:"Color Customization"})]}),e.jsxs("div",{style:_(),className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Invoice Header Preview"}),e.jsx("p",{children:"This is how your invoice header will look"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Gradient Start"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"color",value:t.colors.primaryStart,onChange:O=>F("colors","primaryStart",O.target.value),className:"w-20 h-10 rounded border border-gray-300"}),e.jsx("input",{type:"text",value:t.colors.primaryStart,onChange:O=>F("colors","primaryStart",O.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Gradient End"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"color",value:t.colors.primaryEnd,onChange:O=>F("colors","primaryEnd",O.target.value),className:"w-20 h-10 rounded border border-gray-300"}),e.jsx("input",{type:"text",value:t.colors.primaryEnd,onChange:O=>F("colors","primaryEnd",O.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency Symbol"}),e.jsx("input",{type:"text",value:t.currency||"",onChange:O=>w("currency",O.target.value),placeholder:"",maxLength:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Quick Color Presets"}),e.jsx("div",{className:"flex gap-3 flex-wrap",children:[{name:"Arctic Blue",start:"#667eea",end:"#764ba2"},{name:"Ocean Blue",start:"#2193b0",end:"#6dd5ed"},{name:"Purple",start:"#9b59b6",end:"#e74c3c"},{name:"Green",start:"#11998e",end:"#38ef7d"},{name:"Orange",start:"#f12711",end:"#f5af19"},{name:"Pink",start:"#ec008c",end:"#fc6767"}].map(O=>e.jsx("button",{onClick:()=>{F("colors","primaryStart",O.start),F("colors","primaryEnd",O.end)},className:"px-4 py-2 rounded-lg border border-gray-300 hover:border-brand-primary transition-colors",style:{background:`linear-gradient(135deg, ${O.start} 0%, ${O.end} 100%)`,color:"white"},children:O.name},O.name))})]})]})}),c==="tax"&&e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(p4,{className:"w-6 h-6 text-brand-primary"}),e.jsx("h2",{className:"text-xl font-bold text-brand-primary",children:"Tax Settings"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Rate (%)"}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx("input",{type:"range",min:"0",max:"28",step:"0.5",value:t.tax.rate,onChange:O=>F("tax","rate",parseFloat(O.target.value)),className:"flex-1"}),e.jsxs("span",{className:"font-bold text-brand-primary text-lg w-20 text-right",children:[t.tax.rate,"%"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Type"}),e.jsxs("select",{value:t.tax.type,onChange:O=>F("tax","type",O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"IGST",children:"IGST (Inter-State)"}),e.jsx("option",{value:"CGST+SGST",children:"CGST + SGST (Intra-State)"})]})]})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Tax Calculation:"}),e.jsx("p",{className:"text-sm text-blue-700",children:t.tax.type==="IGST"?`Your invoices will show ${t.tax.rate}% IGST (Integrated GST) for inter-state sales.`:`Your invoices will show ${t.tax.rate/2}% CGST and ${t.tax.rate/2}% SGST for intra-state sales.`})]})]}),c==="terms"&&e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(gs,{className:"w-6 h-6 text-brand-primary"}),e.jsx("h2",{className:"text-xl font-bold text-brand-primary",children:"Terms & Signature"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Terms and Conditions"}),e.jsx("textarea",{rows:6,value:t.terms||"",onChange:O=>w("terms",O.target.value),placeholder:"Enter your terms and conditions...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Signature Text"}),e.jsx("input",{type:"text",value:t.signatureText||"",onChange:O=>w("signatureText",O.target.value),placeholder:"Authorized Signatory",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Preview:"}),e.jsx("p",{className:"text-gray-700 mb-4",children:t.terms}),e.jsxs("div",{className:"text-gray-600",children:[e.jsxs("div",{children:["For: ",t.companyDetails.companyName||"Your Company"]}),e.jsx("div",{className:"mt-2",children:t.signatureText})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:A,disabled:r,className:"btn-primary px-6 py-3 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),r?"Saving...":"Save All Settings"]})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Upload Invoice Images"}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx(Qt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Company Logo"}),e.jsxs("div",{className:"space-y-4",children:[g?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:g,alt:"Logo preview",className:"max-w-full h-32 object-contain border border-gray-200 rounded-lg p-2 bg-gray-50"}),e.jsx("button",{onClick:D,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:e.jsx(Qt,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(qn,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No logo uploaded"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"image/*",onChange:S,disabled:m,className:"hidden",id:"logo-upload"}),e.jsxs("label",{htmlFor:"logo-upload",className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg cursor-pointer transition-colors ${m?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-brand-primary text-white hover:bg-brand-secondary"}`,children:[e.jsx(On,{className:"w-4 h-4"}),m?"Uploading...":g?"Change Logo":"Upload Logo"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Recommended: PNG or JPG, max 5MB. Transparent background preferred."})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Authorized Signatory Photo"}),e.jsxs("div",{className:"space-y-4",children:[b?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:b,alt:"Signatory preview",className:"max-w-full h-48 object-contain border border-gray-200 rounded-lg p-2 bg-gray-50"}),e.jsx("button",{onClick:V,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:e.jsx(Qt,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(qn,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No signatory photo uploaded"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"image/*",onChange:R,disabled:h,className:"hidden",id:"signatory-upload"}),e.jsxs("label",{htmlFor:"signatory-upload",className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg cursor-pointer transition-colors ${h?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-brand-primary text-white hover:bg-brand-secondary"}`,children:[e.jsx(On,{className:"w-4 h-4"}),h?"Uploading...":b?"Change Photo":"Upload Photo"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Recommended: PNG or JPG, max 5MB. Clear signature or photo preferred."})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>p(!1),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"}),e.jsxs("button",{onClick:async()=>{await A(),p(!1)},disabled:r,className:"btn-primary px-6 py-2 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),"Save Images"]})]})]})})]})},E8=()=>{const{notify:t}=Sr(),[s,r]=y.useState([]),[a,n]=y.useState(!1),[i,l]=y.useState(""),[o,c]=y.useState("all"),[d,u]=y.useState("all"),[p,m]=y.useState(!1),[f,h]=y.useState(new Set),[x,g]=y.useState(""),[j,b]=y.useState(null),N=[0,5,12,18,28],A="http://192.168.1.36:2000";y.useEffect(()=>{F();const P=Je.subscribe("product_updated",X=>{console.log(" Product updated in Tax page:",X),F()}),k=Je.subscribe("products_updated",X=>{console.log(" Products updated in Tax page:",X),F()});return()=>{P&&P(),k&&k()}},[]);const F=async()=>{try{n(!0);const P=await fetch(`${A}/api/products?_=${Date.now()}`,{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(!P.ok)throw new Error(`HTTP error! status: ${P.status}`);const X=(await P.json()).map(se=>{const B=se.details||{},L=B["GST %"]||B.gstPercent||B.gst||"0",H=parseFloat(L)||0;return{...se,currentGSTRate:H,isEditing:!1,tempGSTRate:H.toString()}});r(X)}catch(P){console.error("Failed to load products:",P),t("error","Failed to load products")}finally{n(!1)}},w=s.filter(P=>{var B;const k=P.title.toLowerCase().includes(i.toLowerCase())||P.slug.toLowerCase().includes(i.toLowerCase())||(((B=P.details)==null?void 0:B.sku)||"").toLowerCase().includes(i.toLowerCase()),X=o==="all"||P.category===o;let se=!0;if(d==="no-gst")se=P.currentGSTRate===0;else if(d!=="all"){const L=parseFloat(d);se=P.currentGSTRate===L}return k&&X&&se}),_=Array.from(new Set(s.map(P=>P.category).filter(Boolean))),v=P=>{r(s.map(k=>k.id===P?{...k,isEditing:!0,tempGSTRate:k.currentGSTRate.toString()}:{...k,isEditing:!1}))},S=P=>{r(s.map(k=>k.id===P?{...k,isEditing:!1,tempGSTRate:k.currentGSTRate.toString()}:k))},R=(P,k)=>{r(s.map(X=>X.id===P?{...X,tempGSTRate:k}:X))},D=async P=>{const k=s.find(se=>se.id===P);if(!k)return;const X=parseFloat(k.tempGSTRate);if(isNaN(X)||X<0||X>100){t("error","Invalid GST rate. Please enter a value between 0 and 100");return}try{if(b(P),!(await fetch(`${A}/api/products/${P}/gst`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({gstRate:X})})).ok)throw new Error("Failed to update GST rate");r(s.map(B=>B.id===P?{...B,currentGSTRate:X,isEditing:!1,tempGSTRate:X.toString()}:B)),t("success",`GST rate updated to ${X}% for ${k.title}`)}catch(se){console.error("Failed to save GST rate:",se),t("error","Failed to save GST rate")}finally{b(null)}},V=P=>{const k=new Set(f);k.has(P)?k.delete(P):k.add(P),h(k)},O=()=>{f.size===w.length?h(new Set):h(new Set(w.map(P=>P.id)))},I=async()=>{if(f.size===0){t("error","Please select at least one product");return}if(!x||x==="custom"){t("error","Please select or enter a valid GST rate");return}const P=parseFloat(x);if(isNaN(P)||P<0||P>100){t("error","Invalid GST rate. Please enter a value between 0 and 100");return}try{n(!0);const k=Array.from(f).map(B=>({productId:B,gstRate:P})),X=await fetch(`${A}/api/products/bulk-update-gst`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:k})});if(!X.ok)throw new Error("Failed to bulk update GST rates");const se=await X.json();r(s.map(B=>f.has(B.id)?{...B,currentGSTRate:P,tempGSTRate:P.toString()}:B)),h(new Set),m(!1),g(""),t("success",`GST rate updated to ${P}% for ${se.updated} products`)}catch(k){console.error("Failed to bulk update GST rates:",k),t("error","Failed to bulk update GST rates")}finally{n(!1)}},z=async(P,k)=>{const X=s.find(se=>se.id===P);if(X)try{if(b(P),!(await fetch(`${A}/api/products/${P}/gst`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({gstRate:k})})).ok)throw new Error("Failed to update GST rate");r(s.map(B=>B.id===P?{...B,currentGSTRate:k,isEditing:!1,tempGSTRate:k.toString()}:B)),t("success",`GST rate set to ${k}% for ${X.title}`)}catch(se){console.error("Failed to update GST rate:",se),t("error","Failed to update GST rate")}finally{b(null)}},Q={total:s.length,withGST:s.filter(P=>P.currentGSTRate>0).length,noGST:s.filter(P=>P.currentGSTRate===0).length,byRate:N.reduce((P,k)=>(P[k]=s.filter(X=>X.currentGSTRate===k).length,P),{})};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Tax Management (GST)"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage GST rates for all products according to Indian GST law"})]}),e.jsx("div",{className:"flex gap-3",children:p?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{m(!1),h(new Set),g("")},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel Bulk Edit"}),e.jsxs("button",{onClick:I,disabled:f.size===0||!x||a,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:["Save Bulk Update (",f.size," products)"]})]}):e.jsxs("button",{onClick:()=>m(!0),className:"btn-primary",children:[e.jsx("span",{className:"text-lg mr-2",children:""}),"Bulk Edit GST Rates"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Products"}),e.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:Q.total})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"0% GST"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:Q.byRate[0]||0})]})})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"5% GST"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:Q.byRate[5]||0})]})})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"12% GST"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:Q.byRate[12]||0})]})})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"18% GST"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Q.byRate[18]||0})]})})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"28% GST"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:Q.byRate[28]||0})]})})})]}),p&&e.jsxs("div",{className:"metric-card bg-yellow-50 border-2 border-yellow-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Bulk Edit Mode - ",f.size," product(s) selected"]}),e.jsx("button",{onClick:O,className:"text-sm text-brand-primary hover:underline",children:f.size===w.length?"Deselect All":"Select All"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Set GST Rate (%):"}),e.jsxs("select",{value:x,onChange:P=>g(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"",children:"Select GST Rate"}),N.map(P=>e.jsxs("option",{value:P,children:[P,"% (Standard Indian GST)"]},P)),e.jsx("option",{value:"custom",children:"Custom Rate"})]}),x==="custom"||x&&!N.includes(parseFloat(x)||0)?e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",placeholder:"Enter custom GST rate",value:x==="custom"?"":x,onChange:P=>g(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary w-48",autoFocus:!0}):null]})]}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search products by name, slug, or SKU...",value:i,onChange:P=>l(P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsxs("select",{value:o,onChange:P=>c(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"all",children:"All Categories"}),_.map(P=>e.jsx("option",{value:P,children:P},P))]}),e.jsxs("select",{value:d,onChange:P=>u(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"all",children:"All GST Rates"}),e.jsx("option",{value:"no-gst",children:"No GST (0%)"}),N.filter(P=>P>0).map(P=>e.jsxs("option",{value:P.toString(),children:[P,"% GST"]},P))]})]})}),e.jsx("div",{className:"metric-card",children:a&&s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading products..."})]}):w.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"No products found"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[p&&e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 w-12",children:e.jsx("input",{type:"checkbox",checked:f.size===w.length&&w.length>0,onChange:O,className:"rounded border-gray-300"})}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Product"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"SKU"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"HSN Code"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Category"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Current GST"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:w.map(P=>{var k,X;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[p&&e.jsx("td",{className:"py-3 px-4",children:e.jsx("input",{type:"checkbox",checked:f.has(P.id),onChange:()=>V(P.id),className:"rounded border-gray-300"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[P.list_image&&e.jsx("img",{src:P.list_image.startsWith("http")?P.list_image:`${A}${P.list_image}`,alt:P.title,className:"w-12 h-12 object-cover rounded",onError:se=>{se.target.style.display="none"}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:P.title}),e.jsx("div",{className:"text-sm text-gray-500",children:P.slug})]})]})}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:((k=P.details)==null?void 0:k.sku)||"-"}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:((X=P.details)==null?void 0:X.hsn)||"-"}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:P.category||"-"}),e.jsx("td",{className:"py-3 px-4",children:P.isEditing?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:P.tempGSTRate,onChange:se=>R(P.id,se.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-brand-secondary",autoFocus:!0}),e.jsx("span",{className:"text-gray-600",children:"%"}),e.jsx("button",{onClick:()=>D(P.id),disabled:j===P.id,className:"text-green-600 hover:text-green-800 disabled:opacity-50",title:"Save",children:j===P.id?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600"}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("button",{onClick:()=>S(P.id),className:"text-red-600 hover:text-red-800",title:"Cancel",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:`font-medium px-2 py-1 rounded text-sm ${P.currentGSTRate===0?"bg-green-100 text-green-800":P.currentGSTRate===5?"bg-orange-100 text-orange-800":P.currentGSTRate===12?"bg-yellow-100 text-yellow-800":P.currentGSTRate===18?"bg-purple-100 text-purple-800":P.currentGSTRate===28?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:[P.currentGSTRate,"%"]})})}),e.jsx("td",{className:"py-3 px-4",children:P.isEditing?e.jsx("div",{className:"text-sm text-gray-500",children:"Editing..."}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>v(P.id),className:"text-brand-secondary hover:text-brand-primary",title:"Edit GST Rate",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("div",{className:"flex gap-1",children:N.map(se=>e.jsxs("button",{onClick:()=>z(P.id,se),disabled:j===P.id||P.currentGSTRate===se,className:`text-xs px-2 py-1 rounded ${P.currentGSTRate===se?"bg-brand-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"} disabled:opacity-50`,title:`Quick set to ${se}%`,children:[se,"%"]},se))})]})})]},P.id)})})]})})}),e.jsxs("div",{className:"metric-card bg-blue-50 border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:" Indian GST Law Information"}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"0% GST:"})," Essential items, unprocessed food, etc."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"5% GST:"})," Packaged food items, medicines, etc."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"12% GST:"})," Processed food, computers, mobile phones, etc."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"18% GST:"})," Most goods and services, cosmetics, etc."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"28% GST:"})," Luxury items, automobiles, etc."]}),e.jsx("p",{className:"mt-2 text-xs text-gray-600",children:"Note: You can also set custom GST rates as per your business requirements."})]})]})]})},F8=()=>{const{notify:t}=Sr(),[s,r]=y.useState([]),[a,n]=y.useState(!1),[i,l]=y.useState(!1),[o,c]=y.useState(null),[d,u]=y.useState(""),[p,m]=y.useState("all"),[f,h]=y.useState(!1),[x,g]=y.useState(null);y.useEffect(()=>{j()},[]);const j=async()=>{try{h(!0);const O="http://192.168.1.36:2000",I=await fetch(`${O}/api/returns`,{headers:{"x-user-role":"admin","x-user-permissions":"returns:read"}});if(I.ok){const z=await I.json();r(Array.isArray(z)?z:(z==null?void 0:z.data)||[])}}catch(V){console.error("Failed to load returns:",V)}finally{h(!1)}},b=s.filter(V=>{const O=V.returnNumber.toLowerCase().includes(d.toLowerCase())||V.customerName.toLowerCase().includes(d.toLowerCase())||V.customerEmail.toLowerCase().includes(d.toLowerCase())||V.orderId.toLowerCase().includes(d.toLowerCase()),I=p==="all"||V.status===p;return O&&I}),N=V=>{switch(V){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"processing":return"bg-blue-100 text-blue-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},C=async V=>{h(!0);try{const I="http://192.168.1.36:2000",z={order_id:V.orderId,items:V.items||[],reason:V.reason||""},Q=await fetch(`${I}/api/returns`,{method:"POST",headers:{"Content-Type":"application/json","x-user-role":"admin","x-user-permissions":"returns:create"},body:JSON.stringify(z)});if(Q.ok){const P=await Q.json();r([...s,(P==null?void 0:P.data)||P]),n(!1),t("success","Return created")}}catch(O){console.error("Error creating return:",O),t("error","Failed to create return")}finally{h(!1)}},A=async V=>{if(o){h(!0);try{const O=await fetch(`/api/returns/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(O.ok){const I=await O.json();r(s.map(z=>z.id===o.id?I:z)),l(!1),c(null),t("success","Return updated")}}catch(O){console.error("Error updating return:",O),t("error","Failed to update return")}finally{h(!1)}}},F=async V=>{if(V){h(!0);try{const I="http://192.168.1.36:2000";(await fetch(`${I}/api/returns/${V}`,{method:"DELETE"})).ok&&(r(s.filter(Q=>Q.id!==V)),t("success","Return deleted"))}catch(O){console.error("Error deleting return:",O),t("error","Failed to delete return")}finally{h(!1)}}},w=async(V,O)=>{h(!0);try{const z="http://192.168.1.36:2000";(await fetch(`${z}/api/returns/${V}/status`,{method:"PUT",headers:{"Content-Type":"application/json","x-user-role":"admin","x-user-permissions":"returns:update"},body:JSON.stringify({status:O})})).ok&&r(s.map(P=>P.id===V?{...P,status:O,updatedAt:new Date().toISOString()}:P))}catch(I){console.error("Error updating return status:",I)}finally{h(!1)}},_=async V=>{var O;try{const z="http://192.168.1.36:2000",Q=await fetch(`${z}/api/returns/${V}/label`,{method:"POST",headers:{"x-user-role":"admin","x-user-permissions":"returns:update"}}),P=await Q.json();if(!Q.ok)throw new Error((P==null?void 0:P.error)||"Failed to generate label");alert(`Return Label: ${((O=P==null?void 0:P.data)==null?void 0:O.label_url)||(P==null?void 0:P.label_url)}`)}catch(I){alert((I==null?void 0:I.message)||"Failed to generate label")}},v=s.length,S=s.filter(V=>V.status==="pending").length,R=s.reduce((V,O)=>V+O.refundAmount,0),D=v>0?R/v:0;return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Returns Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Process customer returns and refunds"})]}),e.jsxs("button",{onClick:()=>n(!0),className:"btn-primary",children:[e.jsx("span",{className:"text-lg mr-2",children:""}),"Process Return"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Total Returns"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--arctic-blue-primary-dark)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:v})]}),e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:"var(--arctic-blue-light)"},children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Pending Returns"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"#D97706",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:S})]}),e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:"#FEF3C7"},children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Total Refunds"}),e.jsxs("p",{className:"text-2xl font-light",style:{color:"#DC2626",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:["",R.toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:"#FEE2E2"},children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Avg Refund"}),e.jsxs("p",{className:"text-2xl font-light",style:{color:"var(--arctic-blue-primary-dark)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:["",D.toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:"var(--arctic-blue-light)"},children:e.jsx("span",{className:"text-2xl",children:""})})]})})]}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search returns...",value:d,onChange:V=>u(V.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsxs("select",{value:p,onChange:V=>m(V.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Return #"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Order ID"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Customer"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Reason"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Amount"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Created"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:b.map(V=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx(Hn,{to:`/admin/returns/${V.id}`,className:"text-brand-primary hover:underline font-medium",children:V.returnNumber})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(Hn,{to:`/admin/orders/${V.orderId}`,className:"text-brand-primary hover:underline",children:V.orderId})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:V.customerName}),e.jsx("p",{className:"text-sm text-gray-500",children:V.customerEmail})]})}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:V.reason}),e.jsxs("td",{className:"py-3 px-4 font-medium",children:["$",V.refundAmount.toFixed(2)]}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N(V.status)}`,children:V.status.charAt(0).toUpperCase()+V.status.slice(1)})}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:V.createdAt}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{c(V),l(!0)},className:"text-brand-secondary hover:text-brand-primary",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),V.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>w(V.id,"approved"),className:"text-green-600 hover:text-green-800",title:"Approve",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("button",{onClick:()=>w(V.id,"rejected"),className:"text-red-600 hover:text-red-800",title:"Reject",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),V.status==="approved"&&e.jsx("button",{onClick:()=>w(V.id,"processing"),className:"text-blue-600 hover:text-blue-800",title:"Start Processing",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h8m-9-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),V.status==="processing"&&e.jsx("button",{onClick:()=>w(V.id,"completed"),className:"text-green-600 hover:text-green-800",title:"Mark Complete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("button",{onClick:()=>_(V.id),className:"text-indigo-600 hover:text-indigo-800",title:"Generate Return Label",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v8m4-4H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("button",{onClick:()=>g(V.id),className:"text-red-600 hover:text-red-800",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},V.id))})]})})}),e.jsx($a,{open:!!x,onClose:()=>g(null),onConfirm:()=>{x&&F(x)},title:"Delete this return?",description:"This action cannot be undone.",confirmText:"Delete"}),a&&e.jsx(A8,{onClose:()=>n(!1),onSubmit:C,loading:f}),i&&o&&e.jsx(P8,{returnItem:o,onClose:()=>{l(!1),c(null)},onSubmit:A,loading:f})]})},A8=({onClose:t,onSubmit:s,loading:r})=>{const[a,n]=y.useState({orderId:"",customerName:"",customerEmail:"",reason:"",notes:"",items:[{productName:"",quantity:1,reason:"",condition:"new",refundAmount:0}]}),i=l=>{l.preventDefault();const o=a.items.reduce((d,u)=>d+u.refundAmount,0),c={...a,returnNumber:`RET-${Date.now()}`,status:"pending",totalAmount:o,refundAmount:o,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),items:a.items.map((d,u)=>({...d,id:`item-${Date.now()}-${u}`}))};s(c)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Process Return"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order ID"}),e.jsx("input",{type:"text",required:!0,value:a.orderId,onChange:l=>n({...a,orderId:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),e.jsx("input",{type:"text",required:!0,value:a.customerName,onChange:l=>n({...a,customerName:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Email"}),e.jsx("input",{type:"email",required:!0,value:a.customerEmail,onChange:l=>n({...a,customerEmail:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason"}),e.jsxs("select",{required:!0,value:a.reason,onChange:l=>n({...a,reason:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"",children:"Select reason"}),e.jsx("option",{value:"Product defect",children:"Product defect"}),e.jsx("option",{value:"Wrong size",children:"Wrong size"}),e.jsx("option",{value:"Changed mind",children:"Changed mind"}),e.jsx("option",{value:"Not as described",children:"Not as described"}),e.jsx("option",{value:"Damaged in shipping",children:"Damaged in shipping"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:a.notes,onChange:l=>n({...a,notes:l.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Return Items"}),a.items.map((l,o)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4 p-4 border border-gray-200 rounded-lg",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Product Name",value:l.productName,onChange:c=>{const d=[...a.items];d[o].productName=c.target.value,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsx("div",{children:e.jsx("input",{type:"number",placeholder:"Quantity",min:"1",value:l.quantity,onChange:c=>{const d=[...a.items];d[o].quantity=parseInt(c.target.value)||1,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsx("div",{children:e.jsxs("select",{value:l.condition,onChange:c=>{const d=[...a.items];d[o].condition=c.target.value,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"used",children:"Used"}),e.jsx("option",{value:"damaged",children:"Damaged"})]})}),e.jsx("div",{children:e.jsx("input",{type:"number",placeholder:"Refund Amount",min:"0",step:"0.01",value:l.refundAmount,onChange:c=>{const d=[...a.items];d[o].refundAmount=parseFloat(c.target.value)||0,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})})]},o)),e.jsx("button",{type:"button",onClick:()=>n({...a,items:[...a.items,{productName:"",quantity:1,reason:"",condition:"new",refundAmount:0}]}),className:"text-brand-secondary hover:text-brand-primary",children:"+ Add Item"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r,className:"btn-primary",children:r?"Processing...":"Process Return"})]})]})]})})},P8=({returnItem:t,onClose:s,onSubmit:r,loading:a})=>{const[n,i]=y.useState({status:t.status,notes:t.notes||""}),l=o=>{o.preventDefault();const c={...n,updatedAt:new Date().toISOString()};r(c)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Edit Return"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:n.status,onChange:o=>i({...n,status:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:n.notes,onChange:o=>i({...n,notes:o.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"btn-primary",children:a?"Updating...":"Update Return"})]})]})]})})},D8=()=>{const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState(!1),[l,o]=y.useState(!1),[c,d]=y.useState(null),[u,p]=y.useState(""),[m,f]=y.useState("all"),[h,x]=y.useState(!1),[g,j]=y.useState(null);y.useEffect(()=>{b()},[]);const b=async()=>{try{x(!0);const O="http://192.168.1.36:2000",[I,z,Q]=await Promise.all([fetch(`${O}/api/payment-methods`),fetch(`${O}/api/payment-transactions`),fetch(`${O}/api/payment-report`)]);if(I.ok){const P=await I.json();s(P)}if(z.ok){const P=await z.json();a(P)}if(Q.ok){const P=await Q.json();j(P)}}catch(O){console.error("Failed to load payment data:",O)}finally{x(!1)}},N=r.filter(O=>{const I=(O.transactionId||"").toLowerCase().includes(u.toLowerCase())||(O.customerName||"").toLowerCase().includes(u.toLowerCase())||(O.orderId||"").toLowerCase().includes(u.toLowerCase()),z=m==="all"||O.status===m;return I&&z}),C=O=>{switch(O){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case"refunded":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},A=async O=>{x(!0);try{const I=await fetch("/api/payment-methods",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(I.ok){const z=await I.json();s([...t,z]),i(!1)}}catch(I){console.error("Error creating payment method:",I)}finally{x(!1)}},F=async O=>{if(c){x(!0);try{const I=await fetch(`/api/payment-methods/${c.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(I.ok){const z=await I.json();s(t.map(Q=>Q.id===c.id?z:Q)),o(!1),d(null)}}catch(I){console.error("Error updating payment method:",I)}finally{x(!1)}}},w=async O=>{if(confirm("Are you sure you want to delete this payment method?")){x(!0);try{(await fetch(`/api/payment-methods/${O}`,{method:"DELETE"})).ok&&s(t.filter(z=>z.id!==O))}catch(I){console.error("Error deleting payment method:",I)}finally{x(!1)}}},_=async O=>{x(!0);try{const I=t.find(Q=>Q.id===O);if(!I)return;(await fetch(`/api/payment-methods/${O}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!I.isActive})})).ok&&s(t.map(Q=>Q.id===O?{...Q,isActive:!Q.isActive}:Q))}catch(I){console.error("Error toggling payment method:",I)}finally{x(!1)}},v=t.filter(O=>O.isActive),S=r.length,R=r.filter(O=>O.status==="completed").length,D=r.reduce((O,I)=>O+I.amount,0),V=S>0?R/S*100:0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-brand-primary",children:"Payment Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure payment methods and monitor transactions"})]}),e.jsxs("button",{onClick:()=>i(!0),className:"btn-primary",children:[e.jsx("span",{className:"text-lg mr-2",children:""}),"Add Payment Method"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Methods"}),e.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:v.length})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Transactions"}),e.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:S})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[V.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-brand-primary",children:["$",D.toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})})]}),g&&e.jsxs("div",{className:"metric-card",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Payment Report - ",g.period]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Transactions"}),e.jsx("span",{className:"font-semibold",children:g.totalTransactions})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Successful"}),e.jsx("span",{className:"font-semibold text-green-600",children:g.successfulTransactions})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Failed"}),e.jsx("span",{className:"font-semibold text-red-600",children:g.failedTransactions})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Average Amount"}),e.jsxs("span",{className:"font-semibold",children:["$",g.averageTransactionAmount.toFixed(2)]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Payment Method Breakdown"}),g.paymentMethodBreakdown.map((O,I)=>e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600",children:O.method}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-sm font-medium",children:["$",O.amount.toFixed(2)]}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",O.count,")"]})]})]},I))]})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Methods"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(O=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:O.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:O.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("p",{children:["Fee: ",O.processingFee,"%"]}),e.jsxs("p",{children:["Min: $",O.minimumAmount]}),e.jsxs("p",{children:["Max: $",O.maximumAmount]}),e.jsxs("p",{children:["Currencies: ",(O.supportedCurrencies||[]).join(", ")]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsx("button",{onClick:()=>{d(O),o(!0)},className:"text-brand-secondary hover:text-brand-primary",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>_(O.id),className:`${O.isActive?"text-orange-600 hover:text-orange-800":"text-green-600 hover:text-green-800"}`,title:O.isActive?"Deactivate":"Activate",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})}),e.jsx("button",{onClick:()=>w(O.id),className:"text-red-600 hover:text-red-800",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},O.id))})]}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search transactions...",value:u,onChange:O=>p(O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsxs("select",{value:m,onChange:O=>f(O.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"refunded",children:"Refunded"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Transaction ID"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Order ID"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Customer"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Amount"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Method"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Created"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:N.map(O=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:O.transactionId}),e.jsx("td",{className:"py-3 px-4 text-brand-primary",children:O.orderId}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:O.customerName}),e.jsxs("td",{className:"py-3 px-4 font-medium",children:["$",O.amount.toFixed(2)," ",O.currency]}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:O.paymentMethod}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C(O.status)}`,children:O.status.charAt(0).toUpperCase()+O.status.slice(1)})}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:O.createdAt}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[O.status==="completed"&&e.jsx("button",{onClick:()=>{console.log("Process refund for",O.id)},className:"text-blue-600 hover:text-blue-800",title:"Process Refund",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})}),e.jsx("button",{onClick:()=>{console.log("View details for",O.id)},className:"text-brand-secondary hover:text-brand-primary",title:"View Details",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})})]},O.id))})]})})}),n&&e.jsx(R8,{onClose:()=>i(!1),onSubmit:A,loading:h}),l&&c&&e.jsx(L8,{paymentMethod:c,onClose:()=>{o(!1),d(null)},onSubmit:F,loading:h})]})},R8=({onClose:t,onSubmit:s,loading:r})=>{const[a,n]=y.useState({name:"",type:"credit_card",processingFee:0,minimumAmount:1,maximumAmount:1e4,supportedCurrencies:["USD"],isActive:!0}),i=l=>{l.preventDefault();const o={...a,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};s(o)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Add Payment Method"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method Name"}),e.jsx("input",{type:"text",required:!0,value:a.name,onChange:l=>n({...a,name:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:a.type,onChange:l=>n({...a,type:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"credit_card",children:"Credit Card"}),e.jsx("option",{value:"debit_card",children:"Debit Card"}),e.jsx("option",{value:"paypal",children:"PayPal"}),e.jsx("option",{value:"stripe",children:"Stripe"}),e.jsx("option",{value:"razorpay",children:"Razorpay"}),e.jsx("option",{value:"cash_on_delivery",children:"Cash on Delivery"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Processing Fee (%)"}),e.jsx("input",{type:"number",required:!0,min:"0",step:"0.1",value:a.processingFee,onChange:l=>n({...a,processingFee:parseFloat(l.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Amount"}),e.jsx("input",{type:"number",required:!0,min:"0",value:a.minimumAmount,onChange:l=>n({...a,minimumAmount:parseFloat(l.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Amount"}),e.jsx("input",{type:"number",required:!0,min:"0",value:a.maximumAmount,onChange:l=>n({...a,maximumAmount:parseFloat(l.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:a.isActive,onChange:l=>n({...a,isActive:l.target.checked}),className:"h-4 w-4 text-brand-secondary focus:ring-brand-secondary border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r,className:"btn-primary",children:r?"Creating...":"Create Payment Method"})]})]})]})})},L8=({paymentMethod:t,onClose:s,onSubmit:r,loading:a})=>{const[n,i]=y.useState({name:t.name,processingFee:t.processingFee,minimumAmount:t.minimumAmount,maximumAmount:t.maximumAmount,isActive:t.isActive}),l=o=>{o.preventDefault();const c={...n,updatedAt:new Date().toISOString()};r(c)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Edit Payment Method"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method Name"}),e.jsx("input",{type:"text",required:!0,value:n.name,onChange:o=>i({...n,name:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Processing Fee (%)"}),e.jsx("input",{type:"number",required:!0,min:"0",step:"0.1",value:n.processingFee,onChange:o=>i({...n,processingFee:parseFloat(o.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Amount"}),e.jsx("input",{type:"number",required:!0,min:"0",value:n.minimumAmount,onChange:o=>i({...n,minimumAmount:parseFloat(o.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Amount"}),e.jsx("input",{type:"number",required:!0,min:"0",value:n.maximumAmount,onChange:o=>i({...n,maximumAmount:parseFloat(o.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:n.isActive,onChange:o=>i({...n,isActive:o.target.checked}),className:"h-4 w-4 text-brand-secondary focus:ring-brand-secondary border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"btn-primary",children:a?"Updating...":"Update Payment Method"})]})]})]})})},O8="http://192.168.1.36:2000";class I8{constructor(){Sa(this,"baseURL");this.baseURL=O8}async apiCall(s,r={}){try{const a=localStorage.getItem("admin_token"),n=await fetch(`${this.baseURL}${s}`,{...r,headers:{"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`},...r.headers}}),i=await n.json();return n.ok?{success:!0,data:i.data||i,message:i.message}:{success:!1,error:i.message||"API call failed"}}catch(a){return console.error("API call error:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async getUserProfiles(s=1,r=10,a=""){return this.apiCall(`/api/admin/users/profiles?page=${s}&limit=${r}&search=${a}`)}async getUserProfile(s){return this.apiCall(`/api/admin/users/profiles/${s}`)}async updateUserProfile(s,r){return this.apiCall(`/api/admin/users/profiles/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteUserProfile(s){return this.apiCall(`/api/admin/users/profiles/${s}`,{method:"DELETE"})}async getNotifications(s=1,r=10,a={}){const n=new URLSearchParams({page:s.toString(),limit:r.toString(),...a});return this.apiCall(`/api/admin/notifications?${n}`)}async createNotification(s){return this.apiCall("/api/admin/notifications",{method:"POST",body:JSON.stringify(s)})}async updateNotification(s,r){return this.apiCall(`/api/admin/notifications/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteNotification(s){return this.apiCall(`/api/admin/notifications/${s}`,{method:"DELETE"})}async sendNotification(s){return this.apiCall(`/api/admin/notifications/${s}/send`,{method:"POST"})}async getLoyaltyPrograms(){return this.apiCall("/api/admin/loyalty/programs")}async createLoyaltyProgram(s){return this.apiCall("/api/admin/loyalty/programs",{method:"POST",body:JSON.stringify(s)})}async updateLoyaltyProgram(s,r){return this.apiCall(`/api/admin/loyalty/programs/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteLoyaltyProgram(s){return this.apiCall(`/api/admin/loyalty/programs/${s}`,{method:"DELETE"})}async getLoyaltyTiers(){return this.apiCall("/api/admin/loyalty/tiers")}async getLoyaltyUsers(s=1,r=10){return this.apiCall(`/api/admin/loyalty/users?page=${s}&limit=${r}`)}async adjustUserPoints(s,r,a){return this.apiCall(`/api/admin/loyalty/users/${s}/adjust`,{method:"POST",body:JSON.stringify({points:r,reason:a})})}async getStaticPages(){return this.apiCall("/api/admin/static-pages")}async createStaticPage(s){return this.apiCall("/api/admin/static-pages",{method:"POST",body:JSON.stringify(s)})}async updateStaticPage(s,r){return this.apiCall(`/api/admin/static-pages/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteStaticPage(s){return this.apiCall(`/api/admin/static-pages/${s}`,{method:"DELETE"})}async toggleStaticPageStatus(s,r){return this.apiCall(`/api/admin/static-pages/${s}/toggle`,{method:"PUT",body:JSON.stringify({is_active:r})})}async getCommunityPosts(s=1,r=10,a={}){const n=new URLSearchParams({page:s.toString(),limit:r.toString(),...a});return this.apiCall(`/api/admin/community/posts?${n}`)}async getCommunityComments(s=1,r=10,a={}){const n=new URLSearchParams({page:s.toString(),limit:r.toString(),...a});return this.apiCall(`/api/admin/community/comments?${n}`)}async updatePostStatus(s,r){return this.apiCall(`/api/admin/community/posts/${s}/status`,{method:"PUT",body:JSON.stringify({status:r})})}async updateCommentStatus(s,r){return this.apiCall(`/api/admin/community/comments/${s}/status`,{method:"PUT",body:JSON.stringify({status:r})})}async deletePost(s){return this.apiCall(`/api/admin/community/posts/${s}`,{method:"DELETE"})}async deleteComment(s){return this.apiCall(`/api/admin/community/comments/${s}`,{method:"DELETE"})}async getCartItems(s=1,r=10,a={}){const n=new URLSearchParams({page:s.toString(),limit:r.toString(),...a});return this.apiCall(`/api/admin/cart/items?${n}`)}async updateCartItemQuantity(s,r){return this.apiCall(`/api/admin/cart/items/${s}`,{method:"PUT",body:JSON.stringify({quantity:r})})}async removeCartItem(s){return this.apiCall(`/api/admin/cart/items/${s}`,{method:"DELETE"})}async getCheckoutSessions(s=1,r=10,a={}){const n=new URLSearchParams({page:s.toString(),limit:r.toString(),...a});return this.apiCall(`/api/admin/checkout/sessions?${n}`)}async updateSessionStatus(s,r){return this.apiCall(`/api/admin/checkout/sessions/${s}/status`,{method:"PUT",body:JSON.stringify({status:r})})}async getDashboardStats(){return this.apiCall("/api/admin/dashboard/stats")}async getUserAnalytics(s="30d"){return this.apiCall(`/api/admin/analytics/users?range=${s}`)}async getOrderAnalytics(s="30d"){return this.apiCall(`/api/admin/analytics/orders?range=${s}`)}async getRevenueAnalytics(s="30d"){return this.apiCall(`/api/admin/analytics/revenue?range=${s}`)}async subscribeToUpdates(s){console.log("Subscribing to real-time updates...")}async unsubscribeFromUpdates(){console.log("Unsubscribing from real-time updates...")}async bulkUpdateUserStatus(s,r){return this.apiCall("/api/admin/users/bulk-status",{method:"PUT",body:JSON.stringify({userIds:s,status:r})})}async bulkSendNotifications(s,r){return this.apiCall("/api/admin/notifications/bulk-send",{method:"POST",body:JSON.stringify({userIds:s,notificationData:r})})}async bulkDeletePosts(s){return this.apiCall("/api/admin/community/posts/bulk-delete",{method:"DELETE",body:JSON.stringify({postIds:s})})}async exportUserData(s="csv"){return this.apiCall(`/api/admin/users/export?format=${s}`)}async importUserData(s){const r=new FormData;return r.append("file",s),this.apiCall("/api/admin/users/import",{method:"POST",body:r,headers:{}})}async getSystemHealth(){return this.apiCall("/api/admin/system/health")}async getApiStatus(){return this.apiCall("/api/admin/system/api-status")}}const Up=new I8;function M8(){const[t,s]=y.useState([]),[r,a]=y.useState(!0),[n,i]=y.useState(""),[l,o]=y.useState("all"),[c,d]=y.useState(null),[u,p]=y.useState(!1),[m,f]=y.useState(!1);y.useEffect(()=>{h()},[]);const h=async()=>{try{a(!0);const C=await Up.getUserProfiles();C.success&&C.data?s(C.data.profiles||[]):(console.error("Failed to fetch user profiles:",C.error),s([]))}catch(C){console.error("Error fetching user profiles:",C),s([])}finally{a(!1)}},x=t.filter(C=>{const A=C.name.toLowerCase().includes(n.toLowerCase())||C.email.toLowerCase().includes(n.toLowerCase()),F=l==="all"||l==="verified"&&C.is_verified||l==="unverified"&&!C.is_verified;return A&&F}),g=C=>{d(C),p(!0)},j=C=>{d(C),f(!0)},b=async C=>{if(confirm("Are you sure you want to delete this user profile?"))try{(await fetch(`/api/admin/users/profiles/${C}`,{method:"DELETE"})).ok?s(t.filter(F=>F.id!==C)):alert("Failed to delete profile")}catch(A){console.error("Error deleting profile:",A),alert("Error deleting profile")}},N=async C=>{try{const A=await Up.updateUserProfile(C.id,C);A.success?(s(t.map(F=>F.id===C.id?C:F)),p(!1),d(null)):alert("Failed to update profile: "+A.error)}catch(A){console.error("Error updating profile:",A),alert("Error updating profile")}};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"User Profiles Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage user profiles, preferences, and account settings"})]}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:n,onChange:C=>i(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("select",{value:l,onChange:C=>o(C.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Users"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"unverified",children:"Unverified"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(nt,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(ur,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Verified Users"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(C=>C.is_verified).length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(si,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.reduce((C,A)=>C+A.total_orders,0)})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(ur,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Loyalty Points"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.reduce((C,A)=>C+A.loyalty_points,0)})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Orders"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Loyalty Points"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Member Since"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:x.map(C=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-full",src:C.profile_photo||"/default-avatar.png",alt:C.name})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:C.name}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",C.id]})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:C.email}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:C.phone})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${C.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:C.is_verified?"Verified":"Unverified"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:C.total_orders}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:C.loyalty_points}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(C.member_since).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>j(C),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(nt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>g(C),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:e.jsx(xr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>b(C.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},C.id))})]})})}),u&&c&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Edit User Profile"}),e.jsxs("form",{onSubmit:C=>{C.preventDefault(),N(c)},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name"}),e.jsx("input",{type:"text",value:c.name,onChange:C=>d({...c,name:C.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),e.jsx("input",{type:"email",value:c.email,onChange:C=>d({...c,email:C.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Phone"}),e.jsx("input",{type:"tel",value:c.phone,onChange:C=>d({...c,phone:C.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Loyalty Points"}),e.jsx("input",{type:"number",value:c.loyalty_points,onChange:C=>d({...c,loyalty_points:parseInt(C.target.value)||0}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.is_verified,onChange:C=>d({...c,is_verified:C.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-900 dark:text-white",children:"Verified User"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Update Profile"})]})]})]})})}),m&&c&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"User Profile Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{className:"h-16 w-16 rounded-full",src:c.profile_photo||"/default-avatar.png",alt:c.name}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:c.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Member since ",new Date(c.member_since).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:c.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Phone"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:c.phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Orders"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:c.total_orders})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Loyalty Points"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:c.loyalty_points})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Address"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[c.address.street,", ",c.address.city,", ",c.address.state," ",c.address.zip]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Preferences"}),e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[e.jsxs("p",{children:["Theme: ",c.preferences.theme]}),e.jsxs("p",{children:["Notifications: ",c.preferences.notifications?"Enabled":"Disabled"]}),e.jsxs("p",{children:["Newsletter: ",c.preferences.newsletter?"Subscribed":"Not Subscribed"]})]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Close"})})]})})})]})}function B8(){const[t,s]=y.useState([]),[r,a]=y.useState(!0),[n,i]=y.useState(""),[l,o]=y.useState("all"),[c,d]=y.useState("all"),[u,p]=y.useState(null),[m,f]=y.useState(!1),[h,x]=y.useState(!1),[g,j]=y.useState(!1);y.useEffect(()=>{b()},[]);const b=async()=>{try{a(!0);const D=await fetch("/api/admin/notifications");if(D.ok){const V=await D.json();s(V.notifications||[])}else console.error("Failed to fetch notifications"),s([])}catch(D){console.error("Error fetching notifications:",D),s([])}finally{a(!1)}},N=t.filter(D=>{const V=D.title.toLowerCase().includes(n.toLowerCase())||D.user_name.toLowerCase().includes(n.toLowerCase())||D.message.toLowerCase().includes(n.toLowerCase()),O=l==="all"||D.type===l,I=c==="all"||D.status===c;return V&&O&&I}),C=async D=>{try{const V=await fetch("/api/admin/notifications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(V.ok){const O=await V.json();s([O,...t]),f(!1)}else alert("Failed to create notification")}catch(V){console.error("Error creating notification:",V),alert("Error creating notification")}},A=D=>{p(D),x(!0)},F=D=>{p(D),j(!0)},w=async D=>{if(confirm("Are you sure you want to delete this notification?"))try{(await fetch(`/api/admin/notifications/${D}`,{method:"DELETE"})).ok?s(t.filter(O=>O.id!==D)):alert("Failed to delete notification")}catch(V){console.error("Error deleting notification:",V),alert("Error deleting notification")}},_=async D=>{try{(await fetch(`/api/admin/notifications/${D}/send`,{method:"POST"})).ok?s(t.map(O=>O.id===D?{...O,status:"sent",sent_at:new Date().toISOString()}:O)):alert("Failed to send notification")}catch(V){console.error("Error sending notification:",V),alert("Error sending notification")}},v=D=>{switch(D){case"order":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"promotion":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"system":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";case"loyalty":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"affiliate":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},S=D=>{switch(D){case"sent":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"failed":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},R=D=>{switch(D){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"User Notifications Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage and send notifications to users"})]}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search notifications...",value:n,onChange:D=>i(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("select",{value:l,onChange:D=>o(D.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"order",children:"Order"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"system",children:"System"}),e.jsx("option",{value:"loyalty",children:"Loyalty"}),e.jsx("option",{value:"affiliate",children:"Affiliate"})]}),e.jsxs("select",{value:c,onChange:D=>d(D.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsxs("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500",children:[e.jsx(sa,{className:"h-4 w-4 inline mr-2"}),"Send Notification"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(Da,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Notifications"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(sa,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Sent"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(D=>D.status==="sent").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(Mr,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(D=>D.status==="pending").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900 rounded-lg",children:e.jsx(ts,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Failed"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(D=>D.status==="failed").length})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Notification"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:N.map(D=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center",children:e.jsx(pa,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:D.user_name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:D.user_email})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:D.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:D.message})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v(D.type)}`,children:D.type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${R(D.priority)}`,children:D.priority})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${S(D.status)}`,children:D.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(D.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>F(D),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(nt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>A(D),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:e.jsx(xr,{className:"h-4 w-4"})}),D.status==="pending"&&e.jsx("button",{onClick:()=>_(D.id),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:e.jsx(sa,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>w(D.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},D.id))})]})})}),m&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Send New Notification"}),e.jsxs("form",{onSubmit:D=>{D.preventDefault();const V=new FormData(D.target);C({user_id:parseInt(V.get("user_id")),title:V.get("title"),message:V.get("message"),type:V.get("type"),priority:V.get("priority"),status:"pending"})},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"User ID"}),e.jsx("input",{type:"number",name:"user_id",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Title"}),e.jsx("input",{type:"text",name:"title",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Message"}),e.jsx("textarea",{name:"message",rows:3,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Type"}),e.jsxs("select",{name:"type",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"order",children:"Order"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"system",children:"System"}),e.jsx("option",{value:"loyalty",children:"Loyalty"}),e.jsx("option",{value:"affiliate",children:"Affiliate"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Priority"}),e.jsxs("select",{name:"priority",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Send Notification"})]})]})]})})}),g&&u&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Notification Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"User"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[u.user_name," (",u.user_email,")"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Title"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:u.title})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Message"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:u.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Type"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v(u.type)}`,children:u.type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Priority"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${R(u.priority)}`,children:u.priority})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${S(u.status)}`,children:u.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Created"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(u.created_at).toLocaleString()})]}),u.sent_at&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Sent At"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(u.sent_at).toLocaleString()})]}),u.read_at&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Read At"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(u.read_at).toLocaleString()})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Close"})})]})})})]})}function U8(){const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState([]),[l,o]=y.useState(!0),[c,d]=y.useState(""),[u,p]=y.useState("programs"),[m,f]=y.useState(null),[h,x]=y.useState(null),[g,j]=y.useState(!1),[b,N]=y.useState(!1);y.useEffect(()=>{C()},[]);const C=async()=>{try{o(!0);const[v,S,R]=await Promise.all([fetch("/api/admin/loyalty/programs"),fetch("/api/admin/loyalty/tiers"),fetch("/api/admin/loyalty/users")]);if(v.ok){const D=await v.json();s(D.programs||[])}if(S.ok){const D=await S.json();a(D.tiers||[])}if(R.ok){const D=await R.json();i(D.users||[])}}catch(v){console.error("Error fetching loyalty data:",v)}finally{o(!1)}},A=async v=>{try{const S=await fetch("/api/admin/loyalty/programs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(S.ok){const R=await S.json();s([R,...t]),j(!1)}else alert("Failed to create loyalty program")}catch(S){console.error("Error creating loyalty program:",S),alert("Error creating loyalty program")}},F=async v=>{if(confirm("Are you sure you want to delete this loyalty program?"))try{(await fetch(`/api/admin/loyalty/programs/${v}`,{method:"DELETE"})).ok?s(t.filter(R=>R.id!==v)):alert("Failed to delete loyalty program")}catch(S){console.error("Error deleting loyalty program:",S),alert("Error deleting loyalty program")}},w=async(v,S,R)=>{try{(await fetch(`/api/admin/loyalty/users/${v}/adjust`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({points:S,reason:R})})).ok?C():alert("Failed to adjust user points")}catch(D){console.error("Error adjusting user points:",D),alert("Error adjusting user points")}},_=n.filter(v=>v.user_name.toLowerCase().includes(c.toLowerCase())||v.user_email.toLowerCase().includes(c.toLowerCase()));return l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Loyalty Program Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage loyalty programs, tiers, and user points"})]}),e.jsx("div",{children:e.jsx("div",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"programs",label:"Loyalty Programs",icon:N0},{id:"tiers",label:"Tiers",icon:kf},{id:"users",label:"User Points",icon:Pt}].map(v=>e.jsxs("button",{onClick:()=>p(v.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm transition-colors ${u===v.id?"":"border-transparent"}`,style:u===v.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx(v.icon,{className:"h-4 w-4 mr-2"}),v.label]},v.id))})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(N0,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Programs"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(v=>v.is_active).length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(kf,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Loyalty Tiers"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(ur,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Points"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:n.reduce((v,S)=>v+S.total_points,0)})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(zt,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:n.filter(v=>v.total_points>0).length})]})]})})]}),u==="programs"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search loyalty programs...",value:c,onChange:v=>d(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("button",{onClick:()=>j(!0),className:"ml-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500",children:[e.jsx(N0,{className:"h-4 w-4 inline mr-2"}),"Create Program"]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Program"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Points Rate"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Min Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Expiry"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.map(v=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:v.name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:v.description})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[v.points_per_rupee," pts/"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["",v.min_order_amount]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[v.expiry_days," days"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:v.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{f(v),N(!0)},className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:e.jsx(xr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>F(v.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},v.id))})]})})})]}),u==="users"&&e.jsxs("div",{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:c,onChange:v=>d(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total Points"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Available Points"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Redeemed Points"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Tier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Next Tier"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:_.map(v=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:v.user_name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:v.user_email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:v.total_points}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:v.available_points}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:v.redeemed_points}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:v.tier})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[v.next_tier_points," pts"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:()=>{const S=prompt("Enter points to adjust (positive to add, negative to subtract):"),R=prompt("Enter reason for adjustment:");S&&R&&w(v.user_id,parseInt(S),R)},className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:e.jsx(xr,{className:"h-4 w-4"})})})]},v.user_id))})]})})})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Create Loyalty Program"}),e.jsxs("form",{onSubmit:v=>{v.preventDefault();const S=new FormData(v.target);A({name:S.get("name"),description:S.get("description"),points_per_rupee:parseFloat(S.get("points_per_rupee")),min_order_amount:parseFloat(S.get("min_order_amount")),max_points_per_order:parseFloat(S.get("max_points_per_order")),expiry_days:parseInt(S.get("expiry_days")),is_active:!0})},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Program Name"}),e.jsx("input",{type:"text",name:"name",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),e.jsx("textarea",{name:"description",rows:3,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Points per Rupee"}),e.jsx("input",{type:"number",step:"0.1",name:"points_per_rupee",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Minimum Order Amount"}),e.jsx("input",{type:"number",name:"min_order_amount",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Max Points per Order"}),e.jsx("input",{type:"number",name:"max_points_per_order",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Points Expiry (Days)"}),e.jsx("input",{type:"number",name:"expiry_days",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Create Program"})]})]})]})})})]})}function $8(){const[t,s]=y.useState([]),[r,a]=y.useState(!0),[n,i]=y.useState(""),[l,o]=y.useState("all"),[c,d]=y.useState(null),[u,p]=y.useState(!1),[m,f]=y.useState(!1),[h,x]=y.useState(!1);y.useEffect(()=>{g()},[]);const g=async()=>{try{a(!0);const F=await fetch("/api/admin/static-pages");if(F.ok){const w=await F.json();s(w.pages||[])}else console.error("Failed to fetch static pages"),s([])}catch(F){console.error("Error fetching static pages:",F),s([])}finally{a(!1)}},j=t.filter(F=>{const w=F.title.toLowerCase().includes(n.toLowerCase())||F.slug.toLowerCase().includes(n.toLowerCase())||F.content.toLowerCase().includes(n.toLowerCase()),_=l==="all"||F.page_type===l;return w&&_}),b=async(F,w)=>{try{(await fetch(`/api/admin/static-pages/${F}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)})).ok?(s(t.map(v=>v.id===F?{...v,...w}:v)),p(!1),d(null)):alert("Failed to update static page")}catch(_){console.error("Error updating static page:",_),alert("Error updating static page")}},N=async F=>{if(confirm("Are you sure you want to delete this static page?"))try{(await fetch(`/api/admin/static-pages/${F}`,{method:"DELETE"})).ok?s(t.filter(_=>_.id!==F)):alert("Failed to delete static page")}catch(w){console.error("Error deleting static page:",w),alert("Error deleting static page")}},C=async(F,w)=>{try{(await fetch(`/api/admin/static-pages/${F}/toggle`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!w})})).ok?s(t.map(v=>v.id===F?{...v,is_active:!w}:v)):alert("Failed to toggle page status")}catch(_){console.error("Error toggling page status:",_),alert("Error toggling page status")}},A=F=>{switch(F){case"about":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"faq":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"policy":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"terms":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"shipping":return"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200";case"refund":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"privacy":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";case"contact":return"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200";case"custom":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Static Pages Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage static pages like About Us, FAQ, Policies, etc."})]}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search pages...",value:n,onChange:F=>i(F.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("select",{value:l,onChange:F=>o(F.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"about",children:"About"}),e.jsx("option",{value:"faq",children:"FAQ"}),e.jsx("option",{value:"policy",children:"Policy"}),e.jsx("option",{value:"terms",children:"Terms"}),e.jsx("option",{value:"shipping",children:"Shipping"}),e.jsx("option",{value:"refund",children:"Refund"}),e.jsx("option",{value:"privacy",children:"Privacy"}),e.jsx("option",{value:"contact",children:"Contact"}),e.jsx("option",{value:"custom",children:"Custom"})]}),e.jsxs("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500",children:[e.jsx(gs,{className:"h-4 w-4 inline mr-2"}),"Create Page"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(gs,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Pages"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(Gn,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Pages"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(F=>F.is_active).length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(Ns,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Policy Pages"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(F=>["policy","terms","privacy","shipping","refund"].includes(F.page_type)).length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(gs,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Custom Pages"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(F=>F.page_type==="custom").length})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Page"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Slug"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Last Updated"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:j.map(F=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:F.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:F.meta_description})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${A(F.page_type)}`,children:F.page_type})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["/",F.slug]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>C(F.id,F.is_active),className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full cursor-pointer ${F.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:F.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(F.updated_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{d(F),x(!0)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(nt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{d(F),p(!0)},className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:e.jsx(xr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>N(F.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},F.id))})]})})}),u&&c&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-10 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Edit Static Page"}),e.jsxs("form",{onSubmit:F=>{F.preventDefault();const w=new FormData(F.target);b(c.id,{title:w.get("title"),slug:w.get("slug"),content:w.get("content"),meta_description:w.get("meta_description"),page_type:w.get("page_type"),is_active:w.get("is_active")==="on"})},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Page Title"}),e.jsx("input",{type:"text",name:"title",defaultValue:c.title,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Slug"}),e.jsx("input",{type:"text",name:"slug",defaultValue:c.slug,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Page Type"}),e.jsxs("select",{name:"page_type",defaultValue:c.page_type,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"about",children:"About"}),e.jsx("option",{value:"faq",children:"FAQ"}),e.jsx("option",{value:"policy",children:"Policy"}),e.jsx("option",{value:"terms",children:"Terms"}),e.jsx("option",{value:"shipping",children:"Shipping"}),e.jsx("option",{value:"refund",children:"Refund"}),e.jsx("option",{value:"privacy",children:"Privacy"}),e.jsx("option",{value:"contact",children:"Contact"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Meta Description"}),e.jsx("textarea",{name:"meta_description",rows:2,defaultValue:c.meta_description,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Content"}),e.jsx("textarea",{name:"content",rows:10,defaultValue:c.content,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",name:"is_active",defaultChecked:c.is_active,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-900 dark:text-white",children:"Active Page"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:[e.jsx(Ms,{className:"h-4 w-4 inline mr-2"}),"Update Page"]})]})]})]})})}),h&&c&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-10 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["Page Preview: ",c.title]}),e.jsxs("div",{className:"prose max-w-none dark:prose-invert",children:[e.jsx("h1",{children:c.title}),e.jsx("div",{dangerouslySetInnerHTML:{__html:c.content}})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Close Preview"})})]})})})]})}function z8(){const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState(!0),[l,o]=y.useState(""),[c,d]=y.useState("all"),[u,p]=y.useState("posts"),[m,f]=y.useState(null),[h,x]=y.useState(!1);y.useEffect(()=>{g()},[]);const g=async()=>{try{i(!0);const[_,v]=await Promise.all([fetch("/api/admin/community/posts"),fetch("/api/admin/community/comments")]);if(_.ok){const S=await _.json();s(S.posts||[])}if(v.ok){const S=await v.json();a(S.comments||[])}}catch(_){console.error("Error fetching community data:",_)}finally{i(!1)}},j=t.filter(_=>{const v=_.title.toLowerCase().includes(l.toLowerCase())||_.content.toLowerCase().includes(l.toLowerCase())||_.user_name.toLowerCase().includes(l.toLowerCase()),S=c==="all"||_.status===c;return v&&S}),b=r.filter(_=>{const v=_.content.toLowerCase().includes(l.toLowerCase())||_.user_name.toLowerCase().includes(l.toLowerCase()),S=c==="all"||_.status===c;return v&&S}),N=async(_,v)=>{try{(await fetch(`/api/admin/community/posts/${_}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:v})})).ok?s(t.map(R=>R.id===_?{...R,status:v}:R)):alert("Failed to update post status")}catch(S){console.error("Error updating post status:",S),alert("Error updating post status")}},C=async(_,v)=>{try{(await fetch(`/api/admin/community/comments/${_}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:v})})).ok?a(r.map(R=>R.id===_?{...R,status:v}:R)):alert("Failed to update comment status")}catch(S){console.error("Error updating comment status:",S),alert("Error updating comment status")}},A=async _=>{if(confirm("Are you sure you want to delete this post?"))try{(await fetch(`/api/admin/community/posts/${_}`,{method:"DELETE"})).ok?s(t.filter(S=>S.id!==_)):alert("Failed to delete post")}catch(v){console.error("Error deleting post:",v),alert("Error deleting post")}},F=async _=>{if(confirm("Are you sure you want to delete this comment?"))try{(await fetch(`/api/admin/community/comments/${_}`,{method:"DELETE"})).ok?a(r.filter(S=>S.id!==_)):alert("Failed to delete comment")}catch(v){console.error("Error deleting comment:",v),alert("Error deleting comment")}},w=_=>{switch(_){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"flagged":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Community Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage community posts, comments, and user interactions"})]}),e.jsx("div",{children:e.jsx("div",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"posts",label:"Posts",icon:fs},{id:"comments",label:"Comments",icon:Pt}].map(_=>e.jsxs("button",{onClick:()=>p(_.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm transition-colors ${u===_.id?"":"border-transparent"}`,style:u===_.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx(_.icon,{className:"h-4 w-4 mr-2"}),_.label]},_.id))})})}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search community content...",value:l,onChange:_=>o(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("select",{value:c,onChange:_=>d(_.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"flagged",children:"Flagged"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(fs,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Posts"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(Pt,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Comments"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(A2,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Flagged Content"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(_=>_.status==="flagged").length+r.filter(_=>_.status==="flagged").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Mi,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Likes"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.reduce((_,v)=>_+v.likes_count,0)+r.reduce((_,v)=>_+v.likes_count,0)})]})]})})]}),u==="posts"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Post"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Author"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Engagement"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:j.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:_.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:_.content}),_.tags.length>0&&e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:_.tags.slice(0,3).map((v,S)=>e.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:["#",v]},S))})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:_.user_name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:_.user_email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(Mi,{className:"h-4 w-4 mr-1"}),_.likes_count]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(fs,{className:"h-4 w-4 mr-1"}),_.comments_count]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(_.status)}`,children:_.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(_.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{f(_),x(!0)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(nt,{className:"h-4 w-4"})}),_.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>N(_.id,"active"),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:e.jsx(Vt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>N(_.id,"rejected"),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Sf,{className:"h-4 w-4"})})]}),e.jsx("button",{onClick:()=>A(_.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},_.id))})]})})}),u==="comments"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Comment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Author"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Post ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Likes"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:b.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white truncate max-w-xs",children:_.content})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:_.user_name})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["#",_.post_id]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(Mi,{className:"h-4 w-4 mr-1"}),_.likes_count]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(_.status)}`,children:_.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(_.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[_.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>C(_.id,"active"),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:e.jsx(Vt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>C(_.id,"rejected"),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Sf,{className:"h-4 w-4"})})]}),e.jsx("button",{onClick:()=>F(_.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},_.id))})]})})}),h&&m&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["Post Details: ",m.title]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Author"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[m.user_name," (",m.user_email,")"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(m.status)}`,children:m.status})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Content"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 dark:bg-gray-700 rounded-md",children:e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:m.content})})]}),m.image_url&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Image"}),e.jsx("img",{src:m.image_url,alt:"Post image",className:"mt-1 max-w-xs rounded-md"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Likes"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:m.likes_count})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Comments"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:m.comments_count})]})]}),m.tags.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Tags"}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:m.tags.map((_,v)=>e.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:["#",_]},v))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Created"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(m.created_at).toLocaleString()})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Close"})})]})})})]})}function Cj({imageUrl:t,aspectRatio:s,onCrop:r,onCancel:a}){var D,V;const[n,i]=y.useState({x:0,y:0,width:0,height:0}),[l,o]=y.useState(!1),[c,d]=y.useState({x:0,y:0}),[u,p]=y.useState({width:0,height:0}),[m,f]=y.useState({width:0,height:0}),[h,x]=y.useState(null),g=y.useRef(null),j=y.useRef(null);y.useEffect(()=>{const O=new Image;O.crossOrigin="anonymous",O.onerror=I=>{console.error("Error loading image:",I);const z=new Image;z.onload=()=>{if(p({width:z.width,height:z.height}),g.current){const Q=g.current.clientWidth-40,P=g.current.clientHeight-40,k=Q/z.width,X=P/z.height,se=Math.min(k,X,1);f({width:z.width*se,height:z.height*se});const B=Math.min(z.width,z.height*s),L=B/s;i({x:(z.width-B)/2,y:(z.height-L)/2,width:B,height:L})}},z.onerror=()=>{console.error("Failed to load image even without CORS")},z.src=t},O.onload=()=>{if(p({width:O.width,height:O.height}),g.current){const I=g.current.clientWidth-40,z=g.current.clientHeight-40,Q=I/O.width,P=z/O.height,k=Math.min(Q,P,1);f({width:O.width*k,height:O.height*k});const X=Math.min(O.width,O.height*s),se=X/s;i({x:(O.width-X)/2,y:(O.height-se)/2,width:X,height:se})}},O.src=t},[t,s]);const b=()=>{if(!u.width||!m.width)return{x:0,y:0,width:0,height:0};const O=m.width/u.width;return{x:n.x*O,y:n.y*O,width:n.width*O,height:n.height*O}},N=O=>{if(!g.current)return;const I=O.target;if(I.classList.contains("resize-handle")){const X=I.getAttribute("data-handle");if(X){x(X),o(!0);const se=g.current.getBoundingClientRect(),B=m.width/u.width,L=(O.clientX-se.left-(se.width-m.width)/2)/B,H=(O.clientY-se.top-(se.height-m.height)/2)/B;d({x:L,y:H})}return}const z=g.current.getBoundingClientRect();b();const Q=m.width/u.width,P=(O.clientX-z.left-(z.width-m.width)/2)/Q,k=(O.clientY-z.top-(z.height-m.height)/2)/Q;P>=n.x&&P<=n.x+n.width&&k>=n.y&&k<=n.y+n.height&&(o(!0),d({x:P-n.x,y:k-n.y}))},C=O=>{if(!l||!g.current)return;const I=g.current.getBoundingClientRect(),z=m.width/u.width,Q=(O.clientX-I.left-(I.width-m.width)/2)/z,P=(O.clientY-I.top-(I.height-m.height)/2)/z;if(h){let k={...n};if(h==="se"){const X=Q-n.x,se=X/s;k={x:n.x,y:n.y,width:Math.min(X,u.width-n.x),height:Math.min(se,u.height-n.y)},k.y+k.height>u.height&&(k.height=u.height-k.y,k.width=k.height*s),k.x+k.width>u.width&&(k.width=u.width-k.x,k.height=k.width/s)}else if(h==="sw"){const X=n.x+n.width-Q,se=X/s;k={x:Math.max(0,Q),y:n.y,width:Math.min(X,n.x+n.width),height:Math.min(se,u.height-n.y)},k.y+k.height>u.height&&(k.height=u.height-k.y,k.width=k.height*s,k.x=n.x+n.width-k.width)}else if(h==="ne"){const X=Q-n.x,se=X/s;k={x:n.x,y:Math.max(0,n.y+n.height-se),width:Math.min(X,u.width-n.x),height:Math.min(se,n.y+n.height)},k.y<0&&(k.y=0,k.height=n.y+n.height,k.width=k.height*s)}else if(h==="nw"){const X=n.x+n.width-Q,se=X/s;k={x:Math.max(0,Q),y:Math.max(0,n.y+n.height-se),width:Math.min(X,n.x+n.width),height:Math.min(se,n.y+n.height)},k.y<0&&(k.y=0,k.height=n.y+n.height,k.width=k.height*s,k.x=n.x+n.width-k.width),k.x<0&&(k.x=0,k.width=n.x+n.width,k.height=k.width/s,k.y=n.y+n.height-k.height)}i(k)}else{const k=Math.max(0,Math.min(Q-c.x,u.width-n.width)),X=Math.max(0,Math.min(P-c.y,u.height-n.height));i(se=>({...se,x:k,y:X}))}},A=()=>{o(!1),x(null)},F=()=>{if(!n.width||!n.height||n.width<=0||n.height<=0){console.error("Invalid crop dimensions:",n),alert("Please wait for the image to load completely before cropping.");return}if(!u.width||!u.height){console.error("Image size not loaded yet"),alert("Please wait for the image to load completely before cropping.");return}const O=new Image;O.crossOrigin="anonymous",O.onerror=I=>{console.error("Error loading image for cropping:",I);const z=new Image;z.onload=()=>{try{const Q=document.createElement("canvas"),P=Q.getContext("2d");if(!P){console.error("Failed to get canvas context");return}Q.width=n.width,Q.height=n.height,P.drawImage(z,n.x,n.y,n.width,n.height,0,0,n.width,n.height),Q.toBlob(k=>{k?r(k):(console.error("Failed to create blob from canvas"),alert("Failed to crop image. Please try again."))},"image/jpeg",.95)}catch(Q){console.error("Error during crop:",Q),alert("Failed to crop image. Please try again.")}},z.onerror=()=>{console.error("Failed to load image even without CORS"),alert("Failed to load image for cropping. Please try again.")},z.src=t},O.onload=()=>{try{const I=document.createElement("canvas"),z=I.getContext("2d");if(!z){console.error("Failed to get canvas context");return}I.width=n.width,I.height=n.height,z.drawImage(O,n.x,n.y,n.width,n.height,0,0,n.width,n.height),I.toBlob(Q=>{Q?r(Q):(console.error("Failed to create blob from canvas"),alert("Failed to crop image. Please try again."))},"image/jpeg",.95)}catch(I){console.error("Error during crop:",I),alert("Failed to crop image. Please try again.")}},O.src=t},w=b(),_=((D=g.current)==null?void 0:D.clientWidth)||800,v=((V=g.current)==null?void 0:V.clientHeight)||600,S=(_-m.width)/2,R=(v-m.height)/2;return e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Crop Image (",s===1?"1:1":s===16/9?"16:9":s===4/5?"4:5":s===5/4?"5:4":s===4/3?"4:3":s.toFixed(2)+":1"," Aspect Ratio)"]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded transition-colors",children:e.jsx(Qt,{className:"w-5 h-5"})})]}),e.jsxs("div",{ref:g,className:"relative flex-1 overflow-hidden bg-gray-100 flex items-center justify-center",style:{minHeight:"400px",maxHeight:"70vh"},onMouseMove:C,onMouseUp:A,onMouseLeave:A,children:[e.jsx("img",{ref:j,src:t,alt:"Crop",className:"max-w-full max-h-full",style:{width:`${m.width}px`,height:`${m.height}px`,objectFit:"contain"},draggable:!1}),w.width>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"absolute border-2 border-blue-500 bg-blue-500/20 cursor-move",style:{left:`${S+w.x}px`,top:`${R+w.y}px`,width:`${w.width}px`,height:`${w.height}px`},onMouseDown:N,children:[e.jsx("div",{className:"absolute -top-1 -left-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-nw-resize resize-handle","data-handle":"nw"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-ne-resize resize-handle","data-handle":"ne"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-sw-resize resize-handle","data-handle":"sw"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-se-resize resize-handle","data-handle":"se"})]}),e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.jsxs("svg",{className:"w-full h-full",children:[e.jsx("defs",{children:e.jsxs("mask",{id:"crop-mask",children:[e.jsx("rect",{width:"100%",height:"100%",fill:"black"}),e.jsx("rect",{x:S+w.x,y:R+w.y,width:w.width,height:w.height,fill:"white"})]})}),e.jsx("rect",{width:"100%",height:"100%",fill:"black",fillOpacity:"0.5",mask:"url(#crop-mask)"})]})})]})]}),e.jsxs("div",{className:"p-4 border-t flex items-center justify-between relative z-10 bg-white",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Drag to move  Aspect ratio locked to ",s===1?"1:1":s===16/9?"16:9":s===4/5?"4:5":s===5/4?"5:4":s===4/3?"4:3":s.toFixed(2)+":1"]}),e.jsxs("div",{className:"flex gap-2 relative z-10",children:[e.jsx("button",{onClick:O=>{O.preventDefault(),O.stopPropagation(),a()},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",type:"button",children:"Cancel"}),e.jsxs("button",{onClick:O=>{O.preventDefault(),O.stopPropagation(),F()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 cursor-pointer",type:"button",disabled:!n.width||!n.height||n.width<=0||n.height<=0,children:[e.jsx(cd,{className:"w-4 h-4"}),"Apply Crop"]})]})]})]})})}function W8({videoUrl:t,aspectRatio:s=16/9,onCrop:r,onCancel:a}){var se,B;const[n,i]=y.useState({x:0,y:0,width:0,height:0}),[l,o]=y.useState(!1),[c,d]=y.useState({x:0,y:0}),[u,p]=y.useState({width:0,height:0}),[m,f]=y.useState({width:0,height:0}),[h,x]=y.useState(null),[g,j]=y.useState(!1),[b,N]=y.useState(0),[C,A]=y.useState(!1),F=y.useRef(null),w=y.useRef(null),_=y.useRef(null);y.useRef(null);const v=y.useRef([]);y.useEffect(()=>{const L=w.current;if(!L)return;const H=()=>{if(p({width:L.videoWidth,height:L.videoHeight}),F.current){const K=F.current.clientWidth-40,J=F.current.clientHeight-40,re=K/L.videoWidth,q=J/L.videoHeight,ae=Math.min(re,q,1);f({width:L.videoWidth*ae,height:L.videoHeight*ae});const xe=Math.min(L.videoWidth,L.videoHeight*s),_e=xe/s;i({x:(L.videoWidth-xe)/2,y:(L.videoHeight-_e)/2,width:xe,height:_e})}};return L.addEventListener("loadedmetadata",H),L.load(),()=>{L.removeEventListener("loadedmetadata",H)}},[t,s]);const S=()=>{if(!u.width||!m.width)return{x:0,y:0,width:0,height:0};const L=m.width/u.width;return{x:n.x*L,y:n.y*L,width:n.width*L,height:n.height*L}},R=L=>{if(!F.current)return;const H=L.target;if(H.classList.contains("resize-handle")){const ae=H.getAttribute("data-handle");if(ae){x(ae),o(!0);const xe=F.current.getBoundingClientRect(),_e=m.width/u.width,Y=(L.clientX-xe.left-(xe.width-m.width)/2)/_e,Fe=(L.clientY-xe.top-(xe.height-m.height)/2)/_e;d({x:Y,y:Fe})}return}const K=F.current.getBoundingClientRect();S();const J=m.width/u.width,re=(L.clientX-K.left-(K.width-m.width)/2)/J,q=(L.clientY-K.top-(K.height-m.height)/2)/J;re>=n.x&&re<=n.x+n.width&&q>=n.y&&q<=n.y+n.height&&(o(!0),d({x:re-n.x,y:q-n.y}))},D=L=>{if(!l||!F.current)return;const H=F.current.getBoundingClientRect(),K=m.width/u.width,J=(L.clientX-H.left-(H.width-m.width)/2)/K,re=(L.clientY-H.top-(H.height-m.height)/2)/K;if(h){let q={...n};if(h==="se"){const ae=J-n.x,xe=ae/s;q={x:n.x,y:n.y,width:Math.min(ae,u.width-n.x),height:Math.min(xe,u.height-n.y)},q.y+q.height>u.height&&(q.height=u.height-q.y,q.width=q.height*s),q.x+q.width>u.width&&(q.width=u.width-q.x,q.height=q.width/s)}else if(h==="sw"){const ae=n.x+n.width-J,xe=ae/s;q={x:Math.max(0,J),y:n.y,width:Math.min(ae,n.x+n.width),height:Math.min(xe,u.height-n.y)},q.y+q.height>u.height&&(q.height=u.height-q.y,q.width=q.height*s,q.x=n.x+n.width-q.width)}else if(h==="ne"){const ae=J-n.x,xe=ae/s;q={x:n.x,y:Math.max(0,n.y+n.height-xe),width:Math.min(ae,u.width-n.x),height:Math.min(xe,n.y+n.height)},q.y<0&&(q.y=0,q.height=n.y+n.height,q.width=q.height*s)}else if(h==="nw"){const ae=n.x+n.width-J,xe=ae/s;q={x:Math.max(0,J),y:Math.max(0,n.y+n.height-xe),width:Math.min(ae,n.x+n.width),height:Math.min(xe,n.y+n.height)},q.y<0&&(q.y=0,q.height=n.y+n.height,q.width=q.height*s,q.x=n.x+n.width-q.width),q.x<0&&(q.x=0,q.width=n.x+n.width,q.height=q.width/s,q.y=n.y+n.height-q.height)}i(q)}else{const q=Math.max(0,Math.min(J-c.x,u.width-n.width)),ae=Math.max(0,Math.min(re-c.y,u.height-n.height));i(xe=>({...xe,x:q,y:ae}))}},V=()=>{o(!1),x(null)},O=()=>{const L=w.current;L&&(L.paused?(L.play(),A(!0)):(L.pause(),A(!1)))},I=async()=>{const L=w.current,H=_.current;if(!(!L||!H)){if(!n.width||!n.height||n.width<=0||n.height<=0){alert("Please wait for the video to load completely before cropping.");return}j(!0),N(0);try{H.width=n.width,H.height=n.height;const K=H.getContext("2d");if(!K)throw new Error("Failed to get canvas context");L.currentTime=0,await new Promise(Fe=>{L.onseeked=Fe});const J=L.duration,re=30,q=1/re,ae=H.captureStream(re),xe=new MediaRecorder(ae,{mimeType:"video/webm;codecs=vp9",videoBitsPerSecond:25e5});v.current=[],xe.ondataavailable=Fe=>{Fe.data.size>0&&v.current.push(Fe.data)},xe.onstop=()=>{const Fe=new Blob(v.current,{type:"video/webm"});r(Fe),j(!1),N(0)},xe.start();let _e=0;const Y=async()=>{if(_e>=J){xe.stop();return}L.currentTime=_e,await new Promise(Be=>{L.onseeked=Be}),K.drawImage(L,n.x,n.y,n.width,n.height,0,0,n.width,n.height);const Fe=_e/J*100;N(Fe),_e+=q,requestAnimationFrame(Y)};await Y()}catch(K){console.error("Error during video crop:",K),alert("Failed to crop video. Please try again."),j(!1),N(0)}}},z=S(),Q=((se=F.current)==null?void 0:se.clientWidth)||800,P=((B=F.current)==null?void 0:B.clientHeight)||600,k=(Q-m.width)/2,X=(P-m.height)/2;return e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Crop Video (",s===1?"1:1":s===16/9?"16:9":s===4/5?"4:5":s===5/4?"5:4":s===4/3?"4:3":s.toFixed(2)+":1"," Aspect Ratio)"]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded transition-colors",disabled:g,children:e.jsx(Qt,{className:"w-5 h-5"})})]}),e.jsxs("div",{ref:F,className:"relative flex-1 overflow-hidden bg-gray-100 flex items-center justify-center",style:{minHeight:"400px",maxHeight:"70vh"},onMouseMove:D,onMouseUp:V,onMouseLeave:V,onMouseDown:R,children:[e.jsx("video",{ref:w,src:t,className:"max-w-full max-h-full",style:{width:`${m.width}px`,height:`${m.height}px`,objectFit:"contain"},muted:!0,playsInline:!0}),z.width>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"absolute border-2 border-blue-500 bg-blue-500/20 cursor-move",style:{left:`${k+z.x}px`,top:`${X+z.y}px`,width:`${z.width}px`,height:`${z.height}px`},children:[e.jsx("div",{className:"absolute -top-1 -left-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-nw-resize resize-handle","data-handle":"nw"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-ne-resize resize-handle","data-handle":"ne"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-sw-resize resize-handle","data-handle":"sw"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-se-resize resize-handle","data-handle":"se"})]}),e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.jsxs("svg",{className:"w-full h-full",children:[e.jsx("defs",{children:e.jsxs("mask",{id:"video-crop-mask",children:[e.jsx("rect",{width:"100%",height:"100%",fill:"black"}),e.jsx("rect",{x:k+z.x,y:X+z.y,width:z.width,height:z.height,fill:"white"})]})}),e.jsx("rect",{width:"100%",height:"100%",fill:"black",fillOpacity:"0.5",mask:"url(#video-crop-mask)"})]})})]}),e.jsx("canvas",{ref:_,className:"hidden"})]}),g&&e.jsxs("div",{className:"p-4 border-t bg-blue-50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"animate-spin",children:e.jsx(Sb,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("span",{className:"text-sm text-blue-600",children:["Processing video... ",Math.round(b),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${b}%`}})})]}),e.jsxs("div",{className:"p-4 border-t flex items-center justify-between relative z-10 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:O,className:"p-2 hover:bg-gray-100 rounded transition-colors",disabled:g,children:C?e.jsx(jn,{className:"w-5 h-5"}):e.jsx(Ua,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Drag to move  Aspect ratio locked to ",s===1?"1:1":s===16/9?"16:9":s===4/5?"4:5":s===5/4?"5:4":s===4/3?"4:3":s.toFixed(2)+":1"]})]}),e.jsxs("div",{className:"flex gap-2 relative z-10",children:[e.jsx("button",{onClick:L=>{L.preventDefault(),L.stopPropagation(),a()},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",type:"button",disabled:g,children:"Cancel"}),e.jsxs("button",{onClick:L=>{L.preventDefault(),L.stopPropagation(),I()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 cursor-pointer",type:"button",disabled:!n.width||!n.height||n.width<=0||n.height<=0||g,children:[e.jsx(cd,{className:"w-4 h-4"}),g?"Processing...":"Apply Crop"]})]})]})]})})}const rr=Wm.getApiConfig().baseUrl;function V8(){const{notify:t}=Sr(),[s,r]=y.useState([]),[a,n]=y.useState(!0),[i,l]=y.useState(null),[o,c]=y.useState(null),[d,u]=y.useState({}),[p,m]=y.useState(!1),[f,h]=y.useState(!1),[x,g]=y.useState(!1),[j,b]=y.useState(!1),[N,C]=y.useState(!1),[A,F]=y.useState(!1),[w,_]=y.useState(""),[v,S]=y.useState(""),[R,D]=y.useState(""),[V,O]=y.useState(void 0),[I,z]=y.useState(1),[Q,P]=y.useState(null),[k,X]=y.useState(!1),[se,B]=y.useState(null),[L,H]=y.useState(null),[K,J]=y.useState(null),[re,q]=y.useState(7e3),[ae,xe]=y.useState({name:"",description:"",sectionType:"",imageCount:5,type:"gallery"}),[_e,Y]=y.useState({animationType:"fade",transitionDuration:1e3,autoPlay:!0,autoPlayDelay:7e3,designStyle:"modern",showDots:!0,showArrows:!0,loop:!0}),[Fe,Be]=y.useState({animationType:"fade",transitionDuration:1e3,autoPlay:!0,autoPlayDelay:7e3,designStyle:"modern",showDots:!0,showArrows:!0,loop:!0}),[He,Le]=y.useState(""),[ve,et]=y.useState({heading:"Join The Nefol Circle",description:"Stay ahead with exclusive style drops, member-only offers, and insider fashion updates.",footer:"By subscribing, you agree to receive WhatsApp messages from Nefol.",logoName:"NEFL"}),wt=y.useCallback(async()=>{const he=[{id:"scrolling_text_banner",name:"Scrolling Text Banner",type:"banner",images:[],description:"Continuous scrolling text line for offers and promotions (displays between navbar and top media carousel)",sectionType:"scrolling_text_banner",imageCount:0},{id:"top_media_carousel",name:"Top Media Carousel (Above Hero)",type:"hero",images:[],description:"Media carousel displayed above Hero Banner - Images and videos with full aspect ratio (up to 30)",sectionType:"top_media_carousel",imageCount:30,settings:{animationType:"fade",transitionDuration:1e3,autoPlay:!0,autoPlayDelay:7e3,designStyle:"modern",showDots:!0,showArrows:!0,loop:!0}},{id:"hero_banner",name:"Hero Banner (Top Slider)",type:"hero",images:[],description:"Main banner at the top - Rotating hero images and videos (up to 30)",sectionType:"hero_banner",imageCount:30,settings:{animationType:"fade",transitionDuration:1e3,autoPlay:!0,autoPlayDelay:7e3,designStyle:"modern",showDots:!0,showArrows:!0,loop:!0}},{id:"body_category",name:"Body Category",type:"category",images:[],description:"Body products category image",sectionType:"shop_categories",imageCount:1},{id:"face_category",name:"Face Category",type:"category",images:[],description:"Face products category image",sectionType:"shop_categories",imageCount:1},{id:"hair_category",name:"Hair Category",type:"category",images:[],description:"Hair products category image",sectionType:"shop_categories",imageCount:1},{id:"combos_category",name:"Combos Category",type:"category",images:[],description:"Combos products category image",sectionType:"shop_categories",imageCount:1},{id:"commitments",name:"Certifications/Commitments",type:"certification",images:[],description:"Certification badges (Cruelty-Free, Paraben-Free, etc.)",sectionType:"commitments",imageCount:10},{id:"complete_kit",name:"Complete Kit Banner",type:"banner",images:[],description:"Large banner for complete kit section",sectionType:"complete_kit",imageCount:1},{id:"marketplace_logos",name:"Marketplace Logos",type:"gallery",images:[],description:"Available on (Amazon, Flipkart, Meesho) logos",sectionType:"marketplace_logos",imageCount:10},{id:"nefol_collection",name:"Nefol Collection",type:"banner",images:[],description:"NEFOL COLLECTION section with image, title, subtitle, description, and button",sectionType:"nefol_collection",imageCount:1},{id:"forever_favorites",name:"Forever Favorites",type:"gallery",images:[],description:"FOREVER FAVORITES section with two images (Luxury Skincare and Natural Beauty)",sectionType:"forever_favorites",imageCount:2},{id:"natural_beauty",name:"Natural Beauty",type:"banner",images:[],description:"NATURAL BEAUTY section with image, title, subtitle, description, and button",sectionType:"natural_beauty",imageCount:1},{id:"whatsappsubscription",name:"WhatsApp Subscription",type:"banner",images:[],description:"WhatsApp subscription modal with image, heading, description, footer text, logo, and logo name",sectionType:"whatsappsubscription",imageCount:2}];try{const be=await(await fetch(`${rr}/api/cms/sections/home`)).json(),ye=he.map(Te=>Te.sectionType),Pe=be.filter(Te=>!ye.includes(Te.section_type)&&Te.section_type.startsWith("custom_")).map(Te=>{var we,Ge,st,ut,ee;return{id:Te.section_type,name:Te.title||Te.section_type.replace("custom_","").replace(/_/g," "),type:"custom",images:(we=Te.content)!=null&&we.images||(Ge=Te.content)!=null&&Ge.image?[Te.content.image]:[],description:((st=Te.content)==null?void 0:st.description)||"",sectionType:Te.section_type,imageCount:Array.isArray((ut=Te.content)==null?void 0:ut.images)?Te.content.images.length:(ee=Te.content)!=null&&ee.image?1:5,isCustom:!0,orderIndex:Te.order_index||999}}),$e=[...he.map(Te=>{var Ge,st;const we=be.find(ut=>ut.section_type===Te.sectionType);if(we&&we.content){if((Te.sectionType==="hero_banner"||Te.sectionType==="top_media_carousel")&&we.content.images){const ut=Array.isArray(we.content.images)?we.content.images:[];let ee;Te.sectionType==="top_media_carousel"&&(we.content.mediaItems&&Array.isArray(we.content.mediaItems)?ee=we.content.mediaItems:we.content.media&&Array.isArray(we.content.media)?ee=we.content.media.map(de=>({url:de.url||de,type:de.type||(/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(de.url||de)?"video":"image"),timing:de.timing||Fe.autoPlayDelay,thumbnail:de.thumbnail})):ee=ut.map(de=>({url:de,type:/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(de)?"video":"image",timing:Fe.autoPlayDelay})));const oe={...Te,name:Te.name,images:ut,mediaItems:ee,settings:we.content.settings||Te.settings};return Te.sectionType==="hero_banner"&&we.content.settings&&Y(we.content.settings),Te.sectionType==="top_media_carousel"&&we.content.settings&&Be(we.content.settings),oe}if(Te.sectionType==="shop_categories"&&we.content.categories){const ut={Body:"body_category",Face:"face_category",Hair:"hair_category",Combos:"combos_category"},ee=we.content.categories.find(oe=>ut[oe.name]===Te.id);if(ee&&ee.image)return{...Te,images:[(de=>{if(!de)return"";if(/^https?:\/\//i.test(de))return de;if(de.startsWith("/")){const ge="192.168.1.36",Ee="2000";return`http://192.168.1.36:2000${de}`}return de})(ee.image)]}}if(Te.sectionType==="scrolling_text_banner"&&we.content.text)return Le(we.content.text),{...Te,description:we.content.text};if(Te.sectionType==="commitments"&&we.content.images)return{...Te,images:we.content.images};if(Te.sectionType==="complete_kit"&&we.content.image)return{...Te,images:[we.content.image]};if(Te.sectionType==="marketplace_logos"&&we.content.logos)return{...Te,images:we.content.logos};if(Te.sectionType==="nefol_collection"&&we.content.image)return{...Te,images:[(ee=>{if(!ee)return"";if(/^https?:\/\//i.test(ee))return ee;if(ee.startsWith("/")){const oe="192.168.1.36",de="2000";return`http://192.168.1.36:2000${ee}`}return ee})(we.content.image)]};if(Te.sectionType==="forever_favorites"&&we.content.images){const ut=M=>{if(!M)return"";if(/^https?:\/\//i.test(M))return M;if(M.startsWith("/")){const G="192.168.1.36",E="2000";return`http://192.168.1.36:2000${M}`}return M},ee=Array.isArray(we.content.images)?we.content.images:[],oe=(Ge=we.content.luxurySkincare)==null?void 0:Ge.image,de=(st=we.content.naturalBeauty)==null?void 0:st.image,ge=[];oe&&ge.push(oe),de&&ge.push(de);const Ee=ee.length>0?ee:ge;return{...Te,images:Ee.map(ut)}}if(Te.sectionType==="natural_beauty"&&we.content.image)return{...Te,images:[(ee=>{if(!ee)return"";if(/^https?:\/\//i.test(ee))return ee;if(ee.startsWith("/")){const oe="192.168.1.36",de="2000";return`http://192.168.1.36:2000${ee}`}return ee})(we.content.image)]};if(Te.sectionType==="whatsappsubscription"&&we.content){const ut=ge=>{if(!ge)return"";if(/^https?:\/\//i.test(ge))return ge;if(ge.startsWith("/")){const Ee="192.168.1.36",M="2000";return`http://192.168.1.36:2000${ge}`}return ge},ee=we.content.image?ut(we.content.image):"",oe=we.content.logo?ut(we.content.logo):"",de=[];return ee&&de.push(ee),oe&&de.push(oe),(we.content.heading||we.content.description||we.content.footer||we.content.logoName)&&et({heading:we.content.heading||"Join The Nefol Circle",description:we.content.description||"Stay ahead with exclusive style drops, member-only offers, and insider fashion updates.",footer:we.content.footer||"By subscribing, you agree to receive WhatsApp messages from Nefol.",logoName:we.content.logoName||"NEFL"}),{...Te,images:de}}}return Te}),...Pe].sort((Te,we)=>(Te.orderIndex||0)-(we.orderIndex||0));r($e)}catch(me){console.error("Failed to load sections:",me),r(he)}finally{n(!1)}},[]);y.useEffect(()=>{wt()},[wt]);const fe=he=>he.type.startsWith("video/")||/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(he.name),ne=he=>({hero_banner:1.25,nefol_collection:1.7777777777777777,natural_beauty:1.7777777777777777,forever_favorites:1.3333333333333333,complete_kit:1.7777777777777777})[he]||null,Ue=async(he,me,be,ye)=>{const Pe=fe(he);if(!Pe&&he.type.startsWith("image/")&&!ye){H({file:he,sectionId:me,index:be}),X(!0);return}try{u(st=>({...st,[me]:!0}));const Re=await Dr(he,rr),$e=s.find(st=>st.id===me);if(!$e)return;const Te=[...$e.images];be!==void 0&&be<Te.length?Te[be]=Re:Te.push(Re);const we=Te.slice(0,$e.imageCount);let Ge;if(me==="top_media_carousel"){const st=$e.mediaItems||[],ee={url:Re,type:Pe?"video":"image",timing:Fe.autoPlayDelay};be!==void 0&&be<st.length?(Ge=[...st],Ge[be]={...st[be],...ee}):Ge=[...st,ee],Ge=Ge.slice(0,$e.imageCount)}r(st=>st.map(ut=>ut.id===me?{...ut,images:we,mediaItems:Ge||ut.mediaItems}:ut)),await St(me,Re,be,we,Ge),t("success",Pe?"Video uploaded successfully":"Image uploaded successfully")}catch(Re){console.error("Upload failed:",Re);const $e=(Re==null?void 0:Re.message)||(fe(he)?"Failed to upload video":"Failed to upload image");t("error",$e)}finally{u(Re=>({...Re,[me]:!1}))}},kt=async he=>{try{u(Ge=>({...Ge,[R]:!0}));const me=Q?Q.name.replace(/\.[^/.]+$/,".jpg"):`cropped-thumbnail-${Date.now()}.jpg`,be=new File([he],me,{type:"image/jpeg"}),ye=await Dr(be,rr),Pe=s.find(Ge=>Ge.id===R);if(!Pe)return;const Re=!Q&&V!==void 0&&Pe.images[V]&&/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(Pe.images[V]),$e=[...Pe.images];Re||(V!==void 0&&V<$e.length?$e[V]=ye:$e.push(ye));const Te=$e.slice(0,Pe.imageCount);let we;if(R==="top_media_carousel"){const Ge=Pe.mediaItems||[],st=Re||Pe.images[V||0]&&/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(Pe.images[V||0]);V!==void 0&&V<Ge.length?(we=[...Ge],we[V]={...Ge[V],url:Re||st?Ge[V].url:ye,thumbnail:Re||st?ye:void 0}):(we=[...Ge],st?we.push({url:Pe.images[V||Ge.length]||ye,type:"video",timing:Fe.autoPlayDelay,thumbnail:Re?ye:void 0}):we.push({url:ye,type:"image",timing:Fe.autoPlayDelay})),we=we.slice(0,Pe.imageCount)}r(Ge=>Ge.map(st=>st.id===R?{...st,images:Te,mediaItems:we||st.mediaItems}:st)),await St(R,ye,V,Te,we),t("success",Re?"Video thumbnail cropped and uploaded successfully":"Image cropped and uploaded successfully"),w.startsWith("blob:")&&URL.revokeObjectURL(w),C(!1),_(""),P(null)}catch(me){console.error("Crop upload failed:",me),t("error","Failed to upload cropped image")}finally{u(me=>({...me,[R]:!1}))}},it=()=>{w&&URL.revokeObjectURL(w),C(!1),_(""),D(""),O(void 0),z(1),P(null)},Ct=async he=>{if(B(he),X(!1),L){const{file:me,sectionId:be,index:ye}=L;if(he){const Pe=URL.createObjectURL(me);_(Pe),D(be),O(ye),z(he.ratio),P(me),C(!0)}else try{u(we=>({...we,[be]:!0}));const Pe=await Dr(me,rr),Re=s.find(we=>we.id===be);if(!Re)return;const $e=[...Re.images];ye!==void 0&&ye<$e.length?$e[ye]=Pe:$e.push(Pe);const Te=$e.slice(0,Re.imageCount);r(we=>we.map(Ge=>Ge.id===be?{...Ge,images:Te}:Ge)),await St(be,Pe,ye,Te),t("success","Image uploaded successfully")}catch(Pe){console.error("Upload failed:",Pe),t("error",(Pe==null?void 0:Pe.message)||"Failed to upload image")}finally{u(Pe=>({...Pe,[be]:!1}))}H(null)}},St=async(he,me,be,ye,Pe)=>{var $e,Te,we,Ge,st,ut,ee,oe,de,ge,Ee,M,G,E,T,U,W,Z,te,le,ce,ie,ue,Ne,Ae,je,Ce,ze,dt,rt,_t,Ps,Ke,ft;const Re=s.find(pt=>pt.id===he);if(Re)try{const pt=ye||Re.images;let At={};if(Re.sectionType==="hero_banner"){const at=s.find(ds=>ds.id==="hero_banner");At={title:"Hero Banner",subtitle:"NATURAL BEAUTY",description:"infused with premium natural ingredients",buttonText:"SHOP NOW",buttonLink:"/shop",images:pt,videos:pt.filter(ds=>/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(ds)),settings:(at==null?void 0:at.settings)||_e}}else if(Re.sectionType==="top_media_carousel"){const at=s.find(Ie=>Ie.id==="top_media_carousel"),ds=Pe||(at==null?void 0:at.mediaItems)||pt.map(Ie=>({url:Ie,type:/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(Ie)?"video":"image",timing:Fe.autoPlayDelay})),mr=pt.filter(Ie=>/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(Ie)),We=pt.filter(Ie=>!/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(Ie));At={title:"Top Media Carousel",images:pt,videos:mr,media:pt.map(Ie=>({url:Ie,type:/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(Ie)?"video":"image"})),mediaItems:ds,settings:(at==null?void 0:at.settings)||Fe}}else if(Re.sectionType==="scrolling_text_banner")At={text:He||""};else if(Re.sectionType==="shop_categories"){const mr=(await(await fetch(`${rr}/api/cms/sections/home`)).json()).find(xt=>xt.section_type==="shop_categories"),Ie={body_category:"Body",face_category:"Face",hair_category:"Hair",combos_category:"Combos"}[he],Ve=(xt=>{if(!xt||xt.startsWith("/"))return xt;if(xt.includes("/uploads/")){const Cr=xt.match(/\/uploads\/[^?]+/);if(Cr)return Cr[0]}try{return new URL(xt).pathname}catch{return xt}})(me);if(mr&&mr.content&&mr.content.categories){const xt=mr.content.categories.map(Cr=>Cr.name===Ie?{...Cr,image:Ve}:Cr);At={...mr.content,categories:xt}}else{const xt={Body:"/body",Face:"/face",Hair:"/hair",Combos:"/combos"},Cr={Body:"/IMAGES/body.jpg",Face:"/IMAGES/face.jpg",Hair:"/IMAGES/hair.jpg",Combos:"/IMAGES/combo.jpg"};At={title:"SHOP BY CATEGORY",categories:[{name:"Body",image:he==="body_category"?Ve:Cr.Body,link:xt.Body},{name:"Face",image:he==="face_category"?Ve:Cr.Face,link:xt.Face},{name:"Hair",image:he==="hair_category"?Ve:Cr.Hair,link:xt.Hair},{name:"Combos",image:he==="combos_category"?Ve:Cr.Combos,link:xt.Combos}]}}}else if(Re.sectionType==="commitments")At={title:"THOUGHTFUL COMMITMENTS",description:"We are committed to providing you with the safest and most effective natural skincare products.",images:pt};else if(Re.sectionType==="complete_kit")At={title:"THE COMPLETE KIT",description:"Get the full Nefol experience in one curated bundle",buttonText:"View Kit",buttonLink:"/combos",image:me};else if(Re.sectionType==="marketplace_logos")At={title:"AVAILABLE ON",logos:pt};else if(Re.sectionType==="nefol_collection"){const ds=(Ve=>{if(!Ve||Ve.startsWith("/"))return Ve;if(Ve.includes("/uploads/")){const xt=Ve.match(/\/uploads\/[^?]+/);if(xt)return xt[0]}try{return new URL(Ve).pathname}catch{return Ve}})(me),Ie=(await(await fetch(`${rr}/api/cms/sections/home`)).json()).find(Ve=>Ve.section_type==="nefol_collection"),Dt=ds||(($e=Ie==null?void 0:Ie.content)==null?void 0:$e.image)||"";At={title:((Te=Ie==null?void 0:Ie.content)==null?void 0:Te.title)||"NEFOL COLLECTION",subtitle:((we=Ie==null?void 0:Ie.content)==null?void 0:we.subtitle)||"ELEVATE YOUR SKINCARE WITH",description:((Ge=Ie==null?void 0:Ie.content)==null?void 0:Ge.description)||"Our premium collection combines the best of nature and science to deliver exceptional results for your skin.",buttonText:((st=Ie==null?void 0:Ie.content)==null?void 0:st.buttonText)||"SHOP NOW",buttonLink:((ut=Ie==null?void 0:Ie.content)==null?void 0:ut.buttonLink)||"/shop",image:Dt}}else if(Re.sectionType==="forever_favorites"){const at=Dt=>{if(!Dt||Dt.startsWith("/"))return Dt;if(Dt.includes("/uploads/")){const Ve=Dt.match(/\/uploads\/[^?]+/);if(Ve)return Ve[0]}try{return new URL(Dt).pathname}catch{return Dt}},We=(await(await fetch(`${rr}/api/cms/sections/home`)).json()).find(Dt=>Dt.section_type==="forever_favorites");let Ie=pt.length>0?pt.map(at):[];if(Ie.length===0&&(We!=null&&We.content)){const Dt=We.content.images||[],Ve=(ee=We.content.luxurySkincare)==null?void 0:ee.image,xt=(oe=We.content.naturalBeauty)==null?void 0:oe.image;Dt.length>0?Ie=Dt.map(at):(Ve||xt)&&(Ie=[Ve,xt].filter(Boolean).map(at))}At={title:((de=We==null?void 0:We.content)==null?void 0:de.title)||"FOREVER FAVORITES",description:((ge=We==null?void 0:We.content)==null?void 0:ge.description)||"Discover our most loved products that have become staples in skincare routines worldwide.",images:Ie,luxurySkincare:{title:((M=(Ee=We==null?void 0:We.content)==null?void 0:Ee.luxurySkincare)==null?void 0:M.title)||"LUXURY SKINCARE",buttonText:((E=(G=We==null?void 0:We.content)==null?void 0:G.luxurySkincare)==null?void 0:E.buttonText)||"SHOP NOW",image:Ie[0]||((U=(T=We==null?void 0:We.content)==null?void 0:T.luxurySkincare)==null?void 0:U.image)||""},naturalBeauty:{title:((Z=(W=We==null?void 0:We.content)==null?void 0:W.naturalBeauty)==null?void 0:Z.title)||"NATURAL BEAUTY",buttonText:((le=(te=We==null?void 0:We.content)==null?void 0:te.naturalBeauty)==null?void 0:le.buttonText)||"SHOP NOW",image:Ie[1]||((ie=(ce=We==null?void 0:We.content)==null?void 0:ce.naturalBeauty)==null?void 0:ie.image)||""}}}else if(Re.sectionType==="natural_beauty"){const ds=(Ve=>{if(!Ve||Ve.startsWith("/"))return Ve;if(Ve.includes("/uploads/")){const xt=Ve.match(/\/uploads\/[^?]+/);if(xt)return xt[0]}try{return new URL(Ve).pathname}catch{return Ve}})(me),Ie=(await(await fetch(`${rr}/api/cms/sections/home`)).json()).find(Ve=>Ve.section_type==="natural_beauty"),Dt=ds||((ue=Ie==null?void 0:Ie.content)==null?void 0:ue.image)||"";At={title:((Ne=Ie==null?void 0:Ie.content)==null?void 0:Ne.title)||"NATURAL BEAUTY",subtitle:((Ae=Ie==null?void 0:Ie.content)==null?void 0:Ae.subtitle)||"ELEVATE YOUR SKIN WITH",description:((je=Ie==null?void 0:Ie.content)==null?void 0:je.description)||"infused with premium natural ingredients",buttonText:((Ce=Ie==null?void 0:Ie.content)==null?void 0:Ce.buttonText)||"SHOP NOW",buttonLink:((ze=Ie==null?void 0:Ie.content)==null?void 0:ze.buttonLink)||"/shop",image:Dt}}else if(Re.sectionType==="whatsappsubscription"){const at=Ve=>{if(!Ve)return"";if(Ve.startsWith("/"))return Ve;if(Ve.includes("/uploads/")){const xt=Ve.match(/\/uploads\/[^?]+/);if(xt)return xt[0]}try{return new URL(Ve).pathname}catch{if(Ve.includes("/uploads/")){const xt=Ve.match(/\/uploads\/[^?]+/);if(xt)return xt[0]}return Ve}},We=(await(await fetch(`${rr}/api/cms/sections/home`)).json()).find(Ve=>Ve.section_type==="whatsappsubscription");let Ie=((dt=We==null?void 0:We.content)==null?void 0:dt.image)||"",Dt=((rt=We==null?void 0:We.content)==null?void 0:rt.logo)||"";if(ye&&ye.length>0)be===0||be===void 0&&ye.length>=1?(Ie=at(ye[0]),ye.length>1?Dt=at(ye[1]):(_t=We==null?void 0:We.content)!=null&&_t.logo&&(Dt=We.content.logo)):be===1||be===void 0&&ye.length===2?(Dt=at(ye[1]||ye[ye.length-1]),ye.length>0?Ie=at(ye[0]):(Ps=We==null?void 0:We.content)!=null&&Ps.image&&(Ie=We.content.image)):(ye[0]&&(Ie=at(ye[0])),ye[1]&&(Dt=at(ye[1])));else if(me){const Ve=at(me);be===1?(Dt=Ve,Ie=((Ke=We==null?void 0:We.content)==null?void 0:Ke.image)||""):(Ie=Ve,Dt=((ft=We==null?void 0:We.content)==null?void 0:ft.logo)||"")}At={image:Ie,logo:Dt,heading:ve.heading,description:ve.description,footer:ve.footer,logoName:ve.logoName}}else Re.sectionType.startsWith("custom_")&&(At={title:Re.name,description:Re.description,images:pt});const Gs={scrolling_text_banner:"Scrolling Text Banner",top_media_carousel:"Top Media Carousel (Above Hero)",hero_banner:"Hero Banner (Top Slider)",body_category:"Body Category",face_category:"Face Category",hair_category:"Hair Category",combos_category:"Combos Category",commitments:"Certifications/Commitments",complete_kit:"Complete Kit Banner",marketplace_logos:"Marketplace Logos",nefol_collection:"Nefol Collection",forever_favorites:"Forever Favorites",natural_beauty:"Natural Beauty",whatsappsubscription:"WhatsApp Subscription"}[Re.sectionType]||Re.name;if(!(await fetch(`${rr}/api/cms/sections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page_slug:"home",section_type:Re.sectionType,title:Gs,content:At,order_index:Re.orderIndex||0,is_active:!0})})).ok)throw new Error("Failed to save to CMS")}catch(pt){throw console.error("Failed to save section:",pt),pt}},lt=async()=>{const he=s.find(me=>me.id==="hero_banner");if(he){r(me=>me.map(be=>be.id==="hero_banner"?{...be,settings:_e}:be));try{await St("hero_banner",he.images[0]||"",void 0,he.images),t("success","Hero settings saved successfully"),h(!1)}catch{t("error","Failed to save hero settings")}}},ot=async(he,me)=>{const be=s.find(Re=>Re.id===he);if(!be)return;const ye=be.images.filter((Re,$e)=>$e!==me);let Pe;he==="top_media_carousel"&&be.mediaItems&&(Pe=be.mediaItems.filter((Re,$e)=>$e!==me)),r(Re=>Re.map($e=>$e.id===he?{...$e,images:ye,mediaItems:Pe||$e.mediaItems}:$e));try{await St(he,ye[0]||"",void 0,ye,Pe),t("success","Media removed")}catch{t("error","Failed to update CMS")}},pe=async(he,me,be)=>{const ye=s.find(Re=>Re.id===he);if(!ye||he!=="top_media_carousel"||!ye.mediaItems)return;const Pe=[...ye.mediaItems];me<Pe.length&&(Pe[me]={...Pe[me],timing:be}),r(Re=>Re.map($e=>$e.id===he?{...$e,mediaItems:Pe}:$e));try{await St(he,ye.images[0]||"",void 0,ye.images,Pe),t("success","Timing updated successfully")}catch{t("error","Failed to update timing")}},Oe=he=>new Promise((me,be)=>{const ye=document.createElement("video");ye.crossOrigin="anonymous",ye.src=he,ye.currentTime=.1,ye.onloadeddata=()=>{ye.onseeked=()=>{const Pe=document.createElement("canvas");Pe.width=ye.videoWidth,Pe.height=ye.videoHeight;const Re=Pe.getContext("2d");if(Re){Re.drawImage(ye,0,0);const $e=Pe.toDataURL("image/jpeg");me($e)}else be(new Error("Failed to get canvas context"))},ye.currentTime=.1},ye.onerror=()=>{be(new Error("Failed to load video"))}}),Xe=async(he,me)=>{const be=s.find(Pe=>Pe.id===he);if(!be||!be.images[me])return;const ye=be.images[me];if(!/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(ye)){t("error","Selected item is not a video");return}try{const Pe=await Oe(ye);_(Pe),D(he),O(me),z(16/9),P(null),C(!0)}catch(Pe){console.error("Failed to extract video frame:",Pe),t("error","Failed to extract video frame. Please try again.")}},Ft=(he,me)=>{const be=s.find(Pe=>Pe.id===he);if(!be||!be.images[me])return;const ye=be.images[me];if(!/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(ye)){t("error","Selected item is not a video");return}S(ye),D(he),O(me),z(16/9),F(!0)},bt=async he=>{try{u(Te=>({...Te,[R]:!0}));const me=new File([he],`cropped-video-${Date.now()}.webm`,{type:"video/webm"}),be=await Dr(me,rr),ye=s.find(Te=>Te.id===R);if(!ye)return;const Pe=[...ye.images];V!==void 0&&V<Pe.length?Pe[V]=be:Pe.push(be);const Re=Pe.slice(0,ye.imageCount);let $e;if(R==="top_media_carousel"){const Te=ye.mediaItems||[];V!==void 0&&V<Te.length?($e=[...Te],$e[V]={...Te[V],url:be,type:"video"}):($e=[...Te],$e.push({url:be,type:"video",timing:Fe.autoPlayDelay})),$e=$e.slice(0,ye.imageCount)}r(Te=>Te.map(we=>we.id===R?{...we,images:Re,mediaItems:$e||we.mediaItems}:we)),await St(R,be,V,Re,$e),t("success","Video cropped and uploaded successfully"),F(!1),S(""),D(""),O(void 0)}catch(me){console.error("Video crop upload failed:",me),t("error","Failed to upload cropped video")}finally{u(me=>({...me,[R]:!1}))}},Hs=()=>{F(!1),S(""),D(""),O(void 0)},na=(he,me)=>{he.preventDefault(),he.stopPropagation(),c(me)},ka=he=>{he.preventDefault(),he.stopPropagation(),c(null)},Ga=async(he,me)=>{he.preventDefault(),he.stopPropagation(),c(null);const be=Array.from(he.dataTransfer.files).filter(ye=>ye.type.startsWith("image/")||ye.type.startsWith("video/")||/\.(mp4|webm|ogg|mov|avi|jpg|jpeg|png|gif|webp)(\?|$)/i.test(ye.name));if(be.length===0){t("error","Please drop image or video files only");return}for(const ye of be)fe(ye)?await Ue(ye,me,void 0,!0):await Ue(ye,me)},$r=(he,me)=>{Array.from(he.target.files||[]).forEach(ye=>{fe(ye)?Ue(ye,me,void 0,!0):Ue(ye,me)}),he.target.value=""};return a?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"text-lg",children:"Loading homepage layout..."})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Homepage Layout Manager"}),e.jsx("p",{className:"text-sm font-light tracking-wide mt-2",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Drag and drop images to different sections or click to upload"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>b(!0),className:"btn-primary flex items-center gap-2",children:[e.jsx(ss,{className:"w-5 h-5"}),"Create New Section"]}),e.jsxs("button",{onClick:()=>m(!p),className:"btn-secondary flex items-center gap-2",children:[e.jsx(nt,{className:"w-5 h-5"}),p?"Edit Mode":"Preview Mode"]}),e.jsxs("button",{onClick:wt,className:"btn-secondary flex items-center gap-2",children:[e.jsx(br,{className:"w-5 h-5"}),"Refresh"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:s.map(he=>e.jsxs("div",{onDragOver:me=>na(me,he.id),onDragLeave:ka,onDrop:me=>Ga(me,he.id),className:`border-2 rounded-lg p-6 transition-all ${o===he.id?"border-blue-500 bg-blue-50 border-dashed":"border-gray-200 hover:border-gray-300"} ${d[he.id]?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[he.name,he.isCustom&&e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-green-100 text-green-800 rounded",children:"Custom"})]}),(he.id==="hero_banner"||he.id==="top_media_carousel")&&e.jsx("button",{onClick:()=>{he.id==="hero_banner"?h(!f):g(!x)},className:"p-1.5 hover:bg-gray-100 rounded transition-colors",title:"Animation & Design Settings",children:e.jsx(Ns,{className:"w-4 h-4 text-blue-600"})}),he.isCustom&&e.jsx("button",{onClick:async()=>{if(confirm(`Are you sure you want to delete "${he.name}"?`))try{const ye=(await(await fetch(`${rr}/api/cms/sections/home`)).json()).find(Pe=>Pe.section_type===he.sectionType);if(ye)if((await fetch(`${rr}/api/cms/sections/${ye.id}`,{method:"DELETE"})).ok)t("success","Section deleted successfully"),await wt();else throw new Error("Failed to delete")}catch(me){console.error("Failed to delete section:",me),t("error","Failed to delete section")}},className:"p-1.5 hover:bg-red-100 rounded transition-colors",title:"Delete Section",children:e.jsx(Mt,{className:"w-4 h-4 text-red-600"})})]}),e.jsx("p",{className:"text-sm text-gray-600",children:he.description}),he.id!=="scrolling_text_banner"&&e.jsxs("span",{className:"inline-block mt-2 px-2 py-1 text-xs bg-gray-100 rounded",children:["Max ",he.imageCount," image",he.imageCount>1?"s":""]})]}),he.id!=="scrolling_text_banner"&&e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:he.id==="hero_banner"||he.id==="top_media_carousel"?"image/*,video/*":"image/*",multiple:he.imageCount>1,onChange:me=>$r(me,he.id),className:"hidden",disabled:d[he.id]}),e.jsx("div",{className:"p-2 hover:bg-gray-100 rounded transition-colors",children:e.jsx(On,{className:"w-5 h-5 text-gray-600"})})]})]}),he.id==="scrolling_text_banner"&&e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-br from-yellow-50 to-orange-50 rounded-lg border border-yellow-200",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scrolling Text (Offers, Promotions, etc.)"}),e.jsx("textarea",{value:He,onChange:me=>Le(me.target.value),placeholder:"Enter text to display in the scrolling banner. You can add multiple items separated by commas or new lines. Example: 'Free Shipping on Orders Above 500', 'Buy 2 Get 1 Free', 'New Arrivals - Shop Now!'",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 resize-y min-h-[100px]",rows:4}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"This text will scroll continuously 24/7 on the homepage"}),e.jsxs("button",{onClick:async()=>{try{if(!s.find(be=>be.id==="scrolling_text_banner"))return;await St("scrolling_text_banner","",void 0,[]),t("success","Scrolling text saved successfully")}catch{t("error","Failed to save scrolling text")}},className:"flex items-center gap-2 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:[e.jsx(Ms,{className:"w-4 h-4"}),"Save Text"]})]})]}),he.id==="whatsappsubscription"&&e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-br from-green-50 to-blue-50 rounded-lg border border-green-200",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"WhatsApp Subscription Modal Content"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Heading"}),e.jsx("input",{type:"text",value:ve.heading,onChange:me=>et({...ve,heading:me.target.value}),placeholder:"Join The Nefol Circle",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Description"}),e.jsx("textarea",{value:ve.description,onChange:me=>et({...ve,description:me.target.value}),placeholder:"Stay ahead with exclusive style drops, member-only offers, and insider fashion updates.",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-y min-h-[80px]",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Footer Text"}),e.jsx("input",{type:"text",value:ve.footer,onChange:me=>et({...ve,footer:me.target.value}),placeholder:"By subscribing, you agree to receive WhatsApp messages from Nefol.",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Logo Name"}),e.jsx("input",{type:"text",value:ve.logoName,onChange:me=>et({...ve,logoName:me.target.value}),placeholder:"NEFL",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Product Image"}),he.images[0]?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:he.images[0],alt:"Product",className:"w-full h-32 object-contain rounded-lg border border-gray-200"}),e.jsx("button",{onClick:()=>ot(he.id,0),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 hover:opacity-100 transition-opacity",children:e.jsx(Qt,{className:"w-4 h-4"})})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:me=>{var ye;const be=(ye=me.target.files)==null?void 0:ye[0];be&&Ue(be,he.id,0,!0)},className:"hidden"}),e.jsx("div",{className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center hover:border-green-500 hover:bg-green-50 transition-colors",children:e.jsx(On,{className:"w-6 h-6 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Logo Image"}),he.images[1]?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:he.images[1],alt:"Logo",className:"w-full h-32 object-contain rounded-lg border border-gray-200"}),e.jsx("button",{onClick:()=>ot(he.id,1),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 hover:opacity-100 transition-opacity",children:e.jsx(Qt,{className:"w-4 h-4"})})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:me=>{var ye;const be=(ye=me.target.files)==null?void 0:ye[0];be&&Ue(be,he.id,1,!0)},className:"hidden"}),e.jsx("div",{className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center hover:border-green-500 hover:bg-green-50 transition-colors",children:e.jsx(On,{className:"w-6 h-6 text-gray-400"})})]})]})]})}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Edit the text content, upload product image and logo for the WhatsApp subscription modal"}),e.jsxs("button",{onClick:async()=>{try{const me=s.find(be=>be.id==="whatsappsubscription");if(!me)return;await St("whatsappsubscription",me.images[0]||"",void 0,me.images),t("success","WhatsApp subscription content saved successfully")}catch{t("error","Failed to save WhatsApp subscription content")}},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Ms,{className:"w-4 h-4"}),"Save Content"]})]})]}),he.id==="top_media_carousel"&&x&&e.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zu,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold text-blue-900",children:"Animation & Design Settings"})]}),e.jsx("button",{onClick:()=>g(!1),className:"p-1 hover:bg-blue-200 rounded transition-colors",children:e.jsx(Qt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Animation Type"}),e.jsxs("select",{value:Fe.animationType,onChange:me=>Be({...Fe,animationType:me.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"fade",children:"Fade"}),e.jsx("option",{value:"slide",children:"Slide"}),e.jsx("option",{value:"zoom",children:"Zoom"}),e.jsx("option",{value:"cube",children:"Cube 3D"}),e.jsx("option",{value:"flip",children:"Flip"}),e.jsx("option",{value:"coverflow",children:"Coverflow"}),e.jsx("option",{value:"cards",children:"Cards"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Design Style"}),e.jsxs("select",{value:Fe.designStyle,onChange:me=>Be({...Fe,designStyle:me.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"modern",children:"Modern"}),e.jsx("option",{value:"classic",children:"Classic"}),e.jsx("option",{value:"minimal",children:"Minimal"}),e.jsx("option",{value:"gradient",children:"Gradient"}),e.jsx("option",{value:"dark",children:"Dark Theme"}),e.jsx("option",{value:"colorful",children:"Colorful"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Transition Duration: ",Fe.transitionDuration,"ms"]}),e.jsx("input",{type:"range",min:"300",max:"3000",step:"100",value:Fe.transitionDuration,onChange:me=>Be({...Fe,transitionDuration:parseInt(me.target.value)}),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"Fast (300ms)"}),e.jsx("span",{children:"Slow (3000ms)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Auto-play Delay: ",Fe.autoPlayDelay/1e3,"s"]}),e.jsx("input",{type:"range",min:"2000",max:"15000",step:"500",value:Fe.autoPlayDelay,onChange:me=>Be({...Fe,autoPlayDelay:parseInt(me.target.value)}),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"2s"}),e.jsx("span",{children:"15s"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Fe.autoPlay,onChange:me=>Be({...Fe,autoPlay:me.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Auto-play"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Fe.showDots,onChange:me=>Be({...Fe,showDots:me.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Show Navigation Dots"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Fe.showArrows,onChange:me=>Be({...Fe,showArrows:me.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Show Arrow Buttons"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Fe.loop,onChange:me=>Be({...Fe,loop:me.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Loop Slides"})]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{const me=s.find(be=>be.id==="top_media_carousel");me!=null&&me.settings&&Be(me.settings),g(!1)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:async()=>{const me=s.find(be=>be.id==="top_media_carousel");if(me){r(be=>be.map(ye=>ye.id==="top_media_carousel"?{...ye,settings:Fe}:ye));try{await St("top_media_carousel",me.images[0]||"",void 0,me.images),t("success","Top Media Carousel settings saved successfully"),g(!1)}catch{t("error","Failed to save top media carousel settings")}}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),"Save Settings"]})]})]}),he.id==="hero_banner"&&f&&e.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zu,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold text-blue-900",children:"Animation & Design Settings"})]}),e.jsx("button",{onClick:()=>h(!1),className:"p-1 hover:bg-blue-200 rounded transition-colors",children:e.jsx(Qt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Animation Type"}),e.jsxs("select",{value:_e.animationType,onChange:me=>Y({..._e,animationType:me.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"fade",children:"Fade"}),e.jsx("option",{value:"slide",children:"Slide"}),e.jsx("option",{value:"zoom",children:"Zoom"}),e.jsx("option",{value:"cube",children:"Cube 3D"}),e.jsx("option",{value:"flip",children:"Flip"}),e.jsx("option",{value:"coverflow",children:"Coverflow"}),e.jsx("option",{value:"cards",children:"Cards"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Design Style"}),e.jsxs("select",{value:_e.designStyle,onChange:me=>Y({..._e,designStyle:me.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"modern",children:"Modern"}),e.jsx("option",{value:"classic",children:"Classic"}),e.jsx("option",{value:"minimal",children:"Minimal"}),e.jsx("option",{value:"gradient",children:"Gradient"}),e.jsx("option",{value:"dark",children:"Dark Theme"}),e.jsx("option",{value:"colorful",children:"Colorful"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Transition Duration: ",_e.transitionDuration,"ms"]}),e.jsx("input",{type:"range",min:"300",max:"3000",step:"100",value:_e.transitionDuration,onChange:me=>Y({..._e,transitionDuration:parseInt(me.target.value)}),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"Fast (300ms)"}),e.jsx("span",{children:"Slow (3000ms)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Auto-play Delay: ",_e.autoPlayDelay/1e3,"s"]}),e.jsx("input",{type:"range",min:"2000",max:"15000",step:"500",value:_e.autoPlayDelay,onChange:me=>Y({..._e,autoPlayDelay:parseInt(me.target.value)}),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"2s"}),e.jsx("span",{children:"15s"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:_e.autoPlay,onChange:me=>Y({..._e,autoPlay:me.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Auto-play"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:_e.showDots,onChange:me=>Y({..._e,showDots:me.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Show Navigation Dots"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:_e.showArrows,onChange:me=>Y({..._e,showArrows:me.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Show Arrow Buttons"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:_e.loop,onChange:me=>Y({..._e,loop:me.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Loop Slides"})]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{const me=s.find(be=>be.id==="hero_banner");me!=null&&me.settings&&Y(me.settings),h(!1)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:lt,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),"Save Settings"]})]})]}),he.images.length===0?e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(qn,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Drag and drop ",he.id==="hero_banner"||he.id==="top_media_carousel"?"images or videos":"images"," here"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"or click the upload button above"})]}):e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:[he.images.map((me,be)=>{const ye=me.toLowerCase(),Pe=/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(me),Re=me.includes("/uploads/"),$e=Pe||Re&&(ye.includes("video")||ye.includes("mp4")||ye.includes("webm")||ye.includes("mov")),Te=he.id==="top_media_carousel"&&he.mediaItems?he.mediaItems[be]:null,we=(Te==null?void 0:Te.timing)||(he.id==="top_media_carousel"?Fe.autoPlayDelay:void 0);return(K==null?void 0:K.sectionId)===he.id&&(K==null||K.index),e.jsxs("div",{className:"relative group",children:[$e?e.jsx("video",{src:me,className:"w-full h-32 object-cover rounded-lg border border-gray-200",controls:!1,muted:!0,playsInline:!0,poster:Te==null?void 0:Te.thumbnail,children:"Your browser does not support the video tag."}):e.jsx("img",{src:me,alt:`${he.name} ${be+1}`,className:`w-full object-cover rounded-lg border border-gray-200 ${he.id==="hero_banner"?"h-40":"h-32"}`,style:he.id==="hero_banner"?{aspectRatio:"5/4"}:{}}),$e&&e.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 bg-black bg-opacity-70 text-white text-xs rounded",children:"Video"}),he.id==="top_media_carousel"&&we&&e.jsxs("div",{className:"absolute bottom-2 right-2 px-2 py-1 bg-blue-600 bg-opacity-90 text-white text-xs rounded flex items-center gap-1",children:[e.jsx(os,{className:"w-3 h-3"}),we/1e3,"s"]}),!p&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ot(he.id,be),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity z-10",children:e.jsx(Qt,{className:"w-4 h-4"})}),e.jsx("div",{className:"absolute top-2 left-2 flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:$e?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Ft(he.id,be),className:"p-1 bg-green-500 text-white rounded-full",title:"Crop Video",children:e.jsx(Mu,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Xe(he.id,be),className:"p-1 bg-blue-500 text-white rounded-full",title:"Crop Video Thumbnail",children:e.jsx(qn,{className:"w-4 h-4"})})]}):e.jsx("button",{onClick:()=>{_(me),D(he.id),O(be);const Ge=ne(he.id)||1;z(Ge),P(null),C(!0)},className:"p-1 bg-green-500 text-white rounded-full",title:"Crop Image",children:e.jsx(Mu,{className:"w-4 h-4"})})}),he.id==="top_media_carousel"&&e.jsx("button",{onClick:()=>{J({sectionId:he.id,index:be}),q(we||Fe.autoPlayDelay)},className:"absolute bottom-2 left-2 p-1 bg-purple-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity z-10",title:"Set Timing",children:e.jsx(os,{className:"w-4 h-4"})}),e.jsxs("label",{className:`absolute cursor-pointer ${he.id==="top_media_carousel"?"bottom-2 right-2":"bottom-2 left-2"}`,children:[e.jsx("input",{type:"file",accept:he.id==="hero_banner"||he.id==="top_media_carousel"?"image/*,video/*":"image/*",onChange:Ge=>{var ut;const st=(ut=Ge.target.files)==null?void 0:ut[0];st&&(fe(st)?Ue(st,he.id,be,!0):Ue(st,he.id,be))},className:"hidden"}),e.jsx("div",{className:"p-1 bg-blue-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(On,{className:"w-3 h-3"})})]})]})]},be)}),he.images.length<he.imageCount&&!p&&e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:he.id==="hero_banner"||he.id==="top_media_carousel"?"image/*,video/*":"image/*",multiple:he.id==="hero_banner"||he.id==="top_media_carousel",onChange:me=>$r(me,he.id),className:"hidden"}),e.jsx("div",{className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center hover:border-blue-500 hover:bg-blue-50 transition-colors",children:e.jsx(On,{className:"w-6 h-6 text-gray-400"})})]})]}),d[he.id]&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 text-blue-600",children:[e.jsx(br,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Uploading..."})]})})]},he.id))}),e.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How to use:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"Drag images or videos from your computer directly onto any section"}),e.jsx("li",{children:"Or click the upload icon to browse and select files"}),e.jsx("li",{children:"Top Media Carousel and Hero Banner support up to 30 images and videos"}),e.jsx("li",{children:"Videos should be in MP4, WebM, OGG, MOV, or AVI format (max 100MB)"}),e.jsx("li",{children:'Click "Create New Section" to add custom sections to your homepage'}),e.jsx("li",{children:"Hover over media to replace or remove them"}),e.jsx("li",{children:"Changes are saved automatically to the CMS"}),e.jsx("li",{children:"Use Preview Mode to see how it looks without edit controls"})]})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Create New Section"}),e.jsx("button",{onClick:()=>{b(!1),xe({name:"",description:"",sectionType:"",imageCount:5,type:"gallery"})},className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(Qt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section Name *"}),e.jsx("input",{type:"text",value:ae.name,onChange:he=>xe({...ae,name:he.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Featured Products, Special Offers"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:ae.description,onChange:he=>xe({...ae,description:he.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Brief description of this section"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section Type (Unique ID) *"}),e.jsx("input",{type:"text",value:ae.sectionType,onChange:he=>{const me=he.target.value.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"");xe({...ae,sectionType:`custom_${me}`})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"featured-products (will become: custom_featured_products)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only lowercase letters, numbers, and underscores"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Images/Videos"}),e.jsx("input",{type:"number",value:ae.imageCount,onChange:he=>xe({...ae,imageCount:parseInt(he.target.value)||5}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"1",max:"50"})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[e.jsx("button",{onClick:()=>{b(!1),xe({name:"",description:"",sectionType:"",imageCount:5,type:"gallery"})},className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:async()=>{if(!ae.name||!ae.sectionType){t("error","Please fill in all required fields");return}try{if((await fetch(`${rr}/api/cms/sections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page_slug:"home",section_type:ae.sectionType||`custom_${ae.name.toLowerCase().replace(/\s+/g,"_")}`,title:ae.name,content:{title:ae.name,description:ae.description,images:[]},order_index:s.length,is_active:!0})})).ok)t("success","Section created successfully"),b(!1),xe({name:"",description:"",sectionType:"",imageCount:5,type:"gallery"}),await wt();else throw new Error("Failed to create section")}catch(he){console.error("Failed to create section:",he),t("error","Failed to create section")}},className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),"Create Section"]})]})]})]})}),k&&L&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Choose Image Size"}),(()=>{const he=s.find(be=>be.id===L.sectionId),me=ne(L.sectionId);if(me){const be=me===1.25?"5:4":me===1.7777777777777777?"16:9":me===1.3333333333333333?"4:3":me===.8?"4:5":"1:1";return e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Recommended for ",he==null?void 0:he.name,": ",be]})}return null})()]}),e.jsx("button",{onClick:()=>{X(!1),H(null),B(null)},className:"p-2 hover:bg-gray-100 rounded transition-colors",children:e.jsx(Qt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-2 mb-4 max-h-[60vh] overflow-y-auto",children:[e.jsxs("button",{onClick:()=>Ct(null),className:"w-full px-4 py-3 text-left border border-gray-300 rounded-lg hover:bg-blue-50 hover:border-blue-500 transition-colors",children:[e.jsx("div",{className:"font-medium",children:"Free (No Crop)"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Upload image as-is without cropping"})]}),(()=>{const he=ne(L.sectionId);return[{name:"Square (1:1)",ratio:1,desc:"Perfect for profile images and thumbnails"},{name:"Landscape (16:9)",ratio:16/9,desc:"Widescreen format for banners"},{name:"Portrait (4:5)",ratio:4/5,desc:"Vertical format for mobile"},{name:"Hero Banner (5:4)",ratio:5/4,desc:"Standard hero banner format"},{name:"Standard (4:3)",ratio:4/3,desc:"Classic photo format"}].map(be=>{const ye=he&&Math.abs(be.ratio-he)<.01;return e.jsxs("button",{onClick:()=>Ct(be),className:`w-full px-4 py-3 text-left border rounded-lg transition-colors ${ye?"border-blue-500 bg-blue-50 hover:bg-blue-100":"border-gray-300 hover:bg-blue-50 hover:border-blue-500"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:be.name}),ye&&e.jsx("span",{className:"text-xs bg-blue-500 text-white px-2 py-0.5 rounded",children:"Recommended"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:be.desc})]},be.name)})})()]})]})}),N&&w&&e.jsx(Cj,{imageUrl:w,aspectRatio:I,onCrop:kt,onCancel:it}),A&&v&&e.jsx(W8,{videoUrl:v,aspectRatio:I,onCrop:bt,onCancel:Hs}),K&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Set Media Timing"}),e.jsx("button",{onClick:()=>{J(null),q(7e3)},className:"p-2 hover:bg-gray-100 rounded transition-colors",children:e.jsx(Qt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Display Duration: ",(re/1e3).toFixed(1),"s"]}),e.jsx("input",{type:"range",min:"1000",max:"30000",step:"500",value:re,onChange:he=>q(parseInt(he.target.value)),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"1s"}),e.jsx("span",{children:"30s"})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[e.jsx("button",{onClick:()=>{J(null),q(7e3)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:async()=>{K&&(await pe(K.sectionId,K.index,re),J(null),q(7e3))},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),"Save Timing"]})]})]})]})})]})}const H8=()=>"http://192.168.1.36:2000";function G8(){const{notify:t}=Sr(),[s,r]=y.useState("offers"),[a,n]=y.useState([]),[i,l]=y.useState([]),[o,c]=y.useState([]),[d,u]=y.useState(!1),[p,m]=y.useState(!0),[f,h]=y.useState(null),[x,g]=y.useState(null),[j,b]=y.useState(!1),N=H8();y.useEffect(()=>{C(),s==="recommendation_posts"?F():A()},[s]);const C=async()=>{try{m(!0),console.log(" Loading products from API:",`${N}/api/products`);const S=await fetch(`${N}/api/products?_=${Date.now()}`,{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(!S.ok)throw new Error(`HTTP error! status: ${S.status}`);const R=await S.json();console.log(" Raw API response:",typeof R,Array.isArray(R)?`Array with ${R.length} items`:"Object");let D=[];Array.isArray(R)?(D=R,console.log(" Response is array:",D.length)):R&&R.success&&Array.isArray(R.data)?(D=R.data,console.log(" Response has success.data:",D.length)):R&&Array.isArray(R.data)?(D=R.data,console.log(" Response has data array:",D.length)):console.warn(" Unexpected response format:",R);const V=D.filter(O=>O&&O.id&&O.title).map(O=>({id:O.id,title:O.title||"",slug:O.slug||"",list_image:O.list_image||O.listImage||"",price:O.price||""}));console.log(` Valid products: ${V.length}`),c(V),V.length===0&&console.warn(" No valid products found after filtering")}catch(S){console.error(" Failed to load products:",S),t("error","Failed to load products. Please check the console for details."),c([])}finally{m(!1)}},A=async()=>{try{u(!0);const R=await(await fetch(`${N}/api/collections?type=${s}`)).json();R.success&&n(R.data||[])}catch(S){console.error("Failed to load collections:",S),t("error","Failed to load collections")}finally{u(!1)}},F=async()=>{try{u(!0);const R=await(await fetch(`${N}/api/recommendation-posts`)).json();R.success&&l(R.data||[])}catch(S){console.error("Failed to load recommendation posts:",S),t("error","Failed to load recommendation posts")}finally{u(!1)}},w=async S=>{try{const R=localStorage.getItem("auth_token"),D=localStorage.getItem("role")||"admin",V=localStorage.getItem("permissions")||"orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update",O=f!=null&&f.id?`${N}/api/${s==="recommendation_posts"?"recommendation-posts":"collections"}/${f.id}`:`${N}/api/${s==="recommendation_posts"?"recommendation-posts":"collections"}`,I=f!=null&&f.id?"PUT":"POST",Q=await(await fetch(O,{method:I,headers:{"Content-Type":"application/json","x-user-role":D,"x-user-permissions":V,...R&&{Authorization:`Bearer ${R}`}},body:JSON.stringify(S)})).json();Q.success?(t("success",f!=null&&f.id?"Updated successfully":"Created successfully"),b(!1),h(null),s==="recommendation_posts"?F():A()):t("error",Q.message||"Failed to save")}catch(R){console.error("Failed to save:",R),t("error","Failed to save")}},_=async()=>{if(x)try{const S=localStorage.getItem("auth_token"),R=localStorage.getItem("role")||"admin",D=localStorage.getItem("permissions")||"orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update",V=x.type==="post"?`${N}/api/recommendation-posts/${x.id}`:`${N}/api/collections/${x.id}`,I=await(await fetch(V,{method:"DELETE",headers:{"x-user-role":R,"x-user-permissions":D,...S&&{Authorization:`Bearer ${S}`}}})).json();I.success?(t("success","Deleted successfully"),g(null),s==="recommendation_posts"?F():A()):t("error",I.message||"Failed to delete")}catch(S){console.error("Failed to delete:",S),t("error","Failed to delete")}},v=[{id:"offers",label:"Offers",icon:""},{id:"new_arrivals",label:"New Arrivals",icon:""},{id:"best_sellers",label:"Best Sellers",icon:""},{id:"recommendations",label:"Recommendations",icon:""},{id:"recommendation_posts",label:"Recommendation Posts",icon:""}];return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Product Collections"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage product collections and recommendations"})]}),e.jsxs("button",{onClick:()=>{h(null),b(!0)},className:"btn-primary",children:["Add ",s==="recommendation_posts"?"Recommendation Post":"Item"]})]}),e.jsx("div",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:v.map(S=>e.jsxs("button",{onClick:()=>r(S.id),className:`whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium transition-colors ${s===S.id?"":"border-transparent"}`,style:s===S.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx("span",{className:"mr-2",children:S.icon}),S.label]},S.id))})}),s!=="recommendation_posts"&&e.jsx(q8,{collections:a,loading:d,onEdit:S=>{h(S),b(!0)},onDelete:S=>g({id:S,type:"collection"}),onTogglePublish:async(S,R)=>{try{const D=localStorage.getItem("auth_token"),V=localStorage.getItem("role")||"admin",O=localStorage.getItem("permissions")||"orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update";(await(await fetch(`${N}/api/collections/${S}`,{method:"PUT",headers:{"Content-Type":"application/json","x-user-role":V,"x-user-permissions":O,...D&&{Authorization:`Bearer ${D}`}},body:JSON.stringify({is_published:!R})})).json()).success&&(t("success","Updated successfully"),A())}catch{t("error","Failed to update")}}}),s==="recommendation_posts"&&e.jsx(J8,{posts:i,loading:d,onEdit:S=>{h(S),b(!0)},onDelete:S=>g({id:S,type:"post"}),onTogglePublish:async(S,R)=>{try{const D=localStorage.getItem("auth_token"),V=localStorage.getItem("role")||"admin",O=localStorage.getItem("permissions")||"orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update";(await(await fetch(`${N}/api/recommendation-posts/${S}`,{method:"PUT",headers:{"Content-Type":"application/json","x-user-role":V,"x-user-permissions":O,...D&&{Authorization:`Bearer ${D}`}},body:JSON.stringify({is_published:!R})})).json()).success&&(t("success","Updated successfully"),F())}catch{t("error","Failed to update")}}}),j&&e.jsx(K8,{type:s,editing:f,products:o,productsLoading:p,onClose:()=>{b(!1),h(null)},onSave:w}),x&&e.jsx($a,{open:!0,onClose:()=>g(null),onConfirm:_,title:"Delete Item",description:"Are you sure you want to delete this item? This action cannot be undone."})]})}function q8({collections:t,loading:s,onEdit:r,onDelete:a,onTogglePublish:n}){const l="http://192.168.1.36:2000",o=c=>{if(!c)return"";if(/^https?:\/\//i.test(c))return c;const d=l.replace(/\/$/,""),u=c.startsWith("/")?c:`/${c}`;return`${d}${u}`};return s?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):t.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No items found"}):e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(c=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[(c.product_image||c.image_url)&&e.jsx("img",{src:o(c.product_image||c.image_url||""),alt:c.product_title||"",className:"h-12 w-12 rounded object-cover mr-3",style:{aspectRatio:"1/1"},onError:d=>{const u=d.currentTarget;u.style.display="none"}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:c.product_title||c.title||"No Product"}),c.product_id&&e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",c.product_id]})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:c.title||"-"}),c.subtitle&&e.jsx("div",{className:"text-sm text-gray-500",children:c.subtitle})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:c.code||"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>n(c.id,c.is_published),className:`px-2 py-1 rounded text-xs font-medium ${c.is_published?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:c.is_published?"Published":"Draft"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.order_index}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>r(c),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>a(c.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},c.id))})]})})}function J8({posts:t,loading:s,onEdit:r,onDelete:a,onTogglePublish:n}){return s?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):t.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No posts found"}):e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Products"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Published"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(i=>{var l,o;return e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:i.title}),i.content&&e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:i.content})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[((l=i.products)==null?void 0:l.length)||((o=i.product_ids)==null?void 0:o.length)||0," products"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>n(i.id,i.is_published),className:`px-2 py-1 rounded text-xs font-medium ${i.is_published?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:i.is_published?"Published":"Draft"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.published_at?new Date(i.published_at).toLocaleDateString():"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>r(i),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>a(i.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},i.id)})})]})})}function K8({type:t,editing:s,products:r,productsLoading:a,onClose:n,onSave:i}){var C,A;const{notify:l}=Sr(),o=t==="recommendation_posts",c=!!s,[d,u]=y.useState(!1),[p,m]=y.useState(null),h="http://192.168.1.36:2000",x=F=>{if(!F)return"";if(/^https?:\/\//i.test(F))return F;const w=h.replace(/\/$/,""),_=F.startsWith("/")?F:`/${F}`;return`${w}${_}`},[g,j]=y.useState(()=>{if(s)if(o){const F=s;return{title:F.title||"",content:F.content||"",image_url:F.image_url||"",product_ids:F.product_ids||[],is_published:F.is_published||!1,order_index:F.order_index||0}}else{const F=s;return{collection_type:F.collection_type,product_id:F.product_id||"",title:F.title||"",subtitle:F.subtitle||"",description:F.description||"",image_url:F.image_url||"",code:F.code||"",expiry_date:F.expiry_date||"",discount_percent:F.discount_percent||"",discount_amount:F.discount_amount||"",is_featured:F.is_featured||!1,is_published:F.is_published||!1,order_index:F.order_index||0}}return{collection_type:t,product_id:"",title:"",subtitle:"",description:"",image_url:"",code:"",expiry_date:"",discount_percent:"",discount_amount:"",is_featured:!1,is_published:!1,order_index:0,...o&&{title:"",content:"",image_url:"",product_ids:[],is_published:!1,order_index:0}}});y.useEffect(()=>{if(g.image_url){const F=/^https?:\/\//i.test(g.image_url)?g.image_url:x(g.image_url);m(F),console.log(" Image preview updated:",{image_url:g.image_url,previewUrl:F})}else m(null)},[g.image_url]);const b=async F=>{var _;const w=(_=F.target.files)==null?void 0:_[0];if(w){if(!w.type.startsWith("image/")){l("error","Please select an image file");return}if(w.size>5*1024*1024){l("error","Image size must be less than 5MB");return}try{u(!0);const v=await Dr(w,h),S=v.replace(/^https?:\/\/[^/]+/,"");console.log(" Uploaded image:",{absoluteUrl:v,relativePath:S}),j({...g,image_url:S}),m(v),l("success","Image uploaded successfully")}catch(v){console.error("Upload failed:",v),l("error","Failed to upload image")}finally{u(!1)}}},N=F=>{F.preventDefault();const w={...g};w.image_url&&(/^https?:\/\//i.test(w.image_url)?w.image_url=w.image_url.replace(/^https?:\/\/[^/]+/,""):w.image_url.startsWith("/")||(w.image_url=`/${w.image_url}`)),o?(w.product_ids=Array.isArray(w.product_ids)?w.product_ids:[],w.order_index=parseInt(w.order_index)||0):(w.product_id=w.product_id?parseInt(w.product_id):null,w.discount_percent=w.discount_percent?parseFloat(w.discount_percent):null,w.discount_amount=w.discount_amount?parseFloat(w.discount_amount):null,w.order_index=parseInt(w.order_index)||0),console.log(" Saving collection with data:",{...w,image_url:w.image_url}),i(w)};return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold",children:[c?"Edit":"Add"," ",o?"Recommendation Post":"Collection Item"]}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[!o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product *"}),e.jsxs("select",{value:g.product_id||"",onChange:F=>j({...g,product_id:F.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,disabled:a,children:[e.jsx("option",{value:"",children:a?"Loading products...":"Select Product"}),a?e.jsx("option",{disabled:!0,children:"Loading products..."}):r.length===0?e.jsx("option",{disabled:!0,children:"No products available"}):r.map(F=>e.jsxs("option",{value:F.id,children:[F.title," ",F.price?`- ${F.price}`:""]},F.id))]}),a&&e.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Loading products from server..."}),!a&&r.length===0&&e.jsxs("p",{className:"mt-1 text-sm text-red-500",children:["No products available. Please add products first in the Products page.",e.jsx("button",{type:"button",onClick:()=>window.open("/admin/products","_blank"),className:"ml-2 text-blue-600 hover:underline",children:"Go to Products"})]}),!a&&r.length>0&&e.jsxs("p",{className:"mt-1 text-sm text-green-600",children:[r.length," product(s) available"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{type:"text",value:g.title,onChange:F=>j({...g,title:F.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subtitle"}),e.jsx("input",{type:"text",value:g.subtitle,onChange:F=>j({...g,subtitle:F.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:g.description,onChange:F=>j({...g,description:F.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Code"}),e.jsx("input",{type:"text",value:g.code,onChange:F=>j({...g,code:F.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Expiry Date"}),e.jsx("input",{type:"date",value:g.expiry_date,onChange:F=>j({...g,expiry_date:F.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Discount %"}),e.jsx("input",{type:"number",step:"0.01",value:g.discount_percent,onChange:F=>j({...g,discount_percent:F.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Discount Amount"}),e.jsx("input",{type:"number",step:"0.01",value:g.discount_amount,onChange:F=>j({...g,discount_amount:F.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]})]}),o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title *"}),e.jsx("input",{type:"text",required:!0,value:g.title,onChange:F=>j({...g,title:F.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Content"}),e.jsx("textarea",{value:g.content,onChange:F=>j({...g,content:F.target.value}),rows:5,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Products"}),e.jsx("select",{multiple:!0,value:((C=g.product_ids)==null?void 0:C.map(String))||[],onChange:F=>{const w=Array.from(F.target.selectedOptions,_=>parseInt(_.value));j({...g,product_ids:w})},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",size:5,children:r.length===0?e.jsx("option",{disabled:!0,children:"Loading products..."}):r.map(F=>e.jsxs("option",{value:F.id,children:[F.title," ",F.price?`- ${F.price}`:""]},F.id))}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Hold Ctrl/Cmd to select multiple products"}),((A=g.product_ids)==null?void 0:A.length)>0&&e.jsxs("p",{className:"mt-1 text-sm text-blue-600",children:["Selected: ",g.product_ids.length," product(s)"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Image"}),e.jsxs("div",{className:"mt-1 space-y-3",children:[p&&e.jsxs("div",{className:"relative w-full bg-gray-100 rounded-lg p-2",children:[e.jsx("img",{src:p,alt:"Preview",className:"w-full h-auto rounded-lg border border-gray-300 object-contain",style:{maxHeight:"256px",width:"auto",margin:"0 auto",display:"block"},onError:F=>{console.error(" Image preview failed to load:",p);const w=F.currentTarget;w.style.display="none",l("error","Failed to load image preview")},onLoad:()=>{console.log(" Image preview loaded:",p)}}),e.jsx("button",{type:"button",onClick:()=>{j({...g,image_url:""}),m(null)},className:"absolute top-4 right-4 bg-red-500 text-white rounded-full p-1.5 hover:bg-red-600 shadow-lg",title:"Remove image",children:""})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"flex-1 cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:b,disabled:d,className:"hidden"}),e.jsx("div",{className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsx("span",{className:"text-sm text-gray-600",children:"Uploading..."}):e.jsx("span",{className:"text-sm text-gray-700",children:" Upload Image"})})]}),e.jsx("span",{className:"text-sm text-gray-500",children:"or"}),e.jsx("input",{type:"url",value:g.image_url||"",onChange:F=>{const w=F.target.value;if(j({...g,image_url:w}),w){const _=/^https?:\/\//i.test(w)?w:x(w);m(_)}else m(null)},placeholder:"Enter image URL (e.g., /uploads/image.jpg or http://...)",className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Upload an image or enter a URL. Recommended: 1200x800px or similar aspect ratio"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Order Index"}),e.jsx("input",{type:"number",value:g.order_index,onChange:F=>j({...g,order_index:F.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-6",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:g.is_featured||!1,onChange:F=>j({...g,is_featured:F.target.checked}),className:"mr-2"}),"Featured"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:g.is_published,onChange:F=>j({...g,is_published:F.target.checked}),className:"mr-2"}),"Published"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d||!o&&!g.product_id,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Uploading...":c?"Update":"Create"})]})]})]})})}function Y8(){const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState(!0),[l,o]=y.useState(""),[c,d]=y.useState("all"),[u,p]=y.useState("cart"),[m,f]=y.useState(null),[h,x]=y.useState(null),[g,j]=y.useState(!1);y.useEffect(()=>{b()},[]);const b=async()=>{try{i(!0);const[v,S]=await Promise.all([fetch("/api/admin/cart/items"),fetch("/api/admin/checkout/sessions")]);if(v.ok){const R=await v.json();s(R.items||[])}if(S.ok){const R=await S.json();a(R.sessions||[])}}catch(v){console.error("Error fetching cart/checkout data:",v)}finally{i(!1)}},N=t.filter(v=>v.product_name.toLowerCase().includes(l.toLowerCase())||v.user_name.toLowerCase().includes(l.toLowerCase())||v.user_email.toLowerCase().includes(l.toLowerCase())),C=r.filter(v=>{const S=v.user_name.toLowerCase().includes(l.toLowerCase())||v.user_email.toLowerCase().includes(l.toLowerCase())||v.session_id.toLowerCase().includes(l.toLowerCase()),R=c==="all"||v.status===c;return S&&R}),A=async(v,S)=>{try{(await fetch(`/api/admin/cart/items/${v}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantity:S})})).ok?s(t.map(D=>D.id===v?{...D,quantity:S,total_price:D.price*S}:D)):alert("Failed to update cart item quantity")}catch(R){console.error("Error updating cart item:",R),alert("Error updating cart item")}},F=async v=>{if(confirm("Are you sure you want to remove this item from cart?"))try{(await fetch(`/api/admin/cart/items/${v}`,{method:"DELETE"})).ok?s(t.filter(R=>R.id!==v)):alert("Failed to remove cart item")}catch(S){console.error("Error removing cart item:",S),alert("Error removing cart item")}},w=async(v,S)=>{try{(await fetch(`/api/admin/checkout/sessions/${v}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:S})})).ok?a(D=>D.map(V=>V.id===v?{...V,status:S}:V)):alert("Failed to update session status")}catch(R){console.error("Error updating session status:",R),alert("Error updating session status")}},_=v=>{switch(v){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"abandoned":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"expired":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Cart & Checkout Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage user carts and checkout sessions"})]}),e.jsx("div",{children:e.jsx("div",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"cart",label:"Cart Items",icon:Qs},{id:"checkout",label:"Checkout Sessions",icon:si}].map(v=>e.jsxs("button",{onClick:()=>p(v.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm transition-colors ${u===v.id?"":"border-transparent"}`,style:u===v.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx(v.icon,{className:"h-4 w-4 mr-2"}),v.label]},v.id))})})}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search cart/checkout data...",value:l,onChange:v=>o(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),u==="checkout"&&e.jsxs("select",{value:c,onChange:v=>d(v.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"abandoned",children:"Abandoned"}),e.jsx("option",{value:"expired",children:"Expired"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(Qs,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Cart Items"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(si,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Checkout Sessions"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(os,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending Sessions"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r.filter(v=>v.status==="pending").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(ha,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Cart Value"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:["",t.reduce((v,S)=>v+S.total_price,0).toLocaleString()]})]})]})})]}),u==="cart"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Added"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:N.map(v=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-lg object-cover",src:v.product_image||"/placeholder-product.png",alt:v.product_name})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:v.product_name}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",v.product_id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:v.user_name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:v.user_email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>A(v.id,Math.max(1,v.quantity-1)),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"-"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white min-w-[2rem] text-center",children:v.quantity}),e.jsx("button",{onClick:()=>A(v.id,v.quantity+1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"+"})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["",v.price.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["",v.total_price.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(v.added_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{f(v),j(!0)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(nt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>F(v.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},v.id))})]})})}),u==="checkout"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Session"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Items"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:C.map(v=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:v.session_id}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",v.id]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:v.user_name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:v.user_email})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["",v.total_amount.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:v.items_count}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_(v.status)}`,children:v.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(v.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{x(v),j(!0)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(nt,{className:"h-4 w-4"})}),v.status==="pending"&&e.jsx("button",{onClick:()=>w(v.id,"completed"),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:"Complete"})]})})]},v.id))})]})})}),g&&(m||h)&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:m?"Cart Item Details":"Checkout Session Details"}),e.jsx("div",{className:"space-y-4",children:m?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Product"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:m.product_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"User"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[m.user_name," (",m.user_email,")"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Quantity"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:m.quantity})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Unit Price"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:["",m.price.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Price"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:["",m.total_price.toLocaleString()]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Added At"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(m.added_at).toLocaleString()})]})]}):h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Session ID"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:h.session_id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"User"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[h.user_name," (",h.user_email,")"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Amount"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:["",h.total_amount.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Items Count"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:h.items_count})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_(h.status)}`,children:h.status})]})]}),h.payment_method&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Payment Method"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:h.payment_method})]}),h.shipping_address&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Shipping Address"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:h.shipping_address})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Created At"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(h.created_at).toLocaleString()})]}),h.completed_at&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Completed At"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(h.completed_at).toLocaleString()})]})]}):null}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>{j(!1),f(null),x(null)},className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Close"})})]})})})]})}function X8(){const[t,s]=y.useState([]),[r,a]=y.useState(null),[n,i]=y.useState(!0),[l,o]=y.useState("all"),[c,d]=y.useState(1),[u,p]=y.useState(1),[m,f]=y.useState(""),[h,x]=y.useState(""),[g,j]=y.useState(!1),[b,N]=y.useState("view"),[C,A]=y.useState(""),[F,w]=y.useState("date"),[_,v]=y.useState("desc"),[S,R]=y.useState({total:0,pending:0,approved:0,rejected:0}),[D,V]=y.useState({commission_percentage:15,is_active:!0}),[O,I]=y.useState(!1),[z,Q]=y.useState(!1),[P,k]=y.useState("applications"),[X,se]=y.useState([]),[B,L]=y.useState(!1),[H,K]=y.useState(null),[J,re]=y.useState("");y.useEffect(()=>{q(),ae()},[l,c,F,_]),y.useEffect(()=>{P==="referrals"&&ve()},[P]),y.useEffect(()=>{const fe=setTimeout(()=>{C!==""&&q()},500);return()=>clearTimeout(fe)},[C]);const q=async()=>{try{i(!0);const fe=new URLSearchParams({page:c.toString(),limit:"10",sort:F,order:_});l!=="all"&&fe.append("status",l),C.trim()&&fe.append("search",C.trim());const ne=await fetch(`/api/admin/affiliate-applications?${fe}`),Ue=await ne.json();ne.ok&&Ue.applications?(s(Ue.applications),p(Ue.pagination.pages),R({total:Ue.pagination.total,pending:Ue.applications.filter(kt=>kt.status==="pending").length,approved:Ue.applications.filter(kt=>kt.status==="approved").length,rejected:Ue.applications.filter(kt=>kt.status==="rejected").length})):(console.error("Failed to fetch applications:",Ue.error||"Unknown error"),s([]),p(0),R({total:0,pending:0,approved:0,rejected:0}))}catch(fe){console.error("Error fetching applications:",fe),alert("Failed to load applications. Please check your connection and try again.")}finally{i(!1)}},ae=async()=>{try{const fe=await fetch("/api/admin/affiliate-commission-settings"),ne=await fe.json();fe.ok&&ne.commission_percentage!==void 0&&V(ne)}catch(fe){console.error("Error fetching commission settings:",fe)}},xe=async()=>{try{Q(!0);const fe=await fetch("/api/admin/affiliate-commission-settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)}),ne=await fe.json();fe.ok&&ne.commission_percentage!==void 0?(alert("Commission settings updated successfully!"),I(!1),V(ne),window.io&&window.io.emit("commission_settings_updated",ne)):alert("Failed to update commission settings: "+(ne.error||"Unknown error"))}catch(fe){console.error("Error updating commission settings:",fe),alert("Error updating commission settings")}finally{Q(!1)}},_e=async()=>{if(r)try{const fe=await fetch(`/api/admin/affiliate-applications/${r.id}/approve`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminNotes:m})}),ne=await fe.json();fe.ok&&ne.application?(alert(`Application approved! Verification code: ${ne.verificationCode}`),j(!1),f(""),q()):alert("Failed to approve application: "+(ne.error||"Unknown error"))}catch(fe){console.error("Error approving application:",fe),alert("Error approving application")}},Y=async()=>{if(!r||!h.trim()){alert("Please provide a rejection reason");return}try{const fe=await fetch(`/api/admin/affiliate-applications/${r.id}/reject`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({rejectionReason:h})}),ne=await fe.json();fe.ok&&ne.id?(alert("Application rejected"),j(!1),x(""),q()):alert("Failed to reject application: "+(ne.error||"Unknown error"))}catch(fe){console.error("Error rejecting application:",fe),alert("Error rejecting application")}},Fe=(fe,ne)=>{a(fe),N(ne),j(!0),f(""),x("")},Be=fe=>{switch(fe){case"approved":return e.jsx(Vt,{className:"h-5 w-5 text-green-500"});case"rejected":return e.jsx(es,{className:"h-5 w-5 text-red-500"});default:return e.jsx(os,{className:"h-5 w-5 text-yellow-500"})}},He=fe=>{switch(fe){case"approved":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"}},Le=fe=>new Date(fe).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),ve=async()=>{try{L(!0);const fe=await fetch("/api/admin/affiliate-referral-analytics"),ne=await fe.json();fe.ok&&ne.analytics?se(ne.analytics):(console.error("Failed to fetch referral analytics:",ne.error||"Unknown error"),se([]))}catch(fe){console.error("Error fetching referral analytics:",fe),se([])}finally{L(!1)}},et=X.filter(fe=>{var Ue,kt,it,Ct;if(!J.trim())return!0;const ne=J.toLowerCase();return((Ue=fe.name)==null?void 0:Ue.toLowerCase().includes(ne))||((kt=fe.email)==null?void 0:kt.toLowerCase().includes(ne))||((it=fe.id)==null?void 0:it.toString().includes(ne))||((Ct=fe.phone)==null?void 0:Ct.includes(ne))}),wt=fe=>{K(H===fe?null:fe)};return e.jsxs("div",{className:"min-h-screen",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)",backgroundColor:"var(--arctic-blue-background)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsx("div",{className:"metric-card border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Affiliate Program Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage affiliate applications, approvals, and partner accounts"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>k("applications"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${P==="applications"?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Applications"}),e.jsx("button",{onClick:()=>k("referrals"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${P==="referrals"?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Referral Analytics"})]})})]})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[e.jsx(u4,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),O?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:D.commission_percentage,onChange:fe=>V(ne=>({...ne,commission_percentage:parseFloat(fe.target.value)||0})),className:"w-20 px-2 py-1 text-sm border border-blue-300 dark:border-blue-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"}),e.jsx("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:"%"}),e.jsx("button",{onClick:xe,disabled:z,className:"p-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 disabled:opacity-50",title:"Save changes",children:e.jsx(Ms,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>I(!1),className:"p-1 text-gray-600 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",title:"Cancel",children:e.jsx(es,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:["Commission: ",D.commission_percentage,"%"]}),e.jsx("button",{onClick:()=>I(!0),className:"p-1 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-800 rounded",title:"Edit commission percentage",children:e.jsx(xr,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"flex items-center gap-3",children:P==="applications"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:q,disabled:n,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[e.jsx(br,{className:`h-4 w-4 ${n?"animate-spin":""}`}),"Refresh"]}),e.jsxs("button",{className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(ja,{className:"h-4 w-4"}),"Export"]})]}):e.jsxs("button",{onClick:ve,disabled:B,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[e.jsx(br,{className:`h-4 w-4 ${B?"animate-spin":""}`}),"Refresh Analytics"]})})]})}),e.jsx("div",{className:"p-6",children:P==="referrals"?e.jsxs("div",{children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by affiliate name, email, ID, or phone...",value:J,onChange:fe=>re(fe.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})}),B?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-12 shadow-sm border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(br,{className:"h-8 w-8 animate-spin mx-auto text-blue-600 dark:text-blue-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading referral analytics..."})]}):et.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-12 shadow-sm border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(vo,{className:"h-8 w-8 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:J?"No affiliates found matching your search":"No affiliate data available"})]}):e.jsx("div",{className:"space-y-4",children:et.map(fe=>{var ne,Ue,kt,it,Ct,St;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"p-6 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",onClick:()=>wt(fe.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:fe.name||"Unknown"}),e.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:["ID: ",fe.id]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${fe.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-400"}`,children:fe.status||"unverified"})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ts,{className:"h-4 w-4"}),fe.email]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(fa,{className:"h-4 w-4"}),fe.phone]}),fe.platform&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Gn,{className:"h-4 w-4"}),fe.platform]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((ne=fe.stats)==null?void 0:ne.total_referrals)||0}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Referrals"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:((Ue=fe.stats)==null?void 0:Ue.confirmed_referrals)||0}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Confirmed"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:((kt=fe.stats)==null?void 0:kt.unique_customers)||0}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Customers"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:["",((Ct=(it=fe.stats)==null?void 0:it.total_earnings)==null?void 0:Ct.toFixed(2))||"0.00"]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Earnings"})]}),H===fe.id?e.jsx(om,{className:"h-5 w-5 text-gray-400"}):e.jsx(lm,{className:"h-5 w-5 text-gray-400"})]})]})}),H===fe.id&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6 bg-gray-50 dark:bg-gray-900/50",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Pt,{className:"h-5 w-5"}),"Referrals (",((St=fe.referrals)==null?void 0:St.length)||0,")"]}),fe.referrals&&fe.referrals.length>0?e.jsx("div",{className:"space-y-4",children:fe.referrals.map((lt,ot)=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:lt.customer_name||"Unknown Customer"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",lt.customer_email,")"]})]}),lt.order_number&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Order: ",lt.order_number]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:["Date: ",Le(lt.referral_date||lt.order_date)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:["",parseFloat(lt.commission_earned||0).toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Commission"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Order Total: ",parseFloat(lt.order_total||lt.order_total_amount||0).toFixed(2)]})]})]}),lt.order_items&&Array.isArray(lt.order_items)&&lt.order_items.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-1",children:[e.jsx(ha,{className:"h-4 w-4"}),"Products:"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:lt.order_items.map((pe,Oe)=>e.jsxs("div",{className:"text-sm bg-gray-50 dark:bg-gray-700/50 rounded p-2",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:pe.title||pe.name||"Unknown Product"}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Qty: ",pe.quantity||0,"  ",parseFloat(pe.price||0).toFixed(2)]})]},Oe))})]})]},ot))}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No referrals yet"})]}),fe.products&&fe.products.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(S4,{className:"h-5 w-5"}),"All Products Sold (",fe.products.length,")"]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Product"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Customer"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Order"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Qty"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:fe.products.map((lt,ot)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:lt.product_name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:lt.customer_name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:lt.order_number}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:lt.quantity}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:["",parseFloat(lt.price||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:Le(lt.referral_date)})]},ot))})]})})})]})]})]},fe.id)})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Applications"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:S.total}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"All time applications"})]}),e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-full",children:e.jsx(Pt,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:S.pending}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Awaiting approval"})]}),e.jsx("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/20 rounded-full",children:e.jsx(os,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:S.approved}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Active partners"})]}),e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-full",children:e.jsx(Vt,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:S.rejected}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Not approved"})]}),e.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/20 rounded-full",children:e.jsx(es,{className:"h-6 w-6 text-red-600 dark:text-red-400"})})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or platform...",value:C,onChange:fe=>A(fe.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(nl,{className:"h-4 w-4 text-gray-400"}),e.jsxs("select",{value:l,onChange:fe=>o(fe.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"h-4 w-4 text-gray-400"}),e.jsxs("select",{value:F,onChange:fe=>w(fe.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"status",children:"Sort by Status"})]})]}),e.jsx("button",{onClick:()=>v(_==="asc"?"desc":"asc"),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:`Sort ${_==="asc"?"Descending":"Ascending"}`,children:_==="asc"?"":""})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Applicant"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Platform"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Followers"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Applied"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(br,{className:"h-4 w-4 animate-spin"}),"Loading applications..."]})})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(vo,{className:"h-8 w-8 text-gray-400"}),"No applications found",C&&e.jsx("p",{className:"text-sm",children:"Try adjusting your search criteria"})]})})}):t.map(fe=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:fe.name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:fe.email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:fe.phone})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:fe.platform})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:fe.followers})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${He(fe.status)}`,children:[Be(fe.status),fe.status]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:Le(fe.application_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Fe(fe,"view"),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(nt,{className:"h-4 w-4"})}),fe.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Fe(fe,"approve"),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:e.jsx(Vt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Fe(fe,"reject"),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(es,{className:"h-4 w-4"})})]})]})})]},fe.id))})]})}),u>1&&e.jsx("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Page ",c," of ",u]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>d(Math.max(1,c-1)),disabled:c===1,className:"px-3 py-1 text-sm border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>d(Math.min(u,c+1)),disabled:c===u,className:"px-3 py-1 text-sm border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]}),g&&r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:[b==="view"&&"Application Details",b==="approve"&&"Approve Application",b==="reject"&&"Reject Application"]}),e.jsx("button",{onClick:()=>j(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:e.jsx(es,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pt,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Name:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.name})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ts,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Email:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fa,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Phone:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.phone})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Social Media Profiles"}),e.jsxs("div",{className:"space-y-3",children:[r.instagram&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(kb,{className:"h-4 w-4 text-pink-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Instagram:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.instagram})]}),r.youtube&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ab,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"YouTube:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.youtube})]}),r.facebook&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(wb,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Facebook:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.facebook})]}),r.snapchat&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fs,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Snapchat:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.snapchat})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Address"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(cm,{className:"h-4 w-4 text-slate-500"}),e.jsxs("span",{className:"text-sm text-slate-900 dark:text-slate-100",children:[r.house_number,", ",r.street,r.building&&`, ${r.building}`,r.apartment&&`, ${r.apartment}`,e.jsx("br",{}),r.road,", ",r.city,e.jsx("br",{}),r.pincode,", ",r.state]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Experience"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-700 p-3 rounded-lg",children:r.experience})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Why Join Nefol?"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-700 p-3 rounded-lg",children:r.why_join})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Platform:"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.platform})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Followers:"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.followers})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Expected Sales:"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.expected_sales})]})]}),b==="approve"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Admin Notes (Optional)"}),e.jsx("textarea",{value:m,onChange:fe=>f(fe.target.value),rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",placeholder:"Add any notes for the affiliate partner..."})]}),b==="reject"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Rejection Reason *"}),e.jsx("textarea",{value:h,onChange:fe=>x(fe.target.value),rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",placeholder:"Please provide a reason for rejection...",required:!0})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),b==="approve"&&e.jsx("button",{onClick:_e,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Approve Application"}),b==="reject"&&e.jsx("button",{onClick:Y,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Reject Application"})]})]})})})]})})]})}function Q8(){const[t,s]=y.useState([]),[r,a]=y.useState(null),[n,i]=y.useState(!0),[l,o]=y.useState("pending"),[c,d]=y.useState(1),[u,p]=y.useState(1),[m,f]=y.useState(""),[h,x]=y.useState(""),[g,j]=y.useState(!1),[b,N]=y.useState("view"),[C,A]=y.useState(null),[F,w]=y.useState(new Set),[_,v]=y.useState(""),[S,R]=y.useState("date"),[D,V]=y.useState("desc"),[O,I]=y.useState(new Set),[z,Q]=y.useState({total:0,pending:0,approved:0,rejected:0});y.useEffect(()=>{P()},[l,c,S,D]),y.useEffect(()=>{const q=setTimeout(()=>{_!==""&&P()},500);return()=>clearTimeout(q)},[_]);const P=async()=>{try{i(!0);const q=new URLSearchParams({page:c.toString(),limit:"10",sort:S,order:D});l!=="all"&&q.append("status",l),_.trim()&&q.append("search",_.trim());const ae=await fetch(`/api/admin/affiliate-applications?${q}`),xe=await ae.json();ae.ok&&xe.applications?(s(xe.applications),p(xe.pagination.pages),Q({total:xe.pagination.total,pending:xe.applications.filter(_e=>_e.status==="pending").length,approved:xe.applications.filter(_e=>_e.status==="approved").length,rejected:xe.applications.filter(_e=>_e.status==="rejected").length})):(console.error("Failed to fetch applications:",xe.message),s([]),p(0),Q({total:0,pending:0,approved:0,rejected:0}))}catch(q){console.error("Error fetching applications:",q),alert("Failed to load applications. Please check your connection and try again.")}finally{i(!1)}},k=async()=>{var q;if(r)try{const ae=await fetch(`/api/admin/affiliate-applications/${r.id}/approve`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminNotes:m})}),xe=await ae.json();ae.ok&&xe.message?(alert(`Application approved successfully!

Verification Code: ${((q=xe.data)==null?void 0:q.verificationCode)||"Generated"}

Copy this code and send it to the affiliate partner.`),j(!1),f(""),P()):alert(xe.error||xe.message||"Failed to approve application")}catch(ae){console.error("Error approving application:",ae),alert("Error approving application. Please try again.")}},X=async()=>{if(!r||!h.trim()){alert("Please provide a reason for rejection");return}try{const q=await fetch(`/api/admin/affiliate-applications/${r.id}/reject`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({rejectionReason:h})}),ae=await q.json();q.ok&&ae.message?(alert("Application rejected successfully!"),j(!1),x(""),P()):alert(ae.error||ae.message||"Failed to reject application")}catch(q){console.error("Error rejecting application:",q),alert("Error rejecting application. Please try again.")}},se=async q=>{if(confirm("Are you sure you want to regenerate the verification code? This will invalidate the current code and the affiliate partner will need to verify again with the new code."))try{A(q);const ae=await fetch(`/api/admin/affiliate-applications/${q}`),xe=await ae.json();if(!ae.ok){alert(xe.error||"Failed to get application details");return}const _e=await fetch(`/api/admin/affiliate-partners?applicationId=${q}`),Y=await _e.json();if(!_e.ok||!Y.partners||Y.partners.length===0){alert("Affiliate partner record not found");return}const Fe=Y.partners[0].id,Be=await fetch(`/api/admin/affiliate-partners/${Fe}/regenerate-code`,{method:"POST",headers:{"Content-Type":"application/json"}}),He=await Be.json();Be.ok&&He.verificationCode?(s(Le=>Le.map(ve=>ve.id===q?{...ve,verification_code:He.verificationCode}:ve)),w(Le=>new Set(Le).add(q)),setTimeout(()=>{w(Le=>{const ve=new Set(Le);return ve.delete(q),ve})},3e3),alert(`New verification code generated successfully!

New Code: ${He.verificationCode}

The code has been updated in the UI and is ready to copy.`)):alert(He.error||He.message||"Failed to regenerate verification code")}catch(ae){console.error("Error regenerating verification code:",ae),alert("Error regenerating verification code. Please try again.")}finally{A(null)}},B=(q,ae)=>{a(q),N(ae),j(!0),f(""),x("")},L=q=>{const ae=new Set(O);ae.has(q)?ae.delete(q):ae.add(q),I(ae)},H=q=>{switch(q){case"approved":return e.jsx(Vt,{className:"h-5 w-5 text-green-500"});case"rejected":return e.jsx(es,{className:"h-5 w-5 text-red-500"});case"pending":return e.jsx(os,{className:"h-5 w-5 text-yellow-500"});default:return e.jsx(os,{className:"h-5 w-5 text-gray-500"})}},K=q=>{switch(q){case"approved":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}},J=q=>new Date(q).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),re=async q=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(q),alert("Copied to clipboard!");else{const ae=document.createElement("textarea");ae.value=q,ae.style.position="fixed",ae.style.left="-999999px",ae.style.top="-999999px",document.body.appendChild(ae),ae.focus(),ae.select(),document.execCommand("copy"),ae.remove(),alert("Copied to clipboard!")}}catch(ae){console.error("Failed to copy: ",ae),alert("Failed to copy to clipboard")}};return e.jsxs("div",{className:"min-h-screen",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)",backgroundColor:"var(--arctic-blue-background)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsx("div",{className:"metric-card border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Affiliate Requests Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Review and manage affiliate applications"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:P,disabled:n,className:"btn-secondary inline-flex items-center gap-2",children:[e.jsx(br,{className:`h-4 w-4 ${n?"animate-spin":""}`}),"Refresh"]}),e.jsxs("button",{className:"btn-primary inline-flex items-center gap-2",children:[e.jsx(ja,{className:"h-4 w-4"}),"Export"]})]})]})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Requests"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:z.total}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"All applications"})]}),e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-full",children:e.jsx(gs,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:z.pending}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Awaiting approval"})]}),e.jsx("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/20 rounded-full",children:e.jsx(os,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:z.approved}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Active partners"})]}),e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-full",children:e.jsx(Tb,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:z.rejected}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Not approved"})]}),e.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/20 rounded-full",children:e.jsx(D4,{className:"h-6 w-6 text-red-600 dark:text-red-400"})})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or platform...",value:_,onChange:q=>v(q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(nl,{className:"h-4 w-4 text-gray-400"}),e.jsxs("select",{value:l,onChange:q=>o(q.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"h-4 w-4 text-gray-400"}),e.jsxs("select",{value:S,onChange:q=>R(q.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"status",children:"Sort by Status"})]})]}),e.jsx("button",{onClick:()=>V(D==="asc"?"desc":"asc"),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:`Sort ${D==="asc"?"Descending":"Ascending"}`,children:D==="asc"?"":""})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Applicant"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Platform"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Followers"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Applied"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(br,{className:"h-4 w-4 animate-spin"}),"Loading applications..."]})})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(vo,{className:"h-8 w-8 text-gray-400"}),"No applications found",_&&e.jsx("p",{className:"text-sm",children:"Try adjusting your search criteria"})]})})}):t.map(q=>e.jsxs(ux.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:q.name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:q.email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:q.phone})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:q.platform})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:q.followers})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${K(q.status)}`,children:[H(q.status),q.status]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:J(q.application_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>L(q.id),className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300",title:O.has(q.id)?"Collapse Details":"Expand Details",children:O.has(q.id)?e.jsx("span",{className:"text-lg",children:""}):e.jsx("span",{className:"text-lg",children:"+"})}),e.jsx("button",{onClick:()=>B(q,"view"),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"View Details",children:e.jsx(nt,{className:"h-4 w-4"})}),q.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>B(q,"approve"),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Approve",children:e.jsx(Vt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>B(q,"reject"),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Reject",children:e.jsx(es,{className:"h-4 w-4"})})]}),q.verification_code&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>re(q.verification_code),className:"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300",title:"Copy Verification Code",children:e.jsx(Xi,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>se(q.id),disabled:C===q.id,className:"text-orange-600 hover:text-orange-900 dark:text-orange-400 dark:hover:text-orange-300 disabled:opacity-50",title:"Regenerate Verification Code",children:e.jsx(br,{className:`h-4 w-4 ${C===q.id?"animate-spin":""}`})})]})]})})]}),O.has(q.id)&&e.jsx("tr",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("td",{colSpan:7,className:"px-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Application Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Phone:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:q.phone})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Platform:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:q.platform})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Followers:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:q.followers})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Expected Sales:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:q.expected_sales})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Social Media & Verification"}),e.jsxs("div",{className:"space-y-2",children:[q.instagram&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Instagram:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:q.instagram})]}),q.youtube&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"YouTube:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:q.youtube})]}),q.facebook&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Facebook:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:q.facebook})]}),q.verification_code&&e.jsxs("div",{className:`mt-4 p-3 rounded-lg border transition-all duration-500 ${F.has(q.id)?"bg-blue-50 dark:bg-blue-900/20 border-blue-300 dark:border-blue-700 shadow-lg ring-2 ring-blue-200 dark:ring-blue-800":"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm font-semibold ${F.has(q.id)?"text-blue-800 dark:text-blue-200":"text-green-800 dark:text-green-200"}`,children:"Verification Code:"}),F.has(q.id)&&e.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full animate-pulse",children:"Just Updated!"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>re(q.verification_code),className:`flex items-center gap-1 ${F.has(q.id)?"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200":"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-200"}`,children:[e.jsx(Xi,{className:"h-4 w-4"}),"Copy"]}),e.jsxs("button",{onClick:()=>se(q.id),disabled:C===q.id,className:"text-orange-600 hover:text-orange-800 dark:text-orange-400 dark:hover:text-orange-200 flex items-center gap-1 disabled:opacity-50",children:[e.jsx(br,{className:`h-4 w-4 ${C===q.id?"animate-spin":""}`}),"Regenerate"]})]})]}),e.jsx("div",{className:`rounded p-2 border transition-colors duration-500 ${F.has(q.id)?"bg-white dark:bg-gray-800 border-blue-300 dark:border-blue-700":"bg-white dark:bg-gray-800 border-green-300 dark:border-green-700"}`,children:e.jsx("code",{className:`text-lg font-mono tracking-wider transition-colors duration-500 ${F.has(q.id)?"text-blue-900 dark:text-blue-100":"text-green-900 dark:text-green-100"}`,children:q.verification_code})}),e.jsx("p",{className:`text-xs mt-1 transition-colors duration-500 ${F.has(q.id)?"text-blue-700 dark:text-blue-300":"text-green-700 dark:text-green-300"}`,children:"Send this 20-digit code to the affiliate partner for account verification"})]}),q.admin_notes&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("span",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200",children:"Admin Notes:"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:q.admin_notes})]}),q.rejection_reason&&e.jsxs("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsx("span",{className:"text-sm font-semibold text-red-800 dark:text-red-200",children:"Rejection Reason:"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:q.rejection_reason})]})]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Address"}),e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[q.house_number,", ",q.street,q.building&&`, ${q.building}`,q.apartment&&`, ${q.apartment}`,", ",q.road,", ",q.city,", ",q.state," - ",q.pincode]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Experience"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:q.experience})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Why Join"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:q.why_join})]})]})})]})})]},q.id))})]})})}),u>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing page ",c," of ",u]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>d(Math.max(1,c-1)),disabled:c===1,className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>d(Math.min(u,c+1)),disabled:c===u,className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),g&&r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[b==="view"&&"Application Details",b==="approve"&&"Approve Application",b==="reject"&&"Reject Application"]}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(es,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Personal Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pa,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Name:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.name})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ts,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fa,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Phone:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.phone})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(cm,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Address:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[r.house_number,", ",r.street,", ",r.road,", ",r.city,", ",r.state," - ",r.pincode]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Social Media & Platform"}),e.jsxs("div",{className:"space-y-3",children:[r.instagram&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(kb,{className:"h-4 w-4 text-pink-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Instagram:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.instagram})]}),r.youtube&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ab,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"YouTube:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.youtube})]}),r.facebook&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(wb,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Facebook:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.facebook})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pt,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Followers:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.followers})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Gn,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Platform:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.platform})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Experience & Motivation"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Experience:"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:r.experience})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Why Join:"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:r.why_join})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Expected Sales:"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:r.expected_sales})]})]})]}),b==="approve"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Admin Notes (Optional)"}),e.jsx("textarea",{value:m,onChange:q=>f(q.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Add any notes for the affiliate partner..."})]}),b==="reject"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rejection Reason *"}),e.jsx("textarea",{value:h,onChange:q=>x(q.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Please provide a reason for rejection...",required:!0})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),b==="approve"&&e.jsxs("button",{onClick:k,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(Vt,{className:"h-4 w-4"}),"Approve Application"]}),b==="reject"&&e.jsxs("button",{onClick:X,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(es,{className:"h-4 w-4"}),"Reject Application"]})]})]})})})]})}function Z8(){const t="http://192.168.1.36:2000",[s,r]=y.useState([]),[a,n]=y.useState([]),[i,l]=y.useState(!1),[o,c]=y.useState(""),[d,u]=y.useState({name:"",email:"",password:""}),[p,m]=y.useState(""),f=y.useMemo(()=>({"Content-Type":"application/json","x-user-role":"admin","x-user-permissions":"users:update"}),[]),h=async()=>{try{l(!0),c("");const[N,C]=await Promise.all([fetch(`${t}/api/staff/users`),fetch(`${t}/api/staff/roles`)]),A=await N.json(),F=await C.json();r((A==null?void 0:A.data)||A||[]),n((F==null?void 0:F.data)||F||[])}catch(N){c((N==null?void 0:N.message)||"Failed to load staff")}finally{l(!1)}};y.useEffect(()=>{h()},[]);const x=async()=>{if(!d.name||!d.email||!d.password)return alert("Fill all fields");try{if(!(await fetch(`${t}/api/staff/users`,{method:"POST",headers:f,body:JSON.stringify(d)})).ok)throw new Error("Failed to create user");u({name:"",email:"",password:""}),await h()}catch(N){alert((N==null?void 0:N.message)||"Failed")}},g=async(N,C)=>{try{if(!(await fetch(`${t}/api/staff/user-roles`,{method:"POST",headers:f,body:JSON.stringify({staffId:N,roleId:C})})).ok)throw new Error("Failed to assign role");await h()}catch(A){alert((A==null?void 0:A.message)||"Failed")}},j=async N=>{if(!p)return alert("Enter new password");try{const C=await fetch(`${t}/api/staff/users/reset-password`,{method:"POST",headers:f,body:JSON.stringify({staffId:N,newPassword:p})}),A=await C.json();if(!C.ok)throw new Error((A==null?void 0:A.error)||"Failed to reset password");m(""),alert("Password reset")}catch(C){alert((C==null?void 0:C.message)||"Failed")}},b=async N=>{if(confirm("Disable this account?"))try{const C=await fetch(`${t}/api/staff/users/disable`,{method:"POST",headers:f,body:JSON.stringify({staffId:N})}),A=await C.json();if(!C.ok)throw new Error((A==null?void 0:A.error)||"Failed to disable");await h()}catch(C){alert((C==null?void 0:C.message)||"Failed")}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Staff Accounts"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage staff members and their access"})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx("input",{className:"input",placeholder:"Name",value:d.name,onChange:N=>u({...d,name:N.target.value})}),e.jsx("input",{className:"input",placeholder:"Email",value:d.email,onChange:N=>u({...d,email:N.target.value})}),e.jsx("input",{className:"input",placeholder:"Password",type:"password",value:d.password,onChange:N=>u({...d,password:N.target.value})}),e.jsx(ms,{role:"admin",children:e.jsx("button",{onClick:x,className:"btn-primary",children:"Create Staff"})})]})}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx("input",{className:"input",placeholder:"New password (for reset)",value:p,onChange:N=>m(N.target.value)}),e.jsx("span",{className:"text-xs text-gray-500",children:"Enter before clicking Reset"})]}),i?"Loading...":o?e.jsx("div",{className:"text-red-600",children:o}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pr-4",children:"Name"}),e.jsx("th",{className:"py-2 pr-4",children:"Email"}),e.jsx("th",{className:"py-2 pr-4",children:"Roles"}),e.jsx("th",{className:"py-2 pr-4",children:"Assign Role"}),e.jsx("th",{className:"py-2 pr-4",children:"Actions"})]})}),e.jsx("tbody",{children:s.map(N=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 pr-4 font-medium",children:N.name}),e.jsx("td",{className:"py-2 pr-4",children:N.email}),e.jsx("td",{className:"py-2 pr-4",children:(N.roles||[]).map(C=>C.name).join(", ")||"-"}),e.jsx("td",{className:"py-2 pr-4",children:e.jsx("div",{className:"flex gap-2 flex-wrap",children:a.map(C=>e.jsx(ms,{role:"admin",children:e.jsx("button",{onClick:()=>g(N.id,C.id),className:"btn-secondary text-xs",children:C.name})},C.id))})}),e.jsx("td",{className:"py-2 pr-4",children:e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(ms,{role:"admin",children:e.jsx("button",{onClick:()=>j(N.id),className:"btn-secondary text-xs",children:"Reset Password"})}),e.jsx(ms,{role:"admin",children:e.jsx("button",{onClick:()=>b(N.id),className:"bg-red-600 text-white px-2 py-1 text-xs rounded",children:"Disable"})})]})})]},N.id))})]})})]})]})}function e9(){const t="http://192.168.1.36:2000",[s,r]=y.useState([]),[a,n]=y.useState([]),[i,l]=y.useState({}),[o,c]=y.useState(!1),d=y.useMemo(()=>({"Content-Type":"application/json","x-user-role":"admin","x-user-permissions":"users:update"}),[]),u=(h,x)=>`${h}:${x}`,p=async()=>{try{c(!0);const[h,x,g]=await Promise.all([fetch(`${t}/api/staff/roles`),fetch(`${t}/api/staff/permissions`),fetch(`${t}/api/staff/role-permissions`)]),j=await h.json(),b=await x.json(),N=await g.json(),C=(j==null?void 0:j.data)||j||[],A=(b==null?void 0:b.data)||b||[];r(C),n(A);const F={},w=(N==null?void 0:N.data)||N||[];for(const _ of w)_.role_id&&_.permission_id&&(F[u(_.role_id,_.permission_id)]=!0);l(F)}catch{}finally{c(!1)}};y.useEffect(()=>{p()},[]);const m=(h,x)=>{const g=u(h,x);l(j=>({...j,[g]:!j[g]}))},f=async h=>{try{const x=a.filter(b=>i[u(h,b.id)]).map(b=>b.id),g=await fetch(`${t}/api/staff/role-permissions/set`,{method:"POST",headers:d,body:JSON.stringify({roleId:h,permissionIds:x})}),j=await g.json();if(!g.ok)throw new Error((j==null?void 0:j.error)||"Failed to save");alert("Saved")}catch(x){alert((x==null?void 0:x.message)||"Failed")}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Roles & Permission Matrix"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Configure role-based access control"})]}),o?"Loading...":e.jsxs("div",{className:"overflow-x-auto metric-card",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-2 pr-4",style:{color:"var(--text-primary)"},children:"Permission"}),s.map(h=>e.jsx("th",{className:"text-left py-2 pr-4",style:{color:"var(--text-primary)"},children:h.name},h.id))]})}),e.jsx("tbody",{children:a.map(h=>e.jsxs("tr",{className:"border-t",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsx("td",{className:"py-2 pr-4 font-medium",style:{color:"var(--text-secondary)"},children:h.code}),s.map(x=>e.jsx("td",{className:"py-2 pr-4",children:e.jsx("input",{type:"checkbox",checked:!!i[u(x.id,h.id)],onChange:()=>m(x.id,h.id)})},x.id))]},h.id))})]}),e.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:s.map(h=>e.jsxs("button",{onClick:()=>f(h.id),className:"btn-secondary",children:["Save ",h.name]},h.id))})]})]})}function t9(){const s="http://192.168.1.36:2000",[r,a]=y.useState([]),[n,i]=y.useState(""),[l,o]=y.useState(""),[c,d]=y.useState(""),[u,p]=y.useState(""),[m,f]=y.useState(!1),h=async()=>{try{f(!0);const x=new URLSearchParams;n&&x.set("staff_id",n),l&&x.set("action",l),c&&x.set("from",c),u&&x.set("to",u);const j=await(await fetch(`${s}/api/staff/activity?${x.toString()}`)).json();a((j==null?void 0:j.data)||j||[])}catch{a([])}finally{f(!1)}};return y.useEffect(()=>{h()},[]),e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Audit Logs"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Track all system activities and changes"})]}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[e.jsx("input",{className:"input",placeholder:"Staff ID",value:n,onChange:x=>i(x.target.value)}),e.jsx("input",{className:"input",placeholder:"Action contains",value:l,onChange:x=>o(x.target.value)}),e.jsx("input",{className:"input",type:"date",value:c,onChange:x=>d(x.target.value)}),e.jsx("input",{className:"input",type:"date",value:u,onChange:x=>p(x.target.value)}),e.jsx("button",{className:"btn-primary",onClick:h,children:"Apply Filters"})]})}),e.jsx("div",{className:"metric-card",children:m?"Loading...":e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"border-b text-xs uppercase",style:{borderColor:"var(--arctic-blue-light)",color:"var(--text-muted)"},children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pr-4",children:"Time"}),e.jsx("th",{className:"py-2 pr-4",children:"Staff"}),e.jsx("th",{className:"py-2 pr-4",children:"Action"}),e.jsx("th",{className:"py-2 pr-4",children:"Details"})]})}),e.jsx("tbody",{children:r.map(x=>e.jsxs("tr",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsx("td",{className:"py-2 pr-4",style:{color:"var(--text-secondary)"},children:new Date(x.created_at).toLocaleString()}),e.jsx("td",{className:"py-2 pr-4",style:{color:"var(--text-secondary)"},children:x.staff_id||"-"}),e.jsx("td",{className:"py-2 pr-4",style:{color:"var(--text-secondary)"},children:x.action||"-"}),e.jsx("td",{className:"py-2 pr-4",children:e.jsx("pre",{className:"text-xs whitespace-pre-wrap",style:{color:"var(--text-muted)"},children:x.details?JSON.stringify(x.details):"-"})})]},x.id))})]})})})]})}function s9(){const[t,s]=y.useState({whatsapp_token:"",whatsapp_phone_id:"",notify_phone:"",smtp_provider:"gmail",smtp_host:"",smtp_port:587,smtp_user:"",smtp_pass:"",notify_email:"",from_email:""}),[r,a]=y.useState(""),[n,i]=y.useState("Hello from Nefol Admin!"),[l,o]=y.useState(""),[c,d]=y.useState("Test Email from Nefol"),[u,p]=y.useState("This is a test email."),[m,f]=y.useState(!1),[h,x]=y.useState({email:!1,whatsapp:!1}),[g,j]=y.useState(null),b=async()=>{try{const S=await(await fetch("/api/alerts/config")).json();S!=null&&S.data&&s({...t,...S.data})}catch{}};y.useEffect(()=>{b()},[]);const N=v=>{s({...t,smtp_provider:v,...{gmail:{smtp_host:"",smtp_port:587},hostinger:{smtp_host:"smtp.hostinger.com",smtp_port:587},godaddy:{smtp_host:"smtpout.secureserver.net",smtp_port:587},custom:{smtp_host:"",smtp_port:587}}[v]})},C=async()=>{f(!0);try{const v=await fetch("/api/alerts/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),S=await v.json();if(!v.ok){j({type:"save",success:!1,message:(S==null?void 0:S.error)||"Failed to save"});return}j({type:"save",success:!0,message:"Settings saved successfully!"}),setTimeout(()=>j(null),3e3)}catch(v){j({type:"save",success:!1,message:v.message||"Failed to save"})}finally{f(!1)}},A=async()=>{if(!r){j({type:"whatsapp",success:!1,message:"Please enter a phone number"});return}x({...h,whatsapp:!0});try{const v=await fetch("/api/alerts/test/whatsapp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone_number:r,message:n})}),S=await v.json();if(!v.ok){j({type:"whatsapp",success:!1,message:(S==null?void 0:S.error)||"Failed to send"});return}j({type:"whatsapp",success:!0,message:"WhatsApp message sent successfully!"})}catch(v){j({type:"whatsapp",success:!1,message:v.message||"Failed to send"})}finally{x({...h,whatsapp:!1})}},F=async()=>{if(!l){j({type:"email",success:!1,message:"Please enter recipient email"});return}x({...h,email:!0});try{const v=await fetch("/api/alerts/test/email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:l,subject:c,text:u})}),S=await v.json();if(!v.ok){j({type:"email",success:!1,message:(S==null?void 0:S.error)||"Failed to send"});return}j({type:"email",success:!0,message:"Email sent successfully!"})}catch(v){j({type:"email",success:!1,message:v.message||"Failed to send"})}finally{x({...h,email:!1})}},_=(v=>{const S={gmail:{title:"Gmail SMTP Configuration",description:"Use your Gmail account to send emails. You need to generate an App Password.",instructions:["1. Go to your Google Account settings","2. Enable 2-Step Verification",'3. Generate an App Password for "Mail"',"4. Use your Gmail address and the App Password below"],host:"Automatically configured",port:"587 (TLS)"},hostinger:{title:"Hostinger SMTP Configuration",description:"Use your Hostinger email account to send emails.",instructions:["1. Log in to your Hostinger control panel","2. Go to Email section","3. Use your full email address (e.g., noreply@yourdomain.com)","4. Use your email account password"],host:"smtp.hostinger.com",port:"587 (TLS)"},godaddy:{title:"GoDaddy SMTP Configuration",description:"Use your GoDaddy email account to send emails.",instructions:["1. Log in to your GoDaddy account","2. Go to Email & Office Dashboard","3. Use your full email address (e.g., noreply@yourdomain.com)","4. Use your email account password"],host:"smtpout.secureserver.net",port:"587 (TLS)"},custom:{title:"Custom SMTP Configuration",description:"Configure your own SMTP server settings.",instructions:["1. Enter your SMTP server hostname","2. Enter the SMTP port (usually 587 for TLS, 465 for SSL)","3. Enter your SMTP username and password","4. Test the connection before saving"],host:"Your SMTP server",port:"587 or 465"}};return S[v]||S.custom})(t.smtp_provider||"gmail");return e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Email & WhatsApp Settings"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Configure notification and alert settings"})]})}),g&&e.jsxs("div",{className:`p-4 rounded-lg flex items-center space-x-2 ${g.success?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 border border-red-200 dark:border-red-800"}`,children:[g.success?e.jsx(Vt,{className:"h-5 w-5"}):e.jsx(vo,{className:"h-5 w-5"}),e.jsx("span",{children:g.message})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ts,{className:"h-5 w-5 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Email Marketing Configuration"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Email Provider"}),e.jsxs("select",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",value:t.smtp_provider||"gmail",onChange:v=>N(v.target.value),children:[e.jsx("option",{value:"gmail",children:"Gmail"}),e.jsx("option",{value:"hostinger",children:"Hostinger"}),e.jsx("option",{value:"godaddy",children:"GoDaddy"}),e.jsx("option",{value:"custom",children:"Custom SMTP"})]})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2 mb-2",children:[e.jsx(z2,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-300 mb-1",children:_.title}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400 mb-2",children:_.description}),e.jsx("ul",{className:"text-sm text-blue-600 dark:text-blue-400 space-y-1",children:_.instructions.map((v,S)=>e.jsx("li",{children:v},S))}),e.jsxs("div",{className:"mt-3 text-sm",children:[e.jsx("span",{className:"font-medium",children:"SMTP Host:"})," ",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-2 py-1 rounded",children:_.host})," ",e.jsx("span",{className:"font-medium ml-3",children:"Port:"})," ",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-2 py-1 rounded",children:_.port})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["SMTP Host ",t.smtp_provider!=="gmail"&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:_.host,value:t.smtp_host||"",onChange:v=>s({...t,smtp_host:v.target.value}),disabled:t.smtp_provider==="gmail"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["SMTP Port ",t.smtp_provider!=="gmail"&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",type:"number",placeholder:_.port,value:t.smtp_port||587,onChange:v=>s({...t,smtp_port:Number(v.target.value)}),disabled:t.smtp_provider==="gmail"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["SMTP Username/Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"your-email@domain.com",value:t.smtp_user||"",onChange:v=>s({...t,smtp_user:v.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["SMTP Password/App Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",type:"password",placeholder:"Enter password",value:t.smtp_pass||"",onChange:v=>s({...t,smtp_pass:v.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"From Email Address"}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"noreply@yourdomain.com",value:t.from_email||"",onChange:v=>s({...t,from_email:v.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notification Email (for alerts)"}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"admin@yourdomain.com",value:t.notify_email||"",onChange:v=>s({...t,notify_email:v.target.value})})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(fs,{className:"h-5 w-5 text-green-600"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Configuration (Meta Cloud API)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"WhatsApp Phone ID"}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"WhatsApp Phone ID",value:t.whatsapp_phone_id||"",onChange:v=>s({...t,whatsapp_phone_id:v.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Access Token"}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",type:"password",placeholder:"Access Token",value:t.whatsapp_token||"",onChange:v=>s({...t,whatsapp_token:v.target.value})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Default Notify Phone (with country code)"}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"+1234567890",value:t.notify_phone||"",onChange:v=>s({...t,notify_phone:v.target.value})})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2 disabled:opacity-50",onClick:C,disabled:m,children:[e.jsx(Ms,{className:"h-5 w-5"}),e.jsx("span",{children:m?"Saving...":"Save Settings"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4 flex items-center space-x-2",children:[e.jsx(ts,{className:"h-5 w-5"}),e.jsx("span",{children:"Test Email"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Recipient Email",value:l,onChange:v=>o(v.target.value)}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Subject",value:c,onChange:v=>d(v.target.value)}),e.jsx("textarea",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Email Body",rows:3,value:u,onChange:v=>p(v.target.value)}),e.jsxs("button",{className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2 disabled:opacity-50",onClick:F,disabled:h.email,children:[e.jsx(sa,{className:"h-4 w-4"}),e.jsx("span",{children:h.email?"Sending...":"Send Test Email"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4 flex items-center space-x-2",children:[e.jsx(fs,{className:"h-5 w-5"}),e.jsx("span",{children:"Test WhatsApp"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Phone with country code (+1234567890)",value:r,onChange:v=>a(v.target.value)}),e.jsx("textarea",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Message",rows:4,value:n,onChange:v=>i(v.target.value)}),e.jsxs("button",{className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2 disabled:opacity-50",onClick:A,disabled:h.whatsapp,children:[e.jsx(sa,{className:"h-4 w-4"}),e.jsx("span",{children:h.whatsapp?"Sending...":"Send Test WhatsApp"})]})]})]})]})]})}function r9(){const{id:t}=mb(),s=va(),[r,a]=y.useState(null),[n,i]=y.useState(!0),[l,o]=y.useState(null),[c,d]=y.useState("overview"),[u,p]=y.useState(""),[m,f]=y.useState("");y.useEffect(()=>{h()},[t]);const h=async()=>{try{i(!0);const k=await fetch(`http://192.168.1.36:2000/api/users/${t}`);if(k.ok){const X=await k.json();a(X)}else o("Failed to fetch user details")}catch{o("Failed to fetch user details")}finally{i(!1)}},x=async()=>{if(u.trim())try{(await fetch(`http://192.168.1.36:2000/api/users/${t}/notes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:u,note_type:"general"})})).ok&&(p(""),h())}catch(k){console.error("Failed to add note:",k)}},g=async()=>{if(m.trim())try{(await fetch(`http://192.168.1.36:2000/api/users/${t}/tags`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:m})})).ok&&(f(""),h())}catch(k){console.error("Failed to add tag:",k)}},j=async k=>{try{await fetch(`http://192.168.1.36:2000/api/users/${t}/tags`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:k})}),h()}catch(X){console.error("Failed to remove tag:",X)}},b=k=>{const se={page_view:nt,cart:Qs,order:ha,payment:si,form_submit:gs,login:pa}[k]||Dn;return e.jsx(se,{className:"h-4 w-4"})},N=k=>({page_view:"text-blue-600 bg-blue-100 dark:bg-blue-900/20",cart:"text-green-600 bg-green-100 dark:bg-green-900/20",order:"text-purple-600 bg-purple-100 dark:bg-purple-900/20",payment:"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20",form_submit:"text-orange-600 bg-orange-100 dark:bg-orange-900/20",login:"text-indigo-600 bg-indigo-100 dark:bg-indigo-900/20"})[k]||"text-gray-600 bg-gray-100 dark:bg-gray-900/20",C=k=>k?new Date(k).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",A=k=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(k||0);if(n)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(l||!r)return e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{className:"text-red-600",children:l||"User not found"}),e.jsx("button",{onClick:()=>s("/admin/users"),className:"mt-4 text-blue-600",children:"Back to Users"})]});const{user:F,stats:w,addresses:_,orders:v,activities:S,sessions:R,notes:D,tags:V,cart:O,wishlist:I,activitySummary:z,topPages:Q,productInteractions:P}=r;return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s("/admin/users"),className:"p-2 hover:bg-[var(--arctic-blue-lighter)] rounded-xl transition-colors",style:{color:"var(--text-secondary)"},children:e.jsx(Kk,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:F.name}),e.jsxs("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:["User ID: ",F.id]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${F.is_verified,""}`,style:F.is_verified?{backgroundColor:"#D1FAE5",color:"#059669"}:{backgroundColor:"#FEF3C7",color:"#D97706"},children:F.is_verified?"Verified":"Unverified"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:w.total_orders||0})]}),e.jsx(ha,{className:"h-8 w-8 text-purple-600"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Spent"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:A(w.total_spent)})]}),e.jsx(jo,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Page Views"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:w.total_page_views||0})]}),e.jsx(nt,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loyalty Points"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:F.loyalty_points||0})]}),e.jsx(ur,{className:"h-8 w-8 text-yellow-600"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ts,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:F.email})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fa,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:F.phone||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Mr,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Member Since"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:C(F.created_at)})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(os,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last Seen"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:C(w.last_seen)})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:V.map(k=>e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 rounded-full text-sm",children:[e.jsx(Eb,{className:"h-3 w-3"}),k,e.jsx("button",{onClick:()=>j(k),className:"hover:text-red-600",children:""})]},k))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:m,onChange:k=>f(k.target.value),placeholder:"Add tag...",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-sm",onKeyPress:k=>k.key==="Enter"&&g()}),e.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"Add"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Addresses"}),e.jsx("div",{className:"space-y-4",children:_.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No addresses saved"}):_.map(k=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400 uppercase",children:k.address_type}),k.is_default&&e.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-300 px-2 py-1 rounded",children:"Default"})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:k.full_name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:k.phone}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:[k.address_line1,k.address_line2&&`, ${k.address_line2}`]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[k.city,", ",k.state," ",k.postal_code]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:k.country})]},k.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Current Cart"}),e.jsx("div",{className:"space-y-2",children:O.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"Cart is empty"}):O.map(k=>e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx(Qs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"flex-1 text-gray-900 dark:text-white",children:k.product_name}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["",k.quantity]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:A(k.price)})]},k.id))})]})]}),e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"flex overflow-x-auto",children:["overview","orders","activity","sessions","notes"].map(k=>e.jsx("button",{onClick:()=>d(k),className:`px-6 py-3 text-sm font-medium capitalize whitespace-nowrap ${c===k?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:k},k))})}),e.jsxs("div",{className:"p-6",children:[c==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Activity Summary"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:z.slice(0,6).map((k,X)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${N(k.activity_type)}`,children:b(k.activity_type)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:k.activity_type}),k.activity_subtype&&e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 capitalize",children:k.activity_subtype})]})]}),e.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:k.count})]},X))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Most Viewed Pages"}),e.jsx("div",{className:"space-y-2",children:Q.slice(0,5).map((k,X)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:k.page_title||k.page_url}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:k.page_url})]}),e.jsxs("div",{className:"ml-4 text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[k.view_count," views"]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:new Date(k.last_viewed).toLocaleDateString()})]})]},X))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Product Interactions"}),e.jsx("div",{className:"space-y-2",children:P.slice(0,5).map((k,X)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:k.product_name}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 capitalize",children:[k.activity_type," - ",k.activity_subtype]})]}),e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[k.interaction_count,""]})]},X))})]})]}),c==="orders"&&e.jsx("div",{className:"space-y-4",children:v.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No orders yet"}):v.map(k=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["Order #",k.order_number]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:C(k.created_at)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${k.status==="delivered"?"bg-green-100 text-green-800":k.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:k.status}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white mt-1",children:A(k.total_amount)})]})]}),e.jsx("div",{className:"space-y-2",children:k.items.map((X,se)=>e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx(ha,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"flex-1 text-gray-900 dark:text-white",children:X.product_name}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["",X.quantity]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:A(X.price)})]},se))})]},k.id))}),c==="activity"&&e.jsx("div",{className:"space-y-3",children:S.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No activities yet"}):S.map(k=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:`p-2 rounded-lg ${N(k.activity_type)}`,children:b(k.activity_type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:[k.activity_type,k.activity_subtype&&` - ${k.activity_subtype}`]}),k.page_title&&e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:k.page_title}),k.product_name&&e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[k.product_name,k.product_price&&` - ${A(k.product_price)}`]}),k.payment_amount&&e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Payment: ",A(k.payment_amount)," via ",k.payment_method]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:C(k.created_at)})]})]},k.id))}),c==="sessions"&&e.jsx("div",{className:"space-y-3",children:R.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No sessions yet"}):R.map(k=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M2,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-xs font-mono text-gray-600 dark:text-gray-400",children:[k.session_id.substring(0,12),"..."]})]}),k.ended_at?e.jsx("span",{className:"text-xs text-gray-500",children:"Ended"}):e.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"Active"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Started"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:C(k.started_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Last Activity"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:C(k.last_activity)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Device"}),e.jsxs("p",{className:"text-gray-900 dark:text-white",children:[k.device_type||"Unknown"," - ",k.browser||"Unknown"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Location"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:k.city&&k.country?`${k.city}, ${k.country}`:"Unknown"})]})]})]},k.id))}),c==="notes"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("textarea",{value:u,onChange:k=>p(k.target.value),placeholder:"Add a note about this user...",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white resize-none"}),e.jsx("button",{onClick:x,className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Note"})]}),e.jsx("div",{className:"space-y-3",children:D.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No notes yet"}):D.map(k=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(fs,{className:"h-5 w-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:k.note}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:["By ",k.admin_name||"Admin"]}),e.jsx("span",{children:""}),e.jsx("span",{children:C(k.created_at)})]})]})]})},k.id))})]})]})]})})]})]})}function a9(){var R;const{notify:t}=Sr(),[s,r]=y.useState([]),[a,n]=y.useState(!1),[i,l]=y.useState(""),c="http://192.168.1.36:2000",[d,u]=y.useState(""),[p,m]=y.useState(""),[f,h]=y.useState("0.5"),[x,g]=y.useState(!1),[j,b]=y.useState(null),[N,C]=y.useState(""),[A,F]=y.useState(null),w=async()=>{try{n(!0),l("");const D=await fetch(`${c}/api/shiprocket/shipments`);if(!D.ok)throw new Error(`HTTP error! status: ${D.status}`);const V=await D.json();r(Array.isArray(V)?V:[])}catch(D){console.error("Failed to load shipments:",D),l("Failed to load shipments"),r([])}finally{n(!1)}};y.useEffect(()=>{w();const D=Je.subscribe("shipment_created",O=>{console.log("New shipment created:",O),r(I=>[O,...I])}),V=Je.subscribe("shipment_updated",O=>{console.log("Shipment updated:",O),r(I=>I.map(z=>z.id===O.id?O:z))});return()=>{D(),V()}},[]);const _=async D=>{try{const V=await fetch(`${c}/api/shiprocket/orders/${D}/shipment`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(V.ok){const O=await V.json();console.log("Shiprocket shipment created:",O),w(),t("success","Shipment created successfully in Shiprocket!")}else{const O=await V.json().catch(()=>({})),I=(O==null?void 0:O.error)||(O==null?void 0:O.message)||"Failed to create Shiprocket shipment";l(I),t("error",I)}}catch(V){const O=(V==null?void 0:V.message)||"Failed to create Shiprocket shipment";l(O),t("error",O)}},v=async(D,V)=>{try{const O=await fetch(`${c}/api/shiprocket/shipments/${D}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:V,awb_code:`AWB${Date.now()}`,courier_name:"Shiprocket",tracking_url:`https://shiprocket.co/tracking/${D}`})});if(O.ok){const I=await O.json();console.log("Shipment status updated:",I),w(),t("success","Shipment updated")}else l("Failed to update shipment status"),t("error","Failed to update shipment status")}catch{l("Failed to update shipment status")}},S=D=>{switch(D){case"pending":return"bg-yellow-100 text-yellow-800";case"created":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Shipments"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage Shiprocket deliveries"})]}),e.jsx("button",{onClick:w,className:"btn-primary",children:"Refresh"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Pincode Serviceability"}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-2",style:{color:"var(--text-muted)"},children:"Pickup Postcode"}),e.jsx("input",{value:d,onChange:D=>u(D.target.value),placeholder:"110001",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)] w-40",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-2",style:{color:"var(--text-muted)"},children:"Delivery Postcode"}),e.jsx("input",{value:p,onChange:D=>m(D.target.value),placeholder:"560001",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)] w-40",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-2",style:{color:"var(--text-muted)"},children:"Weight (kg)"}),e.jsx("input",{type:"number",step:"0.1",value:f,onChange:D=>h(D.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)] w-28",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}})]}),e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",style:{color:"var(--text-secondary)"},children:[e.jsx("input",{type:"checkbox",checked:x,onChange:D=>g(D.target.checked)})," COD"]}),e.jsx("button",{onClick:async()=>{try{b(null);const D=new URLSearchParams({pickup_postcode:d,delivery_postcode:p,weight:f,cod:x?"1":"0"}),O=await(await fetch(`${c}/api/shiprocket/serviceability?${D.toString()}`,{headers:{"x-user-role":"admin","x-user-permissions":"shipping:read"}})).json();b(O)}catch{b({success:!1,message:"Failed to check serviceability"})}},className:"btn-primary",children:"Check Serviceability"})]}),j&&e.jsxs("div",{className:"mt-4",children:[(R=j.data)!=null&&R.available_courier_companies&&j.data.available_courier_companies.length>0?e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold mb-3 text-slate-900 dark:text-slate-100",children:["Available Couriers (",j.data.available_courier_companies.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-96 overflow-y-auto",children:j.data.available_courier_companies.map((D,V)=>e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 text-sm",children:D.courier_name}),e.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:[D.is_surface?"Surface":"Air","  ",D.city,", ",D.state]})]}),D.recommended&&e.jsx("span",{className:"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs px-2 py-1 rounded",children:"Recommended"})]}),e.jsxs("div",{className:"space-y-1.5 mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Rate:"}),e.jsxs("span",{className:"font-bold text-slate-900 dark:text-slate-100",children:["",D.rate||D.freight_charge]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Delivery:"}),e.jsx("span",{className:"text-xs font-medium text-slate-900 dark:text-slate-100",children:D.etd||`${D.estimated_delivery_days} days`})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"COD:"}),e.jsx("span",{className:`text-xs font-medium ${D.cod?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:D.cod?"Available":"Not Available"})]}),D.cod_charges>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"COD Charges:"}),e.jsxs("span",{className:"text-xs text-slate-900 dark:text-slate-100",children:["",D.cod_charges]})]}),D.rating&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Rating:"}),e.jsxs("span",{className:"text-xs font-medium text-slate-900 dark:text-slate-100",children:[" ",D.rating.toFixed(1)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tracking:"}),e.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:D.realtime_tracking||"N/A"})]}),D.cutoff_time&&e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cutoff:"}),e.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:D.cutoff_time})]})]}),D.courier_company_id===j.data.recommended_courier_company_id&&e.jsx("div",{className:"mt-2 pt-2 border-t border-slate-200 dark:border-slate-700",children:e.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded",children:" Shiprocket Recommended"})})]},V))})]}):e.jsx("div",{className:"mt-3 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"No courier companies available for this route."})}),e.jsxs("details",{className:"mt-4",children:[e.jsx("summary",{className:"text-xs text-slate-600 dark:text-slate-400 cursor-pointer hover:text-slate-900 dark:hover:text-slate-100",children:"Show Raw Response (for debugging)"}),e.jsx("pre",{className:"mt-2 text-xs bg-slate-50 dark:bg-slate-900 p-3 rounded overflow-auto max-h-64",children:JSON.stringify(j,null,2)})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3 text-slate-900 dark:text-slate-100",children:"Manifest & Pickup"}),e.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[e.jsx("button",{onClick:async()=>{try{const D=s.map(I=>Number(I.order_id)).filter(Boolean),V=await fetch(`${c}/api/shiprocket/manifest`,{method:"POST",headers:{"Content-Type":"application/json","x-user-role":"admin","x-user-permissions":"shipping:update"},body:JSON.stringify({orderIds:D})}),O=await V.json();if(!V.ok)throw new Error((O==null?void 0:O.error)||"Failed");alert(`Manifest Ready: ${O.manifest_url}`)}catch(D){alert((D==null?void 0:D.message)||"Failed to generate manifest")}},className:"px-4 py-2 bg-slate-900 text-white rounded hover:bg-slate-700",children:"Generate Manifest (All)"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-300 mb-1",children:"Pickup Date"}),e.jsx("input",{type:"date",value:N,onChange:D=>C(D.target.value),className:"border px-3 py-2 rounded w-44 dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),e.jsx("button",{onClick:async()=>{if(!N)return alert("Choose pickup date");try{const D=s.map(I=>Number(I.order_id)).filter(Boolean),V=await fetch(`${c}/api/shiprocket/pickup`,{method:"POST",headers:{"Content-Type":"application/json","x-user-role":"admin","x-user-permissions":"shipping:update"},body:JSON.stringify({pickup_date:N,orderIds:D})}),O=await V.json();if(!V.ok)throw new Error((O==null?void 0:O.error)||"Failed");alert("Pickup scheduled")}catch(D){alert((D==null?void 0:D.message)||"Failed to schedule pickup")}},className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Schedule Pickup"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3 text-slate-900 dark:text-slate-100",children:"Non-Delivery Reports (NDR)"}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{onClick:async()=>{try{const V=await(await fetch(`${c}/api/shiprocket/ndr`,{headers:{"x-user-role":"admin","x-user-permissions":"shipping:read"}})).json();F(V)}catch{F({items:[]})}},className:"px-4 py-2 bg-slate-900 text-white rounded hover:bg-slate-700",children:"Load NDRs"})}),A&&e.jsx("pre",{className:"mt-3 text-xs bg-slate-50 dark:bg-slate-900 p-3 rounded overflow-auto max-h-64",children:JSON.stringify(A,null,2)})]}),i&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:i}),a?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Loading shipments..."})}):e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"AWB Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Courier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:s.map(D=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:D.order_id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:D.customer_name||"N/A"}),e.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:D.customer_email||"N/A"})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900 dark:text-slate-100",children:["",D.total?Number(D.total).toFixed(2):"0.00"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${S(D.status)}`,children:D.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:D.awb_code||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:D.courier_name||"N/A"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[D.status==="pending"&&e.jsx("button",{onClick:()=>_(D.order_id),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:"Create Shipment"}),D.status==="created"&&e.jsx("button",{onClick:()=>v(D.id,"shipped"),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:"Mark Shipped"}),D.status==="shipped"&&e.jsx("button",{onClick:()=>v(D.id,"delivered"),className:"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300",children:"Mark Delivered"}),D.tracking_url&&e.jsx("a",{href:D.tracking_url,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:"Track"}),e.jsx("button",{onClick:async()=>{try{const V=await fetch(`${c}/api/shiprocket/rto/${D.id}`,{method:"POST",headers:{"x-user-role":"admin","x-user-permissions":"shipping:update"}}),O=await V.json();if(!V.ok)throw new Error((O==null?void 0:O.error)||"Failed");alert("Marked RTO"),w()}catch(V){alert((V==null?void 0:V.message)||"Failed to mark RTO")}},className:"text-red-600 hover:text-red-800 ml-2",children:"Mark RTO"})]})]},D.id))})]})})})]})}function n9(){const{orderNumber:t}=mb(),s=va(),{notify:r}=Sr(),[a,n]=y.useState(null),[i,l]=y.useState(!1),[o,c]=y.useState(""),[d,u]=y.useState(""),[p,m]=y.useState(""),[f,h]=y.useState(""),[x,g]=y.useState(""),[j,b]=y.useState(!1),[N,C]=y.useState(null),F="http://192.168.1.36:2000",w=y.useMemo(()=>{const I=localStorage.getItem("auth_token");return{"Content-Type":"application/json",...I?{Authorization:`Bearer ${I}`}:{},"x-user-permissions":"orders:read,orders:update,shipping:read","x-user-role":"admin"}},[]),_=async()=>{if(t)try{l(!0),c("");const I=await fetch(`${F}/api/orders/${encodeURIComponent(t)}`,{headers:w});if(!I.ok)throw new Error("Failed to fetch order");const z=await I.json();if(n(z),u(z.status),z.id)try{const Q=await fetch(`${F}/api/shiprocket_shipments?order_id=${z.id}`,{headers:w});if(Q.ok){const P=await Q.json(),k=Array.isArray(P)?P:P.data||[];if(k.length>0){const X=k.find(B=>B.order_id===z.id)||k[0],se=X&&X.shipment_id;b(se),C(se?X:null)}else b(!1),C(null)}else b(!1),C(null)}catch{b(!1),C(null)}}catch(I){c((I==null?void 0:I.message)||"Failed to load order")}finally{l(!1)}};y.useEffect(()=>{_()},[t]);const v=async()=>{if(a)try{if(l(!0),!(await fetch(`${F}/api/orders/${a.id}`,{method:"PUT",headers:w,body:JSON.stringify({status:d,note:p})})).ok)throw new Error("Failed to update status");await _(),m(""),r("success","Order status updated")}catch(I){r("error",(I==null?void 0:I.message)||"Failed to update")}finally{l(!1)}},S=async()=>{if(!a)return;const I=f.split(",").map(Q=>Q.trim()).filter(Boolean);if(!(await fetch(`${F}/api/orders/${a.id}/tags`,{method:"POST",headers:w,body:JSON.stringify({tags:I})})).ok){r("error","Failed to update tags");return}await _(),r("success","Tags updated")},R=async()=>{var I;if(a)try{l(!0);const z=await fetch(`${F}/api/shiprocket/orders/${a.id}/shipment`,{method:"POST",headers:w});let Q={};const P=z.headers.get("content-type");if(P&&P.includes("application/json")&&(Q=await z.json()),!z.ok){const k=(Q==null?void 0:Q.error)||(Q==null?void 0:Q.message)||(Q==null?void 0:Q.details)||`Failed to create shipment (${z.status})`;throw new Error(k)}r("success","Shipment created in Shiprocket!"),(Q.shipment_id||(I=Q.shiprocket_response)!=null&&I.shipment_id)&&(b(!0),C(Q)),await _()}catch(z){r("error",(z==null?void 0:z.message)||"Failed to create shipment"),console.error("Create shipment error:",z)}finally{l(!1)}},D=async()=>{if(a)try{if(l(!0),!j||!(N!=null&&N.shipment_id)){r("error","Please create a shipment first. A shipment must be created in Shiprocket before generating an AWB.");return}const I=await fetch(`${F}/api/shiprocket/orders/${a.id}/awb`,{method:"POST",headers:w});let z={};const Q=I.headers.get("content-type");if(Q&&Q.includes("application/json")&&(z=await I.json()),!I.ok){const P=(z==null?void 0:z.error)||(z==null?void 0:z.message)||(z==null?void 0:z.details)||`Failed to create AWB (${I.status})`;throw new Error(P)}r("success","AWB created successfully"),b(!0),C(z),await _()}catch(I){const z=(I==null?void 0:I.message)||"Failed to create AWB";r("error",z),console.error("Create AWB error:",I)}finally{l(!1)}},V=async()=>{if(a)try{l(!0);const I=await fetch(`${F}/api/shiprocket/orders/${a.id}/track`,{headers:w});if(!I.ok){if(I.status===404)throw new Error("Tracking information not available. Please create a shipment first.");const Q=await I.json().catch(()=>({}));throw new Error((Q==null?void 0:Q.error)||(Q==null?void 0:Q.message)||`Failed to fetch tracking (${I.status})`)}const z=await I.json();r("info","Tracking fetched (see console)"),console.log("Tracking:",z)}catch(I){r("error",(I==null?void 0:I.message)||"Failed to fetch tracking"),console.error("View tracking error:",I)}finally{l(!1)}},O=async()=>{var z,Q;if(!a)return;const I=x.split(",").map(P=>parseInt(P.trim(),10)).filter(P=>!isNaN(P));if(I.length===0){r("error","Provide item indexes like 0,2");return}try{l(!0);const P=await fetch(`${F}/api/orders/${a.id}/split`,{method:"POST",headers:w,body:JSON.stringify({itemIndexes:I})}),k=await P.json();if(!P.ok){const X=(k==null?void 0:k.error)||(k==null?void 0:k.message)||(k==null?void 0:k.details)||`Failed to split order (${P.status})`;throw new Error(X)}r("success",`Split created: ${((z=k.split)==null?void 0:z.order_number)||((Q=k.split)==null?void 0:Q.id)}`),await _(),g("")}catch(P){r("error",(P==null?void 0:P.message)||"Failed to split order"),console.error("Split order error:",P)}finally{l(!1)}};return i&&!a?e.jsx("div",{className:"p-6",children:"Loading..."}):o?e.jsx("div",{className:"p-6 text-red-600",children:o}):a?e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:["Order #",a.order_number]}),e.jsxs("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:["Placed on ",new Date(a.created_at).toLocaleString()]})]}),e.jsx("button",{onClick:()=>s(-1),className:"btn-secondary",children:"Back"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"metric-card md:col-span-2",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Items"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-xs uppercase text-gray-500 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pr-4",children:"Product"}),e.jsx("th",{className:"py-2 pr-4",children:"SKU"}),e.jsx("th",{className:"py-2 pr-4",children:"Qty"}),e.jsx("th",{className:"py-2 pr-4",children:"Price"}),e.jsx("th",{className:"py-2 pr-4",children:"Subtotal"})]})}),e.jsx("tbody",{children:(a.items||[]).map((I,z)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 pr-4",children:I.title||I.product_id}),e.jsx("td",{className:"py-2 pr-4",children:I.sku||"-"}),e.jsx("td",{className:"py-2 pr-4",children:I.qty||1}),e.jsxs("td",{className:"py-2 pr-4",children:["",Number(I.price||0).toFixed(2)]}),e.jsxs("td",{className:"py-2 pr-4 font-medium",children:["",Number((I.qty||1)*(I.price||0)).toFixed(2)]})]},z))})]})})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["",Number(a.subtotal||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shipping"}),e.jsxs("span",{children:["",Number(a.shipping||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"GST"}),e.jsxs("span",{children:["",Number(a.tax||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["",Number(a.total||0).toFixed(2)]})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Status"}),e.jsxs("select",{value:d,onChange:I=>u(I.target.value),className:"input w-full",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsx("input",{className:"input w-full",placeholder:"Add note (optional)",value:p,onChange:I=>m(I.target.value)}),e.jsx("button",{onClick:v,className:"btn-primary w-full",children:"Update Status"}),e.jsxs("div",{className:"pt-4 border-t mt-4",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Tags (comma-separated)"}),e.jsx("input",{className:"input w-full",placeholder:"e.g. priority,vip",value:f,onChange:I=>h(I.target.value)}),e.jsx("button",{onClick:S,className:"btn-secondary w-full mt-2",children:"Update Tags"})]}),e.jsxs("div",{className:"pt-4 border-t mt-4",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Split Items (indexes)"}),e.jsx("input",{className:"input w-full",placeholder:"e.g. 0,2",value:x,onChange:I=>g(I.target.value)}),e.jsx("button",{onClick:O,className:"btn-secondary w-full mt-2",children:"Split Order"})]}),e.jsxs("div",{className:"pt-4 border-t mt-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Shipping (Shiprocket)"}),j&&N&&e.jsxs("div",{className:"mb-3 p-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded text-xs",children:[e.jsx("p",{className:"text-green-700 dark:text-green-300 font-medium",children:" Shipment Created"}),N.shipment_id&&e.jsxs("p",{className:"text-green-600 dark:text-green-400",children:["ID: ",N.shipment_id]}),N.awb_code&&e.jsxs("p",{className:"text-green-600 dark:text-green-400",children:["AWB: ",N.awb_code]})]}),!j&&e.jsx("div",{className:"mb-3 p-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded text-xs",children:e.jsx("p",{className:"text-yellow-700 dark:text-yellow-300",children:" Create a shipment first to generate AWB"})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:R,className:"btn-primary w-full",disabled:i||j,children:j?"Shipment Already Created":"Create Shipment"}),e.jsx("button",{onClick:D,className:"btn-secondary w-full",disabled:i||!j,title:j?"":"Please create a shipment first",children:"Generate AWB & Label"}),e.jsx("button",{onClick:V,className:"btn-secondary w-full",disabled:i||!j||!(N!=null&&N.awb_code),title:j?N!=null&&N.awb_code?"":"AWB not generated yet":"Please create a shipment first",children:"View Tracking"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Shipping Address"}),e.jsx("div",{className:"text-sm space-y-1",children:a.shipping_address?typeof a.shipping_address=="string"?e.jsx("p",{children:a.shipping_address}):e.jsxs(e.Fragment,{children:[a.shipping_address.firstName||a.shipping_address.first_name?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"font-semibold",children:[a.shipping_address.firstName||a.shipping_address.first_name," ",a.shipping_address.lastName||a.shipping_address.last_name]}),a.shipping_address.company&&e.jsx("p",{className:"text-xs text-gray-600",children:a.shipping_address.company})]}):e.jsx("p",{className:"font-semibold",children:a.customer_name}),e.jsx("p",{children:a.shipping_address.address||a.shipping_address.street||""}),a.shipping_address.apartment&&e.jsx("p",{children:a.shipping_address.apartment}),e.jsxs("p",{children:[a.shipping_address.city||"",", ",a.shipping_address.state||""," ",a.shipping_address.zip||""]}),e.jsx("p",{children:a.shipping_address.country||"India"}),a.shipping_address.phone&&e.jsxs("p",{children:["Phone: ",a.shipping_address.phone]}),a.shipping_address.email&&e.jsxs("p",{children:["Email: ",a.shipping_address.email]})]}):e.jsx("p",{className:"text-gray-600",children:"No shipping address available"})})]}),a.billing_address&&e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Billing Address"}),e.jsx("div",{className:"text-sm space-y-1",children:typeof a.billing_address=="string"?e.jsx("p",{children:a.billing_address}):e.jsxs(e.Fragment,{children:[a.billing_address.firstName||a.billing_address.first_name?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"font-semibold",children:[a.billing_address.firstName||a.billing_address.first_name," ",a.billing_address.lastName||a.billing_address.last_name]}),a.billing_address.company&&e.jsx("p",{className:"text-xs text-gray-600",children:a.billing_address.company})]}):e.jsx("p",{className:"font-semibold",children:a.customer_name}),e.jsx("p",{children:a.billing_address.address||a.billing_address.street||""}),a.billing_address.apartment&&e.jsx("p",{children:a.billing_address.apartment}),e.jsxs("p",{children:[a.billing_address.city||"",", ",a.billing_address.state||""," ",a.billing_address.zip||""]}),e.jsx("p",{children:a.billing_address.country||"India"})]})})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Timeline"}),e.jsx("div",{className:"space-y-3",children:(a.history||[]).length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No history."}):(a.history||[]).map(I=>e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:I.new_status}),I.old_status?e.jsxs("span",{className:"text-gray-500",children:[" (from ",I.old_status,")"]}):null,I.note?e.jsxs("span",{className:"text-gray-600",children:["  ",I.note]}):null,e.jsx("div",{className:"text-xs text-gray-500",children:new Date(I.created_at).toLocaleString()})]},I.id))})]})]}):e.jsx("div",{className:"p-6",children:"Not found"})}function i9(){var f,h;const[t,s]=y.useState(""),[r,a]=y.useState(""),[n,i]=y.useState(!1),[l,o]=y.useState(""),{login:c,isAuthenticated:d,isLoading:u}=im(),p=oi();if(d){const x=((h=(f=p.state)==null?void 0:f.from)==null?void 0:h.pathname)||"/admin";return e.jsx(od,{to:x,replace:!0})}const m=async x=>{x.preventDefault(),i(!0),o("");try{await c(t,r)||o("Invalid email or password")}catch{o("Login failed. Please try again.")}finally{i(!1)}};return u?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Nefol Admin Panel"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:"Sign in to your admin account"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:x=>s(x.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Email address"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:x=>a(x.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Password"})]})]}),l&&e.jsx("div",{className:"text-red-600 text-sm text-center",children:l}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:n,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:n?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"})}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Demo credentials: admin@nefol.com / password"})})]})]})})}function l9(){var se;const{notify:t}=Sr(),[s,r]=y.useState([]),[a,n]=y.useState(""),[i,l]=y.useState([]),[o,c]=y.useState(!0),[d,u]=y.useState(null),[p,m]=y.useState(null),[f,h]=y.useState(!1),[x,g]=y.useState(!1),[j,b]=y.useState(!1),[N,C]=y.useState(null),[A,F]=y.useState("pages"),_="http://192.168.1.36:2000",v=async()=>{try{const H=(await(await fetch(`${_}/api/cms/pages`)).json()).map(K=>({id:K.id,page_name:K.slug,page_title:K.title,page_subtitle:"",meta_description:K.meta_description||"",created_at:K.created_at,updated_at:K.updated_at}));r(H),H.length>0&&!a&&n(H[0].page_name)}catch(B){console.error("Failed to fetch pages:",B),t("error","Failed to fetch pages")}},S=async B=>{try{const K=(await(await fetch(`${_}/api/cms/sections/${B}`)).json()).map(J=>({id:J.id,page_name:B,section_key:J.section_type,section_title:J.title||J.section_type,section_type:J.section_type,content:J.content,order_index:J.order_index,is_active:J.is_active,created_at:J.created_at,updated_at:J.updated_at}));l(K)}catch(L){console.error("Failed to fetch sections:",L),t("error","Failed to fetch sections")}};y.useEffect(()=>{v().then(()=>c(!1)),Je.connect(),b(Je.isConnected());const B=Je.subscribe("cms-update",H=>{console.log(" Real-time CMS update received:",H),C(new Date),H.event.includes("page")&&v(),H.event.includes("section")&&a&&S(a)}),L=setInterval(()=>{b(Je.isConnected())},3e3);return()=>{clearInterval(L),B()}},[]),y.useEffect(()=>{a&&S(a)},[a]);const R=async B=>{try{(await fetch(`${_}/api/cms/pages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:B.page_name,title:B.page_title,content:{},meta_description:B.meta_description})})).ok&&(await v(),h(!1),u(null),t("success","Page saved"))}catch(L){console.error("Failed to save page:",L),t("error","Failed to save page")}},[D,V]=y.useState(null),O=async B=>{try{await fetch(`${_}/api/cms/pages/${B}`,{method:"DELETE"}),await v(),a===B&&n(""),t("success","Page deleted")}catch(L){console.error("Failed to delete page:",L),t("error","Failed to delete page")}},I=async B=>{try{(await fetch(`${_}/api/cms/sections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page_slug:a,section_type:B.section_type,title:B.section_title,content:B.content,order_index:B.order_index,is_active:B.is_active})})).ok&&(await S(a),g(!1),m(null),t("success","Section saved"))}catch(L){console.error("Failed to save section:",L),t("error","Failed to save section")}},[z,Q]=y.useState(null),P=async B=>{try{await fetch(`${_}/api/cms/sections/${B}`,{method:"DELETE"}),await S(a),t("success","Section deleted")}catch(L){console.error("Failed to delete section:",L),t("error","Failed to delete section")}},k=async B=>{await I({...B,is_active:!B.is_active})},X=async(B,L)=>{const H=L==="up"?B.order_index-1:B.order_index+1,K=i.find(J=>J.order_index===H);K&&(await I({...B,order_index:H}),await I({...K,order_index:B.order_index}),await S(a))};return o?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"text-lg",children:"Loading CMS..."})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Content Management System"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[j?e.jsxs(e.Fragment,{children:[e.jsx(K4,{className:"w-4 h-4",style:{color:"#059669"}}),e.jsx("span",{className:"text-sm",style:{color:"#059669"},children:"Live  Real-time updates enabled"})]}):e.jsxs(e.Fragment,{children:[e.jsx(q4,{className:"w-4 h-4",style:{color:"var(--text-muted)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Offline  Changes may not sync"})]}),N&&e.jsxs("span",{className:"text-xs ml-4",style:{color:"var(--text-muted)"},children:["Last update: ",N.toLocaleTimeString()]})]})]}),e.jsxs("button",{onClick:()=>{u(null),h(!0)},className:"btn-primary flex items-center gap-2",children:[e.jsx(ss,{className:"w-5 h-5"}),"New Page"]})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>F("pages"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${A==="pages"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Pages"}),e.jsx("button",{onClick:()=>F("sections"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${A==="sections"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Sections"}),e.jsxs("button",{onClick:()=>F("settings"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${A==="settings"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Settings"]})]}),A==="pages"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"CMS Pages"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(B=>e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold",children:B.page_title||B.page_name}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:B.page_name}),B.page_subtitle&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:B.page_subtitle}),B.meta_description&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:B.meta_description})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>{u(B),h(!0)},className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(Wu,{className:"w-4 h-4 text-blue-600"})}),e.jsx("button",{onClick:()=>V(B.page_name),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(Mt,{className:"w-4 h-4 text-red-600"})})]})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Created: ",new Date(B.created_at).toLocaleDateString()]})]},B.id))})]}),A==="sections"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 bg-white rounded-lg shadow p-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Select Page"}),e.jsx("div",{className:"space-y-2",children:s.map(B=>e.jsx("div",{className:`p-3 rounded-lg cursor-pointer flex items-center justify-between ${a===B.page_name?"bg-blue-100 border-blue-500 border":"bg-gray-50 hover:bg-gray-100"}`,onClick:()=>n(B.page_name),children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:B.page_title||B.page_name}),e.jsx("div",{className:"text-xs text-gray-500",children:B.page_name})]})},B.id))})]}),e.jsx("div",{className:"lg:col-span-3",children:a?e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold",children:["Sections for ",((se=s.find(B=>B.page_name===a))==null?void 0:se.page_title)||a]}),e.jsxs("button",{onClick:()=>{m(null),g(!0)},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(ss,{className:"w-5 h-5"}),"Add Section"]})]}),e.jsx("div",{className:"space-y-4",children:i.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No sections yet. Add your first section to get started."}):i.map(B=>e.jsxs("div",{className:`border rounded-lg p-4 ${B.is_active?"border-gray-200":"border-gray-300 bg-gray-50 opacity-60"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:B.section_title}),e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 rounded",children:B.section_type}),!B.is_active&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded",children:"Hidden"})]}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:B.section_key})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>X(B,"up"),disabled:B.order_index===0,className:"p-1 hover:bg-gray-200 rounded disabled:opacity-30",children:e.jsx(om,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>X(B,"down"),disabled:B.order_index===i.length-1,className:"p-1 hover:bg-gray-200 rounded disabled:opacity-30",children:e.jsx(lm,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>k(B),className:"p-1 hover:bg-gray-200 rounded",children:B.is_active?e.jsx(nt,{className:"w-5 h-5 text-green-600"}):e.jsx(Bu,{className:"w-5 h-5 text-gray-400"})}),e.jsx("button",{onClick:()=>{m(B),g(!0)},className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(Wu,{className:"w-5 h-5 text-blue-600"})}),e.jsx("button",{onClick:()=>Q(B.id),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(Mt,{className:"w-5 h-5 text-red-600"})})]})]}),e.jsx("div",{className:"bg-gray-50 rounded p-3 text-sm",children:e.jsx("pre",{className:"whitespace-pre-wrap font-mono text-xs",children:JSON.stringify(B.content,null,2)})})]},B.id))})]}):e.jsx("div",{className:"bg-white rounded-lg shadow p-12 text-center text-gray-500",children:"Select a page from the sidebar to view and edit its sections"})})]}),A==="settings"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"CMS Settings"}),e.jsx("div",{className:"text-center py-12 text-gray-500",children:"CMS Settings panel coming soon..."})]}),f&&e.jsx(o9,{page:d,onSave:R,onClose:()=>{h(!1),u(null)}}),x&&e.jsx(c9,{section:p,pageName:a,onSave:I,onClose:()=>{g(!1),m(null)}}),e.jsx($a,{open:!!D,onClose:()=>V(null),onConfirm:()=>{D&&O(D)},title:"Delete this page?",description:"This will remove all its sections.",confirmText:"Delete"}),e.jsx($a,{open:!!z,onClose:()=>Q(null),onConfirm:()=>{z!=null&&P(z)},title:"Delete this section?",description:"This action cannot be undone.",confirmText:"Delete"})]})}function o9({page:t,onSave:s,onClose:r}){const[a,n]=y.useState({page_name:(t==null?void 0:t.page_name)||"",page_title:(t==null?void 0:t.page_title)||"",page_subtitle:(t==null?void 0:t.page_subtitle)||"",meta_description:(t==null?void 0:t.meta_description)||""}),i=l=>{l.preventDefault(),s(a)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:t?"Edit Page":"Create New Page"}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(Qt,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Page Name (URL Slug)"}),e.jsx("input",{type:"text",value:a.page_name,onChange:l=>n({...a,page_name:l.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"home, about, contact",required:!0,disabled:!!t}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used in the URL, cannot be changed after creation"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Page Title"}),e.jsx("input",{type:"text",value:a.page_title,onChange:l=>n({...a,page_title:l.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Home Page"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Page Subtitle"}),e.jsx("input",{type:"text",value:a.page_subtitle,onChange:l=>n({...a,page_subtitle:l.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Welcome to our store"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Meta Description"}),e.jsx("textarea",{value:a.meta_description,onChange:l=>n({...a,meta_description:l.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Description for SEO"})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:r,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),"Save Page"]})]})]})]})})}function c9({section:t,pageName:s,onSave:r,onClose:a}){const[n,i]=y.useState({section_key:(t==null?void 0:t.section_key)||"",section_title:(t==null?void 0:t.section_title)||"",section_type:(t==null?void 0:t.section_type)||"text",content:t!=null&&t.content?JSON.stringify(t.content,null,2):"{}",order_index:(t==null?void 0:t.order_index)||0,is_active:(t==null?void 0:t.is_active)!==!1}),l=c=>{c.preventDefault();try{const d=JSON.parse(n.content);r({...n,content:d})}catch{alert("Invalid JSON content")}},o=["hero","text","grid","list","gallery","form","testimonials","features","pricing","cta","contact","faq","team","stats"];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:t?"Edit Section":"Create New Section"}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(Qt,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Section Key (Unique Identifier)"}),e.jsx("input",{type:"text",value:n.section_key,onChange:c=>i({...n,section_key:c.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"hero_banner, features_section",required:!0,disabled:!!t}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unique key for this section, cannot be changed after creation"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Section Title"}),e.jsx("input",{type:"text",value:n.section_title,onChange:c=>i({...n,section_title:c.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Hero Banner"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Section Type"}),e.jsx("select",{value:n.section_type,onChange:c=>i({...n,section_type:c.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:o.map(c=>e.jsx("option",{value:c,children:c},c))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Content (JSON)"}),e.jsx("textarea",{value:n.content,onChange:c=>i({...n,content:c.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 font-mono text-sm",rows:15,placeholder:'{"title": "Welcome", "description": "..."}'}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter valid JSON content for this section"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Order Index"}),e.jsx("input",{type:"number",value:n.order_index,onChange:c=>i({...n,order_index:parseInt(c.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 border rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.is_active,onChange:c=>i({...n,is_active:c.target.checked}),className:"w-4 h-4"}),e.jsx("span",{children:"Active (Visible on website)"})]})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),"Save Section"]})]})]})]})})}function d9(){const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState(!1),[l,o]=y.useState("requests"),[c,d]=y.useState("all"),[u,p]=y.useState(""),[m,f]=y.useState(null),[h,x]=y.useState(!1),g="http://192.168.1.36:2000",j=async()=>{try{i(!0);const S=await(await fetch(`${g}/api/blog/admin/requests`)).json();s(S)}catch(v){console.error("Failed to fetch blog requests:",v)}finally{i(!1)}},b=async()=>{try{i(!0);const S=await(await fetch(`${g}/api/blog/admin/posts`)).json();a(S)}catch(v){console.error("Failed to fetch blog posts:",v)}finally{i(!1)}};y.useEffect(()=>{l==="requests"?j():b()},[l]);const N=async(v,S=!1)=>{try{(await fetch(`${g}/api/blog/admin/approve/${v}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({featured:S})})).ok&&(await j(),await b())}catch(R){console.error("Failed to approve blog request:",R)}},C=async(v,S)=>{try{(await fetch(`${g}/api/blog/admin/reject/${v}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:S})})).ok&&await j()}catch(R){console.error("Failed to reject blog request:",R)}},A=async v=>{if(confirm("Are you sure you want to delete this blog post?"))try{(await fetch(`${g}/api/blog/admin/posts/${v}`,{method:"DELETE"})).ok&&await b()}catch(S){console.error("Failed to delete blog post:",S)}},F=t.filter(v=>{const S=c==="all"||v.status===c,R=v.title.toLowerCase().includes(u.toLowerCase())||v.author_name.toLowerCase().includes(u.toLowerCase());return S&&R}),w=r.filter(v=>v.title.toLowerCase().includes(u.toLowerCase())||v.author_name.toLowerCase().includes(u.toLowerCase())),_=v=>{switch(v){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Blog Request Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage blog submissions and published posts"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{className:"w-5 h-5",style:{color:"#D97706"}}),e.jsxs("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:[t.filter(v=>v.status==="pending").length," pending"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"w-5 h-5",style:{color:"#059669"}}),e.jsxs("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:[r.filter(v=>v.status==="approved").length," published"]})]})]})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>o("requests"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="requests"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Blog Requests"}),e.jsx("button",{onClick:()=>o("posts"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="posts"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Published Posts"})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by title or author...",value:u,onChange:v=>p(v.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),l==="requests"&&e.jsxs("select",{value:c,onChange:v=>d(v.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),n?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Loading..."})]}):e.jsx("div",{className:"space-y-4",children:l==="requests"?F.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No blog requests found"}):F.map(v=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:v.title}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${_(v.status)}`,children:v.status}),v.featured&&e.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded flex items-center gap-1",children:[e.jsx(ur,{className:"w-3 h-3"}),"Featured"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pa,{className:"w-4 h-4"}),v.author_name]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Mr,{className:"w-4 h-4"}),new Date(v.created_at).toLocaleDateString()]})]}),e.jsx("p",{className:"text-gray-700 mb-3",children:v.excerpt}),v.images&&v.images.length>0&&e.jsx("div",{className:"flex gap-2 mb-3",children:v.images.map((S,R)=>e.jsx("img",{src:`${g}${S}`,alt:`Blog image ${R+1}`,className:"w-16 h-16 object-cover rounded"},R))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{f(v),x(!0)},className:"flex items-center gap-1 px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700",children:[e.jsx(nt,{className:"w-4 h-4"}),"View"]}),v.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>N(v.id,!1),className:"flex items-center gap-1 px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:[e.jsx(Vt,{className:"w-4 h-4"}),"Approve"]}),e.jsxs("button",{onClick:()=>N(v.id,!0),className:"flex items-center gap-1 px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",children:[e.jsx(ur,{className:"w-4 h-4"}),"Featured"]}),e.jsxs("button",{onClick:()=>{const S=prompt("Reason for rejection:");S&&C(v.id,S)},className:"flex items-center gap-1 px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:[e.jsx(es,{className:"w-4 h-4"}),"Reject"]})]})]})]}),v.rejection_reason&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"Rejection Reason:"})," ",v.rejection_reason]})})]},v.id)):w.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No published posts yet"}):w.map(v=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:v.title}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${_(v.status)}`,children:v.status}),v.featured&&e.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded flex items-center gap-1",children:[e.jsx(ur,{className:"w-3 h-3"}),"Featured"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pa,{className:"w-4 h-4"}),v.author_name]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Mr,{className:"w-4 h-4"}),new Date(v.created_at).toLocaleDateString()]})]}),e.jsx("p",{className:"text-gray-700",children:v.excerpt})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{f(v),x(!0)},className:"flex items-center gap-1 px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700",children:[e.jsx(nt,{className:"w-4 h-4"}),"View"]}),e.jsxs("button",{onClick:()=>A(v.id),className:"flex items-center gap-1 px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:[e.jsx(Mt,{className:"w-4 h-4"}),"Delete"]})]})]}),v.images&&v.images.length>0&&e.jsx("div",{className:"flex gap-2",children:v.images.map((S,R)=>e.jsx("img",{src:`${g}${S}`,alt:`Blog image ${R+1}`,className:"w-16 h-16 object-cover rounded"},R))})]},v.id))}),h&&m&&e.jsx(u9,{blog:m,onClose:()=>{x(!1),f(null)}})]})}function u9({blog:t,onClose:s}){const r="http://192.168.1.36:2000";return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:t.title}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(es,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pa,{className:"w-4 h-4"}),t.author_name," (",t.author_email,")"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Mr,{className:"w-4 h-4"}),new Date(t.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"bg-gray-50 rounded p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Excerpt:"}),e.jsx("p",{className:"text-gray-700",children:t.excerpt})]}),e.jsxs("div",{className:"bg-gray-50 rounded p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Full Content:"}),e.jsx("div",{className:"whitespace-pre-wrap text-gray-700",children:t.content})]}),t.images&&t.images.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Images:"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:t.images.map((a,n)=>e.jsx("img",{src:`${r}${a}`,alt:`Blog image ${n+1}`,className:"w-full h-32 object-cover rounded"},n))})]}),t.rejection_reason&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-4",children:[e.jsx("h3",{className:"font-semibold text-red-800 mb-2",children:"Rejection Reason:"}),e.jsx("p",{className:"text-red-700",children:t.rejection_reason})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:s,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Close"})})]})})}function x9(){const[t,s]=y.useState([]),[r,a]=y.useState(!0),[n,i]=y.useState(!1),[l,o]=y.useState(null),[c,d]=y.useState({name:"",description:"",points_per_rupee:1,referral_bonus:100,vip_threshold:1e3,status:"active"});y.useEffect(()=>{u()},[]);const u=async()=>{try{a(!0);const f=await Qe.getLoyaltyPrograms();s(f)}catch(f){console.error("Failed to fetch loyalty programs:",f)}finally{a(!1)}},p=async f=>{f.preventDefault();try{l?await Qe.updateLoyaltyProgram(l,c):await Qe.createLoyaltyProgram(c),i(!1),o(null),d({name:"",description:"",points_per_rupee:1,referral_bonus:100,vip_threshold:1e3,status:"active"}),u()}catch(h){console.error("Failed to save loyalty program:",h)}},m=f=>{d({name:f.name,description:f.description||"",points_per_rupee:f.points_per_rupee??1,referral_bonus:f.referral_bonus??0,vip_threshold:f.vip_threshold??0,status:f.status||"active"}),o(f.id),i(!0)};return e.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Loyalty Program"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage customer loyalty programs and rewards"})]}),e.jsxs("button",{onClick:()=>{i(!n),n||o(null)},className:"btn-primary inline-flex items-center",children:[e.jsx(ss,{className:"h-4 w-4 mr-2"})," ",n?"Close":"Add Program"]})]}),n&&e.jsxs("form",{onSubmit:p,className:"bg-white dark:bg-slate-800 rounded-lg p-4 shadow space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-300 mb-1",children:"Name"}),e.jsx("input",{value:c.name,onChange:f=>d({...c,name:f.target.value}),className:"w-full px-3 py-2 border rounded-md bg-slate-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-300 mb-1",children:"Points per  (rupee)"}),e.jsx("input",{type:"number",step:"0.01",value:c.points_per_rupee,onChange:f=>d({...c,points_per_rupee:Number(f.target.value)}),className:"w-full px-3 py-2 border rounded-md bg-slate-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-300 mb-1",children:"Referral Bonus (points)"}),e.jsx("input",{type:"number",value:c.referral_bonus,onChange:f=>d({...c,referral_bonus:Number(f.target.value)}),className:"w-full px-3 py-2 border rounded-md bg-slate-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-300 mb-1",children:"VIP Threshold (points)"}),e.jsx("input",{type:"number",value:c.vip_threshold,onChange:f=>d({...c,vip_threshold:Number(f.target.value)}),className:"w-full px-3 py-2 border rounded-md bg-slate-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-300 mb-1",children:"Description"}),e.jsx("textarea",{value:c.description,onChange:f=>d({...c,description:f.target.value}),className:"w-full px-3 py-2 border rounded-md bg-slate-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-300 mb-1",children:"Status"}),e.jsxs("select",{value:c.status,onChange:f=>d({...c,status:f.target.value}),className:"w-full px-3 py-2 border rounded-md bg-slate-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"active",children:"active"}),e.jsx("option",{value:"inactive",children:"inactive"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",className:"px-4 py-2 rounded-md bg-green-600 text-white hover:bg-green-700",children:[l?"Update":"Create"," Program"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Configured Programs"})}),e.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:r?e.jsx("div",{className:"p-4 text-slate-600 dark:text-slate-300",children:"Loading..."}):t.length===0?e.jsx("div",{className:"p-4 text-slate-600 dark:text-slate-300",children:"No programs configured."}):t.map(f=>e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:f.name}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Points/: ",f.points_per_rupee??1,"  Referral Bonus: ",f.referral_bonus??0,"  VIP Threshold: ",f.vip_threshold??0,"  Status: ",f.status]})]}),e.jsxs("button",{onClick:()=>m(f),className:"inline-flex items-center px-3 py-2 rounded-md bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600",children:[e.jsx(xr,{className:"h-4 w-4 mr-2"})," Edit"]})]},f.id))})]})]})}const gc=t=>`${t} coins`;function m9(){const[t,s]=y.useState(null),[r,a]=y.useState([]),[n,i]=y.useState([]),[l,o]=y.useState(!0),[c,d]=y.useState(""),[u,p]=y.useState(!1),[m,f]=y.useState(0);y.useEffect(()=>{h()},[]);const h=async()=>{try{o(!0),d("");const[b,N,C]=await Promise.all([Qe.getCashbackWallet().catch(()=>null),Qe.getCashbackOffers().catch(()=>[]),Qe.getCashbackTransactions().catch(()=>[])]);b&&s(b),a(Array.isArray(N)?N:[]),i(Array.isArray(C)?C:[])}catch(b){console.error("Failed to load cashback data:",b),d("Failed to load cashback data")}finally{o(!1)}},x=b=>{switch(b){case"pending":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"approved":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"credited":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"expired":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},g=b=>{switch(b){case"pending":return e.jsx(os,{className:"h-4 w-4"});case"approved":return e.jsx(Vt,{className:"h-4 w-4"});case"credited":return e.jsx(Vt,{className:"h-4 w-4"});case"expired":return e.jsx(es,{className:"h-4 w-4"});default:return e.jsx(os,{className:"h-4 w-4"})}},j=async()=>{if(!t||m>t.availableBalance){alert("Insufficient balance");return}if(m<100){alert("Minimum redemption amount is 100");return}try{await Qe.redeemCashback({amount:m}),alert(`Cashback redemption request submitted for ${m}`),p(!1),f(0),await h()}catch(b){alert("Redemption failed. Please try again."),console.error("Redemption error:",b)}};return l?e.jsx("div",{className:"max-w-6xl mx-auto p-6 flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading cashback data..."})]})}):c?e.jsx("div",{className:"max-w-6xl mx-auto p-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:[c,e.jsx("button",{onClick:h,className:"ml-4 underline",children:"Retry"})]})}):t?e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Nefol Coins Program"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Earn coins on every purchase and redeem them for future orders"})]}),e.jsx("button",{onClick:h,className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Refresh"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Available Coins"}),e.jsx("p",{className:"text-3xl font-bold",children:gc(t.availableBalance)})]}),e.jsx(Fb,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Earned"}),e.jsx("p",{className:"text-3xl font-bold",children:gc(t.totalEarned)})]}),e.jsx(zt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Pending"}),e.jsx("p",{className:"text-3xl font-bold",children:gc(t.pendingAmount)})]}),e.jsx(os,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Used"}),e.jsx("p",{className:"text-3xl font-bold",children:gc(t.usedAmount)})]}),e.jsx(si,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Redeem Points"}),e.jsx("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Redeem Now"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Next Payout"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(t.nextPayoutDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Payout Method"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:t.payoutMethod})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Minimum Redemption"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"100"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Active Cashback Offers"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(b=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:b.title}),e.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs rounded-full",children:[b.cashbackPercentage,"% Cashback"]})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-3",children:b.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Min Order:"}),e.jsxs("span",{className:"font-semibold",children:["",b.minOrderValue]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Max Cashback:"}),e.jsxs("span",{className:"font-semibold",children:["",b.maxCashback]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Valid Until:"}),e.jsx("span",{className:"font-semibold",children:new Date(b.validUntil).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded-full",children:b.category}),e.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Shop Now"})]})]},b.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Cashback Calculator"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Order Value ()"}),e.jsx("input",{type:"number",placeholder:"Enter order value",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Select Offer"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{children:"Skincare Essentials (5%)"}),e.jsx("option",{children:"Premium Products (8%)"}),e.jsx("option",{children:"First Time Buyer (10%)"}),e.jsx("option",{children:"Bundle Offers (12%)"})]})]})]}),e.jsx("div",{className:"mt-4 p-4 bg-green-50 dark:bg-green-900 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-green-800 dark:text-green-200 font-semibold",children:"Estimated Cashback:"}),e.jsx("span",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:"150"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Transaction History"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Order Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Cashback"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:n.map(b=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:b.orderId}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:b.productName}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:["",b.orderValue]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:["",b.amount]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${x(b.status)}`,children:[g(b.status),e.jsx("span",{className:"ml-1",children:b.status})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:new Date(b.date).toLocaleDateString()})]},b.id))})]})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"How Cashback Works"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Shop & Earn"}),e.jsx("p",{className:"text-sm opacity-90",children:"Make purchases and automatically earn cashback based on active offers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Cashback Processing"}),e.jsx("p",{className:"text-sm opacity-90",children:"Your cashback is processed within 24-48 hours after order confirmation"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Redeem & Save"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use your cashback balance to get discounts on future purchases"})]})]})]}),u&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Redeem Cashback"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Available Balance: ",t.availableBalance]}),e.jsx("input",{type:"number",value:m,onChange:b=>f(Number(b.target.value)),placeholder:"Enter amount to redeem",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Payout Method"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{children:"Bank Transfer"}),e.jsx("option",{children:"UPI"}),e.jsx("option",{children:"Wallet Credit"})]})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>p(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:j,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Redeem"})]})]})})]}):e.jsx("div",{className:"max-w-6xl mx-auto p-6",children:e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No cashback data available"})})}function h9(){const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState([]),[l,o]=y.useState({isEnabled:!0,allowWelcome:!0,allowPromotional:!0,allowTransactional:!0,allowCart:!0,quietHours:{enabled:!0,start:"22:00",end:"08:00"},frequencyLimit:{enabled:!0,maxPerDay:3}}),[c,d]=y.useState(!0),[u,p]=y.useState(""),[m,f]=y.useState(!1),[h,x]=y.useState(!1),[g,j]=y.useState(!1),[b,N]=y.useState(!1),[C,A]=y.useState(!1),[F,w]=y.useState(null),[_,v]=y.useState("welcome"),[S,R]=y.useState({title:"",message:"",audience:"all"}),[D,V]=y.useState({name:"",category:"",type:"welcome",title:"",message:"",isCustom:!0}),[O,I]=y.useState({name:"",trigger:"",condition:"",action:"",notificationType:"welcome",isActive:!0}),[z,Q]=y.useState("all"),[P,k]=y.useState("all"),[X,se]=y.useState("");y.useEffect(()=>{B()},[]);const B=async()=>{try{d(!0),p("");const ne=[{id:"1",title:"Welcome to Nefol!",message:"Welcome to Nefol! Enjoy 10% off your first order with code WELCOME10",status:"sent",type:"welcome",audience:"all",sentDate:new Date().toISOString(),recipients:1523,deliveryRate:98.5,openRate:87.2,clickRate:23.4,conversionRate:12.5,revenue:45678},{id:"2",title:"Your Cart is Waiting!",message:"You have items in your cart! Complete your purchase now and save 15%",status:"sent",type:"add_to_cart",audience:"cart_abandoners",sentDate:new Date().toISOString(),recipients:842,deliveryRate:97.8,openRate:65.3,clickRate:31.2,conversionRate:18.9,revenue:32145},{id:"3",title:"Order Confirmed!",message:"Your order #12345 has been confirmed and is being processed",status:"sent",type:"purchase",audience:"purchasers",sentDate:new Date().toISOString(),recipients:1205,deliveryRate:99.2,openRate:92.1,clickRate:15.3,conversionRate:8.7,revenue:28934},{id:"4",title:"Share Your Experience!",message:"How was your purchase? We'd love to hear from you!",status:"sent",type:"review",audience:"recent_purchasers",sentDate:new Date().toISOString(),recipients:589,deliveryRate:96.5,openRate:52.3,clickRate:28.7,conversionRate:12.4,revenue:12567}],Ue=[{id:"1",name:"Welcome Message",category:"Onboarding",type:"welcome",title:"Welcome to Nefol!",message:"Welcome to Nefol! Enjoy {{discount}}% off your first order with code {{code}}",isCustom:!1},{id:"2",name:"Add to Cart Reminder",category:"Abandoned Cart",type:"add_to_cart",title:"Your Cart is Waiting!",message:"You have {{item_count}} items in your cart! Complete your purchase now",isCustom:!1},{id:"3",name:"Order Confirmation",category:"Transactional",type:"purchase",title:"Order Confirmed!",message:"Your order #{{order_number}} has been confirmed and is being processed",isCustom:!1},{id:"4",name:"Review Request",category:"Engagement",type:"review",title:"Share Your Experience!",message:"How was your purchase of {{product_name}}? We'd love to hear from you!",isCustom:!1},{id:"5",name:"Promotion Alert",category:"Marketing",type:"promotion",title:"Special Offer Inside!",message:"{{product_name}} is now {{discount}}% off! Limited time only",isCustom:!1},{id:"6",name:"Order Cancellation",category:"Transactional",type:"cancellation",title:"Order Cancelled",message:"Your order #{{order_number}} has been cancelled as requested",isCustom:!1},{id:"7",name:"Product Back in Stock",category:"Product Updates",type:"push",title:"Back in Stock!",message:"{{product_name}} is back in stock! Order now before it's gone",isCustom:!1}];s(ne),a(Ue),i([])}catch(ne){console.error("Failed to load WhatsApp data:",ne),p("Failed to load WhatsApp notification data")}finally{d(!1)}},L=t.filter(ne=>{const Ue=z==="all"||ne.status===z,kt=P==="all"||ne.type===P,it=X===""||ne.title.toLowerCase().includes(X.toLowerCase())||ne.message.toLowerCase().includes(X.toLowerCase());return Ue&&kt&&it}),H={totalNotifications:L.length,totalRecipients:L.reduce((ne,Ue)=>ne+Ue.recipients,0),averageDeliveryRate:L.length>0?L.reduce((ne,Ue)=>ne+Ue.deliveryRate,0)/L.length:0,totalRevenue:L.reduce((ne,Ue)=>ne+Ue.revenue,0)},K=ne=>{switch(ne){case"draft":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";case"scheduled":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"sent":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"paused":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},J=ne=>{switch(ne){case"welcome":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"add_to_cart":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"purchase":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"review":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"promotion":return"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200";case"cancellation":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"push":return"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},re=ne=>{switch(ne){case"welcome":return e.jsx(ts,{className:"h-5 w-5"});case"add_to_cart":return e.jsx(Qs,{className:"h-5 w-5"});case"purchase":return e.jsx(ha,{className:"h-5 w-5"});case"review":return e.jsx(ur,{className:"h-5 w-5"});case"promotion":return e.jsx(Eb,{className:"h-5 w-5"});case"cancellation":return e.jsx(es,{className:"h-5 w-5"});case"push":return e.jsx(Da,{className:"h-5 w-5"});default:return e.jsx(pn,{className:"h-5 w-5"})}},q=ne=>{switch(ne){case"welcome":return"Welcome";case"add_to_cart":return"Add to Cart";case"purchase":return"Purchase";case"review":return"Review";case"promotion":return"Promotion";case"cancellation":return"Cancellation";case"push":return"Push Update";default:return ne}},ae=ne=>{v(ne.type),R({title:ne.title,message:ne.message,audience:"all"}),f(!0)},xe=ne=>{alert(`Preview: ${ne.title}

${ne.message}`)},_e=ne=>{w(ne),j(!0)},Y=ne=>{v(ne.type),R({title:ne.title,message:ne.message,audience:ne.audience}),f(!0)},Fe=ne=>{confirm("Are you sure you want to delete this notification?")&&(s(t.filter(Ue=>Ue.id!==ne)),alert("Notification deleted successfully!"))},Be=()=>{if(!S.title||!S.message){alert("Please fill in all required fields");return}const ne={id:Date.now().toString(),title:S.title,message:S.message,status:"sent",type:_,audience:S.audience,sentDate:new Date().toISOString(),recipients:0,deliveryRate:0,openRate:0,clickRate:0,conversionRate:0,revenue:0};s([ne,...t]),f(!1),R({title:"",message:"",audience:"all"}),alert("WhatsApp notification sent successfully!")},He=()=>{alert("Settings saved successfully!"),x(!1)},Le=()=>{if(!D.name||!D.title||!D.message){alert("Please fill in all required fields");return}const ne={id:Date.now().toString(),...D,category:D.category||"Custom"};a([...r,ne]),N(!1),V({name:"",category:"",type:"welcome",title:"",message:"",isCustom:!0}),alert("Template created successfully!")},ve=()=>{if(!O.name||!O.trigger||!O.action){alert("Please fill in all required fields");return}const ne={id:Date.now().toString(),...O,messagesSent:0,conversionRate:0};i([...n,ne]),A(!1),I({name:"",trigger:"",condition:"",action:"",notificationType:"welcome",isActive:!0}),alert("Automation created successfully!")},et=ne=>{confirm("Are you sure you want to delete this template?")&&(a(r.filter(Ue=>Ue.id!==ne)),alert("Template deleted successfully!"))},wt=ne=>{confirm("Are you sure you want to delete this automation?")&&(i(n.filter(Ue=>Ue.id!==ne)),alert("Automation deleted successfully!"))},fe=ne=>{i(n.map(Ue=>Ue.id===ne?{...Ue,isActive:!Ue.isActive}:Ue))};return c?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading WhatsApp notifications..."})]})})}):u?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:u})]}),e.jsx("button",{onClick:B,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"WhatsApp Notifications"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage WhatsApp notifications for your customers - Add to Cart, Purchase, Review, Promotions, Cancellations, Welcome, and more"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:B,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"btn-secondary flex items-center space-x-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{onClick:()=>{f(!0),R({title:"",message:"",audience:"all"})},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{children:"Send Notification"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Notifications"}),e.jsx("p",{className:"text-3xl font-bold",children:H.totalNotifications})]}),e.jsx(pn,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Recipients"}),e.jsx("p",{className:"text-3xl font-bold",children:H.totalRecipients.toLocaleString()})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Avg Delivery Rate"}),e.jsxs("p",{className:"text-3xl font-bold",children:[H.averageDeliveryRate.toFixed(1),"%"]})]}),e.jsx(sa,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Revenue"}),e.jsxs("p",{className:"text-3xl font-bold",children:["",H.totalRevenue.toLocaleString()]})]}),e.jsx(zt,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Quick Send Notification"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:["welcome","add_to_cart","purchase","review","promotion","cancellation","push"].map(ne=>e.jsxs("button",{onClick:()=>{v(ne),R({title:"",message:"",audience:"all"}),f(!0)},className:"p-4 border-2 border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-center",children:[e.jsx("div",{className:"flex justify-center mb-2",children:re(ne)}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:q(ne)})]},ne))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Notification Settings"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${l.isEnabled?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:l.isEnabled?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Allowed Types"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Welcome"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Add to Cart"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Purchase"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Review"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Meta Integration"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Connected to WhatsApp Business API"}),e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-green-600",children:"Active"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Quiet Hours"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:l.quietHours.enabled?`${l.quietHours.start} - ${l.quietHours.end}`:"Disabled"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Frequency Limit"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:l.frequencyLimit.enabled?`Max ${l.frequencyLimit.maxPerDay} per day`:"No limit"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Recent Notifications"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",placeholder:"Search notifications...",value:X,onChange:ne=>se(ne.target.value),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 rounded text-sm"}),e.jsxs("select",{value:z,onChange:ne=>Q(ne.target.value),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 rounded text-sm",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"paused",children:"Paused"})]}),e.jsxs("select",{value:P,onChange:ne=>k(ne.target.value),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 rounded text-sm",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"welcome",children:"Welcome"}),e.jsx("option",{value:"add_to_cart",children:"Add to Cart"}),e.jsx("option",{value:"purchase",children:"Purchase"}),e.jsx("option",{value:"review",children:"Review"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"cancellation",children:"Cancellation"}),e.jsx("option",{value:"push",children:"Push Update"})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Notification"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Recipients"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Delivery Rate"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:L.map(ne=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[re(ne.type),e.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-medium rounded-full ${J(ne.type)}`,children:q(ne.type)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:ne.title}),e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 max-w-xs truncate",children:ne.message})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${K(ne.status)}`,children:ne.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:ne.recipients.toLocaleString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:[ne.deliveryRate,"%"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:["",ne.revenue.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsx("button",{onClick:()=>_e(ne),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400",title:"View Details",children:e.jsx(nt,{className:"h-4 w-4 inline"})}),e.jsx("button",{onClick:()=>Y(ne),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400",title:"Edit",children:e.jsx(xr,{className:"h-4 w-4 inline"})}),e.jsx("button",{onClick:()=>Fe(ne.id),className:"text-red-600 hover:text-red-900 dark:text-red-400",title:"Delete",children:e.jsx(Mt,{className:"h-4 w-4 inline"})})]})]},ne.id))})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Templates"}),e.jsxs("button",{onClick:()=>{V({name:"",category:"",type:"welcome",title:"",message:"",isCustom:!0}),N(!0)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Template"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(ne=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:ne.name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${J(ne.type)}`,children:q(ne.type)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100 mb-1",children:ne.title}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:ne.message})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>ae(ne),className:"flex-1 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Use Template"}),e.jsx("button",{onClick:()=>xe(ne),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Preview"}),e.jsx("button",{onClick:()=>et(ne.id),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},ne.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Automations"}),e.jsxs("button",{onClick:()=>{I({name:"",trigger:"",condition:"",action:"",notificationType:"welcome",isActive:!0}),A(!0)},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Automation"})]})]}),n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-4",children:"No automations yet"}),e.jsx("button",{onClick:()=>{I({name:"",trigger:"",condition:"",action:"",notificationType:"welcome",isActive:!0}),A(!0)},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Create Your First Automation"})]}):e.jsx("div",{className:"space-y-4",children:n.map(ne=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:ne.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ne.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:ne.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>fe(ne.id),className:`px-3 py-1 text-sm rounded transition-colors ${ne.isActive?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"bg-green-100 text-green-800 hover:bg-green-200"}`,children:ne.isActive?"Deactivate":"Activate"}),e.jsx("button",{onClick:()=>wt(ne.id),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Trigger:"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:ne.trigger})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Condition:"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:ne.condition||"None"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Action:"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:ne.action})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Messages Sent: ",e.jsx("span",{className:"font-semibold",children:ne.messagesSent})]}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Conversion Rate: ",e.jsxs("span",{className:"font-semibold text-green-600",children:[ne.conversionRate,"%"]})]})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${J(ne.notificationType)}`,children:q(ne.notificationType)})]})]},ne.id))})]}),m&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Send WhatsApp Notification"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notification Type"}),e.jsxs("select",{value:_,onChange:ne=>v(ne.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"welcome",children:"Welcome"}),e.jsx("option",{value:"add_to_cart",children:"Add to Cart"}),e.jsx("option",{value:"purchase",children:"Purchase"}),e.jsx("option",{value:"review",children:"Review"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"cancellation",children:"Cancellation"}),e.jsx("option",{value:"push",children:"Push Update"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notification Title"}),e.jsx("input",{type:"text",value:S.title,onChange:ne=>R({...S,title:ne.target.value}),placeholder:"Enter notification title",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notification Message"}),e.jsx("textarea",{rows:4,value:S.message,onChange:ne=>R({...S,message:ne.target.value}),placeholder:"Enter notification message (max 4096 characters for WhatsApp)",maxLength:4096,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Target Audience"}),e.jsxs("select",{value:S.audience,onChange:ne=>R({...S,audience:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"all",children:"All Customers"}),e.jsx("option",{value:"new",children:"New Customers"}),e.jsx("option",{value:"vip",children:"VIP Customers"}),e.jsx("option",{value:"cart_abandoners",children:"Cart Abandoners"}),e.jsx("option",{value:"recent_purchasers",children:"Recent Purchasers"})]})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Be,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Send Notification"})]})]})}),g&&F&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Notification Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Type"}),e.jsx("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:q(F.type)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Status"}),e.jsx("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:F.status})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Title"}),e.jsx("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:F.title})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Message"}),e.jsx("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:F.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Recipients"}),e.jsx("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:F.recipients})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Delivery Rate"}),e.jsxs("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:[F.deliveryRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Open Rate"}),e.jsxs("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:[F.openRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Conversion Rate"}),e.jsxs("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:[F.conversionRate,"%"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Revenue"}),e.jsxs("p",{className:"text-sm text-green-600",children:["",F.revenue.toLocaleString()]})]})]}),e.jsx("div",{className:"flex space-x-4 mt-6",children:e.jsx("button",{onClick:()=>j(!1),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close"})})]})}),h&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"WhatsApp Notification Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Enable WhatsApp Notifications"}),e.jsx("input",{type:"checkbox",checked:l.isEnabled,onChange:ne=>o({...l,isEnabled:ne.target.checked}),className:"rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Allow Welcome Messages"}),e.jsx("input",{type:"checkbox",checked:l.allowWelcome,onChange:ne=>o({...l,allowWelcome:ne.target.checked}),className:"rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Allow Promotional"}),e.jsx("input",{type:"checkbox",checked:l.allowPromotional,onChange:ne=>o({...l,allowPromotional:ne.target.checked}),className:"rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Allow Transactional"}),e.jsx("input",{type:"checkbox",checked:l.allowTransactional,onChange:ne=>o({...l,allowTransactional:ne.target.checked}),className:"rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Allow Cart Notifications"}),e.jsx("input",{type:"checkbox",checked:l.allowCart,onChange:ne=>o({...l,allowCart:ne.target.checked}),className:"rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Quiet Hours Start"}),e.jsx("input",{type:"time",value:l.quietHours.start,onChange:ne=>o({...l,quietHours:{...l.quietHours,start:ne.target.value}}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Quiet Hours End"}),e.jsx("input",{type:"time",value:l.quietHours.end,onChange:ne=>o({...l,quietHours:{...l.quietHours,end:ne.target.value}}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Max Notifications Per Day"}),e.jsx("input",{type:"number",value:l.frequencyLimit.maxPerDay,onChange:ne=>o({...l,frequencyLimit:{...l.frequencyLimit,maxPerDay:parseInt(ne.target.value)}}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>x(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Close"}),e.jsx("button",{onClick:He,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Settings"})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Create WhatsApp Template"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Template Name *"}),e.jsx("input",{type:"text",value:D.name,onChange:ne=>V({...D,name:ne.target.value}),placeholder:"e.g., Welcome Message",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category"}),e.jsx("input",{type:"text",value:D.category,onChange:ne=>V({...D,category:ne.target.value}),placeholder:"e.g., Onboarding, Marketing",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notification Type *"}),e.jsxs("select",{value:D.type,onChange:ne=>V({...D,type:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"welcome",children:"Welcome"}),e.jsx("option",{value:"add_to_cart",children:"Add to Cart"}),e.jsx("option",{value:"purchase",children:"Purchase"}),e.jsx("option",{value:"review",children:"Review"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"cancellation",children:"Cancellation"}),e.jsx("option",{value:"push",children:"Push Update"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:D.title,onChange:ne=>V({...D,title:ne.target.value}),placeholder:"Enter template title",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Message *"}),e.jsx("textarea",{rows:4,value:D.message,onChange:ne=>V({...D,message:ne.target.value}),placeholder:"Enter template message (use {{variable}} for dynamic content)",maxLength:4096,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>N(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Le,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Create Template"})]})]})}),C&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Create WhatsApp Automation"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Automation Name *"}),e.jsx("input",{type:"text",value:O.name,onChange:ne=>I({...O,name:ne.target.value}),placeholder:"e.g., Welcome New Users",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Trigger *"}),e.jsxs("select",{value:O.trigger,onChange:ne=>I({...O,trigger:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"",children:"Select a trigger..."}),e.jsx("option",{value:"user_signs_up",children:"User Signs Up"}),e.jsx("option",{value:"cart_abandoned",children:"Cart Abandoned"}),e.jsx("option",{value:"order_placed",children:"Order Placed"}),e.jsx("option",{value:"order_delivered",children:"Order Delivered"}),e.jsx("option",{value:"product_back_in_stock",children:"Product Back in Stock"}),e.jsx("option",{value:"user_inactive_7_days",children:"User Inactive for 7 Days"}),e.jsx("option",{value:"birthday",children:"Customer Birthday"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Condition (Optional)"}),e.jsx("input",{type:"text",value:O.condition,onChange:ne=>I({...O,condition:ne.target.value}),placeholder:"e.g., Only for VIP customers",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Action *"}),e.jsxs("select",{value:O.action,onChange:ne=>I({...O,action:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"",children:"Select an action..."}),e.jsx("option",{value:"send_welcome_message",children:"Send Welcome Message"}),e.jsx("option",{value:"send_cart_reminder",children:"Send Cart Reminder"}),e.jsx("option",{value:"send_order_confirmation",children:"Send Order Confirmation"}),e.jsx("option",{value:"request_review",children:"Request Product Review"}),e.jsx("option",{value:"send_promotion",children:"Send Promotion"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notification Type *"}),e.jsxs("select",{value:O.notificationType,onChange:ne=>I({...O,notificationType:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"welcome",children:"Welcome"}),e.jsx("option",{value:"add_to_cart",children:"Add to Cart"}),e.jsx("option",{value:"purchase",children:"Purchase"}),e.jsx("option",{value:"review",children:"Review"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"cancellation",children:"Cancellation"}),e.jsx("option",{value:"push",children:"Push Update"})]})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>A(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ve,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Create Automation"})]})]})})]})}function f9(){const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState([]),[l,o]=y.useState([]),[c,d]=y.useState(!0),[u,p]=y.useState(""),[m,f]=y.useState(null),[h,x]=y.useState(""),[g,j]=y.useState(!1),[b,N]=y.useState(!1),[C,A]=y.useState(!1),[F,w]=y.useState(!1),[_,v]=y.useState(!1),[S,R]=y.useState(""),[D,V]=y.useState(""),[O,I]=y.useState(!1),[z,Q]=y.useState(null),[P,k]=y.useState(""),[X,se]=y.useState(""),[B,L]=y.useState("Custom"),[H,K]=y.useState(""),[J,re]=y.useState(""),[q,ae]=y.useState(!1),[xe,_e]=y.useState(""),[Y,Fe]=y.useState(""),[Be,He]=y.useState(""),[Le,ve]=y.useState(""),[et,wt]=y.useState(!1);y.useEffect(()=>{fe()},[]);const fe=async()=>{try{d(!0),p("");const[pe,Oe,Xe]=await Promise.all([Qe.getWhatsAppChats().catch(()=>[]),Qe.getWhatsAppTemplates().catch(()=>[]),Qe.getWhatsAppAutomations().catch(()=>[])]),Ft=Array.isArray(pe)?pe:[];s(Ft),i(Array.isArray(Oe)?Oe:[]),o(Array.isArray(Xe)?Xe:[]),Ft&&Ft.length>0&&f(Ft[0])}catch(pe){console.error("Failed to load WhatsApp data:",pe),p("Failed to load WhatsApp data")}finally{d(!1)}},ne={totalSessions:t.length,activeSessions:t.filter(pe=>pe.status==="active").length,waitingSessions:t.filter(pe=>pe.status==="waiting").length,resolvedSessions:t.filter(pe=>pe.status==="resolved").length},Ue=pe=>{switch(pe){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"waiting":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"resolved":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"closed":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},kt=pe=>{switch(pe){case"urgent":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";case"high":return"text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-200";case"medium":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},it=()=>{h.trim()&&(console.log("Sending message:",h),x(""))},Ct=async()=>{if(!S.trim()||!D.trim()){alert("Please enter both phone number and message");return}I(!0),Q(null);try{const Oe=await fetch("http://192.168.1.36:2000/api/whatsapp-chat/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:S,message:D})}),Xe=await Oe.json();Q(Xe),Oe.ok?(alert(" Message sent successfully!"),R(""),V("")):alert(` Failed to send message: ${Xe.error||"Unknown error"}`)}catch(pe){console.error("Failed to send WhatsApp message:",pe),Q({error:"Network error: "+pe.message}),alert(" Network error occurred")}finally{I(!1)}},St=async()=>{if(!P.trim()||!X.trim()){alert("Please enter template name and content");return}try{const pe="http://192.168.1.36:2000",Oe={name:P,content:X,category:B};q&&(Oe.scheduled_date=H,Oe.scheduled_time=J,Oe.is_scheduled=!0);const Xe=await fetch(`${pe}/api/whatsapp/templates`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Oe)}),Ft=await Xe.json();Xe.ok?(alert(" Template created successfully!"),w(!1),k(""),se(""),L("Custom"),K(""),re(""),ae(!1),fe()):alert(` Failed to create template: ${Ft.error||"Unknown error"}`)}catch(pe){console.error("Failed to create template:",pe),alert(" Network error occurred")}},lt=async()=>{if(!xe.trim()||!Y.trim()){alert("Please enter automation name and trigger");return}try{const pe="http://192.168.1.36:2000",Oe={name:xe,trigger:Y,action:"Send WhatsApp Message"};et&&(Oe.scheduled_date=Be,Oe.scheduled_time=Le,Oe.is_scheduled=!0);const Xe=await fetch(`${pe}/api/whatsapp/automations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Oe)}),Ft=await Xe.json();Xe.ok?(alert(" Automation created successfully!"),v(!1),_e(""),Fe(""),He(""),ve(""),wt(!1),fe()):alert(` Failed to create automation: ${Ft.error||"Unknown error"}`)}catch(pe){console.error("Failed to create automation:",pe),alert(" Network error occurred")}},ot=pe=>{f(pe)};return c?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading WhatsApp data..."})]})})}):u?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:u})]}),e.jsx("button",{onClick:fe,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"WhatsApp Chat Support"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Manage customer conversations and provide instant support"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>A(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(sa,{className:"h-4 w-4"}),e.jsx("span",{children:"Test WhatsApp"})]}),e.jsxs("button",{onClick:fe,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:()=>j(!0),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(gs,{className:"h-4 w-4"}),e.jsx("span",{children:"Templates"})]}),e.jsxs("button",{onClick:()=>N(!0),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{children:"Automations"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Sessions"}),e.jsx("p",{className:"text-3xl font-bold",children:ne.totalSessions})]}),e.jsx(pn,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active"}),e.jsx("p",{className:"text-3xl font-bold",children:ne.activeSessions})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Waiting"}),e.jsx("p",{className:"text-3xl font-bold",children:ne.waitingSessions})]}),e.jsx(os,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Resolved"}),e.jsx("p",{className:"text-3xl font-bold",children:ne.resolvedSessions})]}),e.jsx(Vt,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Chat Sessions"})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:t.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(pn,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No chat sessions available"})]}):t.map(pe=>e.jsxs("div",{onClick:()=>ot(pe),className:`p-4 border-b border-slate-200 dark:border-slate-700 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 ${(m==null?void 0:m.id)===pe.id?"bg-blue-50 dark:bg-blue-900":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:pe.customerName}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Ue(pe.status)}`,children:pe.status}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${kt(pe.priority)}`,children:pe.priority})]})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-1",children:pe.customerPhone}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500 truncate",children:pe.lastMessage}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:pe.lastMessageTime}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:[pe.messageCount," messages"]})]}),pe.assignedAgent&&e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:["Assigned to: ",pe.assignedAgent]})]},pe.id))})]}),e.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-lg shadow-lg flex flex-col",children:m?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:m.customerName}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:m.customerPhone})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:e.jsx(fa,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:e.jsx(V4,{className:"h-4 w-4"})})]})]}),m.tags&&m.tags.length>0&&e.jsx("div",{className:"flex space-x-2 mt-2",children:m.tags.map((pe,Oe)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded-full",children:pe},Oe))})]}),e.jsx("div",{className:"flex-1 p-4 overflow-y-auto max-h-96",children:e.jsx("div",{className:"space-y-4",children:r.map(pe=>e.jsx("div",{className:`flex ${pe.sender==="customer"?"justify-start":"justify-end"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${pe.sender==="customer"?"bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-slate-100":"bg-blue-600 text-white"}`,children:[e.jsx("p",{className:"text-sm",children:pe.message}),e.jsx("p",{className:`text-xs mt-1 ${pe.sender==="customer"?"text-slate-500 dark:text-slate-400":"text-blue-100"}`,children:pe.timestamp})]})},pe.id))})}),e.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:e.jsx(qn,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:e.jsx(gs,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:e.jsx(_b,{className:"h-4 w-4"})}),e.jsx("input",{type:"text",value:h,onChange:pe=>x(pe.target.value),placeholder:"Type your message...",className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",onKeyPress:pe=>pe.key==="Enter"&&it()}),e.jsx("button",{onClick:it,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:e.jsx(sa,{className:"h-4 w-4"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(pn,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Select a chat session to start conversation"})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Templates"}),e.jsx("button",{onClick:()=>w(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Create Template"})]}),n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(gs,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No templates available"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.map(pe=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:pe.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${pe.isApproved?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:pe.isApproved?"Approved":"Pending"})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:pe.category}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 mb-3",children:pe.content}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"flex-1 px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors",children:"Use Template"}),e.jsx("button",{className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Edit"})]})]},pe.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Automations"}),e.jsx("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Automation"})]}),l.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ss,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No automations available"})]}):e.jsx("div",{className:"space-y-4",children:l.map(pe=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:pe.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${pe.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:pe.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Edit"}),e.jsx("button",{className:`px-3 py-1 text-sm rounded transition-colors ${pe.isActive?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"bg-green-100 text-green-800 hover:bg-green-200"}`,children:pe.isActive?"Pause":"Activate"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Trigger:"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:pe.trigger})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Condition:"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:pe.condition})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Action:"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:pe.action})]})]}),e.jsx("div",{className:"mt-3 flex items-center justify-between text-sm",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Messages Sent: ",e.jsx("span",{className:"font-semibold",children:pe.messagesSent})]}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Response Rate: ",e.jsxs("span",{className:"font-semibold text-green-600",children:[pe.responseRate,"%"]})]})]})})]},pe.id))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"WhatsApp Business Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Quick Response"}),e.jsx("p",{className:"text-sm opacity-90",children:"Respond to customer messages within 24 hours to maintain good business rating."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Use Templates"}),e.jsx("p",{className:"text-sm opacity-90",children:"Create approved templates for common messages to ensure consistency and compliance."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Personal Touch"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use customer names and personalize messages to create better engagement."})]})]})]}),F&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Create WhatsApp Template"}),e.jsx("button",{onClick:()=>w(!1),className:"text-slate-500 hover:text-slate-700 dark:text-slate-400",children:e.jsx(es,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Template Name"}),e.jsx("input",{type:"text",value:P,onChange:pe=>k(pe.target.value),placeholder:"e.g., Welcome Message",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Template Content"}),e.jsx("textarea",{value:X,onChange:pe=>se(pe.target.value),placeholder:"Enter your template message...",rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category"}),e.jsxs("select",{value:B,onChange:pe=>L(pe.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"Custom",children:"Custom"}),e.jsx("option",{value:"Welcome",children:"Welcome"}),e.jsx("option",{value:"Promotional",children:"Promotional"}),e.jsx("option",{value:"Transactional",children:"Transactional"}),e.jsx("option",{value:"Reminder",children:"Reminder"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"scheduleTemplate",checked:q,onChange:pe=>ae(pe.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"scheduleTemplate",className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Schedule this template"})]}),q&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Scheduled Date"}),e.jsx("input",{type:"date",value:H,onChange:pe=>K(pe.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Scheduled Time"}),e.jsx("input",{type:"time",value:J,onChange:pe=>re(pe.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:St,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700",children:"Create Template"}),e.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancel"})]})]})]})}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Create WhatsApp Automation"}),e.jsx("button",{onClick:()=>v(!1),className:"text-slate-500 hover:text-slate-700 dark:text-slate-400",children:e.jsx(es,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Automation Name"}),e.jsx("input",{type:"text",value:xe,onChange:pe=>_e(pe.target.value),placeholder:"e.g., Order Confirmation",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Trigger"}),e.jsx("input",{type:"text",value:Y,onChange:pe=>Fe(pe.target.value),placeholder:"e.g., When order is placed",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"scheduleAutomation",checked:et,onChange:pe=>wt(pe.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"scheduleAutomation",className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Schedule this automation"})]}),et&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Scheduled Date"}),e.jsx("input",{type:"date",value:Be,onChange:pe=>He(pe.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Scheduled Time"}),e.jsx("input",{type:"time",value:Le,onChange:pe=>ve(pe.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:lt,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700",children:"Create Automation"}),e.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancel"})]})]})]})}),C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Test WhatsApp Message"}),e.jsx("button",{onClick:()=>A(!1),className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:e.jsx(es,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Phone Number (with country code)"}),e.jsx("input",{type:"text",value:S,onChange:pe=>R(pe.target.value),placeholder:"917355384939",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Include country code (e.g., 91 for India, 1 for USA)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Message"}),e.jsx("textarea",{value:D,onChange:pe=>V(pe.target.value),placeholder:"Enter your test message here...",rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white"})]}),z&&e.jsx("div",{className:`p-3 rounded-lg ${z.success?"bg-green-50 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-red-50 dark:bg-red-900 text-red-800 dark:text-red-200"}`,children:e.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(z,null,2)})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:Ct,disabled:O,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors disabled:bg-slate-400 flex items-center justify-center space-x-2",children:O?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Sending..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(sa,{className:"h-4 w-4"}),e.jsx("span",{children:"Send Message"})]})}),e.jsx("button",{onClick:()=>{A(!1),Q(null)},className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Close"})]})]})]})})]})}function p9(){const[t,s]=y.useState("config"),[r,a]=y.useState({accessToken:"",phoneNumberId:"",businessAccountId:"",webhookUrl:"",verifyToken:""}),[n,i]=y.useState([]),[l,o]=y.useState([]),[c,d]=y.useState([]),[u,p]=y.useState(!1),[m,f]=y.useState("idle"),[h,x]=y.useState(!1),[g,j]=y.useState(!1),[b,N]=y.useState(!1),[C,A]=y.useState(""),[F,w]=y.useState(""),[_,v]=y.useState({name:"",content:"",category:"MARKETING",language:"en_US"}),[S,R]=y.useState({name:"",trigger:"",action:"",template:""}),D="http://192.168.1.36:2000";y.useEffect(()=>{V()},[]);const V=async()=>{p(!0);try{const L=await fetch(`${D}/api/whatsapp/config`);if(L.ok){const re=await L.json();re.success&&a(re.data)}const H=await fetch(`${D}/api/whatsapp-chat/templates`);if(H.ok){const re=await H.json();i(Array.isArray(re)?re:[])}const K=await fetch(`${D}/api/whatsapp-chat/automations`);if(K.ok){const re=await K.json();o(Array.isArray(re)?re:[])}const J=await fetch(`${D}/api/whatsapp-chat/sessions`);if(J.ok){const re=await J.json();d(Array.isArray(re)?re:[])}}catch(L){console.error("Failed to load data:",L)}finally{p(!1)}},O=async()=>{f("saving");try{(await fetch(`${D}/api/whatsapp/config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok?(f("success"),alert(" Configuration saved successfully!")):(f("error"),alert(" Failed to save configuration"))}catch{f("error"),alert(" Network error")}setTimeout(()=>f("idle"),2e3)},I=async()=>{if(!C||!F){alert("Please enter phone number and message");return}try{const L=await fetch(`${D}/api/whatsapp-chat/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:C,message:F})}),H=await L.json();L.ok?(alert(" Message sent successfully!"),A(""),w(""),x(!1),V()):alert(` Failed: ${H.error||"Unknown error"}`)}catch{alert(" Network error")}},z=async()=>{if(!_.name||!_.content){alert("Please fill all fields");return}try{(await fetch(`${D}/api/whatsapp/templates`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)})).ok?(alert(" Template created!"),j(!1),v({name:"",content:"",category:"MARKETING",language:"en_US"}),V()):alert(" Failed to create template")}catch{alert(" Network error")}},Q=async()=>{if(!S.name||!S.trigger){alert("Please fill all fields");return}try{(await fetch(`${D}/api/whatsapp/automations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)})).ok?(alert(" Automation created!"),N(!1),R({name:"",trigger:"",action:"",template:""}),V()):alert(" Failed to create automation")}catch{alert(" Network error")}},P=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900 border border-blue-200 dark:border-blue-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(vo,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-1",children:"How to get these credentials?"}),e.jsxs("ol",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1 list-decimal list-inside",children:[e.jsxs("li",{children:["Go to ",e.jsx("a",{href:"https://developers.facebook.com",target:"_blank",className:"underline",children:"developers.facebook.com"})]}),e.jsx("li",{children:"Select your app  WhatsApp  API Setup"}),e.jsx("li",{children:"Copy Access Token and Phone Number ID"}),e.jsx("li",{children:"Paste them below and click Save"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[e.jsx(Uu,{className:"inline h-4 w-4 mr-1"}),"Access Token *"]}),e.jsx("textarea",{value:r.accessToken,onChange:L=>a({...r,accessToken:L.target.value}),placeholder:"EAAQy...",rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[e.jsx(dm,{className:"inline h-4 w-4 mr-1"}),"Phone Number ID *"]}),e.jsx("input",{type:"text",value:r.phoneNumberId,onChange:L=>a({...r,phoneNumberId:L.target.value}),placeholder:"368410443015784",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Business Account ID (Optional)"}),e.jsx("input",{type:"text",value:r.businessAccountId,onChange:L=>a({...r,businessAccountId:L.target.value}),placeholder:"353217381206675",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Webhook URL (Optional)"}),e.jsx("input",{type:"text",value:r.webhookUrl,onChange:L=>a({...r,webhookUrl:L.target.value}),placeholder:"https://yourdomain.com/webhook",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:O,disabled:m==="saving",className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:bg-slate-400 flex items-center space-x-2",children:[e.jsx(Ms,{className:"h-4 w-4"}),e.jsx("span",{children:m==="saving"?"Saving...":"Save Configuration"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(sa,{className:"h-4 w-4"}),e.jsx("span",{children:"Send Test Message"})]})]})]}),k=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Message Templates"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Create reusable message templates"})]}),e.jsxs("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Template"})]})]}),n.length===0?e.jsxs("div",{className:"text-center py-12 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[e.jsx(gs,{className:"h-12 w-12 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No templates yet. Create your first template!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(L=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:L.name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${L.status==="approved"?"bg-green-100 text-green-800":L.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:L.status})]}),e.jsxs("p",{className:"text-xs text-slate-500 mb-2",children:[L.category,"  ",L.language]}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 mb-3 line-clamp-3",children:L.content}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{className:"flex-1 px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:[e.jsx(nt,{className:"inline h-3 w-3 mr-1"}),"View"]}),e.jsx("button",{className:"px-3 py-1 text-sm border border-slate-300 dark:border-slate-600 rounded hover:bg-slate-50 dark:hover:bg-slate-700",children:e.jsx(xr,{className:"inline h-3 w-3"})}),e.jsx("button",{className:"px-3 py-1 text-sm border border-red-300 text-red-600 rounded hover:bg-red-50",children:e.jsx(Mt,{className:"inline h-3 w-3"})})]})]},L.id))})]}),X=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Automations"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Automate messages based on triggers"})]}),e.jsxs("button",{onClick:()=>N(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Automation"})]})]}),l.length===0?e.jsxs("div",{className:"text-center py-12 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[e.jsx(zl,{className:"h-12 w-12 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No automations yet. Create your first automation!"})]}):e.jsx("div",{className:"space-y-4",children:l.map(L=>e.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:L.name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${L.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:L.isActive?"Active":"Inactive"})]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("strong",{children:"Trigger:"})," ",L.trigger]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("strong",{children:"Action:"})," ",L.action]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-3 py-1 text-sm border border-slate-300 dark:border-slate-600 rounded hover:bg-slate-50",children:e.jsx(xr,{className:"inline h-3 w-3"})}),e.jsx("button",{className:`px-3 py-1 text-sm rounded ${L.isActive?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:L.isActive?"Disable":"Enable"})]})]})},L.id))})]}),se=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Chat Sessions"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Recent WhatsApp conversations"})]}),c.length===0?e.jsxs("div",{className:"text-center py-12 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[e.jsx(pn,{className:"h-12 w-12 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No chat sessions yet"})]}):e.jsx("div",{className:"space-y-3",children:c.map(L=>e.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:L.customerName}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:L.customerPhone}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 mt-2",children:L.lastMessage})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs text-slate-500",children:L.lastMessageTime}),e.jsx("span",{className:`block mt-1 px-2 py-1 text-xs rounded-full ${L.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:L.status})]})]})},L.id))})]}),B=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Analytics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:[e.jsx(Pt,{className:"h-8 w-8 mb-2"}),e.jsx("p",{className:"text-sm opacity-90",children:"Total Messages"}),e.jsx("p",{className:"text-3xl font-bold",children:c.length})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:[e.jsx(pn,{className:"h-8 w-8 mb-2"}),e.jsx("p",{className:"text-sm opacity-90",children:"Active Chats"}),e.jsx("p",{className:"text-3xl font-bold",children:c.filter(L=>L.status==="active").length})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:[e.jsx(gs,{className:"h-8 w-8 mb-2"}),e.jsx("p",{className:"text-sm opacity-90",children:"Templates"}),e.jsx("p",{className:"text-3xl font-bold",children:n.length})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:[e.jsx(zl,{className:"h-8 w-8 mb-2"}),e.jsx("p",{className:"text-sm opacity-90",children:"Automations"}),e.jsx("p",{className:"text-3xl font-bold",children:l.filter(L=>L.isActive).length})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-8 text-center",children:[e.jsx(Ss,{className:"h-16 w-16 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Detailed analytics coming soon..."})]})]});return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"WhatsApp Business Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Complete WhatsApp integration - Configuration, Templates, Automations, and More"})]}),e.jsx("div",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("div",{className:"flex space-x-8",children:[{id:"config",label:"Configuration",icon:Ns},{id:"templates",label:"Templates",icon:gs},{id:"automations",label:"Automations",icon:zl},{id:"sessions",label:"Sessions",icon:pn},{id:"analytics",label:"Analytics",icon:Ss}].map(L=>e.jsxs("button",{onClick:()=>s(L.id),className:`flex items-center space-x-2 pb-4 border-b-2 transition-colors ${t===L.id?"":"border-transparent"}`,style:t===L.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx(L.icon,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:L.label})]},L.id))})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:u?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(br,{className:"h-12 w-12 text-slate-400 mx-auto mb-4 animate-spin"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[t==="config"&&P(),t==="templates"&&k(),t==="automations"&&X(),t==="sessions"&&se(),t==="analytics"&&B()]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Send Test Message"}),e.jsx("button",{onClick:()=>x(!1),children:e.jsx(es,{className:"h-6 w-6 text-slate-500"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Phone Number"}),e.jsx("input",{type:"text",value:C,onChange:L=>A(L.target.value),placeholder:"917355384939",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Message"}),e.jsx("textarea",{value:F,onChange:L=>w(L.target.value),placeholder:"Enter your message...",rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsx("button",{onClick:I,className:"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700",children:"Send Message"})]})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Create Template"}),e.jsx("button",{onClick:()=>j(!1),children:e.jsx(es,{className:"h-6 w-6 text-slate-500"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Template Name"}),e.jsx("input",{type:"text",value:_.name,onChange:L=>v({..._,name:L.target.value}),placeholder:"welcome_message",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Content"}),e.jsx("textarea",{value:_.content,onChange:L=>v({..._,content:L.target.value}),placeholder:"Welcome to Nefol! ...",rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category"}),e.jsxs("select",{value:_.category,onChange:L=>v({..._,category:L.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"MARKETING",children:"Marketing"}),e.jsx("option",{value:"UTILITY",children:"Utility"}),e.jsx("option",{value:"AUTHENTICATION",children:"Authentication"})]})]}),e.jsx("button",{onClick:z,className:"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700",children:"Create Template"})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Create Automation"}),e.jsx("button",{onClick:()=>N(!1),children:e.jsx(es,{className:"h-6 w-6 text-slate-500"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Automation Name"}),e.jsx("input",{type:"text",value:S.name,onChange:L=>R({...S,name:L.target.value}),placeholder:"Order Confirmation",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Trigger"}),e.jsxs("select",{value:S.trigger,onChange:L=>R({...S,trigger:L.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Select trigger..."}),e.jsx("option",{value:"order_placed",children:"Order Placed"}),e.jsx("option",{value:"order_shipped",children:"Order Shipped"}),e.jsx("option",{value:"order_delivered",children:"Order Delivered"}),e.jsx("option",{value:"cart_abandoned",children:"Cart Abandoned"}),e.jsx("option",{value:"user_registered",children:"User Registered"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Action"}),e.jsx("input",{type:"text",value:S.action,onChange:L=>R({...S,action:L.target.value}),placeholder:"Send WhatsApp message",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsx("button",{onClick:Q,className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700",children:"Create Automation"})]})]})})]})}function g9(){const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState(!0),[l,o]=y.useState(""),[c,d]=y.useState(null),[u,p]=y.useState(""),[m,f]=y.useState(!1),[h,x]=y.useState(""),g=y.useRef(null);y.useEffect(()=>{j()},[]);const j=async()=>{try{i(!0),o("");const _=await Qe.getLiveChatSessions().catch(()=>[]),v=Array.isArray(_)?_.map(S=>({id:String(S.id),customerName:S.customerName||S.customer_name||S.customerEmail||S.customer_email||"User",customerEmail:S.customerEmail||S.customer_email||"",customerPhone:S.customerPhone||S.customer_phone,status:S.status||"active",priority:S.priority||"low",assignedAgent:S.assignedAgent||S.assigned_agent,lastMessage:S.lastMessage||S.last_message||"",lastMessageTime:S.lastMessageTime||S.last_message_time||"",messageCount:Number(S.messageCount??S.message_count??0),tags:S.tags||[],notes:S.notes||"",customerLocation:S.customerLocation||S.customer_location,deviceInfo:S.deviceInfo||S.device_info,referrer:S.referrer})):[];v.length>0?(s(v),c||d(v[0])):(s([]),d(null)),a([])}catch(_){console.error("Failed to load chat data:",_),o("Failed to load chat data"),s([]),a([])}finally{i(!1)}};y.useEffect(()=>{let _,v;return(async()=>{if(!c){a([]);return}Je.emit("live-chat:join-session",{sessionId:c.id});try{const R=await Qe.getLiveChatMessages(c.id),D=Array.isArray(R)?R.map(O=>({id:String(O.id),sender:O.sender,senderName:O.sender_name||"",message:O.message,timestamp:O.created_at,type:O.type||"text",isRead:!!O.is_read})):[],V=Array.from(new Map(D.map(O=>[O.id,O])).values());a(V)}catch(R){console.error("Failed to load messages",R),a([])}_=Je.subscribe("live-chat:message",R=>{var D;if(((D=R==null?void 0:R.session_id)==null?void 0:D.toString())===c.id.toString()){const V={id:String(R.id),sender:R.sender,senderName:R.sender_name||"",message:R.message,timestamp:R.created_at,type:R.type||"text",isRead:!!R.is_read};a(O=>O.some(I=>I.id===V.id)?O:[...O,V])}}),v=Je.subscribe("live-chat:typing",R=>{var D;((D=R==null?void 0:R.sessionId)==null?void 0:D.toString())===c.id.toString()&&f(!!R.isTyping&&R.sender==="customer")})})(),()=>{_&&_(),v&&v()}},[c]),y.useEffect(()=>{var _;(_=g.current)==null||_.scrollIntoView({behavior:"smooth"})},[r]);const b=async()=>{if(!c)return;const _=u.trim();if(_)try{await Qe.sendLiveChatMessage({sessionId:c.id,sender:"agent",senderName:"Admin Agent",message:_,type:"text"}),p(""),Je.emit("live-chat:typing",{sessionId:c.id,sender:"agent",isTyping:!1})}catch(v){console.error("Failed to send message",v)}},N=_=>{d(_),p("")},C=_=>{p(_.target.value),!m&&_.target.value.length>0?(f(!0),c&&Je.emit("live-chat:typing",{sessionId:c.id,sender:"agent",isTyping:!0})):m&&_.target.value.length===0&&(f(!1),c&&Je.emit("live-chat:typing",{sessionId:c.id,sender:"agent",isTyping:!1}))},A=_=>{try{const v=new Date(_),R=new Date().getTime()-v.getTime(),D=Math.floor(R/6e4),V=Math.floor(D/60),O=Math.floor(V/24);return D<1?"Just now":D<60?`${D}m ago`:V<24?`${V}h ago`:O<7?`${O}d ago`:v.toLocaleDateString()}catch{return _}},F=_=>{try{return new Date(_).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}catch{return _}},w=t.filter(_=>{const v=(_.customerName||"").toLowerCase(),S=(_.customerEmail||"").toLowerCase(),R=(h||"").toLowerCase();return v.includes(R)||S.includes(R)});return n?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading live chat..."})]})}):e.jsx("div",{className:"h-screen flex flex-col bg-gray-100 dark:bg-slate-900",children:e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"w-1/3 border-r border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800 flex flex-col",children:[e.jsxs("div",{className:"p-4 bg-green-600 dark:bg-green-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-xl font-semibold text-white",children:"Chats"}),e.jsx("button",{onClick:j,className:"text-white hover:text-gray-200 transition-colors",title:"Refresh",children:e.jsx(fs,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search or start new chat",value:h,onChange:_=>x(_.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-slate-700 rounded-lg text-sm text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-400"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:w.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[e.jsx(fs,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No chat sessions found"})]}):w.map(_=>e.jsx("div",{onClick:()=>N(_),className:`p-4 border-b border-gray-200 dark:border-slate-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors ${(c==null?void 0:c.id)===_.id?"bg-gray-100 dark:bg-slate-700":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white font-semibold text-lg",children:((_.customerName||_.customerEmail||"U").charAt(0)||"U").toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:_.customerName||_.customerEmail||"User"}),_.lastMessageTime&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex-shrink-0 ml-2",children:A(_.lastMessageTime)})]}),_.customerEmail&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate mb-1",children:_.customerEmail}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:_.lastMessage||"No messages yet"}),_.status==="active"&&e.jsx("span",{className:"inline-block mt-1 w-2 h-2 bg-green-500 rounded-full"})]})]})},_.id))})]}),e.jsx("div",{className:"flex-1 flex flex-col bg-gray-50 dark:bg-slate-900",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-green-600 dark:bg-green-700 px-4 py-3 flex items-center justify-between border-b border-green-700 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-green-600 font-semibold",children:((c.customerName||c.customerEmail||"U").charAt(0)||"U").toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-white truncate",children:c.customerName||c.customerEmail||"User"}),c.customerEmail&&e.jsx("p",{className:"text-sm text-green-100 truncate",children:c.customerEmail})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-[#ECE5DD] dark:bg-slate-800",children:r.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[e.jsx(fs,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No messages yet. Start the conversation!"})]})}):e.jsxs(e.Fragment,{children:[r.map(_=>e.jsx("div",{className:`flex ${_.sender==="customer"?"justify-start":"justify-end"}`,children:e.jsxs("div",{className:`max-w-[65%] rounded-lg px-3 py-2 shadow-sm ${_.sender==="customer"?"bg-white dark:bg-slate-700 text-gray-900 dark:text-gray-100":"bg-green-500 text-white"}`,children:[_.sender==="customer"&&e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1 font-medium",children:_.senderName}),e.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:_.message}),e.jsxs("div",{className:`flex items-center justify-end gap-1 mt-1 ${_.sender==="customer"?"text-gray-500 dark:text-gray-400":"text-green-50"}`,children:[e.jsx("span",{className:"text-xs",children:F(_.timestamp)}),_.sender==="agent"&&_.isRead&&e.jsx("span",{className:"text-xs",children:""})]})]})},`${_.id}-${_.timestamp||""}`)),m&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-white dark:bg-slate-700 px-3 py-2 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),e.jsx("div",{ref:g})]})}),e.jsx("div",{className:"bg-gray-100 dark:bg-slate-800 px-4 py-3 border-t border-gray-300 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-slate-700 rounded-full transition-colors",children:e.jsx(_b,{className:"h-5 w-5"})}),e.jsx("button",{className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-slate-700 rounded-full transition-colors",children:e.jsx(l4,{className:"h-5 w-5"})}),e.jsx("input",{type:"text",value:u,onChange:C,onKeyPress:_=>_.key==="Enter"&&b(),placeholder:"Type a message",className:"flex-1 px-4 py-2 bg-white dark:bg-slate-700 rounded-full text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500"}),u.trim()?e.jsx("button",{onClick:b,className:"p-2 bg-green-600 text-white rounded-full hover:bg-green-700 transition-colors",children:e.jsx(sa,{className:"h-5 w-5"})}):e.jsx("button",{className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-slate-700 rounded-full transition-colors",children:e.jsx(Q2,{className:"h-5 w-5"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50 dark:bg-slate-900",children:e.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[e.jsx(fs,{className:"h-20 w-20 mx-auto mb-4 opacity-30"}),e.jsx("p",{className:"text-lg",children:"Select a chat to start messaging"}),e.jsx("p",{className:"text-sm mt-2",children:"Choose a conversation from the left panel"})]})})})]})})}function y9(){const[t,s]=y.useState({label:"Last 30 Days",value:"30d",days:30}),[r]=y.useState({revenue:{total:125e4,growth:15.2,monthly:[95e3,11e4,125e3,14e4,135e3,15e4],daily:[4200,3800,4500,5200,4800,5100,4900]},orders:{total:2847,growth:12.8,average:439,conversion:3.2},customers:{total:15420,new:1250,returning:14170,growth:18.5},traffic:{total:125e3,growth:8.7,sources:{organic:45e3,direct:35e3,social:25e3,paid:15e3,email:5e3}},engagement:{pageViews:45e4,bounceRate:35.2,sessionDuration:4.2,pagesPerSession:3.8},products:{topSelling:[{name:"Face Cleanser",sales:450,revenue:225e3,growth:22.5},{name:"Moisturizer",sales:380,revenue:19e4,growth:18.3},{name:"Serum",sales:320,revenue:32e4,growth:25.7},{name:"Sunscreen",sales:280,revenue:14e4,growth:15.2},{name:"Face Mask",sales:250,revenue:125e3,growth:20.1}],categories:[{name:"Skincare",sales:1200,revenue:6e5},{name:"Hair Care",sales:800,revenue:4e5},{name:"Body Care",sales:600,revenue:3e5},{name:"Accessories",sales:200,revenue:1e5}]},marketing:{email:{sent:5e4,opened:15e3,clicked:3e3,conversion:450},sms:{sent:15e3,delivered:14850,clicked:2250,conversion:180},push:{sent:25e3,opened:8750,clicked:1750,conversion:280}}}),a=[{label:"Last 7 Days",value:"7d",days:7},{label:"Last 30 Days",value:"30d",days:30},{label:"Last 90 Days",value:"90d",days:90},{label:"Last Year",value:"1y",days:365}],n=c=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(c),i=c=>new Intl.NumberFormat("en-IN").format(c),l=c=>c>0?"text-green-600":c<0?"text-red-600":"text-gray-600",o=c=>c>0?e.jsx(zt,{className:"h-4 w-4 text-green-600"}):c<0?e.jsx(zt,{className:"h-4 w-4 text-red-600 rotate-180"}):e.jsx(zt,{className:"h-4 w-4 text-gray-600"});return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Advanced Analytics Dashboard"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Comprehensive insights into your business performance"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("select",{value:t.value,onChange:c=>{const d=a.find(u=>u.value===c.target.value);d&&s(d)},className:"px-3 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"},children:a.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))}),e.jsxs("button",{className:"btn-secondary flex items-center space-x-2",children:[e.jsx(ja,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(br,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Revenue"}),e.jsx("p",{className:"text-3xl font-bold",children:n(r.revenue.total)}),e.jsxs("div",{className:"flex items-center mt-2",children:[o(r.revenue.growth),e.jsxs("span",{className:"ml-1 text-sm",children:[r.revenue.growth>0?"+":"",r.revenue.growth,"%"]})]})]}),e.jsx(jo,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Orders"}),e.jsx("p",{className:"text-3xl font-bold",children:i(r.orders.total)}),e.jsxs("div",{className:"flex items-center mt-2",children:[o(r.orders.growth),e.jsxs("span",{className:"ml-1 text-sm",children:[r.orders.growth>0?"+":"",r.orders.growth,"%"]})]})]}),e.jsx(Qs,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Customers"}),e.jsx("p",{className:"text-3xl font-bold",children:i(r.customers.total)}),e.jsxs("div",{className:"flex items-center mt-2",children:[o(r.customers.growth),e.jsxs("span",{className:"ml-1 text-sm",children:[r.customers.growth>0?"+":"",r.customers.growth,"%"]})]})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Conversion Rate"}),e.jsxs("p",{className:"text-3xl font-bold",children:[r.orders.conversion,"%"]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-1 text-sm",children:"Industry avg: 2.5%"})]})]}),e.jsx(cs,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Revenue Trend"}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-2",children:r.revenue.monthly.map((c,d)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"bg-blue-500 rounded-t w-8 mb-2",style:{height:`${c/Math.max(...r.revenue.monthly)*200}px`}}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:n(c)}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:["M",d+1]})]},d))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Daily Orders"}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-2",children:r.revenue.daily.map((c,d)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"bg-green-500 rounded-t w-8 mb-2",style:{height:`${c/Math.max(...r.revenue.daily)*200}px`}}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:c}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:["D",d+1]})]},d))})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Traffic Sources"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:Object.entries(r.traffic.sources).map(([c,d])=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-2 relative",children:e.jsx("div",{className:"w-full h-full rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center",children:e.jsxs("span",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:[Math.round(d/r.traffic.total*100),"%"]})})}),e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 capitalize",children:c}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[i(d)," visitors"]})]},c))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Top Selling Products"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Sales"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Growth"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:r.products.topSelling.map((c,d)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:d+1})}),e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:c.name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:i(c.sales)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:n(c.revenue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[o(c.growth),e.jsxs("span",{className:`ml-1 text-sm ${l(c.growth)}`,children:[c.growth>0?"+":"",c.growth,"%"]})]})})]},d))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Email Marketing"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Sent"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:i(r.marketing.email.sent)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Open Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[(r.marketing.email.opened/r.marketing.email.sent*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Click Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[(r.marketing.email.clicked/r.marketing.email.sent*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Conversions"}),e.jsx("span",{className:"font-semibold text-green-600",children:i(r.marketing.email.conversion)})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"SMS Marketing"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Sent"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:i(r.marketing.sms.sent)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Delivery Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[(r.marketing.sms.delivered/r.marketing.sms.sent*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Click Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[(r.marketing.sms.clicked/r.marketing.sms.sent*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Conversions"}),e.jsx("span",{className:"font-semibold text-green-600",children:i(r.marketing.sms.conversion)})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Push Notifications"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Sent"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:i(r.marketing.push.sent)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Open Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[(r.marketing.push.opened/r.marketing.push.sent*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Click Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[(r.marketing.push.clicked/r.marketing.push.sent*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Conversions"}),e.jsx("span",{className:"font-semibold text-green-600",children:i(r.marketing.push.conversion)})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Customer Breakdown"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Customers"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:i(r.customers.total)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"New Customers"}),e.jsx("span",{className:"font-semibold text-blue-600",children:i(r.customers.new)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Returning Customers"}),e.jsx("span",{className:"font-semibold text-green-600",children:i(r.customers.returning)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Customer Growth"}),e.jsxs("div",{className:"flex items-center",children:[o(r.customers.growth),e.jsxs("span",{className:`ml-1 text-sm ${l(r.customers.growth)}`,children:[r.customers.growth>0?"+":"",r.customers.growth,"%"]})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Engagement Metrics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Page Views"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:i(r.engagement.pageViews)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Bounce Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[r.engagement.bounceRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Session Duration"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[r.engagement.sessionDuration,"m"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Pages per Session"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:r.engagement.pagesPerSession})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Product Categories Performance"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:r.products.categories.map((c,d)=>e.jsxs("div",{className:"text-center p-4 border border-slate-200 dark:border-slate-700 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:c.name}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Sales"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:i(c.sales)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:n(c.revenue)})]})]})]},d))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Performance Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(zt,{className:"h-6 w-6"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Revenue Growth"}),e.jsxs("p",{className:"text-sm opacity-90",children:["Your revenue has grown by ",r.revenue.growth,"% compared to last period"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(Pt,{className:"h-6 w-6"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Customer Acquisition"}),e.jsxs("p",{className:"text-sm opacity-90",children:[r.customers.new," new customers acquired this period"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(cs,{className:"h-6 w-6"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Conversion Rate"}),e.jsxs("p",{className:"text-sm opacity-90",children:[r.orders.conversion,"% conversion rate, above industry average"]})]})]})]})]})}const Ka="http://192.168.1.36:2000";function b9(){var B,L,H,K;const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState(!0),[l,o]=y.useState(null),[c,d]=y.useState(!1),[u,p]=y.useState(!1),[m,f]=y.useState(!1),[h,x]=y.useState(null),[g,j]=y.useState(""),[b,N]=y.useState(""),[C,A]=y.useState(null),F=[{type:"text",label:"Text Input",icon:w0},{type:"email",label:"Email",icon:ts},{type:"phone",label:"Phone",icon:fa},{type:"textarea",label:"Text Area",icon:gs},{type:"select",label:"Dropdown",icon:Ns},{type:"checkbox",label:"Checkbox",icon:Tb},{type:"radio",label:"Radio Button",icon:Ns},{type:"date",label:"Date Picker",icon:Mr},{type:"number",label:"Number",icon:w0},{type:"file",label:"File Upload",icon:qn},{type:"rating",label:"Rating",icon:ur}];y.useEffect(()=>{w(),_()},[]);const w=async()=>{try{i(!0);const J=await fetch(`${Ka}/api/forms`);if(J.ok){const re=await J.json(),q=re.forms||re||[];s(q.map(ae=>({...ae,fields:typeof ae.fields=="string"?JSON.parse(ae.fields):ae.fields||[]})))}}catch(J){console.error("Error fetching forms:",J)}finally{i(!1)}},_=async()=>{try{const J=await fetch(`${Ka}/api/forms/submissions`);if(J.ok){const re=await J.json();a(re.submissions||re||[])}}catch(J){console.error("Error fetching submissions:",J)}},v=async()=>{if(!g.trim()){alert("Please enter a form title");return}try{const J={name:g,fields:[],status:"draft"},re=await fetch(`${Ka}/api/forms`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:g,description:b,fields:[],settings:{},isPublished:!1})});if(re.ok){const q=await re.json(),ae={...q,fields:typeof q.fields=="string"?JSON.parse(q.fields):q.fields||[]};s([ae,...t]),o(ae),d(!1),j(""),N(""),alert("Form created successfully!")}else{const q=await re.json();alert(q.message||"Failed to create form")}}catch(J){console.error("Error creating form:",J),alert("Failed to create form")}},S=J=>{if(!l)return;const re={id:Date.now().toString(),type:J,label:`New ${J} Field`,required:!1,options:J==="select"||J==="radio"?["Option 1","Option 2"]:void 0},q=[...l.fields||[],re];O(q)},R=J=>{if(!l)return;const re=l.fields.filter(q=>q.id!==J);O(re)},D=J=>{x({...J})},V=()=>{if(!l||!h)return;const J=l.fields.map(re=>re.id===h.id?h:re);O(J),x(null)},O=async J=>{if(l)try{const re={...l,fields:J},q=await fetch(`${Ka}/api/forms/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:re.name,description:"",fields:J,settings:{},isPublished:re.status==="active"})});if(q.ok){const ae=await q.json(),xe={...ae,fields:typeof ae.fields=="string"?JSON.parse(ae.fields):ae.fields||[]};o(xe),s(t.map(_e=>_e.id===xe.id?xe:_e))}}catch(re){console.error("Error updating form:",re),alert("Failed to update form")}},I=async J=>{try{const re=t.find(ae=>ae.id===J);if(!re)return;(await fetch(`${Ka}/api/forms/${J}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:re.name,description:"",fields:re.fields,settings:{},isPublished:!0})})).ok&&(await w(),alert("Form published successfully!"))}catch(re){console.error("Error publishing form:",re),alert("Failed to publish form")}},z=async J=>{try{const re=t.find(ae=>ae.id===J);if(!re)return;(await fetch(`${Ka}/api/forms/${J}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:re.name,description:"",fields:re.fields,settings:{},isPublished:!1})})).ok&&(await w(),alert("Form unpublished successfully!"))}catch(re){console.error("Error unpublishing form:",re),alert("Failed to unpublish form")}},Q=async J=>{try{const re=t.find(ae=>ae.id===J);if(!re)return;(await fetch(`${Ka}/api/forms`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:`${re.name} (Copy)`,description:"",fields:re.fields,settings:{},isPublished:!1})})).ok&&(await w(),alert("Form copied successfully!"))}catch(re){console.error("Error copying form:",re),alert("Failed to copy form")}},P=async J=>{if(confirm("Are you sure you want to delete this form? This action cannot be undone."))try{(await fetch(`${Ka}/api/forms/${J}`,{method:"DELETE"})).ok&&(s(t.filter(q=>q.id!==J)),(l==null?void 0:l.id)===J&&o(null),alert("Form deleted successfully!"))}catch(re){console.error("Error deleting form:",re),alert("Failed to delete form")}},k=(J,re)=>{if(!l)return;const q=[...l.fields],ae=re==="up"?J-1:J+1;ae<0||ae>=q.length||([q[J],q[ae]]=[q[ae],q[J]],O(q))},X=J=>{const re=F.find(q=>q.type===J);return re?re.icon:w0},se=J=>r.filter(re=>re.form_id===J);return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Form Builder"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Create custom forms to collect customer data and feedback"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>f(!m),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center space-x-2",children:[e.jsx(nt,{className:"h-4 w-4"}),e.jsx("span",{children:"View Submissions"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Form"})]})]})]}),m&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"All Form Submissions"}),e.jsx("button",{onClick:()=>f(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:e.jsx(Qt,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"space-y-4",children:r.length===0?e.jsx("p",{className:"text-slate-500 text-center py-8",children:"No submissions yet"}):r.map(J=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:J.form_name||`Form #${J.form_id}`}),e.jsx("span",{className:"text-sm text-slate-500",children:new Date(J.created_at).toLocaleString()})]}),e.jsx("div",{className:"space-y-1",children:Object.entries(J.data).map(([re,q])=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:[re,":"]})," ",e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:String(q)})]},re))})]},J.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Your Forms"}),t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-slate-500 mb-4",children:"No forms created yet"}),e.jsx("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Your First Form"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(J=>{var q;const re=se(J.id);return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:J.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${J.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:J.status==="active"?"Published":"Draft"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-500 dark:text-slate-500 mb-4",children:[e.jsxs("span",{children:[re.length," submissions"]}),e.jsxs("span",{children:[((q=J.fields)==null?void 0:q.length)||0," fields"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>o(J),className:"flex-1 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>{o(J),p(!0)},className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(nt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Q(J.id),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(Xi,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>P(J.id),className:"px-3 py-1 border border-red-300 dark:border-red-600 text-red-700 dark:text-red-300 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},J.id)})})]}),l&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Add Field"}),e.jsx("div",{className:"space-y-2",children:F.map(J=>{const re=J.icon;return e.jsxs("button",{onClick:()=>S(J.type),className:"w-full flex items-center space-x-3 p-3 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[e.jsx(re,{className:"h-4 w-4 text-slate-600 dark:text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:J.label})]},J.type)})})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Form Fields: ",l.name]}),e.jsx("div",{className:"flex gap-2",children:l.status==="active"?e.jsx("button",{onClick:()=>z(l.id),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:"Unpublish"}):e.jsx("button",{onClick:()=>I(l.id),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Publish Form"})})]}),((B=l.fields)==null?void 0:B.length)===0?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg",children:[e.jsx("p",{className:"text-slate-500 mb-4",children:"No fields added yet"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Click on a field type to add it to your form"})]}):e.jsx("div",{className:"space-y-4",children:(L=l.fields)==null?void 0:L.map((J,re)=>{const q=X(J.type);return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[e.jsx(O2,{className:"h-4 w-4 text-slate-400 cursor-move"}),e.jsx(q,{className:"h-4 w-4 text-slate-600 dark:text-slate-400"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:J.label}),J.required&&e.jsx("span",{className:"text-red-500 text-sm",children:"*"})]}),e.jsxs("div",{className:"flex space-x-2",children:[re>0&&e.jsx("button",{onClick:()=>k(re,"up"),className:"p-1 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400",children:e.jsx(om,{className:"h-4 w-4"})}),re<l.fields.length-1&&e.jsx("button",{onClick:()=>k(re,"down"),className:"p-1 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400",children:e.jsx(lm,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>D(J),className:"p-1 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400",children:e.jsx(xr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>R(J.id),className:"p-1 text-slate-600 dark:text-slate-400 hover:text-red-600 dark:hover:text-red-400",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Type: ",J.type,J.placeholder&&e.jsxs("span",{className:"ml-2",children:["Placeholder: ",J.placeholder]})]}),J.options&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Options:"}),e.jsx("ul",{className:"text-sm text-slate-500 dark:text-slate-500",children:J.options.map((ae,xe)=>e.jsxs("li",{children:[" ",ae]},xe))})]})]},J.id)})})]})]}),h&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Edit Field"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Label"}),e.jsx("input",{type:"text",value:h.label,onChange:J=>x({...h,label:J.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Placeholder"}),e.jsx("input",{type:"text",value:h.placeholder||"",onChange:J=>x({...h,placeholder:J.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),(h.type==="select"||h.type==="radio")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Options (one per line)"}),e.jsx("textarea",{value:((H=h.options)==null?void 0:H.join(`
`))||"",onChange:J=>x({...h,options:J.target.value.split(`
`).filter(re=>re.trim())}),rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:h.required,onChange:J=>x({...h,required:J.target.checked}),className:"rounded"}),e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Required"})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>x(null),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:V,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save"})]})]})}),u&&l&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Form Preview: ",l.name]}),e.jsx("button",{onClick:()=>p(!1),className:"text-2xl text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:""})]}),e.jsxs("div",{className:"space-y-4",children:[(K=l.fields)==null?void 0:K.map(J=>{var re,q;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:[J.label,J.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),J.type==="text"&&e.jsx("input",{type:"text",placeholder:J.placeholder,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),J.type==="email"&&e.jsx("input",{type:"email",placeholder:J.placeholder,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),J.type==="phone"&&e.jsx("input",{type:"tel",placeholder:J.placeholder,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),J.type==="textarea"&&e.jsx("textarea",{rows:4,placeholder:J.placeholder,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),J.type==="select"&&e.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{children:"Select an option"}),(re=J.options)==null?void 0:re.map((ae,xe)=>e.jsx("option",{value:ae,children:ae},xe))]}),J.type==="checkbox"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",className:"rounded"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:J.label})]}),J.type==="radio"&&e.jsx("div",{className:"space-y-2",children:(q=J.options)==null?void 0:q.map((ae,xe)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:J.id,className:"rounded"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:ae})]},xe))}),J.type==="date"&&e.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),J.type==="number"&&e.jsx("input",{type:"number",placeholder:J.placeholder,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),J.type==="file"&&e.jsx("input",{type:"file",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),J.type==="rating"&&e.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(ae=>e.jsx("button",{className:"text-yellow-400 hover:text-yellow-500",children:e.jsx(ur,{className:"h-6 w-6"})},ae))})]},J.id)}),e.jsx("button",{className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"Submit"})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Create New Form"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Form Title *"}),e.jsx("input",{type:"text",value:g,onChange:J=>j(J.target.value),placeholder:"Enter form title",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{rows:3,value:b,onChange:J=>N(J.target.value),placeholder:"Enter form description",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>{d(!1),j(""),N("")},className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:v,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Form"})]})]})})]})}const I0="http://192.168.1.36:2000";function v9(){const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState(!0),[l,o]=y.useState(""),[c,d]=y.useState("all"),[u,p]=y.useState("all"),[m,f]=y.useState(null),[h,x]=y.useState([]);y.useEffect(()=>{g(),j(),b()},[]);const g=async()=>{try{i(!0);const v=await fetch(`${I0}/api/forms/submissions`);if(v.ok){const S=await v.json();s(S.submissions||S||[])}}catch(v){console.error("Error fetching submissions:",v)}finally{i(!1)}},j=async()=>{try{const v=await fetch(`${I0}/api/users`);if(v.ok){const S=await v.json();a(S||[])}}catch(v){console.error("Error fetching users:",v)}},b=async()=>{try{const v=await fetch(`${I0}/api/forms`);if(v.ok){const S=await v.json();x(S.forms||S||[])}}catch(v){console.error("Error fetching forms:",v)}},N=v=>{const S=v.data||{},R=S.email||S.Email||"";return R&&r.find(D=>D.email.toLowerCase()===R.toLowerCase())||null},C=v=>{const S=N(v),R=v.data||{};return{user:S,name:R.name||R.Name||(S==null?void 0:S.name)||"Anonymous",email:R.email||R.Email||(S==null?void 0:S.email)||"N/A",phone:R.phone||R.Phone||(S==null?void 0:S.phone)||null}},A=t.filter(v=>{var V;const S=((V=v.form_name)==null?void 0:V.toLowerCase().includes(l.toLowerCase()))||Object.values(v.data||{}).some(O=>String(O).toLowerCase().includes(l.toLowerCase())),R=c==="all"||v.status===c,D=u==="all"||String(v.form_id)===u;return S&&R&&D}),F=async(v,S)=>{try{s(t.map(R=>R.id===v?{...R,status:S}:R))}catch(R){console.error("Error updating submission status:",R)}},w=()=>{var V;const v=[["Form Name","User Name","Email","Phone","Submission Date","Status",...Object.keys(((V=t[0])==null?void 0:V.data)||{})].join(","),...A.map(O=>{const I=C(O),z=O.data||{};return[O.form_name||`Form #${O.form_id}`,I.name,I.email,I.phone||"",new Date(O.created_at).toLocaleString(),O.status,...Object.values(z).map(Q=>`"${String(Q).replace(/"/g,'""')}"`)].join(",")})].join(`
`),S=new Blob([v],{type:"text/csv"}),R=window.URL.createObjectURL(S),D=document.createElement("a");D.href=R,D.download=`form-submissions-${new Date().toISOString().split("T")[0]}.csv`,D.click(),window.URL.revokeObjectURL(R)},_=v=>{switch(v){case"new":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300";case"read":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300";case"archived":return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300";default:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300"}};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Form Submissions"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"View and manage all form submissions from users"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:w,disabled:A.length===0,className:"btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ja,{className:"h-4 w-4"}),e.jsx("span",{children:"Export CSV"})]}),e.jsxs("div",{className:"metric-card px-4 py-2",children:[e.jsx("div",{className:"text-sm font-medium mb-1",style:{color:"var(--text-muted)"},children:"Total Submissions"}),e.jsx("div",{className:"text-2xl font-light",style:{color:"var(--arctic-blue-primary-dark)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:t.length})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search submissions...",value:l,onChange:v=>o(v.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("select",{value:c,onChange:v=>d(v.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"read",children:"Read"}),e.jsx("option",{value:"archived",children:"Archived"})]}),e.jsxs("select",{value:u,onChange:v=>p(v.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Forms"}),h.map(v=>e.jsx("option",{value:String(v.id),children:v.name},v.id))]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:A.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(gs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No submissions found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l||c!=="all"||u!=="all"?"Try adjusting your filters":"No form submissions have been received yet"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Form"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Submitted"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:A.map(v=>{const S=C(v);return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(gs,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:v.form_name||`Form #${v.form_id}`}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ID: ",v.form_id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900/20 flex items-center justify-center",children:e.jsx(pa,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:S.name}),S.user&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["User ID: ",S.user.id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ts,{className:"h-4 w-4 text-gray-400"}),S.email]}),S.phone&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:S.phone})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mr,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:new Date(v.created_at).toLocaleDateString()})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:new Date(v.created_at).toLocaleTimeString()})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${_(v.status)}`,children:v.status||"new"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("button",{onClick:()=>f(v),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors flex items-center space-x-1",children:[e.jsx(nt,{className:"h-4 w-4"}),e.jsx("span",{children:"View"})]})})]},v.id)})})]})})}),m&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Submission Details"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:m.form_name||`Form #${m.form_id}`})]}),e.jsx("button",{onClick:()=>f(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(Qt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(pa,{className:"h-5 w-5 mr-2"}),"User Information"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(()=>{const v=C(m);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Name"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:v.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:v.email})]}),v.phone&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Phone"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:v.phone})]}),v.user&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Registered User"}),e.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:["Yes (User ID: ",v.user.id,")"]})]})]})})()})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(gs,{className:"h-5 w-5 mr-2"}),"Form Data"]}),e.jsx("div",{className:"space-y-4",children:Object.entries(m.data||{}).map(([v,S])=>["email","Email","name","Name","phone","Phone"].includes(v)?null:e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-4 last:border-0",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:v}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:typeof S=="object"?JSON.stringify(S,null,2):String(S)})]},v))})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(Mr,{className:"h-5 w-5 mr-2"}),"Submission Metadata"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Submission ID"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:["#",m.id]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),e.jsx("p",{className:"text-sm mt-1",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${_(m.status)}`,children:m.status||"new"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Submitted At"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:new Date(m.created_at).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Form ID"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:m.form_id})]})]})]}),e.jsxs("div",{className:"flex space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>{F(m.id,"read"),f(null)},className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4"}),e.jsx("span",{children:"Mark as Read"})]}),e.jsx("button",{onClick:()=>{F(m.id,"archived"),f(null)},className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Archive"}),e.jsx("button",{onClick:()=>f(null),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Close"})]})]})]})})]})}function j9(){const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState(!0),[l,o]=y.useState("");y.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0),o("");const v=await Qe.getWorkflows().catch(()=>[]);s(Array.isArray(v)?v:[])}catch(v){console.error("Failed to load workflows data:",v),o("Failed to load workflows data")}finally{i(!1)}},[d,u]=y.useState(null),[p,m]=y.useState(!1),[f,h]=y.useState(!1),[x,g]=y.useState("workflows"),j={totalWorkflows:t.length||0,activeWorkflows:t.filter(v=>v.status==="active").length||0,totalRuns:t.reduce((v,S)=>{var R;return v+(((R=S.stats)==null?void 0:R.totalRuns)||0)},0),averageSuccessRate:t.length>0?t.reduce((v,S)=>{var R;return v+(((R=S.stats)==null?void 0:R.successRate)||0)},0)/t.length:0},b=v=>{switch(v){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"paused":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"draft":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}};if(n)return e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading workflows..."})]})})});if(l)return e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:l})]}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})});const N=v=>{switch(v){case"marketing":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"sales":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"support":return"text-purple-600 bg-purple-100 dark:bg-purple-900 dark:text-purple-200";case"retention":return"text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},C=v=>{console.log("Toggling workflow:",v),alert("Workflow status updated!")},A=v=>{u(v)},F=v=>{console.log("Deleting workflow:",v),alert("Workflow deleted successfully!")},w=v=>{console.log("Copying workflow:",v),alert("Workflow copied successfully!")},_=v=>{console.log("Using template:",v),alert("Workflow created from template!")};return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Workflow Automation"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Automate customer interactions across all channels"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>h(!0),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(nt,{className:"h-4 w-4"}),e.jsx("span",{children:"Templates"})]}),e.jsxs("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Workflow"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Workflows"}),e.jsx("p",{className:"text-3xl font-bold",children:j.totalWorkflows})]}),e.jsx(X4,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active"}),e.jsx("p",{className:"text-3xl font-bold",children:j.activeWorkflows})]}),e.jsx(Ua,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Runs"}),e.jsx("p",{className:"text-3xl font-bold",children:j.totalRuns.toLocaleString()})]}),e.jsx(Ss,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Success Rate"}),e.jsxs("p",{className:"text-3xl font-bold",children:[j.averageSuccessRate.toFixed(1),"%"]})]}),e.jsx(cs,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsxs("nav",{className:"flex space-x-8 px-6",children:[e.jsx("button",{onClick:()=>g("workflows"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${x==="workflows"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"My Workflows"}),e.jsx("button",{onClick:()=>g("templates"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${x==="templates"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"Templates"}),e.jsx("button",{onClick:()=>g("analytics"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${x==="analytics"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"Analytics"})]})}),e.jsxs("div",{className:"p-6",children:[x==="workflows"&&e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(v=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:v.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${b(v.status)}`,children:v.status})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:v.description}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Runs:"}),e.jsx("span",{className:"font-semibold",children:v.stats.totalRuns})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Success Rate:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[v.stats.successRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Last Run:"}),e.jsx("span",{className:"font-semibold",children:v.stats.lastRun})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>A(v),className:"flex-1 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>C(v.id),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:v.status==="active"?e.jsx(jn,{className:"h-4 w-4"}):e.jsx(Ua,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>w(v.id),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(Xi,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>F(v.id),className:"px-3 py-1 border border-red-300 dark:border-red-600 text-red-700 dark:text-red-300 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},v.id))})}),x==="templates"&&e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map(v=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:v.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N(v.category)}`,children:v.category})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:v.description}),v.isPopular&&e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:"px-2 py-1 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 text-xs rounded-full",children:"Popular"})}),e.jsx("button",{onClick:()=>_(v.id),className:"w-full px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Use Template"})]},v.id))})}),x==="analytics"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Top Performing Workflows"}),e.jsx("div",{className:"space-y-3",children:t.sort((v,S)=>S.stats.successRate-v.stats.successRate).slice(0,3).map((v,S)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:S+1})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:v.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[v.stats.totalRuns," runs"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-green-600",children:[v.stats.successRate,"%"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Success Rate"})]})]},v.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Workflow Performance"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Workflows"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:j.totalWorkflows})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Active Workflows"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:j.activeWorkflows})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Runs"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:j.totalRuns.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Average Success Rate"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[j.averageSuccessRate.toFixed(1),"%"]})]})]})]})]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Workflow Automation Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Start Simple"}),e.jsx("p",{className:"text-sm opacity-90",children:"Begin with basic workflows and gradually add complexity as you learn what works."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Test Thoroughly"}),e.jsx("p",{className:"text-sm opacity-90",children:"Always test your workflows before going live to ensure they work as expected."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Monitor Performance"}),e.jsx("p",{className:"text-sm opacity-90",children:"Regularly review workflow performance and optimize based on results."})]})]})]}),p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Create New Workflow"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Workflow Name"}),e.jsx("input",{type:"text",placeholder:"Enter workflow name",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{rows:3,placeholder:"Enter workflow description",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Trigger Type"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{children:"Customer Signup"}),e.jsx("option",{children:"Order Placed"}),e.jsx("option",{children:"Cart Abandoned"}),e.jsx("option",{children:"Product Viewed"}),e.jsx("option",{children:"Email Opened"}),e.jsx("option",{children:"SMS Clicked"})]})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>m(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{m(!1),alert("Workflow created successfully!")},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Workflow"})]})]})})]})}function N9(){var I,z,Q;const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState(!0),[l,o]=y.useState(""),[c,d]=y.useState(null),[u,p]=y.useState(null),[m,f]=y.useState(!1),[h,x]=y.useState(!1),[g,j]=y.useState("segments"),[b,N]=y.useState({name:"",description:"",criteria:[]});y.useEffect(()=>{C(),F()},[]);const C=async()=>{try{i(!0),o("");const P=await Qe.getCustomerSegments().catch(()=>[]);let k=Array.isArray(P)?P:[];if(!k||k.length===0){const X=await Qe.getCustomerSegmentAggregates().catch(()=>[]);k=Array.isArray(X)?X:[]}s(k),a([])}catch(P){console.error("Failed to load segments data:",P),o("Failed to load segments data")}finally{i(!1)}},A=async()=>{try{o("");const P=await Qe.getUsers(),k=(Array.isArray(P)?P:[]).map(X=>({id:String(X.id),name:X.name,email:X.email,segment:"All",totalOrders:parseInt(String(X.total_orders||0),10)||0,totalSpent:parseFloat(String(X.total_spent||0))||0,lastOrderDate:X.last_order_date||X.member_since,location:X.city||"N/A",tags:[]}));a(k)}catch(P){console.error("Failed to load customers:",P),a([])}},F=async()=>{try{const P=await Qe.getAnalytics(),k=(P==null?void 0:P.overview)||null;d(k)}catch(P){console.error("Failed to load analytics:",P),d(null)}};y.useEffect(()=>{g==="customers"?A():g==="analytics"&&F()},[g]);const w={totalSegments:t.length,totalCustomers:t.reduce((P,k)=>P+k.customerCount,0),activeSegments:t.filter(P=>P.isActive).length,totalRevenue:t.reduce((P,k)=>P+k.stats.totalRevenue,0)},_=P=>{switch(P){case"equals":return"equals";case"not_equals":return"does not equal";case"contains":return"contains";case"not_contains":return"does not contain";case"greater_than":return"is greater than";case"less_than":return"is less than";case"between":return"is between";case"in":return"is in";case"not_in":return"is not in";default:return P}},v=P=>{switch(P){case"total_spent":return"Total Spent";case"total_orders":return"Total Orders";case"registration_date":return"Registration Date";case"last_order_date":return"Last Order Date";case"category_preference":return"Category Preference";case"location":return"Location";case"age":return"Age";case"gender":return"Gender";default:return P}},S=()=>{f(!0)},R=P=>{p(P),f(!0),N({name:P.name,description:P.description,criteria:P.criteria||[]})},D=P=>{P&&confirm("Delete this segment?")&&Qe.deleteCustomerSegment(P).then(()=>C()).catch(()=>alert("Failed to delete segment"))},V=P=>{p(P),x(!0)},O=[{id:"segments",label:"Segments",icon:cs},{id:"customers",label:"Customers",icon:Pt},{id:"analytics",label:"Analytics",icon:Ss}];return n?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading segments..."})]})})}):l?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:l})]}),e.jsx("button",{onClick:C,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Customer Segmentation"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Create targeted customer segments for personalized marketing"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:C,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Segment"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Segments"}),e.jsx("p",{className:"text-3xl font-bold",children:w.totalSegments})]}),e.jsx(cs,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Customers"}),e.jsx("p",{className:"text-3xl font-bold",children:((c==null?void 0:c.customers)??w.totalCustomers).toLocaleString()})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active Segments"}),e.jsx("p",{className:"text-3xl font-bold",children:w.activeSegments})]}),e.jsx(zt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Revenue"}),e.jsx("p",{className:"text-3xl font-bold",children:(c==null?void 0:c.revenue)!==void 0?`${Number(c.revenue).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`:`${(w.totalRevenue/1e5).toFixed(1)}L`})]}),e.jsx(Qs,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:O.map(P=>{const k=P.icon;return e.jsxs("button",{onClick:()=>j(P.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${g===P.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:P.label})]},P.id)})})}),e.jsxs("div",{className:"p-6",children:[g==="segments"&&e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(P=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:P.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${P.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:P.isActive?"Active":"Inactive"})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:P.description}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Customers:"}),e.jsx("span",{className:"font-semibold",children:P.customerCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Revenue:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["",(P.stats.totalRevenue/1e5).toFixed(1),"L"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Avg Order:"}),e.jsxs("span",{className:"font-semibold",children:["",P.stats.averageOrderValue]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:P.tags.map((k,X)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded",children:k},X))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>V(P),className:"flex-1 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"View"}),e.jsx("button",{onClick:()=>R(P),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(xr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>D(P.id),className:"px-3 py-1 border border-red-300 dark:border-red-600 text-red-700 dark:text-red-300 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},P.id))})}),g==="customers"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Customer List"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{children:"All Segments"}),e.jsx("option",{children:"VIP Customers"}),e.jsx("option",{children:"New Customers"}),e.jsx("option",{children:"At-Risk Customers"}),e.jsx("option",{children:"Skincare Enthusiasts"})]}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(nl,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Segment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Orders"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Total Spent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Last Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:r.map(P=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:P.name}),e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:P.email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded-full",children:P.segment})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:P.totalOrders}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:["",P.totalSpent.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:new Date(P.lastOrderDate).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:P.location}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),e.jsx("button",{className:"text-green-600 hover:text-green-900",children:"Message"})]})]},P.id))})]})})]}),g==="analytics"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Segment Performance"}),e.jsx("div",{className:"space-y-3",children:t.sort((P,k)=>k.stats.totalRevenue-P.stats.totalRevenue).slice(0,3).map((P,k)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:k+1})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:P.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[P.customerCount," customers"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-green-600",children:["",(P.stats.totalRevenue/1e5).toFixed(1),"L"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]})]},P.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Segment Analytics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Segments"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:w.totalSegments})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Active Segments"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:w.activeSegments})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Customers"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:(c==null?void 0:c.customers)??w.totalCustomers})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Revenue"}),e.jsx("span",{className:"font-semibold text-green-600",children:(c==null?void 0:c.revenue)!==void 0?`${Number(c.revenue).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`:`${(w.totalRevenue/1e5).toFixed(1)}L`})]})]})]})]})})]})]}),h&&u&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Segment Details: ",u.name]}),e.jsx("button",{onClick:()=>x(!1),className:"text-2xl text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:""})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Description"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:u.description})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Segmentation Criteria"}),e.jsx("div",{className:"space-y-2",children:u.criteria.map((P,k)=>e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:v(P.field)}),e.jsx("span",{className:"mx-2 text-slate-600 dark:text-slate-400",children:_(P.operator)}),e.jsxs("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:[P.value,P.value2&&` and ${P.value2}`]})]},k))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Segment Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u.customerCount}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Customers"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:u.stats.totalOrders}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Orders"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["",(u.stats.totalRevenue/1e5).toFixed(1),"L"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["",u.stats.averageOrderValue]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Avg Order Value"})]})]})]})]})]})}),m&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:u?"Edit Segment":"Create New Segment"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Segment Name"}),e.jsx("input",{type:"text",value:b.name,onChange:P=>N(k=>({...k,name:P.target.value})),placeholder:"Enter segment name",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{rows:3,value:b.description,onChange:P=>N(k=>({...k,description:P.target.value})),placeholder:"Enter segment description",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Criteria"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",onChange:P=>N(k=>({...k,criteria:[{field:P.target.value,operator:"greater_than",value:""}]})),value:((I=b.criteria[0])==null?void 0:I.field)||"",children:[e.jsx("option",{value:"",children:"Select field"}),e.jsx("option",{value:"total_spent",children:"Total Spent"}),e.jsx("option",{value:"total_orders",children:"Total Orders"}),e.jsx("option",{value:"registration_date",children:"Registration Date"}),e.jsx("option",{value:"last_order_date",children:"Last Order Date"}),e.jsx("option",{value:"category_preference",children:"Category Preference"})]}),e.jsxs("select",{className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",onChange:P=>N(k=>({...k,criteria:[{...k.criteria[0]||{field:"",operator:"greater_than",value:""},operator:P.target.value}]})),value:((z=b.criteria[0])==null?void 0:z.operator)||"greater_than",children:[e.jsx("option",{value:"greater_than",children:"is greater than"}),e.jsx("option",{value:"less_than",children:"is less than"}),e.jsx("option",{value:"equals",children:"equals"}),e.jsx("option",{value:"contains",children:"contains"})]}),e.jsx("input",{type:"text",placeholder:"Value",value:((Q=b.criteria[0])==null?void 0:Q.value)||"",onChange:P=>N(k=>({...k,criteria:[{...k.criteria[0]||{field:"",operator:"greater_than",value:""},value:P.target.value}]})),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>{f(!1),p(null),N({name:"",description:"",criteria:[]})},className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:async()=>{try{if(!b.name.trim())return alert("Segment name is required");const P={name:b.name.trim(),description:b.description.trim(),criteria:b.criteria,is_active:!0};u?await Qe.updateCustomerSegment(u.id,P):await Qe.createCustomerSegment(P),await C(),f(!1),p(null),N({name:"",description:"",criteria:[]})}catch{alert("Failed to save segment")}},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:u?"Update Segment":"Create Segment"})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Customer Segmentation Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Define Clear Criteria"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use specific, measurable criteria to create meaningful customer segments."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Regular Updates"}),e.jsx("p",{className:"text-sm opacity-90",children:"Regularly update segments based on changing customer behavior and preferences."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Personalized Marketing"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use segments to deliver personalized marketing messages and offers."})]})]})]})]})}function w9(){const[t,s]=y.useState([]),[r,a]=y.useState(!0),[n,i]=y.useState(""),[l]=y.useState([{name:"Awareness",events:["page_view","email_open"],color:"bg-blue-500",description:"Customer discovers your brand"},{name:"Interest",events:["product_view","email_click"],color:"bg-green-500",description:"Customer shows interest in products"},{name:"Consideration",events:["add_to_cart","sms_click"],color:"bg-yellow-500",description:"Customer considers purchasing"},{name:"Purchase",events:["purchase"],color:"bg-purple-500",description:"Customer makes a purchase"},{name:"Retention",events:["review_submit","chat_start"],color:"bg-pink-500",description:"Customer engages post-purchase"}]),[o,c]=y.useState(null),[d,u]=y.useState("journeys"),[p,m]=y.useState("7d"),[f,h]=y.useState("all"),x=async()=>{try{a(!0),i("");const A=await Qe.getCustomerJourneys(p,f),F=Array.isArray(A)?A:(A==null?void 0:A.data)||[];s(F)}catch(A){console.error("Error loading journeys:",A),i("Failed to load journey data"),s([])}finally{a(!1)}};y.useEffect(()=>{x()},[p,f]),y.useEffect(()=>{Je.isConnected()||Je.connect();const A=Je.subscribe("user-action-update",_=>{x()}),F=Je.subscribe("page-view-update",_=>{x()}),w=Je.subscribe("cart-update",_=>{x()});return()=>{A(),F(),w()}},[]);const g={totalCustomers:t.length,totalEvents:t.reduce((A,F)=>A+F.totalEvents,0),totalValue:t.reduce((A,F)=>A+F.totalValue,0),activeCustomers:t.filter(A=>A.status==="active").length},j=A=>{switch(A){case"page_view":return e.jsx(nt,{className:"h-4 w-4"});case"product_view":return e.jsx(nt,{className:"h-4 w-4"});case"add_to_cart":return e.jsx(Qs,{className:"h-4 w-4"});case"purchase":return e.jsx(Qs,{className:"h-4 w-4"});case"email_open":return e.jsx(ts,{className:"h-4 w-4"});case"email_click":return e.jsx(ts,{className:"h-4 w-4"});case"sms_click":return e.jsx(fs,{className:"h-4 w-4"});case"push_click":return e.jsx(Da,{className:"h-4 w-4"});case"chat_start":return e.jsx(fs,{className:"h-4 w-4"});case"review_submit":return e.jsx(Mi,{className:"h-4 w-4"});default:return e.jsx(os,{className:"h-4 w-4"})}},b=A=>{switch(A){case"page_view":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"product_view":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"add_to_cart":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"purchase":return"text-purple-600 bg-purple-100 dark:bg-purple-900 dark:text-purple-200";case"email_open":return"text-indigo-600 bg-indigo-100 dark:bg-indigo-900 dark:text-indigo-200";case"email_click":return"text-indigo-600 bg-indigo-100 dark:bg-indigo-900 dark:text-indigo-200";case"sms_click":return"text-cyan-600 bg-cyan-100 dark:bg-cyan-900 dark:text-cyan-200";case"push_click":return"text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-200";case"chat_start":return"text-pink-600 bg-pink-100 dark:bg-pink-900 dark:text-pink-200";case"review_submit":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},N=A=>{switch(A){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"inactive":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"at-risk":return"text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-200";case"churned":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},C=[{id:"journeys",label:"Customer Journeys",icon:cm},{id:"events",label:"Event Analytics",icon:zt},{id:"stages",label:"Journey Stages",icon:os}];return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Customer Journey Tracking"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Track and analyze customer interactions across all touchpoints"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("select",{value:p,onChange:A=>m(A.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"1d",children:"Last 24 hours"}),e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"})]}),e.jsxs("button",{className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(ja,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Customers"}),e.jsx("p",{className:"text-3xl font-bold",children:g.totalCustomers})]}),e.jsx(pa,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Events"}),e.jsx("p",{className:"text-3xl font-bold",children:g.totalEvents})]}),e.jsx(zt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Value"}),e.jsxs("p",{className:"text-3xl font-bold",children:["",(g.totalValue/1e5).toFixed(1),"L"]})]}),e.jsx(Qs,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active Customers"}),e.jsx("p",{className:"text-3xl font-bold",children:g.activeCustomers})]}),e.jsx(Mi,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:C.map(A=>{const F=A.icon;return e.jsxs("button",{onClick:()=>u(A.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${d===A.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{children:A.label})]},A.id)})})}),e.jsxs("div",{className:"p-6",children:[d==="journeys"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Customer Journeys"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{value:f,onChange:A=>h(A.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"all",children:"All Events"}),e.jsx("option",{value:"page_view",children:"Page Views"}),e.jsx("option",{value:"product_view",children:"Product Views"}),e.jsx("option",{value:"add_to_cart",children:"Add to Cart"}),e.jsx("option",{value:"purchase",children:"Purchases"}),e.jsx("option",{value:"email_open",children:"Email Opens"})]}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(nl,{className:"h-4 w-4"})})]})]}),r?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Loading journey data..."})]}):n?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-600 dark:text-red-400",children:n}),e.jsx("button",{onClick:x,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})]}):t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No journey data found for the selected time range."})}):e.jsx("div",{className:"space-y-4",children:t.map(A=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-800 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-200 font-bold",children:A.customerName.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:A.customerName}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:A.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Value"}),e.jsxs("p",{className:"font-semibold text-green-600",children:["",A.totalValue.toLocaleString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Events"}),e.jsx("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:A.totalEvents})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N(A.status)}`,children:A.status})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex space-x-4 text-sm text-slate-600 dark:text-slate-400",children:[e.jsxs("span",{children:["First seen: ",new Date(A.firstSeen).toLocaleDateString()]}),e.jsxs("span",{children:["Last seen: ",new Date(A.lastSeen).toLocaleDateString()]})]}),e.jsx("button",{onClick:()=>c(A),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"View Journey"})]}),e.jsxs("div",{className:"flex space-x-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(nt,{className:"h-4 w-4 text-blue-500"}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Website: ",A.touchpoints.website]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ts,{className:"h-4 w-4 text-indigo-500"}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Email: ",A.touchpoints.email]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(fs,{className:"h-4 w-4 text-cyan-500"}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["SMS: ",A.touchpoints.sms]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Da,{className:"h-4 w-4 text-orange-500"}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Push: ",A.touchpoints.push]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(fs,{className:"h-4 w-4 text-pink-500"}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Chat: ",A.touchpoints.chat]})]})]})]},A.customerId))})]}),d==="events"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Event Analytics"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(A=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:`w-8 h-8 ${A.color} rounded-full flex items-center justify-center`,children:e.jsx("span",{className:"text-white font-bold text-sm",children:A.name.charAt(0)})}),e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:A.name})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:A.description}),e.jsx("div",{className:"space-y-2",children:A.events.map((F,w)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[j(F),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:F.replace("_"," ")})]},w))})]},A.name))})]}),d==="stages"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Journey Stage Analysis"}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Customer Journey Flow"}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Last 30 days"})]}),e.jsx("div",{className:"space-y-4",children:l.map((A,F)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-12 h-12 ${A.color} rounded-full flex items-center justify-center text-white font-bold`,children:F+1}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100",children:A.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:A.description})]})]}),F<l.length-1&&e.jsx("div",{className:"flex-1 mx-4",children:e.jsx("div",{className:"h-0.5 bg-slate-200 dark:bg-slate-700 relative",children:e.jsx("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 w-0 h-0 border-l-4 border-l-slate-300 dark:border-l-slate-600 border-t-2 border-t-transparent border-b-2 border-b-transparent"})})})]},A.name))})]})]})]})]}),o&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Journey Details: ",o.customerName]}),e.jsx("button",{onClick:()=>c(null),className:"text-2xl text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:""})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o.totalEvents}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Events"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",o.totalValue.toLocaleString()]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Value"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Math.ceil((new Date(o.lastSeen).getTime()-new Date(o.firstSeen).getTime())/(1e3*60*60*24))}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Days Active"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-3",children:"Event Timeline"}),e.jsx("div",{className:"space-y-3",children:o.events.map(A=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[e.jsx("div",{className:`p-2 rounded-full ${b(A.eventType)}`,children:j(A.eventType)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100",children:A.eventName}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:A.timestamp}),A.details.product&&e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Product: ",A.details.product]}),A.details.value&&e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Value: ",A.details.value.toLocaleString()]})]})]},A.id))})]})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Customer Journey Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Track All Touchpoints"}),e.jsx("p",{className:"text-sm opacity-90",children:"Monitor customer interactions across all channels to get a complete picture."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Identify Pain Points"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use journey data to identify where customers drop off and optimize those areas."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Personalize Experiences"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use journey insights to deliver personalized experiences at each stage."})]})]})]})]})}function k9(){const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState([]),[l,o]=y.useState(!0),[c,d]=y.useState("");y.useEffect(()=>{u()},[]);const u=async()=>{try{o(!0),d("");const b=await Qe.getActionableInsights().catch(()=>[]);a(Array.isArray(b)?b:[]),s([]),i([])}catch(b){console.error("Failed to load analytics data:",b),d("Failed to load analytics data")}finally{o(!1)}},[p,m]=y.useState("overview"),[f,h]=y.useState("30d");if(l)return e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading analytics..."})]})})});if(c)return e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]}),e.jsx("button",{onClick:u,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})});const x=b=>{switch(b){case"high":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";case"medium":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},g=b=>{switch(b){case"excellent":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"good":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"average":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"poor":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},j=[{id:"overview",label:"Overview",icon:Ss},{id:"insights",label:"Actionable Insights",icon:cs},{id:"performance",label:"Performance",icon:zt}];return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Actionable Analytics"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Data-driven insights to optimize your business performance"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(zt,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("select",{value:f,onChange:b=>h(b.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]}),e.jsxs("button",{className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(ja,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.length===0?e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx(Ss,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No metrics available"})]}):t.map(b=>{const N=b.icon;return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:b.name}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:b.name==="Revenue"?`${(b.value/1e5).toFixed(1)}L`:b.name==="Conversion Rate"?`${b.value}%`:b.name==="Customer Retention"?`${b.value}%`:`${b.value}`})]}),e.jsx("div",{className:`p-3 rounded-full ${b.color.replace("text-","bg-").replace("-600","-100")} dark:bg-opacity-20`,children:e.jsx(N,{className:`h-6 w-6 ${b.color}`})})]}),e.jsxs("div",{className:"mt-4 flex items-center",children:[e.jsxs("span",{className:`text-sm font-medium ${b.trend==="up"?"text-green-600":b.trend==="down"?"text-red-600":"text-gray-600"}`,children:[b.trend==="up"?"":b.trend==="down"?"":""," ",Math.abs(b.change),"%"]}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400 ml-2",children:"vs last period"})]})]},b.id)})}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:j.map(b=>{const N=b.icon;return e.jsxs("button",{onClick:()=>m(b.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${p===b.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{children:b.label})]},b.id)})})}),e.jsxs("div",{className:"p-6",children:[p==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Business Overview"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Revenue Trends"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Monthly Revenue"}),e.jsx("span",{className:"font-semibold text-green-600",children:"2.5M"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Growth Rate"}),e.jsx("span",{className:"font-semibold text-green-600",children:"+12.5%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Target Achievement"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"95%"})]})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Customer Metrics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"New Customers"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"1,250"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Retention Rate"}),e.jsx("span",{className:"font-semibold text-green-600",children:"78.5%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Churn Rate"}),e.jsx("span",{className:"font-semibold text-red-600",children:"5.2%"})]})]})]})]})]}),p==="insights"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Actionable Insights"}),e.jsx("div",{className:"space-y-4",children:r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(cs,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No insights available"})]}):r.map(b=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:b.title}),e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${x(b.impact)}`,children:[b.impact," impact"]}),e.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200",children:["Priority ",b.priority]})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-3",children:b.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Category: ",e.jsx("span",{className:"font-semibold",children:b.category})]}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Estimated Value: ",e.jsxs("span",{className:"font-semibold text-green-600",children:["",(b.estimatedValue/1e5).toFixed(1),"L"]})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"h-4 w-4 text-slate-400"}),e.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Recommended Action: ",b.action]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Implement"}),e.jsx("button",{className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-sm",children:"Learn More"})]})]})]},b.id))})]}),p==="performance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Performance Analysis"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Metric"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Current"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Previous"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Benchmark"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:n.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-12 text-center",children:[e.jsx(zt,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No performance data available"})]})}):n.map((b,N)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:b.metric}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:b.metric.includes("Cost")||b.metric.includes("Value")?`${b.current}`:`${b.current}%`}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:b.metric.includes("Cost")||b.metric.includes("Value")?`${b.previous}`:`${b.previous}%`}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:b.metric.includes("Cost")||b.metric.includes("Value")?`${b.benchmark}`:`${b.benchmark}%`}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${g(b.status)}`,children:b.status})})]},N))})]})})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Actionable Analytics Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Focus on Actionable Metrics"}),e.jsx("p",{className:"text-sm opacity-90",children:"Track metrics that directly impact business decisions and can be acted upon."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Set Clear Benchmarks"}),e.jsx("p",{className:"text-sm opacity-90",children:"Compare performance against industry standards and historical data."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Regular Review Cycles"}),e.jsx("p",{className:"text-sm opacity-90",children:"Schedule regular reviews to identify trends and take corrective actions."})]})]})]})]})}function S9(){const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState("features");y.useEffect(()=>{l()},[]);const l=async()=>{try{const u="http://192.168.1.36:2000",[p,m]=await Promise.all([fetch(`${u}/api/ai/features`),fetch(`${u}/api/ai/tasks`)]);if(p.ok){const f=await p.json();s(f)}if(m.ok){const f=await m.json();a(f)}}catch(u){console.error("Failed to load AI data:",u)}},o=u=>{switch(u){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"inactive":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";case"learning":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"running":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"completed":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"failed":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";case"pending":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},c=u=>{switch(u){case"high":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";case"medium":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},d=[{id:"features",label:"AI Features",icon:Cf},{id:"tasks",label:"AI Tasks",icon:zl},{id:"insights",label:"AI Insights",icon:r2}];return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"AI Box"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Intelligent automation and AI-powered features for your store"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{className:"btn-secondary flex items-center space-x-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(_l,{className:"h-4 w-4"}),e.jsx("span",{children:"Enable AI"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active AI Features"}),e.jsx("p",{className:"text-3xl font-bold",children:t.filter(u=>u.status==="active").length})]}),e.jsx(Cf,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"AI Accuracy"}),e.jsxs("p",{className:"text-3xl font-bold",children:[t.length>0?(t.reduce((u,p)=>{var m;return u+(((m=p.metrics)==null?void 0:m.accuracy)||0)},0)/t.length).toFixed(1):"0.0","%"]})]}),e.jsx(cs,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Tasks Completed"}),e.jsx("p",{className:"text-3xl font-bold",children:r.filter(u=>u.status==="completed").length})]}),e.jsx(zl,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Performance Boost"}),e.jsxs("p",{className:"text-3xl font-bold",children:["+",t.length>0?(t.reduce((u,p)=>{var m;return u+(((m=p.metrics)==null?void 0:m.improvement)||0)},0)/t.length).toFixed(1):"0.0","%"]})]}),e.jsx(zt,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:d.map(u=>{const p=u.icon;return e.jsxs("button",{onClick:()=>i(u.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${n===u.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx("span",{children:u.label})]},u.id)})})}),e.jsxs("div",{className:"p-6",children:[n==="features"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"AI Features"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(u=>{var p,m,f;return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:u.name}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${o(u.status)}`,children:u.status}),e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${c(u.impact)}`,children:[u.impact," impact"]})]})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:u.description}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Accuracy"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[((p=u.metrics)==null?void 0:p.accuracy)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Usage"}),e.jsxs("span",{className:"font-semibold text-blue-600",children:[((m=u.metrics)==null?void 0:m.usage)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Improvement"}),e.jsxs("span",{className:"font-semibold text-purple-600",children:["+",((f=u.metrics)==null?void 0:f.improvement)||0,"%"]})]})]}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsx("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Configure"}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:u.status==="active"?e.jsx(jn,{className:"h-4 w-4"}):e.jsx(Ua,{className:"h-4 w-4"})})]})]},u.id)})})]}),n==="tasks"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"AI Tasks"}),e.jsx("div",{className:"space-y-4",children:r.map(u=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:u.name}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:u.description})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${o(u.status)}`,children:u.status})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Progress"}),e.jsxs("span",{className:"font-semibold",children:[u.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${u.progress}%`}})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Estimated Time"}),e.jsx("span",{className:"font-semibold",children:u.estimatedTime})]})]}),u.results&&e.jsxs("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900 rounded-lg",children:[e.jsx("h5",{className:"font-semibold text-green-800 dark:text-green-200 mb-2",children:"Results"}),e.jsx("div",{className:"space-y-1 text-sm",children:Object.entries(u.results).map(([p,m])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-green-700 dark:text-green-300",children:[p.replace(/([A-Z])/g," $1").replace(/^./,f=>f.toUpperCase()),":"]}),e.jsx("span",{className:"font-semibold text-green-800 dark:text-green-200",children:typeof m=="number"?p.includes("Increase")?`+${m}%`:m.toLocaleString():String(m)})]},p))})]})]},u.id))})]}),n==="insights"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"AI Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Performance Insights"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"AI Efficiency"}),e.jsx("span",{className:"font-semibold text-green-600",children:"94.2%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cost Reduction"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"23.5%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Time Saved"}),e.jsx("span",{className:"font-semibold text-purple-600",children:"45 hours/week"})]})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Recommendations"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Enable dynamic pricing for skincare products to increase revenue by 15%"})}),e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-800 dark:text-green-200",children:"Implement AI chatbot for customer support to reduce response time"})}),e.jsx("div",{className:"p-3 bg-purple-50 dark:bg-purple-900 rounded-lg",children:e.jsx("p",{className:"text-sm text-purple-800 dark:text-purple-200",children:"Use AI for inventory prediction to reduce stockouts by 30%"})})]})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"AI Box Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Start Small"}),e.jsx("p",{className:"text-sm opacity-90",children:"Begin with simple AI features and gradually expand to more complex automation."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Monitor Performance"}),e.jsx("p",{className:"text-sm opacity-90",children:"Regularly track AI accuracy and performance to ensure optimal results."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Continuous Learning"}),e.jsx("p",{className:"text-sm opacity-90",children:"Allow AI systems to learn from new data and improve over time."})]})]})]})]})}function C9(){const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState(!0),[l,o]=y.useState("");y.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0),o("");const N=await Qe.getJourneyFunnels().catch(()=>[]);s([]),a([])}catch(N){console.error("Failed to load funnel data:",N),o("Failed to load funnel data")}finally{i(!1)}},[d,u]=y.useState("30d"),[p,m]=y.useState("overview"),f=t.length>0?t[0].visitors:0,h=t.length>0?t[t.length-1].conversions:0,x=f>0?h/f*100:0,g=N=>{switch(N){case"up":return"";case"down":return"";case"stable":return"";default:return""}},j=N=>{switch(N){case"up":return"text-green-600";case"down":return"text-red-600";case"stable":return"text-gray-600";default:return"text-gray-600"}},b=[{id:"overview",label:"Funnel Overview",icon:Ss},{id:"analysis",label:"Stage Analysis",icon:cs},{id:"optimization",label:"Optimization",icon:zt}];return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Customer Journey Funnel"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Track customer progression through each stage of the journey"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("select",{value:d,onChange:N=>u(N.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]}),e.jsxs("button",{className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(ja,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Visitors"}),e.jsx("p",{className:"text-3xl font-bold",children:f.toLocaleString()})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Conversions"}),e.jsx("p",{className:"text-3xl font-bold",children:h.toLocaleString()})]}),e.jsx(cs,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Overall Conversion"}),e.jsxs("p",{className:"text-3xl font-bold",children:[x.toFixed(1),"%"]})]}),e.jsx(zt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Drop-off Rate"}),e.jsxs("p",{className:"text-3xl font-bold",children:[(100-x).toFixed(1),"%"]})]}),e.jsx($u,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:b.map(N=>{const C=N.icon;return e.jsxs("button",{onClick:()=>m(N.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${p===N.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{children:N.label})]},N.id)})})}),e.jsxs("div",{className:"p-6",children:[p==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Customer Journey Funnel"}),e.jsx("div",{className:"space-y-4",children:t.map((N,C)=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex items-center space-x-4 w-full",children:[e.jsx("div",{className:`w-12 h-12 ${N.color} rounded-full flex items-center justify-center text-white font-bold`,children:C+1}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:N.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:[N.visitors.toLocaleString()," visitors"]}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:[N.conversions.toLocaleString()," conversions"]}),e.jsxs("span",{className:"font-semibold text-green-600",children:[N.conversionRate,"% conversion"]})]})]}),e.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:e.jsx("div",{className:`${N.color} h-3 rounded-full transition-all duration-300`,style:{width:`${N.conversionRate}%`}})})]})]})}),C<t.length-1&&e.jsx("div",{className:"flex justify-center my-4",children:e.jsx("div",{className:"w-0.5 h-8 bg-slate-300 dark:bg-slate-600 relative",children:e.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-l-slate-300 dark:border-l-slate-600 border-t-2 border-t-transparent border-b-2 border-b-transparent"})})})]},N.id))})]}),p==="analysis"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Stage Analysis"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Stage"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Visitors"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Conversions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Conversion Rate"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Trend"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:r.map((N,C)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:N.stage}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:N.visitors.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:N.conversions.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:e.jsxs("span",{className:"font-semibold text-green-600",children:[N.conversionRate,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("span",{className:`font-semibold ${j(N.trend)}`,children:[g(N.trend)," ",N.previousRate,"%"]})})]},C))})]})})]}),p==="optimization"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Optimization Recommendations"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border border-red-200 dark:border-red-700 rounded-lg p-6 bg-red-50 dark:bg-red-900",children:[e.jsx("h4",{className:"font-semibold text-red-900 dark:text-red-100 mb-3",children:"High Drop-off: Consideration Stage"}),e.jsx("p",{className:"text-red-700 dark:text-red-300 mb-4",children:"The consideration stage has a 50% drop-off rate. Customers are losing interest before making a purchase decision."}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm text-red-700 dark:text-red-300",children:"Add product comparison tools"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Mi,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm text-red-700 dark:text-red-300",children:"Implement wishlist functionality"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qs,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm text-red-700 dark:text-red-300",children:"Add urgency indicators (limited stock)"})]})]})]}),e.jsxs("div",{className:"border border-yellow-200 dark:border-yellow-700 rounded-lg p-6 bg-yellow-50 dark:bg-yellow-900",children:[e.jsx("h4",{className:"font-semibold text-yellow-900 dark:text-yellow-100 mb-3",children:"Medium Drop-off: Interest Stage"}),e.jsx("p",{className:"text-yellow-700 dark:text-yellow-300 mb-4",children:"The interest stage shows 20% drop-off. Improve engagement with better content and personalization."}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(cs,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Personalize product recommendations"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(os,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Send follow-up emails with reviews"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ss,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Add social proof and testimonials"})]})]})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Journey Funnel Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Identify Bottlenecks"}),e.jsx("p",{className:"text-sm opacity-90",children:"Focus on stages with the highest drop-off rates to maximize impact."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"A/B Test Changes"}),e.jsx("p",{className:"text-sm opacity-90",children:"Test different approaches to optimize each stage of the funnel."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Monitor Continuously"}),e.jsx("p",{className:"text-sm opacity-90",children:"Track funnel performance regularly to identify new opportunities."})]})]})]})]})}function _9(){const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState(!0),[l,o]=y.useState("");y.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0),o("");const h=await Qe.getPersonalizationRules().catch(()=>[]);s(Array.isArray(h)?h:[])}catch(h){console.error("Failed to load personalization data:",h),o("Failed to load personalization data")}finally{i(!1)}},[d,u]=y.useState("rules"),p=h=>{switch(h){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"inactive":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";case"testing":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"paused":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"draft":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},m=h=>{switch(h){case"product_recommendation":return e.jsx(Qs,{className:"h-4 w-4"});case"content_personalization":return e.jsx(nt,{className:"h-4 w-4"});case"pricing":return e.jsx(cs,{className:"h-4 w-4"});case"email":return e.jsx($u,{className:"h-4 w-4"});default:return e.jsx(_l,{className:"h-4 w-4"})}},f=[{id:"rules",label:"Personalization Rules",icon:cs},{id:"campaigns",label:"Campaigns",icon:Ss},{id:"insights",label:"Insights",icon:_l}];return n?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading personalization data..."})]})})}):l?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:l})]}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"AI Personalization"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Deliver personalized experiences using AI-powered insights"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:c,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(_l,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{className:"btn-secondary flex items-center space-x-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{className:"btn-primary flex items-center space-x-2",children:[e.jsx(_l,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Rule"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active Rules"}),e.jsx("p",{className:"text-3xl font-bold",children:t.filter(h=>h.status==="active").length})]}),e.jsx(cs,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Impressions"}),e.jsx("p",{className:"text-3xl font-bold",children:t.reduce((h,x)=>h+x.performance.impressions,0).toLocaleString()})]}),e.jsx(nt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Conversions"}),e.jsx("p",{className:"text-3xl font-bold",children:t.reduce((h,x)=>h+x.performance.conversions,0).toLocaleString()})]}),e.jsx($u,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Revenue Generated"}),e.jsxs("p",{className:"text-3xl font-bold",children:["",(t.reduce((h,x)=>h+x.performance.revenue,0)/1e5).toFixed(1),"L"]})]}),e.jsx(Ss,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:f.map(h=>{const x=h.icon;return e.jsxs("button",{onClick:()=>u(h.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${d===h.id?"":"border-transparent"}`,style:d===h.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx(x,{className:"h-4 w-4"}),e.jsx("span",{children:h.label})]},h.id)})})}),e.jsxs("div",{className:"p-6",children:[d==="rules"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Personalization Rules"}),e.jsx("div",{className:"space-y-4",children:t.map(h=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:h.name}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:h.description})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${p(h.status)}`,children:h.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Target Audience"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:h.targetAudience})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Conditions"}),e.jsx("ul",{className:"text-sm text-slate-600 dark:text-slate-400",children:h.conditions.map((x,g)=>e.jsxs("li",{children:[" ",x]},g))})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Actions"}),e.jsx("ul",{className:"text-sm text-slate-600 dark:text-slate-400",children:h.actions.map((x,g)=>e.jsxs("li",{children:[" ",x]},g))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:h.performance.impressions.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Impressions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:h.performance.clicks.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Clicks"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:h.performance.conversions.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Conversions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["",(h.performance.revenue/1e5).toFixed(1),"L"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Edit Rule"}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:h.status==="active"?e.jsx(jn,{className:"h-4 w-4"}):e.jsx(Ua,{className:"h-4 w-4"})}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(Sb,{className:"h-4 w-4"})})]})]},h.id))})]}),d==="campaigns"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Personalization Campaigns"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(h=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[m(h.type),e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:h.name})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${p(h.status)}`,children:h.status})]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:["Audience: ",h.audience]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Reach"}),e.jsx("span",{className:"font-semibold text-blue-600",children:h.performance.reach.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Engagement"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[h.performance.engagement,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Conversion"}),e.jsxs("span",{className:"font-semibold text-purple-600",children:[h.performance.conversion,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"}),e.jsxs("span",{className:"font-semibold text-orange-600",children:["",(h.performance.revenue/1e5).toFixed(1),"L"]})]})]}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsx("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"View Details"}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:h.status==="active"?e.jsx(jn,{className:"h-4 w-4"}):e.jsx(Ua,{className:"h-4 w-4"})})]})]},h.id))})]}),d==="insights"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Personalization Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Top Performing Rules"}),e.jsx("div",{className:"space-y-3",children:t.sort((h,x)=>x.performance.revenue-h.performance.revenue).slice(0,3).map((h,x)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:x+1})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100",children:h.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[h.performance.conversions," conversions"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-green-600",children:["",(h.performance.revenue/1e5).toFixed(1),"L"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]})]},h.id))})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Personalization Impact"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Revenue Increase"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"+35.2%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Conversion Rate"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"+18.7%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Customer Engagement"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"+42.1%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Average Order Value"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"+25.8%"})]})]})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"AI Personalization Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Start with Clear Goals"}),e.jsx("p",{className:"text-sm opacity-90",children:"Define specific objectives for each personalization rule to measure success effectively."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Test and Iterate"}),e.jsx("p",{className:"text-sm opacity-90",children:"Continuously test different personalization approaches and optimize based on results."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Respect Privacy"}),e.jsx("p",{className:"text-sm opacity-90",children:"Ensure personalization respects customer privacy and complies with regulations."})]})]})]})]})}function T9(){const[t,s]=y.useState([]),[r,a]=y.useState(!0),[n,i]=y.useState(""),[l,o]=y.useState("audiences"),[c,d]=y.useState(!1),[u,p]=y.useState(null);y.useEffect(()=>{m()},[]);const m=async()=>{try{a(!0),i("");const b=await Qe.getCustomAudiences().catch(()=>[]);s(Array.isArray(b)?b:[])}catch(b){console.error("Failed to load audiences data:",b),i("Failed to load audiences data")}finally{a(!1)}},f={totalAudiences:t.length,totalSize:t.reduce((b,N)=>b+N.size,0),activeAudiences:t.filter(b=>b.status==="active").length,totalRevenue:t.reduce((b,N)=>b+N.performance.revenue,0)},h=b=>{switch(b){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"inactive":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";case"draft":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},x=b=>{switch(b){case"equals":return"equals";case"not_equals":return"does not equal";case"contains":return"contains";case"not_contains":return"does not contain";case"greater_than":return"is greater than";case"less_than":return"is less than";case"between":return"is between";case"in":return"is in";case"not_in":return"is not in";default:return b}},g=b=>{switch(b){case"category_preference":return"Category Preference";case"total_orders":return"Total Orders";case"total_spent":return"Total Spent";case"cart_status":return"Cart Status";case"cart_value":return"Cart Value";case"registration_date":return"Registration Date";case"last_order_date":return"Last Order Date";case"location":return"Location";case"age":return"Age";case"gender":return"Gender";default:return b}},j=[{id:"audiences",label:"Custom Audiences",icon:Pt},{id:"performance",label:"Performance",icon:Ss},{id:"insights",label:"Insights",icon:zt}];return r?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading audiences..."})]})})}):n?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:n})]}),e.jsx("button",{onClick:m,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Custom Audience Targeting"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Create and manage targeted customer audiences for personalized marketing"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:m,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Audience"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Audiences"}),e.jsx("p",{className:"text-3xl font-bold",children:f.totalAudiences})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Size"}),e.jsx("p",{className:"text-3xl font-bold",children:f.totalSize.toLocaleString()})]}),e.jsx(cs,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active Audiences"}),e.jsx("p",{className:"text-3xl font-bold",children:f.activeAudiences})]}),e.jsx(zt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Revenue Generated"}),e.jsxs("p",{className:"text-3xl font-bold",children:["",(f.totalRevenue/1e5).toFixed(1),"L"]})]}),e.jsx(Ss,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:j.map(b=>{const N=b.icon;return e.jsxs("button",{onClick:()=>o(b.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${l===b.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{children:b.label})]},b.id)})})}),e.jsxs("div",{className:"p-6",children:[l==="audiences"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Custom Audiences"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(nl,{className:"h-4 w-4"})}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(ja,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(b=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:b.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${h(b.status)}`,children:b.status})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:b.description}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Size:"}),e.jsx("span",{className:"font-semibold",children:b.size.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Engagement:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[b.performance.engagement,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Conversion:"}),e.jsxs("span",{className:"font-semibold text-blue-600",children:[b.performance.conversion,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Revenue:"}),e.jsxs("span",{className:"font-semibold text-purple-600",children:["",(b.performance.revenue/1e3).toFixed(0),"K"]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:b.tags.map((N,C)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded",children:N},C))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>p(b),className:"flex-1 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"View"}),e.jsx("button",{className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(xr,{className:"h-4 w-4"})}),e.jsx("button",{className:"px-3 py-1 border border-red-300 dark:border-red-600 text-red-700 dark:text-red-300 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},b.id))})]}),l==="performance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Audience Performance"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Audience"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Size"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Reach"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Engagement"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Conversion"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Revenue"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:t.map(b=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:b.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:b.size.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:b.performance.reach.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:e.jsxs("span",{className:"font-semibold text-green-600",children:[b.performance.engagement,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:e.jsxs("span",{className:"font-semibold text-blue-600",children:[b.performance.conversion,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:e.jsxs("span",{className:"font-semibold text-purple-600",children:["",(b.performance.revenue/1e3).toFixed(0),"K"]})})]},b.id))})]})})]}),l==="insights"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Audience Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Top Performing Audiences"}),e.jsx("div",{className:"space-y-3",children:t.sort((b,N)=>N.performance.revenue-b.performance.revenue).slice(0,3).map((b,N)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:N+1})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100",children:b.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[b.size.toLocaleString()," members"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-green-600",children:["",(b.performance.revenue/1e3).toFixed(0),"K"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]})]},b.id))})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Audience Analytics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Audiences"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:f.totalAudiences})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Active Audiences"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:f.activeAudiences})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Members"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:f.totalSize.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Revenue"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["",(f.totalRevenue/1e5).toFixed(1),"L"]})]})]})]})]})]})]})]}),u&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Audience Details: ",u.name]}),e.jsx("button",{onClick:()=>p(null),className:"text-2xl text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:""})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Description"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:u.description})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Audience Criteria"}),e.jsx("div",{className:"space-y-2",children:u.criteria.map((b,N)=>e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:g(b.field)}),e.jsx("span",{className:"mx-2 text-slate-600 dark:text-slate-400",children:x(b.operator)}),e.jsxs("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:[b.value,b.value2&&` and ${b.value2}`]})]},N))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Performance Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u.performance.reach.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Reach"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[u.performance.engagement,"%"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Engagement"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[u.performance.conversion,"%"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Conversion"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["",(u.performance.revenue/1e3).toFixed(0),"K"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]})]})]})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Custom Audience Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Define Clear Criteria"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use specific, measurable criteria to create meaningful audience segments."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Test and Optimize"}),e.jsx("p",{className:"text-sm opacity-90",children:"Continuously test audience performance and optimize targeting criteria."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Personalize Content"}),e.jsx("p",{className:"text-sm opacity-90",children:"Create personalized content and offers for each audience segment."})]})]})]})]})}function E9(){const[t]=y.useState([{id:"1",name:"Website",type:"website",status:"active",metrics:{reach:5e4,engagement:12.5,conversion:3.2,revenue:8e5},icon:e4,color:"bg-blue-500"},{id:"2",name:"Mobile App",type:"mobile",status:"active",metrics:{reach:25e3,engagement:18.3,conversion:5.7,revenue:45e4},icon:dm,color:"bg-green-500"},{id:"3",name:"Email Marketing",type:"email",status:"active",metrics:{reach:3e4,engagement:15.2,conversion:4.8,revenue:35e4},icon:ts,color:"bg-purple-500"},{id:"4",name:"SMS Marketing",type:"sms",status:"active",metrics:{reach:15e3,engagement:22.1,conversion:8.3,revenue:2e5},icon:fs,color:"bg-orange-500"},{id:"5",name:"Push Notifications",type:"push",status:"active",metrics:{reach:2e4,engagement:16.7,conversion:6.2,revenue:28e4},icon:Da,color:"bg-pink-500"},{id:"6",name:"Live Chat",type:"chat",status:"active",metrics:{reach:8e3,engagement:45.2,conversion:12.8,revenue:15e4},icon:fs,color:"bg-cyan-500"}]),[s]=y.useState([{id:"1",name:"Holiday Sale Campaign",description:"Multi-channel holiday promotion across all touchpoints",channels:["website","mobile","email","sms","push"],status:"active",startDate:"2024-01-15",endDate:"2024-01-31",budget:1e5,performance:{impressions:15e4,clicks:25e3,conversions:3500,revenue:12e5}},{id:"2",name:"New Product Launch",description:"Launch campaign for new skincare line",channels:["website","email","push","chat"],status:"active",startDate:"2024-01-20",endDate:"2024-02-05",budget:75e3,performance:{impressions:8e4,clicks:12e3,conversions:1800,revenue:65e4}},{id:"3",name:"Customer Retention",description:"Retention campaign for at-risk customers",channels:["email","sms","push"],status:"paused",startDate:"2024-01-10",endDate:"2024-01-25",budget:5e4,performance:{impressions:4e4,clicks:6e3,conversions:900,revenue:3e5}}]),[r,a]=y.useState("overview"),n={totalChannels:t.length,activeChannels:t.filter(o=>o.status==="active").length,totalReach:t.reduce((o,c)=>o+c.metrics.reach,0),totalRevenue:t.reduce((o,c)=>o+c.metrics.revenue,0)},i=o=>{switch(o){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"inactive":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";case"maintenance":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"paused":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"draft":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},l=[{id:"overview",label:"Channel Overview",icon:Gn},{id:"campaigns",label:"Campaigns",icon:Ss},{id:"analytics",label:"Analytics",icon:zt}];return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Omni Channel Marketing"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Manage and optimize customer interactions across all channels"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(Gn,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Campaign"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Channels"}),e.jsx("p",{className:"text-3xl font-bold",children:n.totalChannels})]}),e.jsx(Gn,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active Channels"}),e.jsx("p",{className:"text-3xl font-bold",children:n.activeChannels})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Reach"}),e.jsxs("p",{className:"text-3xl font-bold",children:[(n.totalReach/1e3).toFixed(0),"K"]})]}),e.jsx(zt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Revenue"}),e.jsxs("p",{className:"text-3xl font-bold",children:["",(n.totalRevenue/1e5).toFixed(1),"L"]})]}),e.jsx(Ss,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:l.map(o=>{const c=o.icon;return e.jsxs("button",{onClick:()=>a(o.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${r===o.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(c,{className:"h-4 w-4"}),e.jsx("span",{children:o.label})]},o.id)})})}),e.jsxs("div",{className:"p-6",children:[r==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Channel Performance"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(o=>{const c=o.icon;return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 ${o.color} rounded-full flex items-center justify-center`,children:e.jsx(c,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:o.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:o.type})]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${i(o.status)}`,children:o.status})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Reach"}),e.jsx("span",{className:"font-semibold text-blue-600",children:o.metrics.reach.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Engagement"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[o.metrics.engagement,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Conversion"}),e.jsxs("span",{className:"font-semibold text-purple-600",children:[o.metrics.conversion,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"}),e.jsxs("span",{className:"font-semibold text-orange-600",children:["",(o.metrics.revenue/1e3).toFixed(0),"K"]})]})]}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsx("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Configure"}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:o.status==="active"?e.jsx(jn,{className:"h-4 w-4"}):e.jsx(Ua,{className:"h-4 w-4"})})]})]},o.id)})})]}),r==="campaigns"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Omni Channel Campaigns"}),e.jsx("div",{className:"space-y-4",children:s.map(o=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:o.name}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:o.description})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${i(o.status)}`,children:o.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Channels"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:o.channels.map((c,d)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded",children:c},d))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Campaign Period"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[new Date(o.startDate).toLocaleDateString()," - ",new Date(o.endDate).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Budget: ",o.budget.toLocaleString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o.performance.impressions.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Impressions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:o.performance.clicks.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Clicks"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:o.performance.conversions.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Conversions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["",(o.performance.revenue/1e5).toFixed(1),"L"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"View Details"}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:o.status==="active"?e.jsx(jn,{className:"h-4 w-4"}):e.jsx(Ua,{className:"h-4 w-4"})}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Edit"})]})]},o.id))})]}),r==="analytics"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Omni Channel Analytics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Channel Performance Comparison"}),e.jsx("div",{className:"space-y-3",children:t.sort((o,c)=>c.metrics.conversion-o.metrics.conversion).slice(0,3).map((o,c)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:c+1})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100",children:o.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[o.metrics.reach.toLocaleString()," reach"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-green-600",children:[o.metrics.conversion,"%"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Conversion"})]})]},o.id))})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Cross-Channel Insights"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cross-Channel Engagement"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"+28.5%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Customer Journey Length"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"4.2 touchpoints"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Channel Synergy"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"High"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Attribution Accuracy"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"92.3%"})]})]})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Omni Channel Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Consistent Experience"}),e.jsx("p",{className:"text-sm opacity-90",children:"Ensure consistent messaging and branding across all customer touchpoints."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Data Integration"}),e.jsx("p",{className:"text-sm opacity-90",children:"Integrate data from all channels to get a complete customer view."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Channel Optimization"}),e.jsx("p",{className:"text-sm opacity-90",children:"Continuously optimize each channel while maintaining cross-channel synergy."})]})]})]})]})}const M0={payment:si,email:ts,sms:fs,push:Da,analytics:Gn,social:dm,shipping:Qs,database:j2,ai:Cb,other:Ns},B0={payment:"bg-green-500",email:"bg-blue-500",sms:"bg-purple-500",push:"bg-orange-500",analytics:"bg-indigo-500",social:"bg-pink-500",shipping:"bg-yellow-500",database:"bg-cyan-500",ai:"bg-emerald-500",other:"bg-gray-500"};function F9(){const{notify:t}=Sr(),[s,r]=y.useState([]),[a,n]=y.useState(!0),[i,l]=y.useState(null),[o,c]=y.useState("overview"),[d,u]=y.useState(null),[p,m]=y.useState({}),[f,h]=y.useState(null),[x,g]=y.useState(null),[j,b]=y.useState(!1),[N,C]=y.useState({name:"",description:"",category:"other",status:"inactive",fields:[]});y.useEffect(()=>{A()},[]);const A=async()=>{try{n(!0);const k=await Qe.getAPIConfigurations(),se=(Array.isArray(k)?k:(k==null?void 0:k.data)||[]).map(B=>({...B,fields:B.fields||[],lastUpdated:B.lastUpdated||B.updated_at||B.created_at||new Date().toISOString()}));r(se)}catch(k){console.error("Failed to load API configurations:",k),t("error",k.message||"Failed to load API configurations")}finally{n(!1)}},F=async k=>{try{l(k.id);const X={id:k.id,name:k.name,description:k.description,category:k.category,status:k.status,fields:k.fields};if(k.id&&k.id!=="new")await Qe.updateAPIConfiguration(k.id,X),t("success",`${k.name} updated successfully`);else{const se=await Qe.createAPIConfiguration(X);t("success",`${k.name} created successfully`),se.data&&(g(null),b(!1))}await A()}catch(X){console.error("Failed to save configuration:",X),t("error",X.message||"Failed to save configuration")}finally{l(null)}},w=async k=>{if(confirm("Are you sure you want to delete this API configuration?"))try{await Qe.deleteAPIConfiguration(k),t("success","API configuration deleted successfully"),await A(),(d==null?void 0:d.id)===k&&u(null),(x==null?void 0:x.id)===k&&g(null)}catch(X){console.error("Failed to delete configuration:",X),t("error",X.message||"Failed to delete configuration")}},_=(k,X,se)=>{r(B=>B.map(L=>L.id===k?{...L,fields:L.fields.map(H=>H.id===X?{...H,value:se}:H)}:L)),(x==null?void 0:x.id)===k&&g(B=>B?{...B,fields:B.fields.map(L=>L.id===X?{...L,value:se}:L)}:null)},v=(k,X)=>{x&&g({...x,[k]:X})},S=()=>{C(k=>({...k,fields:[...k.fields||[],{id:`field_${Date.now()}`,name:"",label:"",type:"text",value:"",required:!1,sensitive:!1}]}))},R=(k,X)=>{C(se=>({...se,fields:(se.fields||[]).map(B=>B.id===k?{...B,...X}:B)}))},D=k=>{C(X=>({...X,fields:(X.fields||[]).filter(se=>se.id!==k)}))},V=async()=>{if(!N.name||!N.category){t("error","Name and category are required");return}try{l("new");const k={name:N.name,description:N.description||"",category:N.category,status:N.status||"inactive",fields:N.fields||[]};await Qe.createAPIConfiguration(k),t("success",`${N.name} created successfully`),b(!1),C({name:"",description:"",category:"other",status:"inactive",fields:[]}),await A()}catch(k){console.error("Failed to create configuration:",k),t("error",k.message||"Failed to create configuration")}finally{l(null)}},O=async(k,X="connection")=>{try{const se=await Qe.testAPIConfiguration(k,X);t("success",se.message||"API test completed successfully")}catch(se){t("error",se.message||"API test failed")}},I=k=>{switch(k){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"inactive":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";case"testing":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},z=k=>{m(X=>({...X,[k]:!X[k]}))},Q=async(k,X)=>{try{await navigator.clipboard.writeText(k),h(X),setTimeout(()=>h(null),2e3)}catch(se){console.error("Failed to copy:",se)}},P=[{id:"overview",label:"API Overview",icon:Ns},{id:"configs",label:"Configurations",icon:Uu},{id:"test",label:"Test APIs",icon:_f}];return a?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading API configurations..."})]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"API & Code Manager"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Manage all your API keys, codes, and integration settings"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>b(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Service"})]}),e.jsxs("button",{className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(S2,{className:"h-4 w-4"}),e.jsx("span",{children:"Export Config"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total APIs"}),e.jsx("p",{className:"text-3xl font-bold",children:s.length})]}),e.jsx(Ns,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active APIs"}),e.jsx("p",{className:"text-3xl font-bold",children:s.filter(k=>k.status==="active").length})]}),e.jsx(Uu,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Testing APIs"}),e.jsx("p",{className:"text-3xl font-bold",children:s.filter(k=>k.status==="testing").length})]}),e.jsx(_f,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Sensitive Keys"}),e.jsx("p",{className:"text-3xl font-bold",children:s.reduce((k,X)=>k+X.fields.filter(se=>se.sensitive).length,0)})]}),e.jsx(Cb,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:P.map(k=>{const X=k.icon;return e.jsxs("button",{onClick:()=>c(k.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${o===k.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{children:k.label})]},k.id)})})}),e.jsxs("div",{className:"p-6",children:[o==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"API Configurations Overview"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(k=>{const X=M0[k.category]||Ns,se=B0[k.category]||"bg-gray-500";return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 ${se} rounded-full flex items-center justify-center`,children:e.jsx(X,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:k.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:k.category})]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${I(k.status)}`,children:k.status})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:k.description}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Fields:"}),e.jsx("span",{className:"font-semibold",children:k.fields.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Sensitive:"}),e.jsx("span",{className:"font-semibold text-red-600",children:k.fields.filter(B=>B.sensitive).length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Last Updated:"}),e.jsx("span",{className:"font-semibold",children:new Date(k.lastUpdated).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{g(k),u(k)},className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Configure"}),e.jsx("button",{onClick:()=>O(k.id),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Test"}),e.jsx("button",{onClick:()=>w(k.id),className:"px-3 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900 text-sm rounded transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},k.id)})})]}),o==="configs"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"API Configuration Management"})}),e.jsx("div",{className:"space-y-6",children:s.map(k=>{const X=M0[k.category]||Ns,se=B0[k.category]||"bg-gray-500",B=(x==null?void 0:x.id)===k.id,L=B?x:k;return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:`w-8 h-8 ${se} rounded-full flex items-center justify-center`,children:e.jsx(X,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex-1",children:[B?e.jsx("input",{type:"text",value:(L==null?void 0:L.name)||"",onChange:H=>v("name",H.target.value),className:"text-lg font-semibold bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded px-2 py-1 w-full"}):e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:k.name}),B?e.jsx("input",{type:"text",value:(L==null?void 0:L.description)||"",onChange:H=>v("description",H.target.value),placeholder:"Description",className:"text-sm bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded px-2 py-1 w-full mt-1"}):e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:k.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[B?e.jsxs("select",{value:(L==null?void 0:L.status)||"inactive",onChange:H=>v("status",H.target.value),className:"px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-xs",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"testing",children:"Testing"})]}):e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${I(k.status)}`,children:k.status}),B?e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>{L&&F(L)},disabled:i===k.id,className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700 transition-colors disabled:opacity-50",children:i===k.id?"Saving...":"Save"}),e.jsx("button",{onClick:()=>{g(null),A()},className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-xs rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"})]}):e.jsxs("button",{onClick:()=>g({...k}),className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors flex items-center space-x-1",children:[e.jsx(Wu,{className:"h-3 w-3"}),e.jsx("span",{children:"Edit"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:((L==null?void 0:L.fields)||[]).map(H=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:[H.label,H.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:H.sensitive&&!p[H.id]||H.type==="password"?"password":"text",value:H.value,onChange:K=>{B&&L&&_(L.id,H.id,K.target.value)},disabled:!B,placeholder:H.placeholder,className:`w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 pr-20 ${B?"":"cursor-not-allowed opacity-60"}`}),e.jsxs("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex space-x-1",children:[H.sensitive&&e.jsx("button",{onClick:()=>z(H.id),className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:p[H.id]?e.jsx(Bu,{className:"h-4 w-4"}):e.jsx(nt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Q(H.value,H.id),className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:f===H.id?e.jsx(cd,{className:"h-4 w-4 text-green-600"}):e.jsx(Xi,{className:"h-4 w-4"})})]})]}),H.description&&e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:H.description})]},H.id))})]},k.id)})})]}),o==="test"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"API Testing & Validation"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map(k=>{const X=M0[k.category]||Ns,se=B0[k.category]||"bg-gray-500";return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:`w-8 h-8 ${se} rounded-full flex items-center justify-center`,children:e.jsx(X,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:k.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Test API connectivity and authentication"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Connection Test"}),e.jsx("button",{onClick:()=>O(k.id,"connection"),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Test"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Authentication"}),e.jsx("button",{onClick:()=>O(k.id,"authentication"),className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors",children:"Validate"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Rate Limits"}),e.jsx("button",{onClick:()=>O(k.id,"rate_limits"),className:"px-3 py-1 bg-purple-600 text-white text-sm rounded hover:bg-purple-700 transition-colors",children:"Check"})]})]})]},k.id)})})]})]})]}),j&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Add New API Service"}),e.jsx("button",{onClick:()=>{b(!1),C({name:"",description:"",category:"other",status:"inactive",fields:[]})},className:"text-2xl text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:e.jsx(Qt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Service Name *"}),e.jsx("input",{type:"text",value:N.name||"",onChange:k=>C({...N,name:k.target.value}),placeholder:"e.g., Payment Gateway",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category *"}),e.jsxs("select",{value:N.category||"other",onChange:k=>C({...N,category:k.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",children:[e.jsx("option",{value:"payment",children:"Payment"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"sms",children:"SMS"}),e.jsx("option",{value:"push",children:"Push Notifications"}),e.jsx("option",{value:"analytics",children:"Analytics"}),e.jsx("option",{value:"social",children:"Social Media"}),e.jsx("option",{value:"shipping",children:"Shipping"}),e.jsx("option",{value:"database",children:"Database"}),e.jsx("option",{value:"ai",children:"AI Services"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{value:N.description||"",onChange:k=>C({...N,description:k.target.value}),placeholder:"Describe what this API service does",rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Status"}),e.jsxs("select",{value:N.status||"inactive",onChange:k=>C({...N,status:k.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"testing",children:"Testing"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"API Fields"}),e.jsxs("button",{onClick:S,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors flex items-center space-x-1",children:[e.jsx(ss,{className:"h-3 w-3"}),e.jsx("span",{children:"Add Field"})]})]}),e.jsx("div",{className:"space-y-3",children:(N.fields||[]).map((k,X)=>e.jsxs("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:k.name,onChange:se=>R(k.id,{name:se.target.value}),placeholder:"Field name (e.g., api_key)",className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700"}),e.jsx("input",{type:"text",value:k.label,onChange:se=>R(k.id,{label:se.target.value}),placeholder:"Field label (e.g., API Key)",className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("select",{value:k.type,onChange:se=>R(k.id,{type:se.target.value}),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700",children:[e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"password",children:"Password"}),e.jsx("option",{value:"url",children:"URL"}),e.jsx("option",{value:"number",children:"Number"}),e.jsx("option",{value:"textarea",children:"Textarea"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:k.required,onChange:se=>R(k.id,{required:se.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Required"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:k.sensitive,onChange:se=>R(k.id,{sensitive:se.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Sensitive"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:k.placeholder||"",onChange:se=>R(k.id,{placeholder:se.target.value}),placeholder:"Placeholder text",className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700"}),e.jsx("button",{onClick:()=>D(k.id),className:"px-3 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900 rounded transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},k.id))})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:V,disabled:i==="new",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:i==="new"?"Creating...":"Create Service"}),e.jsx("button",{onClick:()=>{b(!1),C({name:"",description:"",category:"other",status:"inactive",fields:[]})},className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"})]})]})]})}),d&&!j&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Configure: ",d.name]}),e.jsx("button",{onClick:()=>u(null),className:"text-2xl text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:e.jsx(Qt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4",children:e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:d.description})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.fields.map(k=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:[k.label,k.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:k.sensitive&&!p[k.id]||k.type==="password"?"password":"text",value:k.value,placeholder:k.placeholder,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 pr-20",readOnly:!0}),e.jsxs("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex space-x-1",children:[k.sensitive&&e.jsx("button",{onClick:()=>z(k.id),className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:p[k.id]?e.jsx(Bu,{className:"h-4 w-4"}):e.jsx(nt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Q(k.value,k.id),className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:f===k.id?e.jsx(cd,{className:"h-4 w-4 text-green-600"}):e.jsx(Xi,{className:"h-4 w-4"})})]})]}),k.description&&e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:k.description})]},k.id))}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{g(d),u(null)},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Edit Configuration"}),e.jsx("button",{onClick:()=>O(d.id),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Test API"})]})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"API Management Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Secure Storage"}),e.jsx("p",{className:"text-sm opacity-90",children:"Store sensitive API keys securely and never expose them in client-side code."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Regular Rotation"}),e.jsx("p",{className:"text-sm opacity-90",children:"Regularly rotate API keys and monitor usage to maintain security."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Test & Monitor"}),e.jsx("p",{className:"text-sm opacity-90",children:"Continuously test API connections and monitor performance metrics."})]})]})]})]})}const U0=[{value:"razorpay",label:"Razorpay",icon:"",color:"bg-blue-500"},{value:"phonepe",label:"PhonePe",icon:"",color:"bg-purple-500"},{value:"googlepay",label:"Google Pay",icon:"",color:"bg-blue-600"},{value:"paytm",label:"Paytm",icon:"",color:"bg-yellow-500"},{value:"navi",label:"Navi",icon:"",color:"bg-indigo-500"},{value:"bhim",label:"BHIM",icon:"",color:"bg-orange-500"},{value:"stripe",label:"Stripe",icon:"",color:"bg-purple-600"},{value:"paypal",label:"PayPal",icon:"",color:"bg-blue-700"}];function A9(){const[t,s]=y.useState([]),[r,a]=y.useState(!0),[n,i]=y.useState(!1),[l,o]=y.useState(null),[c,d]=y.useState({name:"",type:"razorpay",api_key:"",secret_key:"",webhook_url:"",merchant_id:"",processing_fee_percentage:0,processing_fee_fixed:0,min_amount:0,max_amount:999999,supported_methods:[],is_active:!0});y.useEffect(()=>{u()},[]);const u=async()=>{try{a(!0);const g=await Qe.getPaymentGateways();s(g)}catch(g){console.error("Failed to fetch payment gateways:",g)}finally{a(!1)}},p=async g=>{g.preventDefault();try{l?await Qe.updatePaymentGateway(l.id,c):await Qe.createPaymentGateway(c),i(!1),o(null),d({name:"",type:"razorpay",api_key:"",secret_key:"",webhook_url:"",merchant_id:"",processing_fee_percentage:0,processing_fee_fixed:0,min_amount:0,max_amount:999999,supported_methods:[],is_active:!0}),u()}catch(j){console.error("Failed to save payment gateway:",j)}},m=g=>{o(g),d({name:g.name,type:g.type,api_key:g.api_key,secret_key:g.secret_key,webhook_url:g.webhook_url,merchant_id:g.merchant_id||"",processing_fee_percentage:g.processing_fee_percentage,processing_fee_fixed:g.processing_fee_fixed,min_amount:g.min_amount,max_amount:g.max_amount,supported_methods:g.supported_methods||[],is_active:g.is_active}),i(!0)},f=async g=>{if(confirm("Are you sure you want to delete this payment gateway?"))try{await Qe.deletePaymentGateway(g),u()}catch(j){console.error("Failed to delete payment gateway:",j)}},h=async g=>{try{await Qe.updatePaymentGateway(g.id,{is_active:!g.is_active}),u()}catch(j){console.error("Failed to toggle gateway status:",j)}},x=g=>U0.find(j=>j.value===g)||U0[0];return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:"Payment Options"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Manage payment gateways and processing fees"})]}),e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 transition-colors",children:[e.jsx(ss,{className:"h-4 w-4"}),"Add Payment Gateway"]})]}),e.jsxs("div",{className:"mb-6 rounded-lg bg-blue-50 p-4 dark:bg-blue-900/20",children:[e.jsx("h3",{className:"mb-2 font-semibold text-blue-900 dark:text-blue-100",children:"Payment Rules"}),e.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[e.jsx("li",{children:" Orders below 1000: Prepaid and Postpaid options available"}),e.jsx("li",{children:" Orders above 1000: Prepaid only"}),e.jsx("li",{children:" All payment gateways support both prepaid and postpaid modes"})]})]}),r?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(g=>{var b;const j=x(g.type);return e.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${j.color} flex items-center justify-center text-white text-lg`,children:j.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:g.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:j.label})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:g.is_active?e.jsx(Vt,{className:"h-5 w-5 text-green-500"}):e.jsx(es,{className:"h-5 w-5 text-red-500"})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Processing Fee:"}),e.jsxs("span",{className:"font-medium",children:[g.processing_fee_percentage,"% + ",g.processing_fee_fixed]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Amount Range:"}),e.jsxs("span",{className:"font-medium",children:["",g.min_amount," - ",g.max_amount]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Methods:"}),e.jsxs("span",{className:"font-medium",children:[((b=g.supported_methods)==null?void 0:b.length)||0," methods"]})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:()=>m(g),className:"flex-1 rounded-lg border border-slate-300 px-3 py-2 text-sm hover:bg-slate-50 dark:border-slate-600 dark:hover:bg-slate-700 transition-colors",children:e.jsx(xr,{className:"h-4 w-4 mx-auto"})}),e.jsx("button",{onClick:()=>h(g),className:`flex-1 rounded-lg px-3 py-2 text-sm transition-colors ${g.is_active?"bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900/20 dark:text-red-400":"bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/20 dark:text-green-400"}`,children:g.is_active?"Disable":"Enable"}),e.jsx("button",{onClick:()=>f(g.id),className:"rounded-lg border border-red-300 px-3 py-2 text-sm text-red-700 hover:bg-red-50 dark:border-red-600 dark:text-red-400 dark:hover:bg-red-900/20 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},g.id)})}),n&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"w-full max-w-2xl rounded-lg bg-white dark:bg-slate-800 p-6 m-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"mb-6 text-xl font-semibold text-slate-900 dark:text-slate-100",children:l?"Edit Payment Gateway":"Add Payment Gateway"}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Gateway Name"}),e.jsx("input",{type:"text",value:c.name,onChange:g=>d({...c,name:g.target.value}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Payment Type"}),e.jsx("select",{value:c.type,onChange:g=>d({...c,type:g.target.value}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",children:U0.map(g=>e.jsxs("option",{value:g.value,children:[g.icon," ",g.label]},g.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"API Key"}),e.jsx("input",{type:"text",value:c.api_key,onChange:g=>d({...c,api_key:g.target.value}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Secret Key"}),e.jsx("input",{type:"password",value:c.secret_key,onChange:g=>d({...c,secret_key:g.target.value}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Webhook URL"}),e.jsx("input",{type:"url",value:c.webhook_url,onChange:g=>d({...c,webhook_url:g.target.value}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Merchant ID (Optional)"}),e.jsx("input",{type:"text",value:c.merchant_id,onChange:g=>d({...c,merchant_id:g.target.value}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Processing Fee (%)"}),e.jsx("input",{type:"number",step:"0.01",value:c.processing_fee_percentage,onChange:g=>d({...c,processing_fee_percentage:parseFloat(g.target.value)}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fixed Fee ()"}),e.jsx("input",{type:"number",step:"0.01",value:c.processing_fee_fixed,onChange:g=>d({...c,processing_fee_fixed:parseFloat(g.target.value)}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Min Amount ()"}),e.jsx("input",{type:"number",value:c.min_amount,onChange:g=>d({...c,min_amount:parseFloat(g.target.value)}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Max Amount ()"}),e.jsx("input",{type:"number",value:c.max_amount,onChange:g=>d({...c,max_amount:parseFloat(g.target.value)}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.is_active,onChange:g=>d({...c,is_active:g.target.checked}),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Active"})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 rounded-lg bg-blue-600 py-2 text-white hover:bg-blue-700 transition-colors",children:l?"Update Gateway":"Add Gateway"}),e.jsx("button",{type:"button",onClick:()=>{i(!1),o(null)},className:"flex-1 rounded-lg border border-slate-300 py-2 text-slate-700 hover:bg-slate-50 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-700 transition-colors",children:"Cancel"})]})]})]})})]})}const Hr="http://192.168.1.36:2000",P9=()=>{const[t,s]=y.useState([]),[r,a]=y.useState(!1),[n,i]=y.useState(null),[l,o]=y.useState(!1),[c,d]=y.useState(!1),[u,p]=y.useState(!1),[m,f]=y.useState(null),[h,x]=y.useState(!1),[g,j]=y.useState({autoAdvanceInterval:3e3,videoPlayDuration:3e3,animationDuration:700,animationEasing:"ease-in-out",autoPlay:!0,radius:500,blurAmount:12,minOpacity:.6,minScale:.85}),[b,N]=y.useState(!1),[C,A]=y.useState({title:"",description:"",video_url:"",redirect_url:"",price:"",size:"medium",thumbnail_url:"",is_active:!0,video_type:"local"}),[F,w]=y.useState(null),[_,v]=y.useState(null),S=async(L,H)=>{const K=new FormData;K.append("file",L),K.append("type",H);const J=await fetch(`${Hr}/api/upload`,{method:"POST",body:K});if(!J.ok)throw new Error("Upload failed");return(await J.json()).filename},R=(L,H)=>{var J;const K=(J=L.target.files)==null?void 0:J[0];if(K)if(H==="video"){if(w(K),!_){const re=document.createElement("video");re.src=URL.createObjectURL(K),re.onloadedmetadata=()=>{const q=document.createElement("canvas");q.width=re.videoWidth,q.height=re.videoHeight;const ae=q.getContext("2d");ae&&(ae.drawImage(re,0,0),q.toBlob(xe=>{if(xe){const _e=new File([xe],"thumbnail.jpg",{type:"image/jpeg"});v(_e)}},"image/jpeg"))}}}else v(K)},D=L=>L.includes("instagram.com")?"instagram":L.includes("facebook.com")||L.includes("fb.com")?"facebook":L.includes("youtube.com")||L.includes("youtu.be")?"youtube":L.startsWith("/")||L.includes("localhost")?"local":"url",V=async()=>{try{const L=await fetch(`${Hr}/api/videos`);if(L.ok){const H=await L.json();s(H)}}catch(L){console.error("Failed to fetch videos:",L)}};y.useEffect(()=>{V(),O()},[]);const O=async()=>{try{const L=await fetch(`${Hr}/api/carousel-settings`);if(L.ok){const H=await L.json();H&&H.length>0&&j(H[0].settings||g)}}catch(L){console.error("Failed to load carousel settings:",L);const H=localStorage.getItem("carousel-settings");if(H)try{j(JSON.parse(H))}catch(K){console.error("Failed to parse saved settings:",K)}}},I=async()=>{N(!0);try{if((await fetch(`${Hr}/api/carousel-settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:g})})).ok)localStorage.setItem("carousel-settings",JSON.stringify(g)),alert("Carousel settings saved successfully!"),x(!1);else throw new Error("Failed to save settings")}catch(L){console.error("Failed to save settings:",L),localStorage.setItem("carousel-settings",JSON.stringify(g)),alert("Settings saved to local storage!"),x(!1)}finally{N(!1)}},z=async L=>{if(L.preventDefault(),!C.title.trim()){alert("Please enter a title");return}if(!C.description.trim()){alert("Please enter a description");return}if(!C.price.trim()){alert("Please enter a price");return}if(!C.redirect_url.trim()){alert("Please enter a redirect URL");return}if(C.video_type==="local"&&!F){alert("Please select a video file for local upload");return}if(C.video_type!=="local"&&!C.video_url.trim()){alert("Please enter a video URL");return}o(!0),d(!0);try{let H=C.video_url,K=C.thumbnail_url;F&&(H=await S(F,"video")),_&&(K=await S(_,"thumbnail")),!H&&C.video_type==="local"&&(H="local-upload-pending");const J=F?"local":D(C.video_url),re=n?`${Hr}/api/videos/${n.id}`:`${Hr}/api/videos`,ae=await fetch(re,{method:n?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...C,video_url:H||C.video_url,thumbnail_url:K||C.thumbnail_url,video_type:J})});if(ae.ok)await V(),a(!1),i(null),w(null),v(null),A({title:"",description:"",video_url:"",redirect_url:"",price:"",size:"medium",thumbnail_url:"",is_active:!0,video_type:"local"});else{const xe=await ae.json();console.error("Server error:",xe),alert(`Failed to save video: ${xe.message||"Unknown error"}`)}}catch(H){console.error("Failed to save video:",H),alert("Failed to save video. Please try again.")}finally{o(!1),d(!1)}},Q=L=>{i(L),A({title:L.title,description:L.description,video_url:L.video_url,redirect_url:L.redirect_url,price:L.price,size:L.size,thumbnail_url:L.thumbnail_url,is_active:L.is_active,video_type:L.video_type}),a(!0)},P=async L=>{if(confirm("Are you sure you want to delete this video?"))try{(await fetch(`${Hr}/api/videos/${L}`,{method:"DELETE"})).ok&&await V()}catch(H){console.error("Failed to delete video:",H)}},k=async L=>{try{const H=await fetch(`${Hr}/api/videos/${L.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!L.is_active})});if(H.ok)await V();else{const K=await H.text();console.error("Failed to toggle video status:",K)}}catch(H){console.error("Failed to toggle video status:",H)}},X=L=>{if(!L.thumbnail_url){alert("No thumbnail available to crop. Please upload a thumbnail first.");return}f(L),p(!0)},se=async L=>{if(m)try{const H=new FormData;H.append("file",L,"cropped-thumbnail.jpg"),H.append("type","thumbnail");const K=await fetch(`${Hr}/api/upload`,{method:"POST",body:H});if(!K.ok){const ae=await K.text();throw console.error("Upload error:",ae),new Error("Upload failed")}const re=(await K.json()).filename,q=await fetch(`${Hr}/api/videos/${m.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({thumbnail_url:re})});if(q.ok)await V(),p(!1),f(null),alert("Thumbnail cropped and updated successfully!");else{const ae=await q.text();throw console.error("Update error:",ae),new Error(`Failed to update video: ${ae}`)}}catch(H){console.error("Failed to crop thumbnail:",H),alert("Failed to crop thumbnail. Please try again.")}},B=L=>L.video_type==="local"?`http://192.168.1.36:2000/uploads/${L.video_url}`:L.video_url;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Video Manager"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>x(!h),className:"rounded-lg bg-gray-600 px-4 py-2 text-white hover:bg-gray-700 transition-colors flex items-center gap-2",children:[e.jsx(Ns,{className:"w-4 h-4"}),"Carousel Settings"]}),e.jsx("button",{onClick:()=>{i(null),A({title:"",description:"",video_url:"",redirect_url:"",price:"",size:"medium",thumbnail_url:"",is_active:!0,video_type:"local"}),a(!0)},className:"rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 transition-colors",children:"Add New Video"})]})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Unlimited videos supported  Max file size: 500MB per video  Total videos: ",t.length]})]}),h&&e.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Carousel Animation Settings"}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Auto-Advance Interval (ms)"}),e.jsx("input",{type:"number",min:"1000",max:"10000",step:"500",value:g.autoAdvanceInterval,onChange:L=>j({...g,autoAdvanceInterval:parseInt(L.target.value)||3e3}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Time between video changes (1000-10000ms)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Video Play Duration (ms)"}),e.jsx("input",{type:"number",min:"1000",max:"30000",step:"500",value:g.videoPlayDuration,onChange:L=>j({...g,videoPlayDuration:parseInt(L.target.value)||3e3}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"How long each video plays before next (1000-30000ms)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Animation Duration (ms)"}),e.jsx("input",{type:"number",min:"200",max:"2000",step:"100",value:g.animationDuration,onChange:L=>j({...g,animationDuration:parseInt(L.target.value)||700}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Transition speed (200-2000ms)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Animation Easing"}),e.jsxs("select",{value:g.animationEasing,onChange:L=>j({...g,animationEasing:L.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"linear",children:"Linear"}),e.jsx("option",{value:"ease",children:"Ease"}),e.jsx("option",{value:"ease-in",children:"Ease In"}),e.jsx("option",{value:"ease-out",children:"Ease Out"}),e.jsx("option",{value:"ease-in-out",children:"Ease In Out"}),e.jsx("option",{value:"cubic-bezier(0.68, -0.55, 0.265, 1.55)",children:"Bounce"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"3D Circle Radius (px)"}),e.jsx("input",{type:"number",min:"300",max:"1000",step:"50",value:g.radius,onChange:L=>j({...g,radius:parseInt(L.target.value)||500}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Distance of videos from center (300-1000px)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Side Video Blur (px)"}),e.jsx("input",{type:"number",min:"0",max:"30",step:"1",value:g.blurAmount,onChange:L=>j({...g,blurAmount:parseInt(L.target.value)||12}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Blur effect for side videos (0-30px)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Minimum Opacity"}),e.jsx("input",{type:"number",min:"0.1",max:"1",step:"0.1",value:g.minOpacity,onChange:L=>j({...g,minOpacity:parseFloat(L.target.value)||.6}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Minimum opacity for side videos (0.1-1.0)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Minimum Scale"}),e.jsx("input",{type:"number",min:"0.5",max:"1",step:"0.05",value:g.minScale,onChange:L=>j({...g,minScale:parseFloat(L.target.value)||.85}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Minimum scale for side videos (0.5-1.0)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"autoPlay",checked:g.autoPlay,onChange:L=>j({...g,autoPlay:L.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"autoPlay",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Enable Auto-Play"})]})]}),e.jsxs("div",{className:"mt-6 flex gap-4",children:[e.jsxs("button",{onClick:I,disabled:b,className:"flex items-center gap-2 rounded-lg bg-green-600 px-4 py-2 text-white hover:bg-green-700 transition-colors disabled:opacity-50",children:[e.jsx(Ms,{className:"w-4 h-4"}),b?"Saving...":"Save Settings"]}),e.jsx("button",{onClick:()=>{j({autoAdvanceInterval:3e3,videoPlayDuration:3e3,animationDuration:700,animationEasing:"ease-in-out",autoPlay:!0,radius:500,blurAmount:12,minOpacity:.6,minScale:.85})},className:"rounded-lg bg-gray-600 px-4 py-2 text-white hover:bg-gray-700 transition-colors",children:"Reset to Default"})]})]}),t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"No videos found. Add your first video!"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(L=>{var H;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"relative group",children:[L.video_type==="local"||L.video_url?e.jsx("video",{src:B(L),className:"w-full h-64 object-cover",muted:!0,playsInline:!0,onMouseEnter:K=>{K.target.play().catch(()=>{})},onMouseLeave:K=>{const J=K.target;J.pause(),J.currentTime=0}}):e.jsx("img",{src:L.thumbnail_url||"/placeholder-video.jpg",alt:L.title,className:"w-full h-64 object-cover"}),e.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${L.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:L.is_active?"Active":"Inactive"}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold bg-purple-100 text-purple-800",children:((H=L.video_type)==null?void 0:H.toUpperCase())||"URL"})]}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold bg-blue-100 text-blue-800",children:L.size.toUpperCase()})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:L.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:L.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-3",children:[e.jsxs("span",{children:[" ",L.views," views"]}),e.jsxs("span",{children:[" ",L.likes," likes"]}),e.jsx("span",{className:"font-bold text-green-600",children:L.price})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>Q(L),className:"flex-1 rounded-lg bg-blue-600 px-3 py-2 text-sm text-white hover:bg-blue-700 transition-colors",children:"Edit"}),e.jsxs("button",{onClick:()=>X(L),className:"rounded-lg bg-green-600 px-3 py-2 text-sm text-white hover:bg-green-700 transition-colors flex items-center gap-1",title:"Crop Thumbnail",children:[e.jsx(Mu,{className:"w-4 h-4"}),"Crop"]}),e.jsx("button",{onClick:()=>k(L),className:`flex-1 rounded-lg px-3 py-2 text-sm text-white transition-colors ${L.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:L.is_active?"Deactivate":"Activate"}),e.jsx("button",{onClick:()=>P(L.id),className:"rounded-lg bg-gray-600 px-3 py-2 text-sm text-white hover:bg-gray-700 transition-colors",children:"Delete"})]})]})]},L.id)})}),u&&m&&m.thumbnail_url&&e.jsx(Cj,{imageUrl:m.thumbnail_url.startsWith("http")?m.thumbnail_url:`${Hr}/uploads/${m.thumbnail_url}`,aspectRatio:9/16,onCrop:se,onCancel:()=>{p(!1),f(null)}}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:n?"Edit Video":"Add New Video"}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title"}),e.jsx("input",{type:"text",value:C.title,onChange:L=>A({...C,title:L.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Price"}),e.jsx("input",{type:"text",value:C.price,onChange:L=>A({...C,price:L.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"1899",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:C.description,onChange:L=>A({...C,description:L.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Video Source Type"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:[{value:"local",label:"Local Upload",icon:""},{value:"instagram",label:"Instagram",icon:""},{value:"facebook",label:"Facebook",icon:""},{value:"youtube",label:"YouTube",icon:""},{value:"url",label:"Direct URL",icon:""}].map(L=>e.jsxs("button",{type:"button",onClick:()=>A({...C,video_type:L.value}),className:`p-3 rounded-lg border text-sm font-medium transition-colors ${C.video_type===L.value?"border-blue-500 bg-blue-50 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300"}`,children:[e.jsx("div",{className:"text-lg mb-1",children:L.icon}),e.jsx("div",{children:L.label})]},L.value))})]}),C.video_type==="local"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Upload Video File"}),e.jsx("input",{type:"file",accept:"video/*",onChange:L=>R(L,"video"),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!n}),F&&e.jsxs("div",{className:"mt-2 text-sm text-green-600",children:["Selected: ",F.name," (",(F.size/1024/1024).toFixed(2)," MB)"]}),e.jsx("input",{type:"hidden",value:F?"local-upload":"",onChange:()=>{}})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Video URL"}),e.jsx("input",{type:"url",value:C.video_url,onChange:L=>A({...C,video_url:L.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:C.video_type==="instagram"?"https://www.instagram.com/p/...":C.video_type==="facebook"?"https://www.facebook.com/watch/?v=VIDEO_ID":C.video_type==="youtube"?"https://www.youtube.com/watch?v=VIDEO_ID":"https://your-domain.com/video.mp4",required:!0}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[C.video_type==="instagram"&&"Paste Instagram post URL",C.video_type==="facebook"&&"Paste Facebook video URL",C.video_type==="youtube"&&"Paste YouTube video URL",C.video_type==="url"&&"Paste direct video URL"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Redirect URL"}),e.jsx("input",{type:"url",value:C.redirect_url,onChange:L=>A({...C,redirect_url:L.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://your-domain.com/product",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Thumbnail"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:L=>R(L,"thumbnail"),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),_&&e.jsxs("div",{className:"text-sm text-green-600",children:["Selected: ",_.name]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Or enter URL manually below"}),e.jsx("input",{type:"url",value:C.thumbnail_url,onChange:L=>A({...C,thumbnail_url:L.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://your-domain.com/thumbnail.jpg"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Size"}),e.jsxs("select",{value:C.size,onChange:L=>A({...C,size:L.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"small",children:"Small (w-48 h-64)"}),e.jsx("option",{value:"medium",children:"Medium (w-56 h-72)"}),e.jsx("option",{value:"large",children:"Large (w-64 h-80)"})]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:C.is_active,onChange:L=>A({...C,is_active:L.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Active"})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"submit",disabled:l||c,className:"flex-1 rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 transition-colors disabled:opacity-50",children:l||c?"Saving...":n?"Update Video":"Add Video"}),e.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 rounded-lg bg-gray-600 px-4 py-2 text-white hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})]})})]})};function D9(){const[t,s]=y.useState([]),[r,a]=y.useState(!0),[n,i]=y.useState(""),[l,o]=y.useState("all");y.useEffect(()=>{c();const h=window.socketService;return h&&(h.subscribe("contact_message_created",x=>{s(g=>[x,...g])}),h.subscribe("contact_message_updated",x=>{s(g=>g.map(j=>j.id===x.id?x:j))})),()=>{h&&(h.unsubscribe("contact_message_created"),h.unsubscribe("contact_message_updated"))}},[]);const c=async()=>{try{a(!0);const h=await Qe.getContactMessages();s(h||[])}catch(h){console.error("Failed to fetch contact messages:",h)}finally{a(!1)}},d=async(h,x)=>{try{await Qe.updateContactMessageStatus(h,x),s(g=>g.map(j=>j.id===h?{...j,status:x}:j))}catch(g){console.error("Failed to update message status:",g)}},u=t.filter(h=>{const x=h.name.toLowerCase().includes(n.toLowerCase())||h.email.toLowerCase().includes(n.toLowerCase())||h.message.toLowerCase().includes(n.toLowerCase()),g=l==="all"||h.status===l;return x&&g}),p=t.filter(h=>h.status==="unread").length,m=h=>{switch(h){case"unread":return"bg-blue-100 text-blue-800";case"read":return"bg-gray-100 text-gray-800";case"replied":return"bg-green-100 text-green-800";case"archived":return"bg-slate-100 text-slate-800";default:return"bg-gray-100 text-gray-800"}},f=h=>new Date(h).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Contact Messages"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage and respond to customer inquiries"})]}),p>0&&e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:[e.jsx(ts,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsxs("span",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:[p," new messages"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 rounded-xl",style:{backgroundColor:"var(--arctic-blue-light)"},children:e.jsx(ts,{className:"w-6 h-6",style:{color:"var(--arctic-blue-primary)"}})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Total"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:t.length})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 rounded-xl",style:{backgroundColor:"var(--arctic-blue-light)"},children:e.jsx(os,{className:"w-6 h-6",style:{color:"var(--arctic-blue-primary)"}})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Unread"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:p})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 rounded-xl",style:{backgroundColor:"#D1FAE5"},children:e.jsx(Vt,{className:"w-6 h-6",style:{color:"#059669"}})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Replied"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:t.filter(h=>h.status==="replied").length})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 rounded-xl",style:{backgroundColor:"#E9D5FF"},children:e.jsx(nt,{className:"w-6 h-6",style:{color:"#7C3AED"}})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Read"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:t.filter(h=>h.status==="read").length})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 shadow flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search messages...",value:n,onChange:h=>i(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:l,onChange:h=>o(h.target.value),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"unread",children:"Unread"}),e.jsx("option",{value:"read",children:"Read"}),e.jsx("option",{value:"replied",children:"Replied"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),r?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Loading messages..."})]}):u.length===0?e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-12 text-center shadow",children:[e.jsx(ts,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"No messages found"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:n||l!=="all"?"Try adjusting your filters":"No contact messages yet"})]}):e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Message"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:u.map(h=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pa,{className:"w-5 h-5 text-slate-400"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:h.name})]}),e.jsxs("div",{className:"mt-1 flex items-center space-x-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx(ts,{className:"w-4 h-4"}),e.jsx("span",{children:h.email})]}),h.phone&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx(fa,{className:"w-4 h-4"}),e.jsx("span",{children:h.phone})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fs,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-slate-100 max-w-md truncate",children:h.message})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${m(h.status)}`,children:h.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-400",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Mr,{className:"w-4 h-4"}),e.jsx("span",{children:f(h.created_at)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[h.status==="unread"&&e.jsx("button",{onClick:()=>d(h.id,"read"),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900 rounded",title:"Mark as read",children:e.jsx(Vt,{className:"w-5 h-5"})}),h.status!=="replied"&&e.jsx("button",{onClick:()=>d(h.id,"replied"),className:"p-2 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900 rounded",title:"Mark as replied",children:e.jsx(Vt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>d(h.id,"archived"),className:"p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700 rounded",title:"Archive",children:e.jsx(Mt,{className:"w-5 h-5"})})]})})]},h.id))})]})})})]})}function R9(){var w;const[t,s]=y.useState([]),[r,a]=y.useState(!0),[n,i]=y.useState("all"),[l,o]=y.useState(""),[c,d]=y.useState(null),[u,p]=y.useState(!1),[m,f]=y.useState({status:"processing",transaction_id:"",admin_notes:"",rejection_reason:""});y.useEffect(()=>{h()},[n]);const h=async()=>{try{a(!0);const _=await fetch(`http://192.168.1.36:2000/api/admin/coin-withdrawals${n!=="all"?`?status=${n}`:""}`,{headers:{"Content-Type":"application/json"}});if(_.ok){const v=await _.json();s(Array.isArray(v)?v:[])}else console.error("Failed to fetch withdrawals:",_.status,_.statusText)}catch(_){console.error("Failed to fetch withdrawals:",_)}finally{a(!1)}},x=async _=>{if(_.preventDefault(),!!c)try{const v=localStorage.getItem("auth_token"),S=localStorage.getItem("role")||"admin",R=localStorage.getItem("permissions")||"",D={"Content-Type":"application/json"};v&&(D.Authorization=`Bearer ${v}`),S&&(D["x-user-role"]=S),R&&(D["x-user-permissions"]=R);const V=await fetch(`http://192.168.1.36:2000/api/admin/coin-withdrawals/${c.id}/process`,{method:"PUT",headers:D,body:JSON.stringify(m)});if(V.ok)alert("Withdrawal processed successfully!"),p(!1),d(null),h();else{const O=await V.json();alert(O.message||"Failed to process withdrawal")}}catch(v){console.error("Error processing withdrawal:",v),alert("Failed to process withdrawal")}},g=_=>{d(_),f({status:_.status,transaction_id:_.transaction_id||"",admin_notes:_.admin_notes||"",rejection_reason:_.rejection_reason||""}),p(!0)},j=_=>{const v={pending:"bg-yellow-100 text-yellow-800 border-yellow-300",processing:"bg-blue-100 text-blue-800 border-blue-300",completed:"bg-green-100 text-green-800 border-green-300",rejected:"bg-red-100 text-red-800 border-red-300",failed:"bg-red-100 text-red-800 border-red-300"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${v[_]||v.pending}`,children:_.charAt(0).toUpperCase()+_.slice(1)})},b=_=>{switch(_){case"completed":return e.jsx(x2,{className:"w-5 h-5 text-green-600"});case"rejected":case"failed":return e.jsx(es,{className:"w-5 h-5 text-red-600"});case"processing":return e.jsx(G2,{className:"w-5 h-5 text-blue-600 animate-spin"});default:return e.jsx(os,{className:"w-5 h-5 text-yellow-600"})}},N=t.filter(_=>{var v;if(l){const S=l.toLowerCase();return _.user_name.toLowerCase().includes(S)||_.user_email.toLowerCase().includes(S)||((v=_.transaction_id)==null?void 0:v.toLowerCase().includes(S))||_.id.toString().includes(S)}return!0}),C=t.filter(_=>_.status==="pending").length,A=t.reduce((_,v)=>_+(Number(v.amount)||0)/10,0),F=t.filter(_=>_.status==="pending").reduce((_,v)=>_+(Number(v.amount)||0)/10,0);return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Coin Withdrawals"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage user withdrawal requests"})]}),e.jsx("button",{className:"px-4 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:e.jsx(ja,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Total Requests"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:t.length})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Pending"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"#D97706",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:C})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:["",A.toFixed(2)]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Pending Amount"}),e.jsxs("p",{className:"text-2xl font-light",style:{color:"#EA580C",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:["",F.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"mb-6 flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or ID...",value:l,onChange:_=>o(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),e.jsxs("select",{value:n,onChange:_=>i(_.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"failed",children:"Failed"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:N.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Fb,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No withdrawal requests found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:N.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:["#",_.id]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:_.user_name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:_.user_email})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900 dark:text-gray-100",children:["",((Number(_.amount)||0)/10).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[_.withdrawal_method==="bank"?e.jsx(Nb,{className:"w-4 h-4 text-blue-600"}):e.jsx(si,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:_.withdrawal_method==="bank"?"Bank":"UPI"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[b(_.status),j(_.status)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(_.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>g(_),className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Process"})})]},_.id))})]})})}),u&&c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Process Withdrawal"}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"User"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:c.user_name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.user_email})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Amount"}),e.jsxs("p",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:["",((Number(c.amount)||0)/10).toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[c.amount," coins"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Method"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:c.withdrawal_method==="bank"?"Bank Transfer":"UPI Transfer"})]})]}),c.withdrawal_method==="bank"&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Bank Details"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:["Account: ",c.account_holder_name]}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:["Bank: ",c.bank_name]}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:["Account Number: ****",(w=c.account_number)==null?void 0:w.slice(-4)]}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:["IFSC: ",c.ifsc_code]})]}),c.withdrawal_method==="upi"&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"UPI Details"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:["UPI ID: ",c.upi_id]})]})]}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),e.jsxs("select",{value:m.status,onChange:_=>f(v=>({...v,status:_.target.value})),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"failed",children:"Failed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Transaction ID (Optional)"}),e.jsx("input",{type:"text",value:m.transaction_id,onChange:_=>f(v=>({...v,transaction_id:_.target.value})),placeholder:"Enter transaction ID",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Admin Notes (Optional)"}),e.jsx("textarea",{value:m.admin_notes,onChange:_=>f(v=>({...v,admin_notes:_.target.value})),rows:3,placeholder:"Add notes...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),(m.status==="rejected"||m.status==="failed")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-red-700 dark:text-red-300 mb-2",children:"Rejection Reason *"}),e.jsx("textarea",{value:m.rejection_reason,onChange:_=>f(v=>({...v,rejection_reason:_.target.value})),rows:3,required:!0,placeholder:`Reason for ${m.status==="rejected"?"rejection":"failure"}...`,className:"w-full px-4 py-2 border border-red-300 dark:border-red-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Process Withdrawal"}),e.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})]})})]})}function L9(){const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState(""),[l,o]=y.useState({name:"",values:""}),[c,d]=y.useState({});y.useEffect(()=>{(async()=>{if(n){try{const b=await(await fetch(`/api/products/${n}/variant-options`)).json();b!=null&&b.success&&Array.isArray(b.data)&&s(b.data)}catch{}try{const b=await(await fetch(`/api/products/${n}/variants`)).json();b!=null&&b.success&&Array.isArray(b.data)&&a(b.data)}catch{}}})()},[n]);const u=()=>{l.name&&l.values&&(s([...t,{name:l.name,values:l.values.split(",").map(g=>g.trim())}]),o({name:"",values:""}))},p=async()=>{const j=await(await fetch(`/api/products/${n}/variant-options`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({options:t})})).json();console.log("Options saved:",j)},m=async()=>{const j=await(await fetch(`/api/products/${n}/variants/generate`,{method:"POST"})).json();j.success&&(a(j.data),alert(`Generated ${j.data.length} variants`))},f=(g,j,b)=>{a(N=>N.map(C=>C.id===g?{...C,[j]:b}:C))},h=async g=>{const j=r.find(b=>b.id===g);j&&await fetch(`/api/variants/${g}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sku:j.sku,attributes:j.attributes,price:j.price?Number(j.price):null,mrp:j.mrp?Number(j.mrp):null,image_url:j.image_url||null,barcode:j.barcode||null,is_active:j.is_active})})},x=async g=>{const j=c[g];j&&await fetch(`/api/inventory/${n}/${g}/low-threshold`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threshold:Number(j)})})};return e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Product Variants"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage product variants with multiple sizes or colors"})]}),e.jsx("div",{className:"metric-card",style:{backgroundColor:"var(--arctic-blue-lighter)",borderColor:"var(--arctic-blue-primary)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",style:{color:"var(--arctic-blue-primary-dark)"},children:"Product Variants Page"}),e.jsxs("p",{className:"text-sm",style:{color:"var(--text-muted)",letterSpacing:"0.02em"},children:["Yeh page sirf un products ke liye hai jinke multiple variants hain (jaise: Size S, M, L ya different Colors).",e.jsx("br",{}),e.jsx("strong",{children:"Agar aapke products mein sirf ek hi size hai, to is page ki zaroorat nahi hai."}),e.jsx("br",{}),"Single-size products ko directly ",e.jsx("a",{href:"/admin/products",className:"underline font-semibold",style:{color:"var(--arctic-blue-primary-dark)"},children:"Products page"})," se manage karein."]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product ID"}),e.jsx("input",{type:"text",value:n,onChange:g=>i(g.target.value),className:"border p-2 rounded dark:bg-gray-800 dark:border-gray-600 dark:text-white",placeholder:"Enter product ID"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Variant Options"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",placeholder:"Option name (e.g., Size)",value:l.name,onChange:g=>o({...l,name:g.target.value}),className:"border p-2 rounded"}),e.jsx("input",{type:"text",placeholder:"Values (comma-separated, e.g., S, M, L)",value:l.values,onChange:g=>o({...l,values:g.target.value}),className:"border p-2 rounded"}),e.jsx("button",{onClick:u,className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Add Option"})]}),e.jsx("button",{onClick:p,className:"px-4 py-2 bg-green-500 text-white rounded",children:"Save Options"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Generated Variants"}),e.jsx("button",{onClick:m,className:"px-4 py-2 bg-purple-500 text-white rounded mb-4",children:"Generate Variants"}),e.jsx("div",{className:"space-y-3",children:r.map(g=>e.jsxs("div",{className:"border p-3 rounded space-y-2",children:[e.jsxs("div",{className:"text-sm",children:["Attributes: ",JSON.stringify(g.attributes)]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2 items-center",children:[e.jsx("input",{className:"border p-2 rounded",placeholder:"SKU",value:g.sku||"",onChange:j=>f(g.id,"sku",j.target.value)}),e.jsx("input",{className:"border p-2 rounded",placeholder:"Price",type:"number",value:g.price||"",onChange:j=>f(g.id,"price",j.target.value)}),e.jsx("input",{className:"border p-2 rounded",placeholder:"MRP",type:"number",value:g.mrp||"",onChange:j=>f(g.id,"mrp",j.target.value)}),e.jsx("input",{className:"border p-2 rounded",placeholder:"Barcode",value:g.barcode||"",onChange:j=>f(g.id,"barcode",j.target.value)}),e.jsx("input",{className:"border p-2 rounded",placeholder:"Image URL",value:g.image_url||"",onChange:j=>f(g.id,"image_url",j.target.value)}),e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:!!g.is_active,onChange:j=>f(g.id,"is_active",j.target.checked)})," Active"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>h(g.id),className:"px-3 py-2 bg-green-600 text-white rounded",children:"Save"}),e.jsx("input",{className:"border p-2 rounded w-40",placeholder:"Low stock threshold",value:c[g.id]||"",onChange:j=>d(b=>({...b,[g.id]:j.target.value}))}),e.jsx("button",{onClick:()=>x(g.id),className:"px-3 py-2 bg-indigo-600 text-white rounded",children:"Set Threshold"})]})]},g.id))})]})]})}function O9(){const{notify:t}=Sr(),[s,r]=y.useState(""),[a,n]=y.useState(null),[i,l]=y.useState([]),[o,c]=y.useState({variantId:"",delta:"",reason:""}),d=async()=>{const x=await(await fetch(`/api/inventory/${s}/summary`)).json();x.success?n(x.data):t("error","Failed to fetch summary")},u=async()=>{const x=await(await fetch("/api/inventory/low-stock")).json();x.success&&l(x.data)},[p,m]=y.useState(!1),f=async()=>{const[h,x]=o.variantId.split(":");(await(await fetch(`/api/inventory/${h}/${x}/adjust`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delta:Number(o.delta),reason:o.reason||"manual"})})).json()).success?(t("success","Stock adjusted"),c({variantId:"",delta:"",reason:""}),d()):t("error","Failed to adjust stock")};return y.useEffect(()=>{u()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Inventory Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Track and manage product inventory levels"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Product Inventory Summary"}),e.jsx("input",{type:"text",value:s,onChange:h=>r(h.target.value),placeholder:"Enter product ID",className:"border p-2 rounded mr-2"}),e.jsx("button",{onClick:d,className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Fetch Summary"}),a&&e.jsxs("div",{className:"mt-4 border p-4 rounded",children:[e.jsxs("p",{children:["Available: ",a.available]}),e.jsxs("p",{children:["Total: ",a.total]}),e.jsxs("p",{children:["Low Stock Variants: ",a.low_variants]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Adjust Stock"}),e.jsx("input",{type:"text",value:o.variantId,onChange:h=>c({...o,variantId:h.target.value}),placeholder:"productId:variantId",className:"border p-2 rounded mr-2"}),e.jsx("input",{type:"number",value:o.delta,onChange:h=>c({...o,delta:h.target.value}),placeholder:"Change in quantity",className:"border p-2 rounded mr-2"}),e.jsx("input",{type:"text",value:o.reason,onChange:h=>c({...o,reason:h.target.value}),placeholder:"Reason",className:"border p-2 rounded mr-2"}),e.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-green-500 text-white rounded",children:"Adjust Stock"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Low Stock Items"}),i.length===0?e.jsx("p",{className:"text-gray-500",children:"No low stock items"}):e.jsx("div",{className:"space-y-2",children:i.map(h=>e.jsxs("div",{className:"border p-3 rounded",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"SKU:"})," ",h.sku]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Available:"})," ",h.quantity]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Threshold:"})," ",h.low_stock_threshold]})]},h.variant_id))})]})]}),e.jsx($a,{open:p,onClose:()=>m(!1),onConfirm:f,title:"Adjust stock?",description:"Please confirm updating stock levels.",confirmText:"Adjust"})]})}function I9(){const[t,s]=y.useState([]),[r,a]=y.useState([]),[n,i]=y.useState({name:"",channel:"amazon",credentials:{api_key:"",api_secret:""}}),l=async c=>{const u=await(await fetch(`/api/marketplaces/${c}/accounts`)).json();u.success&&(c==="amazon"?s(u.data):a(u.data))},o=async()=>{const c=n.channel==="amazon"?"/api/marketplaces/amazon/accounts":"/api/marketplaces/flipkart/accounts";(await(await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n.name,credentials:n.credentials})})).json()).success&&(alert("Account created successfully"),i({name:"",channel:"amazon",credentials:{api_key:"",api_secret:""}}),l(n.channel))};return y.useEffect(()=>{l("amazon"),l("flipkart")},[]),e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Marketplace Integrations"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Connect and manage marketplace accounts"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Add New Marketplace Account"}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsxs("select",{value:n.channel,onChange:c=>i({...n,channel:c.target.value}),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"},children:[e.jsx("option",{value:"amazon",children:"Amazon"}),e.jsx("option",{value:"flipkart",children:"Flipkart"})]}),e.jsx("input",{type:"text",value:n.name,onChange:c=>i({...n,name:c.target.value}),placeholder:"Account name",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("input",{type:"text",value:n.credentials.api_key,onChange:c=>i({...n,credentials:{...n.credentials,api_key:c.target.value}}),placeholder:"API Key",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("input",{type:"text",value:n.credentials.api_secret,onChange:c=>i({...n,credentials:{...n.credentials,api_secret:c.target.value}}),placeholder:"API Secret",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("button",{onClick:o,className:"btn-primary",children:"Create Account"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Amazon Accounts"}),t.length===0?e.jsx("p",{style:{color:"var(--text-muted)"},children:"No accounts"}):e.jsx("div",{className:"space-y-3",children:t.map(c=>e.jsxs("div",{className:"border p-4 rounded-xl transition-colors hover:bg-[var(--arctic-blue-lighter)]",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsx("p",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:e.jsx("strong",{children:c.name})}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:c.is_active?"Active":"Inactive"})]},c.id))})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Flipkart Accounts"}),r.length===0?e.jsx("p",{style:{color:"var(--text-muted)"},children:"No accounts"}):e.jsx("div",{className:"space-y-3",children:r.map(c=>e.jsxs("div",{className:"border p-4 rounded-xl transition-colors hover:bg-[var(--arctic-blue-lighter)]",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsx("p",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:e.jsx("strong",{children:c.name})}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:c.is_active?"Active":"Inactive"})]},c.id))})]})]})]})}function M9(){const[t,s]=y.useState([]),[r,a]=y.useState({name:"",address:{}}),n=async()=>{const o=await(await fetch("/api/warehouses")).json();o.success&&s(o.data)},i=async()=>{(await(await fetch("/api/warehouses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json()).success&&(alert("Warehouse created"),a({name:"",address:{}}),n())};return y.useEffect(()=>{n()},[]),e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Warehouse Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage your warehouse locations and inventory"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Add Warehouse"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:r.name,onChange:l=>a({...r,name:l.target.value}),placeholder:"Warehouse name",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)] flex-1",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("button",{onClick:i,className:"btn-primary",children:"Create Warehouse"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"All Warehouses"}),t.length===0?e.jsx("p",{style:{color:"var(--text-muted)"},children:"No warehouses"}):e.jsx("div",{className:"space-y-3",children:t.map(l=>e.jsxs("div",{className:"border p-4 rounded-xl transition-colors hover:bg-[var(--arctic-blue-lighter)]",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsx("p",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:e.jsx("strong",{children:l.name})}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:l.is_active?"Active":"Inactive"})]},l.id))})]})]})}function B9(){const[t,s]=y.useState([]),[r,a]=y.useState({staff_id:"",opening_amount:""}),n=async()=>{const o=await(await fetch("/api/pos/transactions")).json();o.success&&s(o.data)},i=async()=>{(await(await fetch("/api/pos/sessions/open",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({staff_id:Number(r.staff_id),opening_amount:Number(r.opening_amount)})})).json()).success&&(alert("POS session opened"),a({staff_id:"",opening_amount:""}))};return y.useEffect(()=>{n()},[]),e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"POS System"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage point of sale transactions and sessions"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Open POS Session"}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsx("input",{type:"number",value:r.staff_id,onChange:l=>a({...r,staff_id:l.target.value}),placeholder:"Staff ID",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("input",{type:"number",value:r.opening_amount,onChange:l=>a({...r,opening_amount:l.target.value}),placeholder:"Opening amount",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("button",{onClick:i,className:"btn-primary",children:"Open Session"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Recent Transactions"}),t.length===0?e.jsx("p",{style:{color:"var(--text-muted)"},children:"No transactions"}):e.jsx("div",{className:"space-y-3",children:t.map(l=>e.jsxs("div",{className:"border p-4 rounded-xl transition-colors hover:bg-[var(--arctic-blue-lighter)]",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsxs("p",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Transaction:"})," ",l.transaction_number]}),e.jsxs("p",{style:{color:"var(--text-secondary)"},children:[e.jsx("strong",{children:"Total:"})," ",l.total]}),e.jsxs("p",{style:{color:"var(--text-secondary)"},children:[e.jsx("strong",{children:"Method:"})," ",l.payment_method]}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:new Date(l.created_at).toLocaleString()})]},l.id))})]})]})}function U9(){const[t,s]=y.useState({page_id:"",access_token:""}),[r,a]=y.useState(null),[n,i]=y.useState([]),[l,o]=y.useState(!1),[c,d]=y.useState(null),[u,p]=y.useState({brand:"Nefol",condition:"new",availability:"in stock"}),[m,f]=y.useState(null),h="http://192.168.1.36:2000",x=y.useMemo(()=>({"Content-Type":"application/json"}),[]),g=async()=>{var S;const v=await(await fetch("/api/fb-shop/config",{method:"POST",headers:x,body:JSON.stringify(t)})).json();(v.success||(S=v.data)!=null&&S.success)&&alert("Configuration saved")},j=async()=>{try{o(!0);const v=await(await fetch("/api/facebook/sync-errors")).json();i((v==null?void 0:v.data)||v||[])}finally{o(!1)}},b=async()=>{try{const v=await(await fetch("/api/facebook/field-mapping")).json(),S=(v==null?void 0:v.data)||v||{};p(R=>({...R,...S}))}catch{}},N=async()=>{try{const v=await(await fetch("/api/facebook/sync/last")).json();f(v)}catch{}};y.useEffect(()=>{j(),b(),N()},[]),y.useEffect(()=>{let _;const v=async()=>{var D;if(!c)return;const R=await(await fetch(`/api/facebook/sync/status/${c}`)).json();a((R==null?void 0:R.data)||R),(D=(R==null?void 0:R.data)||R)!=null&&D.running&&(_=setTimeout(v,500))};return v(),()=>_&&clearTimeout(_)},[c]);const C=async()=>{var R;a(null),d(null);const v=await(await fetch("/api/facebook/sync-products",{method:"POST",headers:x})).json(),S=(R=(v==null?void 0:v.data)||v)==null?void 0:R.jobId;d(S)},A=async()=>{var R;a(null),d(null);const v=await(await fetch("/api/facebook/sync-stock-price",{method:"POST",headers:x,body:JSON.stringify({})})).json(),S=(R=(v==null?void 0:v.data)||v)==null?void 0:R.jobId;d(S)},F=async()=>{await fetch("/api/facebook/sync-errors/clear",{method:"POST"}),await j()},w=async()=>{const _=await fetch("/api/facebook/field-mapping",{method:"POST",headers:x,body:JSON.stringify(u)}),v=await _.json();if(!_.ok)return alert((v==null?void 0:v.error)||"Failed to save mapping");alert("Mapping saved")};return e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"FB Shop Integration"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Sync products with Facebook Shop"})]}),m&&e.jsxs("div",{className:"metric-card",style:{backgroundColor:"var(--arctic-blue-lighter)"},children:[e.jsx("b",{children:"Last auto-sync:"})," ",m.lastRun?new Date(m.lastRun).toLocaleString():"Never",m.result&&m.result.error&&e.jsxs("span",{className:"ml-3 text-red-700",children:["Error: ",m.result.error]})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Facebook/Instagram Shop Integration"}),e.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded",children:e.jsxs("p",{className:"text-yellow-800",children:[e.jsx("strong",{children:"Note:"})," Background sync with progress and a CSV feed are ready. Replace stubs with Graph API calls when credentials are finalized."]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 bg-white rounded border",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Configuration"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Page ID"}),e.jsx("input",{type:"text",value:t.page_id,onChange:_=>s({...t,page_id:_.target.value}),className:"border p-2 rounded w-full",placeholder:"Facebook Page ID"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Access Token"}),e.jsx("input",{type:"text",value:t.access_token,onChange:_=>s({...t,access_token:_.target.value}),className:"border p-2 rounded w-full",placeholder:"Long-lived access token"})]}),e.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Save Configuration"}),e.jsxs("div",{className:"mt-4 text-sm",children:[e.jsx("div",{children:"Catalog Feed URL:"}),e.jsxs("a",{className:"text-blue-600 underline",href:`${h}/api/facebook/catalog.csv`,target:"_blank",rel:"noreferrer",children:[h,"/api/facebook/catalog.csv"]})]})]}),e.jsxs("div",{className:"p-4 bg-white rounded border",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Sync Actions"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{onClick:C,className:"px-4 py-2 bg-slate-900 text-white rounded",children:"Sync All Products"}),e.jsx("button",{onClick:A,className:"px-4 py-2 bg-indigo-600 text-white rounded",children:"Sync Stock & Price"})]}),r&&e.jsxs("div",{className:"mt-4 p-3 bg-slate-50 rounded text-sm",children:[e.jsxs("div",{className:"mb-2",children:["Job: ",r.id," (",r.type,")"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded h-3 overflow-hidden",children:e.jsx("div",{className:"bg-green-600 h-3",style:{width:`${Math.min(100,Math.floor((r.success+r.failed)/Math.max(1,r.total)*100))}%`}})}),e.jsxs("div",{className:"mt-2",children:[r.success+r.failed,"/",r.total," processed  Success: ",r.success,"  Failed: ",r.failed," ",r.running?"(running...)":"(done)"]})]})]})]})]}),e.jsxs("div",{className:"p-4 bg-white rounded border",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Field Mapping"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Brand"}),e.jsx("input",{className:"input",value:u.brand||"",onChange:_=>p({...u,brand:_.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Condition"}),e.jsx("input",{className:"input",value:u.condition||"",onChange:_=>p({...u,condition:_.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Availability"}),e.jsx("input",{className:"input",value:u.availability||"",onChange:_=>p({...u,availability:_.target.value})})]})]}),e.jsx("button",{onClick:w,className:"mt-3 px-4 py-2 bg-slate-900 text-white rounded",children:"Save Mapping"})]}),e.jsxs("div",{className:"p-4 bg-white rounded border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"font-semibold",children:"Sync Errors"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:j,className:"px-3 py-1 border rounded",children:"Refresh"}),e.jsx("button",{onClick:F,className:"px-3 py-1 bg-red-600 text-white rounded",children:"Clear"})]})]}),l?"Loading...":e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pr-4",children:"Time"}),e.jsx("th",{className:"py-2 pr-4",children:"Product ID"}),e.jsx("th",{className:"py-2 pr-4",children:"Code"}),e.jsx("th",{className:"py-2 pr-4",children:"Message"}),e.jsx("th",{className:"py-2 pr-4",children:"Payload"})]})}),e.jsxs("tbody",{children:[n.map(_=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 pr-4",children:new Date(_.created_at).toLocaleString()}),e.jsx("td",{className:"py-2 pr-4",children:_.product_id||"-"}),e.jsx("td",{className:"py-2 pr-4",children:_.code||"-"}),e.jsx("td",{className:"py-2 pr-4",children:_.message||"-"}),e.jsx("td",{className:"py-2 pr-4",children:e.jsx("pre",{className:"whitespace-pre-wrap text-xs",children:_.payload?JSON.stringify(_.payload):"-"})})]},_.id)),n.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"py-2 pr-4",colSpan:5,children:"No errors"})})]})]})})]})]})}function $9(){const t=y.useRef(!1);return y.useEffect(()=>{if(t.current)return;t.current=!0,console.log("?? Initializing admin socket connection..."),Je.connect();const s=Je.subscribe("order_created",h=>{console.log("? New order created:",h),"Notification"in window&&Notification.permission==="granted"&&new Notification("New Order!",{body:`Order #${h.order_number||h.id||"N/A"} received`,icon:"/favicon.ico"})}),r=Je.subscribe("orders_created",h=>{console.log("? Order created (batch):",h)}),a=Je.subscribe("order_updated",h=>{console.log("?? Order updated:",h)}),n=Je.subscribe("orders_updated",h=>{console.log("?? Order updated (batch):",h)}),i=Je.subscribe("user_profile_updated",h=>{console.log("?? User profile updated:",h)}),l=Je.subscribe("users_created",h=>{console.log("?? New user registered:",h)}),o=Je.subscribe("products_created",h=>{console.log("??? Product created:",h)}),c=Je.subscribe("products_updated",h=>{console.log("??? Product updated:",h)}),d=Je.subscribe("products_deleted",h=>{console.log("??? Product deleted:",h)}),u=Je.subscribe("delivery_status_updated",h=>{console.log("?? Delivery status updated:",h)}),p=Je.subscribe("contact_message_created",h=>{console.log("?? New contact message:",h),"Notification"in window&&Notification.permission==="granted"&&new Notification("New Contact Message!",{body:`Message from ${h.name}`,icon:"/favicon.ico"})}),m=Je.subscribe("contact_message_updated",h=>{console.log("?? Contact message updated:",h)}),f=Je.subscribe("update",h=>{var x;h.type==="whatsapp-subscription"&&(console.log("?? New WhatsApp subscription:",h.data),"Notification"in window&&Notification.permission==="granted"&&new Notification("New WhatsApp Subscription!",{body:h.data.message||`New subscription: ${(x=h.data.subscription)==null?void 0:x.phone}`,icon:"/favicon.ico"}))});return"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission(),()=>{s(),r(),a(),n(),i(),l(),o(),c(),d(),u(),p(),m(),f()}},[]),e.jsx(Uk,{children:e.jsx(eS,{children:e.jsxs(gk,{children:[e.jsx(De,{path:"/admin/login",element:e.jsx(i9,{})}),e.jsx(De,{path:"/admin",element:e.jsx($k,{}),children:e.jsxs(De,{element:e.jsx(Z3,{}),children:[e.jsx(De,{index:!0,element:e.jsx(sS,{})}),e.jsx(De,{path:"products",element:e.jsx(x8,{})}),e.jsx(De,{path:"orders",element:e.jsx(rS,{})}),e.jsx(De,{path:"orders/:orderNumber",element:e.jsx(n9,{})}),e.jsx(De,{path:"invoices",element:e.jsx(S8,{})}),e.jsx(De,{path:"invoice-settings",element:e.jsx(T8,{})}),e.jsx(De,{path:"shipments",element:e.jsx(a9,{})}),e.jsx(De,{path:"customers",element:e.jsx(nS,{})}),e.jsx(De,{path:"users",element:e.jsx(iS,{})}),e.jsx(De,{path:"users/:id",element:e.jsx(r9,{})}),e.jsx(De,{path:"categories",element:e.jsx(lS,{})}),e.jsx(De,{path:"tax",element:e.jsx(E8,{})}),e.jsx(De,{path:"returns",element:e.jsx(F8,{})}),e.jsx(De,{path:"payment",element:e.jsx(D8,{})}),e.jsx(De,{path:"analytics",element:e.jsx(h8,{})}),e.jsx(De,{path:"marketing",element:e.jsx(f8,{})}),e.jsx(De,{path:"meta-ads",element:e.jsx(p8,{})}),e.jsx(De,{path:"whatsapp-subscriptions",element:e.jsx(b8,{})}),e.jsx(De,{path:"discounts",element:e.jsx(v8,{})}),e.jsx(De,{path:"facebook",element:e.jsx(j8,{})}),e.jsx(De,{path:"store",element:e.jsx(N8,{})}),e.jsx(De,{path:"google",element:e.jsx(w8,{})}),e.jsx(De,{path:"forms",element:e.jsx(k8,{})}),e.jsx(De,{path:"settings",element:e.jsx(oS,{})}),e.jsx(De,{path:"system/alerts",element:e.jsx(ms,{role:"admin",children:e.jsx(s9,{})})}),e.jsx(De,{path:"system/staff",element:e.jsx(ms,{role:"admin",children:e.jsx(Z8,{})})}),e.jsx(De,{path:"system/roles",element:e.jsx(ms,{role:"admin",children:e.jsx(e9,{})})}),e.jsx(De,{path:"system/audit-logs",element:e.jsx(ms,{role:"admin",children:e.jsx(t9,{})})}),e.jsx(De,{path:"user-profiles",element:e.jsx(M8,{})}),e.jsx(De,{path:"user-notifications",element:e.jsx(B8,{})}),e.jsx(De,{path:"loyalty-program-management",element:e.jsx(U8,{})}),e.jsx(De,{path:"whatsapp-notifications",element:e.jsx(h9,{})}),e.jsx(De,{path:"whatsapp-chat",element:e.jsx(f9,{})}),e.jsx(De,{path:"whatsapp-management",element:e.jsx(p9,{})}),e.jsx(De,{path:"static-pages",element:e.jsx($8,{})}),e.jsx(De,{path:"community-management",element:e.jsx(z8,{})}),e.jsx(De,{path:"homepage-layout",element:e.jsx(V8,{})}),e.jsx(De,{path:"product-collections",element:e.jsx(G8,{})}),e.jsx(De,{path:"cart-checkout",element:e.jsx(Y8,{})}),e.jsx(De,{path:"loyalty-program",element:e.jsx(x9,{})}),e.jsx(De,{path:"affiliate-program",element:e.jsx(X8,{})}),e.jsx(De,{path:"cashback",element:e.jsx(m9,{})}),e.jsx(De,{path:"live-chat",element:e.jsx(g9,{})}),e.jsx(De,{path:"advanced-analytics",element:e.jsx(y9,{})}),e.jsx(De,{path:"form-builder",element:e.jsx(b9,{})}),e.jsx(De,{path:"form-submissions",element:e.jsx(v9,{})}),e.jsx(De,{path:"workflow-automation",element:e.jsx(j9,{})}),e.jsx(De,{path:"customer-segmentation",element:e.jsx(N9,{})}),e.jsx(De,{path:"journey-tracking",element:e.jsx(w9,{})}),e.jsx(De,{path:"actionable-analytics",element:e.jsx(k9,{})}),e.jsx(De,{path:"ai-box",element:e.jsx(S9,{})}),e.jsx(De,{path:"journey-funnel",element:e.jsx(C9,{})}),e.jsx(De,{path:"ai-personalization",element:e.jsx(_9,{})}),e.jsx(De,{path:"custom-audience",element:e.jsx(T9,{})}),e.jsx(De,{path:"omni-channel",element:e.jsx(E9,{})}),e.jsx(De,{path:"api-manager",element:e.jsx(F9,{})}),e.jsx(De,{path:"payment-options",element:e.jsx(A9,{})}),e.jsx(De,{path:"video-manager",element:e.jsx(P9,{})}),e.jsx(De,{path:"cms",element:e.jsx(l9,{})}),e.jsx(De,{path:"blog-requests",element:e.jsx(d9,{})}),e.jsx(De,{path:"affiliate-requests",element:e.jsx(Q8,{})}),e.jsx(De,{path:"contact-messages",element:e.jsx(D9,{})}),e.jsx(De,{path:"coin-withdrawals",element:e.jsx(R9,{})}),e.jsx(De,{path:"product-variants",element:e.jsx(L9,{})}),e.jsx(De,{path:"inventory",element:e.jsx(O9,{})}),e.jsx(De,{path:"marketplaces",element:e.jsx(ms,{role:"admin",children:e.jsx(I9,{})})}),e.jsx(De,{path:"warehouses",element:e.jsx(M9,{})}),e.jsx(De,{path:"pos",element:e.jsx(ms,{anyOf:["pos:read","pos:update"],children:e.jsx(B9,{})})}),e.jsx(De,{path:"fb-shop",element:e.jsx(U9,{})})]})}),e.jsx(De,{path:"*",element:e.jsx(od,{to:"/admin",replace:!0})})]})})})}const z9=kk([{path:"/*",element:e.jsx($9,{})}]);$0.createRoot(document.getElementById("root")).render(e.jsx(ux.StrictMode,{children:e.jsx(Dk,{router:z9})}));
