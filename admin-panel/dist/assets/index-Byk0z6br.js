var Dj=Object.defineProperty;var Rj=(t,s,r)=>s in t?Dj(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var Ca=(t,s,r)=>Rj(t,typeof s!="symbol"?s+"":s,r);function qp(t,s){for(var r=0;r<s.length;r++){const a=s[r];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in t)){const i=Object.getOwnPropertyDescriptor(a,n);i&&Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();function Jp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kp={exports:{}},_d={},Yp={exports:{}},mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oo=Symbol.for("react.element"),Lj=Symbol.for("react.portal"),Oj=Symbol.for("react.fragment"),Ij=Symbol.for("react.strict_mode"),Mj=Symbol.for("react.profiler"),Bj=Symbol.for("react.provider"),$j=Symbol.for("react.context"),Uj=Symbol.for("react.forward_ref"),zj=Symbol.for("react.suspense"),Wj=Symbol.for("react.memo"),Vj=Symbol.for("react.lazy"),Ym=Symbol.iterator;function Hj(t){return t===null||typeof t!="object"?null:(t=Ym&&t[Ym]||t["@@iterator"],typeof t=="function"?t:null)}var Xp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qp=Object.assign,Zp={};function al(t,s,r){this.props=t,this.context=s,this.refs=Zp,this.updater=r||Xp}al.prototype.isReactComponent={};al.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};al.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function eg(){}eg.prototype=al.prototype;function hx(t,s,r){this.props=t,this.context=s,this.refs=Zp,this.updater=r||Xp}var fx=hx.prototype=new eg;fx.constructor=hx;Qp(fx,al.prototype);fx.isPureReactComponent=!0;var Xm=Array.isArray,tg=Object.prototype.hasOwnProperty,px={current:null},sg={key:!0,ref:!0,__self:!0,__source:!0};function rg(t,s,r){var a,n={},i=null,l=null;if(s!=null)for(a in s.ref!==void 0&&(l=s.ref),s.key!==void 0&&(i=""+s.key),s)tg.call(s,a)&&!sg.hasOwnProperty(a)&&(n[a]=s[a]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(t&&t.defaultProps)for(a in o=t.defaultProps,o)n[a]===void 0&&(n[a]=o[a]);return{$$typeof:Oo,type:t,key:i,ref:l,props:n,_owner:px.current}}function Gj(t,s){return{$$typeof:Oo,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function gx(t){return typeof t=="object"&&t!==null&&t.$$typeof===Oo}function qj(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var Qm=/\/+/g;function Zd(t,s){return typeof t=="object"&&t!==null&&t.key!=null?qj(""+t.key):s.toString(36)}function Sc(t,s,r,a,n){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Oo:case Lj:l=!0}}if(l)return l=t,n=n(l),t=a===""?"."+Zd(l,0):a,Xm(n)?(r="",t!=null&&(r=t.replace(Qm,"$&/")+"/"),Sc(n,s,r,"",function(d){return d})):n!=null&&(gx(n)&&(n=Gj(n,r+(!n.key||l&&l.key===n.key?"":(""+n.key).replace(Qm,"$&/")+"/")+t)),s.push(n)),1;if(l=0,a=a===""?".":a+":",Xm(t))for(var o=0;o<t.length;o++){i=t[o];var c=a+Zd(i,o);l+=Sc(i,s,r,c,n)}else if(c=Hj(t),typeof c=="function")for(t=c.call(t),o=0;!(i=t.next()).done;)i=i.value,c=a+Zd(i,o++),l+=Sc(i,s,r,c,n);else if(i==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return l}function Jo(t,s,r){if(t==null)return t;var a=[],n=0;return Sc(t,a,"","",function(i){return s.call(r,i,n++)}),a}function Jj(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var tr={current:null},Cc={transition:null},Kj={ReactCurrentDispatcher:tr,ReactCurrentBatchConfig:Cc,ReactCurrentOwner:px};function ag(){throw Error("act(...) is not supported in production builds of React.")}mt.Children={map:Jo,forEach:function(t,s,r){Jo(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return Jo(t,function(){s++}),s},toArray:function(t){return Jo(t,function(s){return s})||[]},only:function(t){if(!gx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};mt.Component=al;mt.Fragment=Oj;mt.Profiler=Mj;mt.PureComponent=hx;mt.StrictMode=Ij;mt.Suspense=zj;mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kj;mt.act=ag;mt.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var a=Qp({},t.props),n=t.key,i=t.ref,l=t._owner;if(s!=null){if(s.ref!==void 0&&(i=s.ref,l=px.current),s.key!==void 0&&(n=""+s.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in s)tg.call(s,c)&&!sg.hasOwnProperty(c)&&(a[c]=s[c]===void 0&&o!==void 0?o[c]:s[c])}var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];a.children=o}return{$$typeof:Oo,type:t.type,key:n,ref:i,props:a,_owner:l}};mt.createContext=function(t){return t={$$typeof:$j,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Bj,_context:t},t.Consumer=t};mt.createElement=rg;mt.createFactory=function(t){var s=rg.bind(null,t);return s.type=t,s};mt.createRef=function(){return{current:null}};mt.forwardRef=function(t){return{$$typeof:Uj,render:t}};mt.isValidElement=gx;mt.lazy=function(t){return{$$typeof:Vj,_payload:{_status:-1,_result:t},_init:Jj}};mt.memo=function(t,s){return{$$typeof:Wj,type:t,compare:s===void 0?null:s}};mt.startTransition=function(t){var s=Cc.transition;Cc.transition={};try{t()}finally{Cc.transition=s}};mt.unstable_act=ag;mt.useCallback=function(t,s){return tr.current.useCallback(t,s)};mt.useContext=function(t){return tr.current.useContext(t)};mt.useDebugValue=function(){};mt.useDeferredValue=function(t){return tr.current.useDeferredValue(t)};mt.useEffect=function(t,s){return tr.current.useEffect(t,s)};mt.useId=function(){return tr.current.useId()};mt.useImperativeHandle=function(t,s,r){return tr.current.useImperativeHandle(t,s,r)};mt.useInsertionEffect=function(t,s){return tr.current.useInsertionEffect(t,s)};mt.useLayoutEffect=function(t,s){return tr.current.useLayoutEffect(t,s)};mt.useMemo=function(t,s){return tr.current.useMemo(t,s)};mt.useReducer=function(t,s,r){return tr.current.useReducer(t,s,r)};mt.useRef=function(t){return tr.current.useRef(t)};mt.useState=function(t){return tr.current.useState(t)};mt.useSyncExternalStore=function(t,s,r){return tr.current.useSyncExternalStore(t,s,r)};mt.useTransition=function(){return tr.current.useTransition()};mt.version="18.3.1";Yp.exports=mt;var b=Yp.exports;const yx=Jp(b),Yj=qp({__proto__:null,default:yx},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xj=b,Qj=Symbol.for("react.element"),Zj=Symbol.for("react.fragment"),e1=Object.prototype.hasOwnProperty,t1=Xj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s1={key:!0,ref:!0,__self:!0,__source:!0};function ng(t,s,r){var a,n={},i=null,l=null;r!==void 0&&(i=""+r),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(l=s.ref);for(a in s)e1.call(s,a)&&!s1.hasOwnProperty(a)&&(n[a]=s[a]);if(t&&t.defaultProps)for(a in s=t.defaultProps,s)n[a]===void 0&&(n[a]=s[a]);return{$$typeof:Qj,type:t,key:i,ref:l,props:n,_owner:t1.current}}_d.Fragment=Zj;_d.jsx=ng;_d.jsxs=ng;Kp.exports=_d;var e=Kp.exports,J0={},ig={exports:{}},Nr={},lg={exports:{}},og={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(D,P){var W=D.length;D.push(P);e:for(;0<W;){var ee=W-1>>>1,M=D[ee];if(0<n(M,P))D[ee]=P,D[W]=M,W=ee;else break e}}function r(D){return D.length===0?null:D[0]}function a(D){if(D.length===0)return null;var P=D[0],W=D.pop();if(W!==P){D[0]=W;e:for(var ee=0,M=D.length,U=M>>>1;ee<U;){var q=2*(ee+1)-1,Y=D[q],K=q+1,le=D[K];if(0>n(Y,W))K<M&&0>n(le,Y)?(D[ee]=le,D[K]=W,ee=K):(D[ee]=Y,D[q]=W,ee=q);else if(K<M&&0>n(le,W))D[ee]=le,D[K]=W,ee=K;else break e}}return P}function n(D,P){var W=D.sortIndex-P.sortIndex;return W!==0?W:D.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,p=null,h=3,g=!1,x=!1,f=!1,m=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var P=r(d);P!==null;){if(P.callback===null)a(d);else if(P.startTime<=D)a(d),P.sortIndex=P.expirationTime,s(c,P);else break;P=r(d)}}function S(D){if(f=!1,w(D),!x)if(r(c)!==null)x=!0,V(F);else{var P=r(d);P!==null&&Z(S,P.startTime-D)}}function F(D,P){x=!1,f&&(f=!1,j(A),A=-1),g=!0;var W=h;try{for(w(P),p=r(c);p!==null&&(!(p.expirationTime>P)||D&&!R());){var ee=p.callback;if(typeof ee=="function"){p.callback=null,h=p.priorityLevel;var M=ee(p.expirationTime<=P);P=t.unstable_now(),typeof M=="function"?p.callback=M:p===r(c)&&a(c),w(P)}else a(c);p=r(c)}if(p!==null)var U=!0;else{var q=r(d);q!==null&&Z(S,q.startTime-P),U=!1}return U}finally{p=null,h=W,g=!1}}var E=!1,k=null,A=-1,y=5,N=-1;function R(){return!(t.unstable_now()-N<y)}function T(){if(k!==null){var D=t.unstable_now();N=D;var P=!0;try{P=k(!0,D)}finally{P?z():(E=!1,k=null)}}else E=!1}var z;if(typeof v=="function")z=function(){v(T)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,O=L.port2;L.port1.onmessage=T,z=function(){O.postMessage(null)}}else z=function(){m(T,0)};function V(D){k=D,E||(E=!0,z())}function Z(D,P){A=m(function(){D(t.unstable_now())},P)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,V(F))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(D){switch(h){case 1:case 2:case 3:var P=3;break;default:P=h}var W=h;h=P;try{return D()}finally{h=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,P){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var W=h;h=D;try{return P()}finally{h=W}},t.unstable_scheduleCallback=function(D,P,W){var ee=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ee+W:ee):W=ee,D){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=W+M,D={id:u++,callback:P,priorityLevel:D,startTime:W,expirationTime:M,sortIndex:-1},W>ee?(D.sortIndex=W,s(d,D),r(c)===null&&D===r(d)&&(f?(j(A),A=-1):f=!0,Z(S,W-ee))):(D.sortIndex=M,s(c,D),x||g||(x=!0,V(F))),D},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(D){var P=h;return function(){var W=h;h=P;try{return D.apply(this,arguments)}finally{h=W}}}})(og);lg.exports=og;var r1=lg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a1=b,vr=r1;function Ee(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cg=new Set,so={};function ui(t,s){Ji(t,s),Ji(t+"Capture",s)}function Ji(t,s){for(so[t]=s,t=0;t<s.length;t++)cg.add(s[t])}var Ba=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),K0=Object.prototype.hasOwnProperty,n1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zm={},eh={};function i1(t){return K0.call(eh,t)?!0:K0.call(Zm,t)?!1:n1.test(t)?eh[t]=!0:(Zm[t]=!0,!1)}function l1(t,s,r,a){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function o1(t,s,r,a){if(s===null||typeof s>"u"||l1(t,s,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function sr(t,s,r,a,n,i,l){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=i,this.removeEmptyString=l}var Fs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Fs[t]=new sr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];Fs[s]=new sr(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Fs[t]=new sr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Fs[t]=new sr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Fs[t]=new sr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Fs[t]=new sr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Fs[t]=new sr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Fs[t]=new sr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Fs[t]=new sr(t,5,!1,t.toLowerCase(),null,!1,!1)});var bx=/[\-:]([a-z])/g;function vx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(bx,vx);Fs[s]=new sr(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(bx,vx);Fs[s]=new sr(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(bx,vx);Fs[s]=new sr(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Fs[t]=new sr(t,1,!1,t.toLowerCase(),null,!1,!1)});Fs.xlinkHref=new sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Fs[t]=new sr(t,1,!1,t.toLowerCase(),null,!0,!0)});function jx(t,s,r,a){var n=Fs.hasOwnProperty(s)?Fs[s]:null;(n!==null?n.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(o1(s,r,n,a)&&(r=null),a||n===null?i1(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):n.mustUseProperty?t[n.propertyName]=r===null?n.type===3?!1:"":r:(s=n.attributeName,a=n.attributeNamespace,r===null?t.removeAttribute(s):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,a?t.setAttributeNS(a,s,r):t.setAttribute(s,r))))}var Ga=a1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ko=Symbol.for("react.element"),ki=Symbol.for("react.portal"),Si=Symbol.for("react.fragment"),wx=Symbol.for("react.strict_mode"),Y0=Symbol.for("react.profiler"),dg=Symbol.for("react.provider"),ug=Symbol.for("react.context"),Nx=Symbol.for("react.forward_ref"),X0=Symbol.for("react.suspense"),Q0=Symbol.for("react.suspense_list"),kx=Symbol.for("react.memo"),tn=Symbol.for("react.lazy"),xg=Symbol.for("react.offscreen"),th=Symbol.iterator;function hl(t){return t===null||typeof t!="object"?null:(t=th&&t[th]||t["@@iterator"],typeof t=="function"?t:null)}var Gt=Object.assign,e0;function Cl(t){if(e0===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);e0=s&&s[1]||""}return`
`+e0+t}var t0=!1;function s0(t,s){if(!t||t0)return"";t0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(d){var a=d}Reflect.construct(t,[],s)}else{try{s.call()}catch(d){a=d}t.call(s.prototype)}else{try{throw Error()}catch(d){a=d}t()}}catch(d){if(d&&a&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),i=a.stack.split(`
`),l=n.length-1,o=i.length-1;1<=l&&0<=o&&n[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(n[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||n[l]!==i[o]){var c=`
`+n[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{t0=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Cl(t):""}function c1(t){switch(t.tag){case 5:return Cl(t.type);case 16:return Cl("Lazy");case 13:return Cl("Suspense");case 19:return Cl("SuspenseList");case 0:case 2:case 15:return t=s0(t.type,!1),t;case 11:return t=s0(t.type.render,!1),t;case 1:return t=s0(t.type,!0),t;default:return""}}function Z0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Si:return"Fragment";case ki:return"Portal";case Y0:return"Profiler";case wx:return"StrictMode";case X0:return"Suspense";case Q0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ug:return(t.displayName||"Context")+".Consumer";case dg:return(t._context.displayName||"Context")+".Provider";case Nx:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kx:return s=t.displayName||null,s!==null?s:Z0(t.type)||"Memo";case tn:s=t._payload,t=t._init;try{return Z0(t(s))}catch{}}return null}function d1(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z0(s);case 8:return s===wx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function kn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mg(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function u1(t){var s=mg(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),a=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,i=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return n.call(this)},set:function(l){a=""+l,i.call(this,l)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(l){a=""+l},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Yo(t){t._valueTracker||(t._valueTracker=u1(t))}function hg(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),a="";return t&&(a=mg(t)?t.checked?"true":"false":t.value),t=a,t!==r?(s.setValue(t),!0):!1}function Wc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function eu(t,s){var r=s.checked;return Gt({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function sh(t,s){var r=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;r=kn(s.value!=null?s.value:r),t._wrapperState={initialChecked:a,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function fg(t,s){s=s.checked,s!=null&&jx(t,"checked",s,!1)}function tu(t,s){fg(t,s);var r=kn(s.value),a=s.type;if(r!=null)a==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?su(t,s.type,r):s.hasOwnProperty("defaultValue")&&su(t,s.type,kn(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function rh(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function su(t,s,r){(s!=="number"||Wc(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var _l=Array.isArray;function Ii(t,s,r,a){if(t=t.options,s){s={};for(var n=0;n<r.length;n++)s["$"+r[n]]=!0;for(r=0;r<t.length;r++)n=s.hasOwnProperty("$"+t[r].value),t[r].selected!==n&&(t[r].selected=n),n&&a&&(t[r].defaultSelected=!0)}else{for(r=""+kn(r),s=null,n=0;n<t.length;n++){if(t[n].value===r){t[n].selected=!0,a&&(t[n].defaultSelected=!0);return}s!==null||t[n].disabled||(s=t[n])}s!==null&&(s.selected=!0)}}function ru(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return Gt({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ah(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(Ee(92));if(_l(r)){if(1<r.length)throw Error(Ee(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:kn(r)}}function pg(t,s){var r=kn(s.value),a=kn(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),a!=null&&(t.defaultValue=""+a)}function nh(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function gg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function au(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?gg(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xo,yg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,a,n){MSApp.execUnsafeLocalFunction(function(){return t(s,r,a,n)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Xo=Xo||document.createElement("div"),Xo.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Xo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function ro(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var Il={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},x1=["Webkit","ms","Moz","O"];Object.keys(Il).forEach(function(t){x1.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Il[s]=Il[t]})});function bg(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||Il.hasOwnProperty(t)&&Il[t]?(""+s).trim():s+"px"}function vg(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var a=r.indexOf("--")===0,n=bg(r,s[r],a);r==="float"&&(r="cssFloat"),a?t.setProperty(r,n):t[r]=n}}var m1=Gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nu(t,s){if(s){if(m1[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(Ee(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(Ee(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(Ee(61))}if(s.style!=null&&typeof s.style!="object")throw Error(Ee(62))}}function iu(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lu=null;function Sx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ou=null,Mi=null,Bi=null;function ih(t){if(t=Bo(t)){if(typeof ou!="function")throw Error(Ee(280));var s=t.stateNode;s&&(s=Pd(s),ou(t.stateNode,t.type,s))}}function jg(t){Mi?Bi?Bi.push(t):Bi=[t]:Mi=t}function wg(){if(Mi){var t=Mi,s=Bi;if(Bi=Mi=null,ih(t),s)for(t=0;t<s.length;t++)ih(s[t])}}function Ng(t,s){return t(s)}function kg(){}var r0=!1;function Sg(t,s,r){if(r0)return t(s,r);r0=!0;try{return Ng(t,s,r)}finally{r0=!1,(Mi!==null||Bi!==null)&&(kg(),wg())}}function ao(t,s){var r=t.stateNode;if(r===null)return null;var a=Pd(r);if(a===null)return null;r=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Ee(231,s,typeof r));return r}var cu=!1;if(Ba)try{var fl={};Object.defineProperty(fl,"passive",{get:function(){cu=!0}}),window.addEventListener("test",fl,fl),window.removeEventListener("test",fl,fl)}catch{cu=!1}function h1(t,s,r,a,n,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{s.apply(r,d)}catch(u){this.onError(u)}}var Ml=!1,Vc=null,Hc=!1,du=null,f1={onError:function(t){Ml=!0,Vc=t}};function p1(t,s,r,a,n,i,l,o,c){Ml=!1,Vc=null,h1.apply(f1,arguments)}function g1(t,s,r,a,n,i,l,o,c){if(p1.apply(this,arguments),Ml){if(Ml){var d=Vc;Ml=!1,Vc=null}else throw Error(Ee(198));Hc||(Hc=!0,du=d)}}function xi(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function Cg(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function lh(t){if(xi(t)!==t)throw Error(Ee(188))}function y1(t){var s=t.alternate;if(!s){if(s=xi(t),s===null)throw Error(Ee(188));return s!==t?null:t}for(var r=t,a=s;;){var n=r.return;if(n===null)break;var i=n.alternate;if(i===null){if(a=n.return,a!==null){r=a;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return lh(n),t;if(i===a)return lh(n),s;i=i.sibling}throw Error(Ee(188))}if(r.return!==a.return)r=n,a=i;else{for(var l=!1,o=n.child;o;){if(o===r){l=!0,r=n,a=i;break}if(o===a){l=!0,a=n,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,a=n;break}if(o===a){l=!0,a=i,r=n;break}o=o.sibling}if(!l)throw Error(Ee(189))}}if(r.alternate!==a)throw Error(Ee(190))}if(r.tag!==3)throw Error(Ee(188));return r.stateNode.current===r?t:s}function _g(t){return t=y1(t),t!==null?Tg(t):null}function Tg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Tg(t);if(s!==null)return s;t=t.sibling}return null}var Eg=vr.unstable_scheduleCallback,oh=vr.unstable_cancelCallback,b1=vr.unstable_shouldYield,v1=vr.unstable_requestPaint,ts=vr.unstable_now,j1=vr.unstable_getCurrentPriorityLevel,Cx=vr.unstable_ImmediatePriority,Ag=vr.unstable_UserBlockingPriority,Gc=vr.unstable_NormalPriority,w1=vr.unstable_LowPriority,Fg=vr.unstable_IdlePriority,Td=null,ma=null;function N1(t){if(ma&&typeof ma.onCommitFiberRoot=="function")try{ma.onCommitFiberRoot(Td,t,void 0,(t.current.flags&128)===128)}catch{}}var ta=Math.clz32?Math.clz32:C1,k1=Math.log,S1=Math.LN2;function C1(t){return t>>>=0,t===0?32:31-(k1(t)/S1|0)|0}var Qo=64,Zo=4194304;function Tl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qc(t,s){var r=t.pendingLanes;if(r===0)return 0;var a=0,n=t.suspendedLanes,i=t.pingedLanes,l=r&268435455;if(l!==0){var o=l&~n;o!==0?a=Tl(o):(i&=l,i!==0&&(a=Tl(i)))}else l=r&~n,l!==0?a=Tl(l):i!==0&&(a=Tl(i));if(a===0)return 0;if(s!==0&&s!==a&&!(s&n)&&(n=a&-a,i=s&-s,n>=i||n===16&&(i&4194240)!==0))return s;if(a&4&&(a|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=a;0<s;)r=31-ta(s),n=1<<r,a|=t[r],s&=~n;return a}function _1(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function T1(t,s){for(var r=t.suspendedLanes,a=t.pingedLanes,n=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-ta(i),o=1<<l,c=n[l];c===-1?(!(o&r)||o&a)&&(n[l]=_1(o,s)):c<=s&&(t.expiredLanes|=o),i&=~o}}function uu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Pg(){var t=Qo;return Qo<<=1,!(Qo&4194240)&&(Qo=64),t}function a0(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function Io(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-ta(s),t[s]=r}function E1(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<r;){var n=31-ta(r),i=1<<n;s[n]=0,a[n]=-1,t[n]=-1,r&=~i}}function _x(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var a=31-ta(r),n=1<<a;n&s|t[a]&s&&(t[a]|=s),r&=~n}}var Ft=0;function Dg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Rg,Tx,Lg,Og,Ig,xu=!1,ec=[],mn=null,hn=null,fn=null,no=new Map,io=new Map,an=[],A1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ch(t,s){switch(t){case"focusin":case"focusout":mn=null;break;case"dragenter":case"dragleave":hn=null;break;case"mouseover":case"mouseout":fn=null;break;case"pointerover":case"pointerout":no.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":io.delete(s.pointerId)}}function pl(t,s,r,a,n,i){return t===null||t.nativeEvent!==i?(t={blockedOn:s,domEventName:r,eventSystemFlags:a,nativeEvent:i,targetContainers:[n]},s!==null&&(s=Bo(s),s!==null&&Tx(s)),t):(t.eventSystemFlags|=a,s=t.targetContainers,n!==null&&s.indexOf(n)===-1&&s.push(n),t)}function F1(t,s,r,a,n){switch(s){case"focusin":return mn=pl(mn,t,s,r,a,n),!0;case"dragenter":return hn=pl(hn,t,s,r,a,n),!0;case"mouseover":return fn=pl(fn,t,s,r,a,n),!0;case"pointerover":var i=n.pointerId;return no.set(i,pl(no.get(i)||null,t,s,r,a,n)),!0;case"gotpointercapture":return i=n.pointerId,io.set(i,pl(io.get(i)||null,t,s,r,a,n)),!0}return!1}function Mg(t){var s=Wn(t.target);if(s!==null){var r=xi(s);if(r!==null){if(s=r.tag,s===13){if(s=Cg(r),s!==null){t.blockedOn=s,Ig(t.priority,function(){Lg(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _c(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=mu(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var a=new r.constructor(r.type,r);lu=a,r.target.dispatchEvent(a),lu=null}else return s=Bo(r),s!==null&&Tx(s),t.blockedOn=r,!1;s.shift()}return!0}function dh(t,s,r){_c(t)&&r.delete(s)}function P1(){xu=!1,mn!==null&&_c(mn)&&(mn=null),hn!==null&&_c(hn)&&(hn=null),fn!==null&&_c(fn)&&(fn=null),no.forEach(dh),io.forEach(dh)}function gl(t,s){t.blockedOn===s&&(t.blockedOn=null,xu||(xu=!0,vr.unstable_scheduleCallback(vr.unstable_NormalPriority,P1)))}function lo(t){function s(n){return gl(n,t)}if(0<ec.length){gl(ec[0],t);for(var r=1;r<ec.length;r++){var a=ec[r];a.blockedOn===t&&(a.blockedOn=null)}}for(mn!==null&&gl(mn,t),hn!==null&&gl(hn,t),fn!==null&&gl(fn,t),no.forEach(s),io.forEach(s),r=0;r<an.length;r++)a=an[r],a.blockedOn===t&&(a.blockedOn=null);for(;0<an.length&&(r=an[0],r.blockedOn===null);)Mg(r),r.blockedOn===null&&an.shift()}var $i=Ga.ReactCurrentBatchConfig,Jc=!0;function D1(t,s,r,a){var n=Ft,i=$i.transition;$i.transition=null;try{Ft=1,Ex(t,s,r,a)}finally{Ft=n,$i.transition=i}}function R1(t,s,r,a){var n=Ft,i=$i.transition;$i.transition=null;try{Ft=4,Ex(t,s,r,a)}finally{Ft=n,$i.transition=i}}function Ex(t,s,r,a){if(Jc){var n=mu(t,s,r,a);if(n===null)h0(t,s,a,Kc,r),ch(t,a);else if(F1(n,t,s,r,a))a.stopPropagation();else if(ch(t,a),s&4&&-1<A1.indexOf(t)){for(;n!==null;){var i=Bo(n);if(i!==null&&Rg(i),i=mu(t,s,r,a),i===null&&h0(t,s,a,Kc,r),i===n)break;n=i}n!==null&&a.stopPropagation()}else h0(t,s,a,null,r)}}var Kc=null;function mu(t,s,r,a){if(Kc=null,t=Sx(a),t=Wn(t),t!==null)if(s=xi(t),s===null)t=null;else if(r=s.tag,r===13){if(t=Cg(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Kc=t,null}function Bg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(j1()){case Cx:return 1;case Ag:return 4;case Gc:case w1:return 16;case Fg:return 536870912;default:return 16}default:return 16}}var on=null,Ax=null,Tc=null;function $g(){if(Tc)return Tc;var t,s=Ax,r=s.length,a,n="value"in on?on.value:on.textContent,i=n.length;for(t=0;t<r&&s[t]===n[t];t++);var l=r-t;for(a=1;a<=l&&s[r-a]===n[i-a];a++);return Tc=n.slice(t,1<a?1-a:void 0)}function Ec(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function tc(){return!0}function uh(){return!1}function kr(t){function s(r,a,n,i,l){this._reactName=r,this._targetInst=n,this.type=a,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?tc:uh,this.isPropagationStopped=uh,this}return Gt(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=tc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=tc)},persist:function(){},isPersistent:tc}),s}var nl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fx=kr(nl),Mo=Gt({},nl,{view:0,detail:0}),L1=kr(Mo),n0,i0,yl,Ed=Gt({},Mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Px,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yl&&(yl&&t.type==="mousemove"?(n0=t.screenX-yl.screenX,i0=t.screenY-yl.screenY):i0=n0=0,yl=t),n0)},movementY:function(t){return"movementY"in t?t.movementY:i0}}),xh=kr(Ed),O1=Gt({},Ed,{dataTransfer:0}),I1=kr(O1),M1=Gt({},Mo,{relatedTarget:0}),l0=kr(M1),B1=Gt({},nl,{animationName:0,elapsedTime:0,pseudoElement:0}),$1=kr(B1),U1=Gt({},nl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),z1=kr(U1),W1=Gt({},nl,{data:0}),mh=kr(W1),V1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function q1(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=G1[t])?!!s[t]:!1}function Px(){return q1}var J1=Gt({},Mo,{key:function(t){if(t.key){var s=V1[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Ec(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?H1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Px,charCode:function(t){return t.type==="keypress"?Ec(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ec(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),K1=kr(J1),Y1=Gt({},Ed,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hh=kr(Y1),X1=Gt({},Mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Px}),Q1=kr(X1),Z1=Gt({},nl,{propertyName:0,elapsedTime:0,pseudoElement:0}),ew=kr(Z1),tw=Gt({},Ed,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sw=kr(tw),rw=[9,13,27,32],Dx=Ba&&"CompositionEvent"in window,Bl=null;Ba&&"documentMode"in document&&(Bl=document.documentMode);var aw=Ba&&"TextEvent"in window&&!Bl,Ug=Ba&&(!Dx||Bl&&8<Bl&&11>=Bl),fh=" ",ph=!1;function zg(t,s){switch(t){case"keyup":return rw.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ci=!1;function nw(t,s){switch(t){case"compositionend":return Wg(s);case"keypress":return s.which!==32?null:(ph=!0,fh);case"textInput":return t=s.data,t===fh&&ph?null:t;default:return null}}function iw(t,s){if(Ci)return t==="compositionend"||!Dx&&zg(t,s)?(t=$g(),Tc=Ax=on=null,Ci=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ug&&s.locale!=="ko"?null:s.data;default:return null}}var lw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!lw[t.type]:s==="textarea"}function Vg(t,s,r,a){jg(a),s=Yc(s,"onChange"),0<s.length&&(r=new Fx("onChange","change",null,r,a),t.push({event:r,listeners:s}))}var $l=null,oo=null;function ow(t){ty(t,0)}function Ad(t){var s=Ei(t);if(hg(s))return t}function cw(t,s){if(t==="change")return s}var Hg=!1;if(Ba){var o0;if(Ba){var c0="oninput"in document;if(!c0){var yh=document.createElement("div");yh.setAttribute("oninput","return;"),c0=typeof yh.oninput=="function"}o0=c0}else o0=!1;Hg=o0&&(!document.documentMode||9<document.documentMode)}function bh(){$l&&($l.detachEvent("onpropertychange",Gg),oo=$l=null)}function Gg(t){if(t.propertyName==="value"&&Ad(oo)){var s=[];Vg(s,oo,t,Sx(t)),Sg(ow,s)}}function dw(t,s,r){t==="focusin"?(bh(),$l=s,oo=r,$l.attachEvent("onpropertychange",Gg)):t==="focusout"&&bh()}function uw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ad(oo)}function xw(t,s){if(t==="click")return Ad(s)}function mw(t,s){if(t==="input"||t==="change")return Ad(s)}function hw(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var na=typeof Object.is=="function"?Object.is:hw;function co(t,s){if(na(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),a=Object.keys(s);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!K0.call(s,n)||!na(t[n],s[n]))return!1}return!0}function vh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jh(t,s){var r=vh(t);t=0;for(var a;r;){if(r.nodeType===3){if(a=t+r.textContent.length,t<=s&&a>=s)return{node:r,offset:s-t};t=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=vh(r)}}function qg(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?qg(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Jg(){for(var t=window,s=Wc();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=Wc(t.document)}return s}function Rx(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function fw(t){var s=Jg(),r=t.focusedElem,a=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&qg(r.ownerDocument.documentElement,r)){if(a!==null&&Rx(r)){if(s=a.start,t=a.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var n=r.textContent.length,i=Math.min(a.start,n);a=a.end===void 0?i:Math.min(a.end,n),!t.extend&&i>a&&(n=a,a=i,i=n),n=jh(r,i);var l=jh(r,a);n&&l&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(s=s.createRange(),s.setStart(n.node,n.offset),t.removeAllRanges(),i>a?(t.addRange(s),t.extend(l.node,l.offset)):(s.setEnd(l.node,l.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pw=Ba&&"documentMode"in document&&11>=document.documentMode,_i=null,hu=null,Ul=null,fu=!1;function wh(t,s,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;fu||_i==null||_i!==Wc(a)||(a=_i,"selectionStart"in a&&Rx(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ul&&co(Ul,a)||(Ul=a,a=Yc(hu,"onSelect"),0<a.length&&(s=new Fx("onSelect","select",null,s,r),t.push({event:s,listeners:a}),s.target=_i)))}function sc(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Ti={animationend:sc("Animation","AnimationEnd"),animationiteration:sc("Animation","AnimationIteration"),animationstart:sc("Animation","AnimationStart"),transitionend:sc("Transition","TransitionEnd")},d0={},Kg={};Ba&&(Kg=document.createElement("div").style,"AnimationEvent"in window||(delete Ti.animationend.animation,delete Ti.animationiteration.animation,delete Ti.animationstart.animation),"TransitionEvent"in window||delete Ti.transitionend.transition);function Fd(t){if(d0[t])return d0[t];if(!Ti[t])return t;var s=Ti[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in Kg)return d0[t]=s[r];return t}var Yg=Fd("animationend"),Xg=Fd("animationiteration"),Qg=Fd("animationstart"),Zg=Fd("transitionend"),ey=new Map,Nh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function En(t,s){ey.set(t,s),ui(s,[t])}for(var u0=0;u0<Nh.length;u0++){var x0=Nh[u0],gw=x0.toLowerCase(),yw=x0[0].toUpperCase()+x0.slice(1);En(gw,"on"+yw)}En(Yg,"onAnimationEnd");En(Xg,"onAnimationIteration");En(Qg,"onAnimationStart");En("dblclick","onDoubleClick");En("focusin","onFocus");En("focusout","onBlur");En(Zg,"onTransitionEnd");Ji("onMouseEnter",["mouseout","mouseover"]);Ji("onMouseLeave",["mouseout","mouseover"]);Ji("onPointerEnter",["pointerout","pointerover"]);Ji("onPointerLeave",["pointerout","pointerover"]);ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ui("onBeforeInput",["compositionend","keypress","textInput","paste"]);ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bw=new Set("cancel close invalid load scroll toggle".split(" ").concat(El));function kh(t,s,r){var a=t.type||"unknown-event";t.currentTarget=r,g1(a,s,void 0,t),t.currentTarget=null}function ty(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var a=t[r],n=a.event;a=a.listeners;e:{var i=void 0;if(s)for(var l=a.length-1;0<=l;l--){var o=a[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&n.isPropagationStopped())break e;kh(n,o,d),i=c}else for(l=0;l<a.length;l++){if(o=a[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&n.isPropagationStopped())break e;kh(n,o,d),i=c}}}if(Hc)throw t=du,Hc=!1,du=null,t}function Ot(t,s){var r=s[vu];r===void 0&&(r=s[vu]=new Set);var a=t+"__bubble";r.has(a)||(sy(s,t,2,!1),r.add(a))}function m0(t,s,r){var a=0;s&&(a|=4),sy(r,t,a,s)}var rc="_reactListening"+Math.random().toString(36).slice(2);function uo(t){if(!t[rc]){t[rc]=!0,cg.forEach(function(r){r!=="selectionchange"&&(bw.has(r)||m0(r,!1,t),m0(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[rc]||(s[rc]=!0,m0("selectionchange",!1,s))}}function sy(t,s,r,a){switch(Bg(s)){case 1:var n=D1;break;case 4:n=R1;break;default:n=Ex}r=n.bind(null,s,r,t),n=void 0,!cu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(n=!0),a?n!==void 0?t.addEventListener(s,r,{capture:!0,passive:n}):t.addEventListener(s,r,!0):n!==void 0?t.addEventListener(s,r,{passive:n}):t.addEventListener(s,r,!1)}function h0(t,s,r,a,n){var i=a;if(!(s&1)&&!(s&2)&&a!==null)e:for(;;){if(a===null)return;var l=a.tag;if(l===3||l===4){var o=a.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(l===4)for(l=a.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;l=l.return}for(;o!==null;){if(l=Wn(o),l===null)return;if(c=l.tag,c===5||c===6){a=i=l;continue e}o=o.parentNode}}a=a.return}Sg(function(){var d=i,u=Sx(r),p=[];e:{var h=ey.get(t);if(h!==void 0){var g=Fx,x=t;switch(t){case"keypress":if(Ec(r)===0)break e;case"keydown":case"keyup":g=K1;break;case"focusin":x="focus",g=l0;break;case"focusout":x="blur",g=l0;break;case"beforeblur":case"afterblur":g=l0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=xh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=I1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Q1;break;case Yg:case Xg:case Qg:g=$1;break;case Zg:g=ew;break;case"scroll":g=L1;break;case"wheel":g=sw;break;case"copy":case"cut":case"paste":g=z1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=hh}var f=(s&4)!==0,m=!f&&t==="scroll",j=f?h!==null?h+"Capture":null:h;f=[];for(var v=d,w;v!==null;){w=v;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,j!==null&&(S=ao(v,j),S!=null&&f.push(xo(v,S,w)))),m)break;v=v.return}0<f.length&&(h=new g(h,x,null,r,u),p.push({event:h,listeners:f}))}}if(!(s&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&r!==lu&&(x=r.relatedTarget||r.fromElement)&&(Wn(x)||x[$a]))break e;if((g||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,g?(x=r.relatedTarget||r.toElement,g=d,x=x?Wn(x):null,x!==null&&(m=xi(x),x!==m||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=d),g!==x)){if(f=xh,S="onMouseLeave",j="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(f=hh,S="onPointerLeave",j="onPointerEnter",v="pointer"),m=g==null?h:Ei(g),w=x==null?h:Ei(x),h=new f(S,v+"leave",g,r,u),h.target=m,h.relatedTarget=w,S=null,Wn(u)===d&&(f=new f(j,v+"enter",x,r,u),f.target=w,f.relatedTarget=m,S=f),m=S,g&&x)t:{for(f=g,j=x,v=0,w=f;w;w=vi(w))v++;for(w=0,S=j;S;S=vi(S))w++;for(;0<v-w;)f=vi(f),v--;for(;0<w-v;)j=vi(j),w--;for(;v--;){if(f===j||j!==null&&f===j.alternate)break t;f=vi(f),j=vi(j)}f=null}else f=null;g!==null&&Sh(p,h,g,f,!1),x!==null&&m!==null&&Sh(p,m,x,f,!0)}}e:{if(h=d?Ei(d):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var F=cw;else if(gh(h))if(Hg)F=mw;else{F=uw;var E=dw}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(F=xw);if(F&&(F=F(t,d))){Vg(p,F,r,u);break e}E&&E(t,h,d),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&su(h,"number",h.value)}switch(E=d?Ei(d):window,t){case"focusin":(gh(E)||E.contentEditable==="true")&&(_i=E,hu=d,Ul=null);break;case"focusout":Ul=hu=_i=null;break;case"mousedown":fu=!0;break;case"contextmenu":case"mouseup":case"dragend":fu=!1,wh(p,r,u);break;case"selectionchange":if(pw)break;case"keydown":case"keyup":wh(p,r,u)}var k;if(Dx)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Ci?zg(t,r)&&(A="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(A="onCompositionStart");A&&(Ug&&r.locale!=="ko"&&(Ci||A!=="onCompositionStart"?A==="onCompositionEnd"&&Ci&&(k=$g()):(on=u,Ax="value"in on?on.value:on.textContent,Ci=!0)),E=Yc(d,A),0<E.length&&(A=new mh(A,t,null,r,u),p.push({event:A,listeners:E}),k?A.data=k:(k=Wg(r),k!==null&&(A.data=k)))),(k=aw?nw(t,r):iw(t,r))&&(d=Yc(d,"onBeforeInput"),0<d.length&&(u=new mh("onBeforeInput","beforeinput",null,r,u),p.push({event:u,listeners:d}),u.data=k))}ty(p,s)})}function xo(t,s,r){return{instance:t,listener:s,currentTarget:r}}function Yc(t,s){for(var r=s+"Capture",a=[];t!==null;){var n=t,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=ao(t,r),i!=null&&a.unshift(xo(t,i,n)),i=ao(t,s),i!=null&&a.push(xo(t,i,n))),t=t.return}return a}function vi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sh(t,s,r,a,n){for(var i=s._reactName,l=[];r!==null&&r!==a;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===a)break;o.tag===5&&d!==null&&(o=d,n?(c=ao(r,i),c!=null&&l.unshift(xo(r,c,o))):n||(c=ao(r,i),c!=null&&l.push(xo(r,c,o)))),r=r.return}l.length!==0&&t.push({event:s,listeners:l})}var vw=/\r\n?/g,jw=/\u0000|\uFFFD/g;function Ch(t){return(typeof t=="string"?t:""+t).replace(vw,`
`).replace(jw,"")}function ac(t,s,r){if(s=Ch(s),Ch(t)!==s&&r)throw Error(Ee(425))}function Xc(){}var pu=null,gu=null;function yu(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var bu=typeof setTimeout=="function"?setTimeout:void 0,ww=typeof clearTimeout=="function"?clearTimeout:void 0,_h=typeof Promise=="function"?Promise:void 0,Nw=typeof queueMicrotask=="function"?queueMicrotask:typeof _h<"u"?function(t){return _h.resolve(null).then(t).catch(kw)}:bu;function kw(t){setTimeout(function(){throw t})}function f0(t,s){var r=s,a=0;do{var n=r.nextSibling;if(t.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(a===0){t.removeChild(n),lo(s);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=n}while(r);lo(s)}function pn(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Th(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var il=Math.random().toString(36).slice(2),xa="__reactFiber$"+il,mo="__reactProps$"+il,$a="__reactContainer$"+il,vu="__reactEvents$"+il,Sw="__reactListeners$"+il,Cw="__reactHandles$"+il;function Wn(t){var s=t[xa];if(s)return s;for(var r=t.parentNode;r;){if(s=r[$a]||r[xa]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=Th(t);t!==null;){if(r=t[xa])return r;t=Th(t)}return s}t=r,r=t.parentNode}return null}function Bo(t){return t=t[xa]||t[$a],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ei(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ee(33))}function Pd(t){return t[mo]||null}var ju=[],Ai=-1;function An(t){return{current:t}}function It(t){0>Ai||(t.current=ju[Ai],ju[Ai]=null,Ai--)}function Rt(t,s){Ai++,ju[Ai]=t.current,t.current=s}var Sn={},Vs=An(Sn),cr=An(!1),ei=Sn;function Ki(t,s){var r=t.type.contextTypes;if(!r)return Sn;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in r)n[i]=s[i];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=n),n}function dr(t){return t=t.childContextTypes,t!=null}function Qc(){It(cr),It(Vs)}function Eh(t,s,r){if(Vs.current!==Sn)throw Error(Ee(168));Rt(Vs,s),Rt(cr,r)}function ry(t,s,r){var a=t.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var n in a)if(!(n in s))throw Error(Ee(108,d1(t)||"Unknown",n));return Gt({},r,a)}function Zc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Sn,ei=Vs.current,Rt(Vs,t),Rt(cr,cr.current),!0}function Ah(t,s,r){var a=t.stateNode;if(!a)throw Error(Ee(169));r?(t=ry(t,s,ei),a.__reactInternalMemoizedMergedChildContext=t,It(cr),It(Vs),Rt(Vs,t)):It(cr),Rt(cr,r)}var Ea=null,Dd=!1,p0=!1;function ay(t){Ea===null?Ea=[t]:Ea.push(t)}function _w(t){Dd=!0,ay(t)}function Fn(){if(!p0&&Ea!==null){p0=!0;var t=0,s=Ft;try{var r=Ea;for(Ft=1;t<r.length;t++){var a=r[t];do a=a(!0);while(a!==null)}Ea=null,Dd=!1}catch(n){throw Ea!==null&&(Ea=Ea.slice(t+1)),Eg(Cx,Fn),n}finally{Ft=s,p0=!1}}return null}var Fi=[],Pi=0,ed=null,td=0,Ar=[],Fr=0,ti=null,Aa=1,Fa="";function In(t,s){Fi[Pi++]=td,Fi[Pi++]=ed,ed=t,td=s}function ny(t,s,r){Ar[Fr++]=Aa,Ar[Fr++]=Fa,Ar[Fr++]=ti,ti=t;var a=Aa;t=Fa;var n=32-ta(a)-1;a&=~(1<<n),r+=1;var i=32-ta(s)+n;if(30<i){var l=n-n%5;i=(a&(1<<l)-1).toString(32),a>>=l,n-=l,Aa=1<<32-ta(s)+n|r<<n|a,Fa=i+t}else Aa=1<<i|r<<n|a,Fa=t}function Lx(t){t.return!==null&&(In(t,1),ny(t,1,0))}function Ox(t){for(;t===ed;)ed=Fi[--Pi],Fi[Pi]=null,td=Fi[--Pi],Fi[Pi]=null;for(;t===ti;)ti=Ar[--Fr],Ar[Fr]=null,Fa=Ar[--Fr],Ar[Fr]=null,Aa=Ar[--Fr],Ar[Fr]=null}var br=null,yr=null,Ut=!1,Xr=null;function iy(t,s){var r=Rr(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function Fh(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,br=t,yr=pn(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,br=t,yr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=ti!==null?{id:Aa,overflow:Fa}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=Rr(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,br=t,yr=null,!0):!1;default:return!1}}function wu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nu(t){if(Ut){var s=yr;if(s){var r=s;if(!Fh(t,s)){if(wu(t))throw Error(Ee(418));s=pn(r.nextSibling);var a=br;s&&Fh(t,s)?iy(a,r):(t.flags=t.flags&-4097|2,Ut=!1,br=t)}}else{if(wu(t))throw Error(Ee(418));t.flags=t.flags&-4097|2,Ut=!1,br=t}}}function Ph(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;br=t}function nc(t){if(t!==br)return!1;if(!Ut)return Ph(t),Ut=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!yu(t.type,t.memoizedProps)),s&&(s=yr)){if(wu(t))throw ly(),Error(Ee(418));for(;s;)iy(t,s),s=pn(s.nextSibling)}if(Ph(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ee(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){yr=pn(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}yr=null}}else yr=br?pn(t.stateNode.nextSibling):null;return!0}function ly(){for(var t=yr;t;)t=pn(t.nextSibling)}function Yi(){yr=br=null,Ut=!1}function Ix(t){Xr===null?Xr=[t]:Xr.push(t)}var Tw=Ga.ReactCurrentBatchConfig;function bl(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ee(309));var a=r.stateNode}if(!a)throw Error(Ee(147,t));var n=a,i=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===i?s.ref:(s=function(l){var o=n.refs;l===null?delete o[i]:o[i]=l},s._stringRef=i,s)}if(typeof t!="string")throw Error(Ee(284));if(!r._owner)throw Error(Ee(290,t))}return t}function ic(t,s){throw t=Object.prototype.toString.call(s),Error(Ee(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Dh(t){var s=t._init;return s(t._payload)}function oy(t){function s(j,v){if(t){var w=j.deletions;w===null?(j.deletions=[v],j.flags|=16):w.push(v)}}function r(j,v){if(!t)return null;for(;v!==null;)s(j,v),v=v.sibling;return null}function a(j,v){for(j=new Map;v!==null;)v.key!==null?j.set(v.key,v):j.set(v.index,v),v=v.sibling;return j}function n(j,v){return j=vn(j,v),j.index=0,j.sibling=null,j}function i(j,v,w){return j.index=w,t?(w=j.alternate,w!==null?(w=w.index,w<v?(j.flags|=2,v):w):(j.flags|=2,v)):(j.flags|=1048576,v)}function l(j){return t&&j.alternate===null&&(j.flags|=2),j}function o(j,v,w,S){return v===null||v.tag!==6?(v=N0(w,j.mode,S),v.return=j,v):(v=n(v,w),v.return=j,v)}function c(j,v,w,S){var F=w.type;return F===Si?u(j,v,w.props.children,S,w.key):v!==null&&(v.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===tn&&Dh(F)===v.type)?(S=n(v,w.props),S.ref=bl(j,v,w),S.return=j,S):(S=Oc(w.type,w.key,w.props,null,j.mode,S),S.ref=bl(j,v,w),S.return=j,S)}function d(j,v,w,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=k0(w,j.mode,S),v.return=j,v):(v=n(v,w.children||[]),v.return=j,v)}function u(j,v,w,S,F){return v===null||v.tag!==7?(v=Kn(w,j.mode,S,F),v.return=j,v):(v=n(v,w),v.return=j,v)}function p(j,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=N0(""+v,j.mode,w),v.return=j,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ko:return w=Oc(v.type,v.key,v.props,null,j.mode,w),w.ref=bl(j,null,v),w.return=j,w;case ki:return v=k0(v,j.mode,w),v.return=j,v;case tn:var S=v._init;return p(j,S(v._payload),w)}if(_l(v)||hl(v))return v=Kn(v,j.mode,w,null),v.return=j,v;ic(j,v)}return null}function h(j,v,w,S){var F=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return F!==null?null:o(j,v,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ko:return w.key===F?c(j,v,w,S):null;case ki:return w.key===F?d(j,v,w,S):null;case tn:return F=w._init,h(j,v,F(w._payload),S)}if(_l(w)||hl(w))return F!==null?null:u(j,v,w,S,null);ic(j,w)}return null}function g(j,v,w,S,F){if(typeof S=="string"&&S!==""||typeof S=="number")return j=j.get(w)||null,o(v,j,""+S,F);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ko:return j=j.get(S.key===null?w:S.key)||null,c(v,j,S,F);case ki:return j=j.get(S.key===null?w:S.key)||null,d(v,j,S,F);case tn:var E=S._init;return g(j,v,w,E(S._payload),F)}if(_l(S)||hl(S))return j=j.get(w)||null,u(v,j,S,F,null);ic(v,S)}return null}function x(j,v,w,S){for(var F=null,E=null,k=v,A=v=0,y=null;k!==null&&A<w.length;A++){k.index>A?(y=k,k=null):y=k.sibling;var N=h(j,k,w[A],S);if(N===null){k===null&&(k=y);break}t&&k&&N.alternate===null&&s(j,k),v=i(N,v,A),E===null?F=N:E.sibling=N,E=N,k=y}if(A===w.length)return r(j,k),Ut&&In(j,A),F;if(k===null){for(;A<w.length;A++)k=p(j,w[A],S),k!==null&&(v=i(k,v,A),E===null?F=k:E.sibling=k,E=k);return Ut&&In(j,A),F}for(k=a(j,k);A<w.length;A++)y=g(k,j,A,w[A],S),y!==null&&(t&&y.alternate!==null&&k.delete(y.key===null?A:y.key),v=i(y,v,A),E===null?F=y:E.sibling=y,E=y);return t&&k.forEach(function(R){return s(j,R)}),Ut&&In(j,A),F}function f(j,v,w,S){var F=hl(w);if(typeof F!="function")throw Error(Ee(150));if(w=F.call(w),w==null)throw Error(Ee(151));for(var E=F=null,k=v,A=v=0,y=null,N=w.next();k!==null&&!N.done;A++,N=w.next()){k.index>A?(y=k,k=null):y=k.sibling;var R=h(j,k,N.value,S);if(R===null){k===null&&(k=y);break}t&&k&&R.alternate===null&&s(j,k),v=i(R,v,A),E===null?F=R:E.sibling=R,E=R,k=y}if(N.done)return r(j,k),Ut&&In(j,A),F;if(k===null){for(;!N.done;A++,N=w.next())N=p(j,N.value,S),N!==null&&(v=i(N,v,A),E===null?F=N:E.sibling=N,E=N);return Ut&&In(j,A),F}for(k=a(j,k);!N.done;A++,N=w.next())N=g(k,j,A,N.value,S),N!==null&&(t&&N.alternate!==null&&k.delete(N.key===null?A:N.key),v=i(N,v,A),E===null?F=N:E.sibling=N,E=N);return t&&k.forEach(function(T){return s(j,T)}),Ut&&In(j,A),F}function m(j,v,w,S){if(typeof w=="object"&&w!==null&&w.type===Si&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ko:e:{for(var F=w.key,E=v;E!==null;){if(E.key===F){if(F=w.type,F===Si){if(E.tag===7){r(j,E.sibling),v=n(E,w.props.children),v.return=j,j=v;break e}}else if(E.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===tn&&Dh(F)===E.type){r(j,E.sibling),v=n(E,w.props),v.ref=bl(j,E,w),v.return=j,j=v;break e}r(j,E);break}else s(j,E);E=E.sibling}w.type===Si?(v=Kn(w.props.children,j.mode,S,w.key),v.return=j,j=v):(S=Oc(w.type,w.key,w.props,null,j.mode,S),S.ref=bl(j,v,w),S.return=j,j=S)}return l(j);case ki:e:{for(E=w.key;v!==null;){if(v.key===E)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){r(j,v.sibling),v=n(v,w.children||[]),v.return=j,j=v;break e}else{r(j,v);break}else s(j,v);v=v.sibling}v=k0(w,j.mode,S),v.return=j,j=v}return l(j);case tn:return E=w._init,m(j,v,E(w._payload),S)}if(_l(w))return x(j,v,w,S);if(hl(w))return f(j,v,w,S);ic(j,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(r(j,v.sibling),v=n(v,w),v.return=j,j=v):(r(j,v),v=N0(w,j.mode,S),v.return=j,j=v),l(j)):r(j,v)}return m}var Xi=oy(!0),cy=oy(!1),sd=An(null),rd=null,Di=null,Mx=null;function Bx(){Mx=Di=rd=null}function $x(t){var s=sd.current;It(sd),t._currentValue=s}function ku(t,s,r){for(;t!==null;){var a=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),t===r)break;t=t.return}}function Ui(t,s){rd=t,Mx=Di=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(lr=!0),t.firstContext=null)}function Or(t){var s=t._currentValue;if(Mx!==t)if(t={context:t,memoizedValue:s,next:null},Di===null){if(rd===null)throw Error(Ee(308));Di=t,rd.dependencies={lanes:0,firstContext:t}}else Di=Di.next=t;return s}var Vn=null;function Ux(t){Vn===null?Vn=[t]:Vn.push(t)}function dy(t,s,r,a){var n=s.interleaved;return n===null?(r.next=r,Ux(s)):(r.next=n.next,n.next=r),s.interleaved=r,Ua(t,a)}function Ua(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var sn=!1;function zx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uy(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ra(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function gn(t,s,r){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,Nt&2){var n=a.pending;return n===null?s.next=s:(s.next=n.next,n.next=s),a.pending=s,Ua(t,r)}return n=a.interleaved,n===null?(s.next=s,Ux(a)):(s.next=n.next,n.next=s),a.interleaved=s,Ua(t,r)}function Ac(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,_x(t,r)}}function Rh(t,s){var r=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var n=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?n=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?n=i=s:i=i.next=s}else n=i=s;r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:a.shared,effects:a.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function ad(t,s,r,a){var n=t.updateQueue;sn=!1;var i=n.firstBaseUpdate,l=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var p=n.baseState;l=0,u=d=c=null,o=i;do{var h=o.lane,g=o.eventTime;if((a&h)===h){u!==null&&(u=u.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var x=t,f=o;switch(h=s,g=r,f.tag){case 1:if(x=f.payload,typeof x=="function"){p=x.call(g,p,h);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=f.payload,h=typeof x=="function"?x.call(g,p,h):x,h==null)break e;p=Gt({},p,h);break e;case 2:sn=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=n.effects,h===null?n.effects=[o]:h.push(o))}else g={eventTime:g,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=g,c=p):u=u.next=g,l|=h;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;h=o,o=h.next,h.next=null,n.lastBaseUpdate=h,n.shared.pending=null}}while(!0);if(u===null&&(c=p),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=u,s=n.shared.interleaved,s!==null){n=s;do l|=n.lane,n=n.next;while(n!==s)}else i===null&&(n.shared.lanes=0);ri|=l,t.lanes=l,t.memoizedState=p}}function Lh(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var a=t[s],n=a.callback;if(n!==null){if(a.callback=null,a=r,typeof n!="function")throw Error(Ee(191,n));n.call(a)}}}var $o={},ha=An($o),ho=An($o),fo=An($o);function Hn(t){if(t===$o)throw Error(Ee(174));return t}function Wx(t,s){switch(Rt(fo,s),Rt(ho,t),Rt(ha,$o),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:au(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=au(s,t)}It(ha),Rt(ha,s)}function Qi(){It(ha),It(ho),It(fo)}function xy(t){Hn(fo.current);var s=Hn(ha.current),r=au(s,t.type);s!==r&&(Rt(ho,t),Rt(ha,r))}function Vx(t){ho.current===t&&(It(ha),It(ho))}var Wt=An(0);function nd(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var g0=[];function Hx(){for(var t=0;t<g0.length;t++)g0[t]._workInProgressVersionPrimary=null;g0.length=0}var Fc=Ga.ReactCurrentDispatcher,y0=Ga.ReactCurrentBatchConfig,si=0,Ht=null,xs=null,js=null,id=!1,zl=!1,po=0,Ew=0;function Ls(){throw Error(Ee(321))}function Gx(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!na(t[r],s[r]))return!1;return!0}function qx(t,s,r,a,n,i){if(si=i,Ht=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Fc.current=t===null||t.memoizedState===null?Dw:Rw,t=r(a,n),zl){i=0;do{if(zl=!1,po=0,25<=i)throw Error(Ee(301));i+=1,js=xs=null,s.updateQueue=null,Fc.current=Lw,t=r(a,n)}while(zl)}if(Fc.current=ld,s=xs!==null&&xs.next!==null,si=0,js=xs=Ht=null,id=!1,s)throw Error(Ee(300));return t}function Jx(){var t=po!==0;return po=0,t}function ua(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return js===null?Ht.memoizedState=js=t:js=js.next=t,js}function Ir(){if(xs===null){var t=Ht.alternate;t=t!==null?t.memoizedState:null}else t=xs.next;var s=js===null?Ht.memoizedState:js.next;if(s!==null)js=s,xs=t;else{if(t===null)throw Error(Ee(310));xs=t,t={memoizedState:xs.memoizedState,baseState:xs.baseState,baseQueue:xs.baseQueue,queue:xs.queue,next:null},js===null?Ht.memoizedState=js=t:js=js.next=t}return js}function go(t,s){return typeof s=="function"?s(t):s}function b0(t){var s=Ir(),r=s.queue;if(r===null)throw Error(Ee(311));r.lastRenderedReducer=t;var a=xs,n=a.baseQueue,i=r.pending;if(i!==null){if(n!==null){var l=n.next;n.next=i.next,i.next=l}a.baseQueue=n=i,r.pending=null}if(n!==null){i=n.next,a=a.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((si&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:t(a,d.action);else{var p={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=p,l=a):c=c.next=p,Ht.lanes|=u,ri|=u}d=d.next}while(d!==null&&d!==i);c===null?l=a:c.next=o,na(a,s.memoizedState)||(lr=!0),s.memoizedState=a,s.baseState=l,s.baseQueue=c,r.lastRenderedState=a}if(t=r.interleaved,t!==null){n=t;do i=n.lane,Ht.lanes|=i,ri|=i,n=n.next;while(n!==t)}else n===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function v0(t){var s=Ir(),r=s.queue;if(r===null)throw Error(Ee(311));r.lastRenderedReducer=t;var a=r.dispatch,n=r.pending,i=s.memoizedState;if(n!==null){r.pending=null;var l=n=n.next;do i=t(i,l.action),l=l.next;while(l!==n);na(i,s.memoizedState)||(lr=!0),s.memoizedState=i,s.baseQueue===null&&(s.baseState=i),r.lastRenderedState=i}return[i,a]}function my(){}function hy(t,s){var r=Ht,a=Ir(),n=s(),i=!na(a.memoizedState,n);if(i&&(a.memoizedState=n,lr=!0),a=a.queue,Kx(gy.bind(null,r,a,t),[t]),a.getSnapshot!==s||i||js!==null&&js.memoizedState.tag&1){if(r.flags|=2048,yo(9,py.bind(null,r,a,n,s),void 0,null),Ns===null)throw Error(Ee(349));si&30||fy(r,s,n)}return n}function fy(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=Ht.updateQueue,s===null?(s={lastEffect:null,stores:null},Ht.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function py(t,s,r,a){s.value=r,s.getSnapshot=a,yy(s)&&by(t)}function gy(t,s,r){return r(function(){yy(s)&&by(t)})}function yy(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!na(t,r)}catch{return!0}}function by(t){var s=Ua(t,1);s!==null&&sa(s,t,1,-1)}function Oh(t){var s=ua();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:t},s.queue=t,t=t.dispatch=Pw.bind(null,Ht,t),[s.memoizedState,t]}function yo(t,s,r,a){return t={tag:t,create:s,destroy:r,deps:a,next:null},s=Ht.updateQueue,s===null?(s={lastEffect:null,stores:null},Ht.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(a=r.next,r.next=t,t.next=a,s.lastEffect=t)),t}function vy(){return Ir().memoizedState}function Pc(t,s,r,a){var n=ua();Ht.flags|=t,n.memoizedState=yo(1|s,r,void 0,a===void 0?null:a)}function Rd(t,s,r,a){var n=Ir();a=a===void 0?null:a;var i=void 0;if(xs!==null){var l=xs.memoizedState;if(i=l.destroy,a!==null&&Gx(a,l.deps)){n.memoizedState=yo(s,r,i,a);return}}Ht.flags|=t,n.memoizedState=yo(1|s,r,i,a)}function Ih(t,s){return Pc(8390656,8,t,s)}function Kx(t,s){return Rd(2048,8,t,s)}function jy(t,s){return Rd(4,2,t,s)}function wy(t,s){return Rd(4,4,t,s)}function Ny(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function ky(t,s,r){return r=r!=null?r.concat([t]):null,Rd(4,4,Ny.bind(null,s,t),r)}function Yx(){}function Sy(t,s){var r=Ir();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&Gx(s,a[1])?a[0]:(r.memoizedState=[t,s],t)}function Cy(t,s){var r=Ir();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&Gx(s,a[1])?a[0]:(t=t(),r.memoizedState=[t,s],t)}function _y(t,s,r){return si&21?(na(r,s)||(r=Pg(),Ht.lanes|=r,ri|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,lr=!0),t.memoizedState=r)}function Aw(t,s){var r=Ft;Ft=r!==0&&4>r?r:4,t(!0);var a=y0.transition;y0.transition={};try{t(!1),s()}finally{Ft=r,y0.transition=a}}function Ty(){return Ir().memoizedState}function Fw(t,s,r){var a=bn(t);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},Ey(t))Ay(s,r);else if(r=dy(t,s,r,a),r!==null){var n=Xs();sa(r,t,a,n),Fy(r,s,a)}}function Pw(t,s,r){var a=bn(t),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ey(t))Ay(s,n);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=s.lastRenderedReducer,i!==null))try{var l=s.lastRenderedState,o=i(l,r);if(n.hasEagerState=!0,n.eagerState=o,na(o,l)){var c=s.interleaved;c===null?(n.next=n,Ux(s)):(n.next=c.next,c.next=n),s.interleaved=n;return}}catch{}finally{}r=dy(t,s,n,a),r!==null&&(n=Xs(),sa(r,t,a,n),Fy(r,s,a))}}function Ey(t){var s=t.alternate;return t===Ht||s!==null&&s===Ht}function Ay(t,s){zl=id=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function Fy(t,s,r){if(r&4194240){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,_x(t,r)}}var ld={readContext:Or,useCallback:Ls,useContext:Ls,useEffect:Ls,useImperativeHandle:Ls,useInsertionEffect:Ls,useLayoutEffect:Ls,useMemo:Ls,useReducer:Ls,useRef:Ls,useState:Ls,useDebugValue:Ls,useDeferredValue:Ls,useTransition:Ls,useMutableSource:Ls,useSyncExternalStore:Ls,useId:Ls,unstable_isNewReconciler:!1},Dw={readContext:Or,useCallback:function(t,s){return ua().memoizedState=[t,s===void 0?null:s],t},useContext:Or,useEffect:Ih,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,Pc(4194308,4,Ny.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Pc(4194308,4,t,s)},useInsertionEffect:function(t,s){return Pc(4,2,t,s)},useMemo:function(t,s){var r=ua();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var a=ua();return s=r!==void 0?r(s):s,a.memoizedState=a.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=Fw.bind(null,Ht,t),[a.memoizedState,t]},useRef:function(t){var s=ua();return t={current:t},s.memoizedState=t},useState:Oh,useDebugValue:Yx,useDeferredValue:function(t){return ua().memoizedState=t},useTransition:function(){var t=Oh(!1),s=t[0];return t=Aw.bind(null,t[1]),ua().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var a=Ht,n=ua();if(Ut){if(r===void 0)throw Error(Ee(407));r=r()}else{if(r=s(),Ns===null)throw Error(Ee(349));si&30||fy(a,s,r)}n.memoizedState=r;var i={value:r,getSnapshot:s};return n.queue=i,Ih(gy.bind(null,a,i,t),[t]),a.flags|=2048,yo(9,py.bind(null,a,i,r,s),void 0,null),r},useId:function(){var t=ua(),s=Ns.identifierPrefix;if(Ut){var r=Fa,a=Aa;r=(a&~(1<<32-ta(a)-1)).toString(32)+r,s=":"+s+"R"+r,r=po++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=Ew++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},Rw={readContext:Or,useCallback:Sy,useContext:Or,useEffect:Kx,useImperativeHandle:ky,useInsertionEffect:jy,useLayoutEffect:wy,useMemo:Cy,useReducer:b0,useRef:vy,useState:function(){return b0(go)},useDebugValue:Yx,useDeferredValue:function(t){var s=Ir();return _y(s,xs.memoizedState,t)},useTransition:function(){var t=b0(go)[0],s=Ir().memoizedState;return[t,s]},useMutableSource:my,useSyncExternalStore:hy,useId:Ty,unstable_isNewReconciler:!1},Lw={readContext:Or,useCallback:Sy,useContext:Or,useEffect:Kx,useImperativeHandle:ky,useInsertionEffect:jy,useLayoutEffect:wy,useMemo:Cy,useReducer:v0,useRef:vy,useState:function(){return v0(go)},useDebugValue:Yx,useDeferredValue:function(t){var s=Ir();return xs===null?s.memoizedState=t:_y(s,xs.memoizedState,t)},useTransition:function(){var t=v0(go)[0],s=Ir().memoizedState;return[t,s]},useMutableSource:my,useSyncExternalStore:hy,useId:Ty,unstable_isNewReconciler:!1};function qr(t,s){if(t&&t.defaultProps){s=Gt({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function Su(t,s,r,a){s=t.memoizedState,r=r(a,s),r=r==null?s:Gt({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ld={isMounted:function(t){return(t=t._reactInternals)?xi(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var a=Xs(),n=bn(t),i=Ra(a,n);i.payload=s,r!=null&&(i.callback=r),s=gn(t,i,n),s!==null&&(sa(s,t,n,a),Ac(s,t,n))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var a=Xs(),n=bn(t),i=Ra(a,n);i.tag=1,i.payload=s,r!=null&&(i.callback=r),s=gn(t,i,n),s!==null&&(sa(s,t,n,a),Ac(s,t,n))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=Xs(),a=bn(t),n=Ra(r,a);n.tag=2,s!=null&&(n.callback=s),s=gn(t,n,a),s!==null&&(sa(s,t,a,r),Ac(s,t,a))}};function Mh(t,s,r,a,n,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,i,l):s.prototype&&s.prototype.isPureReactComponent?!co(r,a)||!co(n,i):!0}function Py(t,s,r){var a=!1,n=Sn,i=s.contextType;return typeof i=="object"&&i!==null?i=Or(i):(n=dr(s)?ei:Vs.current,a=s.contextTypes,i=(a=a!=null)?Ki(t,n):Sn),s=new s(r,i),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ld,t.stateNode=s,s._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=i),s}function Bh(t,s,r,a){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,a),s.state!==t&&Ld.enqueueReplaceState(s,s.state,null)}function Cu(t,s,r,a){var n=t.stateNode;n.props=r,n.state=t.memoizedState,n.refs={},zx(t);var i=s.contextType;typeof i=="object"&&i!==null?n.context=Or(i):(i=dr(s)?ei:Vs.current,n.context=Ki(t,i)),n.state=t.memoizedState,i=s.getDerivedStateFromProps,typeof i=="function"&&(Su(t,s,i,r),n.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(s=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),s!==n.state&&Ld.enqueueReplaceState(n,n.state,null),ad(t,r,n,a),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function Zi(t,s){try{var r="",a=s;do r+=c1(a),a=a.return;while(a);var n=r}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:s,stack:n,digest:null}}function j0(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function _u(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var Ow=typeof WeakMap=="function"?WeakMap:Map;function Dy(t,s,r){r=Ra(-1,r),r.tag=3,r.payload={element:null};var a=s.value;return r.callback=function(){cd||(cd=!0,Iu=a),_u(t,s)},r}function Ry(t,s,r){r=Ra(-1,r),r.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var n=s.value;r.payload=function(){return a(n)},r.callback=function(){_u(t,s)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){_u(t,s),typeof a!="function"&&(yn===null?yn=new Set([this]):yn.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})}),r}function $h(t,s,r){var a=t.pingCache;if(a===null){a=t.pingCache=new Ow;var n=new Set;a.set(s,n)}else n=a.get(s),n===void 0&&(n=new Set,a.set(s,n));n.has(r)||(n.add(r),t=Yw.bind(null,t,s,r),s.then(t,t))}function Uh(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function zh(t,s,r,a,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=Ra(-1,1),s.tag=2,gn(r,s,1))),r.lanes|=1),t)}var Iw=Ga.ReactCurrentOwner,lr=!1;function qs(t,s,r,a){s.child=t===null?cy(s,null,r,a):Xi(s,t.child,r,a)}function Wh(t,s,r,a,n){r=r.render;var i=s.ref;return Ui(s,n),a=qx(t,s,r,a,i,n),r=Jx(),t!==null&&!lr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,za(t,s,n)):(Ut&&r&&Lx(s),s.flags|=1,qs(t,s,a,n),s.child)}function Vh(t,s,r,a,n){if(t===null){var i=r.type;return typeof i=="function"&&!am(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=i,Ly(t,s,i,a,n)):(t=Oc(r.type,null,a,s,s.mode,n),t.ref=s.ref,t.return=s,s.child=t)}if(i=t.child,!(t.lanes&n)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:co,r(l,a)&&t.ref===s.ref)return za(t,s,n)}return s.flags|=1,t=vn(i,a),t.ref=s.ref,t.return=s,s.child=t}function Ly(t,s,r,a,n){if(t!==null){var i=t.memoizedProps;if(co(i,a)&&t.ref===s.ref)if(lr=!1,s.pendingProps=a=i,(t.lanes&n)!==0)t.flags&131072&&(lr=!0);else return s.lanes=t.lanes,za(t,s,n)}return Tu(t,s,r,a,n)}function Oy(t,s,r){var a=s.pendingProps,n=a.children,i=t!==null?t.memoizedState:null;if(a.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rt(Li,hr),hr|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Rt(Li,hr),hr|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:r,Rt(Li,hr),hr|=a}else i!==null?(a=i.baseLanes|r,s.memoizedState=null):a=r,Rt(Li,hr),hr|=a;return qs(t,s,n,r),s.child}function Iy(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function Tu(t,s,r,a,n){var i=dr(r)?ei:Vs.current;return i=Ki(s,i),Ui(s,n),r=qx(t,s,r,a,i,n),a=Jx(),t!==null&&!lr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,za(t,s,n)):(Ut&&a&&Lx(s),s.flags|=1,qs(t,s,r,n),s.child)}function Hh(t,s,r,a,n){if(dr(r)){var i=!0;Zc(s)}else i=!1;if(Ui(s,n),s.stateNode===null)Dc(t,s),Py(s,r,a),Cu(s,r,a,n),a=!0;else if(t===null){var l=s.stateNode,o=s.memoizedProps;l.props=o;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=Or(d):(d=dr(r)?ei:Vs.current,d=Ki(s,d));var u=r.getDerivedStateFromProps,p=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";p||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==a||c!==d)&&Bh(s,l,a,d),sn=!1;var h=s.memoizedState;l.state=h,ad(s,a,l,n),c=s.memoizedState,o!==a||h!==c||cr.current||sn?(typeof u=="function"&&(Su(s,r,u,a),c=s.memoizedState),(o=sn||Mh(s,r,o,a,h,c,d))?(p||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(s.flags|=4194308)):(typeof l.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=c),l.props=a,l.state=c,l.context=d,a=o):(typeof l.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{l=s.stateNode,uy(t,s),o=s.memoizedProps,d=s.type===s.elementType?o:qr(s.type,o),l.props=d,p=s.pendingProps,h=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=Or(c):(c=dr(r)?ei:Vs.current,c=Ki(s,c));var g=r.getDerivedStateFromProps;(u=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==p||h!==c)&&Bh(s,l,a,c),sn=!1,h=s.memoizedState,l.state=h,ad(s,a,l,n);var x=s.memoizedState;o!==p||h!==x||cr.current||sn?(typeof g=="function"&&(Su(s,r,g,a),x=s.memoizedState),(d=sn||Mh(s,r,d,a,h,x,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(a,x,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(a,x,c)),typeof l.componentDidUpdate=="function"&&(s.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=x),l.props=a,l.state=x,l.context=c,a=d):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=1024),a=!1)}return Eu(t,s,r,a,i,n)}function Eu(t,s,r,a,n,i){Iy(t,s);var l=(s.flags&128)!==0;if(!a&&!l)return n&&Ah(s,r,!1),za(t,s,i);a=s.stateNode,Iw.current=s;var o=l&&typeof r.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,t!==null&&l?(s.child=Xi(s,t.child,null,i),s.child=Xi(s,null,o,i)):qs(t,s,o,i),s.memoizedState=a.state,n&&Ah(s,r,!0),s.child}function My(t){var s=t.stateNode;s.pendingContext?Eh(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Eh(t,s.context,!1),Wx(t,s.containerInfo)}function Gh(t,s,r,a,n){return Yi(),Ix(n),s.flags|=256,qs(t,s,r,a),s.child}var Au={dehydrated:null,treeContext:null,retryLane:0};function Fu(t){return{baseLanes:t,cachePool:null,transitions:null}}function By(t,s,r){var a=s.pendingProps,n=Wt.current,i=!1,l=(s.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(n&2)!==0),o?(i=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),Rt(Wt,n&1),t===null)return Nu(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(l=a.children,t=a.fallback,i?(a=s.mode,i=s.child,l={mode:"hidden",children:l},!(a&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Md(l,a,0,null),t=Kn(t,a,r,null),i.return=s,t.return=s,i.sibling=t,s.child=i,s.child.memoizedState=Fu(r),s.memoizedState=Au,t):Xx(s,l));if(n=t.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return Mw(t,s,l,a,o,n,r);if(i){i=a.fallback,l=s.mode,n=t.child,o=n.sibling;var c={mode:"hidden",children:a.children};return!(l&1)&&s.child!==n?(a=s.child,a.childLanes=0,a.pendingProps=c,s.deletions=null):(a=vn(n,c),a.subtreeFlags=n.subtreeFlags&14680064),o!==null?i=vn(o,i):(i=Kn(i,l,r,null),i.flags|=2),i.return=s,a.return=s,a.sibling=i,s.child=a,a=i,i=s.child,l=t.child.memoizedState,l=l===null?Fu(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~r,s.memoizedState=Au,a}return i=t.child,t=i.sibling,a=vn(i,{mode:"visible",children:a.children}),!(s.mode&1)&&(a.lanes=r),a.return=s,a.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=a,s.memoizedState=null,a}function Xx(t,s){return s=Md({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function lc(t,s,r,a){return a!==null&&Ix(a),Xi(s,t.child,null,r),t=Xx(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Mw(t,s,r,a,n,i,l){if(r)return s.flags&256?(s.flags&=-257,a=j0(Error(Ee(422))),lc(t,s,l,a)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(i=a.fallback,n=s.mode,a=Md({mode:"visible",children:a.children},n,0,null),i=Kn(i,n,l,null),i.flags|=2,a.return=s,i.return=s,a.sibling=i,s.child=a,s.mode&1&&Xi(s,t.child,null,l),s.child.memoizedState=Fu(l),s.memoizedState=Au,i);if(!(s.mode&1))return lc(t,s,l,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var o=a.dgst;return a=o,i=Error(Ee(419)),a=j0(i,a,void 0),lc(t,s,l,a)}if(o=(l&t.childLanes)!==0,lr||o){if(a=Ns,a!==null){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|l)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,Ua(t,n),sa(a,t,n,-1))}return rm(),a=j0(Error(Ee(421))),lc(t,s,l,a)}return n.data==="$?"?(s.flags|=128,s.child=t.child,s=Xw.bind(null,t),n._reactRetry=s,null):(t=i.treeContext,yr=pn(n.nextSibling),br=s,Ut=!0,Xr=null,t!==null&&(Ar[Fr++]=Aa,Ar[Fr++]=Fa,Ar[Fr++]=ti,Aa=t.id,Fa=t.overflow,ti=s),s=Xx(s,a.children),s.flags|=4096,s)}function qh(t,s,r){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s),ku(t.return,s,r)}function w0(t,s,r,a,n){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(i.isBackwards=s,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=r,i.tailMode=n)}function $y(t,s,r){var a=s.pendingProps,n=a.revealOrder,i=a.tail;if(qs(t,s,a.children,r),a=Wt.current,a&2)a=a&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qh(t,r,s);else if(t.tag===19)qh(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(Rt(Wt,a),!(s.mode&1))s.memoizedState=null;else switch(n){case"forwards":for(r=s.child,n=null;r!==null;)t=r.alternate,t!==null&&nd(t)===null&&(n=r),r=r.sibling;r=n,r===null?(n=s.child,s.child=null):(n=r.sibling,r.sibling=null),w0(s,!1,n,r,i);break;case"backwards":for(r=null,n=s.child,s.child=null;n!==null;){if(t=n.alternate,t!==null&&nd(t)===null){s.child=n;break}t=n.sibling,n.sibling=r,r=n,n=t}w0(s,!0,r,null,i);break;case"together":w0(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Dc(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function za(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),ri|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(Ee(153));if(s.child!==null){for(t=s.child,r=vn(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=vn(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function Bw(t,s,r){switch(s.tag){case 3:My(s),Yi();break;case 5:xy(s);break;case 1:dr(s.type)&&Zc(s);break;case 4:Wx(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,n=s.memoizedProps.value;Rt(sd,a._currentValue),a._currentValue=n;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(Rt(Wt,Wt.current&1),s.flags|=128,null):r&s.child.childLanes?By(t,s,r):(Rt(Wt,Wt.current&1),t=za(t,s,r),t!==null?t.sibling:null);Rt(Wt,Wt.current&1);break;case 19:if(a=(r&s.childLanes)!==0,t.flags&128){if(a)return $y(t,s,r);s.flags|=128}if(n=s.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Rt(Wt,Wt.current),a)break;return null;case 22:case 23:return s.lanes=0,Oy(t,s,r)}return za(t,s,r)}var Uy,Pu,zy,Wy;Uy=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Pu=function(){};zy=function(t,s,r,a){var n=t.memoizedProps;if(n!==a){t=s.stateNode,Hn(ha.current);var i=null;switch(r){case"input":n=eu(t,n),a=eu(t,a),i=[];break;case"select":n=Gt({},n,{value:void 0}),a=Gt({},a,{value:void 0}),i=[];break;case"textarea":n=ru(t,n),a=ru(t,a),i=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=Xc)}nu(r,a);var l;r=null;for(d in n)if(!a.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var o=n[d];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(so.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in a){var c=a[d];if(o=n!=null?n[d]:void 0,a.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(so.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ot("scroll",t),i||o===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(s.updateQueue=d)&&(s.flags|=4)}};Wy=function(t,s,r,a){r!==a&&(s.flags|=4)};function vl(t,s){if(!Ut)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function Os(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,a=0;if(s)for(var n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=a,t.childLanes=r,s}function $w(t,s,r){var a=s.pendingProps;switch(Ox(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Os(s),null;case 1:return dr(s.type)&&Qc(),Os(s),null;case 3:return a=s.stateNode,Qi(),It(cr),It(Vs),Hx(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(nc(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Xr!==null&&($u(Xr),Xr=null))),Pu(t,s),Os(s),null;case 5:Vx(s);var n=Hn(fo.current);if(r=s.type,t!==null&&s.stateNode!=null)zy(t,s,r,a,n),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(Ee(166));return Os(s),null}if(t=Hn(ha.current),nc(s)){a=s.stateNode,r=s.type;var i=s.memoizedProps;switch(a[xa]=s,a[mo]=i,t=(s.mode&1)!==0,r){case"dialog":Ot("cancel",a),Ot("close",a);break;case"iframe":case"object":case"embed":Ot("load",a);break;case"video":case"audio":for(n=0;n<El.length;n++)Ot(El[n],a);break;case"source":Ot("error",a);break;case"img":case"image":case"link":Ot("error",a),Ot("load",a);break;case"details":Ot("toggle",a);break;case"input":sh(a,i),Ot("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},Ot("invalid",a);break;case"textarea":ah(a,i),Ot("invalid",a)}nu(r,i),n=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?a.textContent!==o&&(i.suppressHydrationWarning!==!0&&ac(a.textContent,o,t),n=["children",o]):typeof o=="number"&&a.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&ac(a.textContent,o,t),n=["children",""+o]):so.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Ot("scroll",a)}switch(r){case"input":Yo(a),rh(a,i,!0);break;case"textarea":Yo(a),nh(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=Xc)}a=n,s.updateQueue=a,a!==null&&(s.flags|=4)}else{l=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gg(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=l.createElement(r,{is:a.is}):(t=l.createElement(r),r==="select"&&(l=t,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):t=l.createElementNS(t,r),t[xa]=s,t[mo]=a,Uy(t,s,!1,!1),s.stateNode=t;e:{switch(l=iu(r,a),r){case"dialog":Ot("cancel",t),Ot("close",t),n=a;break;case"iframe":case"object":case"embed":Ot("load",t),n=a;break;case"video":case"audio":for(n=0;n<El.length;n++)Ot(El[n],t);n=a;break;case"source":Ot("error",t),n=a;break;case"img":case"image":case"link":Ot("error",t),Ot("load",t),n=a;break;case"details":Ot("toggle",t),n=a;break;case"input":sh(t,a),n=eu(t,a),Ot("invalid",t);break;case"option":n=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},n=Gt({},a,{value:void 0}),Ot("invalid",t);break;case"textarea":ah(t,a),n=ru(t,a),Ot("invalid",t);break;default:n=a}nu(r,n),o=n;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?vg(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&yg(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ro(t,c):typeof c=="number"&&ro(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(so.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ot("scroll",t):c!=null&&jx(t,i,c,l))}switch(r){case"input":Yo(t),rh(t,a,!1);break;case"textarea":Yo(t),nh(t);break;case"option":a.value!=null&&t.setAttribute("value",""+kn(a.value));break;case"select":t.multiple=!!a.multiple,i=a.value,i!=null?Ii(t,!!a.multiple,i,!1):a.defaultValue!=null&&Ii(t,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=Xc)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Os(s),null;case 6:if(t&&s.stateNode!=null)Wy(t,s,t.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(Ee(166));if(r=Hn(fo.current),Hn(ha.current),nc(s)){if(a=s.stateNode,r=s.memoizedProps,a[xa]=s,(i=a.nodeValue!==r)&&(t=br,t!==null))switch(t.tag){case 3:ac(a.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ac(a.nodeValue,r,(t.mode&1)!==0)}i&&(s.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[xa]=s,s.stateNode=a}return Os(s),null;case 13:if(It(Wt),a=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ut&&yr!==null&&s.mode&1&&!(s.flags&128))ly(),Yi(),s.flags|=98560,i=!1;else if(i=nc(s),a!==null&&a.dehydrated!==null){if(t===null){if(!i)throw Error(Ee(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ee(317));i[xa]=s}else Yi(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Os(s),i=!1}else Xr!==null&&($u(Xr),Xr=null),i=!0;if(!i)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(s.child.flags|=8192,s.mode&1&&(t===null||Wt.current&1?hs===0&&(hs=3):rm())),s.updateQueue!==null&&(s.flags|=4),Os(s),null);case 4:return Qi(),Pu(t,s),t===null&&uo(s.stateNode.containerInfo),Os(s),null;case 10:return $x(s.type._context),Os(s),null;case 17:return dr(s.type)&&Qc(),Os(s),null;case 19:if(It(Wt),i=s.memoizedState,i===null)return Os(s),null;if(a=(s.flags&128)!==0,l=i.rendering,l===null)if(a)vl(i,!1);else{if(hs!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(l=nd(t),l!==null){for(s.flags|=128,vl(i,!1),a=l.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=r,r=s.child;r!==null;)i=r,t=a,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Rt(Wt,Wt.current&1|2),s.child}t=t.sibling}i.tail!==null&&ts()>el&&(s.flags|=128,a=!0,vl(i,!1),s.lanes=4194304)}else{if(!a)if(t=nd(l),t!==null){if(s.flags|=128,a=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),vl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Ut)return Os(s),null}else 2*ts()-i.renderingStartTime>el&&r!==1073741824&&(s.flags|=128,a=!0,vl(i,!1),s.lanes=4194304);i.isBackwards?(l.sibling=s.child,s.child=l):(r=i.last,r!==null?r.sibling=l:s.child=l,i.last=l)}return i.tail!==null?(s=i.tail,i.rendering=s,i.tail=s.sibling,i.renderingStartTime=ts(),s.sibling=null,r=Wt.current,Rt(Wt,a?r&1|2:r&1),s):(Os(s),null);case 22:case 23:return sm(),a=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(s.flags|=8192),a&&s.mode&1?hr&1073741824&&(Os(s),s.subtreeFlags&6&&(s.flags|=8192)):Os(s),null;case 24:return null;case 25:return null}throw Error(Ee(156,s.tag))}function Uw(t,s){switch(Ox(s),s.tag){case 1:return dr(s.type)&&Qc(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Qi(),It(cr),It(Vs),Hx(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return Vx(s),null;case 13:if(It(Wt),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(Ee(340));Yi()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return It(Wt),null;case 4:return Qi(),null;case 10:return $x(s.type._context),null;case 22:case 23:return sm(),null;case 24:return null;default:return null}}var oc=!1,Bs=!1,zw=typeof WeakSet=="function"?WeakSet:Set,$e=null;function Ri(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){qt(t,s,a)}else r.current=null}function Du(t,s,r){try{r()}catch(a){qt(t,s,a)}}var Jh=!1;function Ww(t,s){if(pu=Jc,t=Jg(),Rx(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var n=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,d=0,u=0,p=t,h=null;t:for(;;){for(var g;p!==r||n!==0&&p.nodeType!==3||(o=l+n),p!==i||a!==0&&p.nodeType!==3||(c=l+a),p.nodeType===3&&(l+=p.nodeValue.length),(g=p.firstChild)!==null;)h=p,p=g;for(;;){if(p===t)break t;if(h===r&&++d===n&&(o=l),h===i&&++u===a&&(c=l),(g=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=g}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(gu={focusedElem:t,selectionRange:r},Jc=!1,$e=s;$e!==null;)if(s=$e,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,$e=t;else for(;$e!==null;){s=$e;try{var x=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var f=x.memoizedProps,m=x.memoizedState,j=s.stateNode,v=j.getSnapshotBeforeUpdate(s.elementType===s.type?f:qr(s.type,f),m);j.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=s.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(S){qt(s,s.return,S)}if(t=s.sibling,t!==null){t.return=s.return,$e=t;break}$e=s.return}return x=Jh,Jh=!1,x}function Wl(t,s,r){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&t)===t){var i=n.destroy;n.destroy=void 0,i!==void 0&&Du(s,r,i)}n=n.next}while(n!==a)}}function Od(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var a=r.create;r.destroy=a()}r=r.next}while(r!==s)}}function Ru(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function Vy(t){var s=t.alternate;s!==null&&(t.alternate=null,Vy(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[xa],delete s[mo],delete s[vu],delete s[Sw],delete s[Cw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Hy(t){return t.tag===5||t.tag===3||t.tag===4}function Kh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lu(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Xc));else if(a!==4&&(t=t.child,t!==null))for(Lu(t,s,r),t=t.sibling;t!==null;)Lu(t,s,r),t=t.sibling}function Ou(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(Ou(t,s,r),t=t.sibling;t!==null;)Ou(t,s,r),t=t.sibling}var Cs=null,Jr=!1;function Ya(t,s,r){for(r=r.child;r!==null;)Gy(t,s,r),r=r.sibling}function Gy(t,s,r){if(ma&&typeof ma.onCommitFiberUnmount=="function")try{ma.onCommitFiberUnmount(Td,r)}catch{}switch(r.tag){case 5:Bs||Ri(r,s);case 6:var a=Cs,n=Jr;Cs=null,Ya(t,s,r),Cs=a,Jr=n,Cs!==null&&(Jr?(t=Cs,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Cs.removeChild(r.stateNode));break;case 18:Cs!==null&&(Jr?(t=Cs,r=r.stateNode,t.nodeType===8?f0(t.parentNode,r):t.nodeType===1&&f0(t,r),lo(t)):f0(Cs,r.stateNode));break;case 4:a=Cs,n=Jr,Cs=r.stateNode.containerInfo,Jr=!0,Ya(t,s,r),Cs=a,Jr=n;break;case 0:case 11:case 14:case 15:if(!Bs&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var i=n,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Du(r,s,l),n=n.next}while(n!==a)}Ya(t,s,r);break;case 1:if(!Bs&&(Ri(r,s),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(o){qt(r,s,o)}Ya(t,s,r);break;case 21:Ya(t,s,r);break;case 22:r.mode&1?(Bs=(a=Bs)||r.memoizedState!==null,Ya(t,s,r),Bs=a):Ya(t,s,r);break;default:Ya(t,s,r)}}function Yh(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new zw),s.forEach(function(a){var n=Qw.bind(null,t,a);r.has(a)||(r.add(a),a.then(n,n))})}}function Wr(t,s){var r=s.deletions;if(r!==null)for(var a=0;a<r.length;a++){var n=r[a];try{var i=t,l=s,o=l;e:for(;o!==null;){switch(o.tag){case 5:Cs=o.stateNode,Jr=!1;break e;case 3:Cs=o.stateNode.containerInfo,Jr=!0;break e;case 4:Cs=o.stateNode.containerInfo,Jr=!0;break e}o=o.return}if(Cs===null)throw Error(Ee(160));Gy(i,l,n),Cs=null,Jr=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){qt(n,s,d)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)qy(s,t),s=s.sibling}function qy(t,s){var r=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wr(s,t),la(t),a&4){try{Wl(3,t,t.return),Od(3,t)}catch(f){qt(t,t.return,f)}try{Wl(5,t,t.return)}catch(f){qt(t,t.return,f)}}break;case 1:Wr(s,t),la(t),a&512&&r!==null&&Ri(r,r.return);break;case 5:if(Wr(s,t),la(t),a&512&&r!==null&&Ri(r,r.return),t.flags&32){var n=t.stateNode;try{ro(n,"")}catch(f){qt(t,t.return,f)}}if(a&4&&(n=t.stateNode,n!=null)){var i=t.memoizedProps,l=r!==null?r.memoizedProps:i,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&fg(n,i),iu(o,l);var d=iu(o,i);for(l=0;l<c.length;l+=2){var u=c[l],p=c[l+1];u==="style"?vg(n,p):u==="dangerouslySetInnerHTML"?yg(n,p):u==="children"?ro(n,p):jx(n,u,p,d)}switch(o){case"input":tu(n,i);break;case"textarea":pg(n,i);break;case"select":var h=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Ii(n,!!i.multiple,g,!1):h!==!!i.multiple&&(i.defaultValue!=null?Ii(n,!!i.multiple,i.defaultValue,!0):Ii(n,!!i.multiple,i.multiple?[]:"",!1))}n[mo]=i}catch(f){qt(t,t.return,f)}}break;case 6:if(Wr(s,t),la(t),a&4){if(t.stateNode===null)throw Error(Ee(162));n=t.stateNode,i=t.memoizedProps;try{n.nodeValue=i}catch(f){qt(t,t.return,f)}}break;case 3:if(Wr(s,t),la(t),a&4&&r!==null&&r.memoizedState.isDehydrated)try{lo(s.containerInfo)}catch(f){qt(t,t.return,f)}break;case 4:Wr(s,t),la(t);break;case 13:Wr(s,t),la(t),n=t.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(em=ts())),a&4&&Yh(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(Bs=(d=Bs)||u,Wr(s,t),Bs=d):Wr(s,t),la(t),a&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for($e=t,u=t.child;u!==null;){for(p=$e=u;$e!==null;){switch(h=$e,g=h.child,h.tag){case 0:case 11:case 14:case 15:Wl(4,h,h.return);break;case 1:Ri(h,h.return);var x=h.stateNode;if(typeof x.componentWillUnmount=="function"){a=h,r=h.return;try{s=a,x.props=s.memoizedProps,x.state=s.memoizedState,x.componentWillUnmount()}catch(f){qt(a,r,f)}}break;case 5:Ri(h,h.return);break;case 22:if(h.memoizedState!==null){Qh(p);continue}}g!==null?(g.return=h,$e=g):Qh(p)}u=u.sibling}e:for(u=null,p=t;;){if(p.tag===5){if(u===null){u=p;try{n=p.stateNode,d?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=p.stateNode,c=p.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=bg("display",l))}catch(f){qt(t,t.return,f)}}}else if(p.tag===6){if(u===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(f){qt(t,t.return,f)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Wr(s,t),la(t),a&4&&Yh(t);break;case 21:break;default:Wr(s,t),la(t)}}function la(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(Hy(r)){var a=r;break e}r=r.return}throw Error(Ee(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(ro(n,""),a.flags&=-33);var i=Kh(t);Ou(t,i,n);break;case 3:case 4:var l=a.stateNode.containerInfo,o=Kh(t);Lu(t,o,l);break;default:throw Error(Ee(161))}}catch(c){qt(t,t.return,c)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Vw(t,s,r){$e=t,Jy(t)}function Jy(t,s,r){for(var a=(t.mode&1)!==0;$e!==null;){var n=$e,i=n.child;if(n.tag===22&&a){var l=n.memoizedState!==null||oc;if(!l){var o=n.alternate,c=o!==null&&o.memoizedState!==null||Bs;o=oc;var d=Bs;if(oc=l,(Bs=c)&&!d)for($e=n;$e!==null;)l=$e,c=l.child,l.tag===22&&l.memoizedState!==null?Zh(n):c!==null?(c.return=l,$e=c):Zh(n);for(;i!==null;)$e=i,Jy(i),i=i.sibling;$e=n,oc=o,Bs=d}Xh(t)}else n.subtreeFlags&8772&&i!==null?(i.return=n,$e=i):Xh(t)}}function Xh(t){for(;$e!==null;){var s=$e;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Bs||Od(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!Bs)if(r===null)a.componentDidMount();else{var n=s.elementType===s.type?r.memoizedProps:qr(s.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=s.updateQueue;i!==null&&Lh(s,i,a);break;case 3:var l=s.updateQueue;if(l!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}Lh(s,l,r)}break;case 5:var o=s.stateNode;if(r===null&&s.flags&4){r=o;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var d=s.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var p=u.dehydrated;p!==null&&lo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}Bs||s.flags&512&&Ru(s)}catch(h){qt(s,s.return,h)}}if(s===t){$e=null;break}if(r=s.sibling,r!==null){r.return=s.return,$e=r;break}$e=s.return}}function Qh(t){for(;$e!==null;){var s=$e;if(s===t){$e=null;break}var r=s.sibling;if(r!==null){r.return=s.return,$e=r;break}$e=s.return}}function Zh(t){for(;$e!==null;){var s=$e;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{Od(4,s)}catch(c){qt(s,r,c)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var n=s.return;try{a.componentDidMount()}catch(c){qt(s,n,c)}}var i=s.return;try{Ru(s)}catch(c){qt(s,i,c)}break;case 5:var l=s.return;try{Ru(s)}catch(c){qt(s,l,c)}}}catch(c){qt(s,s.return,c)}if(s===t){$e=null;break}var o=s.sibling;if(o!==null){o.return=s.return,$e=o;break}$e=s.return}}var Hw=Math.ceil,od=Ga.ReactCurrentDispatcher,Qx=Ga.ReactCurrentOwner,Lr=Ga.ReactCurrentBatchConfig,Nt=0,Ns=null,ls=null,Ts=0,hr=0,Li=An(0),hs=0,bo=null,ri=0,Id=0,Zx=0,Vl=null,ir=null,em=0,el=1/0,Ta=null,cd=!1,Iu=null,yn=null,cc=!1,cn=null,dd=0,Hl=0,Mu=null,Rc=-1,Lc=0;function Xs(){return Nt&6?ts():Rc!==-1?Rc:Rc=ts()}function bn(t){return t.mode&1?Nt&2&&Ts!==0?Ts&-Ts:Tw.transition!==null?(Lc===0&&(Lc=Pg()),Lc):(t=Ft,t!==0||(t=window.event,t=t===void 0?16:Bg(t.type)),t):1}function sa(t,s,r,a){if(50<Hl)throw Hl=0,Mu=null,Error(Ee(185));Io(t,r,a),(!(Nt&2)||t!==Ns)&&(t===Ns&&(!(Nt&2)&&(Id|=r),hs===4&&nn(t,Ts)),ur(t,a),r===1&&Nt===0&&!(s.mode&1)&&(el=ts()+500,Dd&&Fn()))}function ur(t,s){var r=t.callbackNode;T1(t,s);var a=qc(t,t===Ns?Ts:0);if(a===0)r!==null&&oh(r),t.callbackNode=null,t.callbackPriority=0;else if(s=a&-a,t.callbackPriority!==s){if(r!=null&&oh(r),s===1)t.tag===0?_w(ef.bind(null,t)):ay(ef.bind(null,t)),Nw(function(){!(Nt&6)&&Fn()}),r=null;else{switch(Dg(a)){case 1:r=Cx;break;case 4:r=Ag;break;case 16:r=Gc;break;case 536870912:r=Fg;break;default:r=Gc}r=sb(r,Ky.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function Ky(t,s){if(Rc=-1,Lc=0,Nt&6)throw Error(Ee(327));var r=t.callbackNode;if(zi()&&t.callbackNode!==r)return null;var a=qc(t,t===Ns?Ts:0);if(a===0)return null;if(a&30||a&t.expiredLanes||s)s=ud(t,a);else{s=a;var n=Nt;Nt|=2;var i=Xy();(Ns!==t||Ts!==s)&&(Ta=null,el=ts()+500,Jn(t,s));do try{Jw();break}catch(o){Yy(t,o)}while(!0);Bx(),od.current=i,Nt=n,ls!==null?s=0:(Ns=null,Ts=0,s=hs)}if(s!==0){if(s===2&&(n=uu(t),n!==0&&(a=n,s=Bu(t,n))),s===1)throw r=bo,Jn(t,0),nn(t,a),ur(t,ts()),r;if(s===6)nn(t,a);else{if(n=t.current.alternate,!(a&30)&&!Gw(n)&&(s=ud(t,a),s===2&&(i=uu(t),i!==0&&(a=i,s=Bu(t,i))),s===1))throw r=bo,Jn(t,0),nn(t,a),ur(t,ts()),r;switch(t.finishedWork=n,t.finishedLanes=a,s){case 0:case 1:throw Error(Ee(345));case 2:Mn(t,ir,Ta);break;case 3:if(nn(t,a),(a&130023424)===a&&(s=em+500-ts(),10<s)){if(qc(t,0)!==0)break;if(n=t.suspendedLanes,(n&a)!==a){Xs(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=bu(Mn.bind(null,t,ir,Ta),s);break}Mn(t,ir,Ta);break;case 4:if(nn(t,a),(a&4194240)===a)break;for(s=t.eventTimes,n=-1;0<a;){var l=31-ta(a);i=1<<l,l=s[l],l>n&&(n=l),a&=~i}if(a=n,a=ts()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Hw(a/1960))-a,10<a){t.timeoutHandle=bu(Mn.bind(null,t,ir,Ta),a);break}Mn(t,ir,Ta);break;case 5:Mn(t,ir,Ta);break;default:throw Error(Ee(329))}}}return ur(t,ts()),t.callbackNode===r?Ky.bind(null,t):null}function Bu(t,s){var r=Vl;return t.current.memoizedState.isDehydrated&&(Jn(t,s).flags|=256),t=ud(t,s),t!==2&&(s=ir,ir=r,s!==null&&$u(s)),t}function $u(t){ir===null?ir=t:ir.push.apply(ir,t)}function Gw(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var n=r[a],i=n.getSnapshot;n=n.value;try{if(!na(i(),n))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function nn(t,s){for(s&=~Zx,s&=~Id,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-ta(s),a=1<<r;t[r]=-1,s&=~a}}function ef(t){if(Nt&6)throw Error(Ee(327));zi();var s=qc(t,0);if(!(s&1))return ur(t,ts()),null;var r=ud(t,s);if(t.tag!==0&&r===2){var a=uu(t);a!==0&&(s=a,r=Bu(t,a))}if(r===1)throw r=bo,Jn(t,0),nn(t,s),ur(t,ts()),r;if(r===6)throw Error(Ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Mn(t,ir,Ta),ur(t,ts()),null}function tm(t,s){var r=Nt;Nt|=1;try{return t(s)}finally{Nt=r,Nt===0&&(el=ts()+500,Dd&&Fn())}}function ai(t){cn!==null&&cn.tag===0&&!(Nt&6)&&zi();var s=Nt;Nt|=1;var r=Lr.transition,a=Ft;try{if(Lr.transition=null,Ft=1,t)return t()}finally{Ft=a,Lr.transition=r,Nt=s,!(Nt&6)&&Fn()}}function sm(){hr=Li.current,It(Li)}function Jn(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,ww(r)),ls!==null)for(r=ls.return;r!==null;){var a=r;switch(Ox(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Qc();break;case 3:Qi(),It(cr),It(Vs),Hx();break;case 5:Vx(a);break;case 4:Qi();break;case 13:It(Wt);break;case 19:It(Wt);break;case 10:$x(a.type._context);break;case 22:case 23:sm()}r=r.return}if(Ns=t,ls=t=vn(t.current,null),Ts=hr=s,hs=0,bo=null,Zx=Id=ri=0,ir=Vl=null,Vn!==null){for(s=0;s<Vn.length;s++)if(r=Vn[s],a=r.interleaved,a!==null){r.interleaved=null;var n=a.next,i=r.pending;if(i!==null){var l=i.next;i.next=n,a.next=l}r.pending=a}Vn=null}return t}function Yy(t,s){do{var r=ls;try{if(Bx(),Fc.current=ld,id){for(var a=Ht.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}id=!1}if(si=0,js=xs=Ht=null,zl=!1,po=0,Qx.current=null,r===null||r.return===null){hs=1,bo=s,ls=null;break}e:{var i=t,l=r.return,o=r,c=s;if(s=Ts,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,p=u.tag;if(!(u.mode&1)&&(p===0||p===11||p===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=Uh(l);if(g!==null){g.flags&=-257,zh(g,l,o,i,s),g.mode&1&&$h(i,d,s),s=g,c=d;var x=s.updateQueue;if(x===null){var f=new Set;f.add(c),s.updateQueue=f}else x.add(c);break e}else{if(!(s&1)){$h(i,d,s),rm();break e}c=Error(Ee(426))}}else if(Ut&&o.mode&1){var m=Uh(l);if(m!==null){!(m.flags&65536)&&(m.flags|=256),zh(m,l,o,i,s),Ix(Zi(c,o));break e}}i=c=Zi(c,o),hs!==4&&(hs=2),Vl===null?Vl=[i]:Vl.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,s&=-s,i.lanes|=s;var j=Dy(i,c,s);Rh(i,j);break e;case 1:o=c;var v=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(yn===null||!yn.has(w)))){i.flags|=65536,s&=-s,i.lanes|=s;var S=Ry(i,o,s);Rh(i,S);break e}}i=i.return}while(i!==null)}Zy(r)}catch(F){s=F,ls===r&&r!==null&&(ls=r=r.return);continue}break}while(!0)}function Xy(){var t=od.current;return od.current=ld,t===null?ld:t}function rm(){(hs===0||hs===3||hs===2)&&(hs=4),Ns===null||!(ri&268435455)&&!(Id&268435455)||nn(Ns,Ts)}function ud(t,s){var r=Nt;Nt|=2;var a=Xy();(Ns!==t||Ts!==s)&&(Ta=null,Jn(t,s));do try{qw();break}catch(n){Yy(t,n)}while(!0);if(Bx(),Nt=r,od.current=a,ls!==null)throw Error(Ee(261));return Ns=null,Ts=0,hs}function qw(){for(;ls!==null;)Qy(ls)}function Jw(){for(;ls!==null&&!b1();)Qy(ls)}function Qy(t){var s=tb(t.alternate,t,hr);t.memoizedProps=t.pendingProps,s===null?Zy(t):ls=s,Qx.current=null}function Zy(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=Uw(r,s),r!==null){r.flags&=32767,ls=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{hs=6,ls=null;return}}else if(r=$w(r,s,hr),r!==null){ls=r;return}if(s=s.sibling,s!==null){ls=s;return}ls=s=t}while(s!==null);hs===0&&(hs=5)}function Mn(t,s,r){var a=Ft,n=Lr.transition;try{Lr.transition=null,Ft=1,Kw(t,s,r,a)}finally{Lr.transition=n,Ft=a}return null}function Kw(t,s,r,a){do zi();while(cn!==null);if(Nt&6)throw Error(Ee(327));r=t.finishedWork;var n=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Ee(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(E1(t,i),t===Ns&&(ls=Ns=null,Ts=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||cc||(cc=!0,sb(Gc,function(){return zi(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Lr.transition,Lr.transition=null;var l=Ft;Ft=1;var o=Nt;Nt|=4,Qx.current=null,Ww(t,r),qy(r,t),fw(gu),Jc=!!pu,gu=pu=null,t.current=r,Vw(r),v1(),Nt=o,Ft=l,Lr.transition=i}else t.current=r;if(cc&&(cc=!1,cn=t,dd=n),i=t.pendingLanes,i===0&&(yn=null),N1(r.stateNode),ur(t,ts()),s!==null)for(a=t.onRecoverableError,r=0;r<s.length;r++)n=s[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(cd)throw cd=!1,t=Iu,Iu=null,t;return dd&1&&t.tag!==0&&zi(),i=t.pendingLanes,i&1?t===Mu?Hl++:(Hl=0,Mu=t):Hl=0,Fn(),null}function zi(){if(cn!==null){var t=Dg(dd),s=Lr.transition,r=Ft;try{if(Lr.transition=null,Ft=16>t?16:t,cn===null)var a=!1;else{if(t=cn,cn=null,dd=0,Nt&6)throw Error(Ee(331));var n=Nt;for(Nt|=4,$e=t.current;$e!==null;){var i=$e,l=i.child;if($e.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for($e=d;$e!==null;){var u=$e;switch(u.tag){case 0:case 11:case 15:Wl(8,u,i)}var p=u.child;if(p!==null)p.return=u,$e=p;else for(;$e!==null;){u=$e;var h=u.sibling,g=u.return;if(Vy(u),u===d){$e=null;break}if(h!==null){h.return=g,$e=h;break}$e=g}}}var x=i.alternate;if(x!==null){var f=x.child;if(f!==null){x.child=null;do{var m=f.sibling;f.sibling=null,f=m}while(f!==null)}}$e=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,$e=l;else e:for(;$e!==null;){if(i=$e,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Wl(9,i,i.return)}var j=i.sibling;if(j!==null){j.return=i.return,$e=j;break e}$e=i.return}}var v=t.current;for($e=v;$e!==null;){l=$e;var w=l.child;if(l.subtreeFlags&2064&&w!==null)w.return=l,$e=w;else e:for(l=v;$e!==null;){if(o=$e,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Od(9,o)}}catch(F){qt(o,o.return,F)}if(o===l){$e=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,$e=S;break e}$e=o.return}}if(Nt=n,Fn(),ma&&typeof ma.onPostCommitFiberRoot=="function")try{ma.onPostCommitFiberRoot(Td,t)}catch{}a=!0}return a}finally{Ft=r,Lr.transition=s}}return!1}function tf(t,s,r){s=Zi(r,s),s=Dy(t,s,1),t=gn(t,s,1),s=Xs(),t!==null&&(Io(t,1,s),ur(t,s))}function qt(t,s,r){if(t.tag===3)tf(t,t,r);else for(;s!==null;){if(s.tag===3){tf(s,t,r);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(yn===null||!yn.has(a))){t=Zi(r,t),t=Ry(s,t,1),s=gn(s,t,1),t=Xs(),s!==null&&(Io(s,1,t),ur(s,t));break}}s=s.return}}function Yw(t,s,r){var a=t.pingCache;a!==null&&a.delete(s),s=Xs(),t.pingedLanes|=t.suspendedLanes&r,Ns===t&&(Ts&r)===r&&(hs===4||hs===3&&(Ts&130023424)===Ts&&500>ts()-em?Jn(t,0):Zx|=r),ur(t,s)}function eb(t,s){s===0&&(t.mode&1?(s=Zo,Zo<<=1,!(Zo&130023424)&&(Zo=4194304)):s=1);var r=Xs();t=Ua(t,s),t!==null&&(Io(t,s,r),ur(t,r))}function Xw(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),eb(t,r)}function Qw(t,s){var r=0;switch(t.tag){case 13:var a=t.stateNode,n=t.memoizedState;n!==null&&(r=n.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(Ee(314))}a!==null&&a.delete(s),eb(t,r)}var tb;tb=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||cr.current)lr=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return lr=!1,Bw(t,s,r);lr=!!(t.flags&131072)}else lr=!1,Ut&&s.flags&1048576&&ny(s,td,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;Dc(t,s),t=s.pendingProps;var n=Ki(s,Vs.current);Ui(s,r),n=qx(null,s,a,t,n,r);var i=Jx();return s.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,dr(a)?(i=!0,Zc(s)):i=!1,s.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,zx(s),n.updater=Ld,s.stateNode=n,n._reactInternals=s,Cu(s,a,t,r),s=Eu(null,s,a,!0,i,r)):(s.tag=0,Ut&&i&&Lx(s),qs(null,s,n,r),s=s.child),s;case 16:a=s.elementType;e:{switch(Dc(t,s),t=s.pendingProps,n=a._init,a=n(a._payload),s.type=a,n=s.tag=eN(a),t=qr(a,t),n){case 0:s=Tu(null,s,a,t,r);break e;case 1:s=Hh(null,s,a,t,r);break e;case 11:s=Wh(null,s,a,t,r);break e;case 14:s=Vh(null,s,a,qr(a.type,t),r);break e}throw Error(Ee(306,a,""))}return s;case 0:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:qr(a,n),Tu(t,s,a,n,r);case 1:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:qr(a,n),Hh(t,s,a,n,r);case 3:e:{if(My(s),t===null)throw Error(Ee(387));a=s.pendingProps,i=s.memoizedState,n=i.element,uy(t,s),ad(s,a,null,r);var l=s.memoizedState;if(a=l.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},s.updateQueue.baseState=i,s.memoizedState=i,s.flags&256){n=Zi(Error(Ee(423)),s),s=Gh(t,s,a,r,n);break e}else if(a!==n){n=Zi(Error(Ee(424)),s),s=Gh(t,s,a,r,n);break e}else for(yr=pn(s.stateNode.containerInfo.firstChild),br=s,Ut=!0,Xr=null,r=cy(s,null,a,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Yi(),a===n){s=za(t,s,r);break e}qs(t,s,a,r)}s=s.child}return s;case 5:return xy(s),t===null&&Nu(s),a=s.type,n=s.pendingProps,i=t!==null?t.memoizedProps:null,l=n.children,yu(a,n)?l=null:i!==null&&yu(a,i)&&(s.flags|=32),Iy(t,s),qs(t,s,l,r),s.child;case 6:return t===null&&Nu(s),null;case 13:return By(t,s,r);case 4:return Wx(s,s.stateNode.containerInfo),a=s.pendingProps,t===null?s.child=Xi(s,null,a,r):qs(t,s,a,r),s.child;case 11:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:qr(a,n),Wh(t,s,a,n,r);case 7:return qs(t,s,s.pendingProps,r),s.child;case 8:return qs(t,s,s.pendingProps.children,r),s.child;case 12:return qs(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(a=s.type._context,n=s.pendingProps,i=s.memoizedProps,l=n.value,Rt(sd,a._currentValue),a._currentValue=l,i!==null)if(na(i.value,l)){if(i.children===n.children&&!cr.current){s=za(t,s,r);break e}}else for(i=s.child,i!==null&&(i.return=s);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===a){if(i.tag===1){c=Ra(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),ku(i.return,r,s),o.lanes|=r;break}c=c.next}}else if(i.tag===10)l=i.type===s.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(Ee(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),ku(l,r,s),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===s){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}qs(t,s,n.children,r),s=s.child}return s;case 9:return n=s.type,a=s.pendingProps.children,Ui(s,r),n=Or(n),a=a(n),s.flags|=1,qs(t,s,a,r),s.child;case 14:return a=s.type,n=qr(a,s.pendingProps),n=qr(a.type,n),Vh(t,s,a,n,r);case 15:return Ly(t,s,s.type,s.pendingProps,r);case 17:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:qr(a,n),Dc(t,s),s.tag=1,dr(a)?(t=!0,Zc(s)):t=!1,Ui(s,r),Py(s,a,n),Cu(s,a,n,r),Eu(null,s,a,!0,t,r);case 19:return $y(t,s,r);case 22:return Oy(t,s,r)}throw Error(Ee(156,s.tag))};function sb(t,s){return Eg(t,s)}function Zw(t,s,r,a){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(t,s,r,a){return new Zw(t,s,r,a)}function am(t){return t=t.prototype,!(!t||!t.isReactComponent)}function eN(t){if(typeof t=="function")return am(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nx)return 11;if(t===kx)return 14}return 2}function vn(t,s){var r=t.alternate;return r===null?(r=Rr(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Oc(t,s,r,a,n,i){var l=2;if(a=t,typeof t=="function")am(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Si:return Kn(r.children,n,i,s);case wx:l=8,n|=8;break;case Y0:return t=Rr(12,r,s,n|2),t.elementType=Y0,t.lanes=i,t;case X0:return t=Rr(13,r,s,n),t.elementType=X0,t.lanes=i,t;case Q0:return t=Rr(19,r,s,n),t.elementType=Q0,t.lanes=i,t;case xg:return Md(r,n,i,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dg:l=10;break e;case ug:l=9;break e;case Nx:l=11;break e;case kx:l=14;break e;case tn:l=16,a=null;break e}throw Error(Ee(130,t==null?t:typeof t,""))}return s=Rr(l,r,s,n),s.elementType=t,s.type=a,s.lanes=i,s}function Kn(t,s,r,a){return t=Rr(7,t,a,s),t.lanes=r,t}function Md(t,s,r,a){return t=Rr(22,t,a,s),t.elementType=xg,t.lanes=r,t.stateNode={isHidden:!1},t}function N0(t,s,r){return t=Rr(6,t,null,s),t.lanes=r,t}function k0(t,s,r){return s=Rr(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function tN(t,s,r,a,n){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=a0(0),this.expirationTimes=a0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=a0(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function nm(t,s,r,a,n,i,l,o,c){return t=new tN(t,s,r,o,c),s===1?(s=1,i===!0&&(s|=8)):s=0,i=Rr(3,null,null,s),t.current=i,i.stateNode=t,i.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},zx(i),t}function sN(t,s,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ki,key:a==null?null:""+a,children:t,containerInfo:s,implementation:r}}function rb(t){if(!t)return Sn;t=t._reactInternals;e:{if(xi(t)!==t||t.tag!==1)throw Error(Ee(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(dr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(Ee(171))}if(t.tag===1){var r=t.type;if(dr(r))return ry(t,r,s)}return s}function ab(t,s,r,a,n,i,l,o,c){return t=nm(r,a,!0,t,n,i,l,o,c),t.context=rb(null),r=t.current,a=Xs(),n=bn(r),i=Ra(a,n),i.callback=s??null,gn(r,i,n),t.current.lanes=n,Io(t,n,a),ur(t,a),t}function Bd(t,s,r,a){var n=s.current,i=Xs(),l=bn(n);return r=rb(r),s.context===null?s.context=r:s.pendingContext=r,s=Ra(i,l),s.payload={element:t},a=a===void 0?null:a,a!==null&&(s.callback=a),t=gn(n,s,l),t!==null&&(sa(t,n,l,i),Ac(t,n,l)),l}function xd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sf(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function im(t,s){sf(t,s),(t=t.alternate)&&sf(t,s)}function rN(){return null}var nb=typeof reportError=="function"?reportError:function(t){console.error(t)};function lm(t){this._internalRoot=t}$d.prototype.render=lm.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(Ee(409));Bd(t,s,null,null)};$d.prototype.unmount=lm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;ai(function(){Bd(null,t,null,null)}),s[$a]=null}};function $d(t){this._internalRoot=t}$d.prototype.unstable_scheduleHydration=function(t){if(t){var s=Og();t={blockedOn:null,target:t,priority:s};for(var r=0;r<an.length&&s!==0&&s<an[r].priority;r++);an.splice(r,0,t),r===0&&Mg(t)}};function om(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ud(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function rf(){}function aN(t,s,r,a,n){if(n){if(typeof a=="function"){var i=a;a=function(){var d=xd(l);i.call(d)}}var l=ab(s,a,t,0,null,!1,!1,"",rf);return t._reactRootContainer=l,t[$a]=l.current,uo(t.nodeType===8?t.parentNode:t),ai(),l}for(;n=t.lastChild;)t.removeChild(n);if(typeof a=="function"){var o=a;a=function(){var d=xd(c);o.call(d)}}var c=nm(t,0,!1,null,null,!1,!1,"",rf);return t._reactRootContainer=c,t[$a]=c.current,uo(t.nodeType===8?t.parentNode:t),ai(function(){Bd(s,c,r,a)}),c}function zd(t,s,r,a,n){var i=r._reactRootContainer;if(i){var l=i;if(typeof n=="function"){var o=n;n=function(){var c=xd(l);o.call(c)}}Bd(s,l,t,n)}else l=aN(r,s,t,n,a);return xd(l)}Rg=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=Tl(s.pendingLanes);r!==0&&(_x(s,r|1),ur(s,ts()),!(Nt&6)&&(el=ts()+500,Fn()))}break;case 13:ai(function(){var a=Ua(t,1);if(a!==null){var n=Xs();sa(a,t,1,n)}}),im(t,1)}};Tx=function(t){if(t.tag===13){var s=Ua(t,134217728);if(s!==null){var r=Xs();sa(s,t,134217728,r)}im(t,134217728)}};Lg=function(t){if(t.tag===13){var s=bn(t),r=Ua(t,s);if(r!==null){var a=Xs();sa(r,t,s,a)}im(t,s)}};Og=function(){return Ft};Ig=function(t,s){var r=Ft;try{return Ft=t,s()}finally{Ft=r}};ou=function(t,s,r){switch(s){case"input":if(tu(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var a=r[s];if(a!==t&&a.form===t.form){var n=Pd(a);if(!n)throw Error(Ee(90));hg(a),tu(a,n)}}}break;case"textarea":pg(t,r);break;case"select":s=r.value,s!=null&&Ii(t,!!r.multiple,s,!1)}};Ng=tm;kg=ai;var nN={usingClientEntryPoint:!1,Events:[Bo,Ei,Pd,jg,wg,tm]},jl={findFiberByHostInstance:Wn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iN={bundleType:jl.bundleType,version:jl.version,rendererPackageName:jl.rendererPackageName,rendererConfig:jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ga.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_g(t),t===null?null:t.stateNode},findFiberByHostInstance:jl.findFiberByHostInstance||rN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dc.isDisabled&&dc.supportsFiber)try{Td=dc.inject(iN),ma=dc}catch{}}Nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nN;Nr.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!om(s))throw Error(Ee(200));return sN(t,s,null,r)};Nr.createRoot=function(t,s){if(!om(t))throw Error(Ee(299));var r=!1,a="",n=nb;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(n=s.onRecoverableError)),s=nm(t,1,!1,null,null,r,!1,a,n),t[$a]=s.current,uo(t.nodeType===8?t.parentNode:t),new lm(s)};Nr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(Ee(188)):(t=Object.keys(t).join(","),Error(Ee(268,t)));return t=_g(s),t=t===null?null:t.stateNode,t};Nr.flushSync=function(t){return ai(t)};Nr.hydrate=function(t,s,r){if(!Ud(s))throw Error(Ee(200));return zd(null,t,s,!0,r)};Nr.hydrateRoot=function(t,s,r){if(!om(t))throw Error(Ee(405));var a=r!=null&&r.hydratedSources||null,n=!1,i="",l=nb;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),s=ab(s,null,t,1,r??null,n,!1,i,l),t[$a]=s.current,uo(t),a)for(t=0;t<a.length;t++)r=a[t],n=r._getVersion,n=n(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,n]:s.mutableSourceEagerHydrationData.push(r,n);return new $d(s)};Nr.render=function(t,s,r){if(!Ud(s))throw Error(Ee(200));return zd(null,t,s,!1,r)};Nr.unmountComponentAtNode=function(t){if(!Ud(t))throw Error(Ee(40));return t._reactRootContainer?(ai(function(){zd(null,null,t,!1,function(){t._reactRootContainer=null,t[$a]=null})}),!0):!1};Nr.unstable_batchedUpdates=tm;Nr.unstable_renderSubtreeIntoContainer=function(t,s,r,a){if(!Ud(r))throw Error(Ee(200));if(t==null||t._reactInternals===void 0)throw Error(Ee(38));return zd(t,s,r,!1,a)};Nr.version="18.3.1-next-f1338f8080-20240426";function ib(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ib)}catch(t){console.error(t)}}ib(),ig.exports=Nr;var cm=ig.exports;const lN=Jp(cm),oN=qp({__proto__:null,default:lN},[cm]);var af=cm;J0.createRoot=af.createRoot,J0.hydrateRoot=af.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bt(){return Bt=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Bt.apply(this,arguments)}var Zt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Zt||(Zt={}));const nf="popstate";function cN(t){t===void 0&&(t={});function s(a,n){let{pathname:i,search:l,hash:o}=a.location;return vo("",{pathname:i,search:l,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:ii(n)}return uN(s,r,null,t)}function nt(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function ni(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function dN(){return Math.random().toString(36).substr(2,8)}function lf(t,s){return{usr:t.state,key:t.key,idx:s}}function vo(t,s,r,a){return r===void 0&&(r=null),Bt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?qa(s):s,{state:r,key:s&&s.key||a||dN()})}function ii(t){let{pathname:s="/",search:r="",hash:a=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(s+=a.charAt(0)==="#"?a:"#"+a),s}function qa(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let a=t.indexOf("?");a>=0&&(s.search=t.substr(a),t=t.substr(0,a)),t&&(s.pathname=t)}return s}function uN(t,s,r,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:i=!1}=a,l=n.history,o=Zt.Pop,c=null,d=u();d==null&&(d=0,l.replaceState(Bt({},l.state,{idx:d}),""));function u(){return(l.state||{idx:null}).idx}function p(){o=Zt.Pop;let m=u(),j=m==null?null:m-d;d=m,c&&c({action:o,location:f.location,delta:j})}function h(m,j){o=Zt.Push;let v=vo(f.location,m,j);d=u()+1;let w=lf(v,d),S=f.createHref(v);try{l.pushState(w,"",S)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;n.location.assign(S)}i&&c&&c({action:o,location:f.location,delta:1})}function g(m,j){o=Zt.Replace;let v=vo(f.location,m,j);d=u();let w=lf(v,d),S=f.createHref(v);l.replaceState(w,"",S),i&&c&&c({action:o,location:f.location,delta:0})}function x(m){let j=n.location.origin!=="null"?n.location.origin:n.location.href,v=typeof m=="string"?m:ii(m);return v=v.replace(/ $/,"%20"),nt(j,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,j)}let f={get action(){return o},get location(){return t(n,l)},listen(m){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(nf,p),c=m,()=>{n.removeEventListener(nf,p),c=null}},createHref(m){return s(n,m)},createURL:x,encodeLocation(m){let j=x(m);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:h,replace:g,go(m){return l.go(m)}};return f}var At;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(At||(At={}));const xN=new Set(["lazy","caseSensitive","path","id","index","children"]);function mN(t){return t.index===!0}function md(t,s,r,a){return r===void 0&&(r=[]),a===void 0&&(a={}),t.map((n,i)=>{let l=[...r,String(i)],o=typeof n.id=="string"?n.id:l.join("-");if(nt(n.index!==!0||!n.children,"Cannot specify children on an index route"),nt(!a[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),mN(n)){let c=Bt({},n,s(n),{id:o});return a[o]=c,c}else{let c=Bt({},n,s(n),{id:o,children:void 0});return a[o]=c,n.children&&(c.children=md(n.children,s,l,a)),c}})}function $n(t,s,r){return r===void 0&&(r="/"),Ic(t,s,r,!1)}function Ic(t,s,r,a){let n=typeof s=="string"?qa(s):s,i=ll(n.pathname||"/",r);if(i==null)return null;let l=lb(t);fN(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=CN(i);o=kN(l[c],d,a)}return o}function hN(t,s){let{route:r,pathname:a,params:n}=t;return{id:r.id,pathname:a,params:n,data:s[r.id],handle:r.handle}}function lb(t,s,r,a){s===void 0&&(s=[]),r===void 0&&(r=[]),a===void 0&&(a="");let n=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(nt(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let d=La([a,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(nt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),lb(i.children,s,u,d)),!(i.path==null&&!i.index)&&s.push({path:d,score:wN(d,i.index),routesMeta:u})};return t.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))n(i,l);else for(let c of ob(i.path))n(i,l,c)}),s}function ob(t){let s=t.split("/");if(s.length===0)return[];let[r,...a]=s,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let l=ob(a.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),n&&o.push(...l),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function fN(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:NN(s.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const pN=/^:[\w-]+$/,gN=3,yN=2,bN=1,vN=10,jN=-2,of=t=>t==="*";function wN(t,s){let r=t.split("/"),a=r.length;return r.some(of)&&(a+=jN),s&&(a+=yN),r.filter(n=>!of(n)).reduce((n,i)=>n+(pN.test(i)?gN:i===""?bN:vN),a)}function NN(t,s){return t.length===s.length&&t.slice(0,-1).every((a,n)=>a===s[n])?t[t.length-1]-s[s.length-1]:0}function kN(t,s,r){r===void 0&&(r=!1);let{routesMeta:a}=t,n={},i="/",l=[];for(let o=0;o<a.length;++o){let c=a[o],d=o===a.length-1,u=i==="/"?s:s.slice(i.length)||"/",p=cf({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),h=c.route;if(!p&&d&&r&&!a[a.length-1].route.index&&(p=cf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!p)return null;Object.assign(n,p.params),l.push({params:n,pathname:La([i,p.pathname]),pathnameBase:AN(La([i,p.pathnameBase])),route:h}),p.pathnameBase!=="/"&&(i=La([i,p.pathnameBase]))}return l}function cf(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,a]=SN(t.path,t.caseSensitive,t.end),n=s.match(r);if(!n)return null;let i=n[0],l=i.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:a.reduce((d,u,p)=>{let{paramName:h,isOptional:g}=u;if(h==="*"){let f=o[p]||"";l=i.slice(0,i.length-f.length).replace(/(.)\/+$/,"$1")}const x=o[p];return g&&!x?d[h]=void 0:d[h]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:t}}function SN(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),ni(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(a.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,s?void 0:"i"),a]}function CN(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return ni(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function ll(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,a=t.charAt(r);return a&&a!=="/"?null:t.slice(r)||"/"}const _N=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TN=t=>_N.test(t);function EN(t,s){s===void 0&&(s="/");let{pathname:r,search:a="",hash:n=""}=typeof t=="string"?qa(t):t,i;if(r)if(TN(r))i=r;else{if(r.includes("//")){let l=r;r=r.replace(/\/\/+/g,"/"),ni(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+r))}r.startsWith("/")?i=df(r.substring(1),"/"):i=df(r,s)}else i=s;return{pathname:i,search:FN(a),hash:PN(n)}}function df(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function S0(t,s,r,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cb(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function Wd(t,s){let r=cb(t);return s?r.map((a,n)=>n===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function Vd(t,s,r,a){a===void 0&&(a=!1);let n;typeof t=="string"?n=qa(t):(n=Bt({},t),nt(!n.pathname||!n.pathname.includes("?"),S0("?","pathname","search",n)),nt(!n.pathname||!n.pathname.includes("#"),S0("#","pathname","hash",n)),nt(!n.search||!n.search.includes("#"),S0("#","search","hash",n)));let i=t===""||n.pathname==="",l=i?"/":n.pathname,o;if(l==null)o=r;else{let p=s.length-1;if(!a&&l.startsWith("..")){let h=l.split("/");for(;h[0]==="..";)h.shift(),p-=1;n.pathname=h.join("/")}o=p>=0?s[p]:"/"}let c=EN(n,o),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const La=t=>t.join("/").replace(/\/\/+/g,"/"),AN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),FN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,PN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class hd{constructor(s,r,a,n){n===void 0&&(n=!1),this.status=s,this.statusText=r||"",this.internal=n,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}}function jo(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const db=["post","put","patch","delete"],DN=new Set(db),RN=["get",...db],LN=new Set(RN),ON=new Set([301,302,303,307,308]),IN=new Set([307,308]),C0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},MN={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},wl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},dm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,BN=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),ub="remix-router-transitions";function $N(t){const s=t.window?t.window:typeof window<"u"?window:void 0,r=typeof s<"u"&&typeof s.document<"u"&&typeof s.document.createElement<"u",a=!r;nt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let n;if(t.mapRouteProperties)n=t.mapRouteProperties;else if(t.detectErrorBoundary){let te=t.detectErrorBoundary;n=de=>({hasErrorBoundary:te(de)})}else n=BN;let i={},l=md(t.routes,n,void 0,i),o,c=t.basename||"/",d=t.dataStrategy||VN,u=t.patchRoutesOnNavigation,p=Bt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),h=null,g=new Set,x=null,f=null,m=null,j=t.hydrationData!=null,v=$n(l,t.history.location,c),w=!1,S=null;if(v==null&&!u){let te=ar(404,{pathname:t.history.location.pathname}),{matches:de,route:fe}=jf(l);v=de,S={[fe.id]:te}}v&&!t.hydrationData&&Ce(v,l,t.history.location.pathname).active&&(v=null);let F;if(v)if(v.some(te=>te.route.lazy))F=!1;else if(!v.some(te=>te.route.loader))F=!0;else if(p.v7_partialHydration){let te=t.hydrationData?t.hydrationData.loaderData:null,de=t.hydrationData?t.hydrationData.errors:null;if(de){let fe=v.findIndex(pe=>de[pe.route.id]!==void 0);F=v.slice(0,fe+1).every(pe=>!zu(pe.route,te,de))}else F=v.every(fe=>!zu(fe.route,te,de))}else F=t.hydrationData!=null;else if(F=!1,v=[],p.v7_partialHydration){let te=Ce(null,l,t.history.location.pathname);te.active&&te.matches&&(w=!0,v=te.matches)}let E,k={historyAction:t.history.action,location:t.history.location,matches:v,initialized:F,navigation:C0,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||S,fetchers:new Map,blockers:new Map},A=Zt.Pop,y=!1,N,R=!1,T=new Map,z=null,L=!1,O=!1,V=[],Z=new Set,D=new Map,P=0,W=-1,ee=new Map,M=new Set,U=new Map,q=new Map,Y=new Set,K=new Map,le=new Map,J;function ae(){if(h=t.history.listen(te=>{let{action:de,location:fe,delta:pe}=te;if(J){J(),J=void 0;return}ni(le.size===0||pe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ke=ue({currentLocation:k.location,nextLocation:fe,historyAction:de});if(ke&&pe!=null){let I=new Promise(G=>{J=G});t.history.go(pe*-1),xe(ke,{state:"blocked",location:fe,proceed(){xe(ke,{state:"proceeding",proceed:void 0,reset:void 0,location:fe}),I.then(()=>t.history.go(pe))},reset(){let G=new Map(k.blockers);G.set(ke,wl),X({blockers:G})}});return}return Se(de,fe)}),r){ak(s,T);let te=()=>nk(s,T);s.addEventListener("pagehide",te),z=()=>s.removeEventListener("pagehide",te)}return k.initialized||Se(Zt.Pop,k.location,{initialHydration:!0}),E}function he(){h&&h(),z&&z(),g.clear(),N&&N.abort(),k.fetchers.forEach((te,de)=>Ye(de)),k.blockers.forEach((te,de)=>Ur(de))}function Fe(te){return g.add(te),()=>g.delete(te)}function X(te,de){de===void 0&&(de={}),k=Bt({},k,te);let fe=[],pe=[];p.v7_fetcherPersist&&k.fetchers.forEach((ke,I)=>{ke.state==="idle"&&(Y.has(I)?pe.push(I):fe.push(I))}),Y.forEach(ke=>{!k.fetchers.has(ke)&&!D.has(ke)&&pe.push(ke)}),[...g].forEach(ke=>ke(k,{deletedFetchers:pe,viewTransitionOpts:de.viewTransitionOpts,flushSync:de.flushSync===!0})),p.v7_fetcherPersist?(fe.forEach(ke=>k.fetchers.delete(ke)),pe.forEach(ke=>Ye(ke))):pe.forEach(ke=>Y.delete(ke))}function Re(te,de,fe){var pe,ke;let{flushSync:I}=fe===void 0?{}:fe,G=k.actionData!=null&&k.navigation.formMethod!=null&&Kr(k.navigation.formMethod)&&k.navigation.state==="loading"&&((pe=te.state)==null?void 0:pe._isRedirect)!==!0,_;de.actionData?Object.keys(de.actionData).length>0?_=de.actionData:_=null:G?_=k.actionData:_=null;let C=de.loaderData?bf(k.loaderData,de.loaderData,de.matches||[],de.errors):k.loaderData,B=k.blockers;B.size>0&&(B=new Map(B),B.forEach((se,ce)=>B.set(ce,wl)));let H=y===!0||k.navigation.formMethod!=null&&Kr(k.navigation.formMethod)&&((ke=te.state)==null?void 0:ke._isRedirect)!==!0;o&&(l=o,o=void 0),L||A===Zt.Pop||(A===Zt.Push?t.history.push(te,te.state):A===Zt.Replace&&t.history.replace(te,te.state));let Q;if(A===Zt.Pop){let se=T.get(k.location.pathname);se&&se.has(te.pathname)?Q={currentLocation:k.location,nextLocation:te}:T.has(te.pathname)&&(Q={currentLocation:te,nextLocation:k.location})}else if(R){let se=T.get(k.location.pathname);se?se.add(te.pathname):(se=new Set([te.pathname]),T.set(k.location.pathname,se)),Q={currentLocation:k.location,nextLocation:te}}X(Bt({},de,{actionData:_,loaderData:C,historyAction:A,location:te,initialized:!0,navigation:C0,revalidation:"idle",restoreScrollPosition:Ne(te,de.matches||k.matches),preventScrollReset:H,blockers:B}),{viewTransitionOpts:Q,flushSync:I===!0}),A=Zt.Pop,y=!1,R=!1,L=!1,O=!1,V=[]}async function ne(te,de){if(typeof te=="number"){t.history.go(te);return}let fe=Uu(k.location,k.matches,c,p.v7_prependBasename,te,p.v7_relativeSplatPath,de==null?void 0:de.fromRouteId,de==null?void 0:de.relative),{path:pe,submission:ke,error:I}=uf(p.v7_normalizeFormMethod,!1,fe,de),G=k.location,_=vo(k.location,pe,de&&de.state);_=Bt({},_,t.history.encodeLocation(_));let C=de&&de.replace!=null?de.replace:void 0,B=Zt.Push;C===!0?B=Zt.Replace:C===!1||ke!=null&&Kr(ke.formMethod)&&ke.formAction===k.location.pathname+k.location.search&&(B=Zt.Replace);let H=de&&"preventScrollReset"in de?de.preventScrollReset===!0:void 0,Q=(de&&de.flushSync)===!0,se=ue({currentLocation:G,nextLocation:_,historyAction:B});if(se){xe(se,{state:"blocked",location:_,proceed(){xe(se,{state:"proceeding",proceed:void 0,reset:void 0,location:_}),ne(te,de)},reset(){let ce=new Map(k.blockers);ce.set(se,wl),X({blockers:ce})}});return}return await Se(B,_,{submission:ke,pendingError:I,preventScrollReset:H,replace:de&&de.replace,enableViewTransition:de&&de.viewTransition,flushSync:Q})}function _e(){if(ut(),X({revalidation:"loading"}),k.navigation.state!=="submitting"){if(k.navigation.state==="idle"){Se(k.historyAction,k.location,{startUninterruptedRevalidation:!0});return}Se(A||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:R===!0})}}async function Se(te,de,fe){N&&N.abort(),N=null,A=te,L=(fe&&fe.startUninterruptedRevalidation)===!0,Be(k.location,k.matches),y=(fe&&fe.preventScrollReset)===!0,R=(fe&&fe.enableViewTransition)===!0;let pe=o||l,ke=fe&&fe.overrideNavigation,I=fe!=null&&fe.initialHydration&&k.matches&&k.matches.length>0&&!w?k.matches:$n(pe,de,c),G=(fe&&fe.flushSync)===!0;if(I&&k.initialized&&!O&&YN(k.location,de)&&!(fe&&fe.submission&&Kr(fe.submission.formMethod))){Re(de,{matches:I},{flushSync:G});return}let _=Ce(I,pe,de.pathname);if(_.active&&_.matches&&(I=_.matches),!I){let{error:oe,notFoundMatches:re,route:me}=je(de.pathname);Re(de,{matches:re,loaderData:{},errors:{[me.id]:oe}},{flushSync:G});return}N=new AbortController;let C=ji(t.history,de,N.signal,fe&&fe.submission),B;if(fe&&fe.pendingError)B=[Un(I).route.id,{type:At.error,error:fe.pendingError}];else if(fe&&fe.submission&&Kr(fe.submission.formMethod)){let oe=await be(C,de,fe.submission,I,_.active,{replace:fe.replace,flushSync:G});if(oe.shortCircuited)return;if(oe.pendingActionResult){let[re,me]=oe.pendingActionResult;if(fr(me)&&jo(me.error)&&me.error.status===404){N=null,Re(de,{matches:oe.matches,loaderData:{},errors:{[re]:me.error}});return}}I=oe.matches||I,B=oe.pendingActionResult,ke=_0(de,fe.submission),G=!1,_.active=!1,C=ji(t.history,C.url,C.signal)}let{shortCircuited:H,matches:Q,loaderData:se,errors:ce}=await Ie(C,de,I,_.active,ke,fe&&fe.submission,fe&&fe.fetcherSubmission,fe&&fe.replace,fe&&fe.initialHydration===!0,G,B);H||(N=null,Re(de,Bt({matches:Q||I},vf(B),{loaderData:se,errors:ce})))}async function be(te,de,fe,pe,ke,I){I===void 0&&(I={}),ut();let G=sk(de,fe);if(X({navigation:G},{flushSync:I.flushSync===!0}),ke){let B=await Je(pe,de.pathname,te.signal);if(B.type==="aborted")return{shortCircuited:!0};if(B.type==="error"){let H=Un(B.partialMatches).route.id;return{matches:B.partialMatches,pendingActionResult:[H,{type:At.error,error:B.error}]}}else if(B.matches)pe=B.matches;else{let{notFoundMatches:H,error:Q,route:se}=je(de.pathname);return{matches:H,pendingActionResult:[se.id,{type:At.error,error:Q}]}}}let _,C=Al(pe,de);if(!C.route.action&&!C.route.lazy)_={type:At.error,error:ar(405,{method:te.method,pathname:de.pathname,routeId:C.route.id})};else if(_=(await _t("action",k,te,[C],pe,null))[C.route.id],te.signal.aborted)return{shortCircuited:!0};if(Gn(_)){let B;return I&&I.replace!=null?B=I.replace:B=pf(_.response.headers.get("Location"),new URL(te.url),c)===k.location.pathname+k.location.search,await dt(te,_,!0,{submission:fe,replace:B}),{shortCircuited:!0}}if(dn(_))throw ar(400,{type:"defer-action"});if(fr(_)){let B=Un(pe,C.route.id);return(I&&I.replace)!==!0&&(A=Zt.Push),{matches:pe,pendingActionResult:[B.route.id,_]}}return{matches:pe,pendingActionResult:[C.route.id,_]}}async function Ie(te,de,fe,pe,ke,I,G,_,C,B,H){let Q=ke||_0(de,I),se=I||G||Nf(Q),ce=!L&&(!p.v7_partialHydration||!C);if(pe){if(ce){let yt=Ze(H);X(Bt({navigation:Q},yt!==void 0?{actionData:yt}:{}),{flushSync:B})}let et=await Je(fe,de.pathname,te.signal);if(et.type==="aborted")return{shortCircuited:!0};if(et.type==="error"){let yt=Un(et.partialMatches).route.id;return{matches:et.partialMatches,loaderData:{},errors:{[yt]:et.error}}}else if(et.matches)fe=et.matches;else{let{error:yt,notFoundMatches:wt,route:Ds}=je(de.pathname);return{matches:wt,loaderData:{},errors:{[Ds.id]:yt}}}}let oe=o||l,[re,me]=mf(t.history,k,fe,se,de,p.v7_partialHydration&&C===!0,p.v7_skipActionErrorRevalidation,O,V,Z,Y,U,M,oe,c,H);if(ve(et=>!(fe&&fe.some(yt=>yt.route.id===et))||re&&re.some(yt=>yt.route.id===et)),W=++P,re.length===0&&me.length===0){let et=ia();return Re(de,Bt({matches:fe,loaderData:{},errors:H&&fr(H[1])?{[H[0]]:H[1].error}:null},vf(H),et?{fetchers:new Map(k.fetchers)}:{}),{flushSync:B}),{shortCircuited:!0}}if(ce){let et={};if(!pe){et.navigation=Q;let yt=Ze(H);yt!==void 0&&(et.actionData=yt)}me.length>0&&(et.fetchers=ge(me)),X(et,{flushSync:B})}me.forEach(et=>{it(et.key),et.controller&&D.set(et.key,et.controller)});let Te=()=>me.forEach(et=>it(et.key));N&&N.signal.addEventListener("abort",Te);let{loaderResults:Le,fetcherResults:we}=await Ct(k,fe,re,me,te);if(te.signal.aborted)return{shortCircuited:!0};N&&N.signal.removeEventListener("abort",Te),me.forEach(et=>D.delete(et.key));let Pe=uc(Le);if(Pe)return await dt(te,Pe.result,!0,{replace:_}),{shortCircuited:!0};if(Pe=uc(we),Pe)return M.add(Pe.key),await dt(te,Pe.result,!0,{replace:_}),{shortCircuited:!0};let{loaderData:We,errors:ht}=yf(k,fe,Le,H,me,we,K);K.forEach((et,yt)=>{et.subscribe(wt=>{(wt||et.done)&&K.delete(yt)})}),p.v7_partialHydration&&C&&k.errors&&(ht=Bt({},k.errors,ht));let lt=ia(),Tt=Sa(W),Ps=lt||Tt||me.length>0;return Bt({matches:fe,loaderData:We,errors:ht},Ps?{fetchers:new Map(k.fetchers)}:{})}function Ze(te){if(te&&!fr(te[1]))return{[te[0]]:te[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function ge(te){return te.forEach(de=>{let fe=k.fetchers.get(de.key),pe=Nl(void 0,fe?fe.data:void 0);k.fetchers.set(de.key,pe)}),new Map(k.fetchers)}function ie(te,de,fe,pe){if(a)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");it(te);let ke=(pe&&pe.flushSync)===!0,I=o||l,G=Uu(k.location,k.matches,c,p.v7_prependBasename,fe,p.v7_relativeSplatPath,de,pe==null?void 0:pe.relative),_=$n(I,G,c),C=Ce(_,I,G);if(C.active&&C.matches&&(_=C.matches),!_){ye(te,de,ar(404,{pathname:G}),{flushSync:ke});return}let{path:B,submission:H,error:Q}=uf(p.v7_normalizeFormMethod,!0,G,pe);if(Q){ye(te,de,Q,{flushSync:ke});return}let se=Al(_,B),ce=(pe&&pe.preventScrollReset)===!0;if(H&&Kr(H.formMethod)){Ue(te,de,B,se,_,C.active,ke,ce,H);return}U.set(te,{routeId:de,path:B}),St(te,de,B,se,_,C.active,ke,ce,H)}async function Ue(te,de,fe,pe,ke,I,G,_,C){ut(),U.delete(te);function B(Qe){if(!Qe.route.action&&!Qe.route.lazy){let Et=ar(405,{method:C.formMethod,pathname:fe,routeId:de});return ye(te,de,Et,{flushSync:G}),!0}return!1}if(!I&&B(pe))return;let H=k.fetchers.get(te);ot(te,rk(C,H),{flushSync:G});let Q=new AbortController,se=ji(t.history,fe,Q.signal,C);if(I){let Qe=await Je(ke,new URL(se.url).pathname,se.signal,te);if(Qe.type==="aborted")return;if(Qe.type==="error"){ye(te,de,Qe.error,{flushSync:G});return}else if(Qe.matches){if(ke=Qe.matches,pe=Al(ke,fe),B(pe))return}else{ye(te,de,ar(404,{pathname:fe}),{flushSync:G});return}}D.set(te,Q);let ce=P,re=(await _t("action",k,se,[pe],ke,te))[pe.route.id];if(se.signal.aborted){D.get(te)===Q&&D.delete(te);return}if(p.v7_fetcherPersist&&Y.has(te)){if(Gn(re)||fr(re)){ot(te,Za(void 0));return}}else{if(Gn(re))if(D.delete(te),W>ce){ot(te,Za(void 0));return}else return M.add(te),ot(te,Nl(C)),dt(se,re,!1,{fetcherSubmission:C,preventScrollReset:_});if(fr(re)){ye(te,de,re.error);return}}if(dn(re))throw ar(400,{type:"defer-action"});let me=k.navigation.location||k.location,Te=ji(t.history,me,Q.signal),Le=o||l,we=k.navigation.state!=="idle"?$n(Le,k.navigation.location,c):k.matches;nt(we,"Didn't find any matches after fetcher action");let Pe=++P;ee.set(te,Pe);let We=Nl(C,re.data);k.fetchers.set(te,We);let[ht,lt]=mf(t.history,k,we,C,me,!1,p.v7_skipActionErrorRevalidation,O,V,Z,Y,U,M,Le,c,[pe.route.id,re]);lt.filter(Qe=>Qe.key!==te).forEach(Qe=>{let Et=Qe.key,Ln=k.fetchers.get(Et),Rs=Nl(void 0,Ln?Ln.data:void 0);k.fetchers.set(Et,Rs),it(Et),Qe.controller&&D.set(Et,Qe.controller)}),X({fetchers:new Map(k.fetchers)});let Tt=()=>lt.forEach(Qe=>it(Qe.key));Q.signal.addEventListener("abort",Tt);let{loaderResults:Ps,fetcherResults:et}=await Ct(k,we,ht,lt,Te);if(Q.signal.aborted)return;Q.signal.removeEventListener("abort",Tt),ee.delete(te),D.delete(te),lt.forEach(Qe=>D.delete(Qe.key));let yt=uc(Ps);if(yt)return dt(Te,yt.result,!1,{preventScrollReset:_});if(yt=uc(et),yt)return M.add(yt.key),dt(Te,yt.result,!1,{preventScrollReset:_});let{loaderData:wt,errors:Ds}=yf(k,we,Ps,void 0,lt,et,K);if(k.fetchers.has(te)){let Qe=Za(re.data);k.fetchers.set(te,Qe)}Sa(Pe),k.navigation.state==="loading"&&Pe>W?(nt(A,"Expected pending action"),N&&N.abort(),Re(k.navigation.location,{matches:we,loaderData:wt,errors:Ds,fetchers:new Map(k.fetchers)})):(X({errors:Ds,loaderData:bf(k.loaderData,wt,we,Ds),fetchers:new Map(k.fetchers)}),O=!1)}async function St(te,de,fe,pe,ke,I,G,_,C){let B=k.fetchers.get(te);ot(te,Nl(C,B?B.data:void 0),{flushSync:G});let H=new AbortController,Q=ji(t.history,fe,H.signal);if(I){let re=await Je(ke,new URL(Q.url).pathname,Q.signal,te);if(re.type==="aborted")return;if(re.type==="error"){ye(te,de,re.error,{flushSync:G});return}else if(re.matches)ke=re.matches,pe=Al(ke,fe);else{ye(te,de,ar(404,{pathname:fe}),{flushSync:G});return}}D.set(te,H);let se=P,oe=(await _t("loader",k,Q,[pe],ke,te))[pe.route.id];if(dn(oe)&&(oe=await um(oe,Q.signal,!0)||oe),D.get(te)===H&&D.delete(te),!Q.signal.aborted){if(Y.has(te)){ot(te,Za(void 0));return}if(Gn(oe))if(W>se){ot(te,Za(void 0));return}else{M.add(te),await dt(Q,oe,!1,{preventScrollReset:_});return}if(fr(oe)){ye(te,de,oe.error);return}nt(!dn(oe),"Unhandled fetcher deferred data"),ot(te,Za(oe.data))}}async function dt(te,de,fe,pe){let{submission:ke,fetcherSubmission:I,preventScrollReset:G,replace:_}=pe===void 0?{}:pe;de.response.headers.has("X-Remix-Revalidate")&&(O=!0);let C=de.response.headers.get("Location");nt(C,"Expected a Location header on the redirect Response"),C=pf(C,new URL(te.url),c);let B=vo(k.location,C,{_isRedirect:!0});if(r){let re=!1;if(de.response.headers.has("X-Remix-Reload-Document"))re=!0;else if(dm.test(C)){const me=t.history.createURL(C);re=me.origin!==s.location.origin||ll(me.pathname,c)==null}if(re){_?s.location.replace(C):s.location.assign(C);return}}N=null;let H=_===!0||de.response.headers.has("X-Remix-Replace")?Zt.Replace:Zt.Push,{formMethod:Q,formAction:se,formEncType:ce}=k.navigation;!ke&&!I&&Q&&se&&ce&&(ke=Nf(k.navigation));let oe=ke||I;if(IN.has(de.response.status)&&oe&&Kr(oe.formMethod))await Se(H,B,{submission:Bt({},oe,{formAction:C}),preventScrollReset:G||y,enableViewTransition:fe?R:void 0});else{let re=_0(B,ke);await Se(H,B,{overrideNavigation:re,fetcherSubmission:I,preventScrollReset:G||y,enableViewTransition:fe?R:void 0})}}async function _t(te,de,fe,pe,ke,I){let G,_={};try{G=await HN(d,te,de,fe,pe,ke,I,i,n)}catch(C){return pe.forEach(B=>{_[B.route.id]={type:At.error,error:C}}),_}for(let[C,B]of Object.entries(G))if(XN(B)){let H=B.result;_[C]={type:At.redirect,response:JN(H,fe,C,ke,c,p.v7_relativeSplatPath)}}else _[C]=await qN(B);return _}async function Ct(te,de,fe,pe,ke){let I=te.matches,G=_t("loader",te,ke,fe,de,null),_=Promise.all(pe.map(async H=>{if(H.matches&&H.match&&H.controller){let se=(await _t("loader",te,ji(t.history,H.path,H.controller.signal),[H.match],H.matches,H.key))[H.match.route.id];return{[H.key]:se}}else return Promise.resolve({[H.key]:{type:At.error,error:ar(404,{pathname:H.path})}})})),C=await G,B=(await _).reduce((H,Q)=>Object.assign(H,Q),{});return await Promise.all([ek(de,C,ke.signal,I,te.loaderData),tk(de,B,pe)]),{loaderResults:C,fetcherResults:B}}function ut(){O=!0,V.push(...ve()),U.forEach((te,de)=>{D.has(de)&&Z.add(de),it(de)})}function ot(te,de,fe){fe===void 0&&(fe={}),k.fetchers.set(te,de),X({fetchers:new Map(k.fetchers)},{flushSync:(fe&&fe.flushSync)===!0})}function ye(te,de,fe,pe){pe===void 0&&(pe={});let ke=Un(k.matches,de);Ye(te),X({errors:{[ke.route.id]:fe},fetchers:new Map(k.fetchers)},{flushSync:(pe&&pe.flushSync)===!0})}function ze(te){return q.set(te,(q.get(te)||0)+1),Y.has(te)&&Y.delete(te),k.fetchers.get(te)||MN}function Ye(te){let de=k.fetchers.get(te);D.has(te)&&!(de&&de.state==="loading"&&ee.has(te))&&it(te),U.delete(te),ee.delete(te),M.delete(te),p.v7_fetcherPersist&&Y.delete(te),Z.delete(te),k.fetchers.delete(te)}function jt(te){let de=(q.get(te)||0)-1;de<=0?(q.delete(te),Y.add(te),p.v7_fetcherPersist||Ye(te)):q.set(te,de),X({fetchers:new Map(k.fetchers)})}function it(te){let de=D.get(te);de&&(de.abort(),D.delete(te))}function Xt(te){for(let de of te){let fe=ze(de),pe=Za(fe.data);k.fetchers.set(de,pe)}}function ia(){let te=[],de=!1;for(let fe of M){let pe=k.fetchers.get(fe);nt(pe,"Expected fetcher: "+fe),pe.state==="loading"&&(M.delete(fe),te.push(fe),de=!0)}return Xt(te),de}function Sa(te){let de=[];for(let[fe,pe]of ee)if(pe<te){let ke=k.fetchers.get(fe);nt(ke,"Expected fetcher: "+fe),ke.state==="loading"&&(it(fe),ee.delete(fe),de.push(fe))}return Xt(de),de.length>0}function Ka(te,de){let fe=k.blockers.get(te)||wl;return le.get(te)!==de&&le.set(te,de),fe}function Ur(te){k.blockers.delete(te),le.delete(te)}function xe(te,de){let fe=k.blockers.get(te)||wl;nt(fe.state==="unblocked"&&de.state==="blocked"||fe.state==="blocked"&&de.state==="blocked"||fe.state==="blocked"&&de.state==="proceeding"||fe.state==="blocked"&&de.state==="unblocked"||fe.state==="proceeding"&&de.state==="unblocked","Invalid blocker state transition: "+fe.state+" -> "+de.state);let pe=new Map(k.blockers);pe.set(te,de),X({blockers:pe})}function ue(te){let{currentLocation:de,nextLocation:fe,historyAction:pe}=te;if(le.size===0)return;le.size>1&&ni(!1,"A router only supports one blocker at a time");let ke=Array.from(le.entries()),[I,G]=ke[ke.length-1],_=k.blockers.get(I);if(!(_&&_.state==="proceeding")&&G({currentLocation:de,nextLocation:fe,historyAction:pe}))return I}function je(te){let de=ar(404,{pathname:te}),fe=o||l,{matches:pe,route:ke}=jf(fe);return ve(),{notFoundMatches:pe,route:ke,error:de}}function ve(te){let de=[];return K.forEach((fe,pe)=>{(!te||te(pe))&&(fe.cancel(),de.push(pe),K.delete(pe))}),de}function Oe(te,de,fe){if(x=te,m=de,f=fe||null,!j&&k.navigation===C0){j=!0;let pe=Ne(k.location,k.matches);pe!=null&&X({restoreScrollPosition:pe})}return()=>{x=null,m=null,f=null}}function De(te,de){return f&&f(te,de.map(pe=>hN(pe,k.loaderData)))||te.key}function Be(te,de){if(x&&m){let fe=De(te,de);x[fe]=m()}}function Ne(te,de){if(x){let fe=De(te,de),pe=x[fe];if(typeof pe=="number")return pe}return null}function Ce(te,de,fe){if(u)if(te){if(Object.keys(te[0].params).length>0)return{active:!0,matches:Ic(de,fe,c,!0)}}else return{active:!0,matches:Ic(de,fe,c,!0)||[]};return{active:!1,matches:null}}async function Je(te,de,fe,pe){if(!u)return{type:"success",matches:te};let ke=te;for(;;){let I=o==null,G=o||l,_=i;try{await u({signal:fe,path:de,matches:ke,fetcherKey:pe,patch:(H,Q)=>{fe.aborted||ff(H,Q,G,_,n)}})}catch(H){return{type:"error",error:H,partialMatches:ke}}finally{I&&!fe.aborted&&(l=[...l])}if(fe.aborted)return{type:"aborted"};let C=$n(G,de,c);if(C)return{type:"success",matches:C};let B=Ic(G,de,c,!0);if(!B||ke.length===B.length&&ke.every((H,Q)=>H.route.id===B[Q].route.id))return{type:"success",matches:null};ke=B}}function Ge(te){i={},o=md(te,n,void 0,i)}function Dt(te,de){let fe=o==null;ff(te,de,o||l,i,n),fe&&(l=[...l],X({}))}return E={get basename(){return c},get future(){return p},get state(){return k},get routes(){return l},get window(){return s},initialize:ae,subscribe:Fe,enableScrollRestoration:Oe,navigate:ne,fetch:ie,revalidate:_e,createHref:te=>t.history.createHref(te),encodeLocation:te=>t.history.encodeLocation(te),getFetcher:ze,deleteFetcher:jt,dispose:he,getBlocker:Ka,deleteBlocker:Ur,patchRoutes:Dt,_internalFetchControllers:D,_internalActiveDeferreds:K,_internalSetRoutes:Ge},E}function UN(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Uu(t,s,r,a,n,i,l,o){let c,d;if(l){c=[];for(let p of s)if(c.push(p),p.route.id===l){d=p;break}}else c=s,d=s[s.length-1];let u=Vd(n||".",Wd(c,i),ll(t.pathname,r)||t.pathname,o==="path");if(n==null&&(u.search=t.search,u.hash=t.hash),(n==null||n===""||n===".")&&d){let p=xm(u.search);if(d.route.index&&!p)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&p){let h=new URLSearchParams(u.search),g=h.getAll("index");h.delete("index"),g.filter(f=>f).forEach(f=>h.append("index",f));let x=h.toString();u.search=x?"?"+x:""}}return a&&r!=="/"&&(u.pathname=u.pathname==="/"?r:La([r,u.pathname])),ii(u)}function uf(t,s,r,a){if(!a||!UN(a))return{path:r};if(a.formMethod&&!ZN(a.formMethod))return{path:r,error:ar(405,{method:a.formMethod})};let n=()=>({path:r,error:ar(400,{type:"invalid-body"})}),i=a.formMethod||"get",l=t?i.toUpperCase():i.toLowerCase(),o=hb(r);if(a.body!==void 0){if(a.formEncType==="text/plain"){if(!Kr(l))return n();let h=typeof a.body=="string"?a.body:a.body instanceof FormData||a.body instanceof URLSearchParams?Array.from(a.body.entries()).reduce((g,x)=>{let[f,m]=x;return""+g+f+"="+m+`
`},""):String(a.body);return{path:r,submission:{formMethod:l,formAction:o,formEncType:a.formEncType,formData:void 0,json:void 0,text:h}}}else if(a.formEncType==="application/json"){if(!Kr(l))return n();try{let h=typeof a.body=="string"?JSON.parse(a.body):a.body;return{path:r,submission:{formMethod:l,formAction:o,formEncType:a.formEncType,formData:void 0,json:h,text:void 0}}}catch{return n()}}}nt(typeof FormData=="function","FormData is not available in this environment");let c,d;if(a.formData)c=Wu(a.formData),d=a.formData;else if(a.body instanceof FormData)c=Wu(a.body),d=a.body;else if(a.body instanceof URLSearchParams)c=a.body,d=gf(c);else if(a.body==null)c=new URLSearchParams,d=new FormData;else try{c=new URLSearchParams(a.body),d=gf(c)}catch{return n()}let u={formMethod:l,formAction:o,formEncType:a&&a.formEncType||"application/x-www-form-urlencoded",formData:d,json:void 0,text:void 0};if(Kr(u.formMethod))return{path:r,submission:u};let p=qa(r);return s&&p.search&&xm(p.search)&&c.append("index",""),p.search="?"+c,{path:ii(p),submission:u}}function xf(t,s,r){r===void 0&&(r=!1);let a=t.findIndex(n=>n.route.id===s);return a>=0?t.slice(0,r?a+1:a):t}function mf(t,s,r,a,n,i,l,o,c,d,u,p,h,g,x,f){let m=f?fr(f[1])?f[1].error:f[1].data:void 0,j=t.createURL(s.location),v=t.createURL(n),w=r;i&&s.errors?w=xf(r,Object.keys(s.errors)[0],!0):f&&fr(f[1])&&(w=xf(r,f[0]));let S=f?f[1].statusCode:void 0,F=l&&S&&S>=400,E=w.filter((A,y)=>{let{route:N}=A;if(N.lazy)return!0;if(N.loader==null)return!1;if(i)return zu(N,s.loaderData,s.errors);if(zN(s.loaderData,s.matches[y],A)||c.some(z=>z===A.route.id))return!0;let R=s.matches[y],T=A;return hf(A,Bt({currentUrl:j,currentParams:R.params,nextUrl:v,nextParams:T.params},a,{actionResult:m,actionStatus:S,defaultShouldRevalidate:F?!1:o||j.pathname+j.search===v.pathname+v.search||j.search!==v.search||xb(R,T)}))}),k=[];return p.forEach((A,y)=>{if(i||!r.some(L=>L.route.id===A.routeId)||u.has(y))return;let N=$n(g,A.path,x);if(!N){k.push({key:y,routeId:A.routeId,path:A.path,matches:null,match:null,controller:null});return}let R=s.fetchers.get(y),T=Al(N,A.path),z=!1;h.has(y)?z=!1:d.has(y)?(d.delete(y),z=!0):R&&R.state!=="idle"&&R.data===void 0?z=o:z=hf(T,Bt({currentUrl:j,currentParams:s.matches[s.matches.length-1].params,nextUrl:v,nextParams:r[r.length-1].params},a,{actionResult:m,actionStatus:S,defaultShouldRevalidate:F?!1:o})),z&&k.push({key:y,routeId:A.routeId,path:A.path,matches:N,match:T,controller:new AbortController})}),[E,k]}function zu(t,s,r){if(t.lazy)return!0;if(!t.loader)return!1;let a=s!=null&&s[t.id]!==void 0,n=r!=null&&r[t.id]!==void 0;return!a&&n?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!a&&!n}function zN(t,s,r){let a=!s||r.route.id!==s.route.id,n=t[r.route.id]===void 0;return a||n}function xb(t,s){let r=t.route.path;return t.pathname!==s.pathname||r!=null&&r.endsWith("*")&&t.params["*"]!==s.params["*"]}function hf(t,s){if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate(s);if(typeof r=="boolean")return r}return s.defaultShouldRevalidate}function ff(t,s,r,a,n){var i;let l;if(t){let d=a[t];nt(d,"No route found to patch children into: routeId = "+t),d.children||(d.children=[]),l=d.children}else l=r;let o=s.filter(d=>!l.some(u=>mb(d,u))),c=md(o,n,[t||"_","patch",String(((i=l)==null?void 0:i.length)||"0")],a);l.push(...c)}function mb(t,s){return"id"in t&&"id"in s&&t.id===s.id?!0:t.index===s.index&&t.path===s.path&&t.caseSensitive===s.caseSensitive?(!t.children||t.children.length===0)&&(!s.children||s.children.length===0)?!0:t.children.every((r,a)=>{var n;return(n=s.children)==null?void 0:n.some(i=>mb(r,i))}):!1}async function WN(t,s,r){if(!t.lazy)return;let a=await t.lazy();if(!t.lazy)return;let n=r[t.id];nt(n,"No route found in manifest");let i={};for(let l in a){let c=n[l]!==void 0&&l!=="hasErrorBoundary";ni(!c,'Route "'+n.id+'" has a static property "'+l+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+l+'" will be ignored.')),!c&&!xN.has(l)&&(i[l]=a[l])}Object.assign(n,i),Object.assign(n,Bt({},s(n),{lazy:void 0}))}async function VN(t){let{matches:s}=t,r=s.filter(n=>n.shouldLoad);return(await Promise.all(r.map(n=>n.resolve()))).reduce((n,i,l)=>Object.assign(n,{[r[l].route.id]:i}),{})}async function HN(t,s,r,a,n,i,l,o,c,d){let u=i.map(g=>g.route.lazy?WN(g.route,c,o):void 0),p=i.map((g,x)=>{let f=u[x],m=n.some(v=>v.route.id===g.route.id);return Bt({},g,{shouldLoad:m,resolve:async v=>(v&&a.method==="GET"&&(g.route.lazy||g.route.loader)&&(m=!0),m?GN(s,a,g,f,v,d):Promise.resolve({type:At.data,result:void 0}))})}),h=await t({matches:p,request:a,params:i[0].params,fetcherKey:l,context:d});try{await Promise.all(u)}catch{}return h}async function GN(t,s,r,a,n,i){let l,o,c=d=>{let u,p=new Promise((x,f)=>u=f);o=()=>u(),s.signal.addEventListener("abort",o);let h=x=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+r.route.id+"]"))):d({request:s,params:r.params,context:i},...x!==void 0?[x]:[]),g=(async()=>{try{return{type:"data",result:await(n?n(f=>h(f)):h())}}catch(x){return{type:"error",result:x}}})();return Promise.race([g,p])};try{let d=r.route[t];if(a)if(d){let u,[p]=await Promise.all([c(d).catch(h=>{u=h}),a]);if(u!==void 0)throw u;l=p}else if(await a,d=r.route[t],d)l=await c(d);else if(t==="action"){let u=new URL(s.url),p=u.pathname+u.search;throw ar(405,{method:s.method,pathname:p,routeId:r.route.id})}else return{type:At.data,result:void 0};else if(d)l=await c(d);else{let u=new URL(s.url),p=u.pathname+u.search;throw ar(404,{pathname:p})}nt(l.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:At.error,result:d}}finally{o&&s.signal.removeEventListener("abort",o)}return l}async function qN(t){let{result:s,type:r}=t;if(fb(s)){let p;try{let h=s.headers.get("Content-Type");h&&/\bapplication\/json\b/.test(h)?s.body==null?p=null:p=await s.json():p=await s.text()}catch(h){return{type:At.error,error:h}}return r===At.error?{type:At.error,error:new hd(s.status,s.statusText,p),statusCode:s.status,headers:s.headers}:{type:At.data,data:p,statusCode:s.status,headers:s.headers}}if(r===At.error){if(wf(s)){var a,n;if(s.data instanceof Error){var i,l;return{type:At.error,error:s.data,statusCode:(i=s.init)==null?void 0:i.status,headers:(l=s.init)!=null&&l.headers?new Headers(s.init.headers):void 0}}return{type:At.error,error:new hd(((a=s.init)==null?void 0:a.status)||500,void 0,s.data),statusCode:jo(s)?s.status:void 0,headers:(n=s.init)!=null&&n.headers?new Headers(s.init.headers):void 0}}return{type:At.error,error:s,statusCode:jo(s)?s.status:void 0}}if(QN(s)){var o,c;return{type:At.deferred,deferredData:s,statusCode:(o=s.init)==null?void 0:o.status,headers:((c=s.init)==null?void 0:c.headers)&&new Headers(s.init.headers)}}if(wf(s)){var d,u;return{type:At.data,data:s.data,statusCode:(d=s.init)==null?void 0:d.status,headers:(u=s.init)!=null&&u.headers?new Headers(s.init.headers):void 0}}return{type:At.data,data:s}}function JN(t,s,r,a,n,i){let l=t.headers.get("Location");if(nt(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!dm.test(l)){let o=a.slice(0,a.findIndex(c=>c.route.id===r)+1);l=Uu(new URL(s.url),o,n,!0,l,i),t.headers.set("Location",l)}return t}function pf(t,s,r){if(dm.test(t)){let a=t,n=a.startsWith("//")?new URL(s.protocol+a):new URL(a),i=ll(n.pathname,r)!=null;if(n.origin===s.origin&&i)return n.pathname+n.search+n.hash}return t}function ji(t,s,r,a){let n=t.createURL(hb(s)).toString(),i={signal:r};if(a&&Kr(a.formMethod)){let{formMethod:l,formEncType:o}=a;i.method=l.toUpperCase(),o==="application/json"?(i.headers=new Headers({"Content-Type":o}),i.body=JSON.stringify(a.json)):o==="text/plain"?i.body=a.text:o==="application/x-www-form-urlencoded"&&a.formData?i.body=Wu(a.formData):i.body=a.formData}return new Request(n,i)}function Wu(t){let s=new URLSearchParams;for(let[r,a]of t.entries())s.append(r,typeof a=="string"?a:a.name);return s}function gf(t){let s=new FormData;for(let[r,a]of t.entries())s.append(r,a);return s}function KN(t,s,r,a,n){let i={},l=null,o,c=!1,d={},u=r&&fr(r[1])?r[1].error:void 0;return t.forEach(p=>{if(!(p.route.id in s))return;let h=p.route.id,g=s[h];if(nt(!Gn(g),"Cannot handle redirect results in processLoaderData"),fr(g)){let x=g.error;u!==void 0&&(x=u,u=void 0),l=l||{};{let f=Un(t,h);l[f.route.id]==null&&(l[f.route.id]=x)}i[h]=void 0,c||(c=!0,o=jo(g.error)?g.error.status:500),g.headers&&(d[h]=g.headers)}else dn(g)?(a.set(h,g.deferredData),i[h]=g.deferredData.data,g.statusCode!=null&&g.statusCode!==200&&!c&&(o=g.statusCode),g.headers&&(d[h]=g.headers)):(i[h]=g.data,g.statusCode&&g.statusCode!==200&&!c&&(o=g.statusCode),g.headers&&(d[h]=g.headers))}),u!==void 0&&r&&(l={[r[0]]:u},i[r[0]]=void 0),{loaderData:i,errors:l,statusCode:o||200,loaderHeaders:d}}function yf(t,s,r,a,n,i,l){let{loaderData:o,errors:c}=KN(s,r,a,l);return n.forEach(d=>{let{key:u,match:p,controller:h}=d,g=i[u];if(nt(g,"Did not find corresponding fetcher result"),!(h&&h.signal.aborted))if(fr(g)){let x=Un(t.matches,p==null?void 0:p.route.id);c&&c[x.route.id]||(c=Bt({},c,{[x.route.id]:g.error})),t.fetchers.delete(u)}else if(Gn(g))nt(!1,"Unhandled fetcher revalidation redirect");else if(dn(g))nt(!1,"Unhandled fetcher deferred data");else{let x=Za(g.data);t.fetchers.set(u,x)}}),{loaderData:o,errors:c}}function bf(t,s,r,a){let n=Bt({},s);for(let i of r){let l=i.route.id;if(s.hasOwnProperty(l)?s[l]!==void 0&&(n[l]=s[l]):t[l]!==void 0&&i.route.loader&&(n[l]=t[l]),a&&a.hasOwnProperty(l))break}return n}function vf(t){return t?fr(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Un(t,s){return(s?t.slice(0,t.findIndex(a=>a.route.id===s)+1):[...t]).reverse().find(a=>a.route.hasErrorBoundary===!0)||t[0]}function jf(t){let s=t.length===1?t[0]:t.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:s}],route:s}}function ar(t,s){let{pathname:r,routeId:a,method:n,type:i,message:l}=s===void 0?{}:s,o="Unknown Server Error",c="Unknown @remix-run/router error";return t===400?(o="Bad Request",n&&r&&a?c="You made a "+n+' request to "'+r+'" but '+('did not provide a `loader` for route "'+a+'", ')+"so there is no way to handle the request.":i==="defer-action"?c="defer() is not supported in actions":i==="invalid-body"&&(c="Unable to encode submission body")):t===403?(o="Forbidden",c='Route "'+a+'" does not match URL "'+r+'"'):t===404?(o="Not Found",c='No route matches URL "'+r+'"'):t===405&&(o="Method Not Allowed",n&&r&&a?c="You made a "+n.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+a+'", ')+"so there is no way to handle the request.":n&&(c='Invalid request method "'+n.toUpperCase()+'"')),new hd(t||500,o,new Error(c),!0)}function uc(t){let s=Object.entries(t);for(let r=s.length-1;r>=0;r--){let[a,n]=s[r];if(Gn(n))return{key:a,result:n}}}function hb(t){let s=typeof t=="string"?qa(t):t;return ii(Bt({},s,{hash:""}))}function YN(t,s){return t.pathname!==s.pathname||t.search!==s.search?!1:t.hash===""?s.hash!=="":t.hash===s.hash?!0:s.hash!==""}function XN(t){return fb(t.result)&&ON.has(t.result.status)}function dn(t){return t.type===At.deferred}function fr(t){return t.type===At.error}function Gn(t){return(t&&t.type)===At.redirect}function wf(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function QN(t){let s=t;return s&&typeof s=="object"&&typeof s.data=="object"&&typeof s.subscribe=="function"&&typeof s.cancel=="function"&&typeof s.resolveData=="function"}function fb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function ZN(t){return LN.has(t.toLowerCase())}function Kr(t){return DN.has(t.toLowerCase())}async function ek(t,s,r,a,n){let i=Object.entries(s);for(let l=0;l<i.length;l++){let[o,c]=i[l],d=t.find(h=>(h==null?void 0:h.route.id)===o);if(!d)continue;let u=a.find(h=>h.route.id===d.route.id),p=u!=null&&!xb(u,d)&&(n&&n[d.route.id])!==void 0;dn(c)&&p&&await um(c,r,!1).then(h=>{h&&(s[o]=h)})}}async function tk(t,s,r){for(let a=0;a<r.length;a++){let{key:n,routeId:i,controller:l}=r[a],o=s[n];t.find(d=>(d==null?void 0:d.route.id)===i)&&dn(o)&&(nt(l,"Expected an AbortController for revalidating fetcher deferred result"),await um(o,l.signal,!0).then(d=>{d&&(s[n]=d)}))}}async function um(t,s,r){if(r===void 0&&(r=!1),!await t.deferredData.resolveData(s)){if(r)try{return{type:At.data,data:t.deferredData.unwrappedData}}catch(n){return{type:At.error,error:n}}return{type:At.data,data:t.deferredData.data}}}function xm(t){return new URLSearchParams(t).getAll("index").some(s=>s==="")}function Al(t,s){let r=typeof s=="string"?qa(s).search:s.search;if(t[t.length-1].route.index&&xm(r||""))return t[t.length-1];let a=cb(t);return a[a.length-1]}function Nf(t){let{formMethod:s,formAction:r,formEncType:a,text:n,formData:i,json:l}=t;if(!(!s||!r||!a)){if(n!=null)return{formMethod:s,formAction:r,formEncType:a,formData:void 0,json:void 0,text:n};if(i!=null)return{formMethod:s,formAction:r,formEncType:a,formData:i,json:void 0,text:void 0};if(l!==void 0)return{formMethod:s,formAction:r,formEncType:a,formData:void 0,json:l,text:void 0}}}function _0(t,s){return s?{state:"loading",location:t,formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function sk(t,s){return{state:"submitting",location:t,formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text}}function Nl(t,s){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:s}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:s}}function rk(t,s){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:s?s.data:void 0}}function Za(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function ak(t,s){try{let r=t.sessionStorage.getItem(ub);if(r){let a=JSON.parse(r);for(let[n,i]of Object.entries(a||{}))i&&Array.isArray(i)&&s.set(n,new Set(i||[]))}}catch{}}function nk(t,s){if(s.size>0){let r={};for(let[a,n]of s)r[a]=[...n];try{t.sessionStorage.setItem(ub,JSON.stringify(r))}catch(a){ni(!1,"Failed to save applied view transitions in sessionStorage ("+a+").")}}}/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wo(){return wo=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},wo.apply(this,arguments)}const Hd=b.createContext(null),pb=b.createContext(null),Pn=b.createContext(null),Gd=b.createContext(null),va=b.createContext({outlet:null,matches:[],isDataRoute:!1}),gb=b.createContext(null);function ik(t,s){let{relative:r}=s===void 0?{}:s;ol()||nt(!1);let{basename:a,navigator:n}=b.useContext(Pn),{hash:i,pathname:l,search:o}=vb(t,{relative:r}),c=l;return a!=="/"&&(c=l==="/"?a:La([a,l])),n.createHref({pathname:c,search:o,hash:i})}function ol(){return b.useContext(Gd)!=null}function mi(){return ol()||nt(!1),b.useContext(Gd).location}function yb(t){b.useContext(Pn).static||b.useLayoutEffect(t)}function ja(){let{isDataRoute:t}=b.useContext(va);return t?vk():lk()}function lk(){ol()||nt(!1);let t=b.useContext(Hd),{basename:s,future:r,navigator:a}=b.useContext(Pn),{matches:n}=b.useContext(va),{pathname:i}=mi(),l=JSON.stringify(Wd(n,r.v7_relativeSplatPath)),o=b.useRef(!1);return yb(()=>{o.current=!0}),b.useCallback(function(d,u){if(u===void 0&&(u={}),!o.current)return;if(typeof d=="number"){a.go(d);return}let p=Vd(d,JSON.parse(l),i,u.relative==="path");t==null&&s!=="/"&&(p.pathname=p.pathname==="/"?s:La([s,p.pathname])),(u.replace?a.replace:a.push)(p,u.state,u)},[s,a,l,i,t])}const ok=b.createContext(null);function ck(t){let s=b.useContext(va).outlet;return s&&b.createElement(ok.Provider,{value:t},s)}function bb(){let{matches:t}=b.useContext(va),s=t[t.length-1];return s?s.params:{}}function vb(t,s){let{relative:r}=s===void 0?{}:s,{future:a}=b.useContext(Pn),{matches:n}=b.useContext(va),{pathname:i}=mi(),l=JSON.stringify(Wd(n,a.v7_relativeSplatPath));return b.useMemo(()=>Vd(t,JSON.parse(l),i,r==="path"),[t,l,i,r])}function dk(t,s){return jb(t,s)}function jb(t,s,r,a){ol()||nt(!1);let{navigator:n}=b.useContext(Pn),{matches:i}=b.useContext(va),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=mi(),u;if(s){var p;let m=typeof s=="string"?qa(s):s;c==="/"||(p=m.pathname)!=null&&p.startsWith(c)||nt(!1),u=m}else u=d;let h=u.pathname||"/",g=h;if(c!=="/"){let m=c.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(m.length).join("/")}let x=$n(t,{pathname:g}),f=fk(x&&x.map(m=>Object.assign({},m,{params:Object.assign({},o,m.params),pathname:La([c,n.encodeLocation?n.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?c:La([c,n.encodeLocation?n.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,r,a);return s&&f?b.createElement(Gd.Provider,{value:{location:wo({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Zt.Pop}},f):f}function uk(){let t=bk(),s=jo(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},s),r?b.createElement("pre",{style:n},r):null,null)}const xk=b.createElement(uk,null);class mk extends b.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?b.createElement(va.Provider,{value:this.props.routeContext},b.createElement(gb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function hk(t){let{routeContext:s,match:r,children:a}=t,n=b.useContext(Hd);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(va.Provider,{value:s},a)}function fk(t,s,r,a){var n;if(s===void 0&&(s=[]),r===void 0&&(r=null),a===void 0&&(a=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=a)!=null&&i.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,o=(n=r)==null?void 0:n.errors;if(o!=null){let u=l.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);u>=0||nt(!1),l=l.slice(0,Math.min(l.length,u+1))}let c=!1,d=-1;if(r&&a&&a.v7_partialHydration)for(let u=0;u<l.length;u++){let p=l[u];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=u),p.route.id){let{loaderData:h,errors:g}=r,x=p.route.loader&&h[p.route.id]===void 0&&(!g||g[p.route.id]===void 0);if(p.route.lazy||x){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((u,p,h)=>{let g,x=!1,f=null,m=null;r&&(g=o&&p.route.id?o[p.route.id]:void 0,f=p.route.errorElement||xk,c&&(d<0&&h===0?(jk("route-fallback"),x=!0,m=null):d===h&&(x=!0,m=p.route.hydrateFallbackElement||null)));let j=s.concat(l.slice(0,h+1)),v=()=>{let w;return g?w=f:x?w=m:p.route.Component?w=b.createElement(p.route.Component,null):p.route.element?w=p.route.element:w=u,b.createElement(hk,{match:p,routeContext:{outlet:u,matches:j,isDataRoute:r!=null},children:w})};return r&&(p.route.ErrorBoundary||p.route.errorElement||h===0)?b.createElement(mk,{location:r.location,revalidation:r.revalidation,component:f,error:g,children:v(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):v()},null)}var wb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(wb||{}),Nb=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Nb||{});function pk(t){let s=b.useContext(Hd);return s||nt(!1),s}function gk(t){let s=b.useContext(pb);return s||nt(!1),s}function yk(t){let s=b.useContext(va);return s||nt(!1),s}function kb(t){let s=yk(),r=s.matches[s.matches.length-1];return r.route.id||nt(!1),r.route.id}function bk(){var t;let s=b.useContext(gb),r=gk(Nb.UseRouteError),a=kb();return s!==void 0?s:(t=r.errors)==null?void 0:t[a]}function vk(){let{router:t}=pk(wb.UseNavigateStable),s=kb(),r=b.useRef(!1);return yb(()=>{r.current=!0}),b.useCallback(function(n,i){i===void 0&&(i={}),r.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,wo({fromRouteId:s},i)))},[t,s])}const kf={};function jk(t,s,r){kf[t]||(kf[t]=!0)}function wk(t,s){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!s||s.v7_relativeSplatPath),s&&(s.v7_fetcherPersist,s.v7_normalizeFormMethod,s.v7_partialHydration,s.v7_skipActionErrorRevalidation)}function No(t){let{to:s,replace:r,state:a,relative:n}=t;ol()||nt(!1);let{future:i,static:l}=b.useContext(Pn),{matches:o}=b.useContext(va),{pathname:c}=mi(),d=ja(),u=Vd(s,Wd(o,i.v7_relativeSplatPath),c,n==="path"),p=JSON.stringify(u);return b.useEffect(()=>d(JSON.parse(p),{replace:r,state:a,relative:n}),[d,p,n,r,a]),null}function Sb(t){return ck(t.context)}function Me(t){nt(!1)}function Nk(t){let{basename:s="/",children:r=null,location:a,navigationType:n=Zt.Pop,navigator:i,static:l=!1,future:o}=t;ol()&&nt(!1);let c=s.replace(/^\/*/,"/"),d=b.useMemo(()=>({basename:c,navigator:i,static:l,future:wo({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof a=="string"&&(a=qa(a));let{pathname:u="/",search:p="",hash:h="",state:g=null,key:x="default"}=a,f=b.useMemo(()=>{let m=ll(u,c);return m==null?null:{location:{pathname:m,search:p,hash:h,state:g,key:x},navigationType:n}},[c,u,p,h,g,x,n]);return f==null?null:b.createElement(Pn.Provider,{value:d},b.createElement(Gd.Provider,{children:r,value:f}))}function kk(t){let{children:s,location:r}=t;return dk(Vu(s),r)}new Promise(()=>{});function Vu(t,s){s===void 0&&(s=[]);let r=[];return b.Children.forEach(t,(a,n)=>{if(!b.isValidElement(a))return;let i=[...s,n];if(a.type===b.Fragment){r.push.apply(r,Vu(a.props.children,i));return}a.type!==Me&&nt(!1),!a.props.index||!a.props.children||nt(!1);let l={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=Vu(a.props.children,i)),r.push(l)}),r}function Sk(t){let s={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(s,{element:b.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(s,{hydrateFallbackElement:b.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(s,{errorElement:b.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),s}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ko(){return ko=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ko.apply(this,arguments)}function Ck(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,i;for(i=0;i<a.length;i++)n=a[i],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function _k(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Tk(t,s){return t.button===0&&(!s||s==="_self")&&!_k(t)}const Ek=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ak="6";try{window.__reactRouterVersion=Ak}catch{}function Fk(t,s){return $N({basename:void 0,future:ko({},void 0,{v7_prependBasename:!0}),history:cN({window:void 0}),hydrationData:Pk(),routes:t,mapRouteProperties:Sk,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function Pk(){var t;let s=(t=window)==null?void 0:t.__staticRouterHydrationData;return s&&s.errors&&(s=ko({},s,{errors:Dk(s.errors)})),s}function Dk(t){if(!t)return null;let s=Object.entries(t),r={};for(let[a,n]of s)if(n&&n.__type==="RouteErrorResponse")r[a]=new hd(n.status,n.statusText,n.data,n.internal===!0);else if(n&&n.__type==="Error"){if(n.__subType){let i=window[n.__subType];if(typeof i=="function")try{let l=new i(n.message);l.stack="",r[a]=l}catch{}}if(r[a]==null){let i=new Error(n.message);i.stack="",r[a]=i}}else r[a]=n;return r}const Rk=b.createContext({isTransitioning:!1}),Lk=b.createContext(new Map),Ok="startTransition",Sf=Yj[Ok],Ik="flushSync",Cf=oN[Ik];function Mk(t){Sf?Sf(t):t()}function kl(t){Cf?Cf(t):t()}class Bk{constructor(){this.status="pending",this.promise=new Promise((s,r)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",s(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",r(a))}})}}function $k(t){let{fallbackElement:s,router:r,future:a}=t,[n,i]=b.useState(r.state),[l,o]=b.useState(),[c,d]=b.useState({isTransitioning:!1}),[u,p]=b.useState(),[h,g]=b.useState(),[x,f]=b.useState(),m=b.useRef(new Map),{v7_startTransition:j}=a||{},v=b.useCallback(A=>{j?Mk(A):A()},[j]),w=b.useCallback((A,y)=>{let{deletedFetchers:N,flushSync:R,viewTransitionOpts:T}=y;A.fetchers.forEach((L,O)=>{L.data!==void 0&&m.current.set(O,L.data)}),N.forEach(L=>m.current.delete(L));let z=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!T||z){R?kl(()=>i(A)):v(()=>i(A));return}if(R){kl(()=>{h&&(u&&u.resolve(),h.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:T.currentLocation,nextLocation:T.nextLocation})});let L=r.window.document.startViewTransition(()=>{kl(()=>i(A))});L.finished.finally(()=>{kl(()=>{p(void 0),g(void 0),o(void 0),d({isTransitioning:!1})})}),kl(()=>g(L));return}h?(u&&u.resolve(),h.skipTransition(),f({state:A,currentLocation:T.currentLocation,nextLocation:T.nextLocation})):(o(A),d({isTransitioning:!0,flushSync:!1,currentLocation:T.currentLocation,nextLocation:T.nextLocation}))},[r.window,h,u,m,v]);b.useLayoutEffect(()=>r.subscribe(w),[r,w]),b.useEffect(()=>{c.isTransitioning&&!c.flushSync&&p(new Bk)},[c]),b.useEffect(()=>{if(u&&l&&r.window){let A=l,y=u.promise,N=r.window.document.startViewTransition(async()=>{v(()=>i(A)),await y});N.finished.finally(()=>{p(void 0),g(void 0),o(void 0),d({isTransitioning:!1})}),g(N)}},[v,l,u,r.window]),b.useEffect(()=>{u&&l&&n.location.key===l.location.key&&u.resolve()},[u,h,n.location,l]),b.useEffect(()=>{!c.isTransitioning&&x&&(o(x.state),d({isTransitioning:!0,flushSync:!1,currentLocation:x.currentLocation,nextLocation:x.nextLocation}),f(void 0))},[c.isTransitioning,x]),b.useEffect(()=>{},[]);let S=b.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:A=>r.navigate(A),push:(A,y,N)=>r.navigate(A,{state:y,preventScrollReset:N==null?void 0:N.preventScrollReset}),replace:(A,y,N)=>r.navigate(A,{replace:!0,state:y,preventScrollReset:N==null?void 0:N.preventScrollReset})}),[r]),F=r.basename||"/",E=b.useMemo(()=>({router:r,navigator:S,static:!1,basename:F}),[r,S,F]),k=b.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return b.useEffect(()=>wk(a,r.future),[a,r.future]),b.createElement(b.Fragment,null,b.createElement(Hd.Provider,{value:E},b.createElement(pb.Provider,{value:n},b.createElement(Lk.Provider,{value:m.current},b.createElement(Rk.Provider,{value:c},b.createElement(Nk,{basename:F,location:n.location,navigationType:n.historyAction,navigator:S,future:k},n.initialized||r.future.v7_partialHydration?b.createElement(Uk,{routes:r.routes,future:r.future,state:n}):s))))),null)}const Uk=b.memo(zk);function zk(t){let{routes:s,future:r,state:a}=t;return jb(s,void 0,a,r)}const Wk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Vk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jn=b.forwardRef(function(s,r){let{onClick:a,relative:n,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:p}=s,h=Ck(s,Ek),{basename:g}=b.useContext(Pn),x,f=!1;if(typeof d=="string"&&Vk.test(d)&&(x=d,Wk))try{let w=new URL(window.location.href),S=d.startsWith("//")?new URL(w.protocol+d):new URL(d),F=ll(S.pathname,g);S.origin===w.origin&&F!=null?d=F+S.search+S.hash:f=!0}catch{}let m=ik(d,{relative:n}),j=Hk(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:n,viewTransition:p});function v(w){a&&a(w),w.defaultPrevented||j(w)}return b.createElement("a",ko({},h,{href:x||m,onClick:f||i?a:v,ref:r,target:c}))});var _f;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(_f||(_f={}));var Tf;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Tf||(Tf={}));function Hk(t,s){let{target:r,replace:a,state:n,preventScrollReset:i,relative:l,viewTransition:o}=s===void 0?{}:s,c=ja(),d=mi(),u=vb(t,{relative:l});return b.useCallback(p=>{if(Tk(p,r)){p.preventDefault();let h=a!==void 0?a:ii(d)===ii(u);c(t,{replace:h,state:n,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,a,n,r,t,i,l,o])}const Gk=()=>{if(typeof window<"u"){const t=window.location.hostname;return t==="thenefol.com"||t==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}/api`:"https://thenefol.com/api"}return"https://thenefol.com/api"},xc=()=>Gk();class qk{constructor(){Ca(this,"authState",{user:null,isAuthenticated:!1,isLoading:!0,error:null});Ca(this,"listeners",new Set);this.initializeFromStorage()}getToken(){return localStorage.getItem("auth_token")}normalizeUser(s){if(!s)throw new Error("Invalid user payload");const r=Array.isArray(s.permissions)?s.permissions:typeof s.permissions=="string"?s.permissions.split(",").map(n=>n.trim()).filter(Boolean):[],a=Array.isArray(s.roles)?s.roles:typeof s.roles=="string"?s.roles.split(",").map(n=>n.trim()).filter(Boolean):[];return{id:s.id,email:s.email,name:s.name||s.email,role:s.role||a[0]||"admin",permissions:r}}initializeFromStorage(){try{const s=this.getToken(),r=localStorage.getItem("user");if(s&&r){const a=JSON.parse(r),n=this.normalizeUser(a);this.authState={user:n,isAuthenticated:!0,isLoading:!1,error:null}}else this.initializeEmptyState()}catch(s){console.error("Failed to initialize auth from storage:",s),this.authState={user:null,isAuthenticated:!1,isLoading:!1,error:"Failed to restore authentication"}}}initializeEmptyState(){this.authState={user:null,isAuthenticated:!1,isLoading:!1,error:null}}subscribe(s){return this.listeners.add(s),()=>{this.listeners.delete(s)}}notifyListeners(){this.listeners.forEach(s=>s({...this.authState}))}areStatesEqual(s,r){if(s.isAuthenticated!==r.isAuthenticated||s.isLoading!==r.isLoading||s.error!==r.error)return!1;const a=s.user,n=r.user;if(a===null&&n===null)return!0;if(a===null||n===null)return!1;const i=a.permissions?[...a.permissions].sort():[],l=n.permissions?[...n.permissions].sort():[];return a.id===n.id&&a.email===n.email&&a.role===n.role&&a.name===n.name&&JSON.stringify(i)===JSON.stringify(l)}setAuthState(s){const r={...this.authState,...s};this.areStatesEqual(this.authState,r)||(this.authState=r,this.notifyListeners())}getAuthState(){return{...this.authState}}async login(s){try{this.setAuthState({isLoading:!0,error:null});const r=xc(),a=await fetch(`${r}/staff/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(a.ok){const n=await a.json(),{user:i,token:l}=n,o=this.normalizeUser(i);return localStorage.setItem("auth_token",l),localStorage.setItem("user",JSON.stringify(o)),this.setAuthState({user:o,isAuthenticated:!0,isLoading:!1,error:null}),!0}else{const n=await a.json().catch(()=>({}));return this.setAuthState({isLoading:!1,error:n.error||n.message||"Login failed. Please check your credentials."}),!1}}catch{return this.setAuthState({isLoading:!1,error:"Login failed. Please check your credentials."}),!1}}async logout(){try{const s=this.getToken(),r=xc();s&&await fetch(`${r}/staff/auth/logout`,{method:"POST",headers:{Authorization:`Bearer ${s}`}}).catch(()=>{}),localStorage.removeItem("auth_token"),localStorage.removeItem("user"),this.setAuthState({user:null,isAuthenticated:!1,isLoading:!1,error:null})}catch(s){console.error("Logout error:",s)}}async checkAuth(){try{this.setAuthState({isLoading:!0});const s=this.getToken(),r=localStorage.getItem("user");if(!s||!r)return this.setAuthState({user:null,isAuthenticated:!1,isLoading:!1,error:null}),!1;const a=JSON.parse(r),n=xc(),i=await fetch(`${n}/staff/auth/me`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(i.ok){const l=await i.json(),o=this.normalizeUser(l.user||a);return localStorage.setItem("user",JSON.stringify(o)),this.setAuthState({user:o,isAuthenticated:!0,isLoading:!1,error:null}),!0}else return localStorage.removeItem("auth_token"),localStorage.removeItem("user"),this.setAuthState({user:null,isAuthenticated:!1,isLoading:!1,error:null}),!1}catch(s){return console.error("Auth check error:",s),localStorage.removeItem("auth_token"),localStorage.removeItem("user"),this.setAuthState({user:null,isAuthenticated:!1,isLoading:!1,error:"Authentication check failed"}),!1}}getCurrentUser(){return this.authState.user}hasPermission(s){const r=this.authState.user;return r?(Array.isArray(r.permissions)?r.permissions:typeof r.permissions=="string"?r.permissions.split(",").map(n=>n.trim()).filter(Boolean):[]).includes(s):!1}hasRole(s){return this.authState.user?this.authState.user.role===s:!1}async updateProfile(s){try{if(!this.authState.user)return!1;const r={...this.authState.user,...s};return localStorage.setItem("user",JSON.stringify(r)),this.setAuthState({user:r}),!0}catch(r){return console.error("Profile update error:",r),!1}}async changePassword(s,r,a){try{const n=this.getToken();if(!n)throw new Error("Not authenticated");const i=xc(),l=await fetch(`${i}/staff/auth/change-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({currentPassword:s,newPassword:r,confirmNewPassword:a})});if(l.ok)return!0;const o=await l.json().catch(()=>({}));throw new Error(o.error||o.message||"Failed to update password")}catch(n){throw console.error("Password change error:",n),n}}}const en=new qk,Cb=b.createContext(void 0);function Jk({children:t}){var x,f,m,j,v;const[s,r]=b.useState(en.getAuthState());b.useEffect(()=>{const w=en.subscribe(r);return en.checkAuth(),w},[]);const a=b.useCallback(async(w,S)=>await en.login({email:w,password:S}),[]),n=b.useCallback(async()=>{await en.logout()},[]),i=b.useCallback(w=>en.hasPermission(w),[]),l=b.useCallback(w=>en.hasRole(w),[]),o=(x=s.user)==null?void 0:x.id,c=(f=s.user)==null?void 0:f.email,d=(m=s.user)==null?void 0:m.role,u=(j=s.user)==null?void 0:j.name,p=(v=s.user)==null?void 0:v.permissions,h=b.useMemo(()=>{if(!s.user)return null;const w=(p==null?void 0:p.slice().sort().join(","))||"";return`${o}-${c}-${d}-${u}-${w}`},[o,c,d,u,p]),g=b.useMemo(()=>{var w;return{isAuthenticated:s.isAuthenticated,user:s.user,role:((w=s.user)==null?void 0:w.role)||"viewer",isLoading:s.isLoading,error:s.error,login:a,logout:n,hasPermission:i,hasRole:l}},[s.isAuthenticated,s.isLoading,s.error,h,a,n,i,l]);return e.jsx(Cb.Provider,{value:g,children:t})}function Uo(){const t=b.useContext(Cb);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function Kk({allow:t}){const{isAuthenticated:s,role:r,isLoading:a}=Uo();return a?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s?t&&!t.includes(r)?e.jsx(No,{to:"/admin/dashboard",replace:!0},"redirect-to-home"):e.jsx(Sb,{}):e.jsx(No,{to:"/admin/login",replace:!0},"redirect-to-login")}function ms({permission:t,anyOf:s,role:r,children:a,fallback:n=null}){const{hasPermission:i,hasRole:l}=Uo();let o=!0;return r&&(o=o&&l(r)),t&&(o=o&&i(t)),Array.isArray(s)&&s.length>0&&(o=o&&s.some(c=>i(c))),o?e.jsx(e.Fragment,{children:a}):e.jsx(e.Fragment,{children:n})}/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Xk=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,r,a)=>a?a.toUpperCase():r.toLowerCase()),Ef=t=>{const s=Xk(t);return s.charAt(0).toUpperCase()+s.slice(1)},_b=(...t)=>t.filter((s,r,a)=>!!s&&s.trim()!==""&&a.indexOf(s)===r).join(" ").trim(),Qk=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=b.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:l,...o},c)=>b.createElement("svg",{ref:c,...Zk,width:s,height:s,stroke:t,strokeWidth:a?Number(r)*24/Number(s):r,className:_b("lucide",n),...!i&&!Qk(o)&&{"aria-hidden":"true"},...o},[...l.map(([d,u])=>b.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=(t,s)=>{const r=b.forwardRef(({className:a,...n},i)=>b.createElement(e2,{ref:i,iconNode:s,className:_b(`lucide-${Yk(Ef(t))}`,`lucide-${t}`,a),...n}));return r.displayName=Ef(t),r};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Bn=Ae("activity",t2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],r2=Ae("arrow-left",s2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],n2=Ae("arrow-right",a2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Af=Ae("award",i2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ff=Ae("ban",l2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Oa=Ae("bell",o2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Pf=Ae("bot",c2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],u2=Ae("brain",d2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Tb=Ae("building-2",x2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Mr=Ae("calendar",m2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ss=Ae("chart-column",h2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],fd=Ae("check",f2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],mm=Ae("chevron-down",p2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],hm=Ae("chevron-up",g2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],So=Ae("circle-alert",y2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],v2=Ae("circle-check",b2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Vt=Ae("circle-check-big",j2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Kt=Ae("circle-x",w2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],cs=Ae("clock",N2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Df=Ae("code",k2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],tl=Ae("copy",S2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],li=Ae("credit-card",C2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]],Hu=Ae("crop",_2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],E2=Ae("database",T2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Co=Ae("dollar-sign",A2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],wa=Ae("download",F2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],D2=Ae("external-link",P2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Gu=Ae("eye-off",R2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ct=Ae("eye",L2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],Eb=Ae("facebook",O2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],gs=Ae("file-text",I2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],B2=Ae("flag",M2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],cl=Ae("funnel",$2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],T0=Ae("gift",U2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Yn=Ae("globe",z2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],V2=Ae("grip-vertical",W2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],G2=Ae("hash",H2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Wi=Ae("heart",q2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Xn=Ae("image",J2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Y2=Ae("info",K2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],Ab=Ae("instagram",X2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],qu=Ae("key",Q2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],e4=Ae("loader-circle",Z2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ss=Ae("mail",t4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],fm=Ae("map-pin",s4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Pa=Ae("message-circle",r4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],fs=Ae("message-square",a4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],i4=Ae("mic",n4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],o4=Ae("monitor",l4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],d4=Ae("mouse-pointer-click",c4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Ju=Ae("mouse-pointer",u4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],fa=Ae("package",x4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Ku=Ae("palette",m4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],f4=Ae("paperclip",h4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Cn=Ae("pause",p4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Yu=Ae("pen",g4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],b4=Ae("percent",y4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],pa=Ae("phone",v4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Wa=Ae("play",j4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],rs=Ae("plus",w4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],k4=Ae("receipt",N4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],or=Ae("refresh-cw",S4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Fb=Ae("rotate-ccw",C4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],$s=Ae("save",_4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],bs=Ae("search",T4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ra=Ae("send",E4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ws=Ae("settings",A4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Pb=Ae("shield",F4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],D4=Ae("shopping-bag",P4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Qs=Ae("shopping-cart",R4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],pm=Ae("smartphone",L4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Db=Ae("smile",O4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Fl=Ae("sparkles",I4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Rb=Ae("square-check-big",M4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],jr=Ae("square-pen",B4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],U4=Ae("square-x",$4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],xr=Ae("star",z4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Lb=Ae("tag",W4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ds=Ae("target",V4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Mt=Ae("trash-2",H4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],zt=Ae("trending-up",G4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],E0=Ae("type",q4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],rn=Ae("upload",J4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Pt=Ae("users",K4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ga=Ae("user",Y4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Q4=Ae("video",X4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Ob=Ae("wallet",Z4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],t3=Ae("wifi-off",e3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],r3=Ae("wifi",s3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],n3=Ae("workflow",a3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],es=Ae("x",i3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],Ib=Ae("youtube",l3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Gl=Ae("zap",o3),c3=()=>{if(typeof window<"u"){const t=window.location.hostname;return t==="thenefol.com"||t==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}/api`:"https://thenefol.com/api"}return"https://thenefol.com/api"},d3=()=>c3();class u3{constructor(){Ca(this,"baseURL");this.baseURL=d3()}async request(s,r={}){let a=s;this.baseURL.endsWith("/api")&&s.startsWith("/api")&&(s.startsWith("/api/")?a=s.substring(5):s==="/api"?a="/":a=s.substring(4)),a.startsWith("/")||(a="/"+a);const i=`${this.baseURL}${a}`,l=localStorage.getItem("auth_token");let o="admin",c="orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update";try{const u=localStorage.getItem("user");if(u){const p=JSON.parse(u);p!=null&&p.role&&(o=p.role),Array.isArray(p==null?void 0:p.permissions)&&p.permissions.length>0&&(c=p.permissions.join(","))}}catch{}const d={headers:{"Content-Type":"application/json",...l&&{Authorization:`Bearer ${l}`},"x-user-role":o,"x-user-permissions":c,...r.headers},...r};try{const u=await fetch(i,d);if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);return await u.json()}catch(u){throw console.error(`API request failed for ${s}:`,u),u}}async getLoyaltyPrograms(){return this.request("/api/loyalty-program")}async createLoyaltyProgram(s){return this.request("/api/loyalty-program",{method:"POST",body:JSON.stringify(s)})}async updateLoyaltyProgram(s,r){return this.request(`/api/loyalty-program/${s}`,{method:"PUT",body:JSON.stringify(r)})}async getAffiliatePrograms(){return this.request("/api/affiliate-program")}async createAffiliateProgram(s){return this.request("/api/affiliate-program",{method:"POST",body:JSON.stringify(s)})}async getCashbackSystems(){return this.request("/api/cashback-system")}async createCashbackSystem(s){return this.request("/api/cashback-system",{method:"POST",body:JSON.stringify(s)})}async getCashbackWallet(){return this.request("/api/cashback/wallet")}async getCashbackOffers(){return this.request("/api/cashback/offers")}async getCashbackTransactions(){return this.request("/api/cashback/transactions")}async redeemCashback(s){return this.request("/api/cashback/redeem",{method:"POST",body:JSON.stringify(s)})}async getEmailCampaigns(){return this.request("/api/email-marketing/campaigns")}async createEmailCampaign(s){return this.request("/api/email-marketing/campaigns",{method:"POST",body:JSON.stringify(s)})}async updateEmailCampaign(s,r){return this.request(`/api/email-marketing/campaigns/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteEmailCampaign(s){return this.request(`/api/email-marketing/campaigns/${s}`,{method:"DELETE"})}async getEmailTemplates(){return this.request("/api/email-marketing/templates")}async createEmailTemplate(s){return this.request("/api/email-marketing/templates",{method:"POST",body:JSON.stringify(s)})}async updateEmailTemplate(s,r){return this.request(`/api/email-marketing/templates/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteEmailTemplate(s){return this.request(`/api/email-marketing/templates/${s}`,{method:"DELETE"})}async sendEmailCampaign(s){return this.request("/api/email-marketing/campaigns/send",{method:"POST",body:JSON.stringify(s)})}async getEmailLists(){return this.request("/api/email-marketing/lists")}async createEmailList(s){return this.request("/api/email-marketing/lists",{method:"POST",body:JSON.stringify(s)})}async addEmailSubscribers(s){return this.request("/api/email-marketing/lists/subscribers",{method:"POST",body:JSON.stringify(s)})}async getEmailSendingLogs(s){const r=s?`?campaign_id=${s}`:"";return this.request(`/api/email-marketing/logs${r}`)}async getEmailAutomations(){return this.request("/api/email-marketing/automations")}async createEmailAutomation(s){return this.request("/api/email-marketing/automations",{method:"POST",body:JSON.stringify(s)})}async updateEmailAutomation(s,r){return this.request(`/api/email-marketing/automations/${s}`,{method:"PUT",body:JSON.stringify(r)})}async getSMSCampaigns(){return this.request("/api/sms-marketing/campaigns")}async createSMSCampaign(s){return this.request("/api/sms-marketing/campaigns",{method:"POST",body:JSON.stringify(s)})}async updateSMSCampaign(s,r){return this.request(`/api/sms-marketing/campaigns/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteSMSCampaign(s){return this.request(`/api/sms-marketing/campaigns/${s}`,{method:"DELETE"})}async getSMSTemplates(){return this.request("/api/sms-marketing/templates")}async getSMSAutomations(){return this.request("/api/sms-marketing/automations")}async createSMSAutomation(s){return this.request("/api/sms-marketing/automations",{method:"POST",body:JSON.stringify(s)})}async updateSMSAutomation(s,r){return this.request(`/api/sms-marketing/automations/${s}`,{method:"PUT",body:JSON.stringify(r)})}async getPushNotifications(){return this.request("/api/push-notifications")}async createPushNotification(s){return this.request("/api/push-notifications",{method:"POST",body:JSON.stringify(s)})}async getPushTemplates(){return this.request("/api/push-notifications/templates")}async getPushAutomations(){return this.request("/api/push-notifications/automations")}async getWhatsAppChats(){return this.request("/api/whatsapp-chat/sessions")}async getWhatsAppTemplates(){return this.request("/api/whatsapp-chat/templates")}async getWhatsAppAutomations(){return this.request("/api/whatsapp-chat/automations")}async getLiveChatSessions(){return this.request("/api/live-chat/sessions")}async getLiveChatAgents(){return this.request("/api/live-chat/agents")}async getLiveChatWidgets(){return this.request("/api/live-chat/widgets")}async getLiveChatMessages(s){const r=new URLSearchParams({sessionId:String(s)}).toString();return this.request(`/api/live-chat/messages?${r}`)}async sendLiveChatMessage(s){return this.request("/api/live-chat/messages",{method:"POST",body:JSON.stringify(s)})}async getAnalyticsData(){return this.request("/api/advanced-analytics")}async getForms(){return this.request("/api/form-builder")}async createForm(s){return this.request("/api/form-builder",{method:"POST",body:JSON.stringify(s)})}async getCustomerJourneys(s,r){const a=new URLSearchParams;s&&a.append("timeRange",s),r&&a.append("eventFilter",r);const n=a.toString();return this.request(`/api/journey-tracking${n?`?${n}`:""}`)}async getActionableInsights(){return this.request("/api/actionable_insights")}async getAIFeatures(){return this.request("/api/ai/features")}async getAITasks(){return this.request("/api/ai/tasks")}async getJourneyFunnels(){return this.request("/api/journey_funnels")}async getPersonalizationRules(){return this.request("/api/personalization_rules")}async getCustomerSegments(){return this.request("/api/customer_segments")}async createCustomerSegment(s){return this.request("/api/customer_segments",{method:"POST",body:JSON.stringify(s)})}async getCustomerSegmentAggregates(){return this.request("/api/customer_segments/aggregate")}async updateCustomerSegment(s,r){return this.request(`/api/customer_segments/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteCustomerSegment(s){return this.request(`/api/customer_segments/${s}`,{method:"DELETE"})}async getCustomAudiences(){return this.request("/api/custom_audiences")}async createCustomAudience(s){return this.request("/api/custom_audiences",{method:"POST",body:JSON.stringify(s)})}async getWorkflows(){return this.request("/api/workflows")}async createWorkflow(s){return this.request("/api/workflows",{method:"POST",body:JSON.stringify(s)})}async updateWorkflow(s,r){return this.request(`/api/workflows/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteWorkflow(s){return this.request(`/api/workflows/${s}`,{method:"DELETE"})}async getOmniChannelCampaigns(){return this.request("/api/omni_channel_campaigns")}async getAPIConfigurations(){return this.request("/api/api-manager")}async getAPIConfiguration(s){return this.request(`/api/api-manager/${s}`)}async createAPIConfiguration(s){return this.request("/api/api-manager",{method:"POST",body:JSON.stringify(s)})}async updateAPIConfiguration(s,r){return this.request(`/api/api-manager/${s}`,{method:"PUT",body:JSON.stringify(r)})}async patchAPIConfiguration(s,r){return this.request(`/api/api-manager/${s}`,{method:"PATCH",body:JSON.stringify(r)})}async deleteAPIConfiguration(s){return this.request(`/api/api-manager/${s}`,{method:"DELETE"})}async testAPIConfiguration(s,r="connection"){return this.request(`/api/api-manager/${s}/test`,{method:"POST",body:JSON.stringify({testType:r})})}async getProducts(){return this.request("/api/products")}async createProduct(s){return this.request("/api/products",{method:"POST",body:JSON.stringify(s)})}async getCustomers(){return this.request("/api/customers")}async getUsers(){return this.request("/api/users")}async getAnalytics(){return this.request("/api/analytics")}async getPaymentGateways(){return this.request("/api/payment-gateways")}async createPaymentGateway(s){return this.request("/api/payment-gateways",{method:"POST",body:JSON.stringify(s)})}async updatePaymentGateway(s,r){return this.request(`/api/payment-gateways/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deletePaymentGateway(s){return this.request(`/api/payment-gateways/${s}`,{method:"DELETE"})}async getOrderDelivery(s){return this.request(`/api/order-delivery/${s}`)}async updateOrderDelivery(s){return this.request("/api/order-delivery",{method:"POST",body:JSON.stringify(s)})}async getProductReviews(s){return this.request(`/api/product-reviews/${s}`)}async createProductReview(s){return this.request("/api/product-reviews",{method:"POST",body:JSON.stringify(s)})}async updateProductReview(s,r){return this.request(`/api/product-reviews/${s}`,{method:"PUT",body:JSON.stringify(r)})}async getShiprocketConfig(){return this.request("/api/shiprocket/config")}async updateShiprocketConfig(s){return this.request("/api/shiprocket/config",{method:"POST",body:JSON.stringify(s)})}async createShiprocketShipment(s){return this.request(`/api/shiprocket/orders/${s}/shipment`,{method:"POST"})}async createShiprocketAwb(s){return this.request(`/api/shiprocket/orders/${s}/awb`,{method:"POST"})}async getShiprocketTracking(s){return this.request(`/api/shiprocket/orders/${s}/track`)}async checkShiprocketServiceability(s){const r=new URLSearchParams({pickup_postcode:s.pickup_postcode,delivery_postcode:s.delivery_postcode,cod:s.cod??"0",weight:s.weight??"0.5"}).toString();return this.request(`/api/shiprocket/serviceability?${r}`)}async getDiscounts(){return this.request("/api/discounts")}async createDiscount(s){return this.request("/api/discounts",{method:"POST",body:JSON.stringify(s)})}async getDiscountUsage(){return this.request("/api/discounts/usage")}async getOrders(){return this.request("/api/orders")}async createOrder(s){return this.request("/api/orders",{method:"POST",body:JSON.stringify(s)})}async updateOrder(s,r){return this.request(`/api/orders/${s}`,{method:"PUT",body:JSON.stringify(r)})}async getContactMessages(){return this.request("/api/contact/messages")}async updateContactMessageStatus(s,r){return this.request(`/api/contact/messages/${s}`,{method:"PUT",body:JSON.stringify({status:r})})}async getAdminNotifications(s="all",r=50){return this.request(`/api/admin/notifications?status=${s}&limit=${r}`)}async getAdminNotificationUnreadCount(){return this.request("/api/admin/notifications/unread-count")}async markNotificationAsRead(s){return this.request(`/api/admin/notifications/${s}/read`,{method:"PUT"})}async markAllNotificationsAsRead(){return this.request("/api/admin/notifications/read-all",{method:"PUT"})}async deleteNotification(s){return this.request(`/api/admin/notifications/${s}`,{method:"DELETE"})}}const rt=new u3,ya=Object.create(null);ya.open="0";ya.close="1";ya.ping="2";ya.pong="3";ya.message="4";ya.upgrade="5";ya.noop="6";const Mc=Object.create(null);Object.keys(ya).forEach(t=>{Mc[ya[t]]=t});const Xu={type:"error",data:"parser error"},Mb=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Bb=typeof ArrayBuffer=="function",$b=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,gm=({type:t,data:s},r,a)=>Mb&&s instanceof Blob?r?a(s):Rf(s,a):Bb&&(s instanceof ArrayBuffer||$b(s))?r?a(s):Rf(new Blob([s]),a):a(ya[t]+(s||"")),Rf=(t,s)=>{const r=new FileReader;return r.onload=function(){const a=r.result.split(",")[1];s("b"+(a||""))},r.readAsDataURL(t)};function Lf(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let A0;function x3(t,s){if(Mb&&t.data instanceof Blob)return t.data.arrayBuffer().then(Lf).then(s);if(Bb&&(t.data instanceof ArrayBuffer||$b(t.data)))return s(Lf(t.data));gm(t,!1,r=>{A0||(A0=new TextEncoder),s(A0.encode(r))})}const Of="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Of.length;t++)Pl[Of.charCodeAt(t)]=t;const m3=t=>{let s=t.length*.75,r=t.length,a,n=0,i,l,o,c;t[t.length-1]==="="&&(s--,t[t.length-2]==="="&&s--);const d=new ArrayBuffer(s),u=new Uint8Array(d);for(a=0;a<r;a+=4)i=Pl[t.charCodeAt(a)],l=Pl[t.charCodeAt(a+1)],o=Pl[t.charCodeAt(a+2)],c=Pl[t.charCodeAt(a+3)],u[n++]=i<<2|l>>4,u[n++]=(l&15)<<4|o>>2,u[n++]=(o&3)<<6|c&63;return d},h3=typeof ArrayBuffer=="function",ym=(t,s)=>{if(typeof t!="string")return{type:"message",data:Ub(t,s)};const r=t.charAt(0);return r==="b"?{type:"message",data:f3(t.substring(1),s)}:Mc[r]?t.length>1?{type:Mc[r],data:t.substring(1)}:{type:Mc[r]}:Xu},f3=(t,s)=>{if(h3){const r=m3(t);return Ub(r,s)}else return{base64:!0,data:t}},Ub=(t,s)=>{switch(s){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},zb="",p3=(t,s)=>{const r=t.length,a=new Array(r);let n=0;t.forEach((i,l)=>{gm(i,!1,o=>{a[l]=o,++n===r&&s(a.join(zb))})})},g3=(t,s)=>{const r=t.split(zb),a=[];for(let n=0;n<r.length;n++){const i=ym(r[n],s);if(a.push(i),i.type==="error")break}return a};function y3(){return new TransformStream({transform(t,s){x3(t,r=>{const a=r.length;let n;if(a<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,a);else if(a<65536){n=new Uint8Array(3);const i=new DataView(n.buffer);i.setUint8(0,126),i.setUint16(1,a)}else{n=new Uint8Array(9);const i=new DataView(n.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(a))}t.data&&typeof t.data!="string"&&(n[0]|=128),s.enqueue(n),s.enqueue(r)})}})}let F0;function mc(t){return t.reduce((s,r)=>s+r.length,0)}function hc(t,s){if(t[0].length===s)return t.shift();const r=new Uint8Array(s);let a=0;for(let n=0;n<s;n++)r[n]=t[0][a++],a===t[0].length&&(t.shift(),a=0);return t.length&&a<t[0].length&&(t[0]=t[0].slice(a)),r}function b3(t,s){F0||(F0=new TextDecoder);const r=[];let a=0,n=-1,i=!1;return new TransformStream({transform(l,o){for(r.push(l);;){if(a===0){if(mc(r)<1)break;const c=hc(r,1);i=(c[0]&128)===128,n=c[0]&127,n<126?a=3:n===126?a=1:a=2}else if(a===1){if(mc(r)<2)break;const c=hc(r,2);n=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),a=3}else if(a===2){if(mc(r)<8)break;const c=hc(r,8),d=new DataView(c.buffer,c.byteOffset,c.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){o.enqueue(Xu);break}n=u*Math.pow(2,32)+d.getUint32(4),a=3}else{if(mc(r)<n)break;const c=hc(r,n);o.enqueue(ym(i?c:F0.decode(c),s)),a=0}if(n===0||n>t){o.enqueue(Xu);break}}}})}const Wb=4;function os(t){if(t)return v3(t)}function v3(t){for(var s in os.prototype)t[s]=os.prototype[s];return t}os.prototype.on=os.prototype.addEventListener=function(t,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(s),this};os.prototype.once=function(t,s){function r(){this.off(t,r),s.apply(this,arguments)}return r.fn=s,this.on(t,r),this};os.prototype.off=os.prototype.removeListener=os.prototype.removeAllListeners=os.prototype.removeEventListener=function(t,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var a,n=0;n<r.length;n++)if(a=r[n],a===s||a.fn===s){r.splice(n,1);break}return r.length===0&&delete this._callbacks["$"+t],this};os.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),r=this._callbacks["$"+t],a=1;a<arguments.length;a++)s[a-1]=arguments[a];if(r){r=r.slice(0);for(var a=0,n=r.length;a<n;++a)r[a].apply(this,s)}return this};os.prototype.emitReserved=os.prototype.emit;os.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};os.prototype.hasListeners=function(t){return!!this.listeners(t).length};const qd=typeof Promise=="function"&&typeof Promise.resolve=="function"?s=>Promise.resolve().then(s):(s,r)=>r(s,0),Pr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),j3="arraybuffer";function Vb(t,...s){return s.reduce((r,a)=>(t.hasOwnProperty(a)&&(r[a]=t[a]),r),{})}const w3=Pr.setTimeout,N3=Pr.clearTimeout;function Jd(t,s){s.useNativeTimers?(t.setTimeoutFn=w3.bind(Pr),t.clearTimeoutFn=N3.bind(Pr)):(t.setTimeoutFn=Pr.setTimeout.bind(Pr),t.clearTimeoutFn=Pr.clearTimeout.bind(Pr))}const k3=1.33;function S3(t){return typeof t=="string"?C3(t):Math.ceil((t.byteLength||t.size)*k3)}function C3(t){let s=0,r=0;for(let a=0,n=t.length;a<n;a++)s=t.charCodeAt(a),s<128?r+=1:s<2048?r+=2:s<55296||s>=57344?r+=3:(a++,r+=4);return r}function Hb(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function _3(t){let s="";for(let r in t)t.hasOwnProperty(r)&&(s.length&&(s+="&"),s+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return s}function T3(t){let s={},r=t.split("&");for(let a=0,n=r.length;a<n;a++){let i=r[a].split("=");s[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return s}class E3 extends Error{constructor(s,r,a){super(s),this.description=r,this.context=a,this.type="TransportError"}}class bm extends os{constructor(s){super(),this.writable=!1,Jd(this,s),this.opts=s,this.query=s.query,this.socket=s.socket,this.supportsBinary=!s.forceBase64}onError(s,r,a){return super.emitReserved("error",new E3(s,r,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(s){this.readyState==="open"&&this.write(s)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(s){const r=ym(s,this.socket.binaryType);this.onPacket(r)}onPacket(s){super.emitReserved("packet",s)}onClose(s){this.readyState="closed",super.emitReserved("close",s)}pause(s){}createUri(s,r={}){return s+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const s=this.opts.hostname;return s.indexOf(":")===-1?s:"["+s+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(s){const r=_3(s);return r.length?"?"+r:""}}class A3 extends bm{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(s){this.readyState="pausing";const r=()=>{this.readyState="paused",s()};if(this._polling||!this.writable){let a=0;this._polling&&(a++,this.once("pollComplete",function(){--a||r()})),this.writable||(a++,this.once("drain",function(){--a||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(s){const r=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};g3(s,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const s=()=>{this.write([{type:"close"}])};this.readyState==="open"?s():this.once("open",s)}write(s){this.writable=!1,p3(s,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const s=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Hb()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(s,r)}}let Gb=!1;try{Gb=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const F3=Gb;function P3(){}class D3 extends A3{constructor(s){if(super(s),typeof location<"u"){const r=location.protocol==="https:";let a=location.port;a||(a=r?"443":"80"),this.xd=typeof location<"u"&&s.hostname!==location.hostname||a!==s.port}}doWrite(s,r){const a=this.request({method:"POST",data:s});a.on("success",r),a.on("error",(n,i)=>{this.onError("xhr post error",n,i)})}doPoll(){const s=this.request();s.on("data",this.onData.bind(this)),s.on("error",(r,a)=>{this.onError("xhr poll error",r,a)}),this.pollXhr=s}}let Vi=class Bc extends os{constructor(s,r,a){super(),this.createRequest=s,Jd(this,a),this._opts=a,this._method=a.method||"GET",this._uri=r,this._data=a.data!==void 0?a.data:null,this._create()}_create(){var s;const r=Vb(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const a=this._xhr=this.createRequest(r);try{a.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){a.setDisableHeaderCheck&&a.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&a.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{a.setRequestHeader("Accept","*/*")}catch{}(s=this._opts.cookieJar)===null||s===void 0||s.addCookies(a),"withCredentials"in a&&(a.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(a.timeout=this._opts.requestTimeout),a.onreadystatechange=()=>{var n;a.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(a.getResponseHeader("set-cookie"))),a.readyState===4&&(a.status===200||a.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof a.status=="number"?a.status:0)},0))},a.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=Bc.requestsCount++,Bc.requests[this._index]=this)}_onError(s){this.emitReserved("error",s,this._xhr),this._cleanup(!0)}_cleanup(s){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=P3,s)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Bc.requests[this._index],this._xhr=null}}_onLoad(){const s=this._xhr.responseText;s!==null&&(this.emitReserved("data",s),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Vi.requestsCount=0;Vi.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",If);else if(typeof addEventListener=="function"){const t="onpagehide"in Pr?"pagehide":"unload";addEventListener(t,If,!1)}}function If(){for(let t in Vi.requests)Vi.requests.hasOwnProperty(t)&&Vi.requests[t].abort()}const R3=function(){const t=qb({xdomain:!1});return t&&t.responseType!==null}();class L3 extends D3{constructor(s){super(s);const r=s&&s.forceBase64;this.supportsBinary=R3&&!r}request(s={}){return Object.assign(s,{xd:this.xd},this.opts),new Vi(qb,this.uri(),s)}}function qb(t){const s=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!s||F3))return new XMLHttpRequest}catch{}if(!s)try{return new Pr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Jb=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class O3 extends bm{get name(){return"websocket"}doOpen(){const s=this.uri(),r=this.opts.protocols,a=Jb?{}:Vb(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(s,r,a)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=s=>this.onClose({description:"websocket connection closed",context:s}),this.ws.onmessage=s=>this.onData(s.data),this.ws.onerror=s=>this.onError("websocket error",s)}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const a=s[r],n=r===s.length-1;gm(a,this.supportsBinary,i=>{try{this.doWrite(a,i)}catch{}n&&qd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const s=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Hb()),this.supportsBinary||(r.b64=1),this.createUri(s,r)}}const P0=Pr.WebSocket||Pr.MozWebSocket;class I3 extends O3{createSocket(s,r,a){return Jb?new P0(s,r,a):r?new P0(s,r):new P0(s)}doWrite(s,r){this.ws.send(r)}}class M3 extends bm{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(s){return this.emitReserved("error",s)}this._transport.closed.then(()=>{this.onClose()}).catch(s=>{this.onError("webtransport error",s)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(s=>{const r=b3(Number.MAX_SAFE_INTEGER,this.socket.binaryType),a=s.readable.pipeThrough(r).getReader(),n=y3();n.readable.pipeTo(s.writable),this._writer=n.writable.getWriter();const i=()=>{a.read().then(({done:o,value:c})=>{o||(this.onPacket(c),i())}).catch(o=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const a=s[r],n=r===s.length-1;this._writer.write(a).then(()=>{n&&qd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var s;(s=this._transport)===null||s===void 0||s.close()}}const B3={websocket:I3,webtransport:M3,polling:L3},$3=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,U3=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Qu(t){if(t.length>8e3)throw"URI too long";const s=t,r=t.indexOf("["),a=t.indexOf("]");r!=-1&&a!=-1&&(t=t.substring(0,r)+t.substring(r,a).replace(/:/g,";")+t.substring(a,t.length));let n=$3.exec(t||""),i={},l=14;for(;l--;)i[U3[l]]=n[l]||"";return r!=-1&&a!=-1&&(i.source=s,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=z3(i,i.path),i.queryKey=W3(i,i.query),i}function z3(t,s){const r=/\/{2,9}/g,a=s.replace(r,"/").split("/");return(s.slice(0,1)=="/"||s.length===0)&&a.splice(0,1),s.slice(-1)=="/"&&a.splice(a.length-1,1),a}function W3(t,s){const r={};return s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,n,i){n&&(r[n]=i)}),r}const Zu=typeof addEventListener=="function"&&typeof removeEventListener=="function",$c=[];Zu&&addEventListener("offline",()=>{$c.forEach(t=>t())},!1);class wn extends os{constructor(s,r){if(super(),this.binaryType=j3,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,s&&typeof s=="object"&&(r=s,s=null),s){const a=Qu(s);r.hostname=a.host,r.secure=a.protocol==="https"||a.protocol==="wss",r.port=a.port,a.query&&(r.query=a.query)}else r.host&&(r.hostname=Qu(r.host).host);Jd(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(a=>{const n=a.prototype.name;this.transports.push(n),this._transportsByName[n]=a}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=T3(this.opts.query)),Zu&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},$c.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(s){const r=Object.assign({},this.opts.query);r.EIO=Wb,r.transport=s,this.id&&(r.sid=this.id);const a=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[s]);return new this._transportsByName[s](a)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const s=this.opts.rememberUpgrade&&wn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(s);r.open(),this.setTransport(r)}setTransport(s){this.transport&&this.transport.removeAllListeners(),this.transport=s,s.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",wn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",s),this.emitReserved("heartbeat"),s.type){case"open":this.onHandshake(JSON.parse(s.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=s.data,this._onError(r);break;case"message":this.emitReserved("data",s.data),this.emitReserved("message",s.data);break}}onHandshake(s){this.emitReserved("handshake",s),this.id=s.sid,this.transport.query.sid=s.sid,this._pingInterval=s.pingInterval,this._pingTimeout=s.pingTimeout,this._maxPayload=s.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const s=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+s,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},s),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const s=this._getWritablePackets();this.transport.send(s),this._prevBufferLen=s.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let a=0;a<this.writeBuffer.length;a++){const n=this.writeBuffer[a].data;if(n&&(r+=S3(n)),a>0&&r>this._maxPayload)return this.writeBuffer.slice(0,a);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const s=Date.now()>this._pingTimeoutTime;return s&&(this._pingTimeoutTime=0,qd(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),s}write(s,r,a){return this._sendPacket("message",s,r,a),this}send(s,r,a){return this._sendPacket("message",s,r,a),this}_sendPacket(s,r,a,n){if(typeof r=="function"&&(n=r,r=void 0),typeof a=="function"&&(n=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const i={type:s,data:r,options:a};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const s=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),s()},a=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():s()}):this.upgrading?a():s()),this}_onError(s){if(wn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",s),this._onClose("transport error",s)}_onClose(s,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Zu&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const a=$c.indexOf(this._offlineEventListener);a!==-1&&$c.splice(a,1)}this.readyState="closed",this.id=null,this.emitReserved("close",s,r),this.writeBuffer=[],this._prevBufferLen=0}}}wn.protocol=Wb;class V3 extends wn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let s=0;s<this._upgrades.length;s++)this._probe(this._upgrades[s])}_probe(s){let r=this.createTransport(s),a=!1;wn.priorWebsocketSuccess=!1;const n=()=>{a||(r.send([{type:"ping",data:"probe"}]),r.once("packet",p=>{if(!a)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;wn.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=r.name,this.emitReserved("upgradeError",h)}}))};function i(){a||(a=!0,u(),r.close(),r=null)}const l=p=>{const h=new Error("probe error: "+p);h.transport=r.name,i(),this.emitReserved("upgradeError",h)};function o(){l("transport closed")}function c(){l("socket closed")}function d(p){r&&p.name!==r.name&&i()}const u=()=>{r.removeListener("open",n),r.removeListener("error",l),r.removeListener("close",o),this.off("close",c),this.off("upgrading",d)};r.once("open",n),r.once("error",l),r.once("close",o),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&s!=="webtransport"?this.setTimeoutFn(()=>{a||r.open()},200):r.open()}onHandshake(s){this._upgrades=this._filterUpgrades(s.upgrades),super.onHandshake(s)}_filterUpgrades(s){const r=[];for(let a=0;a<s.length;a++)~this.transports.indexOf(s[a])&&r.push(s[a]);return r}}let H3=class extends V3{constructor(s,r={}){const a=typeof s=="object"?s:r;(!a.transports||a.transports&&typeof a.transports[0]=="string")&&(a.transports=(a.transports||["polling","websocket","webtransport"]).map(n=>B3[n]).filter(n=>!!n)),super(s,a)}};function G3(t,s="",r){let a=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),a=Qu(t)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const i=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+i+":"+a.port+s,a.href=a.protocol+"://"+i+(r&&r.port===a.port?"":":"+a.port),a}const q3=typeof ArrayBuffer=="function",J3=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Kb=Object.prototype.toString,K3=typeof Blob=="function"||typeof Blob<"u"&&Kb.call(Blob)==="[object BlobConstructor]",Y3=typeof File=="function"||typeof File<"u"&&Kb.call(File)==="[object FileConstructor]";function vm(t){return q3&&(t instanceof ArrayBuffer||J3(t))||K3&&t instanceof Blob||Y3&&t instanceof File}function Uc(t,s){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,a=t.length;r<a;r++)if(Uc(t[r]))return!0;return!1}if(vm(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Uc(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&Uc(t[r]))return!0;return!1}function X3(t){const s=[],r=t.data,a=t;return a.data=ex(r,s),a.attachments=s.length,{packet:a,buffers:s}}function ex(t,s){if(!t)return t;if(vm(t)){const r={_placeholder:!0,num:s.length};return s.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let a=0;a<t.length;a++)r[a]=ex(t[a],s);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=ex(t[a],s));return r}return t}function Q3(t,s){return t.data=tx(t.data,s),delete t.attachments,t}function tx(t,s){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<s.length)return s[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=tx(t[r],s);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=tx(t[r],s));return t}const Z3=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],eS=5;var pt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(pt||(pt={}));class tS{constructor(s){this.replacer=s}encode(s){return(s.type===pt.EVENT||s.type===pt.ACK)&&Uc(s)?this.encodeAsBinary({type:s.type===pt.EVENT?pt.BINARY_EVENT:pt.BINARY_ACK,nsp:s.nsp,data:s.data,id:s.id}):[this.encodeAsString(s)]}encodeAsString(s){let r=""+s.type;return(s.type===pt.BINARY_EVENT||s.type===pt.BINARY_ACK)&&(r+=s.attachments+"-"),s.nsp&&s.nsp!=="/"&&(r+=s.nsp+","),s.id!=null&&(r+=s.id),s.data!=null&&(r+=JSON.stringify(s.data,this.replacer)),r}encodeAsBinary(s){const r=X3(s),a=this.encodeAsString(r.packet),n=r.buffers;return n.unshift(a),n}}function Mf(t){return Object.prototype.toString.call(t)==="[object Object]"}class jm extends os{constructor(s){super(),this.reviver=s}add(s){let r;if(typeof s=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(s);const a=r.type===pt.BINARY_EVENT;a||r.type===pt.BINARY_ACK?(r.type=a?pt.EVENT:pt.ACK,this.reconstructor=new sS(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(vm(s)||s.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(s),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+s)}decodeString(s){let r=0;const a={type:Number(s.charAt(0))};if(pt[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===pt.BINARY_EVENT||a.type===pt.BINARY_ACK){const i=r+1;for(;s.charAt(++r)!=="-"&&r!=s.length;);const l=s.substring(i,r);if(l!=Number(l)||s.charAt(r)!=="-")throw new Error("Illegal attachments");a.attachments=Number(l)}if(s.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(s.charAt(r)===","||r===s.length););a.nsp=s.substring(i,r)}else a.nsp="/";const n=s.charAt(r+1);if(n!==""&&Number(n)==n){const i=r+1;for(;++r;){const l=s.charAt(r);if(l==null||Number(l)!=l){--r;break}if(r===s.length)break}a.id=Number(s.substring(i,r+1))}if(s.charAt(++r)){const i=this.tryParse(s.substr(r));if(jm.isPayloadValid(a.type,i))a.data=i;else throw new Error("invalid payload")}return a}tryParse(s){try{return JSON.parse(s,this.reviver)}catch{return!1}}static isPayloadValid(s,r){switch(s){case pt.CONNECT:return Mf(r);case pt.DISCONNECT:return r===void 0;case pt.CONNECT_ERROR:return typeof r=="string"||Mf(r);case pt.EVENT:case pt.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&Z3.indexOf(r[0])===-1);case pt.ACK:case pt.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class sS{constructor(s){this.packet=s,this.buffers=[],this.reconPack=s}takeBinaryData(s){if(this.buffers.push(s),this.buffers.length===this.reconPack.attachments){const r=Q3(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const rS=Object.freeze(Object.defineProperty({__proto__:null,Decoder:jm,Encoder:tS,get PacketType(){return pt},protocol:eS},Symbol.toStringTag,{value:"Module"}));function Yr(t,s,r){return t.on(s,r),function(){t.off(s,r)}}const aS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Yb extends os{constructor(s,r,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=s,this.nsp=r,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const s=this.io;this.subs=[Yr(s,"open",this.onopen.bind(this)),Yr(s,"packet",this.onpacket.bind(this)),Yr(s,"error",this.onerror.bind(this)),Yr(s,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...s){return s.unshift("message"),this.emit.apply(this,s),this}emit(s,...r){var a,n,i;if(aS.hasOwnProperty(s))throw new Error('"'+s.toString()+'" is a reserved event name');if(r.unshift(s),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const l={type:pt.EVENT,data:r};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const u=this.ids++,p=r.pop();this._registerAckCallback(u,p),l.id=u}const o=(n=(a=this.io.engine)===null||a===void 0?void 0:a.transport)===null||n===void 0?void 0:n.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(s,r){var a;const n=(a=this.flags.timeout)!==null&&a!==void 0?a:this._opts.ackTimeout;if(n===void 0){this.acks[s]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[s];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===s&&this.sendBuffer.splice(o,1);r.call(this,new Error("operation has timed out"))},n),l=(...o)=>{this.io.clearTimeoutFn(i),r.apply(this,o)};l.withError=!0,this.acks[s]=l}emitWithAck(s,...r){return new Promise((a,n)=>{const i=(l,o)=>l?n(l):a(o);i.withError=!0,r.push(i),this.emit(s,...r)})}_addToQueue(s){let r;typeof s[s.length-1]=="function"&&(r=s.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:s,flags:Object.assign({fromQueue:!0},this.flags)};s.push((n,...i)=>a!==this._queue[0]?void 0:(n!==null?a.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(n)):(this._queue.shift(),r&&r(null,...i)),a.pending=!1,this._drainQueue())),this._queue.push(a),this._drainQueue()}_drainQueue(s=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!s||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(s){s.nsp=this.nsp,this.io._packet(s)}onopen(){typeof this.auth=="function"?this.auth(s=>{this._sendConnectPacket(s)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(s){this.packet({type:pt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},s):s})}onerror(s){this.connected||this.emitReserved("connect_error",s)}onclose(s,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",s,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(s=>{if(!this.sendBuffer.some(a=>String(a.id)===s)){const a=this.acks[s];delete this.acks[s],a.withError&&a.call(this,new Error("socket has been disconnected"))}})}onpacket(s){if(s.nsp===this.nsp)switch(s.type){case pt.CONNECT:s.data&&s.data.sid?this.onconnect(s.data.sid,s.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case pt.EVENT:case pt.BINARY_EVENT:this.onevent(s);break;case pt.ACK:case pt.BINARY_ACK:this.onack(s);break;case pt.DISCONNECT:this.ondisconnect();break;case pt.CONNECT_ERROR:this.destroy();const a=new Error(s.data.message);a.data=s.data.data,this.emitReserved("connect_error",a);break}}onevent(s){const r=s.data||[];s.id!=null&&r.push(this.ack(s.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(s){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const a of r)a.apply(this,s)}super.emit.apply(this,s),this._pid&&s.length&&typeof s[s.length-1]=="string"&&(this._lastOffset=s[s.length-1])}ack(s){const r=this;let a=!1;return function(...n){a||(a=!0,r.packet({type:pt.ACK,id:s,data:n}))}}onack(s){const r=this.acks[s.id];typeof r=="function"&&(delete this.acks[s.id],r.withError&&s.data.unshift(null),r.apply(this,s.data))}onconnect(s,r){this.id=s,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(s=>this.emitEvent(s)),this.receiveBuffer=[],this.sendBuffer.forEach(s=>{this.notifyOutgoingListeners(s),this.packet(s)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(s=>s()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:pt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(s){return this.flags.compress=s,this}get volatile(){return this.flags.volatile=!0,this}timeout(s){return this.flags.timeout=s,this}onAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(s),this}prependAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(s),this}offAny(s){if(!this._anyListeners)return this;if(s){const r=this._anyListeners;for(let a=0;a<r.length;a++)if(s===r[a])return r.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(s),this}prependAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(s),this}offAnyOutgoing(s){if(!this._anyOutgoingListeners)return this;if(s){const r=this._anyOutgoingListeners;for(let a=0;a<r.length;a++)if(s===r[a])return r.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(s){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const a of r)a.apply(this,s.data)}}}function dl(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}dl.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var s=Math.random(),r=Math.floor(s*this.jitter*t);t=Math.floor(s*10)&1?t+r:t-r}return Math.min(t,this.max)|0};dl.prototype.reset=function(){this.attempts=0};dl.prototype.setMin=function(t){this.ms=t};dl.prototype.setMax=function(t){this.max=t};dl.prototype.setJitter=function(t){this.jitter=t};class sx extends os{constructor(s,r){var a;super(),this.nsps={},this.subs=[],s&&typeof s=="object"&&(r=s,s=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Jd(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((a=r.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new dl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=s;const n=r.parser||rS;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(s){return arguments.length?(this._reconnection=!!s,s||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(s){return s===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=s,this)}reconnectionDelay(s){var r;return s===void 0?this._reconnectionDelay:(this._reconnectionDelay=s,(r=this.backoff)===null||r===void 0||r.setMin(s),this)}randomizationFactor(s){var r;return s===void 0?this._randomizationFactor:(this._randomizationFactor=s,(r=this.backoff)===null||r===void 0||r.setJitter(s),this)}reconnectionDelayMax(s){var r;return s===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=s,(r=this.backoff)===null||r===void 0||r.setMax(s),this)}timeout(s){return arguments.length?(this._timeout=s,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(s){if(~this._readyState.indexOf("open"))return this;this.engine=new H3(this.uri,this.opts);const r=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const n=Yr(r,"open",function(){a.onopen(),s&&s()}),i=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),s?s(o):this.maybeReconnectOnOpen()},l=Yr(r,"error",i);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{n(),i(new Error("timeout")),r.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(n),this.subs.push(l),this}connect(s){return this.open(s)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const s=this.engine;this.subs.push(Yr(s,"ping",this.onping.bind(this)),Yr(s,"data",this.ondata.bind(this)),Yr(s,"error",this.onerror.bind(this)),Yr(s,"close",this.onclose.bind(this)),Yr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(s){try{this.decoder.add(s)}catch(r){this.onclose("parse error",r)}}ondecoded(s){qd(()=>{this.emitReserved("packet",s)},this.setTimeoutFn)}onerror(s){this.emitReserved("error",s)}socket(s,r){let a=this.nsps[s];return a?this._autoConnect&&!a.active&&a.connect():(a=new Yb(this,s,r),this.nsps[s]=a),a}_destroy(s){const r=Object.keys(this.nsps);for(const a of r)if(this.nsps[a].active)return;this._close()}_packet(s){const r=this.encoder.encode(s);for(let a=0;a<r.length;a++)this.engine.write(r[a],s.options)}cleanup(){this.subs.forEach(s=>s()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(s,r){var a;this.cleanup(),(a=this.engine)===null||a===void 0||a.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",s,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const s=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{s.skipReconnect||(this.emitReserved("reconnect_attempt",s.backoff.attempts),!s.skipReconnect&&s.open(n=>{n?(s._reconnecting=!1,s.reconnect(),this.emitReserved("reconnect_error",n)):s.onreconnect()}))},r);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}}onreconnect(){const s=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",s)}}const Sl={};function zc(t,s){typeof t=="object"&&(s=t,t=void 0),s=s||{};const r=G3(t,s.path||"/socket.io"),a=r.source,n=r.id,i=r.path,l=Sl[n]&&i in Sl[n].nsps,o=s.forceNew||s["force new connection"]||s.multiplex===!1||l;let c;return o?c=new sx(a,s):(Sl[n]||(Sl[n]=new sx(a,s)),c=Sl[n]),r.query&&!s.query&&(s.query=r.queryKey),c.socket(r.path,s)}Object.assign(zc,{Manager:sx,Socket:Yb,io:zc,connect:zc});class nS{constructor(){Ca(this,"socket",null);Ca(this,"listeners",new Map);Ca(this,"isConnecting",!1)}connect(){var r;if((r=this.socket)!=null&&r.connected||this.isConnecting)return;this.isConnecting=!0;let s;if(typeof window<"u"){const a=window.location.hostname,n=window.location.protocol;a==="thenefol.com"||a==="www.thenefol.com"?(s=`https://${window.location.host}`,console.log(" [Socket] Production detected, using:",s)):n==="https:"?(s=`https://${window.location.host}`,console.log(" [Socket] HTTPS detected, using WSS:",s)):(s="https://thenefol.com",console.log(" [Socket] Non-production HTTP detected, using production WSS:",s))}else s="https://thenefol.com";this.socket&&!this.socket.connected&&(this.socket.removeAllListeners(),this.socket.disconnect(),this.socket=null),this.socket=zc(s,{transports:["websocket","polling"],timeout:2e4,forceNew:!1,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3,randomizationFactor:.5}),this.socket.on("connect",()=>{var a;console.log("Connected to server"),this.isConnecting=!1,(a=this.socket)==null||a.emit("join-admin")}),this.socket.on("disconnect",a=>{console.log("Disconnected from server:",a)}),this.socket.on("connect_error",a=>{console.error("Socket connection error:",a),this.isConnecting=!1}),this.socket.on("update",a=>{console.log("Received update:",a),this.notifyListeners("update",a),a.type&&this.notifyListeners(a.type,a.data||a)}),this.socket.on("live-chat:message",a=>{this.notifyListeners("live-chat:message",a)}),this.socket.on("live-chat:typing",a=>{this.notifyListeners("live-chat:typing",a)}),this.socket.on("error",a=>{console.error("Socket error:",a)})}disconnect(){if(this.socket){const s=this.socket.connected;this.socket.removeAllListeners(),this.socket.disconnect(),this.socket=null,this.isConnecting=!1,s&&console.log("Socket disconnected")}}subscribe(s,r){var a;return this.listeners.has(s)||this.listeners.set(s,[]),(a=this.listeners.get(s))==null||a.push(r),()=>{const n=this.listeners.get(s);if(n){const i=n.indexOf(r);i>-1&&n.splice(i,1)}}}notifyListeners(s,r){const a=this.listeners.get(s);a&&a.forEach(n=>n(r))}emit(s,r){var a;(a=this.socket)!=null&&a.connected&&this.socket.emit(s,r)}isConnected(){var s;return((s=this.socket)==null?void 0:s.connected)||!1}}const Xe=new nS;function iS(){const[t,s]=b.useState([]),[r,a]=b.useState(0),[n,i]=b.useState(!1),l=ja(),o=async()=>{try{const g=await rt.getAdminNotifications("all",20);if(g.data){s(g.data);const x=g.data.filter(f=>f.status==="unread");a(x.length)}}catch(g){console.error("Error fetching notifications:",g)}},c=async()=>{try{const g=await rt.getAdminNotificationUnreadCount();g.data&&a(g.data.count)}catch(g){console.error("Error fetching unread count:",g)}},d=async g=>{try{await rt.markNotificationAsRead(g),s(x=>x.map(f=>f.id===g?{...f,status:"read"}:f)),c()}catch(x){console.error("Error marking notification as read:",x)}},u=async()=>{try{await rt.markAllNotificationsAsRead(),s(g=>g.map(x=>({...x,status:"read"}))),a(0)}catch(g){console.error("Error marking all as read:",g)}},p=g=>{d(g.id),g.link&&l(g.link),i(!1)};b.useEffect(()=>{o(),c();const g=Xe.subscribe("new-notification",x=>{s(f=>[x,...f]),x.status==="unread"&&a(f=>f+1)});return()=>{g&&g()}},[]);const h=g=>{switch(g){case"urgent":return"border-l-4 border-red-500 bg-red-50";case"high":return"border-l-4 border-orange-500 bg-orange-50";case"medium":return"border-l-4 border-yellow-500 bg-yellow-50";default:return"border-l-4 border-blue-500 bg-blue-50"}};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>i(!n),className:"relative p-2 text-gray-600 hover:text-gray-900 focus:outline-none",children:[e.jsx(Oa,{className:"w-6 h-6"}),r>0&&e.jsx("span",{className:"absolute top-0 right-0 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:r>9?"9+":r})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl z-50 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oa,{className:"w-5 h-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),r>0&&e.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-600 text-xs font-semibold rounded-full",children:[r," new"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[r>0&&e.jsx("button",{onClick:u,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Mark all read"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(es,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:t.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Oa,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No notifications"})]}):t.map(g=>e.jsx("button",{onClick:()=>p(g),className:`w-full text-left p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors ${h(g.priority)} ${g.status==="read"?"opacity-70":""}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[g.icon&&e.jsx("span",{className:"text-2xl flex-shrink-0",children:g.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm font-semibold ${g.status==="unread"?"text-gray-900":"text-gray-600"}`,children:g.title}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:g.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:new Date(g.created_at).toLocaleString()})]}),g.status==="unread"&&e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-1"})]})},g.id))}),t.length>0&&e.jsx("div",{className:"p-3 border-t border-gray-200",children:e.jsx("button",{onClick:()=>l("/admin/notifications"),className:"w-full py-2 text-sm text-center text-blue-600 hover:text-blue-700 font-medium",children:"View all notifications"})})]})]})]})}const lS=()=>{const t=mi(),s=ja(),[r,a]=b.useState(!0),[n,i]=b.useState(""),[l,o]=b.useState(!1),[c,d]=b.useState([]),[u,p]=b.useState(!1),h=b.useRef(null),{user:g,logout:x}=Uo(),f=g!=null&&g.name?g.name.split(" ").map(A=>A[0]).slice(0,2).join("").toUpperCase():"NA",m=async()=>{await x(),s("/admin/login",{replace:!0})},j=[{title:"Overview",icon:"",defaultOpen:!0,items:[{name:"Dashboard",href:"/admin/dashboard",icon:"",current:t.pathname==="/admin/dashboard"}]},{title:"Sales & Orders",icon:"",defaultOpen:!0,items:[{name:"Orders",href:"/admin/orders",icon:"",badge:"4",current:t.pathname==="/admin/orders"},{name:"Shipments",href:"/admin/shipments",icon:"",current:t.pathname==="/admin/shipments"},{name:"Returns",href:"/admin/returns",icon:"",current:t.pathname==="/admin/returns"}]},{title:"Catalog Management",icon:"",items:[{name:"Products",href:"/admin/products",icon:"",current:t.pathname==="/admin/products"},{name:"Categories",href:"/admin/categories",icon:"",current:t.pathname==="/admin/categories"},{name:"Inventory",href:"/admin/inventory",icon:"",badge:"NEW",current:t.pathname==="/admin/inventory"}]},{title:"Customers & CRM",icon:"",items:[{name:"Customers",href:"/admin/customers",icon:"",current:t.pathname==="/admin/customers"},{name:"Customer Segmentation",href:"/admin/customer-segmentation",icon:"",current:t.pathname==="/admin/customer-segmentation"},{name:"Journey Tracking",href:"/admin/journey-tracking",icon:"",current:t.pathname==="/admin/journey-tracking"},{name:"Journey Funnel",href:"/admin/journey-funnel",icon:"",current:t.pathname==="/admin/journey-funnel"}]},{title:"Customer Engagement",icon:"",items:[{name:"Live Chat",href:"/admin/live-chat",icon:"",current:t.pathname==="/admin/live-chat"},{name:"WhatsApp Chat",href:"/admin/whatsapp-chat",icon:"",current:t.pathname==="/admin/whatsapp-chat"},{name:"Contact Messages",href:"/admin/contact-messages",icon:"",current:t.pathname==="/admin/contact-messages"},{name:"Loyalty Program",href:"/admin/loyalty-program",icon:"",current:t.pathname==="/admin/loyalty-program"},{name:"Affiliate Program",href:"/admin/affiliate-program",icon:"",current:t.pathname==="/admin/affiliate-program"},{name:"Affiliate Requests",href:"/admin/affiliate-requests",icon:"",badge:"3",current:t.pathname==="/admin/affiliate-requests"},{name:"Cashback System",href:"/admin/cashback",icon:"",current:t.pathname==="/admin/cashback"}]},{title:"Marketing",icon:"",items:[{name:"Marketing",href:"/admin/marketing",icon:"",current:t.pathname==="/admin/marketing"},{name:"Meta Ads",href:"/admin/meta-ads",icon:"",badge:"NEW",current:t.pathname==="/admin/meta-ads"},{name:"WhatsApp Subscriptions",href:"/admin/whatsapp-subscriptions",icon:"",current:t.pathname==="/admin/whatsapp-subscriptions"},{name:"Discounts",href:"/admin/discounts",icon:"",current:t.pathname==="/admin/discounts"},{name:"Custom Audience",href:"/admin/custom-audience",icon:"",current:t.pathname==="/admin/custom-audience"},{name:"Omni Channel",href:"/admin/omni-channel",icon:"",current:t.pathname==="/admin/omni-channel"}]},{title:"AI Features",icon:"",items:[{name:"AI Box",href:"/admin/ai-box",icon:"",current:t.pathname==="/admin/ai-box"},{name:"AI Personalization",href:"/admin/ai-personalization",icon:"",current:t.pathname==="/admin/ai-personalization"}]},{title:"Analytics",icon:"",items:[{name:"Analytics",href:"/admin/analytics",icon:"",current:t.pathname==="/admin/analytics"},{name:"Actionable Analytics",href:"/admin/actionable-analytics",icon:"",current:t.pathname==="/admin/actionable-analytics"}]},{title:"Finance",icon:"",items:[{name:"Invoices",href:"/admin/invoices",icon:"",current:t.pathname==="/admin/invoices"},{name:"Tax",href:"/admin/tax",icon:"",current:t.pathname==="/admin/tax"},{name:"Payment Options",href:"/admin/payment-options",icon:"",current:t.pathname==="/admin/payment-options"},{name:"Coin Withdrawals",href:"/admin/coin-withdrawals",icon:"",current:t.pathname==="/admin/coin-withdrawals"}]},{title:"Content",icon:"",items:[{name:"CMS",href:"/admin/cms",icon:"",current:t.pathname==="/admin/cms"},{name:"Homepage Layout",href:"/admin/homepage-layout",icon:"",badge:"NEW",current:t.pathname==="/admin/homepage-layout"},{name:"Product Collections",href:"/admin/product-collections",icon:"",badge:"NEW",current:t.pathname==="/admin/product-collections"},{name:"Video Manager",href:"/admin/video-manager",icon:"",current:t.pathname==="/admin/video-manager"},{name:"Blog Requests",href:"/admin/blog-requests",icon:"",current:t.pathname==="/admin/blog-requests"}]},{title:"Notifications",icon:"",items:[{name:"WhatsApp Management",href:"/admin/whatsapp-management",icon:"",current:t.pathname==="/admin/whatsapp-management"},{name:"WhatsApp Notifications",href:"/admin/whatsapp-notifications",icon:"",current:t.pathname==="/admin/whatsapp-notifications"}]},{title:"Automation",icon:"",items:[{name:"Workflow Automation",href:"/admin/workflow-automation",icon:"",current:t.pathname==="/admin/workflow-automation"},{name:"Form Builder",href:"/admin/form-builder",icon:"",current:t.pathname==="/admin/form-builder"},{name:"Form Submissions",href:"/admin/form-submissions",icon:"",current:t.pathname==="/admin/form-submissions"}]},{title:"System",icon:"",items:[{name:"Users",href:"/admin/users",icon:"",current:t.pathname==="/admin/users"},{name:"API Manager",href:"/admin/api-manager",icon:"",current:t.pathname==="/admin/api-manager"},{name:"Alert Settings",href:"/admin/system/alerts",icon:"",current:t.pathname==="/admin/system/alerts"},{name:"Staff Accounts",href:"/admin/system/staff",icon:"",current:t.pathname==="/admin/system/staff"},{name:"Roles & Permissions",href:"/admin/system/roles",icon:"",current:t.pathname==="/admin/system/roles"},{name:"Audit Logs",href:"/admin/system/audit-logs",icon:"",current:t.pathname==="/admin/system/audit-logs"},{name:"Account Security",href:"/admin/account-security",icon:"",current:t.pathname==="/admin/account-security"}]},{title:"Sales Channels",icon:"",items:[{name:"Facebook & Instagram",href:"/admin/facebook",icon:"",current:t.pathname==="/admin/facebook"},{name:"FB Shop Integration",href:"/admin/fb-shop",icon:"",badge:"NEW",current:t.pathname==="/admin/fb-shop"},{name:"Online Store",href:"/admin/store",icon:"",current:t.pathname==="/admin/store"},{name:"Google & YouTube",href:"/admin/google",icon:"",current:t.pathname==="/admin/google"},{name:"Marketplaces",href:"/admin/marketplaces",icon:"",badge:"NEW",current:t.pathname==="/admin/marketplaces"}]},{title:"Operations",icon:"",items:[{name:"Warehouses",href:"/admin/warehouses",icon:"",badge:"NEW",current:t.pathname==="/admin/warehouses"},{name:"POS System",href:"/admin/pos",icon:"",badge:"NEW",current:t.pathname==="/admin/pos"}]}],v=j.flatMap(A=>A.items.map(y=>({...y,category:A.title,description:`${A.title} - ${y.name}`}))),w=j.flatMap(A=>A.items.map(y=>({...y,category:A.title}))).sort((A,y)=>A.name.localeCompare(y.name)),S={"/admin/orders":{permission:"orders:read"},"/admin/shipments":{permission:"shipping:read"},"/admin/returns":{permission:"returns:read"},"/admin/products":{permission:"products:read"},"/admin/categories":{permission:"products:read"},"/admin/inventory":{permission:"inventory:read"},"/admin/analytics":{permission:"analytics:read"},"/admin/marketing":{permission:"marketing:read"},"/admin/discounts":{permission:"discounts:read"},"/admin/users":{permission:"users:read"},"/admin/settings":{role:"admin"},"/admin/warehouses":{permission:"inventory:read"},"/admin/pos":{anyOf:["pos:read","pos:update"]},"/admin/marketplaces":{role:"admin"},"/admin/fb-shop":{role:"admin"},"/admin/payment-options":{permission:"payments:read"},"/admin/cms":{permission:"cms:read"},"/admin/blog-requests":{permission:"cms:read"},"/admin/video-manager":{permission:"cms:read"},"/admin/whatsapp-management":{permission:"notifications:read"},"/admin/whatsapp-notifications":{permission:"notifications:read"}},F=A=>{if(i(A),A.length<2){d([]),o(!1);return}const y=v.filter(N=>N.name.toLowerCase().includes(A.toLowerCase())||N.description.toLowerCase().includes(A.toLowerCase())||N.category.toLowerCase().includes(A.toLowerCase()));d(y),o(!0)},E=A=>{s(A.href),i(""),o(!1)},k=()=>{i(""),d([]),o(!1)};return b.useEffect(()=>{const A=N=>{N.target.closest(".search-container")||o(!1)},y=N=>{if((N.ctrlKey||N.metaKey)&&N.key==="k"){N.preventDefault();const R=document.querySelector(".search-input");R&&R.focus()}N.key==="Escape"&&(o(!1),i(""))};return document.addEventListener("mousedown",A),document.addEventListener("keydown",y),()=>{document.removeEventListener("mousedown",A),document.removeEventListener("keydown",y)}},[]),b.useEffect(()=>{const A=y=>{h.current&&!h.current.contains(y.target)&&p(!1)};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[]),e.jsxs("div",{className:"flex h-screen bg-[var(--brand-background)] text-[var(--text-primary)]",children:[r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>a(!1)}),e.jsx("div",{className:`sidebar w-72 h-screen fixed left-0 top-0 z-50 overflow-y-auto border-r border-[var(--brand-border)] ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[var(--brand-border)]",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-brand-secondary rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"N"})}),e.jsx("span",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Nefol Admin"})]}),e.jsx("button",{onClick:()=>a(!r),className:"text-[var(--text-muted)] hover:text-[var(--text-primary)]",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("nav",{className:"flex-1 px-4 py-4 space-y-1 overflow-y-auto",children:e.jsx("div",{className:"space-y-1",children:w.map(A=>{const y=S[A.href]||{};return e.jsx(ms,{permission:y.permission,anyOf:y.anyOf,role:y.role,children:e.jsxs(jn,{to:A.href,className:`nav-item ${A.current?"active":""}`,children:[e.jsx("span",{className:"text-lg",children:A.icon}),e.jsx("span",{className:"font-medium",children:A.name}),A.badge&&e.jsx("span",{className:"badge ml-auto",children:A.badge})]})},A.name)})})}),e.jsx("div",{className:"p-4 border-t border-[var(--brand-border)]",children:e.jsxs(jn,{to:"/admin/settings",className:"nav-item",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("span",{className:"font-medium",children:"Settings"})]})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden ml-72 lg:ml-72 md:ml-0",children:[e.jsx("header",{className:"bg-[var(--brand-surface)] border-b border-[var(--brand-border)] px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>a(!r),className:"text-[var(--text-muted)] hover:text-[var(--text-primary)]",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsxs("div",{className:"search-container relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[var(--text-muted)] w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search admin options... (e.g., CMS, Blog, Products)",value:n,onChange:A=>F(A.target.value),className:"search-input w-96 pl-10 pr-20 py-2 border border-[var(--brand-border)] bg-[var(--brand-surface)] text-[var(--text-secondary)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--brand-accent)]"}),n&&e.jsx("button",{onClick:k,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-[var(--text-muted)] hover:text-[var(--text-secondary)]",children:e.jsx(es,{className:"w-5 h-5"})}),!n&&e.jsx("div",{className:"absolute right-3 top-2.5 text-xs text-[var(--text-muted)]",children:e.jsx("kbd",{className:"px-2 py-1 bg-[var(--brand-highlight)] rounded text-xs",children:"Ctrl+K"})})]}),l&&c.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-[var(--brand-surface)] border border-[var(--brand-border)] rounded-lg shadow-xl z-50 max-h-96 overflow-y-auto",children:c.map((A,y)=>e.jsxs("button",{onClick:()=>E(A),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-[var(--brand-highlight)] text-left border-b border-[var(--brand-border)] last:border-b-0",children:[e.jsx("span",{className:"text-lg",children:A.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-[var(--text-primary)] font-medium",children:A.name}),e.jsx("div",{className:"text-sm text-[var(--text-muted)] truncate",children:A.description}),e.jsx("div",{className:"text-xs text-[var(--brand-accent)]",children:A.category})]}),e.jsx(n2,{className:"w-4 h-4 text-[var(--text-muted)] flex-shrink-0"})]},y))}),l&&c.length===0&&n.length>=2&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-[var(--brand-surface)] border border-[var(--brand-border)] rounded-lg shadow-xl z-50 p-4",children:e.jsxs("div",{className:"text-[var(--text-muted)] text-center",children:[e.jsx(bs,{className:"w-8 h-8 mx-auto mb-2 opacity-50 text-[var(--text-muted)]"}),e.jsxs("p",{children:['No options found for "',n,'"']}),e.jsx("p",{className:"text-sm mt-1",children:"Try searching for:"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2 justify-center",children:["products","orders","analytics","marketing","customers","cms","blog"].map(A=>e.jsx("button",{onClick:()=>F(A),className:"px-2 py-1 bg-[var(--brand-highlight)] hover:bg-[var(--brand-accent-soft)] rounded text-xs text-[var(--text-secondary)]",children:A},A))})]})})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-[var(--text-muted)]",children:"2 live visitors"})]}),e.jsx(iS,{}),e.jsxs("div",{className:"relative",ref:h,children:[e.jsxs("button",{onClick:()=>p(A=>!A),className:"flex items-center space-x-2 px-3 py-1 rounded-lg hover:bg-[var(--brand-highlight)] focus:outline-none",children:[e.jsx("div",{className:"w-8 h-8 bg-brand-secondary rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:f})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-semibold text-[var(--text-primary)]",children:(g==null?void 0:g.name)||"Admin"}),e.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:(g==null?void 0:g.role)||"admin"})]})]}),u&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 rounded-lg shadow-lg z-50",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 dark:border-gray-800",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:g==null?void 0:g.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:g==null?void 0:g.email})]}),e.jsx("div",{className:"py-2",children:e.jsx(jn,{to:"/admin/account-security",className:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>p(!1),children:"Account Security"})}),e.jsx("div",{className:"border-t border-gray-100 dark:border-gray-800",children:e.jsx("button",{onClick:m,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-gray-800",children:"Logout"})})]})]})]})]})}),e.jsx("main",{className:"flex-1 overflow-auto bg-[var(--brand-background)]",children:e.jsx("div",{className:"page-container",children:e.jsx(Sb,{})})})]})]})},Xb=b.createContext(null);function mr(){const t=b.useContext(Xb);if(!t)throw new Error("useToast must be used within ToastProvider");return t}function oS({children:t}){const[s,r]=b.useState([]),a=b.useCallback((i,l)=>{const o=Date.now()+Math.floor(Math.random()*1e3);r(c=>[...c,{id:o,type:i,message:l}]),setTimeout(()=>r(c=>c.filter(d=>d.id!==o)),3500)},[]),n=b.useMemo(()=>({notify:a}),[a]);return e.jsxs(Xb.Provider,{value:n,children:[t,e.jsx("div",{className:"fixed top-4 right-4 z-[1000] space-y-2",children:s.map(i=>e.jsx("div",{className:`px-4 py-2 rounded shadow text-sm ${i.type==="success"?"bg-green-600 text-white":i.type==="error"?"bg-red-600 text-white":"bg-slate-800 text-white"}`,children:i.message},i.id))})]})}function cS(){const[t,s]=b.useState(0),[r,a]=b.useState([]),[n,i]=b.useState({}),[l,o]=b.useState(0),[c,d]=b.useState([]);b.useEffect(()=>{Xe.isConnected()||Xe.connect();const x=Xe.subscribe("live-users-count",v=>{console.log(" Live users count:",v.count),s(v.count||0)}),f=Xe.subscribe("page-view-update",v=>{console.log(" Page view:",v),i(w=>({...w,[v.page]:(w[v.page]||0)+1})),u({type:"page-view",data:v,timestamp:new Date().toISOString()})}),m=Xe.subscribe("cart-update",v=>{console.log(" Cart update:",v),o(w=>w+1),u({type:"cart-update",data:v,timestamp:new Date().toISOString()})}),j=Xe.subscribe("user-action-update",v=>{var w;console.log(" User action:",v),v.action==="search"&&((w=v.data)!=null&&w.query)&&d(S=>[v.data.query,...S.slice(0,9)]),u({type:"user-action",data:v,timestamp:new Date().toISOString()})});return()=>{x(),f(),m(),j()}},[]);const u=x=>{a(f=>[x,...f.slice(0,19)])},p=x=>{switch(x){case"page-view":return e.jsx(ct,{className:"h-4 w-4 text-blue-500"});case"cart-update":return e.jsx(Qs,{className:"h-4 w-4 text-green-500"});case"user-action":return e.jsx(Bn,{className:"h-4 w-4 text-purple-500"});default:return e.jsx(Bn,{className:"h-4 w-4 text-gray-500"})}},h=x=>{var f;switch(x.type){case"page-view":return`User viewed ${x.data.page}`;case"cart-update":return`Cart ${x.data.action}: ${((f=x.data.data)==null?void 0:f.productName)||"item"}`;case"user-action":return`${x.data.action}: ${JSON.stringify(x.data.data).substring(0,50)}`;default:return"Unknown activity"}},g=Object.entries(n).sort(([,x],[,f])=>f-x).slice(0,5);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"metric-card bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900 dark:to-blue-800 border-blue-200 dark:border-blue-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-300 mb-2",children:"Live Users"}),e.jsx("p",{className:"text-4xl font-bold text-blue-900 dark:text-blue-100",children:t})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Pt,{className:"h-12 w-12 text-blue-500 dark:text-blue-400"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-pulse"})]})]}),e.jsxs("div",{className:"mt-3 flex items-center text-sm text-blue-600 dark:text-blue-300",children:[e.jsx(Bn,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Active now"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Total Page Views"}),e.jsx("p",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100",children:Object.values(n).reduce((x,f)=>x+f,0)})]}),e.jsx(ct,{className:"h-12 w-12 text-gray-400 dark:text-gray-600"})]}),e.jsxs("div",{className:"mt-3 flex items-center text-sm text-green-600 dark:text-green-400",children:[e.jsx(zt,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Since session start"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Cart Events"}),e.jsx("p",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100",children:l})]}),e.jsx(Qs,{className:"h-12 w-12 text-gray-400 dark:text-gray-600"})]}),e.jsxs("div",{className:"mt-3 flex items-center text-sm text-blue-600 dark:text-blue-400",children:[e.jsx(Bn,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Add, remove, update"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center",children:[e.jsx(Bn,{className:"h-5 w-5 mr-2 text-purple-500"}),"Live Activity Feed"]}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:r.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(Bn,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Waiting for user activity..."})]}):r.map((x,f)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("div",{className:"mt-1",children:p(x.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 truncate",children:h(x)}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center mt-1",children:[e.jsx(cs,{className:"h-3 w-3 mr-1"}),new Date(x.timestamp).toLocaleTimeString()]})]})]},f))})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[e.jsx(zt,{className:"h-5 w-5 mr-2 text-green-500"}),"Top Pages (This Session)"]}),e.jsx("div",{className:"space-y-3",children:g.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(ct,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No page views yet..."})]}):g.map(([x,f],m)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 text-white rounded-full font-bold text-sm",children:m+1}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:x||"/"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[f," ",f===1?"view":"views"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:f})})]},x))})]})]}),c.length>0&&e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Recent Search Queries"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((x,f)=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm",children:x},f))})]})]})}const dS=()=>{const t=ja(),[s,r]=b.useState(!0),[a,n]=b.useState(null),[i,l]=b.useState([]),[o,c]=b.useState(0),[d,u]=b.useState(!0),[p,h]=b.useState(""),x=(()=>{if(typeof window<"u"){const S=window.location.hostname;return S==="thenefol.com"||S==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}/api`:"https://thenefol.com/api"}return"https://thenefol.com/api"})();b.useEffect(()=>{Xe.isConnected()||Xe.connect(),f();const S=setInterval(()=>{f()},3e4);return()=>clearInterval(S)},[]);const f=async()=>{var S,F;try{u(!0),h("");const[E,k,A]=await Promise.all([fetch(`${x}/dashboard/metrics`),fetch(`${x}/dashboard/action-items`),fetch(`${x}/dashboard/live-visitors`)]);if(E.ok){const y=await E.json(),N=y.data||y;n(N)}else n({sessions:0,sessionsChange:0,totalSales:0,salesChange:0,orders:0,ordersChange:0,conversionRate:0,conversionChange:0});if(k.ok){const y=await k.json(),N=((S=y.data)==null?void 0:S.items)||y.items||[];l(N)}if(A.ok){const y=await A.json(),N=((F=y.data)==null?void 0:F.count)||y.count||0;c(N)}}catch(E){console.error("Failed to load dashboard data:",E),h("Failed to load dashboard data"),n({sessions:0,sessionsChange:0,totalSales:0,salesChange:0,orders:0,ordersChange:0,conversionRate:0,conversionChange:0})}finally{u(!1)}},m=(S,F)=>{if(S==null)return"0";switch(F){case"sessions":return S.toLocaleString();case"totalSales":return`${S.toLocaleString()}`;case"orders":return S.toString();case"conversionRate":return`${S.toFixed(2)}%`;default:return S.toString()}},j=S=>S==null?"+0.0%":`${S>=0?"+":""}${S.toFixed(1)}%`,v=S=>S==null?"neutral":S>=0?"up":"down",w=a?[{title:"Sessions",value:m(a.sessions,"sessions"),change:j(a.sessionsChange),trend:v(a.sessionsChange),icon:""},{title:"Total sales",value:m(a.totalSales,"totalSales"),change:j(a.salesChange),trend:v(a.salesChange),icon:""},{title:"Orders",value:m(a.orders,"orders"),change:j(a.ordersChange),trend:v(a.ordersChange),icon:""},{title:"Conversion rate",value:m(a.conversionRate,"conversionRate"),change:j(a.conversionChange),trend:v(a.conversionChange),icon:""}]:[];return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsx(cS,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>t("/admin/analytics"),className:"flex items-center space-x-2 px-4 py-2 border rounded-xl hover:bg-[var(--arctic-blue-lighter)] transition-all duration-300",style:{borderColor:"var(--arctic-blue-light)",color:"var(--arctic-blue-primary-dark)"},title:"View analytics for last 30 days",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{children:"Last 30 days"})]}),e.jsxs("button",{onClick:()=>t("/admin/analytics"),className:"flex items-center space-x-2 px-4 py-2 border rounded-xl hover:bg-[var(--arctic-blue-lighter)] transition-all duration-300",style:{borderColor:"var(--arctic-blue-light)",color:"var(--arctic-blue-primary-dark)"},title:"View analytics for all channels",children:[e.jsx("span",{children:"All channels"}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsxs("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:[o," live visitors"]})]})]}),p&&e.jsx("div",{className:"metric-card",style:{backgroundColor:"#FEF2F2",borderColor:"#FECACA"},children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-red-600",children:p}),e.jsx("button",{onClick:f,className:"ml-auto text-red-600 hover:text-red-800 underline transition-colors",children:"Retry"})]})}),d&&!p&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((S,F)=>e.jsxs("div",{className:"metric-card animate-pulse",children:[e.jsx("div",{className:"h-4 rounded mb-4",style:{backgroundColor:"var(--arctic-blue-light)"}}),e.jsx("div",{className:"h-8 rounded",style:{backgroundColor:"var(--arctic-blue-light)"}})]},F))}),!d&&!p&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:w.map((S,F)=>e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:S.icon}),e.jsx("h3",{className:"text-sm font-medium",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:S.title})]}),e.jsx("button",{onClick:()=>t("/admin/analytics"),className:"transition-colors hover:opacity-70",style:{color:"var(--arctic-blue-primary)"},title:"View detailed analytics",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]}),e.jsxs("div",{className:"flex items-baseline space-x-3",children:[e.jsx("span",{className:"text-3xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:S.value}),e.jsxs("div",{className:`flex items-center space-x-1 text-sm font-medium ${S.trend==="up"?"text-green-600":"text-red-600"}`,children:[S.trend==="up"?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 17l9.2-9.2M17 17V7H7"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 7l-9.2 9.2M7 7v10h10"})}),e.jsx("span",{children:S.change})]})]})]},F))}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Sessions"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"var(--arctic-blue-primary)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Current Period"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"var(--arctic-blue-light)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Previous Period"})]})]})]}),e.jsx("div",{className:"h-64 rounded-xl flex items-center justify-center border-2 border-dashed",style:{backgroundColor:"var(--arctic-blue-lighter)",borderColor:"var(--arctic-blue-light)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",style:{color:"var(--arctic-blue-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--text-muted)"},children:"Performance chart will be displayed here"}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Chart integration coming soon"})]})})]}),!d&&!p&&i.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map((S,F)=>e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:S.icon}),e.jsx("span",{className:`font-medium ${S.color}`,children:S.title})]})},F))}),s&&a&&a.orders>=10&&e.jsxs("div",{className:"metric-card relative",style:{background:"linear-gradient(135deg, var(--arctic-blue-lighter) 0%, var(--arctic-blue-light) 100%)",borderColor:"var(--arctic-blue-primary)"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-xl font-light mb-3",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:["Congratulations on reaching ",a.orders||0," orders!"]}),e.jsx("p",{className:"mb-6",style:{color:"var(--text-muted)",letterSpacing:"0.02em"},children:"This is just the beginning of your journey. Keep pushing forward and watch your business grow with each new customer."}),e.jsx("button",{onClick:()=>t("/admin/orders"),className:"btn-primary",children:"View orders report"})]}),e.jsx("div",{className:"ml-8",children:e.jsx("div",{className:"w-24 h-24 rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg, var(--arctic-blue-primary) 0%, var(--arctic-blue-primary-dark) 100%)"},children:e.jsx("span",{className:"text-4xl",children:""})})})]}),e.jsx("button",{onClick:()=>r(!1),className:"absolute top-4 right-4 transition-colors hover:opacity-70",style:{color:"var(--text-muted)"},children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})};function Va({open:t,title:s="Are you sure?",description:r,confirmText:a="Confirm",cancelText:n="Cancel",onConfirm:i,onClose:l}){return t?e.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-5",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:s}),r&&e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:r}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:l,className:"px-3 py-2 text-sm border rounded",children:n}),e.jsx("button",{onClick:()=>{i(),l()},className:"px-3 py-2 text-sm rounded bg-red-600 text-white",children:a})]})]})}):null}function uS(){const t=ja(),{notify:s}=mr(),[r,a]=b.useState([]),[n,i]=b.useState(!1),[l,o]=b.useState(""),[c,d]=b.useState(""),[u,p]=b.useState(""),[h,g]=b.useState(""),[x,f]=b.useState(""),[m,j]=b.useState(""),[v,w]=b.useState(""),[S,F]=b.useState([]),k=(()=>{if(typeof window<"u"){const V=window.location.hostname;if(V==="thenefol.com"||V==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),A=b.useMemo(()=>{const V=localStorage.getItem("auth_token");return{"Content-Type":"application/json",...V?{Authorization:`Bearer ${V}`}:{},"x-user-permissions":"orders:read,orders:update,shipping:update,invoices:read","x-user-role":"admin"}},[]),y=async()=>{try{i(!0),o("");const V=new URLSearchParams;c&&V.set("status",c),u&&V.set("q",u),h&&V.set("from",h),x&&V.set("to",x),m&&V.set("payment_status",m),v&&V.set("cod",v);const Z=await fetch(`${k}/api/orders?${V.toString()}`,{headers:A});if(!Z.ok){Z.status===403?o("Access denied. You do not have permission to view orders."):o(`Failed to load orders: ${Z.status} ${Z.statusText}`),a([]);return}const D=await Z.json();let P=Array.isArray(D)?D:D&&Array.isArray(D.data)?D.data:[];const W=P.map(ee=>({...ee,customer:ee.customer_name||ee.customer||"",createdAt:ee.created_at||ee.createdAt||new Date().toISOString()}));a(W),W.length===0&&P.length===0&&o("Invalid response format from server"),F([])}catch(V){console.error("Error loading orders:",V),o("Failed to load orders"),a([])}finally{i(!1)}};b.useEffect(()=>{y();const V=Xe.subscribe("order_created",D=>{console.log("New order received:",D);const P={...D,customer:D.customer_name||D.customer||"",createdAt:D.created_at||D.createdAt||new Date().toISOString()};a(W=>[P,...W])}),Z=Xe.subscribe("order_updated",D=>{console.log("Order updated:",D);const P={...D,customer:D.customer_name||D.customer||"",createdAt:D.created_at||D.createdAt||new Date().toISOString()};a(W=>W.map(ee=>ee.id===P.id?P:ee))});return()=>{V(),Z()}},[]);const N=async(V,Z)=>{try{const D=await fetch(`${k}/api/orders/${V}`,{method:"PUT",headers:A,body:JSON.stringify({status:Z})});if(!D.ok){const P=await D.json();throw new Error(P.error||"Status update failed")}await y(),s("success",`Order ${V} updated to ${Z}`)}catch(D){console.error("Update failed:",D),s("error",`Update failed: ${D.message}`)}},R=(V,Z)=>{F(D=>Z?Array.from(new Set([...D,V])):D.filter(P=>P!==V))},T=async V=>{if(S.length===0)return alert("Select orders first");if(!(await fetch(`${k}/api/bulk/orders/status`,{method:"POST",headers:A,body:JSON.stringify({orderIds:S,status:V})})).ok){s("error","Bulk status failed");return}await y(),s("success",`Bulk marked ${V}`)},z=async()=>{if(S.length===0)return alert("Select orders first");if(!(await fetch(`${k}/api/bulk/shipping/labels`,{method:"POST",headers:A,body:JSON.stringify({orderIds:S})})).ok){s("error","Bulk labels failed");return}s("success","Labels queued")},L=async()=>{if(S.length===0)return alert("Select orders first");const V=await fetch(`${k}/api/bulk/invoices/download`,{method:"POST",headers:A,body:JSON.stringify({orderIds:S})});if(!V.ok){s("error","Bulk invoices failed");return}const Z=await V.json();console.log("Invoice links:",Z==null?void 0:Z.links),s("success","Invoice links generated (check console)")},O=async V=>{try{const Z=await fetch(`${k}/api/shiprocket/orders/${V}/awb`,{method:"POST",headers:A}),D=await Z.json();if(!Z.ok||!(D!=null&&D.success))throw new Error((D==null?void 0:D.error)||"Failed to create AWB");alert("AWB created successfully")}catch(Z){alert((Z==null?void 0:Z.message)||"Failed to create AWB")}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
          :root {
            --arctic-blue-primary: #7DD3D3;
            --arctic-blue-primary-hover: #5EC4C4;
            --arctic-blue-primary-dark: #4A9FAF;
            --arctic-blue-light: #E0F5F5;
            --arctic-blue-lighter: #F0F9F9;
            --arctic-blue-background: #F4F9F9;
          }
        `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Orders"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage and track all customer orders"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:y,className:"btn-secondary",children:"Refresh"}),e.jsx("button",{onClick:()=>{const V=new URLSearchParams;c&&V.set("status",c),u&&V.set("q",u),h&&V.set("from",h),x&&V.set("to",x),window.open(`${k}/api/orders/export?${V.toString()}`,"_blank")},className:"btn-secondary",children:"Export CSV"}),e.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[e.jsx(ms,{permission:"orders:update",children:e.jsx("button",{onClick:()=>T("paid"),className:"btn-secondary",children:"Bulk Mark Paid"})}),e.jsx(ms,{permission:"orders:update",children:e.jsx("button",{onClick:()=>T("shipped"),className:"btn-secondary",children:"Bulk Mark Shipped"})}),e.jsx(ms,{permission:"shipping:update",children:e.jsx("button",{onClick:z,className:"btn-secondary",children:"Bulk Labels"})}),e.jsx(ms,{permission:"invoices:read",children:e.jsx("button",{onClick:L,className:"btn-secondary",children:"Bulk Invoices"})})]})]})]}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("input",{value:u,onChange:V=>p(V.target.value),placeholder:"Search order #",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsxs("select",{value:c,onChange:V=>d(V.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsxs("select",{value:m,onChange:V=>j(V.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"},children:[e.jsx("option",{value:"",children:"Any Payment"}),e.jsx("option",{value:"unpaid",children:"Unpaid"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"refunded",children:"Refunded"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsxs("select",{value:v,onChange:V=>w(V.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"},children:[e.jsx("option",{value:"",children:"COD/Prepaid"}),e.jsx("option",{value:"true",children:"COD"}),e.jsx("option",{value:"false",children:"Prepaid"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 md:col-span-5",children:[e.jsx("input",{type:"date",value:h,onChange:V=>g(V.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("input",{type:"date",value:x,onChange:V=>f(V.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("button",{onClick:y,className:"btn-primary md:col-span-2",children:"Apply Filters"})]})]})}),e.jsx("div",{className:"metric-card",children:n?e.jsx("p",{children:"Loading..."}):l?e.jsx("p",{className:"text-red-600",children:l}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"border-b text-xs uppercase",style:{borderColor:"var(--arctic-blue-light)",color:"var(--text-muted)"},children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-4 pr-4",children:e.jsx("input",{type:"checkbox",onChange:V=>{V.target.checked&&Array.isArray(r)?F(r.map(Z=>Z.id)):F([])},checked:S.length>0&&Array.isArray(r)&&S.length===r.length})}),e.jsx("th",{className:"py-4 pr-4 font-medium",children:"ID"}),e.jsx("th",{className:"py-4 pr-4 font-medium",children:"Customer"}),e.jsx("th",{className:"py-4 pr-4 font-medium",children:"Total"}),e.jsx("th",{className:"py-4 pr-4 font-medium",children:"Status"}),e.jsx("th",{className:"py-4 pr-4 font-medium",children:"Placed"}),e.jsx("th",{className:"py-4 pr-4 font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:Array.isArray(r)&&r.length>0?r.map(V=>e.jsxs("tr",{className:"border-b transition-colors hover:bg-[var(--arctic-blue-lighter)]",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsx("td",{className:"py-4 pr-4",children:e.jsx("input",{type:"checkbox",checked:S.includes(V.id),onChange:Z=>R(V.id,Z.target.checked)})}),e.jsx("td",{className:"py-4 pr-4 font-medium",style:{color:"var(--text-primary)"},children:V.id}),e.jsx("td",{className:"py-4 pr-4",style:{color:"var(--text-secondary)"},children:V.customer}),e.jsxs("td",{className:"py-4 pr-4 font-semibold",style:{color:"var(--arctic-blue-primary-dark)"},children:["",Number(V.total).toFixed(2)]}),e.jsx("td",{className:"py-4 pr-4",children:e.jsx("span",{className:`px-3 py-1 text-xs rounded-full font-medium ${V.status==="paid"?"bg-green-100 text-green-800":V.status==="shipped"?"bg-blue-100 text-blue-800":V.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:V.status})}),e.jsx("td",{className:"py-4 pr-4",style:{color:"var(--text-muted)"},children:V.createdAt?(()=>{try{const Z=new Date(V.createdAt);return isNaN(Z.getTime())?"Invalid Date":Z.toLocaleString()}catch{return"Invalid Date"}})():"Invalid Date"}),e.jsx("td",{className:"py-4 pr-4",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>t(`/admin/orders/${V.id}`),className:"btn-secondary text-xs px-3 py-1.5",children:"Details"}),e.jsx(ms,{permission:"orders:update",children:e.jsx("button",{onClick:()=>N(V.id,"paid"),className:"btn-secondary text-xs px-3 py-1.5",children:"Mark Paid"})}),e.jsx(ms,{permission:"orders:update",children:e.jsx("button",{onClick:()=>N(V.id,"shipped"),className:"btn-secondary text-xs px-3 py-1.5",children:"Mark Shipped"})}),e.jsx(ms,{permission:"shipping:update",children:e.jsx("button",{onClick:()=>O(V.id),className:"btn-secondary text-xs px-3 py-1.5",children:"Create AWB"})}),e.jsx(ms,{permission:"orders:update",children:e.jsx(xS,{onConfirm:()=>N(V.id,"cancelled")})})]})})]},V.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"py-12 text-center",style:{color:"var(--text-muted)"},children:l||"No orders found"})})})]})})})]})})}function xS({onConfirm:t}){const[s,r]=b.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>r(!0),className:"bg-red-600 text-white px-2 py-1 text-xs rounded hover:bg-red-700",children:"Cancel"}),e.jsx(Va,{open:s,onClose:()=>r(!1),onConfirm:t,title:"Cancel this order?",description:"This action cannot be undone.",confirmText:"Cancel Order"})]})}function mS(){const t=ja(),[s,r]=b.useState([]),[a,n]=b.useState(!0),[i,l]=b.useState(null),[o,c]=b.useState(""),[d,u]=b.useState("with_orders"),[p,h]=b.useState("total_spent"),[g,x]=b.useState("desc"),m=(()=>{if(typeof window<"u"){const F=window.location.hostname;if(F==="thenefol.com"||F==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();b.useEffect(()=>{j()},[]);const j=async()=>{try{n(!0),l(null);const F=await fetch(`${m}/users`);if(F.ok){const k=(await F.json()).filter(A=>(parseInt(String(A.total_orders||0),10)||0)>0).map(A=>({...A,total_orders:parseInt(String(A.total_orders||0),10)||0,total_spent:parseFloat(String(A.total_spent||0))||0,loyalty_points:parseInt(String(A.loyalty_points||0),10)||0}));r(k)}else l("Failed to fetch customers")}catch(F){console.error("Error fetching customers:",F),l("Failed to fetch customers")}finally{n(!1)}},v=s.filter(F=>{var N,R,T;const E=((N=F.name)==null?void 0:N.toLowerCase().includes(o.toLowerCase()))||((R=F.email)==null?void 0:R.toLowerCase().includes(o.toLowerCase()))||((T=F.phone)==null?void 0:T.toLowerCase().includes(o.toLowerCase())),k=parseInt(String(F.total_orders||0),10)||0,A=parseFloat(String(F.total_spent||0))||0,y=d==="all"||d==="with_orders"&&k>0||d==="high_value"&&A>=5e3;return E&&y}).sort((F,E)=>{let k,A;switch(p){case"total_spent":k=parseFloat(String(F.total_spent||0))||0,A=parseFloat(String(E.total_spent||0))||0;break;case"total_orders":k=parseInt(String(F.total_orders||0),10)||0,A=parseInt(String(E.total_orders||0),10)||0;break;case"member_since":k=new Date(F.member_since).getTime(),A=new Date(E.member_since).getTime();break;default:return 0}return g==="asc"?k>A?1:-1:k<A?1:-1}),w=F=>{const E=parseFloat(String(F||0))||0;return E>=1e4?{level:"Platinum",color:"text-purple-600 bg-purple-100 dark:bg-purple-900/20 dark:text-purple-300"}:E>=5e3?{level:"Gold",color:"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20 dark:text-yellow-300"}:E>=2e3?{level:"Silver",color:"text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300"}:{level:"Bronze",color:"text-orange-600 bg-orange-100 dark:bg-orange-900/20 dark:text-orange-300"}},S={totalCustomers:s.length,totalRevenue:s.reduce((F,E)=>{const k=parseFloat(String(E.total_spent||0))||0;return F+k},0),totalOrders:s.reduce((F,E)=>{const k=parseInt(String(E.total_orders||0),10)||0;return F+k},0),averageOrderValue:(()=>{const F=s.reduce((k,A)=>{const y=parseFloat(String(A.total_spent||0))||0;return k+y},0),E=s.reduce((k,A)=>{const y=parseInt(String(A.total_orders||0),10)||0;return k+y},0);return E>0?F/E:0})(),highValueCustomers:s.filter(F=>(parseFloat(String(F.total_spent||0))||0)>=5e3).length};return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Customers"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage your customers and their order history"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pt,{className:"h-8 w-8",style:{color:"var(--arctic-blue-primary)"}}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:S.totalCustomers})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Co,{className:"h-8 w-8",style:{color:"var(--arctic-blue-primary)"}}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:["",S.totalRevenue.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(fa,{className:"h-8 w-8",style:{color:"var(--arctic-blue-primary)"}}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:S.totalOrders})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(zt,{className:"h-8 w-8 text-orange-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Avg Order Value"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:isNaN(S.averageOrderValue)||S.averageOrderValue===0?"0":`${Math.round(S.averageOrderValue).toLocaleString("en-IN")}`})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xr,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"High Value"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:S.highValueCustomers})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[e.jsx("div",{className:"flex-1 w-full",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search customers by name, email, or phone...",value:o,onChange:F=>c(F.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(cl,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:d,onChange:F=>u(F.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Customers"}),e.jsx("option",{value:"with_orders",children:"With Orders"}),e.jsx("option",{value:"high_value",children:"High Value (5000+)"})]}),e.jsxs("select",{value:`${p}-${g}`,onChange:F=>{const[E,k]=F.target.value.split("-");h(E),x(k)},className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"total_spent-desc",children:"Highest Revenue"}),e.jsx("option",{value:"total_spent-asc",children:"Lowest Revenue"}),e.jsx("option",{value:"total_orders-desc",children:"Most Orders"}),e.jsx("option",{value:"total_orders-asc",children:"Least Orders"}),e.jsx("option",{value:"member_since-desc",children:"Newest"}),e.jsx("option",{value:"member_since-asc",children:"Oldest"})]})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[i&&e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400",children:[e.jsx("p",{className:"text-red-700 dark:text-red-300",children:i}),e.jsx("button",{onClick:j,className:"mt-2 text-red-600 dark:text-red-400 hover:underline",children:"Retry"})]}),v.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Pt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No customers found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:o?"Try adjusting your search terms":"No customers have placed orders yet"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Orders"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Tier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Member Since"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:v.map(F=>{const E=w(F.total_spent||0);return e.jsxs("tr",{onClick:()=>t(`/admin/users/${F.id}`),className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900/20 flex items-center justify-center",children:e.jsx(Pt,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:F.name||"N/A"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",F.id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ss,{className:"h-4 w-4 text-gray-400"}),F.email||"N/A"]}),F.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pa,{className:"h-4 w-4 text-gray-400"}),F.phone]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Co,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["",(parseFloat(String(F.total_spent||0))||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fa,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:parseInt(String(F.total_orders||0),10)||0})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${E.color}`,children:E.level})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mr,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:new Date(F.member_since).toLocaleDateString()})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${F.is_verified?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300"}`,children:F.is_verified?"Verified":"Unverified"})})]},F.id)})})]})}),v.length>0&&e.jsx("div",{className:"px-6 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",v.length," of ",s.length," customers"]})})]})]})}const Dn=()=>{if(typeof window<"u"){const t=window.location.hostname;return t==="thenefol.com"||t==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}/api`:"https://thenefol.com/api"}return"https://thenefol.com/api"},Bf=Dn();function hS(){const t=ja(),[s,r]=b.useState([]),[a,n]=b.useState([]),[i,l]=b.useState(!0),[o,c]=b.useState(null),[d,u]=b.useState(""),[p,h]=b.useState("all"),[g,x]=b.useState(!1);b.useEffect(()=>{j(),f()},[]);const f=async()=>{try{const S=await fetch(`${Bf}/forms/submissions`);if(S.ok){const F=await S.json();n(F.submissions||F||[])}}catch(S){console.error("Error fetching form submissions:",S)}},m=S=>a.filter(F=>{const E=F.data||{};return E.email===S||E.Email===S}),j=async()=>{try{l(!0);const S=await fetch(`${Bf}/users`);if(S.ok){const F=await S.json();r(F)}else c("Failed to fetch users")}catch{c("Failed to fetch users")}finally{l(!1)}},v=s.filter(S=>{const F=S.name.toLowerCase().includes(d.toLowerCase())||S.email.toLowerCase().includes(d.toLowerCase()),E=p==="all"||p==="verified"&&S.is_verified||p==="unverified"&&!S.is_verified;return F&&E}),w=S=>S>=5e3?{level:"Gold",color:"text-yellow-600 bg-yellow-100"}:S>=2e3?{level:"Silver",color:"text-gray-600 bg-gray-100"}:{level:"Bronze",color:"text-orange-600 bg-orange-100"};return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Users"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage your customer base"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>x(!g),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[e.jsx(gs,{className:"h-4 w-4"}),e.jsxs("span",{children:["Form Submissions (",a.length,")"]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 px-4 py-2 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Total Users"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:s.length})]})]})]}),g&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Form Submissions"}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),a.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No form submissions yet"}):e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:a.map(S=>{const F=S.data||{},E=F.email||F.Email||"N/A",k=F.name||F.Name||"Anonymous",A=s.find(y=>y.email===E);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:S.form_name||`Form #${S.form_id}`}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Submitted by: ",k," (",E,")",A&&e.jsxs("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:["(User ID: ",A.id,")"]})]})]}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(S.created_at).toLocaleString()})]}),e.jsx("div",{className:"space-y-1 mt-2",children:Object.entries(F).map(([y,N])=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:[y,":"]})," ",e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:String(N)})]},y))})]},S.id)})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search users by name or email...",value:d,onChange:S=>u(S.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsxs("select",{value:p,onChange:S=>h(S.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Users"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"unverified",children:"Unverified"})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[o&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400",children:e.jsx("p",{className:"text-red-700 dark:text-red-300",children:o})}),v.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Pt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No users found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:d?"Try adjusting your search terms":"No users have signed up yet"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Loyalty"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Orders"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Member Since"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Form Submissions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:v.map(S=>{const F=w(S.loyalty_points),E=m(S.email);return e.jsxs("tr",{onClick:()=>t(`/admin/users/${S.id}`),className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900/20 flex items-center justify-center",children:e.jsx(Pt,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:S.name}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",S.id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ss,{className:"h-4 w-4 text-gray-400"}),S.email]}),S.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pa,{className:"h-4 w-4 text-gray-400"}),S.phone]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(xr,{className:"h-4 w-4 text-yellow-500"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[S.loyalty_points.toLocaleString()," pts"]})]}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${F.color}`,children:F.level})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fa,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:S.total_orders})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${S.is_verified?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300"}`,children:S.is_verified?"Verified":"Unverified"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mr,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:new Date(S.member_since).toLocaleDateString()})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:E.length})]}),E.length>0&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Latest: ",new Date(E[0].created_at).toLocaleDateString()]})]})]},S.id)})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pt,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xr,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Verified Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.filter(S=>S.is_verified).length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(fa,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.reduce((S,F)=>S+F.total_orders,0)})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xr,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Points"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.reduce((S,F)=>S+F.loyalty_points,0).toLocaleString()})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(gs,{className:"h-8 w-8 text-indigo-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Form Submissions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.length})]})]})})]})]})}function fS(){return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Categories"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Organize your products into categories"})]}),e.jsx("button",{className:"btn-primary",children:"Add Category"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"mb-4 text-xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Category Management"}),e.jsx("p",{style:{color:"var(--text-muted)",letterSpacing:"0.02em"},children:"Category management features coming soon. This will include creating, editing, and organizing product categories."})]})]})}function pS(){const[t,s]=b.useState("Nefol Store"),[r,a]=b.useState("support@nefol.com"),[n,i]=b.useState("Light"),[l,o]=b.useState("INR ()"),c=()=>{alert("Settings saved successfully!"),console.log("Settings:",{storeName:t,supportEmail:r,theme:n,currency:l})};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Settings"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Configure your store settings and preferences"})]}),e.jsx("button",{onClick:c,className:"btn-primary",children:"Save Changes"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"mb-4 text-xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Store Settings"}),e.jsx("p",{className:"mb-6",style:{color:"var(--text-muted)",letterSpacing:"0.02em"},children:"Configure your store settings and preferences."}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 font-semibold text-gray-900",children:"General"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Name"}),e.jsx("input",{value:t,onChange:d=>s(d.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"Nefol Store"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Support Email"}),e.jsx("input",{value:r,onChange:d=>a(d.target.value),type:"email",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"support@nefol.com"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 font-semibold text-gray-900",children:"Appearance"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Theme"}),e.jsxs("select",{value:n,onChange:d=>i(d.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",children:[e.jsx("option",{children:"Light"}),e.jsx("option",{children:"Dark"}),e.jsx("option",{children:"Auto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsxs("select",{value:l,onChange:d=>o(d.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",children:[e.jsx("option",{children:"INR ()"}),e.jsx("option",{children:"USD ($)"}),e.jsx("option",{children:"EUR ()"})]})]})]})]})]})]})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Qb=1252,gS=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],wm={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Nm=function(t){gS.indexOf(t)!=-1&&(Qb=wm[0]=t)};function yS(){Nm(1252)}var Zr=function(t){Nm(t)};function Zb(){Zr(1200),yS()}function $f(t){for(var s=[],r=0,a=t.length;r<a;++r)s[r]=t.charCodeAt(r);return s}function bS(t){for(var s=[],r=0;r<t.length>>1;++r)s[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return s.join("")}function ev(t){for(var s=[],r=0;r<t.length>>1;++r)s[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return s.join("")}var Dl=function(t){var s=t.charCodeAt(0),r=t.charCodeAt(1);return s==255&&r==254?bS(t.slice(2)):s==254&&r==255?ev(t.slice(2)):s==65279?t.slice(1):t},fc=function(s){return String.fromCharCode(s)},Uf=function(s){return String.fromCharCode(s)},_o,un="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function zf(t){for(var s="",r=0,a=0,n=0,i=0,l=0,o=0,c=0,d=0;d<t.length;)r=t.charCodeAt(d++),i=r>>2,a=t.charCodeAt(d++),l=(r&3)<<4|a>>4,n=t.charCodeAt(d++),o=(a&15)<<2|n>>6,c=n&63,isNaN(a)?o=c=64:isNaN(n)&&(c=64),s+=un.charAt(i)+un.charAt(l)+un.charAt(o)+un.charAt(c);return s}function wr(t){var s="",r=0,a=0,n=0,i=0,l=0,o=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<t.length;)i=un.indexOf(t.charAt(d++)),l=un.indexOf(t.charAt(d++)),r=i<<2|l>>4,s+=String.fromCharCode(r),o=un.indexOf(t.charAt(d++)),a=(l&15)<<4|o>>2,o!==64&&(s+=String.fromCharCode(a)),c=un.indexOf(t.charAt(d++)),n=(o&3)<<6|c,c!==64&&(s+=String.fromCharCode(n));return s}var gt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),hi=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(s,r){return r?new Buffer(s,r):new Buffer(s)}:Buffer.from.bind(Buffer)}return function(){}}();function _n(t){return gt?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function Wf(t){return gt?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Qr=function(s){return gt?hi(s,"binary"):s.split("").map(function(r){return r.charCodeAt(0)&255})};function fi(t){if(Array.isArray(t))return t.map(function(a){return String.fromCharCode(a)}).join("");for(var s=[],r=0;r<t.length;++r)s[r]=String.fromCharCode(t[r]);return s.join("")}function km(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return km(new Uint8Array(t));for(var s=new Array(t.length),r=0;r<t.length;++r)s[r]=t[r];return s}var ln=gt?function(t){return Buffer.concat(t.map(function(s){return Buffer.isBuffer(s)?s:hi(s)}))}:function(t){if(typeof Uint8Array<"u"){var s=0,r=0;for(s=0;s<t.length;++s)r+=t[s].length;var a=new Uint8Array(r),n=0;for(s=0,r=0;s<t.length;r+=n,++s)if(n=t[s].length,t[s]instanceof Uint8Array)a.set(t[s],r);else{if(typeof t[s]=="string")throw"wtf";a.set(new Uint8Array(t[s]),r)}return a}return[].concat.apply([],t.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function vS(t){for(var s=[],r=0,a=t.length+250,n=_n(t.length+255),i=0;i<t.length;++i){var l=t.charCodeAt(i);if(l<128)n[r++]=l;else if(l<2048)n[r++]=192|l>>6&31,n[r++]=128|l&63;else if(l>=55296&&l<57344){l=(l&1023)+64;var o=t.charCodeAt(++i)&1023;n[r++]=240|l>>8&7,n[r++]=128|l>>2&63,n[r++]=128|o>>6&15|(l&3)<<4,n[r++]=128|o&63}else n[r++]=224|l>>12&15,n[r++]=128|l>>6&63,n[r++]=128|l&63;r>a&&(s.push(n.slice(0,r)),r=0,n=_n(65535),a=65530)}return s.push(n.slice(0,r)),ln(s)}var Zs=/\u0000/g,Rl=/[\u0001-\u0006]/g;function Hi(t){for(var s="",r=t.length-1;r>=0;)s+=t.charAt(r--);return s}function ea(t,s){var r=""+t;return r.length>=s?r:Jt("0",s-r.length)+r}function Sm(t,s){var r=""+t;return r.length>=s?r:Jt(" ",s-r.length)+r}function pd(t,s){var r=""+t;return r.length>=s?r:r+Jt(" ",s-r.length)}function jS(t,s){var r=""+Math.round(t);return r.length>=s?r:Jt("0",s-r.length)+r}function wS(t,s){var r=""+t;return r.length>=s?r:Jt("0",s-r.length)+r}var Vf=Math.pow(2,32);function wi(t,s){if(t>Vf||t<-Vf)return jS(t,s);var r=Math.round(t);return wS(r,s)}function gd(t,s){return s=s||0,t.length>=7+s&&(t.charCodeAt(s)|32)===103&&(t.charCodeAt(s+1)|32)===101&&(t.charCodeAt(s+2)|32)===110&&(t.charCodeAt(s+3)|32)===101&&(t.charCodeAt(s+4)|32)===114&&(t.charCodeAt(s+5)|32)===97&&(t.charCodeAt(s+6)|32)===108}var Hf=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],D0=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function NS(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var at={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Gf={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},kS={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function yd(t,s,r){for(var a=t<0?-1:1,n=t*a,i=0,l=1,o=0,c=1,d=0,u=0,p=Math.floor(n);d<s&&(p=Math.floor(n),o=p*l+i,u=p*d+c,!(n-p<5e-8));)n=1/(n-p),i=l,l=o,c=d,d=u;if(u>s&&(d>s?(u=c,o=i):(u=d,o=l)),!r)return[0,a*o,u];var h=Math.floor(a*o/u);return[h,a*o-h*u,u]}function qn(t,s,r){if(t>2958465||t<0)return null;var a=t|0,n=Math.floor(86400*(t-a)),i=0,l=[],o={D:a,T:n,u:86400*(t-a)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),s&&s.date1904&&(a+=1462),o.u>.9999&&(o.u=0,++n==86400&&(o.T=n=0,++a,++o.D)),a===60)l=r?[1317,10,29]:[1900,2,29],i=3;else if(a===0)l=r?[1317,8,29]:[1900,1,0],i=6;else{a>60&&--a;var c=new Date(1900,0,1);c.setDate(c.getDate()+a-1),l=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),a<60&&(i=(i+6)%7),r&&(i=AS(c,l))}return o.y=l[0],o.m=l[1],o.d=l[2],o.S=n%60,n=Math.floor(n/60),o.M=n%60,n=Math.floor(n/60),o.H=n,o.q=i,o}var tv=new Date(1899,11,31,0,0,0),SS=tv.getTime(),CS=new Date(1900,2,1,0,0,0);function sv(t,s){var r=t.getTime();return s?r-=1461*24*60*60*1e3:t>=CS&&(r+=24*60*60*1e3),(r-(SS+(t.getTimezoneOffset()-tv.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function Cm(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function _S(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function TS(t){var s=t<0?12:11,r=Cm(t.toFixed(12));return r.length<=s||(r=t.toPrecision(10),r.length<=s)?r:t.toExponential(5)}function ES(t){var s=Cm(t.toFixed(11));return s.length>(t<0?12:11)||s==="0"||s==="-0"?t.toPrecision(6):s}function To(t){var s=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return s>=-4&&s<=-1?r=t.toPrecision(10+s):Math.abs(s)<=9?r=TS(t):s===10?r=t.toFixed(10).substr(0,12):r=ES(t),Cm(_S(r.toUpperCase()))}function oi(t,s){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):To(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Br(14,sv(t,s&&s.date1904),s)}throw new Error("unsupported value in General format: "+t)}function AS(t,s){s[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function FS(t,s,r,a){var n="",i=0,l=0,o=r.y,c,d=0;switch(t){case 98:o=r.y+543;case 121:switch(s.length){case 1:case 2:c=o%100,d=2;break;default:c=o%1e4,d=4;break}break;case 109:switch(s.length){case 1:case 2:c=r.m,d=s.length;break;case 3:return D0[r.m-1][1];case 5:return D0[r.m-1][0];default:return D0[r.m-1][2]}break;case 100:switch(s.length){case 1:case 2:c=r.d,d=s.length;break;case 3:return Hf[r.q][0];default:return Hf[r.q][1]}break;case 104:switch(s.length){case 1:case 2:c=1+(r.H+11)%12,d=s.length;break;default:throw"bad hour format: "+s}break;case 72:switch(s.length){case 1:case 2:c=r.H,d=s.length;break;default:throw"bad hour format: "+s}break;case 77:switch(s.length){case 1:case 2:c=r.M,d=s.length;break;default:throw"bad minute format: "+s}break;case 115:if(s!="s"&&s!="ss"&&s!=".0"&&s!=".00"&&s!=".000")throw"bad second format: "+s;return r.u===0&&(s=="s"||s=="ss")?ea(r.S,s.length):(a>=2?l=a===3?1e3:100:l=a===1?10:1,i=Math.round(l*(r.S+r.u)),i>=60*l&&(i=0),s==="s"?i===0?"0":""+i/l:(n=ea(i,2+a),s==="ss"?n.substr(0,2):"."+n.substr(2,s.length-1)));case 90:switch(s){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+s}d=s.length===3?1:2;break;case 101:c=o,d=1;break}var u=d>0?ea(c,d):"";return u}function xn(t){var s=3;if(t.length<=s)return t;for(var r=t.length%s,a=t.substr(0,r);r!=t.length;r+=s)a+=(a.length>0?",":"")+t.substr(r,s);return a}var rv=/%/g;function PS(t,s,r){var a=s.replace(rv,""),n=s.length-a.length;return Ia(t,a,r*Math.pow(10,2*n))+Jt("%",n)}function DS(t,s,r){for(var a=s.length-1;s.charCodeAt(a-1)===44;)--a;return Ia(t,s.substr(0,a),r/Math.pow(10,3*(s.length-a)))}function av(t,s){var r,a=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+av(t,-s);var n=t.indexOf(".");n===-1&&(n=t.indexOf("E"));var i=Math.floor(Math.log(s)*Math.LOG10E)%n;if(i<0&&(i+=n),r=(s/Math.pow(10,i)).toPrecision(a+1+(n+i)%n),r.indexOf("e")===-1){var l=Math.floor(Math.log(s)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+i):r+="E+"+(l-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,n)+"."+r.substr(2+n),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,d,u){return c+d+u.substr(0,(n+i)%n)+"."+u.substr(i)+"E"})}else r=s.toExponential(a);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var nv=/# (\?+)( ?)\/( ?)(\d+)/;function RS(t,s,r){var a=parseInt(t[4],10),n=Math.round(s*a),i=Math.floor(n/a),l=n-i*a,o=a;return r+(i===0?"":""+i)+" "+(l===0?Jt(" ",t[1].length+1+t[4].length):Sm(l,t[1].length)+t[2]+"/"+t[3]+ea(o,t[4].length))}function LS(t,s,r){return r+(s===0?"":""+s)+Jt(" ",t[1].length+2+t[4].length)}var iv=/^#*0*\.([0#]+)/,lv=/\).*[0#]/,ov=/\(###\) ###\\?-####/;function Js(t){for(var s="",r,a=0;a!=t.length;++a)switch(r=t.charCodeAt(a)){case 35:break;case 63:s+=" ";break;case 48:s+="0";break;default:s+=String.fromCharCode(r)}return s}function qf(t,s){var r=Math.pow(10,s);return""+Math.round(t*r)/r}function Jf(t,s){var r=t-Math.floor(t),a=Math.pow(10,s);return s<(""+Math.round(r*a)).length?0:Math.round(r*a)}function OS(t,s){return s<(""+Math.round((t-Math.floor(t))*Math.pow(10,s))).length?1:0}function IS(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Tr(t,s,r){if(t.charCodeAt(0)===40&&!s.match(lv)){var a=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Tr("n",a,r):"("+Tr("n",a,-r)+")"}if(s.charCodeAt(s.length-1)===44)return DS(t,s,r);if(s.indexOf("%")!==-1)return PS(t,s,r);if(s.indexOf("E")!==-1)return av(s,r);if(s.charCodeAt(0)===36)return"$"+Tr(t,s.substr(s.charAt(1)==" "?2:1),r);var n,i,l,o,c=Math.abs(r),d=r<0?"-":"";if(s.match(/^00+$/))return d+wi(c,s.length);if(s.match(/^[#?]+$/))return n=wi(r,0),n==="0"&&(n=""),n.length>s.length?n:Js(s.substr(0,s.length-n.length))+n;if(i=s.match(nv))return RS(i,c,d);if(s.match(/^#+0+$/))return d+wi(c,s.length-s.indexOf("0"));if(i=s.match(iv))return n=qf(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Js(i[1])).replace(/\.$/,"."+Js(i[1])).replace(/\.(\d*)$/,function(x,f){return"."+f+Jt("0",Js(i[1]).length-f.length)}),s.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),i=s.match(/^(0*)\.(#*)$/))return d+qf(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=s.match(/^#{1,3},##0(\.?)$/))return d+xn(wi(c,0));if(i=s.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Tr(t,s,-r):xn(""+(Math.floor(r)+OS(r,i[1].length)))+"."+ea(Jf(r,i[1].length),i[1].length);if(i=s.match(/^#,#*,#0/))return Tr(t,s.replace(/^#,#*,/,""),r);if(i=s.match(/^([0#]+)(\\?-([0#]+))+$/))return n=Hi(Tr(t,s.replace(/[\\-]/g,""),r)),l=0,Hi(Hi(s.replace(/\\/g,"")).replace(/[0#]/g,function(x){return l<n.length?n.charAt(l++):x==="0"?"0":""}));if(s.match(ov))return n=Tr(t,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var u="";if(i=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=yd(c,Math.pow(10,l)-1,!1),n=""+d,u=Ia("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),n+=u+i[2]+"/"+i[3],u=pd(o[2],l),u.length<i[4].length&&(u=Js(i[4].substr(i[4].length-u.length))+u),n+=u,n;if(i=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=yd(c,Math.pow(10,l)-1,!0),d+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Sm(o[1],l)+i[2]+"/"+i[3]+pd(o[2],l):Jt(" ",2*l+1+i[2].length+i[3].length));if(i=s.match(/^[#0?]+$/))return n=wi(r,0),s.length<=n.length?n:Js(s.substr(0,s.length-n.length))+n;if(i=s.match(/^([#0?]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=n.indexOf(".");var p=s.indexOf(".")-l,h=s.length-n.length-p;return Js(s.substr(0,p)+n+s.substr(s.length-h))}if(i=s.match(/^00,000\.([#0]*0)$/))return l=Jf(r,i[1].length),r<0?"-"+Tr(t,s,-r):xn(IS(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?ea(0,3-x.length):"")+x})+"."+ea(l,i[1].length);switch(s){case"###,##0.00":return Tr(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=xn(wi(c,0));return g!=="0"?d+g:"";case"###,###.00":return Tr(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Tr(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+s+"|")}function MS(t,s,r){for(var a=s.length-1;s.charCodeAt(a-1)===44;)--a;return Ia(t,s.substr(0,a),r/Math.pow(10,3*(s.length-a)))}function BS(t,s,r){var a=s.replace(rv,""),n=s.length-a.length;return Ia(t,a,r*Math.pow(10,2*n))+Jt("%",n)}function cv(t,s){var r,a=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+cv(t,-s);var n=t.indexOf(".");n===-1&&(n=t.indexOf("E"));var i=Math.floor(Math.log(s)*Math.LOG10E)%n;if(i<0&&(i+=n),r=(s/Math.pow(10,i)).toPrecision(a+1+(n+i)%n),!r.match(/[Ee]/)){var l=Math.floor(Math.log(s)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+i):r+="E+"+(l-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,d,u){return c+d+u.substr(0,(n+i)%n)+"."+u.substr(i)+"E"})}else r=s.toExponential(a);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function da(t,s,r){if(t.charCodeAt(0)===40&&!s.match(lv)){var a=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?da("n",a,r):"("+da("n",a,-r)+")"}if(s.charCodeAt(s.length-1)===44)return MS(t,s,r);if(s.indexOf("%")!==-1)return BS(t,s,r);if(s.indexOf("E")!==-1)return cv(s,r);if(s.charCodeAt(0)===36)return"$"+da(t,s.substr(s.charAt(1)==" "?2:1),r);var n,i,l,o,c=Math.abs(r),d=r<0?"-":"";if(s.match(/^00+$/))return d+ea(c,s.length);if(s.match(/^[#?]+$/))return n=""+r,r===0&&(n=""),n.length>s.length?n:Js(s.substr(0,s.length-n.length))+n;if(i=s.match(nv))return LS(i,c,d);if(s.match(/^#+0+$/))return d+ea(c,s.length-s.indexOf("0"));if(i=s.match(iv))return n=(""+r).replace(/^([^\.]+)$/,"$1."+Js(i[1])).replace(/\.$/,"."+Js(i[1])),n=n.replace(/\.(\d*)$/,function(x,f){return"."+f+Jt("0",Js(i[1]).length-f.length)}),s.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),i=s.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=s.match(/^#{1,3},##0(\.?)$/))return d+xn(""+c);if(i=s.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+da(t,s,-r):xn(""+r)+"."+Jt("0",i[1].length);if(i=s.match(/^#,#*,#0/))return da(t,s.replace(/^#,#*,/,""),r);if(i=s.match(/^([0#]+)(\\?-([0#]+))+$/))return n=Hi(da(t,s.replace(/[\\-]/g,""),r)),l=0,Hi(Hi(s.replace(/\\/g,"")).replace(/[0#]/g,function(x){return l<n.length?n.charAt(l++):x==="0"?"0":""}));if(s.match(ov))return n=da(t,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var u="";if(i=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=yd(c,Math.pow(10,l)-1,!1),n=""+d,u=Ia("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),n+=u+i[2]+"/"+i[3],u=pd(o[2],l),u.length<i[4].length&&(u=Js(i[4].substr(i[4].length-u.length))+u),n+=u,n;if(i=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=yd(c,Math.pow(10,l)-1,!0),d+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Sm(o[1],l)+i[2]+"/"+i[3]+pd(o[2],l):Jt(" ",2*l+1+i[2].length+i[3].length));if(i=s.match(/^[#0?]+$/))return n=""+r,s.length<=n.length?n:Js(s.substr(0,s.length-n.length))+n;if(i=s.match(/^([#0]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=n.indexOf(".");var p=s.indexOf(".")-l,h=s.length-n.length-p;return Js(s.substr(0,p)+n+s.substr(s.length-h))}if(i=s.match(/^00,000\.([#0]*0)$/))return r<0?"-"+da(t,s,-r):xn(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?ea(0,3-x.length):"")+x})+"."+ea(0,i[1].length);switch(s){case"###,###":case"##,###":case"#,###":var g=xn(""+c);return g!=="0"?d+g:"";default:if(s.match(/\.[0#?]*$/))return da(t,s.slice(0,s.lastIndexOf(".")),r)+Js(s.slice(s.lastIndexOf(".")))}throw new Error("unsupported format |"+s+"|")}function Ia(t,s,r){return(r|0)===r?da(t,s,r):Tr(t,s,r)}function $S(t){for(var s=[],r=!1,a=0,n=0;a<t.length;++a)switch(t.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:s[s.length]=t.substr(n,a-n),n=a+1}if(s[s.length]=t.substr(n),r===!0)throw new Error("Format |"+t+"| unterminated string ");return s}var dv=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function ul(t){for(var s=0,r="",a="";s<t.length;)switch(r=t.charAt(s)){case"G":gd(t,s)&&(s+=6),s++;break;case'"':for(;t.charCodeAt(++s)!==34&&s<t.length;);++s;break;case"\\":s+=2;break;case"_":s+=2;break;case"@":++s;break;case"B":case"b":if(t.charAt(s+1)==="1"||t.charAt(s+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(s,3).toUpperCase()==="A/P"||t.substr(s,5).toUpperCase()==="AM/PM"||t.substr(s,5).toUpperCase()==="/")return!0;++s;break;case"[":for(a=r;t.charAt(s++)!=="]"&&s<t.length;)a+=t.charAt(s);if(a.match(dv))return!0;break;case".":case"0":case"#":for(;s<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++s))>-1||r=="\\"&&t.charAt(s+1)=="-"&&"0#".indexOf(t.charAt(s+2))>-1););break;case"?":for(;t.charAt(++s)===r;);break;case"*":++s,(t.charAt(s)==" "||t.charAt(s)=="*")&&++s;break;case"(":case")":++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;s<t.length&&"0123456789".indexOf(t.charAt(++s))>-1;);break;case" ":++s;break;default:++s;break}return!1}function US(t,s,r,a){for(var n=[],i="",l=0,o="",c="t",d,u,p,h="H";l<t.length;)switch(o=t.charAt(l)){case"G":if(!gd(t,l))throw new Error("unrecognized character "+o+" in "+t);n[n.length]={t:"G",v:"General"},l+=7;break;case'"':for(i="";(p=t.charCodeAt(++l))!==34&&l<t.length;)i+=String.fromCharCode(p);n[n.length]={t:"t",v:i},++l;break;case"\\":var g=t.charAt(++l),x=g==="("||g===")"?g:"t";n[n.length]={t:x,v:g},++l;break;case"_":n[n.length]={t:"t",v:" "},l+=2;break;case"@":n[n.length]={t:"T",v:s},++l;break;case"B":case"b":if(t.charAt(l+1)==="1"||t.charAt(l+1)==="2"){if(d==null&&(d=qn(s,r,t.charAt(l+1)==="2"),d==null))return"";n[n.length]={t:"X",v:t.substr(l,2)},c=o,l+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(s<0||d==null&&(d=qn(s,r),d==null))return"";for(i=o;++l<t.length&&t.charAt(l).toLowerCase()===o;)i+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),n[n.length]={t:o,v:i},c=o;break;case"A":case"a":case"":var f={t:o,v:o};if(d==null&&(d=qn(s,r)),t.substr(l,3).toUpperCase()==="A/P"?(d!=null&&(f.v=d.H>=12?"P":"A"),f.t="T",h="h",l+=3):t.substr(l,5).toUpperCase()==="AM/PM"?(d!=null&&(f.v=d.H>=12?"PM":"AM"),f.t="T",l+=5,h="h"):t.substr(l,5).toUpperCase()==="/"?(d!=null&&(f.v=d.H>=12?"":""),f.t="T",l+=5,h="h"):(f.t="t",++l),d==null&&f.t==="T")return"";n[n.length]=f,c=o;break;case"[":for(i=o;t.charAt(l++)!=="]"&&l<t.length;)i+=t.charAt(l);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(dv)){if(d==null&&(d=qn(s,r),d==null))return"";n[n.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",ul(t)||(n[n.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=o;++l<t.length&&(o=t.charAt(l))==="0";)i+=o;n[n.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++l<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(l))>-1;)i+=o;n[n.length]={t:"n",v:i};break;case"?":for(i=o;t.charAt(++l)===o;)i+=o;n[n.length]={t:o,v:i},c=o;break;case"*":++l,(t.charAt(l)==" "||t.charAt(l)=="*")&&++l;break;case"(":case")":n[n.length]={t:a===1?"t":o,v:o},++l;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;l<t.length&&"0123456789".indexOf(t.charAt(++l))>-1;)i+=t.charAt(l);n[n.length]={t:"D",v:i};break;case" ":n[n.length]={t:o,v:o},++l;break;case"$":n[n.length]={t:"t",v:"$"},++l;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);n[n.length]={t:"t",v:o},++l;break}var m=0,j=0,v;for(l=n.length-1,c="t";l>=0;--l)switch(n[l].t){case"h":case"H":n[l].t=h,c="h",m<1&&(m=1);break;case"s":(v=n[l].v.match(/\.0+$/))&&(j=Math.max(j,v[0].length-1)),m<3&&(m=3);case"d":case"y":case"M":case"e":c=n[l].t;break;case"m":c==="s"&&(n[l].t="M",m<2&&(m=2));break;case"X":break;case"Z":m<1&&n[l].v.match(/[Hh]/)&&(m=1),m<2&&n[l].v.match(/[Mm]/)&&(m=2),m<3&&n[l].v.match(/[Ss]/)&&(m=3)}switch(m){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var w="",S;for(l=0;l<n.length;++l)switch(n[l].t){case"t":case"T":case" ":case"D":break;case"X":n[l].v="",n[l].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[l].v=FS(n[l].t.charCodeAt(0),n[l].v,d,j),n[l].t="t";break;case"n":case"?":for(S=l+1;n[S]!=null&&((o=n[S].t)==="?"||o==="D"||(o===" "||o==="t")&&n[S+1]!=null&&(n[S+1].t==="?"||n[S+1].t==="t"&&n[S+1].v==="/")||n[l].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(n[S].v==="/"||n[S].v===" "&&n[S+1]!=null&&n[S+1].t=="?"));)n[l].v+=n[S].v,n[S]={v:"",t:";"},++S;w+=n[l].v,l=S-1;break;case"G":n[l].t="t",n[l].v=oi(s,r);break}var F="",E,k;if(w.length>0){w.charCodeAt(0)==40?(E=s<0&&w.charCodeAt(0)===45?-s:s,k=Ia("n",w,E)):(E=s<0&&a>1?-s:s,k=Ia("n",w,E),E<0&&n[0]&&n[0].t=="t"&&(k=k.substr(1),n[0].v="-"+n[0].v)),S=k.length-1;var A=n.length;for(l=0;l<n.length;++l)if(n[l]!=null&&n[l].t!="t"&&n[l].v.indexOf(".")>-1){A=l;break}var y=n.length;if(A===n.length&&k.indexOf("E")===-1){for(l=n.length-1;l>=0;--l)n[l]==null||"n?".indexOf(n[l].t)===-1||(S>=n[l].v.length-1?(S-=n[l].v.length,n[l].v=k.substr(S+1,n[l].v.length)):S<0?n[l].v="":(n[l].v=k.substr(0,S+1),S=-1),n[l].t="t",y=l);S>=0&&y<n.length&&(n[y].v=k.substr(0,S+1)+n[y].v)}else if(A!==n.length&&k.indexOf("E")===-1){for(S=k.indexOf(".")-1,l=A;l>=0;--l)if(!(n[l]==null||"n?".indexOf(n[l].t)===-1)){for(u=n[l].v.indexOf(".")>-1&&l===A?n[l].v.indexOf(".")-1:n[l].v.length-1,F=n[l].v.substr(u+1);u>=0;--u)S>=0&&(n[l].v.charAt(u)==="0"||n[l].v.charAt(u)==="#")&&(F=k.charAt(S--)+F);n[l].v=F,n[l].t="t",y=l}for(S>=0&&y<n.length&&(n[y].v=k.substr(0,S+1)+n[y].v),S=k.indexOf(".")+1,l=A;l<n.length;++l)if(!(n[l]==null||"n?(".indexOf(n[l].t)===-1&&l!==A)){for(u=n[l].v.indexOf(".")>-1&&l===A?n[l].v.indexOf(".")+1:0,F=n[l].v.substr(0,u);u<n[l].v.length;++u)S<k.length&&(F+=k.charAt(S++));n[l].v=F,n[l].t="t",y=l}}}for(l=0;l<n.length;++l)n[l]!=null&&"n?".indexOf(n[l].t)>-1&&(E=a>1&&s<0&&l>0&&n[l-1].v==="-"?-s:s,n[l].v=Ia(n[l].t,n[l].v,E),n[l].t="t");var N="";for(l=0;l!==n.length;++l)n[l]!=null&&(N+=n[l].v);return N}var Kf=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Yf(t,s){if(s==null)return!1;var r=parseFloat(s[2]);switch(s[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function zS(t,s){var r=$S(t),a=r.length,n=r[a-1].indexOf("@");if(a<4&&n>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof s!="number")return[4,r.length===4||n>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=n>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=n>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=n>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=s>0?r[0]:s<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var l=r[0].match(Kf),o=r[1].match(Kf);return Yf(s,l)?[a,r[0]]:Yf(s,o)?[a,r[1]]:[a,r[l!=null&&o!=null?2:1]]}return[a,i]}function Br(t,s,r){r==null&&(r={});var a="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?a=r.dateNF:a=t;break;case"number":t==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:at)[t],a==null&&(a=r.table&&r.table[Gf[t]]||at[Gf[t]]),a==null&&(a=kS[t]||"General");break}if(gd(a,0))return oi(s,r);s instanceof Date&&(s=sv(s,r.date1904));var n=zS(a,s);if(gd(n[1]))return oi(s,r);if(s===!0)s="TRUE";else if(s===!1)s="FALSE";else if(s===""||s==null)return"";return US(n[1],s,r,n[0])}function Qn(t,s){if(typeof s!="number"){s=+s||-1;for(var r=0;r<392;++r){if(at[r]==null){s<0&&(s=r);continue}if(at[r]==t){s=r;break}}s<0&&(s=391)}return at[s]=t,s}function uv(){at=NS()}var WS={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},xv=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function VS(t){var s=typeof t=="number"?at[t]:t;return s=s.replace(xv,"(\\d+)"),new RegExp("^"+s+"$")}function HS(t,s,r){var a=-1,n=-1,i=-1,l=-1,o=-1,c=-1;(s.match(xv)||[]).forEach(function(p,h){var g=parseInt(r[h+1],10);switch(p.toLowerCase().charAt(0)){case"y":a=g;break;case"d":i=g;break;case"h":l=g;break;case"s":c=g;break;case"m":l>=0?o=g:n=g;break}}),c>=0&&o==-1&&n>=0&&(o=n,n=-1);var d=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return l==-1&&o==-1&&c==-1?d:a==-1&&n==-1&&i==-1?u:d+"T"+u}var GS=function(){var t={};t.version="1.2.0";function s(){for(var k=0,A=new Array(256),y=0;y!=256;++y)k=y,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,A[y]=k;return typeof Int32Array<"u"?new Int32Array(A):A}var r=s();function a(k){var A=0,y=0,N=0,R=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(N=0;N!=256;++N)R[N]=k[N];for(N=0;N!=256;++N)for(y=k[N],A=256+N;A<4096;A+=256)y=R[A]=y>>>8^k[y&255];var T=[];for(N=1;N!=16;++N)T[N-1]=typeof Int32Array<"u"?R.subarray(N*256,N*256+256):R.slice(N*256,N*256+256);return T}var n=a(r),i=n[0],l=n[1],o=n[2],c=n[3],d=n[4],u=n[5],p=n[6],h=n[7],g=n[8],x=n[9],f=n[10],m=n[11],j=n[12],v=n[13],w=n[14];function S(k,A){for(var y=A^-1,N=0,R=k.length;N<R;)y=y>>>8^r[(y^k.charCodeAt(N++))&255];return~y}function F(k,A){for(var y=A^-1,N=k.length-15,R=0;R<N;)y=w[k[R++]^y&255]^v[k[R++]^y>>8&255]^j[k[R++]^y>>16&255]^m[k[R++]^y>>>24]^f[k[R++]]^x[k[R++]]^g[k[R++]]^h[k[R++]]^p[k[R++]]^u[k[R++]]^d[k[R++]]^c[k[R++]]^o[k[R++]]^l[k[R++]]^i[k[R++]]^r[k[R++]];for(N+=15;R<N;)y=y>>>8^r[(y^k[R++])&255];return~y}function E(k,A){for(var y=A^-1,N=0,R=k.length,T=0,z=0;N<R;)T=k.charCodeAt(N++),T<128?y=y>>>8^r[(y^T)&255]:T<2048?(y=y>>>8^r[(y^(192|T>>6&31))&255],y=y>>>8^r[(y^(128|T&63))&255]):T>=55296&&T<57344?(T=(T&1023)+64,z=k.charCodeAt(N++)&1023,y=y>>>8^r[(y^(240|T>>8&7))&255],y=y>>>8^r[(y^(128|T>>2&63))&255],y=y>>>8^r[(y^(128|z>>6&15|(T&3)<<4))&255],y=y>>>8^r[(y^(128|z&63))&255]):(y=y>>>8^r[(y^(224|T>>12&15))&255],y=y>>>8^r[(y^(128|T>>6&63))&255],y=y>>>8^r[(y^(128|T&63))&255]);return~y}return t.table=r,t.bstr=S,t.buf=F,t.str=E,t}(),bt=function(){var s={};s.version="1.2.1";function r(I,G){for(var _=I.split("/"),C=G.split("/"),B=0,H=0,Q=Math.min(_.length,C.length);B<Q;++B){if(H=_[B].length-C[B].length)return H;if(_[B]!=C[B])return _[B]<C[B]?-1:1}return _.length-C.length}function a(I){if(I.charAt(I.length-1)=="/")return I.slice(0,-1).indexOf("/")===-1?I:a(I.slice(0,-1));var G=I.lastIndexOf("/");return G===-1?I:I.slice(0,G+1)}function n(I){if(I.charAt(I.length-1)=="/")return n(I.slice(0,-1));var G=I.lastIndexOf("/");return G===-1?I:I.slice(G+1)}function i(I,G){typeof G=="string"&&(G=new Date(G));var _=G.getHours();_=_<<6|G.getMinutes(),_=_<<5|G.getSeconds()>>>1,I.write_shift(2,_);var C=G.getFullYear()-1980;C=C<<4|G.getMonth()+1,C=C<<5|G.getDate(),I.write_shift(2,C)}function l(I){var G=I.read_shift(2)&65535,_=I.read_shift(2)&65535,C=new Date,B=_&31;_>>>=5;var H=_&15;_>>>=4,C.setMilliseconds(0),C.setFullYear(_+1980),C.setMonth(H-1),C.setDate(B);var Q=G&31;G>>>=5;var se=G&63;return G>>>=6,C.setHours(G),C.setMinutes(se),C.setSeconds(Q<<1),C}function o(I){_s(I,0);for(var G={},_=0;I.l<=I.length-4;){var C=I.read_shift(2),B=I.read_shift(2),H=I.l+B,Q={};switch(C){case 21589:_=I.read_shift(1),_&1&&(Q.mtime=I.read_shift(4)),B>5&&(_&2&&(Q.atime=I.read_shift(4)),_&4&&(Q.ctime=I.read_shift(4))),Q.mtime&&(Q.mt=new Date(Q.mtime*1e3));break}I.l=H,G[C]=Q}return G}var c;function d(){return c||(c={})}function u(I,G){if(I[0]==80&&I[1]==75)return ue(I,G);if((I[0]|32)==109&&(I[1]|32)==105)return Ge(I,G);if(I.length<512)throw new Error("CFB file size "+I.length+" < 512");var _=3,C=512,B=0,H=0,Q=0,se=0,ce=0,oe=[],re=I.slice(0,512);_s(re,0);var me=p(re);switch(_=me[0],_){case 3:C=512;break;case 4:C=4096;break;case 0:if(me[1]==0)return ue(I,G);default:throw new Error("Major Version: Expected 3 or 4 saw "+_)}C!==512&&(re=I.slice(0,C),_s(re,28));var Te=I.slice(0,C);h(re,_);var Le=re.read_shift(4,"i");if(_===3&&Le!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Le);re.l+=4,Q=re.read_shift(4,"i"),re.l+=4,re.chk("00100000","Mini Stream Cutoff Size: "),se=re.read_shift(4,"i"),B=re.read_shift(4,"i"),ce=re.read_shift(4,"i"),H=re.read_shift(4,"i");for(var we=-1,Pe=0;Pe<109&&(we=re.read_shift(4,"i"),!(we<0));++Pe)oe[Pe]=we;var We=g(I,C);m(ce,H,We,C,oe);var ht=v(We,Q,oe,C);ht[Q].name="!Directory",B>0&&se!==z&&(ht[se].name="!MiniFAT"),ht[oe[0]].name="!FAT",ht.fat_addrs=oe,ht.ssz=C;var lt={},Tt=[],Ps=[],et=[];w(Q,ht,We,Tt,B,lt,Ps,se),x(Ps,et,Tt),Tt.shift();var yt={FileIndex:Ps,FullPaths:et};return G&&G.raw&&(yt.raw={header:Te,sectors:We}),yt}function p(I){if(I[I.l]==80&&I[I.l+1]==75)return[0,0];I.chk(L,"Header Signature: "),I.l+=16;var G=I.read_shift(2,"u");return[I.read_shift(2,"u"),G]}function h(I,G){var _=9;switch(I.l+=2,_=I.read_shift(2)){case 9:if(G!=3)throw new Error("Sector Shift: Expected 9 saw "+_);break;case 12:if(G!=4)throw new Error("Sector Shift: Expected 12 saw "+_);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+_)}I.chk("0600","Mini Sector Shift: "),I.chk("000000000000","Reserved: ")}function g(I,G){for(var _=Math.ceil(I.length/G)-1,C=[],B=1;B<_;++B)C[B-1]=I.slice(B*G,(B+1)*G);return C[_-1]=I.slice(_*G),C}function x(I,G,_){for(var C=0,B=0,H=0,Q=0,se=0,ce=_.length,oe=[],re=[];C<ce;++C)oe[C]=re[C]=C,G[C]=_[C];for(;se<re.length;++se)C=re[se],B=I[C].L,H=I[C].R,Q=I[C].C,oe[C]===C&&(B!==-1&&oe[B]!==B&&(oe[C]=oe[B]),H!==-1&&oe[H]!==H&&(oe[C]=oe[H])),Q!==-1&&(oe[Q]=C),B!==-1&&C!=oe[C]&&(oe[B]=oe[C],re.lastIndexOf(B)<se&&re.push(B)),H!==-1&&C!=oe[C]&&(oe[H]=oe[C],re.lastIndexOf(H)<se&&re.push(H));for(C=1;C<ce;++C)oe[C]===C&&(H!==-1&&oe[H]!==H?oe[C]=oe[H]:B!==-1&&oe[B]!==B&&(oe[C]=oe[B]));for(C=1;C<ce;++C)if(I[C].type!==0){if(se=C,se!=oe[se])do se=oe[se],G[C]=G[se]+"/"+G[C];while(se!==0&&oe[se]!==-1&&se!=oe[se]);oe[C]=-1}for(G[0]+="/",C=1;C<ce;++C)I[C].type!==2&&(G[C]+="/")}function f(I,G,_){for(var C=I.start,B=I.size,H=[],Q=C;_&&B>0&&Q>=0;)H.push(G.slice(Q*T,Q*T+T)),B-=T,Q=zn(_,Q*4);return H.length===0?us(0):ln(H).slice(0,I.size)}function m(I,G,_,C,B){var H=z;if(I===z){if(G!==0)throw new Error("DIFAT chain shorter than expected")}else if(I!==-1){var Q=_[I],se=(C>>>2)-1;if(!Q)return;for(var ce=0;ce<se&&(H=zn(Q,ce*4))!==z;++ce)B.push(H);m(zn(Q,C-4),G-1,_,C,B)}}function j(I,G,_,C,B){var H=[],Q=[];B||(B=[]);var se=C-1,ce=0,oe=0;for(ce=G;ce>=0;){B[ce]=!0,H[H.length]=ce,Q.push(I[ce]);var re=_[Math.floor(ce*4/C)];if(oe=ce*4&se,C<4+oe)throw new Error("FAT boundary crossed: "+ce+" 4 "+C);if(!I[re])break;ce=zn(I[re],oe)}return{nodes:H,data:ip([Q])}}function v(I,G,_,C){var B=I.length,H=[],Q=[],se=[],ce=[],oe=C-1,re=0,me=0,Te=0,Le=0;for(re=0;re<B;++re)if(se=[],Te=re+G,Te>=B&&(Te-=B),!Q[Te]){ce=[];var we=[];for(me=Te;me>=0;){we[me]=!0,Q[me]=!0,se[se.length]=me,ce.push(I[me]);var Pe=_[Math.floor(me*4/C)];if(Le=me*4&oe,C<4+Le)throw new Error("FAT boundary crossed: "+me+" 4 "+C);if(!I[Pe]||(me=zn(I[Pe],Le),we[me]))break}H[Te]={nodes:se,data:ip([ce])}}return H}function w(I,G,_,C,B,H,Q,se){for(var ce=0,oe=C.length?2:0,re=G[I].data,me=0,Te=0,Le;me<re.length;me+=128){var we=re.slice(me,me+128);_s(we,64),Te=we.read_shift(2),Le=Fm(we,0,Te-oe),C.push(Le);var Pe={name:Le,type:we.read_shift(1),color:we.read_shift(1),L:we.read_shift(4,"i"),R:we.read_shift(4,"i"),C:we.read_shift(4,"i"),clsid:we.read_shift(16),state:we.read_shift(4,"i"),start:0,size:0},We=we.read_shift(2)+we.read_shift(2)+we.read_shift(2)+we.read_shift(2);We!==0&&(Pe.ct=S(we,we.l-8));var ht=we.read_shift(2)+we.read_shift(2)+we.read_shift(2)+we.read_shift(2);ht!==0&&(Pe.mt=S(we,we.l-8)),Pe.start=we.read_shift(4,"i"),Pe.size=we.read_shift(4,"i"),Pe.size<0&&Pe.start<0&&(Pe.size=Pe.type=0,Pe.start=z,Pe.name=""),Pe.type===5?(ce=Pe.start,B>0&&ce!==z&&(G[ce].name="!StreamData")):Pe.size>=4096?(Pe.storage="fat",G[Pe.start]===void 0&&(G[Pe.start]=j(_,Pe.start,G.fat_addrs,G.ssz)),G[Pe.start].name=Pe.name,Pe.content=G[Pe.start].data.slice(0,Pe.size)):(Pe.storage="minifat",Pe.size<0?Pe.size=0:ce!==z&&Pe.start!==z&&G[ce]&&(Pe.content=f(Pe,G[ce].data,(G[se]||{}).data))),Pe.content&&_s(Pe.content,0),H[Le]=Pe,Q.push(Pe)}}function S(I,G){return new Date((pr(I,G+4)/1e7*Math.pow(2,32)+pr(I,G)/1e7-11644473600)*1e3)}function F(I,G){return d(),u(c.readFileSync(I),G)}function E(I,G){var _=G&&G.type;switch(_||gt&&Buffer.isBuffer(I)&&(_="buffer"),_||"base64"){case"file":return F(I,G);case"base64":return u(Qr(wr(I)),G);case"binary":return u(Qr(I),G)}return u(I,G)}function k(I,G){var _=G||{},C=_.root||"Root Entry";if(I.FullPaths||(I.FullPaths=[]),I.FileIndex||(I.FileIndex=[]),I.FullPaths.length!==I.FileIndex.length)throw new Error("inconsistent CFB structure");I.FullPaths.length===0&&(I.FullPaths[0]=C+"/",I.FileIndex[0]={name:C,type:5}),_.CLSID&&(I.FileIndex[0].clsid=_.CLSID),A(I)}function A(I){var G="Sh33tJ5";if(!bt.find(I,"/"+G)){var _=us(4);_[0]=55,_[1]=_[3]=50,_[2]=54,I.FileIndex.push({name:G,type:2,content:_,size:4,L:69,R:69,C:69}),I.FullPaths.push(I.FullPaths[0]+G),y(I)}}function y(I,G){k(I);for(var _=!1,C=!1,B=I.FullPaths.length-1;B>=0;--B){var H=I.FileIndex[B];switch(H.type){case 0:C?_=!0:(I.FileIndex.pop(),I.FullPaths.pop());break;case 1:case 2:case 5:C=!0,isNaN(H.R*H.L*H.C)&&(_=!0),H.R>-1&&H.L>-1&&H.R==H.L&&(_=!0);break;default:_=!0;break}}if(!(!_&&!G)){var Q=new Date(1987,1,19),se=0,ce=Object.create?Object.create(null):{},oe=[];for(B=0;B<I.FullPaths.length;++B)ce[I.FullPaths[B]]=!0,I.FileIndex[B].type!==0&&oe.push([I.FullPaths[B],I.FileIndex[B]]);for(B=0;B<oe.length;++B){var re=a(oe[B][0]);C=ce[re],C||(oe.push([re,{name:n(re).replace("/",""),type:1,clsid:V,ct:Q,mt:Q,content:null}]),ce[re]=!0)}for(oe.sort(function(Le,we){return r(Le[0],we[0])}),I.FullPaths=[],I.FileIndex=[],B=0;B<oe.length;++B)I.FullPaths[B]=oe[B][0],I.FileIndex[B]=oe[B][1];for(B=0;B<oe.length;++B){var me=I.FileIndex[B],Te=I.FullPaths[B];if(me.name=n(Te).replace("/",""),me.L=me.R=me.C=-(me.color=1),me.size=me.content?me.content.length:0,me.start=0,me.clsid=me.clsid||V,B===0)me.C=oe.length>1?1:-1,me.size=0,me.type=5;else if(Te.slice(-1)=="/"){for(se=B+1;se<oe.length&&a(I.FullPaths[se])!=Te;++se);for(me.C=se>=oe.length?-1:se,se=B+1;se<oe.length&&a(I.FullPaths[se])!=a(Te);++se);me.R=se>=oe.length?-1:se,me.type=1}else a(I.FullPaths[B+1]||"")==a(Te)&&(me.R=B+1),me.type=2}}}function N(I,G){var _=G||{};if(_.fileType=="mad")return Dt(I,_);switch(y(I),_.fileType){case"zip":return ve(I,_)}var C=function(Le){for(var we=0,Pe=0,We=0;We<Le.FileIndex.length;++We){var ht=Le.FileIndex[We];if(ht.content){var lt=ht.content.length;lt>0&&(lt<4096?we+=lt+63>>6:Pe+=lt+511>>9)}}for(var Tt=Le.FullPaths.length+3>>2,Ps=we+7>>3,et=we+127>>7,yt=Ps+Pe+Tt+et,wt=yt+127>>7,Ds=wt<=109?0:Math.ceil((wt-109)/127);yt+wt+Ds+127>>7>wt;)Ds=++wt<=109?0:Math.ceil((wt-109)/127);var Qe=[1,Ds,wt,et,Tt,Pe,we,0];return Le.FileIndex[0].size=we<<6,Qe[7]=(Le.FileIndex[0].start=Qe[0]+Qe[1]+Qe[2]+Qe[3]+Qe[4]+Qe[5])+(Qe[6]+7>>3),Qe}(I),B=us(C[7]<<9),H=0,Q=0;{for(H=0;H<8;++H)B.write_shift(1,O[H]);for(H=0;H<8;++H)B.write_shift(2,0);for(B.write_shift(2,62),B.write_shift(2,3),B.write_shift(2,65534),B.write_shift(2,9),B.write_shift(2,6),H=0;H<3;++H)B.write_shift(2,0);for(B.write_shift(4,0),B.write_shift(4,C[2]),B.write_shift(4,C[0]+C[1]+C[2]+C[3]-1),B.write_shift(4,0),B.write_shift(4,4096),B.write_shift(4,C[3]?C[0]+C[1]+C[2]-1:z),B.write_shift(4,C[3]),B.write_shift(-4,C[1]?C[0]-1:z),B.write_shift(4,C[1]),H=0;H<109;++H)B.write_shift(-4,H<C[2]?C[1]+H:-1)}if(C[1])for(Q=0;Q<C[1];++Q){for(;H<236+Q*127;++H)B.write_shift(-4,H<C[2]?C[1]+H:-1);B.write_shift(-4,Q===C[1]-1?z:Q+1)}var se=function(Le){for(Q+=Le;H<Q-1;++H)B.write_shift(-4,H+1);Le&&(++H,B.write_shift(-4,z))};for(Q=H=0,Q+=C[1];H<Q;++H)B.write_shift(-4,Z.DIFSECT);for(Q+=C[2];H<Q;++H)B.write_shift(-4,Z.FATSECT);se(C[3]),se(C[4]);for(var ce=0,oe=0,re=I.FileIndex[0];ce<I.FileIndex.length;++ce)re=I.FileIndex[ce],re.content&&(oe=re.content.length,!(oe<4096)&&(re.start=Q,se(oe+511>>9)));for(se(C[6]+7>>3);B.l&511;)B.write_shift(-4,Z.ENDOFCHAIN);for(Q=H=0,ce=0;ce<I.FileIndex.length;++ce)re=I.FileIndex[ce],re.content&&(oe=re.content.length,!(!oe||oe>=4096)&&(re.start=Q,se(oe+63>>6)));for(;B.l&511;)B.write_shift(-4,Z.ENDOFCHAIN);for(H=0;H<C[4]<<2;++H){var me=I.FullPaths[H];if(!me||me.length===0){for(ce=0;ce<17;++ce)B.write_shift(4,0);for(ce=0;ce<3;++ce)B.write_shift(4,-1);for(ce=0;ce<12;++ce)B.write_shift(4,0);continue}re=I.FileIndex[H],H===0&&(re.start=re.size?re.start-1:z);var Te=H===0&&_.root||re.name;if(oe=2*(Te.length+1),B.write_shift(64,Te,"utf16le"),B.write_shift(2,oe),B.write_shift(1,re.type),B.write_shift(1,re.color),B.write_shift(-4,re.L),B.write_shift(-4,re.R),B.write_shift(-4,re.C),re.clsid)B.write_shift(16,re.clsid,"hex");else for(ce=0;ce<4;++ce)B.write_shift(4,0);B.write_shift(4,re.state||0),B.write_shift(4,0),B.write_shift(4,0),B.write_shift(4,0),B.write_shift(4,0),B.write_shift(4,re.start),B.write_shift(4,re.size),B.write_shift(4,0)}for(H=1;H<I.FileIndex.length;++H)if(re=I.FileIndex[H],re.size>=4096)if(B.l=re.start+1<<9,gt&&Buffer.isBuffer(re.content))re.content.copy(B,B.l,0,re.size),B.l+=re.size+511&-512;else{for(ce=0;ce<re.size;++ce)B.write_shift(1,re.content[ce]);for(;ce&511;++ce)B.write_shift(1,0)}for(H=1;H<I.FileIndex.length;++H)if(re=I.FileIndex[H],re.size>0&&re.size<4096)if(gt&&Buffer.isBuffer(re.content))re.content.copy(B,B.l,0,re.size),B.l+=re.size+63&-64;else{for(ce=0;ce<re.size;++ce)B.write_shift(1,re.content[ce]);for(;ce&63;++ce)B.write_shift(1,0)}if(gt)B.l=B.length;else for(;B.l<B.length;)B.write_shift(1,0);return B}function R(I,G){var _=I.FullPaths.map(function(ce){return ce.toUpperCase()}),C=_.map(function(ce){var oe=ce.split("/");return oe[oe.length-(ce.slice(-1)=="/"?2:1)]}),B=!1;G.charCodeAt(0)===47?(B=!0,G=_[0].slice(0,-1)+G):B=G.indexOf("/")!==-1;var H=G.toUpperCase(),Q=B===!0?_.indexOf(H):C.indexOf(H);if(Q!==-1)return I.FileIndex[Q];var se=!H.match(Rl);for(H=H.replace(Zs,""),se&&(H=H.replace(Rl,"!")),Q=0;Q<_.length;++Q)if((se?_[Q].replace(Rl,"!"):_[Q]).replace(Zs,"")==H||(se?C[Q].replace(Rl,"!"):C[Q]).replace(Zs,"")==H)return I.FileIndex[Q];return null}var T=64,z=-2,L="d0cf11e0a1b11ae1",O=[208,207,17,224,161,177,26,225],V="00000000000000000000000000000000",Z={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:z,FREESECT:-1,HEADER_SIGNATURE:L,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:V,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function D(I,G,_){d();var C=N(I,_);c.writeFileSync(G,C)}function P(I){for(var G=new Array(I.length),_=0;_<I.length;++_)G[_]=String.fromCharCode(I[_]);return G.join("")}function W(I,G){var _=N(I,G);switch(G&&G.type||"buffer"){case"file":return d(),c.writeFileSync(G.filename,_),_;case"binary":return typeof _=="string"?_:P(_);case"base64":return zf(typeof _=="string"?_:P(_));case"buffer":if(gt)return Buffer.isBuffer(_)?_:hi(_);case"array":return typeof _=="string"?Qr(_):_}return _}var ee;function M(I){try{var G=I.InflateRaw,_=new G;if(_._processChunk(new Uint8Array([3,0]),_._finishFlushFlag),_.bytesRead)ee=I;else throw new Error("zlib does not expose bytesRead")}catch(C){console.error("cannot use native zlib: "+(C.message||C))}}function U(I,G){if(!ee)return Ur(I,G);var _=ee.InflateRaw,C=new _,B=C._processChunk(I.slice(I.l),C._finishFlushFlag);return I.l+=C.bytesRead,B}function q(I){return ee?ee.deflateRawSync(I):ze(I)}var Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],le=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function J(I){var G=(I<<1|I<<11)&139536|(I<<5|I<<15)&558144;return(G>>16|G>>8|G)&255}for(var ae=typeof Uint8Array<"u",he=ae?new Uint8Array(256):[],Fe=0;Fe<256;++Fe)he[Fe]=J(Fe);function X(I,G){var _=he[I&255];return G<=8?_>>>8-G:(_=_<<8|he[I>>8&255],G<=16?_>>>16-G:(_=_<<8|he[I>>16&255],_>>>24-G))}function Re(I,G){var _=G&7,C=G>>>3;return(I[C]|(_<=6?0:I[C+1]<<8))>>>_&3}function ne(I,G){var _=G&7,C=G>>>3;return(I[C]|(_<=5?0:I[C+1]<<8))>>>_&7}function _e(I,G){var _=G&7,C=G>>>3;return(I[C]|(_<=4?0:I[C+1]<<8))>>>_&15}function Se(I,G){var _=G&7,C=G>>>3;return(I[C]|(_<=3?0:I[C+1]<<8))>>>_&31}function be(I,G){var _=G&7,C=G>>>3;return(I[C]|(_<=1?0:I[C+1]<<8))>>>_&127}function Ie(I,G,_){var C=G&7,B=G>>>3,H=(1<<_)-1,Q=I[B]>>>C;return _<8-C||(Q|=I[B+1]<<8-C,_<16-C)||(Q|=I[B+2]<<16-C,_<24-C)||(Q|=I[B+3]<<24-C),Q&H}function Ze(I,G,_){var C=G&7,B=G>>>3;return C<=5?I[B]|=(_&7)<<C:(I[B]|=_<<C&255,I[B+1]=(_&7)>>8-C),G+3}function ge(I,G,_){var C=G&7,B=G>>>3;return _=(_&1)<<C,I[B]|=_,G+1}function ie(I,G,_){var C=G&7,B=G>>>3;return _<<=C,I[B]|=_&255,_>>>=8,I[B+1]=_,G+8}function Ue(I,G,_){var C=G&7,B=G>>>3;return _<<=C,I[B]|=_&255,_>>>=8,I[B+1]=_&255,I[B+2]=_>>>8,G+16}function St(I,G){var _=I.length,C=2*_>G?2*_:G+5,B=0;if(_>=G)return I;if(gt){var H=Wf(C);if(I.copy)I.copy(H);else for(;B<I.length;++B)H[B]=I[B];return H}else if(ae){var Q=new Uint8Array(C);if(Q.set)Q.set(I);else for(;B<_;++B)Q[B]=I[B];return Q}return I.length=C,I}function dt(I){for(var G=new Array(I),_=0;_<I;++_)G[_]=0;return G}function _t(I,G,_){var C=1,B=0,H=0,Q=0,se=0,ce=I.length,oe=ae?new Uint16Array(32):dt(32);for(H=0;H<32;++H)oe[H]=0;for(H=ce;H<_;++H)I[H]=0;ce=I.length;var re=ae?new Uint16Array(ce):dt(ce);for(H=0;H<ce;++H)oe[B=I[H]]++,C<B&&(C=B),re[H]=0;for(oe[0]=0,H=1;H<=C;++H)oe[H+16]=se=se+oe[H-1]<<1;for(H=0;H<ce;++H)se=I[H],se!=0&&(re[H]=oe[se+16]++);var me=0;for(H=0;H<ce;++H)if(me=I[H],me!=0)for(se=X(re[H],C)>>C-me,Q=(1<<C+4-me)-1;Q>=0;--Q)G[se|Q<<me]=me&15|H<<4;return C}var Ct=ae?new Uint16Array(512):dt(512),ut=ae?new Uint16Array(32):dt(32);if(!ae){for(var ot=0;ot<512;++ot)Ct[ot]=0;for(ot=0;ot<32;++ot)ut[ot]=0}(function(){for(var I=[],G=0;G<32;G++)I.push(5);_t(I,ut,32);var _=[];for(G=0;G<=143;G++)_.push(8);for(;G<=255;G++)_.push(9);for(;G<=279;G++)_.push(7);for(;G<=287;G++)_.push(8);_t(_,Ct,288)})();var ye=function(){for(var G=ae?new Uint8Array(32768):[],_=0,C=0;_<le.length-1;++_)for(;C<le[_+1];++C)G[C]=_;for(;C<32768;++C)G[C]=29;var B=ae?new Uint8Array(259):[];for(_=0,C=0;_<K.length-1;++_)for(;C<K[_+1];++C)B[C]=_;function H(se,ce){for(var oe=0;oe<se.length;){var re=Math.min(65535,se.length-oe),me=oe+re==se.length;for(ce.write_shift(1,+me),ce.write_shift(2,re),ce.write_shift(2,~re&65535);re-- >0;)ce[ce.l++]=se[oe++]}return ce.l}function Q(se,ce){for(var oe=0,re=0,me=ae?new Uint16Array(32768):[];re<se.length;){var Te=Math.min(65535,se.length-re);if(Te<10){for(oe=Ze(ce,oe,+(re+Te==se.length)),oe&7&&(oe+=8-(oe&7)),ce.l=oe/8|0,ce.write_shift(2,Te),ce.write_shift(2,~Te&65535);Te-- >0;)ce[ce.l++]=se[re++];oe=ce.l*8;continue}oe=Ze(ce,oe,+(re+Te==se.length)+2);for(var Le=0;Te-- >0;){var we=se[re];Le=(Le<<5^we)&32767;var Pe=-1,We=0;if((Pe=me[Le])&&(Pe|=re&-32768,Pe>re&&(Pe-=32768),Pe<re))for(;se[Pe+We]==se[re+We]&&We<250;)++We;if(We>2){we=B[We],we<=22?oe=ie(ce,oe,he[we+1]>>1)-1:(ie(ce,oe,3),oe+=5,ie(ce,oe,he[we-23]>>5),oe+=3);var ht=we<8?0:we-4>>2;ht>0&&(Ue(ce,oe,We-K[we]),oe+=ht),we=G[re-Pe],oe=ie(ce,oe,he[we]>>3),oe-=3;var lt=we<4?0:we-2>>1;lt>0&&(Ue(ce,oe,re-Pe-le[we]),oe+=lt);for(var Tt=0;Tt<We;++Tt)me[Le]=re&32767,Le=(Le<<5^se[re])&32767,++re;Te-=We-1}else we<=143?we=we+48:oe=ge(ce,oe,1),oe=ie(ce,oe,he[we]),me[Le]=re&32767,++re}oe=ie(ce,oe,0)-1}return ce.l=(oe+7)/8|0,ce.l}return function(ce,oe){return ce.length<8?H(ce,oe):Q(ce,oe)}}();function ze(I){var G=us(50+Math.floor(I.length*1.1)),_=ye(I,G);return G.slice(0,_)}var Ye=ae?new Uint16Array(32768):dt(32768),jt=ae?new Uint16Array(32768):dt(32768),it=ae?new Uint16Array(128):dt(128),Xt=1,ia=1;function Sa(I,G){var _=Se(I,G)+257;G+=5;var C=Se(I,G)+1;G+=5;var B=_e(I,G)+4;G+=4;for(var H=0,Q=ae?new Uint8Array(19):dt(19),se=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ce=1,oe=ae?new Uint8Array(8):dt(8),re=ae?new Uint8Array(8):dt(8),me=Q.length,Te=0;Te<B;++Te)Q[Y[Te]]=H=ne(I,G),ce<H&&(ce=H),oe[H]++,G+=3;var Le=0;for(oe[0]=0,Te=1;Te<=ce;++Te)re[Te]=Le=Le+oe[Te-1]<<1;for(Te=0;Te<me;++Te)(Le=Q[Te])!=0&&(se[Te]=re[Le]++);var we=0;for(Te=0;Te<me;++Te)if(we=Q[Te],we!=0){Le=he[se[Te]]>>8-we;for(var Pe=(1<<7-we)-1;Pe>=0;--Pe)it[Le|Pe<<we]=we&7|Te<<3}var We=[];for(ce=1;We.length<_+C;)switch(Le=it[be(I,G)],G+=Le&7,Le>>>=3){case 16:for(H=3+Re(I,G),G+=2,Le=We[We.length-1];H-- >0;)We.push(Le);break;case 17:for(H=3+ne(I,G),G+=3;H-- >0;)We.push(0);break;case 18:for(H=11+be(I,G),G+=7;H-- >0;)We.push(0);break;default:We.push(Le),ce<Le&&(ce=Le);break}var ht=We.slice(0,_),lt=We.slice(_);for(Te=_;Te<286;++Te)ht[Te]=0;for(Te=C;Te<30;++Te)lt[Te]=0;return Xt=_t(ht,Ye,286),ia=_t(lt,jt,30),G}function Ka(I,G){if(I[0]==3&&!(I[1]&3))return[_n(G),2];for(var _=0,C=0,B=Wf(G||1<<18),H=0,Q=B.length>>>0,se=0,ce=0;!(C&1);){if(C=ne(I,_),_+=3,C>>>1)C>>1==1?(se=9,ce=5):(_=Sa(I,_),se=Xt,ce=ia);else{_&7&&(_+=8-(_&7));var oe=I[_>>>3]|I[(_>>>3)+1]<<8;if(_+=32,oe>0)for(!G&&Q<H+oe&&(B=St(B,H+oe),Q=B.length);oe-- >0;)B[H++]=I[_>>>3],_+=8;continue}for(;;){!G&&Q<H+32767&&(B=St(B,H+32767),Q=B.length);var re=Ie(I,_,se),me=C>>>1==1?Ct[re]:Ye[re];if(_+=me&15,me>>>=4,!(me>>>8&255))B[H++]=me;else{if(me==256)break;me-=257;var Te=me<8?0:me-4>>2;Te>5&&(Te=0);var Le=H+K[me];Te>0&&(Le+=Ie(I,_,Te),_+=Te),re=Ie(I,_,ce),me=C>>>1==1?ut[re]:jt[re],_+=me&15,me>>>=4;var we=me<4?0:me-2>>1,Pe=le[me];for(we>0&&(Pe+=Ie(I,_,we),_+=we),!G&&Q<Le&&(B=St(B,Le+100),Q=B.length);H<Le;)B[H]=B[H-Pe],++H}}}return G?[B,_+7>>>3]:[B.slice(0,H),_+7>>>3]}function Ur(I,G){var _=I.slice(I.l||0),C=Ka(_,G);return I.l+=C[1],C[0]}function xe(I,G){if(I)typeof console<"u"&&console.error(G);else throw new Error(G)}function ue(I,G){var _=I;_s(_,0);var C=[],B=[],H={FileIndex:C,FullPaths:B};k(H,{root:G.root});for(var Q=_.length-4;(_[Q]!=80||_[Q+1]!=75||_[Q+2]!=5||_[Q+3]!=6)&&Q>=0;)--Q;_.l=Q+4,_.l+=4;var se=_.read_shift(2);_.l+=6;var ce=_.read_shift(4);for(_.l=ce,Q=0;Q<se;++Q){_.l+=20;var oe=_.read_shift(4),re=_.read_shift(4),me=_.read_shift(2),Te=_.read_shift(2),Le=_.read_shift(2);_.l+=8;var we=_.read_shift(4),Pe=o(_.slice(_.l+me,_.l+me+Te));_.l+=me+Te+Le;var We=_.l;_.l=we+4,je(_,oe,re,H,Pe),_.l=We}return H}function je(I,G,_,C,B){I.l+=2;var H=I.read_shift(2),Q=I.read_shift(2),se=l(I);if(H&8257)throw new Error("Unsupported ZIP encryption");for(var ce=I.read_shift(4),oe=I.read_shift(4),re=I.read_shift(4),me=I.read_shift(2),Te=I.read_shift(2),Le="",we=0;we<me;++we)Le+=String.fromCharCode(I[I.l++]);if(Te){var Pe=o(I.slice(I.l,I.l+Te));(Pe[21589]||{}).mt&&(se=Pe[21589].mt),((B||{})[21589]||{}).mt&&(se=B[21589].mt)}I.l+=Te;var We=I.slice(I.l,I.l+oe);switch(Q){case 8:We=U(I,re);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Q)}var ht=!1;H&8&&(ce=I.read_shift(4),ce==134695760&&(ce=I.read_shift(4),ht=!0),oe=I.read_shift(4),re=I.read_shift(4)),oe!=G&&xe(ht,"Bad compressed size: "+G+" != "+oe),re!=_&&xe(ht,"Bad uncompressed size: "+_+" != "+re),de(C,Le,We,{unsafe:!0,mt:se})}function ve(I,G){var _=G||{},C=[],B=[],H=us(1),Q=_.compression?8:0,se=0,ce=0,oe=0,re=0,me=0,Te=I.FullPaths[0],Le=Te,we=I.FileIndex[0],Pe=[],We=0;for(ce=1;ce<I.FullPaths.length;++ce)if(Le=I.FullPaths[ce].slice(Te.length),we=I.FileIndex[ce],!(!we.size||!we.content||Le=="Sh33tJ5")){var ht=re,lt=us(Le.length);for(oe=0;oe<Le.length;++oe)lt.write_shift(1,Le.charCodeAt(oe)&127);lt=lt.slice(0,lt.l),Pe[me]=GS.buf(we.content,0);var Tt=we.content;Q==8&&(Tt=q(Tt)),H=us(30),H.write_shift(4,67324752),H.write_shift(2,20),H.write_shift(2,se),H.write_shift(2,Q),we.mt?i(H,we.mt):H.write_shift(4,0),H.write_shift(-4,Pe[me]),H.write_shift(4,Tt.length),H.write_shift(4,we.content.length),H.write_shift(2,lt.length),H.write_shift(2,0),re+=H.length,C.push(H),re+=lt.length,C.push(lt),re+=Tt.length,C.push(Tt),H=us(46),H.write_shift(4,33639248),H.write_shift(2,0),H.write_shift(2,20),H.write_shift(2,se),H.write_shift(2,Q),H.write_shift(4,0),H.write_shift(-4,Pe[me]),H.write_shift(4,Tt.length),H.write_shift(4,we.content.length),H.write_shift(2,lt.length),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(4,0),H.write_shift(4,ht),We+=H.l,B.push(H),We+=lt.length,B.push(lt),++me}return H=us(22),H.write_shift(4,101010256),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(2,me),H.write_shift(2,me),H.write_shift(4,We),H.write_shift(4,re),H.write_shift(2,0),ln([ln(C),ln(B),H])}var Oe={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function De(I,G){if(I.ctype)return I.ctype;var _=I.name||"",C=_.match(/\.([^\.]+)$/);return C&&Oe[C[1]]||G&&(C=(_=G).match(/[\.\\]([^\.\\])+$/),C&&Oe[C[1]])?Oe[C[1]]:"application/octet-stream"}function Be(I){for(var G=zf(I),_=[],C=0;C<G.length;C+=76)_.push(G.slice(C,C+76));return _.join(`\r
`)+`\r
`}function Ne(I){var G=I.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(oe){var re=oe.charCodeAt(0).toString(16).toUpperCase();return"="+(re.length==1?"0"+re:re)});G=G.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),G.charAt(0)==`
`&&(G="=0D"+G.slice(1)),G=G.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var _=[],C=G.split(`\r
`),B=0;B<C.length;++B){var H=C[B];if(H.length==0){_.push("");continue}for(var Q=0;Q<H.length;){var se=76,ce=H.slice(Q,Q+se);ce.charAt(se-1)=="="?se--:ce.charAt(se-2)=="="?se-=2:ce.charAt(se-3)=="="&&(se-=3),ce=H.slice(Q,Q+se),Q+=se,Q<H.length&&(ce+="="),_.push(ce)}}return _.join(`\r
`)}function Ce(I){for(var G=[],_=0;_<I.length;++_){for(var C=I[_];_<=I.length&&C.charAt(C.length-1)=="=";)C=C.slice(0,C.length-1)+I[++_];G.push(C)}for(var B=0;B<G.length;++B)G[B]=G[B].replace(/[=][0-9A-Fa-f]{2}/g,function(H){return String.fromCharCode(parseInt(H.slice(1),16))});return Qr(G.join(`\r
`))}function Je(I,G,_){for(var C="",B="",H="",Q,se=0;se<10;++se){var ce=G[se];if(!ce||ce.match(/^\s*$/))break;var oe=ce.match(/^(.*?):\s*([^\s].*)$/);if(oe)switch(oe[1].toLowerCase()){case"content-location":C=oe[2].trim();break;case"content-type":H=oe[2].trim();break;case"content-transfer-encoding":B=oe[2].trim();break}}switch(++se,B.toLowerCase()){case"base64":Q=Qr(wr(G.slice(se).join("")));break;case"quoted-printable":Q=Ce(G.slice(se));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+B)}var re=de(I,C.slice(_.length),Q,{unsafe:!0});H&&(re.ctype=H)}function Ge(I,G){if(P(I.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var _=G&&G.root||"",C=(gt&&Buffer.isBuffer(I)?I.toString("binary"):P(I)).split(`\r
`),B=0,H="";for(B=0;B<C.length;++B)if(H=C[B],!!/^Content-Location:/i.test(H)&&(H=H.slice(H.indexOf("file")),_||(_=H.slice(0,H.lastIndexOf("/")+1)),H.slice(0,_.length)!=_))for(;_.length>0&&(_=_.slice(0,_.length-1),_=_.slice(0,_.lastIndexOf("/")+1),H.slice(0,_.length)!=_););var Q=(C[1]||"").match(/boundary="(.*?)"/);if(!Q)throw new Error("MAD cannot find boundary");var se="--"+(Q[1]||""),ce=[],oe=[],re={FileIndex:ce,FullPaths:oe};k(re);var me,Te=0;for(B=0;B<C.length;++B){var Le=C[B];Le!==se&&Le!==se+"--"||(Te++&&Je(re,C.slice(me,B),_),me=B)}return re}function Dt(I,G){var _=G||{},C=_.boundary||"SheetJS";C="------="+C;for(var B=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+C.slice(2)+'"',"","",""],H=I.FullPaths[0],Q=H,se=I.FileIndex[0],ce=1;ce<I.FullPaths.length;++ce)if(Q=I.FullPaths[ce].slice(H.length),se=I.FileIndex[ce],!(!se.size||!se.content||Q=="Sh33tJ5")){Q=Q.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(We){return"_x"+We.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(We){return"_u"+We.charCodeAt(0).toString(16)+"_"});for(var oe=se.content,re=gt&&Buffer.isBuffer(oe)?oe.toString("binary"):P(oe),me=0,Te=Math.min(1024,re.length),Le=0,we=0;we<=Te;++we)(Le=re.charCodeAt(we))>=32&&Le<128&&++me;var Pe=me>=Te*4/5;B.push(C),B.push("Content-Location: "+(_.root||"file:///C:/SheetJS/")+Q),B.push("Content-Transfer-Encoding: "+(Pe?"quoted-printable":"base64")),B.push("Content-Type: "+De(se,Q)),B.push(""),B.push(Pe?Ne(re):Be(re))}return B.push(C+`--\r
`),B.join(`\r
`)}function te(I){var G={};return k(G,I),G}function de(I,G,_,C){var B=C&&C.unsafe;B||k(I);var H=!B&&bt.find(I,G);if(!H){var Q=I.FullPaths[0];G.slice(0,Q.length)==Q?Q=G:(Q.slice(-1)!="/"&&(Q+="/"),Q=(Q+G).replace("//","/")),H={name:n(G),type:2},I.FileIndex.push(H),I.FullPaths.push(Q),B||bt.utils.cfb_gc(I)}return H.content=_,H.size=_?_.length:0,C&&(C.CLSID&&(H.clsid=C.CLSID),C.mt&&(H.mt=C.mt),C.ct&&(H.ct=C.ct)),H}function fe(I,G){k(I);var _=bt.find(I,G);if(_){for(var C=0;C<I.FileIndex.length;++C)if(I.FileIndex[C]==_)return I.FileIndex.splice(C,1),I.FullPaths.splice(C,1),!0}return!1}function pe(I,G,_){k(I);var C=bt.find(I,G);if(C){for(var B=0;B<I.FileIndex.length;++B)if(I.FileIndex[B]==C)return I.FileIndex[B].name=n(_),I.FullPaths[B]=_,!0}return!1}function ke(I){y(I,!0)}return s.find=R,s.read=E,s.parse=u,s.write=W,s.writeFile=D,s.utils={cfb_new:te,cfb_add:de,cfb_del:fe,cfb_mov:pe,cfb_gc:ke,ReadShift:ql,CheckField:Rv,prep_blob:_s,bconcat:ln,use_zlib:M,_deflateRaw:ze,_inflateRaw:Ur,consts:Z},s}();function qS(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var s=File(t);s.open("r"),s.encoding="binary";var r=s.read();return s.close(),r}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+t)}function ba(t){for(var s=Object.keys(t),r=[],a=0;a<s.length;++a)Object.prototype.hasOwnProperty.call(t,s[a])&&r.push(s[a]);return r}function _m(t){for(var s=[],r=ba(t),a=0;a!==r.length;++a)s[t[r[a]]]=r[a];return s}var bd=new Date(1899,11,30,0,0,0);function er(t,s){var r=t.getTime(),a=bd.getTime()+(t.getTimezoneOffset()-bd.getTimezoneOffset())*6e4;return(r-a)/(24*60*60*1e3)}var mv=new Date,JS=bd.getTime()+(mv.getTimezoneOffset()-bd.getTimezoneOffset())*6e4,Xf=mv.getTimezoneOffset();function Kd(t){var s=new Date;return s.setTime(t*24*60*60*1e3+JS),s.getTimezoneOffset()!==Xf&&s.setTime(s.getTime()+(s.getTimezoneOffset()-Xf)*6e4),s}function KS(t){var s=0,r=0,a=!1,n=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!n)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var i=1;i!=n.length;++i)if(n[i]){switch(r=1,i>3&&(a=!0),n[i].slice(n[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+n[i].slice(n[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(a)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}s+=r*parseInt(n[i],10)}return s}var Qf=new Date("2017-02-19T19:06:09.000Z"),hv=isNaN(Qf.getFullYear())?new Date("2/19/17"):Qf,YS=hv.getFullYear()==2017;function ks(t,s){var r=new Date(t);if(YS)return s>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):s<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(hv.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return t.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var n=t.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);return t.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function ci(t,s){if(gt&&Buffer.isBuffer(t)){if(s){if(t[0]==255&&t[1]==254)return Ol(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Ol(ev(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(s){if(t[0]==255&&t[1]==254)return Ol(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Ol(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var a=[],n=0;n!=t.length;++n)a.push(String.fromCharCode(t[n]));return a.join("")}function Es(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=Es(t[r]));return s}function Jt(t,s){for(var r="";r.length<s;)r+=t;return r}function aa(t){var s=Number(t);if(!isNaN(s))return isFinite(s)?s:NaN;if(!/\d/.test(t))return s;var r=1,a=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(s=Number(a))||(a=a.replace(/[(](.*)[)]/,function(n,i){return r=-r,i}),!isNaN(s=Number(a)))?s/r:s}var XS=["january","february","march","april","may","june","july","august","september","october","november","december"];function sl(t){var s=new Date(t),r=new Date(NaN),a=s.getYear(),n=s.getMonth(),i=s.getDate();if(isNaN(i))return r;var l=t.toLowerCase();if(l.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(l=l.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),l.length>3&&XS.indexOf(l)==-1)return r}else if(l.match(/[a-z]/))return r;return a<0||a>8099?r:(n>0||i>1)&&a!=101?s:t.match(/[^-0-9:,\/\\]/)?r:s}var QS=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,a,n){if(t||typeof a=="string")return r.split(a);for(var i=r.split(a),l=[i[0]],o=1;o<i.length;++o)l.push(n),l.push(i[o]);return l}}();function fv(t){return t?t.content&&t.type?ci(t.content,!0):t.data?Dl(t.data):t.asNodeBuffer&&gt?Dl(t.asNodeBuffer().toString("binary")):t.asBinary?Dl(t.asBinary()):t._data&&t._data.getContent?Dl(ci(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function pv(t){if(!t)return null;if(t.data)return $f(t.data);if(t.asNodeBuffer&&gt)return t.asNodeBuffer();if(t._data&&t._data.getContent){var s=t._data.getContent();return typeof s=="string"?$f(s):Array.prototype.slice.call(s)}return t.content&&t.type?t.content:null}function ZS(t){return t&&t.name.slice(-4)===".bin"?pv(t):fv(t)}function Er(t,s){for(var r=t.FullPaths||ba(t.files),a=s.toLowerCase().replace(/[\/]/g,"\\"),n=a.replace(/\\/g,"/"),i=0;i<r.length;++i){var l=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==l||n==l)return t.files?t.files[r[i]]:t.FileIndex[i]}return null}function Tm(t,s){var r=Er(t,s);if(r==null)throw new Error("Cannot find file "+s+" in zip");return r}function ns(t,s,r){if(!r)return ZS(Tm(t,s));if(!s)return null;try{return ns(t,s)}catch{return null}}function gr(t,s,r){if(!r)return fv(Tm(t,s));if(!s)return null;try{return gr(t,s)}catch{return null}}function eC(t,s,r){return pv(Tm(t,s))}function Zf(t){for(var s=t.FullPaths||ba(t.files),r=[],a=0;a<s.length;++a)s[a].slice(-1)!="/"&&r.push(s[a].replace(/^Root Entry[\/]/,""));return r.sort()}function tC(t,s,r){if(t.FullPaths){if(typeof r=="string"){var a;return gt?a=hi(r):a=vS(r),bt.utils.cfb_add(t,s,a)}bt.utils.cfb_add(t,s,r)}else t.file(s,r)}function gv(t,s){switch(s.type){case"base64":return bt.read(t,{type:"base64"});case"binary":return bt.read(t,{type:"binary"});case"buffer":case"array":return bt.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+s.type)}function Ll(t,s){if(t.charAt(0)=="/")return t.slice(1);var r=s.split("/");s.slice(-1)!="/"&&r.pop();for(var a=t.split("/");a.length!==0;){var n=a.shift();n===".."?r.pop():n!=="."&&r.push(n)}return r.join("/")}var yv=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,sC=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,ep=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,rC=/<[^>]*>/g,Gs=yv.match(ep)?ep:rC,aC=/<\w*:/,nC=/<(\/?)\w+:/;function Ke(t,s,r){for(var a={},n=0,i=0;n!==t.length&&!((i=t.charCodeAt(n))===32||i===10||i===13);++n);if(s||(a[0]=t.slice(0,n)),n===t.length)return a;var l=t.match(sC),o=0,c="",d=0,u="",p="",h=1;if(l)for(d=0;d!=l.length;++d){for(p=l[d],i=0;i!=p.length&&p.charCodeAt(i)!==61;++i);for(u=p.slice(0,i).trim();p.charCodeAt(i+1)==32;)++i;for(h=(n=p.charCodeAt(i+1))==34||n==39?1:0,c=p.slice(i+1+h,p.length-h),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),a[u]=c,a[u.toLowerCase()]=c;else{var g=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(a[g]&&u.slice(o-3,o)=="ext")continue;a[g]=c,a[g.toLowerCase()]=c}}return a}function Na(t){return t.replace(nC,"<$1")}var bv={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},iC=_m(bv),kt=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,s=/_x([\da-fA-F]{4})_/ig;return function r(a){var n=a+"",i=n.indexOf("<![CDATA[");if(i==-1)return n.replace(t,function(o,c){return bv[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(s,function(o,c){return String.fromCharCode(parseInt(c,16))});var l=n.indexOf("]]>");return r(n.slice(0,i))+n.slice(i+9,l)+r(n.slice(l+3))}}(),lC=/[&<>'"]/g,oC=/[\u0000-\u001f]/g;function Em(t){var s=t+"";return s.replace(lC,function(r){return iC[r]}).replace(/\n/g,"<br/>").replace(oC,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var tp=function(){var t=/&#(\d+);/g;function s(r,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(t,s)}}();function $t(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function R0(t){for(var s="",r=0,a=0,n=0,i=0,l=0,o=0;r<t.length;){if(a=t.charCodeAt(r++),a<128){s+=String.fromCharCode(a);continue}if(n=t.charCodeAt(r++),a>191&&a<224){l=(a&31)<<6,l|=n&63,s+=String.fromCharCode(l);continue}if(i=t.charCodeAt(r++),a<240){s+=String.fromCharCode((a&15)<<12|(n&63)<<6|i&63);continue}l=t.charCodeAt(r++),o=((a&7)<<18|(n&63)<<12|(i&63)<<6|l&63)-65536,s+=String.fromCharCode(55296+(o>>>10&1023)),s+=String.fromCharCode(56320+(o&1023))}return s}function sp(t){var s=_n(2*t.length),r,a,n=1,i=0,l=0,o;for(a=0;a<t.length;a+=n)n=1,(o=t.charCodeAt(a))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(a+1)&63),n=2):o<240?(r=(o&15)*4096+(t.charCodeAt(a+1)&63)*64+(t.charCodeAt(a+2)&63),n=3):(n=4,r=(o&7)*262144+(t.charCodeAt(a+1)&63)*4096+(t.charCodeAt(a+2)&63)*64+(t.charCodeAt(a+3)&63),r-=65536,l=55296+(r>>>10&1023),r=56320+(r&1023)),l!==0&&(s[i++]=l&255,s[i++]=l>>>8,l=0),s[i++]=r%256,s[i++]=r>>>8;return s.slice(0,i).toString("ucs2")}function rp(t){return hi(t,"binary").toString("utf8")}var pc="foo bar baz",Lt=gt&&(rp(pc)==R0(pc)&&rp||sp(pc)==R0(pc)&&sp)||R0,Ol=gt?function(t){return hi(t,"utf8").toString("binary")}:function(t){for(var s=[],r=0,a=0,n=0;r<t.length;)switch(a=t.charCodeAt(r++),!0){case a<128:s.push(String.fromCharCode(a));break;case a<2048:s.push(String.fromCharCode(192+(a>>6))),s.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,n=t.charCodeAt(r++)-56320+(a<<10),s.push(String.fromCharCode(240+(n>>18&7))),s.push(String.fromCharCode(144+(n>>12&63))),s.push(String.fromCharCode(128+(n>>6&63))),s.push(String.fromCharCode(128+(n&63)));break;default:s.push(String.fromCharCode(224+(a>>12))),s.push(String.fromCharCode(128+(a>>6&63))),s.push(String.fromCharCode(128+(a&63)))}return s.join("")},Eo=function(){var t={};return function(r,a){var n=r+"|"+(a||"");return t[n]?t[n]:t[n]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",a||"")}}(),vv=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(s){return[new RegExp("&"+s[0]+";","ig"),s[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),n=0;n<t.length;++n)a=a.replace(t[n][0],t[n][1]);return a}}(),cC=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),dC=/<\/?(?:vt:)?variant>/g,uC=/<(?:vt:)([^>]*)>([\s\S]*)</;function ap(t,s){var r=Ke(t),a=t.match(cC(r.baseType))||[],n=[];if(a.length!=r.size){if(s.WTF)throw new Error("unexpected vector length "+a.length+" != "+r.size);return n}return a.forEach(function(i){var l=i.replace(dC,"").match(uC);l&&n.push({v:Lt(l[2]),t:l[1]})}),n}var xC=/(^\s|\s$|\n)/;function mC(t){return ba(t).map(function(s){return" "+s+'="'+t[s]+'"'}).join("")}function hC(t,s,r){return"<"+t+(r!=null?mC(r):"")+(s!=null?(s.match(xC)?' xml:space="preserve"':"")+">"+s+"</"+t:"/")+">"}function Am(t){if(gt&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Lt(fi(km(t)));throw new Error("Bad input format: expected Buffer or string")}var Ao=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,fC={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},pC=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function gC(t,s){for(var r=1-2*(t[s+7]>>>7),a=((t[s+7]&127)<<4)+(t[s+6]>>>4&15),n=t[s+6]&15,i=5;i>=0;--i)n=n*256+t[s+i];return a==2047?n==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,n+=Math.pow(2,52)),r*Math.pow(2,a-52)*n)}function yC(t,s,r){var a=(s<0||1/s==-1/0?1:0)<<7,n=0,i=0,l=a?-s:s;isFinite(l)?l==0?n=i=0:(n=Math.floor(Math.log(l)/Math.LN2),i=l*Math.pow(2,52-n),n<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?n=-1022:(i-=Math.pow(2,52),n+=1023)):(n=2047,i=isNaN(s)?26985:0);for(var o=0;o<=5;++o,i/=256)t[r+o]=i&255;t[r+6]=(n&15)<<4|i&15,t[r+7]=n>>4|a}var np=function(t){for(var s=[],r=10240,a=0;a<t[0].length;++a)if(t[0][a])for(var n=0,i=t[0][a].length;n<i;n+=r)s.push.apply(s,t[0][a].slice(n,n+r));return s},ip=gt?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(s){return Buffer.isBuffer(s)?s:hi(s)})):np(t)}:np,lp=function(t,s,r){for(var a=[],n=s;n<r;n+=2)a.push(String.fromCharCode(Da(t,n)));return a.join("").replace(Zs,"")},Fm=gt?function(t,s,r){return Buffer.isBuffer(t)?t.toString("utf16le",s,r).replace(Zs,""):lp(t,s,r)}:lp,op=function(t,s,r){for(var a=[],n=s;n<s+r;++n)a.push(("0"+t[n].toString(16)).slice(-2));return a.join("")},jv=gt?function(t,s,r){return Buffer.isBuffer(t)?t.toString("hex",s,s+r):op(t,s,r)}:op,cp=function(t,s,r){for(var a=[],n=s;n<r;n++)a.push(String.fromCharCode(Ni(t,n)));return a.join("")},zo=gt?function(s,r,a){return Buffer.isBuffer(s)?s.toString("utf8",r,a):cp(s,r,a)}:cp,wv=function(t,s){var r=pr(t,s);return r>0?zo(t,s+4,s+4+r-1):""},Nv=wv,kv=function(t,s){var r=pr(t,s);return r>0?zo(t,s+4,s+4+r-1):""},Sv=kv,Cv=function(t,s){var r=2*pr(t,s);return r>0?zo(t,s+4,s+4+r-1):""},_v=Cv,Tv=function(s,r){var a=pr(s,r);return a>0?Fm(s,r+4,r+4+a):""},Ev=Tv,Av=function(t,s){var r=pr(t,s);return r>0?zo(t,s+4,s+4+r):""},Fv=Av,Pv=function(t,s){return gC(t,s)},vd=Pv,Dv=function(s){return Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array};gt&&(Nv=function(s,r){if(!Buffer.isBuffer(s))return wv(s,r);var a=s.readUInt32LE(r);return a>0?s.toString("utf8",r+4,r+4+a-1):""},Sv=function(s,r){if(!Buffer.isBuffer(s))return kv(s,r);var a=s.readUInt32LE(r);return a>0?s.toString("utf8",r+4,r+4+a-1):""},_v=function(s,r){if(!Buffer.isBuffer(s))return Cv(s,r);var a=2*s.readUInt32LE(r);return s.toString("utf16le",r+4,r+4+a-1)},Ev=function(s,r){if(!Buffer.isBuffer(s))return Tv(s,r);var a=s.readUInt32LE(r);return s.toString("utf16le",r+4,r+4+a)},Fv=function(s,r){if(!Buffer.isBuffer(s))return Av(s,r);var a=s.readUInt32LE(r);return s.toString("utf8",r+4,r+4+a)},vd=function(s,r){return Buffer.isBuffer(s)?s.readDoubleLE(r):Pv(s,r)},Dv=function(s){return Buffer.isBuffer(s)||Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array});var Ni=function(t,s){return t[s]},Da=function(t,s){return t[s+1]*256+t[s]},bC=function(t,s){var r=t[s+1]*256+t[s];return r<32768?r:(65535-r+1)*-1},pr=function(t,s){return t[s+3]*(1<<24)+(t[s+2]<<16)+(t[s+1]<<8)+t[s]},zn=function(t,s){return t[s+3]<<24|t[s+2]<<16|t[s+1]<<8|t[s]},vC=function(t,s){return t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3]};function ql(t,s){var r="",a,n,i=[],l,o,c,d;switch(s){case"dbcs":if(d=this.l,gt&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(Da(this,d)),d+=2;t*=2;break;case"utf8":r=zo(this,this.l,this.l+t);break;case"utf16le":t*=2,r=Fm(this,this.l,this.l+t);break;case"wstr":return ql.call(this,t,"dbcs");case"lpstr-ansi":r=Nv(this,this.l),t=4+pr(this,this.l);break;case"lpstr-cp":r=Sv(this,this.l),t=4+pr(this,this.l);break;case"lpwstr":r=_v(this,this.l),t=4+2*pr(this,this.l);break;case"lpp4":t=4+pr(this,this.l),r=Ev(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+pr(this,this.l),r=Fv(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(l=Ni(this,this.l+t++))!==0;)i.push(fc(l));r=i.join("");break;case"_wstr":for(t=0,r="";(l=Da(this,this.l+t))!==0;)i.push(fc(l)),t+=2;t+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return l=Ni(this,d),this.l=d+1,o=ql.call(this,t-c,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(fc(Da(this,d))),d+=2}r=i.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return l=Ni(this,d),this.l=d+1,o=ql.call(this,t-c,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(fc(Ni(this,d))),d+=1}r=i.join("");break;default:switch(t){case 1:return a=Ni(this,this.l),this.l++,a;case 2:return a=(s==="i"?bC:Da)(this,this.l),this.l+=2,a;case 4:case-4:return s==="i"||!(this[this.l+3]&128)?(a=(t>0?zn:vC)(this,this.l),this.l+=4,a):(n=pr(this,this.l),this.l+=4,n);case 8:case-8:if(s==="f")return t==8?n=vd(this,this.l):n=vd([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;t=8;case 16:r=jv(this,this.l,t);break}}return this.l+=t,r}var jC=function(t,s,r){t[r]=s&255,t[r+1]=s>>>8&255,t[r+2]=s>>>16&255,t[r+3]=s>>>24&255},wC=function(t,s,r){t[r]=s&255,t[r+1]=s>>8&255,t[r+2]=s>>16&255,t[r+3]=s>>24&255},NC=function(t,s,r){t[r]=s&255,t[r+1]=s>>>8&255};function kC(t,s,r){var a=0,n=0;if(r==="dbcs"){for(n=0;n!=s.length;++n)NC(this,s.charCodeAt(n),this.l+2*n);a=2*s.length}else if(r==="sbcs"){for(s=s.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=s.length;++n)this[this.l+n]=s.charCodeAt(n)&255;a=s.length}else if(r==="hex"){for(;n<t;++n)this[this.l++]=parseInt(s.slice(2*n,2*n+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+t,this.length);for(n=0;n<Math.min(s.length,t);++n){var l=s.charCodeAt(n);this[this.l++]=l&255,this[this.l++]=l>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(t){case 1:a=1,this[this.l]=s&255;break;case 2:a=2,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255;break;case 3:a=3,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255,s>>>=8,this[this.l+2]=s&255;break;case 4:a=4,jC(this,s,this.l);break;case 8:if(a=8,r==="f"){yC(this,s,this.l);break}case 16:break;case-4:a=4,wC(this,s,this.l);break}return this.l+=a,this}function Rv(t,s){var r=jv(this,this.l,t.length>>1);if(r!==t)throw new Error(s+"Expected "+t+" saw "+r);this.l+=t.length>>1}function _s(t,s){t.l=s,t.read_shift=ql,t.chk=Rv,t.write_shift=kC}function Hs(t,s){t.l+=s}function us(t){var s=_n(t);return _s(s,0),s}function Ja(t,s,r){if(t){var a,n,i;_s(t,t.l||0);for(var l=t.length,o=0,c=0;t.l<l;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var d=Cd[o]||Cd[65535];for(a=t.read_shift(1),i=a&127,n=1;n<4&&a&128;++n)i+=((a=t.read_shift(1))&127)<<7*n;c=t.l+i;var u=d.f&&d.f(t,i,r);if(t.l=c,s(u,d,o))return}}}function rx(){var t=[],s=gt?256:2048,r=function(d){var u=us(d);return _s(u,0),u},a=r(s),n=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&t.push(a),a=null)},i=function(d){return a&&d<a.length-a.l?a:(n(),a=r(Math.max(d+1,s)))},l=function(){return n(),ln(t)},o=function(d){n(),a=d,a.l==null&&(a.l=a.length),i(s)};return{next:i,push:o,end:l,_bufs:t}}function Jl(t,s,r){var a=Es(t);if(s.s?(a.cRel&&(a.c+=s.s.c),a.rRel&&(a.r+=s.s.r)):(a.cRel&&(a.c+=s.c),a.rRel&&(a.r+=s.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function dp(t,s,r){var a=Es(t);return a.s=Jl(a.s,s.s,r),a.e=Jl(a.e,s.s,r),a}function Kl(t,s){if(t.cRel&&t.c<0)for(t=Es(t);t.c<0;)t.c+=s>8?16384:256;if(t.rRel&&t.r<0)for(t=Es(t);t.r<0;)t.r+=s>8?1048576:s>5?65536:16384;var r=tt(t);return!t.cRel&&t.cRel!=null&&(r=_C(r)),!t.rRel&&t.rRel!=null&&(r=SC(r)),r}function L0(t,s){return t.s.r==0&&!t.s.rRel&&t.e.r==(s.biff>=12?1048575:s.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+ps(t.s.c)+":"+(t.e.cRel?"":"$")+ps(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(s.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+As(t.s.r)+":"+(t.e.rRel?"":"$")+As(t.e.r):Kl(t.s,s.biff)+":"+Kl(t.e,s.biff)}function Pm(t){return parseInt(CC(t),10)-1}function As(t){return""+(t+1)}function SC(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function CC(t){return t.replace(/\$(\d+)$/,"$1")}function Dm(t){for(var s=TC(t),r=0,a=0;a!==s.length;++a)r=26*r+s.charCodeAt(a)-64;return r-1}function ps(t){if(t<0)throw new Error("invalid column "+t);var s="";for(++t;t;t=Math.floor((t-1)/26))s=String.fromCharCode((t-1)%26+65)+s;return s}function _C(t){return t.replace(/^([A-Z])/,"$$$1")}function TC(t){return t.replace(/^\$([A-Z])/,"$1")}function EC(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ys(t){for(var s=0,r=0,a=0;a<t.length;++a){var n=t.charCodeAt(a);n>=48&&n<=57?s=10*s+(n-48):n>=65&&n<=90&&(r=26*r+(n-64))}return{c:r-1,r:s-1}}function tt(t){for(var s=t.c+1,r="";s;s=(s-1)/26|0)r=String.fromCharCode((s-1)%26+65)+r;return r+(t.r+1)}function xl(t){var s=t.indexOf(":");return s==-1?{s:Ys(t),e:Ys(t)}:{s:Ys(t.slice(0,s)),e:Ys(t.slice(s+1))}}function vt(t,s){return typeof s>"u"||typeof s=="number"?vt(t.s,t.e):(typeof t!="string"&&(t=tt(t)),typeof s!="string"&&(s=tt(s)),t==s?t:t+":"+s)}function Yt(t){var s={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,n=0,i=t.length;for(r=0;a<i&&!((n=t.charCodeAt(a)-64)<1||n>26);++a)r=26*r+n;for(s.s.c=--r,r=0;a<i&&!((n=t.charCodeAt(a)-48)<0||n>9);++a)r=10*r+n;if(s.s.r=--r,a===i||n!=10)return s.e.c=s.s.c,s.e.r=s.s.r,s;for(++a,r=0;a!=i&&!((n=t.charCodeAt(a)-64)<1||n>26);++a)r=26*r+n;for(s.e.c=--r,r=0;a!=i&&!((n=t.charCodeAt(a)-48)<0||n>9);++a)r=10*r+n;return s.e.r=--r,s}function up(t,s){var r=t.t=="d"&&s instanceof Date;if(t.z!=null)try{return t.w=Br(t.z,r?er(s):s)}catch{}try{return t.w=Br((t.XF||{}).numFmtId||(r?14:0),r?er(s):s)}catch{return""+s}}function Ha(t,s,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?yi[t.v]||t.v:s==null?up(t,t.v):up(t,s))}function Rn(t,s){var r=s&&s.sheet?s.sheet:"Sheet1",a={};return a[r]=t,{SheetNames:[r],Sheets:a}}function Lv(t,s,r){var a=r||{},n=t?Array.isArray(t):a.dense,i=t||(n?[]:{}),l=0,o=0;if(i&&a.origin!=null){if(typeof a.origin=="number")l=a.origin;else{var c=typeof a.origin=="string"?Ys(a.origin):a.origin;l=c.r,o=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=Yt(i["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),l==-1&&(d.e.r=l=u.e.r+1)}for(var p=0;p!=s.length;++p)if(s[p]){if(!Array.isArray(s[p]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=s[p].length;++h)if(!(typeof s[p][h]>"u")){var g={v:s[p][h]},x=l+p,f=o+h;if(d.s.r>x&&(d.s.r=x),d.s.c>f&&(d.s.c=f),d.e.r<x&&(d.e.r=x),d.e.c<f&&(d.e.c=f),s[p][h]&&typeof s[p][h]=="object"&&!Array.isArray(s[p][h])&&!(s[p][h]instanceof Date))g=s[p][h];else if(Array.isArray(g.v)&&(g.f=s[p][h][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(a.nullError)g.t="e",g.v=0;else if(a.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=a.dateNF||at[14],a.cellDates?(g.t="d",g.w=Br(g.z,er(g.v))):(g.t="n",g.v=er(g.v),g.w=Br(g.z,g.v))):g.t="s";if(n)i[x]||(i[x]=[]),i[x][f]&&i[x][f].z&&(g.z=i[x][f].z),i[x][f]=g;else{var m=tt({c:f,r:x});i[m]&&i[m].z&&(g.z=i[m].z),i[m]=g}}}return d.s.c<1e7&&(i["!ref"]=vt(d)),i}function ml(t,s){return Lv(null,t,s)}function AC(t){return t.read_shift(4,"i")}function Ws(t){var s=t.read_shift(4);return s===0?"":t.read_shift(s,"dbcs")}function FC(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function Rm(t,s){var r=t.l,a=t.read_shift(1),n=Ws(t),i=[],l={t:n,h:n};if(a&1){for(var o=t.read_shift(4),c=0;c!=o;++c)i.push(FC(t));l.r=i}else l.r=[{ich:0,ifnt:0}];return t.l=r+s,l}var PC=Rm;function $r(t){var s=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:s,iStyleRef:r}}function pi(t){var s=t.read_shift(2);return s+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:s}}var DC=Ws;function Lm(t){var s=t.read_shift(4);return s===0||s===4294967295?"":t.read_shift(s,"dbcs")}var RC=Ws,ax=Lm;function Om(t){var s=t.slice(t.l,t.l+4),r=s[0]&1,a=s[0]&2;t.l+=4;var n=a===0?vd([0,0,0,0,s[0]&252,s[1],s[2],s[3]],0):zn(s,0)>>2;return r?n/100:n}function Ov(t){var s={s:{},e:{}};return s.s.r=t.read_shift(4),s.e.r=t.read_shift(4),s.s.c=t.read_shift(4),s.e.c=t.read_shift(4),s}var gi=Ov;function Us(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function LC(t){var s={},r=t.read_shift(1),a=r>>>1,n=t.read_shift(1),i=t.read_shift(2,"i"),l=t.read_shift(1),o=t.read_shift(1),c=t.read_shift(1);switch(t.l++,a){case 0:s.auto=1;break;case 1:s.index=n;var d=Zn[n];d&&(s.rgb=Po(d));break;case 2:s.rgb=Po([l,o,c]);break;case 3:s.theme=n;break}return i!=0&&(s.tint=i>0?i/32767:i/32768),s}function OC(t){var s=t.read_shift(1);t.l++;var r={fBold:s&1,fItalic:s&2,fUnderline:s&4,fStrikeout:s&8,fOutline:s&16,fShadow:s&32,fCondense:s&64,fExtend:s&128};return r}function Iv(t,s){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=t.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return t.l-=4,t.read_shift(0,s==1?"lpstr":"lpwstr")}function IC(t){return Iv(t,1)}function MC(t){return Iv(t,2)}var Im=2,nr=3,gc=11,xp=12,jd=19,yc=64,BC=65,$C=71,UC=4108,zC=4126,vs=80,Mv=81,WC=[vs,Mv],VC={1:{n:"CodePage",t:Im},2:{n:"Category",t:vs},3:{n:"PresentationFormat",t:vs},4:{n:"ByteCount",t:nr},5:{n:"LineCount",t:nr},6:{n:"ParagraphCount",t:nr},7:{n:"SlideCount",t:nr},8:{n:"NoteCount",t:nr},9:{n:"HiddenCount",t:nr},10:{n:"MultimediaClipCount",t:nr},11:{n:"ScaleCrop",t:gc},12:{n:"HeadingPairs",t:UC},13:{n:"TitlesOfParts",t:zC},14:{n:"Manager",t:vs},15:{n:"Company",t:vs},16:{n:"LinksUpToDate",t:gc},17:{n:"CharacterCount",t:nr},19:{n:"SharedDoc",t:gc},22:{n:"HyperlinksChanged",t:gc},23:{n:"AppVersion",t:nr,p:"version"},24:{n:"DigSig",t:BC},26:{n:"ContentType",t:vs},27:{n:"ContentStatus",t:vs},28:{n:"Language",t:vs},29:{n:"Version",t:vs},255:{},2147483648:{n:"Locale",t:jd},2147483651:{n:"Behavior",t:jd},1919054434:{}},HC={1:{n:"CodePage",t:Im},2:{n:"Title",t:vs},3:{n:"Subject",t:vs},4:{n:"Author",t:vs},5:{n:"Keywords",t:vs},6:{n:"Comments",t:vs},7:{n:"Template",t:vs},8:{n:"LastAuthor",t:vs},9:{n:"RevNumber",t:vs},10:{n:"EditTime",t:yc},11:{n:"LastPrinted",t:yc},12:{n:"CreatedDate",t:yc},13:{n:"ModifiedDate",t:yc},14:{n:"PageCount",t:nr},15:{n:"WordCount",t:nr},16:{n:"CharCount",t:nr},17:{n:"Thumbnail",t:$C},18:{n:"Application",t:vs},19:{n:"DocSecurity",t:nr},255:{},2147483648:{n:"Locale",t:jd},2147483651:{n:"Behavior",t:jd},1919054434:{}},mp={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},GC=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function qC(t){return t.map(function(s){return[s>>16&255,s>>8&255,s&255]})}var JC=qC([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Zn=Es(JC),yi={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Bv={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},hp={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function KC(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function YC(t){var s=KC();if(!t||!t.match)return s;var r={};if((t.match(Gs)||[]).forEach(function(a){var n=Ke(a);switch(n[0].replace(aC,"<")){case"<?xml":break;case"<Types":s.xmlns=n["xmlns"+(n[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[n.Extension]=n.ContentType;break;case"<Override":s[hp[n.ContentType]]!==void 0&&s[hp[n.ContentType]].push(n.PartName);break}}),s.xmlns!==fC.CT)throw new Error("Unknown Namespace: "+s.xmlns);return s.calcchain=s.calcchains.length>0?s.calcchains[0]:"",s.sst=s.strs.length>0?s.strs[0]:"",s.style=s.styles.length>0?s.styles[0]:"",s.defaults=r,delete s.calcchains,s}var Oi={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function nx(t){var s=t.lastIndexOf("/");return t.slice(0,s+1)+"_rels/"+t.slice(s+1)+".rels"}function Yl(t,s){var r={"!id":{}};if(!t)return r;s.charAt(0)!=="/"&&(s="/"+s);var a={};return(t.match(Gs)||[]).forEach(function(n){var i=Ke(n);if(i[0]==="<Relationship"){var l={};l.Type=i.Type,l.Target=i.Target,l.Id=i.Id,i.TargetMode&&(l.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:Ll(i.Target,s);r[o]=l,a[i.Id]=l}}),r["!id"]=a,r}var XC="application/vnd.oasis.opendocument.spreadsheet";function QC(t,s){for(var r=Am(t),a,n;a=Ao.exec(r);)switch(a[3]){case"manifest":break;case"file-entry":if(n=Ke(a[0],!1),n.path=="/"&&n.type!==XC)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(s&&s.WTF)throw a}}var Xl=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],ZC=function(){for(var t=new Array(Xl.length),s=0;s<Xl.length;++s){var r=Xl[s],a="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[s]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return t}();function $v(t){var s={};t=Lt(t);for(var r=0;r<Xl.length;++r){var a=Xl[r],n=t.match(ZC[r]);n!=null&&n.length>0&&(s[a[1]]=kt(n[1])),a[2]==="date"&&s[a[1]]&&(s[a[1]]=ks(s[a[1]]))}return s}var e6=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function Uv(t,s,r,a){var n=[];if(typeof t=="string")n=ap(t,a);else for(var i=0;i<t.length;++i)n=n.concat(t[i].map(function(u){return{v:u}}));var l=typeof s=="string"?ap(s,a).map(function(u){return u.v}):s,o=0,c=0;if(l.length>0)for(var d=0;d!==n.length;d+=2){switch(c=+n[d+1].v,n[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=l.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=l.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=l.slice(o,o+c);break}o+=c}}function t6(t,s,r){var a={};return s||(s={}),t=Lt(t),e6.forEach(function(n){var i=(t.match(Eo(n[0]))||[])[1];switch(n[2]){case"string":i&&(s[n[1]]=kt(i));break;case"bool":s[n[1]]=i==="true";break;case"raw":var l=t.match(new RegExp("<"+n[0]+"[^>]*>([\\s\\S]*?)</"+n[0]+">"));l&&l.length>0&&(a[n[1]]=l[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&Uv(a.HeadingPairs,a.TitlesOfParts,s,r),s}var s6=/<[^>]+>[^<]*/g;function r6(t,s){var r={},a="",n=t.match(s6);if(n)for(var i=0;i!=n.length;++i){var l=n[i],o=Ke(l);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":a=kt(o.name);break;case"</property>":a=null;break;default:if(l.indexOf("<vt:")===0){var c=l.split(">"),d=c[0].slice(4),u=c[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[a]=kt(u);break;case"bool":r[a]=$t(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[a]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[a]=parseFloat(u);break;case"filetime":case"date":r[a]=ks(u);break;case"cy":case"error":r[a]=kt(u);break;default:if(d.slice(-1)=="/")break;s.WTF&&typeof console<"u"&&console.warn("Unexpected",l,d,c)}}else if(l.slice(0,2)!=="</"){if(s.WTF)throw new Error(l)}}}return r}var a6={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},O0;function n6(t,s,r){O0||(O0=_m(a6)),s=O0[s]||s,t[s]=r}function Mm(t){var s=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+s/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function zv(t,s,r){var a=t.l,n=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-a&3;)++t.l;return n}function Wv(t,s,r){var a=t.read_shift(0,"lpwstr");return a}function Vv(t,s,r){return s===31?Wv(t):zv(t,s,r)}function ix(t,s,r){return Vv(t,s,r===!1?0:4)}function i6(t,s){if(!s)throw new Error("VtUnalignedString must have positive length");return Vv(t,s,0)}function l6(t){for(var s=t.read_shift(4),r=[],a=0;a!=s;++a){var n=t.l;r[a]=t.read_shift(0,"lpwstr").replace(Zs,""),t.l-n&2&&(t.l+=2)}return r}function o6(t){for(var s=t.read_shift(4),r=[],a=0;a!=s;++a)r[a]=t.read_shift(0,"lpstr-cp").replace(Zs,"");return r}function c6(t){var s=t.l,r=wd(t,Mv);t[t.l]==0&&t[t.l+1]==0&&t.l-s&2&&(t.l+=2);var a=wd(t,nr);return[r,a]}function d6(t){for(var s=t.read_shift(4),r=[],a=0;a<s/2;++a)r.push(c6(t));return r}function fp(t,s){for(var r=t.read_shift(4),a={},n=0;n!=r;++n){var i=t.read_shift(4),l=t.read_shift(4);a[i]=t.read_shift(l,s===1200?"utf16le":"utf8").replace(Zs,"").replace(Rl,"!"),s===1200&&l%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),a}function Hv(t){var s=t.read_shift(4),r=t.slice(t.l,t.l+s);return t.l+=s,(s&3)>0&&(t.l+=4-(s&3)&3),r}function u6(t){var s={};return s.Size=t.read_shift(4),t.l+=s.Size+3-(s.Size-1)%4,s}function wd(t,s,r){var a=t.read_shift(2),n,i=r||{};if(t.l+=2,s!==xp&&a!==s&&WC.indexOf(s)===-1&&!((s&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+s+" saw "+a);switch(s===xp?a:s){case 2:return n=t.read_shift(2,"i"),i.raw||(t.l+=2),n;case 3:return n=t.read_shift(4,"i"),n;case 11:return t.read_shift(4)!==0;case 19:return n=t.read_shift(4),n;case 30:return zv(t,a,4).replace(Zs,"");case 31:return Wv(t);case 64:return Mm(t);case 65:return Hv(t);case 71:return u6(t);case 80:return ix(t,a,!i.raw).replace(Zs,"");case 81:return i6(t,a).replace(Zs,"");case 4108:return d6(t);case 4126:case 4127:return a==4127?l6(t):o6(t);default:throw new Error("TypedPropertyValue unrecognized type "+s+" "+a)}}function pp(t,s){var r=t.l,a=t.read_shift(4),n=t.read_shift(4),i=[],l=0,o=0,c=-1,d={};for(l=0;l!=n;++l){var u=t.read_shift(4),p=t.read_shift(4);i[l]=[u,p+r]}i.sort(function(v,w){return v[1]-w[1]});var h={};for(l=0;l!=n;++l){if(t.l!==i[l][1]){var g=!0;if(l>0&&s)switch(s[i[l-1][0]].t){case 2:t.l+2===i[l][1]&&(t.l+=2,g=!1);break;case 80:t.l<=i[l][1]&&(t.l=i[l][1],g=!1);break;case 4108:t.l<=i[l][1]&&(t.l=i[l][1],g=!1);break}if((!s||l==0)&&t.l<=i[l][1]&&(g=!1,t.l=i[l][1]),g)throw new Error("Read Error: Expected address "+i[l][1]+" at "+t.l+" :"+l)}if(s){var x=s[i[l][0]];if(h[x.n]=wd(t,x.t,{raw:!0}),x.p==="version"&&(h[x.n]=String(h[x.n]>>16)+"."+("0000"+String(h[x.n]&65535)).slice(-4)),x.n=="CodePage")switch(h[x.n]){case 0:h[x.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Zr(o=h[x.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[x.n])}}else if(i[l][0]===1){if(o=h.CodePage=wd(t,Im),Zr(o),c!==-1){var f=t.l;t.l=i[c][1],d=fp(t,o),t.l=f}}else if(i[l][0]===0){if(o===0){c=l,t.l=i[l+1][1];continue}d=fp(t,o)}else{var m=d[i[l][0]],j;switch(t[t.l]){case 65:t.l+=4,j=Hv(t);break;case 30:t.l+=4,j=ix(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,j=ix(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,j=t.read_shift(4,"i");break;case 19:t.l+=4,j=t.read_shift(4);break;case 5:t.l+=4,j=t.read_shift(8,"f");break;case 11:t.l+=4,j=Qt(t,4);break;case 64:t.l+=4,j=ks(Mm(t));break;default:throw new Error("unparsed value: "+t[t.l])}h[m]=j}}return t.l=r+a,h}function gp(t,s,r){var a=t.content;if(!a)return{};_s(a,0);var n,i,l,o,c=0;a.chk("feff","Byte Order: "),a.read_shift(2);var d=a.read_shift(4),u=a.read_shift(16);if(u!==bt.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(n=a.read_shift(4),n!==1&&n!==2)throw new Error("Unrecognized #Sets: "+n);if(i=a.read_shift(16),o=a.read_shift(4),n===1&&o!==a.l)throw new Error("Length mismatch: "+o+" !== "+a.l);n===2&&(l=a.read_shift(16),c=a.read_shift(4));var p=pp(a,s),h={SystemIdentifier:d};for(var g in p)h[g]=p[g];if(h.FMTID=i,n===1)return h;if(c-a.l==2&&(a.l+=2),a.l!==c)throw new Error("Length mismatch 2: "+a.l+" !== "+c);var x;try{x=pp(a,null)}catch{}for(g in x)h[g]=x[g];return h.FMTID=[i,l],h}function Xa(t,s){return t.read_shift(s),null}function x6(t,s,r){for(var a=[],n=t.l+s;t.l<n;)a.push(r(t,n-t.l));if(n!==t.l)throw new Error("Slurp error");return a}function Qt(t,s){return t.read_shift(s)===1}function is(t){return t.read_shift(2,"u")}function Gv(t,s){return x6(t,s,is)}function m6(t){var s=t.read_shift(1),r=t.read_shift(1);return r===1?s:s===1}function Wo(t,s,r){var a=t.read_shift(r&&r.biff>=12?2:1),n="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=t.read_shift(1);i&&(n="dbcs-cont")}else r.biff==12&&(n="wstr");r.biff>=2&&r.biff<=5&&(n="cpstr");var l=a?t.read_shift(a,n):"";return l}function h6(t){var s=t.read_shift(2),r=t.read_shift(1),a=r&4,n=r&8,i=1+(r&1),l=0,o,c={};n&&(l=t.read_shift(2)),a&&(o=t.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",u=s===0?"":t.read_shift(s,d);return n&&(t.l+=4*l),a&&(t.l+=o),c.t=u,n||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function di(t,s,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(s,"cpstr");if(r.biff>=12)return t.read_shift(s,"dbcs-cont")}var n=t.read_shift(1);return n===0?a=t.read_shift(s,"sbcs-cont"):a=t.read_shift(s,"dbcs-cont"),a}function Vo(t,s,r){var a=t.read_shift(r&&r.biff==2?1:2);return a===0?(t.l++,""):di(t,a,r)}function bi(t,s,r){if(r.biff>5)return Vo(t,s,r);var a=t.read_shift(1);return a===0?(t.l++,""):t.read_shift(a,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function f6(t){var s=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[s,r]}function p6(t){var s=t.read_shift(4),r=t.l,a=!1;s>24&&(t.l+=s-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),t.l=r);var n=t.read_shift((a?s-24:s)>>1,"utf16le").replace(Zs,"");return a&&(t.l+=24),n}function g6(t){for(var s=t.read_shift(2),r="";s-- >0;)r+="../";var a=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var n=t.read_shift(4);if(n===0)return r+a.replace(/\\/g,"/");var i=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var l=t.read_shift(i>>1,"utf16le").replace(Zs,"");return r+l}function y6(t,s){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return p6(t);case"0303000000000000c000000000000046":return g6(t);default:throw new Error("Unsupported Moniker "+r)}}function bc(t){var s=t.read_shift(4),r=s>0?t.read_shift(s,"utf16le").replace(Zs,""):"";return r}function b6(t,s){var r=t.l+s,a=t.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var n=t.read_shift(2);t.l+=2;var i,l,o,c,d="",u,p;n&16&&(i=bc(t,r-t.l)),n&128&&(l=bc(t,r-t.l)),(n&257)===257&&(o=bc(t,r-t.l)),(n&257)===1&&(c=y6(t,r-t.l)),n&8&&(d=bc(t,r-t.l)),n&32&&(u=t.read_shift(16)),n&64&&(p=Mm(t)),t.l=r;var h=l||o||c||"";h&&d&&(h+="#"+d),h||(h="#"+d),n&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var g={Target:h};return u&&(g.guid=u),p&&(g.time=p),i&&(g.Tooltip=i),g}function qv(t){var s=t.read_shift(1),r=t.read_shift(1),a=t.read_shift(1),n=t.read_shift(1);return[s,r,a,n]}function Jv(t,s){var r=qv(t);return r[3]=0,r}function ka(t){var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(2);return{r:s,c:r,ixfe:a}}function v6(t){var s=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:s,flags:r}}function j6(t,s,r){return s===0?"":bi(t,s,r)}function w6(t,s,r){var a=r.biff>8?4:2,n=t.read_shift(a),i=t.read_shift(a,"i"),l=t.read_shift(a,"i");return[n,i,l]}function Kv(t){var s=t.read_shift(2),r=Om(t);return[s,r]}function N6(t,s,r){t.l+=4,s-=4;var a=t.l+s,n=Wo(t,s,r),i=t.read_shift(2);if(a-=t.l,i!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+i);return t.l+=i,n}function Yd(t){var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(2),n=t.read_shift(2);return{s:{c:a,r:s},e:{c:n,r}}}function Yv(t){var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(1),n=t.read_shift(1);return{s:{c:a,r:s},e:{c:n,r}}}var k6=Yv;function Xv(t){t.l+=4;var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(2);return t.l+=12,[r,s,a]}function S6(t){var s={};return t.l+=4,t.l+=16,s.fSharedNote=t.read_shift(2),t.l+=4,s}function C6(t){var s={};return t.l+=4,t.cf=t.read_shift(2),s}function Is(t){t.l+=2,t.l+=t.read_shift(2)}var _6={0:Is,4:Is,5:Is,6:Is,7:C6,8:Is,9:Is,10:Is,11:Is,12:Is,13:S6,14:Is,15:Is,16:Is,17:Is,18:Is,19:Is,20:Is,21:Xv};function T6(t,s){for(var r=t.l+s,a=[];t.l<r;){var n=t.read_shift(2);t.l-=2;try{a.push(_6[n](t,r-t.l))}catch{return t.l=r,a}}return t.l!=r&&(t.l=r),a}function vc(t,s){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),s-=2,s>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(s>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(s),r}function E6(t,s){return s===0||t.read_shift(2),1200}function A6(t,s,r){if(r.enc)return t.l+=s,"";var a=t.l,n=bi(t,0,r);return t.read_shift(s+a-t.l),n}function F6(t,s,r){var a=r&&r.biff==8||s==2?t.read_shift(2):(t.l+=s,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function P6(t,s,r){var a=t.read_shift(4),n=t.read_shift(1)&3,i=t.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var l=Wo(t,0,r);return l.length===0&&(l="Sheet1"),{pos:a,hs:n,dt:i,name:l}}function D6(t,s){for(var r=t.l+s,a=t.read_shift(4),n=t.read_shift(4),i=[],l=0;l!=n&&t.l<r;++l)i.push(h6(t));return i.Count=a,i.Unique=n,i}function R6(t,s){var r={};return r.dsst=t.read_shift(2),t.l+=s-2,r}function L6(t){var s={};s.r=t.read_shift(2),s.c=t.read_shift(2),s.cnt=t.read_shift(2)-s.c;var r=t.read_shift(2);t.l+=4;var a=t.read_shift(1);return t.l+=3,a&7&&(s.level=a&7),a&32&&(s.hidden=!0),a&64&&(s.hpt=r/20),s}function O6(t){var s=v6(t);if(s.type!=2211)throw new Error("Invalid Future Record "+s.type);var r=t.read_shift(4);return r!==0}function I6(t){return t.read_shift(2),t.read_shift(4)}function yp(t,s,r){var a=0;r&&r.biff==2||(a=t.read_shift(2));var n=t.read_shift(2);r&&r.biff==2&&(a=1-(n>>15),n&=32767);var i={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[i,n]}function M6(t){var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2),o=t.read_shift(2),c=t.read_shift(2),d=t.read_shift(2);return{Pos:[s,r],Dim:[a,n],Flags:i,CurTab:l,FirstTab:o,Selected:c,TabRatio:d}}function B6(t,s,r){if(r&&r.biff>=2&&r.biff<5)return{};var a=t.read_shift(2);return{RTL:a&64}}function $6(){}function U6(t,s,r){var a={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return a.name=Wo(t,0,r),a}function z6(t){var s=ka(t);return s.isst=t.read_shift(4),s}function W6(t,s,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=t.l+s,n=ka(t);r.biff==2&&t.l++;var i=Vo(t,a-t.l,r);return n.val=i,n}function V6(t,s,r){var a=t.read_shift(2),n=bi(t,0,r);return[a,n]}var H6=bi;function bp(t,s,r){var a=t.l+s,n=r.biff==8||!r.biff?4:2,i=t.read_shift(n),l=t.read_shift(n),o=t.read_shift(2),c=t.read_shift(2);return t.l=a,{s:{r:i,c:o},e:{r:l,c}}}function G6(t){var s=t.read_shift(2),r=t.read_shift(2),a=Kv(t);return{r:s,c:r,ixfe:a[0],rknum:a[1]}}function q6(t,s){for(var r=t.l+s-2,a=t.read_shift(2),n=t.read_shift(2),i=[];t.l<r;)i.push(Kv(t));if(t.l!==r)throw new Error("MulRK read error");var l=t.read_shift(2);if(i.length!=l-n+1)throw new Error("MulRK length mismatch");return{r:a,c:n,C:l,rkrec:i}}function J6(t,s){for(var r=t.l+s-2,a=t.read_shift(2),n=t.read_shift(2),i=[];t.l<r;)i.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var l=t.read_shift(2);if(i.length!=l-n+1)throw new Error("MulBlank length mismatch");return{r:a,c:n,C:l,ixfe:i}}function K6(t,s,r,a){var n={},i=t.read_shift(4),l=t.read_shift(4),o=t.read_shift(4),c=t.read_shift(2);return n.patternType=GC[o>>26],a.cellStyles&&(n.alc=i&7,n.fWrap=i>>3&1,n.alcV=i>>4&7,n.fJustLast=i>>7&1,n.trot=i>>8&255,n.cIndent=i>>16&15,n.fShrinkToFit=i>>20&1,n.iReadOrder=i>>22&2,n.fAtrNum=i>>26&1,n.fAtrFnt=i>>27&1,n.fAtrAlc=i>>28&1,n.fAtrBdr=i>>29&1,n.fAtrPat=i>>30&1,n.fAtrProt=i>>31&1,n.dgLeft=l&15,n.dgRight=l>>4&15,n.dgTop=l>>8&15,n.dgBottom=l>>12&15,n.icvLeft=l>>16&127,n.icvRight=l>>23&127,n.grbitDiag=l>>30&3,n.icvTop=o&127,n.icvBottom=o>>7&127,n.icvDiag=o>>14&127,n.dgDiag=o>>21&15,n.icvFore=c&127,n.icvBack=c>>7&127,n.fsxButton=c>>14&1),n}function Y6(t,s,r){var a={};return a.ifnt=t.read_shift(2),a.numFmtId=t.read_shift(2),a.flags=t.read_shift(2),a.fStyle=a.flags>>2&1,s-=6,a.data=K6(t,s,a.fStyle,r),a}function X6(t){t.l+=4;var s=[t.read_shift(2),t.read_shift(2)];if(s[0]!==0&&s[0]--,s[1]!==0&&s[1]--,s[0]>7||s[1]>7)throw new Error("Bad Gutters: "+s.join("|"));return s}function vp(t,s,r){var a=ka(t);(r.biff==2||s==9)&&++t.l;var n=m6(t);return a.val=n,a.t=n===!0||n===!1?"b":"e",a}function Q6(t,s,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=ka(t),n=Us(t);return a.val=n,a}var jp=j6;function Z6(t,s,r){var a=t.l+s,n=t.read_shift(2),i=t.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,n];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var l=di(t,i),o=[];a>t.l;)o.push(Vo(t));return[i,n,l,o]}function wp(t,s,r){var a=t.read_shift(2),n,i={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return r.sbcch===14849&&(n=N6(t,s-2,r)),i.body=n||t.read_shift(s-2),typeof n=="string"&&(i.Name=n),i}var e_=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function Np(t,s,r){var a=t.l+s,n=t.read_shift(2),i=t.read_shift(1),l=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),c=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var d=di(t,l,r);n&32&&(d=e_[d.charCodeAt(0)]);var u=a-t.l;r&&r.biff==2&&--u;var p=a==t.l||o===0||!(u>0)?[]:LE(t,u,r,o);return{chKey:i,Name:d,itab:c,rgce:p}}function Qv(t,s,r){if(r.biff<8)return t_(t,s,r);for(var a=[],n=t.l+s,i=t.read_shift(r.biff>8?4:2);i--!==0;)a.push(w6(t,r.biff>8?12:6,r));if(t.l!=n)throw new Error("Bad ExternSheet: "+t.l+" != "+n);return a}function t_(t,s,r){t[t.l+1]==3&&t[t.l]++;var a=Wo(t,s,r);return a.charCodeAt(0)==3?a.slice(1):a}function s_(t,s,r){if(r.biff<8){t.l+=s;return}var a=t.read_shift(2),n=t.read_shift(2),i=di(t,a,r),l=di(t,n,r);return[i,l]}function r_(t,s,r){var a=Yv(t);t.l++;var n=t.read_shift(1);return s-=8,[OE(t,s,r),n,a]}function kp(t,s,r){var a=k6(t);switch(r.biff){case 2:t.l++,s-=7;break;case 3:case 4:t.l+=2,s-=8;break;default:t.l+=6,s-=12}return[a,DE(t,s,r)]}function a_(t){var s=t.read_shift(4)!==0,r=t.read_shift(4)!==0,a=t.read_shift(4);return[s,r,a]}function n_(t,s,r){if(!(r.biff<8)){var a=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2),o=bi(t,0,r);return r.biff<8&&t.read_shift(1),[{r:a,c:n},o,l,i]}}function i_(t,s,r){return n_(t,s,r)}function l_(t,s){for(var r=[],a=t.read_shift(2);a--;)r.push(Yd(t));return r}function o_(t,s,r){if(r&&r.biff<8)return d_(t,s,r);var a=Xv(t),n=T6(t,s-22,a[1]);return{cmo:a,ft:n}}var c_={8:function(t,s){var r=t.l+s;t.l+=10;var a=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var n=t.read_shift(1);return t.l+=n,t.l=r,{fmt:a}}};function d_(t,s,r){t.l+=4;var a=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,s-=36;var l=[];return l.push((c_[a]||Hs)(t,s,r)),{cmo:[n,a,i],ft:l}}function u_(t,s,r){var a=t.l,n="";try{t.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],l;[0,5,7,11,12,14].indexOf(i)==-1?t.l+=6:l=f6(t,6,r);var o=t.read_shift(2);t.read_shift(2),is(t,2);var c=t.read_shift(2);t.l+=c;for(var d=1;d<t.lens.length-1;++d){if(t.l-a!=t.lens[d])throw new Error("TxO: bad continue record");var u=t[t.l],p=di(t,t.lens[d+1]-t.lens[d]-1);if(n+=p,n.length>=(u?o:2*o))break}if(n.length!==o&&n.length!==o*2)throw new Error("cchText: "+o+" != "+n.length);return t.l=a+s,{t:n}}catch{return t.l=a+s,{t:n}}}function x_(t,s){var r=Yd(t);t.l+=16;var a=b6(t,s-24);return[r,a]}function m_(t,s){t.read_shift(2);var r=Yd(t),a=t.read_shift((s-10)/2,"dbcs-cont");return a=a.replace(Zs,""),[r,a]}function h_(t){var s=[0,0],r;return r=t.read_shift(2),s[0]=mp[r]||r,r=t.read_shift(2),s[1]=mp[r]||r,s}function f_(t){for(var s=t.read_shift(2),r=[];s-- >0;)r.push(Jv(t));return r}function p_(t){for(var s=t.read_shift(2),r=[];s-- >0;)r.push(Jv(t));return r}function g_(t){t.l+=2;var s={cxfs:0,crc:0};return s.cxfs=t.read_shift(2),s.crc=t.read_shift(4),s}function Zv(t,s,r){if(!r.cellStyles)return Hs(t,s);var a=r&&r.biff>=12?4:2,n=t.read_shift(a),i=t.read_shift(a),l=t.read_shift(a),o=t.read_shift(a),c=t.read_shift(2);a==2&&(t.l+=2);var d={s:n,e:i,w:l,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function y_(t,s){var r={};return s<32||(t.l+=16,r.header=Us(t),r.footer=Us(t),t.l+=2),r}function b_(t,s,r){var a={area:!1};if(r.biff!=5)return t.l+=s,a;var n=t.read_shift(1);return t.l+=3,n&16&&(a.area=!0),a}var v_=ka,j_=Gv,w_=Vo;function N_(t){var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(4),n={fmt:s,env:r,len:a,data:t.slice(t.l,t.l+a)};return t.l+=a,n}function k_(t,s,r){r.biffguess&&r.biff==5&&(r.biff=2);var a=ka(t);++t.l;var n=bi(t,s-7,r);return a.t="str",a.val=n,a}function S_(t){var s=ka(t);++t.l;var r=Us(t);return s.t="n",s.val=r,s}function C_(t){var s=ka(t);++t.l;var r=t.read_shift(2);return s.t="n",s.val=r,s}function __(t){var s=t.read_shift(1);return s===0?(t.l++,""):t.read_shift(s,"sbcs-cont")}function T_(t,s){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=s-13}function E_(t,s,r){var a=t.l+s,n=ka(t),i=t.read_shift(2),l=di(t,i,r);return t.l=a,n.t="str",n.val=l,n}var A_=[2,3,48,49,131,139,140,245],Sp=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},s=_m({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var d=[],u=_n(1);switch(c.type){case"base64":u=Qr(wr(o));break;case"binary":u=Qr(o);break;case"buffer":case"array":u=o;break}_s(u,0);var p=u.read_shift(1),h=!!(p&136),g=!1,x=!1;switch(p){case 2:break;case 3:break;case 48:g=!0,h=!0;break;case 49:g=!0,h=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+p.toString(16))}var f=0,m=521;p==2&&(f=u.read_shift(2)),u.l+=3,p!=2&&(f=u.read_shift(4)),f>1048576&&(f=1e6),p!=2&&(m=u.read_shift(2));var j=u.read_shift(2),v=c.codepage||1252;p!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(v=t[u[u.l]]),u.l+=1,u.l+=2),x&&(u.l+=36);for(var w=[],S={},F=Math.min(u.length,p==2?521:m-10-(g?264:0)),E=x?32:11;u.l<F&&u[u.l]!=13;)switch(S={},S.name=_o.utils.decode(v,u.slice(u.l,u.l+E)).replace(/[\u0000\r\n].*$/g,""),u.l+=E,S.type=String.fromCharCode(u.read_shift(1)),p!=2&&!x&&(S.offset=u.read_shift(4)),S.len=u.read_shift(1),p==2&&(S.offset=u.read_shift(2)),S.dec=u.read_shift(1),S.name.length&&w.push(S),p!=2&&(u.l+=x?13:14),S.type){case"B":(!g||S.len!=8)&&c.WTF&&console.log("Skipping "+S.name+":"+S.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+S.name+":"+S.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+S.type)}if(u[u.l]!==13&&(u.l=m-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=m;var k=0,A=0;for(d[0]=[],A=0;A!=w.length;++A)d[0][A]=w[A].name;for(;f-- >0;){if(u[u.l]===42){u.l+=j;continue}for(++u.l,d[++k]=[],A=0,A=0;A!=w.length;++A){var y=u.slice(u.l,u.l+w[A].len);u.l+=w[A].len,_s(y,0);var N=_o.utils.decode(v,y);switch(w[A].type){case"C":N.trim().length&&(d[k][A]=N.replace(/\s+$/,""));break;case"D":N.length===8?d[k][A]=new Date(+N.slice(0,4),+N.slice(4,6)-1,+N.slice(6,8)):d[k][A]=N;break;case"F":d[k][A]=parseFloat(N.trim());break;case"+":case"I":d[k][A]=x?y.read_shift(-4,"i")^2147483648:y.read_shift(4,"i");break;case"L":switch(N.trim().toUpperCase()){case"Y":case"T":d[k][A]=!0;break;case"N":case"F":d[k][A]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+N+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+p.toString(16));d[k][A]="##MEMO##"+(x?parseInt(N.trim(),10):y.read_shift(4));break;case"N":N=N.replace(/\u0000/g,"").trim(),N&&N!="."&&(d[k][A]=+N||0);break;case"@":d[k][A]=new Date(y.read_shift(-8,"f")-621356832e5);break;case"T":d[k][A]=new Date((y.read_shift(4)-2440588)*864e5+y.read_shift(4));break;case"Y":d[k][A]=y.read_shift(4,"i")/1e4+y.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[k][A]=-y.read_shift(-8,"f");break;case"B":if(g&&w[A].len==8){d[k][A]=y.read_shift(8,"f");break}case"G":case"P":y.l+=w[A].len;break;case"0":if(w[A].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+w[A].type)}}}if(p!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=w,d}function a(o,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=ml(r(o,d),d);return u["!cols"]=d.DBF.map(function(p){return{wch:p.len,DBF:p}}),delete d.DBF,u}function n(o,c){try{return Rn(a(o,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function l(o,c){var d=c||{};if(+d.codepage>=0&&Zr(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=rx(),p=mx(o,{header:1,raw:!0,cellDates:!0}),h=p[0],g=p.slice(1),x=o["!cols"]||[],f=0,m=0,j=0,v=1;for(f=0;f<h.length;++f){if(((x[f]||{}).DBF||{}).name){h[f]=x[f].DBF.name,++j;continue}if(h[f]!=null){if(++j,typeof h[f]=="number"&&(h[f]=h[f].toString(10)),typeof h[f]!="string")throw new Error("DBF Invalid column name "+h[f]+" |"+typeof h[f]+"|");if(h.indexOf(h[f])!==f){for(m=0;m<1024;++m)if(h.indexOf(h[f]+"_"+m)==-1){h[f]+="_"+m;break}}}}var w=Yt(o["!ref"]),S=[],F=[],E=[];for(f=0;f<=w.e.c-w.s.c;++f){var k="",A="",y=0,N=[];for(m=0;m<g.length;++m)g[m][f]!=null&&N.push(g[m][f]);if(N.length==0||h[f]==null){S[f]="?";continue}for(m=0;m<N.length;++m){switch(typeof N[m]){case"number":A="B";break;case"string":A="C";break;case"boolean":A="L";break;case"object":A=N[m]instanceof Date?"D":"C";break;default:A="C"}y=Math.max(y,String(N[m]).length),k=k&&k!=A?"C":A}y>250&&(y=250),A=((x[f]||{}).DBF||{}).type,A=="C"&&x[f].DBF.len>y&&(y=x[f].DBF.len),k=="B"&&A=="N"&&(k="N",E[f]=x[f].DBF.dec,y=x[f].DBF.len),F[f]=k=="C"||A=="N"?y:i[k]||0,v+=F[f],S[f]=k}var R=u.next(32);for(R.write_shift(4,318902576),R.write_shift(4,g.length),R.write_shift(2,296+32*j),R.write_shift(2,v),f=0;f<4;++f)R.write_shift(4,0);for(R.write_shift(4,0|(+s[Qb]||3)<<8),f=0,m=0;f<h.length;++f)if(h[f]!=null){var T=u.next(32),z=(h[f].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);T.write_shift(1,z,"sbcs"),T.write_shift(1,S[f]=="?"?"C":S[f],"sbcs"),T.write_shift(4,m),T.write_shift(1,F[f]||i[S[f]]||0),T.write_shift(1,E[f]||0),T.write_shift(1,2),T.write_shift(4,0),T.write_shift(1,0),T.write_shift(4,0),T.write_shift(4,0),m+=F[f]||i[S[f]]||0}var L=u.next(264);for(L.write_shift(4,13),f=0;f<65;++f)L.write_shift(4,0);for(f=0;f<g.length;++f){var O=u.next(v);for(O.write_shift(1,0),m=0;m<h.length;++m)if(h[m]!=null)switch(S[m]){case"L":O.write_shift(1,g[f][m]==null?63:g[f][m]?84:70);break;case"B":O.write_shift(8,g[f][m]||0,"f");break;case"N":var V="0";for(typeof g[f][m]=="number"&&(V=g[f][m].toFixed(E[m]||0)),j=0;j<F[m]-V.length;++j)O.write_shift(1,32);O.write_shift(1,V,"sbcs");break;case"D":g[f][m]?(O.write_shift(4,("0000"+g[f][m].getFullYear()).slice(-4),"sbcs"),O.write_shift(2,("00"+(g[f][m].getMonth()+1)).slice(-2),"sbcs"),O.write_shift(2,("00"+g[f][m].getDate()).slice(-2),"sbcs")):O.write_shift(8,"00000000","sbcs");break;case"C":var Z=String(g[f][m]!=null?g[f][m]:"").slice(0,F[m]);for(O.write_shift(1,Z,"sbcs"),j=0;j<F[m]-Z.length;++j)O.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:n,to_sheet:a,from_sheet:l}}(),F_=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},s=new RegExp("\x1BN("+ba(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,g){var x=t[g];return typeof x=="number"?Uf(x):x},a=function(h,g,x){var f=g.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return f==59?h:Uf(f)};t["|"]=254;function n(h,g){switch(g.type){case"base64":return i(wr(h),g);case"binary":return i(h,g);case"buffer":return i(gt&&Buffer.isBuffer(h)?h.toString("binary"):fi(h),g);case"array":return i(ci(h),g)}throw new Error("Unrecognized type "+g.type)}function i(h,g){var x=h.split(/[\n\r]+/),f=-1,m=-1,j=0,v=0,w=[],S=[],F=null,E={},k=[],A=[],y=[],N=0,R;for(+g.codepage>=0&&Zr(+g.codepage);j!==x.length;++j){N=0;var T=x[j].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(s,r),z=T.replace(/;;/g,"\0").split(";").map(function(Y){return Y.replace(/\u0000/g,";")}),L=z[0],O;if(T.length>0)switch(L){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":z[1].charAt(0)=="P"&&S.push(T.slice(3).replace(/;;/g,";"));break;case"C":var V=!1,Z=!1,D=!1,P=!1,W=-1,ee=-1;for(v=1;v<z.length;++v)switch(z[v].charAt(0)){case"A":break;case"X":m=parseInt(z[v].slice(1))-1,Z=!0;break;case"Y":for(f=parseInt(z[v].slice(1))-1,Z||(m=0),R=w.length;R<=f;++R)w[R]=[];break;case"K":O=z[v].slice(1),O.charAt(0)==='"'?O=O.slice(1,O.length-1):O==="TRUE"?O=!0:O==="FALSE"?O=!1:isNaN(aa(O))?isNaN(sl(O).getDate())||(O=ks(O)):(O=aa(O),F!==null&&ul(F)&&(O=Kd(O))),V=!0;break;case"E":P=!0;var M=Gi(z[v].slice(1),{r:f,c:m});w[f][m]=[w[f][m],M];break;case"S":D=!0,w[f][m]=[w[f][m],"S5S"];break;case"G":break;case"R":W=parseInt(z[v].slice(1))-1;break;case"C":ee=parseInt(z[v].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+T)}if(V&&(w[f][m]&&w[f][m].length==2?w[f][m][0]=O:w[f][m]=O,F=null),D){if(P)throw new Error("SYLK shared formula cannot have own formula");var U=W>-1&&w[W][ee];if(!U||!U[1])throw new Error("SYLK shared formula cannot find base");w[f][m][1]=cj(U[1],{r:f-W,c:m-ee})}break;case"F":var q=0;for(v=1;v<z.length;++v)switch(z[v].charAt(0)){case"X":m=parseInt(z[v].slice(1))-1,++q;break;case"Y":for(f=parseInt(z[v].slice(1))-1,R=w.length;R<=f;++R)w[R]=[];break;case"M":N=parseInt(z[v].slice(1))/20;break;case"F":break;case"G":break;case"P":F=S[parseInt(z[v].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(y=z[v].slice(1).split(" "),R=parseInt(y[0],10);R<=parseInt(y[1],10);++R)N=parseInt(y[2],10),A[R-1]=N===0?{hidden:!0}:{wch:N},rl(A[R-1]);break;case"C":m=parseInt(z[v].slice(1))-1,A[m]||(A[m]={});break;case"R":f=parseInt(z[v].slice(1))-1,k[f]||(k[f]={}),N>0?(k[f].hpt=N,k[f].hpx=Do(N)):N===0&&(k[f].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+T)}q<1&&(F=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+T)}}return k.length>0&&(E["!rows"]=k),A.length>0&&(E["!cols"]=A),g&&g.sheetRows&&(w=w.slice(0,g.sheetRows)),[w,E]}function l(h,g){var x=n(h,g),f=x[0],m=x[1],j=ml(f,g);return ba(m).forEach(function(v){j[v]=m[v]}),j}function o(h,g){return Rn(l(h,g),g)}function c(h,g,x,f){var m="C;Y"+(x+1)+";X"+(f+1)+";K";switch(h.t){case"n":m+=h.v||0,h.f&&!h.F&&(m+=";E"+gT(h.f,{r:x,c:f}));break;case"b":m+=h.v?"TRUE":"FALSE";break;case"e":m+=h.w||h.v;break;case"d":m+='"'+(h.w||h.v)+'"';break;case"s":m+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return m}function d(h,g){g.forEach(function(x,f){var m="F;W"+(f+1)+" "+(f+1)+" ";x.hidden?m+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=kd(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=Sd(x.wpx)),typeof x.wch=="number"&&(m+=Math.round(x.wch))),m.charAt(m.length-1)!=" "&&h.push(m)})}function u(h,g){g.forEach(function(x,f){var m="F;";x.hidden?m+="M0;":x.hpt?m+="M"+20*x.hpt+";":x.hpx&&(m+="M"+20*ij(x.hpx)+";"),m.length>2&&h.push(m+"R"+(f+1))})}function p(h,g){var x=["ID;PWXL;N;E"],f=[],m=Yt(h["!ref"]),j,v=Array.isArray(h),w=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),h["!cols"]&&d(x,h["!cols"]),h["!rows"]&&u(x,h["!rows"]),x.push("B;Y"+(m.e.r-m.s.r+1)+";X"+(m.e.c-m.s.c+1)+";D"+[m.s.c,m.s.r,m.e.c,m.e.r].join(" "));for(var S=m.s.r;S<=m.e.r;++S)for(var F=m.s.c;F<=m.e.c;++F){var E=tt({r:S,c:F});j=v?(h[S]||[])[F]:h[E],!(!j||j.v==null&&(!j.f||j.F))&&f.push(c(j,h,S,F))}return x.join(w)+w+f.join(w)+w+"E"+w}return{to_workbook:o,to_sheet:l,from_sheet:p}}(),P_=function(){function t(i,l){switch(l.type){case"base64":return s(wr(i),l);case"binary":return s(i,l);case"buffer":return s(gt&&Buffer.isBuffer(i)?i.toString("binary"):fi(i),l);case"array":return s(ci(i),l)}throw new Error("Unrecognized type "+l.type)}function s(i,l){for(var o=i.split(`
`),c=-1,d=-1,u=0,p=[];u!==o.length;++u){if(o[u].trim()==="BOT"){p[++c]=[],d=0;continue}if(!(c<0)){var h=o[u].trim().split(","),g=h[0],x=h[1];++u;for(var f=o[u]||"";(f.match(/["]/g)||[]).length&1&&u<o.length-1;)f+=`
`+o[++u];switch(f=f.trim(),+g){case-1:if(f==="BOT"){p[++c]=[],d=0;continue}else if(f!=="EOD")throw new Error("Unrecognized DIF special command "+f);break;case 0:f==="TRUE"?p[c][d]=!0:f==="FALSE"?p[c][d]=!1:isNaN(aa(x))?isNaN(sl(x).getDate())?p[c][d]=x:p[c][d]=ks(x):p[c][d]=aa(x),++d;break;case 1:f=f.slice(1,f.length-1),f=f.replace(/""/g,'"'),f&&f.match(/^=".*"$/)&&(f=f.slice(2,-1)),p[c][d++]=f!==""?f:null;break}if(f==="EOD")break}}return l&&l.sheetRows&&(p=p.slice(0,l.sheetRows)),p}function r(i,l){return ml(t(i,l),l)}function a(i,l){return Rn(r(i,l),l)}var n=function(){var i=function(c,d,u,p,h){c.push(d),c.push(u+","+p),c.push('"'+h.replace(/"/g,'""')+'"')},l=function(c,d,u,p){c.push(d+","+u),c.push(d==1?'"'+p.replace(/"/g,'""')+'"':p)};return function(c){var d=[],u=Yt(c["!ref"]),p,h=Array.isArray(c);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,u.e.r-u.s.r+1,""),i(d,"TUPLES",0,u.e.c-u.s.c+1,""),i(d,"DATA",0,0,"");for(var g=u.s.r;g<=u.e.r;++g){l(d,-1,0,"BOT");for(var x=u.s.c;x<=u.e.c;++x){var f=tt({r:g,c:x});if(p=h?(c[g]||[])[x]:c[f],!p){l(d,1,0,"");continue}switch(p.t){case"n":var m=p.w;!m&&p.v!=null&&(m=p.v),m==null?p.f&&!p.F?l(d,1,0,"="+p.f):l(d,1,0,""):l(d,0,m,"V");break;case"b":l(d,0,p.v?1:0,p.v?"TRUE":"FALSE");break;case"s":l(d,1,0,isNaN(p.v)?p.v:'="'+p.v+'"');break;case"d":p.w||(p.w=Br(p.z||at[14],er(ks(p.v)))),l(d,0,p.w,"V");break;default:l(d,1,0,"")}}}l(d,-1,0,"EOD");var j=`\r
`,v=d.join(j);return v}}();return{to_workbook:a,to_sheet:r,from_sheet:n}}(),D_=function(){function t(p){return p.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function s(p){return p.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(p,h){for(var g=p.split(`
`),x=-1,f=-1,m=0,j=[];m!==g.length;++m){var v=g[m].trim().split(":");if(v[0]==="cell"){var w=Ys(v[1]);if(j.length<=w.r)for(x=j.length;x<=w.r;++x)j[x]||(j[x]=[]);switch(x=w.r,f=w.c,v[2]){case"t":j[x][f]=t(v[3]);break;case"v":j[x][f]=+v[3];break;case"vtf":var S=v[v.length-1];case"vtc":switch(v[3]){case"nl":j[x][f]=!!+v[4];break;default:j[x][f]=+v[4];break}v[2]=="vtf"&&(j[x][f]=[j[x][f],S])}}}return h&&h.sheetRows&&(j=j.slice(0,h.sheetRows)),j}function a(p,h){return ml(r(p,h),h)}function n(p,h){return Rn(a(p,h),h)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),l=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(p){if(!p||!p["!ref"])return"";for(var h=[],g=[],x,f="",m=xl(p["!ref"]),j=Array.isArray(p),v=m.s.r;v<=m.e.r;++v)for(var w=m.s.c;w<=m.e.c;++w)if(f=tt({r:v,c:w}),x=j?(p[v]||[])[w]:p[f],!(!x||x.v==null||x.t==="z")){switch(g=["cell",f,"t"],x.t){case"s":case"str":g.push(s(x.v));break;case"n":x.f?(g[2]="vtf",g[3]="n",g[4]=x.v,g[5]=s(x.f)):(g[2]="v",g[3]=x.v);break;case"b":g[2]="vt"+(x.f?"f":"c"),g[3]="nl",g[4]=x.v?"1":"0",g[5]=s(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var S=er(ks(x.v));g[2]="vtc",g[3]="nd",g[4]=""+S,g[5]=x.w||Br(x.z||at[14],S);break;case"e":continue}h.push(g.join(":"))}return h.push("sheet:c:"+(m.e.c-m.s.c+1)+":r:"+(m.e.r-m.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function u(p){return[i,l,o,l,d(p),c].join(`
`)}return{to_workbook:n,to_sheet:a,from_sheet:u}}(),Fo=function(){function t(u,p,h,g,x){x.raw?p[h][g]=u:u===""||(u==="TRUE"?p[h][g]=!0:u==="FALSE"?p[h][g]=!1:isNaN(aa(u))?isNaN(sl(u).getDate())?p[h][g]=u:p[h][g]=ks(u):p[h][g]=aa(u))}function s(u,p){var h=p||{},g=[];if(!u||u.length===0)return g;for(var x=u.split(/[\r\n]/),f=x.length-1;f>=0&&x[f].length===0;)--f;for(var m=10,j=0,v=0;v<=f;++v)j=x[v].indexOf(" "),j==-1?j=x[v].length:j++,m=Math.max(m,j);for(v=0;v<=f;++v){g[v]=[];var w=0;for(t(x[v].slice(0,m).trim(),g,v,w,h),w=1;w<=(x[v].length-m)/10+1;++w)t(x[v].slice(m+(w-1)*10,m+w*10).trim(),g,v,w,h)}return h.sheetRows&&(g=g.slice(0,h.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function n(u){for(var p={},h=!1,g=0,x=0;g<u.length;++g)(x=u.charCodeAt(g))==34?h=!h:!h&&x in r&&(p[x]=(p[x]||0)+1);x=[];for(g in p)Object.prototype.hasOwnProperty.call(p,g)&&x.push([p[g],g]);if(!x.length){p=a;for(g in p)Object.prototype.hasOwnProperty.call(p,g)&&x.push([p[g],g])}return x.sort(function(f,m){return f[0]-m[0]||a[f[1]]-a[m[1]]}),r[x.pop()[1]]||44}function i(u,p){var h=p||{},g="",x=h.dense?[]:{},f={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(g=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(g=u.charAt(4),u=u.slice(6)):g=n(u.slice(0,1024)):h&&h.FS?g=h.FS:g=n(u.slice(0,1024));var m=0,j=0,v=0,w=0,S=0,F=g.charCodeAt(0),E=!1,k=0,A=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var y=h.dateNF!=null?VS(h.dateNF):null;function N(){var R=u.slice(w,S),T={};if(R.charAt(0)=='"'&&R.charAt(R.length-1)=='"'&&(R=R.slice(1,-1).replace(/""/g,'"')),R.length===0)T.t="z";else if(h.raw)T.t="s",T.v=R;else if(R.trim().length===0)T.t="s",T.v=R;else if(R.charCodeAt(0)==61)R.charCodeAt(1)==34&&R.charCodeAt(R.length-1)==34?(T.t="s",T.v=R.slice(2,-1).replace(/""/g,'"')):bT(R)?(T.t="n",T.f=R.slice(1)):(T.t="s",T.v=R);else if(R=="TRUE")T.t="b",T.v=!0;else if(R=="FALSE")T.t="b",T.v=!1;else if(!isNaN(v=aa(R)))T.t="n",h.cellText!==!1&&(T.w=R),T.v=v;else if(!isNaN(sl(R).getDate())||y&&R.match(y)){T.z=h.dateNF||at[14];var z=0;y&&R.match(y)&&(R=HS(R,h.dateNF,R.match(y)||[]),z=1),h.cellDates?(T.t="d",T.v=ks(R,z)):(T.t="n",T.v=er(ks(R,z))),h.cellText!==!1&&(T.w=Br(T.z,T.v instanceof Date?er(T.v):T.v)),h.cellNF||delete T.z}else T.t="s",T.v=R;if(T.t=="z"||(h.dense?(x[m]||(x[m]=[]),x[m][j]=T):x[tt({c:j,r:m})]=T),w=S+1,A=u.charCodeAt(w),f.e.c<j&&(f.e.c=j),f.e.r<m&&(f.e.r=m),k==F)++j;else if(j=0,++m,h.sheetRows&&h.sheetRows<=m)return!0}e:for(;S<u.length;++S)switch(k=u.charCodeAt(S)){case 34:A===34&&(E=!E);break;case F:case 10:case 13:if(!E&&N())break e;break}return S-w>0&&N(),x["!ref"]=vt(f),x}function l(u,p){return!(p&&p.PRN)||p.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,p):ml(s(u,p),p)}function o(u,p){var h="",g=p.type=="string"?[0,0,0,0]:Gm(u,p);switch(p.type){case"base64":h=wr(u);break;case"binary":h=u;break;case"buffer":p.codepage==65001?h=u.toString("utf8"):p.codepage&&typeof _o<"u"||(h=gt&&Buffer.isBuffer(u)?u.toString("binary"):fi(u));break;case"array":h=ci(u);break;case"string":h=u;break;default:throw new Error("Unrecognized type "+p.type)}return g[0]==239&&g[1]==187&&g[2]==191?h=Lt(h.slice(3)):p.type!="string"&&p.type!="buffer"&&p.codepage==65001?h=Lt(h):p.type=="binary"&&typeof _o<"u",h.slice(0,19)=="socialcalc:version:"?D_.to_sheet(p.type=="string"?h:Lt(h),p):l(h,p)}function c(u,p){return Rn(o(u,p),p)}function d(u){for(var p=[],h=Yt(u["!ref"]),g,x=Array.isArray(u),f=h.s.r;f<=h.e.r;++f){for(var m=[],j=h.s.c;j<=h.e.c;++j){var v=tt({r:f,c:j});if(g=x?(u[f]||[])[j]:u[v],!g||g.v==null){m.push("          ");continue}for(var w=(g.w||(Ha(g),g.w)||"").slice(0,10);w.length<10;)w+=" ";m.push(w+(j===0?" ":""))}p.push(m.join(""))}return p.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:d}}();function R_(t,s){var r=s||{},a=!!r.WTF;r.WTF=!0;try{var n=F_.to_workbook(t,r);return r.WTF=a,n}catch(i){if(r.WTF=a,!i.message.match(/SYLK bad record ID/)&&a)throw i;return Fo.to_workbook(t,s)}}var Ql=function(){function t(M,U,q){if(M){_s(M,M.l||0);for(var Y=q.Enum||W;M.l<M.length;){var K=M.read_shift(2),le=Y[K]||Y[65535],J=M.read_shift(2),ae=M.l+J,he=le.f&&le.f(M,J,q);if(M.l=ae,U(he,le,K))return}}}function s(M,U){switch(U.type){case"base64":return r(Qr(wr(M)),U);case"binary":return r(Qr(M),U);case"buffer":case"array":return r(M,U)}throw"Unsupported type "+U.type}function r(M,U){if(!M)return M;var q=U||{},Y=q.dense?[]:{},K="Sheet1",le="",J=0,ae={},he=[],Fe=[],X={s:{r:0,c:0},e:{r:0,c:0}},Re=q.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)q.Enum=W,t(M,function(be,Ie,Ze){switch(Ze){case 0:q.vers=be,be>=4096&&(q.qpro=!0);break;case 6:X=be;break;case 204:be&&(le=be);break;case 222:le=be;break;case 15:case 51:q.qpro||(be[1].v=be[1].v.slice(1));case 13:case 14:case 16:Ze==14&&(be[2]&112)==112&&(be[2]&15)>1&&(be[2]&15)<15&&(be[1].z=q.dateNF||at[14],q.cellDates&&(be[1].t="d",be[1].v=Kd(be[1].v))),q.qpro&&be[3]>J&&(Y["!ref"]=vt(X),ae[K]=Y,he.push(K),Y=q.dense?[]:{},X={s:{r:0,c:0},e:{r:0,c:0}},J=be[3],K=le||"Sheet"+(J+1),le="");var ge=q.dense?(Y[be[0].r]||[])[be[0].c]:Y[tt(be[0])];if(ge){ge.t=be[1].t,ge.v=be[1].v,be[1].z!=null&&(ge.z=be[1].z),be[1].f!=null&&(ge.f=be[1].f);break}q.dense?(Y[be[0].r]||(Y[be[0].r]=[]),Y[be[0].r][be[0].c]=be[1]):Y[tt(be[0])]=be[1];break}},q);else if(M[2]==26||M[2]==14)q.Enum=ee,M[2]==14&&(q.qpro=!0,M.l=0),t(M,function(be,Ie,Ze){switch(Ze){case 204:K=be;break;case 22:be[1].v=be[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(be[3]>J&&(Y["!ref"]=vt(X),ae[K]=Y,he.push(K),Y=q.dense?[]:{},X={s:{r:0,c:0},e:{r:0,c:0}},J=be[3],K="Sheet"+(J+1)),Re>0&&be[0].r>=Re)break;q.dense?(Y[be[0].r]||(Y[be[0].r]=[]),Y[be[0].r][be[0].c]=be[1]):Y[tt(be[0])]=be[1],X.e.c<be[0].c&&(X.e.c=be[0].c),X.e.r<be[0].r&&(X.e.r=be[0].r);break;case 27:be[14e3]&&(Fe[be[14e3][0]]=be[14e3][1]);break;case 1537:Fe[be[0]]=be[1],be[0]==J&&(K=be[1]);break}},q);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(Y["!ref"]=vt(X),ae[le||K]=Y,he.push(le||K),!Fe.length)return{SheetNames:he,Sheets:ae};for(var ne={},_e=[],Se=0;Se<Fe.length;++Se)ae[he[Se]]?(_e.push(Fe[Se]||he[Se]),ne[Fe[Se]]=ae[Fe[Se]]||ae[he[Se]]):(_e.push(Fe[Se]),ne[Fe[Se]]={"!ref":"A1"});return{SheetNames:_e,Sheets:ne}}function a(M,U){var q=U||{};if(+q.codepage>=0&&Zr(+q.codepage),q.type=="string")throw new Error("Cannot write WK1 to JS string");var Y=rx(),K=Yt(M["!ref"]),le=Array.isArray(M),J=[];Hr(Y,0,i(1030)),Hr(Y,6,c(K));for(var ae=Math.min(K.e.r,8191),he=K.s.r;he<=ae;++he)for(var Fe=As(he),X=K.s.c;X<=K.e.c;++X){he===K.s.r&&(J[X]=ps(X));var Re=J[X]+Fe,ne=le?(M[he]||[])[X]:M[Re];if(!(!ne||ne.t=="z"))if(ne.t=="n")(ne.v|0)==ne.v&&ne.v>=-32768&&ne.v<=32767?Hr(Y,13,g(he,X,ne.v)):Hr(Y,14,f(he,X,ne.v));else{var _e=Ha(ne);Hr(Y,15,p(he,X,_e.slice(0,239)))}}return Hr(Y,1),Y.end()}function n(M,U){var q=U||{};if(+q.codepage>=0&&Zr(+q.codepage),q.type=="string")throw new Error("Cannot write WK3 to JS string");var Y=rx();Hr(Y,0,l(M));for(var K=0,le=0;K<M.SheetNames.length;++K)(M.Sheets[M.SheetNames[K]]||{})["!ref"]&&Hr(Y,27,P(M.SheetNames[K],le++));var J=0;for(K=0;K<M.SheetNames.length;++K){var ae=M.Sheets[M.SheetNames[K]];if(!(!ae||!ae["!ref"])){for(var he=Yt(ae["!ref"]),Fe=Array.isArray(ae),X=[],Re=Math.min(he.e.r,8191),ne=he.s.r;ne<=Re;++ne)for(var _e=As(ne),Se=he.s.c;Se<=he.e.c;++Se){ne===he.s.r&&(X[Se]=ps(Se));var be=X[Se]+_e,Ie=Fe?(ae[ne]||[])[Se]:ae[be];if(!(!Ie||Ie.t=="z"))if(Ie.t=="n")Hr(Y,23,N(ne,Se,J,Ie.v));else{var Ze=Ha(Ie);Hr(Y,22,k(ne,Se,J,Ze.slice(0,239)))}}++J}}return Hr(Y,1),Y.end()}function i(M){var U=us(2);return U.write_shift(2,M),U}function l(M){var U=us(26);U.write_shift(2,4096),U.write_shift(2,4),U.write_shift(4,0);for(var q=0,Y=0,K=0,le=0;le<M.SheetNames.length;++le){var J=M.SheetNames[le],ae=M.Sheets[J];if(!(!ae||!ae["!ref"])){++K;var he=xl(ae["!ref"]);q<he.e.r&&(q=he.e.r),Y<he.e.c&&(Y=he.e.c)}}return q>8191&&(q=8191),U.write_shift(2,q),U.write_shift(1,K),U.write_shift(1,Y),U.write_shift(2,0),U.write_shift(2,0),U.write_shift(1,1),U.write_shift(1,2),U.write_shift(4,0),U.write_shift(4,0),U}function o(M,U,q){var Y={s:{c:0,r:0},e:{c:0,r:0}};return U==8&&q.qpro?(Y.s.c=M.read_shift(1),M.l++,Y.s.r=M.read_shift(2),Y.e.c=M.read_shift(1),M.l++,Y.e.r=M.read_shift(2),Y):(Y.s.c=M.read_shift(2),Y.s.r=M.read_shift(2),U==12&&q.qpro&&(M.l+=2),Y.e.c=M.read_shift(2),Y.e.r=M.read_shift(2),U==12&&q.qpro&&(M.l+=2),Y.s.c==65535&&(Y.s.c=Y.e.c=Y.s.r=Y.e.r=0),Y)}function c(M){var U=us(8);return U.write_shift(2,M.s.c),U.write_shift(2,M.s.r),U.write_shift(2,M.e.c),U.write_shift(2,M.e.r),U}function d(M,U,q){var Y=[{c:0,r:0},{t:"n",v:0},0,0];return q.qpro&&q.vers!=20768?(Y[0].c=M.read_shift(1),Y[3]=M.read_shift(1),Y[0].r=M.read_shift(2),M.l+=2):(Y[2]=M.read_shift(1),Y[0].c=M.read_shift(2),Y[0].r=M.read_shift(2)),Y}function u(M,U,q){var Y=M.l+U,K=d(M,U,q);if(K[1].t="s",q.vers==20768){M.l++;var le=M.read_shift(1);return K[1].v=M.read_shift(le,"utf8"),K}return q.qpro&&M.l++,K[1].v=M.read_shift(Y-M.l,"cstr"),K}function p(M,U,q){var Y=us(7+q.length);Y.write_shift(1,255),Y.write_shift(2,U),Y.write_shift(2,M),Y.write_shift(1,39);for(var K=0;K<Y.length;++K){var le=q.charCodeAt(K);Y.write_shift(1,le>=128?95:le)}return Y.write_shift(1,0),Y}function h(M,U,q){var Y=d(M,U,q);return Y[1].v=M.read_shift(2,"i"),Y}function g(M,U,q){var Y=us(7);return Y.write_shift(1,255),Y.write_shift(2,U),Y.write_shift(2,M),Y.write_shift(2,q,"i"),Y}function x(M,U,q){var Y=d(M,U,q);return Y[1].v=M.read_shift(8,"f"),Y}function f(M,U,q){var Y=us(13);return Y.write_shift(1,255),Y.write_shift(2,U),Y.write_shift(2,M),Y.write_shift(8,q,"f"),Y}function m(M,U,q){var Y=M.l+U,K=d(M,U,q);if(K[1].v=M.read_shift(8,"f"),q.qpro)M.l=Y;else{var le=M.read_shift(2);S(M.slice(M.l,M.l+le),K),M.l+=le}return K}function j(M,U,q){var Y=U&32768;return U&=-32769,U=(Y?M:0)+(U>=8192?U-16384:U),(Y?"":"$")+(q?ps(U):As(U))}var v={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},w=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function S(M,U){_s(M,0);for(var q=[],Y=0,K="",le="",J="",ae="";M.l<M.length;){var he=M[M.l++];switch(he){case 0:q.push(M.read_shift(8,"f"));break;case 1:le=j(U[0].c,M.read_shift(2),!0),K=j(U[0].r,M.read_shift(2),!1),q.push(le+K);break;case 2:{var Fe=j(U[0].c,M.read_shift(2),!0),X=j(U[0].r,M.read_shift(2),!1);le=j(U[0].c,M.read_shift(2),!0),K=j(U[0].r,M.read_shift(2),!1),q.push(Fe+X+":"+le+K)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:q.push("("+q.pop()+")");break;case 5:q.push(M.read_shift(2));break;case 6:{for(var Re="";he=M[M.l++];)Re+=String.fromCharCode(he);q.push('"'+Re.replace(/"/g,'""')+'"')}break;case 8:q.push("-"+q.pop());break;case 23:q.push("+"+q.pop());break;case 22:q.push("NOT("+q.pop()+")");break;case 20:case 21:ae=q.pop(),J=q.pop(),q.push(["AND","OR"][he-20]+"("+J+","+ae+")");break;default:if(he<32&&w[he])ae=q.pop(),J=q.pop(),q.push(J+w[he]+ae);else if(v[he]){if(Y=v[he][1],Y==69&&(Y=M[M.l++]),Y>q.length){console.error("WK1 bad formula parse 0x"+he.toString(16)+":|"+q.join("|")+"|");return}var ne=q.slice(-Y);q.length-=Y,q.push(v[he][0]+"("+ne.join(",")+")")}else return he<=7?console.error("WK1 invalid opcode "+he.toString(16)):he<=24?console.error("WK1 unsupported op "+he.toString(16)):he<=30?console.error("WK1 invalid opcode "+he.toString(16)):he<=115?console.error("WK1 unsupported function opcode "+he.toString(16)):console.error("WK1 unrecognized opcode "+he.toString(16))}}q.length==1?U[1].f=""+q[0]:console.error("WK1 bad formula parse |"+q.join("|")+"|")}function F(M){var U=[{c:0,r:0},{t:"n",v:0},0];return U[0].r=M.read_shift(2),U[3]=M[M.l++],U[0].c=M[M.l++],U}function E(M,U){var q=F(M);return q[1].t="s",q[1].v=M.read_shift(U-4,"cstr"),q}function k(M,U,q,Y){var K=us(6+Y.length);K.write_shift(2,M),K.write_shift(1,q),K.write_shift(1,U),K.write_shift(1,39);for(var le=0;le<Y.length;++le){var J=Y.charCodeAt(le);K.write_shift(1,J>=128?95:J)}return K.write_shift(1,0),K}function A(M,U){var q=F(M);q[1].v=M.read_shift(2);var Y=q[1].v>>1;if(q[1].v&1)switch(Y&7){case 0:Y=(Y>>3)*5e3;break;case 1:Y=(Y>>3)*500;break;case 2:Y=(Y>>3)/20;break;case 3:Y=(Y>>3)/200;break;case 4:Y=(Y>>3)/2e3;break;case 5:Y=(Y>>3)/2e4;break;case 6:Y=(Y>>3)/16;break;case 7:Y=(Y>>3)/64;break}return q[1].v=Y,q}function y(M,U){var q=F(M),Y=M.read_shift(4),K=M.read_shift(4),le=M.read_shift(2);if(le==65535)return Y===0&&K===3221225472?(q[1].t="e",q[1].v=15):Y===0&&K===3489660928?(q[1].t="e",q[1].v=42):q[1].v=0,q;var J=le&32768;return le=(le&32767)-16446,q[1].v=(1-J*2)*(K*Math.pow(2,le+32)+Y*Math.pow(2,le)),q}function N(M,U,q,Y){var K=us(14);if(K.write_shift(2,M),K.write_shift(1,q),K.write_shift(1,U),Y==0)return K.write_shift(4,0),K.write_shift(4,0),K.write_shift(2,65535),K;var le=0,J=0,ae=0,he=0;return Y<0&&(le=1,Y=-Y),J=Math.log2(Y)|0,Y/=Math.pow(2,J-31),he=Y>>>0,he&2147483648||(Y/=2,++J,he=Y>>>0),Y-=he,he|=2147483648,he>>>=0,Y*=Math.pow(2,32),ae=Y>>>0,K.write_shift(4,ae),K.write_shift(4,he),J+=16383+(le?32768:0),K.write_shift(2,J),K}function R(M,U){var q=y(M);return M.l+=U-14,q}function T(M,U){var q=F(M),Y=M.read_shift(4);return q[1].v=Y>>6,q}function z(M,U){var q=F(M),Y=M.read_shift(8,"f");return q[1].v=Y,q}function L(M,U){var q=z(M);return M.l+=U-10,q}function O(M,U){return M[M.l+U-1]==0?M.read_shift(U,"cstr"):""}function V(M,U){var q=M[M.l++];q>U-1&&(q=U-1);for(var Y="";Y.length<q;)Y+=String.fromCharCode(M[M.l++]);return Y}function Z(M,U,q){if(!(!q.qpro||U<21)){var Y=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var K=M.read_shift(U-21,"cstr");return[Y,K]}}function D(M,U){for(var q={},Y=M.l+U;M.l<Y;){var K=M.read_shift(2);if(K==14e3){for(q[K]=[0,""],q[K][0]=M.read_shift(2);M[M.l];)q[K][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return q}function P(M,U){var q=us(5+M.length);q.write_shift(2,14e3),q.write_shift(2,U);for(var Y=0;Y<M.length;++Y){var K=M.charCodeAt(Y);q[q.l++]=K>127?95:K}return q[q.l++]=0,q}var W={0:{n:"BOF",f:is},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:m},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:O},222:{n:"SHEETNAMELP",f:V},65535:{n:""}},ee={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:E},23:{n:"NUMBER17",f:y},24:{n:"NUMBER18",f:A},25:{n:"FORMULA19",f:R},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:D},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:T},38:{n:"??"},39:{n:"NUMBER27",f:z},40:{n:"FORMULA28",f:L},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:O},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Z},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:n,to_workbook:s}}();function L_(t){var s={},r=t.match(Gs),a=0,n=!1;if(r)for(;a!=r.length;++a){var i=Ke(r[a]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":s.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;s.cp=wm[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":s.outline=1;break;case"</outline>":break;case"<rFont":s.name=i.val;break;case"<sz":s.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":s.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":s.uval="double";break;case"singleAccounting":s.uval="single-accounting";break;case"doubleAccounting":s.uval="double-accounting";break}case"<u>":case"<u/>":s.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":s.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":s.i=1;break;case"</i>":break;case"<color":i.rgb&&(s.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":s.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":s.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(i[0].charCodeAt(1)!==47&&!n)throw new Error("Unrecognized rich format "+i[0])}}return s}var O_=function(){var t=Eo("t"),s=Eo("rPr");function r(i){var l=i.match(t);if(!l)return{t:"s",v:""};var o={t:"s",v:kt(l[1])},c=i.match(s);return c&&(o.s=L_(c[1])),o}var a=/<(?:\w+:)?r>/g,n=/<\/(?:\w+:)?r>/;return function(l){return l.replace(a,"").split(n).map(r).filter(function(o){return o.v})}}(),I_=function(){var s=/(\r\n|\n)/g;function r(n,i,l){var o=[];n.u&&o.push("text-decoration: underline;"),n.uval&&o.push("text-underline-style:"+n.uval+";"),n.sz&&o.push("font-size:"+n.sz+"pt;"),n.outline&&o.push("text-effect: outline;"),n.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),n.b&&(i.push("<b>"),l.push("</b>")),n.i&&(i.push("<i>"),l.push("</i>")),n.strike&&(i.push("<s>"),l.push("</s>"));var c=n.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),l.push("</"+c+">")),l.push("</span>"),n}function a(n){var i=[[],n.v,[]];return n.v?(n.s&&r(n.s,i[0],i[2]),i[0].join("")+i[1].replace(s,"<br/>")+i[2].join("")):""}return function(i){return i.map(a).join("")}}(),M_=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,B_=/<(?:\w+:)?r>/,$_=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function Bm(t,s){var r=s?s.cellHTML:!0,a={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=kt(Lt(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=Lt(t),r&&(a.h=Em(a.t))):t.match(B_)&&(a.r=Lt(t),a.t=kt(Lt((t.replace($_,"").match(M_)||[]).join("").replace(Gs,""))),r&&(a.h=I_(O_(a.r)))),a):{t:""}}var U_=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,z_=/<(?:\w+:)?(?:si|sstItem)>/g,W_=/<\/(?:\w+:)?(?:si|sstItem)>/;function V_(t,s){var r=[],a="";if(!t)return r;var n=t.match(U_);if(n){a=n[2].replace(z_,"").split(W_);for(var i=0;i!=a.length;++i){var l=Bm(a[i].trim(),s);l!=null&&(r[r.length]=l)}n=Ke(n[1]),r.Count=n.count,r.Unique=n.uniqueCount}return r}function H_(t){return[t.read_shift(4),t.read_shift(4)]}function G_(t,s){var r=[],a=!1;return Ja(t,function(i,l,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(l.T,!a||s.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function ej(t){for(var s=[],r=t.split(""),a=0;a<r.length;++a)s[a]=r[a].charCodeAt(0);return s}function Ma(t,s){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),s>=4&&(t.l+=s-4),r}function q_(t){var s={};return s.id=t.read_shift(0,"lpp4"),s.R=Ma(t,4),s.U=Ma(t,4),s.W=Ma(t,4),s}function J_(t){for(var s=t.read_shift(4),r=t.l+s-4,a={},n=t.read_shift(4),i=[];n-- >0;)i.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(a.name=t.read_shift(0,"lpp4"),a.comps=i,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return a}function K_(t){var s=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)s.push(J_(t));return s}function Y_(t){var s=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)s.push(t.read_shift(0,"lpp4"));return s}function X_(t){var s={};return t.read_shift(4),t.l+=4,s.id=t.read_shift(0,"lpp4"),s.name=t.read_shift(0,"lpp4"),s.R=Ma(t,4),s.U=Ma(t,4),s.W=Ma(t,4),s}function Q_(t){var s=X_(t);if(s.ename=t.read_shift(0,"8lpp4"),s.blksz=t.read_shift(4),s.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return s}function tj(t,s){var r=t.l+s,a={};a.Flags=t.read_shift(4)&63,t.l+=4,a.AlgID=t.read_shift(4);var n=!1;switch(a.AlgID){case 26126:case 26127:case 26128:n=a.Flags==36;break;case 26625:n=a.Flags==4;break;case 0:n=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!n)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=t.read_shift(4),a.KeySize=t.read_shift(4),a.ProviderType=t.read_shift(4),t.l+=8,a.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,a}function sj(t,s){var r={},a=t.l+s;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,a),t.l=a,r}function Z_(t){var s=Ma(t);switch(s.Minor){case 2:return[s.Minor,e5(t)];case 3:return[s.Minor,t5()];case 4:return[s.Minor,s5(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+s.Minor)}function e5(t){var s=t.read_shift(4);if((s&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),a=tj(t,r),n=sj(t,t.length-t.l);return{t:"Std",h:a,v:n}}function t5(){throw new Error("File is password-protected: ECMA-376 Extensible")}function s5(t){var s=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),a={};return r.replace(Gs,function(i){var l=Ke(i);switch(Na(l[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":s.forEach(function(o){a[o]=l[o]});break;case"<dataIntegrity":a.encryptedHmacKey=l.encryptedHmacKey,a.encryptedHmacValue=l.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=l.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(l);break;default:throw l[0]}}),a}function r5(t,s){var r={},a=r.EncryptionVersionInfo=Ma(t,4);if(s-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);r.Flags=t.read_shift(4),s-=4;var n=t.read_shift(4);return s-=4,r.EncryptionHeader=tj(t,n),s-=n,r.EncryptionVerifier=sj(t,s),r}function a5(t){var s={},r=s.EncryptionVersionInfo=Ma(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return s.Salt=t.read_shift(16),s.EncryptedVerifier=t.read_shift(16),s.EncryptedVerifierHash=t.read_shift(16),s}function n5(t){var s=0,r,a=ej(t),n=a.length+1,i,l,o,c,d;for(r=_n(n),r[0]=a.length,i=1;i!=n;++i)r[i]=a[i-1];for(i=n-1;i>=0;--i)l=r[i],o=s&16384?1:0,c=s<<1&32767,d=o|c,s=d^l;return s^52811}var rj=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],s=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(l){return(l/2|l*128)&255},n=function(l,o){return a(l^o)},i=function(l){for(var o=s[l.length-1],c=104,d=l.length-1;d>=0;--d)for(var u=l[d],p=0;p!=7;++p)u&64&&(o^=r[c]),u*=2,--c;return o};return function(l){for(var o=ej(l),c=i(o),d=o.length,u=_n(16),p=0;p!=16;++p)u[p]=0;var h,g,x;for((d&1)===1&&(h=c>>8,u[d]=n(t[0],h),--d,h=c&255,g=o[o.length-1],u[d]=n(g,h));d>0;)--d,h=c>>8,u[d]=n(o[d],h),--d,h=c&255,u[d]=n(o[d],h);for(d=15,x=15-o.length;x>0;)h=c>>8,u[d]=n(t[x],h),--d,--x,h=c&255,u[d]=n(o[d],h),--d,--x;return u}}(),i5=function(t,s,r,a,n){n||(n=s),a||(a=rj(t));var i,l;for(i=0;i!=s.length;++i)l=s[i],l^=a[r],l=(l>>5|l<<3)&255,n[i]=l,++r;return[n,r,a]},l5=function(t){var s=0,r=rj(t);return function(a){var n=i5("",a,s,r);return s=n[1],n[0]}};function o5(t,s,r,a){var n={key:is(t),verificationBytes:is(t)};return r.password&&(n.verifier=n5(r.password)),a.valid=n.verificationBytes===n.verifier,a.valid&&(a.insitu=l5(r.password)),n}function c5(t,s,r){var a=r||{};return a.Info=t.read_shift(2),t.l-=2,a.Info===1?a.Data=a5(t):a.Data=r5(t,s),a}function d5(t,s,r){var a={Type:r.biff>=8?t.read_shift(2):0};return a.Type?c5(t,s-2,a):o5(t,r.biff>=8?s:s-2,r,a),a}var u5=function(){function t(n,i){switch(i.type){case"base64":return s(wr(n),i);case"binary":return s(n,i);case"buffer":return s(gt&&Buffer.isBuffer(n)?n.toString("binary"):fi(n),i);case"array":return s(ci(n),i)}throw new Error("Unrecognized type "+i.type)}function s(n,i){var l=i||{},o=l.dense?[]:{},c=n.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,p){Array.isArray(o)&&(o[p]=[]);for(var h=/\\\w+\b/g,g=0,x,f=-1;x=h.exec(u);){switch(x[0]){case"\\cell":var m=u.slice(g,h.lastIndex-x[0].length);if(m[0]==" "&&(m=m.slice(1)),++f,m.length){var j={v:m,t:"s"};Array.isArray(o)?o[p][f]=j:o[tt({r:p,c:f})]=j}break}g=h.lastIndex}f>d.e.c&&(d.e.c=f)}),o["!ref"]=vt(d),o}function r(n,i){return Rn(t(n,i),i)}function a(n){for(var i=["{\\rtf1\\ansi"],l=Yt(n["!ref"]),o,c=Array.isArray(n),d=l.s.r;d<=l.e.r;++d){i.push("\\trowd\\trautofit1");for(var u=l.s.c;u<=l.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=l.s.c;u<=l.e.c;++u){var p=tt({r:d,c:u});o=c?(n[d]||[])[u]:n[p],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(Ha(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:a}}();function x5(t){var s=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(s.slice(0,2),16),parseInt(s.slice(2,4),16),parseInt(s.slice(4,6),16)]}function Po(t){for(var s=0,r=1;s!=3;++s)r=r*256+(t[s]>255?255:t[s]<0?0:t[s]);return r.toString(16).toUpperCase().slice(1)}function m5(t){var s=t[0]/255,r=t[1]/255,a=t[2]/255,n=Math.max(s,r,a),i=Math.min(s,r,a),l=n-i;if(l===0)return[0,0,s];var o=0,c=0,d=n+i;switch(c=l/(d>1?2-d:d),n){case s:o=((r-a)/l+6)%6;break;case r:o=(a-s)/l+2;break;case a:o=(s-r)/l+4;break}return[o/6,c,d/2]}function h5(t){var s=t[0],r=t[1],a=t[2],n=r*2*(a<.5?a:1-a),i=a-n/2,l=[i,i,i],o=6*s,c;if(r!==0)switch(o|0){case 0:case 6:c=n*o,l[0]+=n,l[1]+=c;break;case 1:c=n*(2-o),l[0]+=c,l[1]+=n;break;case 2:c=n*(o-2),l[1]+=n,l[2]+=c;break;case 3:c=n*(4-o),l[1]+=c,l[2]+=n;break;case 4:c=n*(o-4),l[2]+=n,l[0]+=c;break;case 5:c=n*(6-o),l[2]+=c,l[0]+=n;break}for(var d=0;d!=3;++d)l[d]=Math.round(l[d]*255);return l}function Nd(t,s){if(s===0)return t;var r=m5(x5(t));return s<0?r[2]=r[2]*(1+s):r[2]=1-(1-r[2])*(1-s),Po(h5(r))}var aj=6,f5=15,p5=1,Ks=aj;function kd(t){return Math.floor((t+Math.round(128/Ks)/256)*Ks)}function Sd(t){return Math.floor((t-5)/Ks*100+.5)/100}function lx(t){return Math.round((t*Ks+5)/Ks*256)/256}function I0(t){return lx(Sd(kd(t)))}function $m(t){var s=Math.abs(t-I0(t)),r=Ks;if(s>.005)for(Ks=p5;Ks<f5;++Ks)Math.abs(t-I0(t))<=s&&(s=Math.abs(t-I0(t)),r=Ks);Ks=r}function rl(t){t.width?(t.wpx=kd(t.width),t.wch=Sd(t.wpx),t.MDW=Ks):t.wpx?(t.wch=Sd(t.wpx),t.width=lx(t.wch),t.MDW=Ks):typeof t.wch=="number"&&(t.width=lx(t.wch),t.wpx=kd(t.width),t.MDW=Ks),t.customWidth&&delete t.customWidth}var g5=96,nj=g5;function ij(t){return t*96/nj}function Do(t){return t*nj/96}var y5={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function b5(t,s,r,a){s.Borders=[];var n={},i=!1;(t[0].match(Gs)||[]).forEach(function(l){var o=Ke(l);switch(Na(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":n={},o.diagonalUp&&(n.diagonalUp=$t(o.diagonalUp)),o.diagonalDown&&(n.diagonalDown=$t(o.diagonalDown)),s.Borders.push(n);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function v5(t,s,r,a){s.Fills=[];var n={},i=!1;(t[0].match(Gs)||[]).forEach(function(l){var o=Ke(l);switch(Na(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":n={},s.Fills.push(n);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":s.Fills.push(n),n={};break;case"<patternFill":case"<patternFill>":o.patternType&&(n.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":n.bgColor||(n.bgColor={}),o.indexed&&(n.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(n.bgColor.theme=parseInt(o.theme,10)),o.tint&&(n.bgColor.tint=parseFloat(o.tint)),o.rgb&&(n.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":n.fgColor||(n.fgColor={}),o.theme&&(n.fgColor.theme=parseInt(o.theme,10)),o.tint&&(n.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(n.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function j5(t,s,r,a){s.Fonts=[];var n={},i=!1;(t[0].match(Gs)||[]).forEach(function(l){var o=Ke(l);switch(Na(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":s.Fonts.push(n),n={};break;case"<name":o.val&&(n.name=Lt(o.val));break;case"<name/>":case"</name>":break;case"<b":n.bold=o.val?$t(o.val):1;break;case"<b/>":n.bold=1;break;case"<i":n.italic=o.val?$t(o.val):1;break;case"<i/>":n.italic=1;break;case"<u":switch(o.val){case"none":n.underline=0;break;case"single":n.underline=1;break;case"double":n.underline=2;break;case"singleAccounting":n.underline=33;break;case"doubleAccounting":n.underline=34;break}break;case"<u/>":n.underline=1;break;case"<strike":n.strike=o.val?$t(o.val):1;break;case"<strike/>":n.strike=1;break;case"<outline":n.outline=o.val?$t(o.val):1;break;case"<outline/>":n.outline=1;break;case"<shadow":n.shadow=o.val?$t(o.val):1;break;case"<shadow/>":n.shadow=1;break;case"<condense":n.condense=o.val?$t(o.val):1;break;case"<condense/>":n.condense=1;break;case"<extend":n.extend=o.val?$t(o.val):1;break;case"<extend/>":n.extend=1;break;case"<sz":o.val&&(n.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(n.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(n.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(n.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=wm[parseInt(o.val,10)];break;case"<color":if(n.color||(n.color={}),o.auto&&(n.color.auto=$t(o.auto)),o.rgb)n.color.rgb=o.rgb.slice(-6);else if(o.indexed){n.color.index=parseInt(o.indexed,10);var c=Zn[n.color.index];n.color.index==81&&(c=Zn[1]),c||(c=Zn[1]),n.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(n.color.theme=parseInt(o.theme,10),o.tint&&(n.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(n.color.rgb=Nd(r.themeElements.clrScheme[n.color.theme].rgb,n.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function w5(t,s,r){s.NumberFmt=[];for(var a=ba(at),n=0;n<a.length;++n)s.NumberFmt[a[n]]=at[a[n]];var i=t[0].match(Gs);if(i)for(n=0;n<i.length;++n){var l=Ke(i[n]);switch(Na(l[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=kt(Lt(l.formatCode)),c=parseInt(l.numFmtId,10);if(s.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&s.NumberFmt[c]!=null;--c);s.NumberFmt[c]=o}Qn(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+l[0]+" in numFmts")}}}var jc=["numFmtId","fillId","fontId","borderId","xfId"],wc=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function N5(t,s,r){s.CellXf=[];var a,n=!1;(t[0].match(Gs)||[]).forEach(function(i){var l=Ke(i),o=0;switch(Na(l[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=l,delete a[0],o=0;o<jc.length;++o)a[jc[o]]&&(a[jc[o]]=parseInt(a[jc[o]],10));for(o=0;o<wc.length;++o)a[wc[o]]&&(a[wc[o]]=$t(a[wc[o]]));if(s.NumberFmt&&a.numFmtId>392){for(o=392;o>60;--o)if(s.NumberFmt[a.numFmtId]==s.NumberFmt[o]){a.numFmtId=o;break}}s.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};l.vertical&&(c.vertical=l.vertical),l.horizontal&&(c.horizontal=l.horizontal),l.textRotation!=null&&(c.textRotation=l.textRotation),l.indent&&(c.indent=l.indent),l.wrapText&&(c.wrapText=$t(l.wrapText)),a.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":n=!0;break;case"</AlternateContent>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(r&&r.WTF&&!n)throw new Error("unrecognized "+l[0]+" in cellXfs")}})}var k5=function(){var s=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,n=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,d){var u={};if(!o)return u;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var p;return(p=o.match(s))&&w5(p,u,d),(p=o.match(n))&&j5(p,u,c,d),(p=o.match(a))&&v5(p,u,c,d),(p=o.match(i))&&b5(p,u,c,d),(p=o.match(r))&&N5(p,u,d),u}}();function S5(t,s){var r=t.read_shift(2),a=Ws(t);return[r,a]}function C5(t,s,r){var a={};a.sz=t.read_shift(2)/20;var n=OC(t);n.fItalic&&(a.italic=1),n.fCondense&&(a.condense=1),n.fExtend&&(a.extend=1),n.fShadow&&(a.shadow=1),n.fOutline&&(a.outline=1),n.fStrikeout&&(a.strike=1);var i=t.read_shift(2);switch(i===700&&(a.bold=1),t.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var l=t.read_shift(1);l!=0&&(a.underline=l);var o=t.read_shift(1);o>0&&(a.family=o);var c=t.read_shift(1);switch(c>0&&(a.charset=c),t.l++,a.color=LC(t),t.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=Ws(t),a}var _5=Hs;function T5(t,s){var r=t.l+s,a=t.read_shift(2),n=t.read_shift(2);return t.l=r,{ixfe:a,numFmtId:n}}var E5=Hs;function A5(t,s,r){var a={};a.NumberFmt=[];for(var n in at)a.NumberFmt[n]=at[n];a.CellXf=[],a.Fonts=[];var i=[],l=!1;return Ja(t,function(c,d,u){switch(u){case 44:a.NumberFmt[c[0]]=c[1],Qn(c[1],c[0]);break;case 43:a.Fonts.push(c),c.color.theme!=null&&s&&s.themeElements&&s.themeElements.clrScheme&&(c.color.rgb=Nd(s.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&a.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:i.push(u),l=!0;break;case 38:i.pop(),l=!1;break;default:if(d.T>0)i.push(u);else if(d.T<0)i.pop();else if(!l||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),a}var F5=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function P5(t,s,r){s.themeElements.clrScheme=[];var a={};(t[0].match(Gs)||[]).forEach(function(n){var i=Ke(n);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=i.val;break;case"<a:sysClr":a.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(s.themeElements.clrScheme[F5.indexOf(i[0])]=a,a={}):a.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function D5(){}function R5(){}var L5=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,O5=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,I5=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function M5(t,s,r){s.themeElements={};var a;[["clrScheme",L5,P5],["fontScheme",O5,D5],["fmtScheme",I5,R5]].forEach(function(n){if(!(a=t.match(n[1])))throw new Error(n[0]+" not found in themeElements");n[2](a,s,r)})}var B5=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function lj(t,s){(!t||t.length===0)&&(t=$5());var r,a={};if(!(r=t.match(B5)))throw new Error("themeElements not found in theme");return M5(r[0],a,s),a.raw=t,a}function $5(t,s){var r=[yv];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function U5(t,s,r){var a=t.l+s,n=t.read_shift(4);if(n!==124226){if(!r.cellStyles){t.l=a;return}var i=t.slice(t.l);t.l=a;var l;try{l=gv(i,{type:"array"})}catch{return}var o=gr(l,"theme/theme/theme1.xml",!0);if(o)return lj(o,r)}}function z5(t){return t.read_shift(4)}function W5(t){var s={};switch(s.xclrType=t.read_shift(2),s.nTintShade=t.read_shift(2),s.xclrType){case 0:t.l+=4;break;case 1:s.xclrValue=V5(t,4);break;case 2:s.xclrValue=qv(t);break;case 3:s.xclrValue=z5(t);break;case 4:t.l+=4;break}return t.l+=8,s}function V5(t,s){return Hs(t,s)}function H5(t,s){return Hs(t,s)}function G5(t){var s=t.read_shift(2),r=t.read_shift(2)-4,a=[s];switch(s){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=W5(t);break;case 6:a[1]=H5(t,r);break;case 14:case 15:a[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+s+" "+r)}return a}function q5(t,s){var r=t.l+s;t.l+=2;var a=t.read_shift(2);t.l+=2;for(var n=t.read_shift(2),i=[];n-- >0;)i.push(G5(t,r-t.l));return{ixfe:a,ext:i}}function J5(t,s){s.forEach(function(r){switch(r[0]){}})}function K5(t,s){return{flags:t.read_shift(4),version:t.read_shift(4),name:Ws(t)}}function Y5(t){for(var s=[],r=t.read_shift(4);r-- >0;)s.push([t.read_shift(4),t.read_shift(4)]);return s}function X5(t){return t.l+=4,t.read_shift(4)!=0}function Q5(t,s,r){var a={Types:[],Cell:[],Value:[]},n=r||{},i=[],l=!1,o=2;return Ja(t,function(c,d,u){switch(u){case 335:a.Types.push({name:c.name});break;case 51:c.forEach(function(p){o==1?a.Cell.push({type:a.Types[p[0]-1].name,index:p[1]}):o==0&&a.Value.push({type:a.Types[p[0]-1].name,index:p[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:i.push(u),l=!0;break;case 36:i.pop(),l=!1;break;default:if(!d.T){if(!l||n.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),a}function Z5(t,s,r){var a={Types:[],Cell:[],Value:[]};if(!t)return a;var n=!1,i=2,l;return t.replace(Gs,function(o){var c=Ke(o);switch(Na(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<a.Types.length;++d)a.Types[d].name==c.name&&(l=a.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?a.Cell.push({type:a.Types[c.t-1].name,index:+c.v}):i==0&&a.Value.push({type:a.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<rvb":if(!l)break;l.offsets||(l.offsets=[]),l.offsets.push(+c.i);break;default:if(!n&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),a}function eT(t){var s=[];if(!t)return s;var r=1;return(t.match(Gs)||[]).forEach(function(a){var n=Ke(a);switch(n[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete n[0],n.i?r=n.i:n.i=r,s.push(n);break}}),s}function tT(t){var s={};s.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),s.r=tt(r);var a=t.read_shift(1);return a&2&&(s.l="1"),a&8&&(s.a="1"),s}function sT(t,s,r){var a=[];return Ja(t,function(i,l,o){switch(o){case 63:a.push(i);break;default:if(!l.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),a}function rT(t,s,r,a){if(!t)return t;var n=a||{},i=!1;Ja(t,function(o,c,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||n.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},n)}function aT(t,s){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return s["!id"][r].Target}function Cp(t,s,r,a){var n=Array.isArray(t),i;s.forEach(function(l){var o=Ys(l.ref);if(n?(t[o.r]||(t[o.r]=[]),i=t[o.r][o.c]):i=t[l.ref],!i){i={t:"z"},n?t[o.r][o.c]=i:t[l.ref]=i;var c=Yt(t["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var d=vt(c);d!==t["!ref"]&&(t["!ref"]=d)}i.c||(i.c=[]);var u={a:l.author,t:l.t,r:l.r,T:r};l.h&&(u.h=l.h);for(var p=i.c.length-1;p>=0;--p){if(!r&&i.c[p].T)return;r&&!i.c[p].T&&i.c.splice(p,1)}if(r&&a){for(p=0;p<a.length;++p)if(u.a==a[p].id){u.a=a[p].name||u.a;break}}i.c.push(u)})}function nT(t,s){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],a=[],n=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);n&&n[1]&&n[1].split(/<\/\w*:?author>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=Ke(o[0]),d={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},u=Ys(c.ref);if(!(s.sheetRows&&s.sheetRows<=u.r)){var p=l.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!p&&!!p[1]&&Bm(p[1])||{r:"",t:"",h:""};d.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),d.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),s.cellHTML&&(d.h=h.h),a.push(d)}}}}),a}function iT(t,s){var r=[],a=!1,n={},i=0;return t.replace(Gs,function(o,c){var d=Ke(o);switch(Na(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":n={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":n.t!=null&&r.push(n);break;case"<text>":case"<text":i=c+o.length;break;case"</text>":n.t=t.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&s.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return o}),r}function lT(t,s){var r=[],a=!1;return t.replace(Gs,function(i){var l=Ke(i);switch(Na(l[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:l.displayname,id:l.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&s.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return i}),r}function oT(t){var s={};s.iauthor=t.read_shift(4);var r=gi(t);return s.rfx=r.s,s.ref=tt(r.s),t.l+=16,s}var cT=Ws;function dT(t,s){var r=[],a=[],n={},i=!1;return Ja(t,function(o,c,d){switch(d){case 632:a.push(o);break;case 635:n=o;break;case 637:n.t=o.t,n.h=o.h,n.r=o.r;break;case 636:if(n.author=a[n.iauthor],delete n.iauthor,s.sheetRows&&n.rfx&&s.sheetRows<=n.rfx.r)break;n.t||(n.t=""),delete n.rfx,r.push(n);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}var uT="application/vnd.ms-office.vbaProject";function xT(t){var s=bt.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,a){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var n=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");bt.utils.cfb_add(s,n,t.FileIndex[a].content)}}),bt.write(s)}function mT(){return{"!type":"dialog"}}function hT(){return{"!type":"dialog"}}function fT(){return{"!type":"macro"}}function pT(){return{"!type":"macro"}}var Gi=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,s={r:0,c:0};function r(a,n,i,l){var o=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),l.length==0?o=!0:l.charAt(0)=="["&&(o=!0,l=l.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,u=l.length>0?parseInt(l,10)|0:0;return o?u+=s.c:--u,c?d+=s.r:--d,n+(o?"":"$")+ps(u)+(c?"":"$")+As(d)}return function(n,i){return s=i,n.replace(t,r)}}(),oj=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,gT=function(){return function(s,r){return s.replace(oj,function(a,n,i,l,o,c){var d=Dm(l)-(i?0:r.c),u=Pm(c)-(o?0:r.r),p=u==0?"":o?u+1:"["+u+"]",h=d==0?"":i?d+1:"["+d+"]";return n+"R"+p+"C"+h})}}();function cj(t,s){return t.replace(oj,function(r,a,n,i,l,o){return a+(n=="$"?n+i:ps(Dm(i)+s.c))+(l=="$"?l+o:As(Pm(o)+s.r))})}function yT(t,s,r){var a=xl(s),n=a.s,i=Ys(r),l={r:i.r-n.r,c:i.c-n.c};return cj(t,l)}function bT(t){return t.length!=1}function _p(t){return t.replace(/_xlfn\./g,"")}function as(t){t.l+=1}function Tn(t,s){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function dj(t,s,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return uj(t);r.biff==12&&(a=4)}var n=t.read_shift(a),i=t.read_shift(a),l=Tn(t),o=Tn(t);return{s:{r:n,c:l[0],cRel:l[1],rRel:l[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function uj(t){var s=Tn(t),r=Tn(t),a=t.read_shift(1),n=t.read_shift(1);return{s:{r:s[0],c:a,cRel:s[1],rRel:s[2]},e:{r:r[0],c:n,cRel:r[1],rRel:r[2]}}}function vT(t,s,r){if(r.biff<8)return uj(t);var a=t.read_shift(r.biff==12?4:2),n=t.read_shift(r.biff==12?4:2),i=Tn(t),l=Tn(t);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:n,c:l[0],cRel:l[1],rRel:l[2]}}}function xj(t,s,r){if(r&&r.biff>=2&&r.biff<=5)return jT(t);var a=t.read_shift(r&&r.biff==12?4:2),n=Tn(t);return{r:a,c:n[0],cRel:n[1],rRel:n[2]}}function jT(t){var s=Tn(t),r=t.read_shift(1);return{r:s[0],c:r,cRel:s[1],rRel:s[2]}}function wT(t){var s=t.read_shift(2),r=t.read_shift(2);return{r:s,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function NT(t,s,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return kT(t);var n=t.read_shift(a>=12?4:2),i=t.read_shift(2),l=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;n>524287;)n-=1048576;if(l==1)for(;i>8191;)i=i-16384;return{r:n,c:i,cRel:l,rRel:o}}function kT(t){var s=t.read_shift(2),r=t.read_shift(1),a=(s&32768)>>15,n=(s&16384)>>14;return s&=16383,a==1&&s>=8192&&(s=s-16384),n==1&&r>=128&&(r=r-256),{r:s,c:r,cRel:n,rRel:a}}function ST(t,s,r){var a=(t[t.l++]&96)>>5,n=dj(t,r.biff>=2&&r.biff<=5?6:8,r);return[a,n]}function CT(t,s,r){var a=(t[t.l++]&96)>>5,n=t.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}var l=dj(t,i,r);return[a,n,l]}function _T(t,s,r){var a=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function TT(t,s,r){var a=(t[t.l++]&96)>>5,n=t.read_shift(2),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}return t.l+=i,[a,n]}function ET(t,s,r){var a=(t[t.l++]&96)>>5,n=vT(t,s-1,r);return[a,n]}function AT(t,s,r){var a=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[a]}function Tp(t){var s=t[t.l+1]&1,r=1;return t.l+=4,[s,r]}function FT(t,s,r){t.l+=2;for(var a=t.read_shift(r&&r.biff==2?1:2),n=[],i=0;i<=a;++i)n.push(t.read_shift(r&&r.biff==2?1:2));return n}function PT(t,s,r){var a=t[t.l+1]&255?1:0;return t.l+=2,[a,t.read_shift(r&&r.biff==2?1:2)]}function DT(t,s,r){var a=t[t.l+1]&255?1:0;return t.l+=2,[a,t.read_shift(r&&r.biff==2?1:2)]}function RT(t){var s=t[t.l+1]&255?1:0;return t.l+=2,[s,t.read_shift(2)]}function LT(t,s,r){var a=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[a]}function mj(t){var s=t.read_shift(1),r=t.read_shift(1);return[s,r]}function OT(t){return t.read_shift(2),mj(t)}function IT(t){return t.read_shift(2),mj(t)}function MT(t,s,r){var a=(t[t.l]&96)>>5;t.l+=1;var n=xj(t,0,r);return[a,n]}function BT(t,s,r){var a=(t[t.l]&96)>>5;t.l+=1;var n=NT(t,0,r);return[a,n]}function $T(t,s,r){var a=(t[t.l]&96)>>5;t.l+=1;var n=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var i=xj(t,0,r);return[a,n,i]}function UT(t,s,r){var a=(t[t.l]&96)>>5;t.l+=1;var n=t.read_shift(r&&r.biff<=3?1:2);return[zE[n],pj[n],a]}function zT(t,s,r){var a=t[t.l++],n=t.read_shift(1),i=r&&r.biff<=3?[a==88?-1:0,t.read_shift(1)]:WT(t);return[n,(i[0]===0?pj:UE)[i[1]]]}function WT(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function VT(t,s,r){t.l+=r&&r.biff==2?3:4}function HT(t,s,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var a=t.read_shift(2),n=t.read_shift(r&&r.biff==2?1:2);return[a,n]}function GT(t){return t.l++,yi[t.read_shift(1)]}function qT(t){return t.l++,t.read_shift(2)}function JT(t){return t.l++,t.read_shift(1)!==0}function KT(t){return t.l++,Us(t)}function YT(t,s,r){return t.l++,Wo(t,s-1,r)}function XT(t,s){var r=[t.read_shift(1)];if(s==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Qt(t,1)?"TRUE":"FALSE",s!=12&&(t.l+=7);break;case 37:case 16:r[1]=yi[t[t.l]],t.l+=s==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Us(t);break;case 2:r[1]=bi(t,0,{biff:s>0&&s<8?2:s});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function QT(t,s,r){for(var a=t.read_shift(r.biff==12?4:2),n=[],i=0;i!=a;++i)n.push((r.biff==12?gi:Yd)(t));return n}function ZT(t,s,r){var a=0,n=0;r.biff==12?(a=t.read_shift(4),n=t.read_shift(4)):(n=1+t.read_shift(1),a=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--n==0&&(n=256));for(var i=0,l=[];i!=a&&(l[i]=[]);++i)for(var o=0;o!=n;++o)l[i][o]=XT(t,r.biff);return l}function eE(t,s,r){var a=t.read_shift(1)>>>5&3,n=!r||r.biff>=8?4:2,i=t.read_shift(n);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[a,0,i]}function tE(t,s,r){if(r.biff==5)return sE(t);var a=t.read_shift(1)>>>5&3,n=t.read_shift(2),i=t.read_shift(4);return[a,n,i]}function sE(t){var s=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var a=t.read_shift(2);return t.l+=12,[s,r,a]}function rE(t,s,r){var a=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var n=t.read_shift(r&&r.biff==2?1:2);return[a,n]}function aE(t,s,r){var a=t.read_shift(1)>>>5&3,n=t.read_shift(r&&r.biff==2?1:2);return[a,n]}function nE(t,s,r){var a=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[a]}function iE(t,s,r){var a=(t[t.l++]&96)>>5,n=t.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return t.l+=i,[a,n]}var lE=Hs,oE=Hs,cE=Hs;function Ho(t,s,r){return t.l+=2,[wT(t)]}function Um(t){return t.l+=6,[]}var dE=Ho,uE=Um,xE=Um,mE=Ho;function hj(t){return t.l+=2,[is(t),t.read_shift(2)&1]}var hE=Ho,fE=hj,pE=Um,gE=Ho,yE=Ho,bE=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function vE(t){t.l+=2;var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(4),n=t.read_shift(2),i=t.read_shift(2),l=bE[r>>2&31];return{ixti:s,coltype:r&3,rt:l,idx:a,c:n,C:i}}function jE(t){return t.l+=2,[t.read_shift(4)]}function wE(t,s,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function NE(t,s,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function kE(t){var s=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[s,r]}function SE(t){var s=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[s,r]}function CE(t){return t.l+=4,[0,0]}var Ep={1:{n:"PtgExp",f:HT},2:{n:"PtgTbl",f:cE},3:{n:"PtgAdd",f:as},4:{n:"PtgSub",f:as},5:{n:"PtgMul",f:as},6:{n:"PtgDiv",f:as},7:{n:"PtgPower",f:as},8:{n:"PtgConcat",f:as},9:{n:"PtgLt",f:as},10:{n:"PtgLe",f:as},11:{n:"PtgEq",f:as},12:{n:"PtgGe",f:as},13:{n:"PtgGt",f:as},14:{n:"PtgNe",f:as},15:{n:"PtgIsect",f:as},16:{n:"PtgUnion",f:as},17:{n:"PtgRange",f:as},18:{n:"PtgUplus",f:as},19:{n:"PtgUminus",f:as},20:{n:"PtgPercent",f:as},21:{n:"PtgParen",f:as},22:{n:"PtgMissArg",f:as},23:{n:"PtgStr",f:YT},26:{n:"PtgSheet",f:wE},27:{n:"PtgEndSheet",f:NE},28:{n:"PtgErr",f:GT},29:{n:"PtgBool",f:JT},30:{n:"PtgInt",f:qT},31:{n:"PtgNum",f:KT},32:{n:"PtgArray",f:AT},33:{n:"PtgFunc",f:UT},34:{n:"PtgFuncVar",f:zT},35:{n:"PtgName",f:eE},36:{n:"PtgRef",f:MT},37:{n:"PtgArea",f:ST},38:{n:"PtgMemArea",f:rE},39:{n:"PtgMemErr",f:lE},40:{n:"PtgMemNoMem",f:oE},41:{n:"PtgMemFunc",f:aE},42:{n:"PtgRefErr",f:nE},43:{n:"PtgAreaErr",f:_T},44:{n:"PtgRefN",f:BT},45:{n:"PtgAreaN",f:ET},46:{n:"PtgMemAreaN",f:kE},47:{n:"PtgMemNoMemN",f:SE},57:{n:"PtgNameX",f:tE},58:{n:"PtgRef3d",f:$T},59:{n:"PtgArea3d",f:CT},60:{n:"PtgRefErr3d",f:iE},61:{n:"PtgAreaErr3d",f:TT},255:{}},_E={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},TE={1:{n:"PtgElfLel",f:hj},2:{n:"PtgElfRw",f:gE},3:{n:"PtgElfCol",f:dE},6:{n:"PtgElfRwV",f:yE},7:{n:"PtgElfColV",f:mE},10:{n:"PtgElfRadical",f:hE},11:{n:"PtgElfRadicalS",f:pE},13:{n:"PtgElfColS",f:uE},15:{n:"PtgElfColSV",f:xE},16:{n:"PtgElfRadicalLel",f:fE},25:{n:"PtgList",f:vE},29:{n:"PtgSxName",f:jE},255:{}},EE={0:{n:"PtgAttrNoop",f:CE},1:{n:"PtgAttrSemi",f:LT},2:{n:"PtgAttrIf",f:DT},4:{n:"PtgAttrChoose",f:FT},8:{n:"PtgAttrGoto",f:PT},16:{n:"PtgAttrSum",f:VT},32:{n:"PtgAttrBaxcel",f:Tp},33:{n:"PtgAttrBaxcel",f:Tp},64:{n:"PtgAttrSpace",f:OT},65:{n:"PtgAttrSpaceSemi",f:IT},128:{n:"PtgAttrIfError",f:RT},255:{}};function Go(t,s,r,a){if(a.biff<8)return Hs(t,s);for(var n=t.l+s,i=[],l=0;l!==r.length;++l)switch(r[l][0]){case"PtgArray":r[l][1]=ZT(t,0,a),i.push(r[l][1]);break;case"PtgMemArea":r[l][2]=QT(t,r[l][1],a),i.push(r[l][2]);break;case"PtgExp":a&&a.biff==12&&(r[l][1][1]=t.read_shift(4),i.push(r[l][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[l][0]}return s=n-t.l,s!==0&&i.push(Hs(t,s)),i}function qo(t,s,r){for(var a=t.l+s,n,i,l=[];a!=t.l;)s=a-t.l,i=t[t.l],n=Ep[i]||Ep[_E[i]],(i===24||i===25)&&(n=(i===24?TE:EE)[t[t.l+1]]),!n||!n.f?Hs(t,s):l.push([n.n,n.f(t,s,r)]);return l}function AE(t){for(var s=[],r=0;r<t.length;++r){for(var a=t[r],n=[],i=0;i<a.length;++i){var l=a[i];if(l)switch(l[0]){case 2:n.push('"'+l[1].replace(/"/g,'""')+'"');break;default:n.push(l[1])}else n.push("")}s.push(n.join(","))}return s.join(";")}var FE={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function PE(t,s){if(!t&&!(s&&s.biff<=5&&s.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function fj(t,s,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[s]))return t.SheetNames[s];if(!t.XTI)return"SH33TJSERR6";var a=t.XTI[s];if(r.biff<8)return s>1e4&&(s-=65536),s<0&&(s=-s),s==0?"":t.XTI[s-1];if(!a)return"SH33TJSERR1";var n="";if(r.biff>8)switch(t[a[0]][0]){case 357:return n=a[1]==-1?"#REF":t.SheetNames[a[1]],a[1]==a[2]?n:n+":"+t.SheetNames[a[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[a[0]][0];case 355:default:return"SH33TJSSRC"+t[a[0]][0]}switch(t[a[0]][0][0]){case 1025:return n=a[1]==-1?"#REF":t.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?n:n+":"+t.SheetNames[a[2]];case 14849:return t[a[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return t[a[0]][0][3]?(n=a[1]==-1?"#REF":t[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?n:n+":"+t[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function Ap(t,s,r){var a=fj(t,s,r);return a=="#REF"?a:PE(a,r)}function Ms(t,s,r,a,n){var i=n&&n.biff||8,l={s:{c:0,r:0}},o=[],c,d,u,p=0,h=0,g,x="";if(!t[0]||!t[0][0])return"";for(var f=-1,m="",j=0,v=t[0].length;j<v;++j){var w=t[0][j];switch(w[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),d=o.pop(),f>=0){switch(t[0][f][1][0]){case 0:m=Jt(" ",t[0][f][1][1]);break;case 1:m=Jt("\r",t[0][f][1][1]);break;default:if(m="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][f][1][0])}d=d+m,f=-1}o.push(d+FE[w[0]]+c);break;case"PtgIsect":c=o.pop(),d=o.pop(),o.push(d+" "+c);break;case"PtgUnion":c=o.pop(),d=o.pop(),o.push(d+","+c);break;case"PtgRange":c=o.pop(),d=o.pop(),o.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Jl(w[1][1],l,n),o.push(Kl(u,i));break;case"PtgRefN":u=r?Jl(w[1][1],r,n):w[1][1],o.push(Kl(u,i));break;case"PtgRef3d":p=w[1][1],u=Jl(w[1][2],l,n),x=Ap(a,p,n),o.push(x+"!"+Kl(u,i));break;case"PtgFunc":case"PtgFuncVar":var S=w[1][0],F=w[1][1];S||(S=0),S&=127;var E=S==0?[]:o.slice(-S);o.length-=S,F==="User"&&(F=E.shift()),o.push(F+"("+E.join(",")+")");break;case"PtgBool":o.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(w[1]);break;case"PtgNum":o.push(String(w[1]));break;case"PtgStr":o.push('"'+w[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(w[1]);break;case"PtgAreaN":g=dp(w[1][1],r?{s:r}:l,n),o.push(L0(g,n));break;case"PtgArea":g=dp(w[1][1],l,n),o.push(L0(g,n));break;case"PtgArea3d":p=w[1][1],g=w[1][2],x=Ap(a,p,n),o.push(x+"!"+L0(g,n));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=w[1][2];var k=(a.names||[])[h-1]||(a[0]||[])[h],A=k?k.Name:"SH33TJSNAME"+String(h);A&&A.slice(0,6)=="_xlfn."&&!n.xlfn&&(A=A.slice(6)),o.push(A);break;case"PtgNameX":var y=w[1][1];h=w[1][2];var N;if(n.biff<=5)y<0&&(y=-y),a[y]&&(N=a[y][h]);else{var R="";if(((a[y]||[])[0]||[])[0]==14849||(((a[y]||[])[0]||[])[0]==1025?a[y][h]&&a[y][h].itab>0&&(R=a.SheetNames[a[y][h].itab-1]+"!"):R=a.SheetNames[h-1]+"!"),a[y]&&a[y][h])R+=a[y][h].Name;else if(a[0]&&a[0][h])R+=a[0][h].Name;else{var T=(fj(a,y,n)||"").split(";;");T[h-1]?R=T[h-1]:R+="SH33TJSERRX"}o.push(R);break}N||(N={Name:"SH33TJSERRY"}),o.push(N.Name);break;case"PtgParen":var z="(",L=")";if(f>=0){switch(m="",t[0][f][1][0]){case 2:z=Jt(" ",t[0][f][1][1])+z;break;case 3:z=Jt("\r",t[0][f][1][1])+z;break;case 4:L=Jt(" ",t[0][f][1][1])+L;break;case 5:L=Jt("\r",t[0][f][1][1])+L;break;default:if(n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][f][1][0])}f=-1}o.push(z+o.pop()+L);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:w[1][1],r:w[1][0]};var O={c:r.c,r:r.r};if(a.sharedf[tt(u)]){var V=a.sharedf[tt(u)];o.push(Ms(V,l,O,a,n))}else{var Z=!1;for(c=0;c!=a.arrayf.length;++c)if(d=a.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){o.push(Ms(d[1],l,O,a,n)),Z=!0;break}Z||o.push(w[1])}break;case"PtgArray":o.push("{"+AE(w[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":f=j;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(w));default:throw new Error("Unrecognized Formula Token: "+String(w))}var D=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(n.biff!=3&&f>=0&&D.indexOf(t[0][j][0])==-1){w=t[0][f];var P=!0;switch(w[1][0]){case 4:P=!1;case 0:m=Jt(" ",w[1][1]);break;case 5:P=!1;case 1:m=Jt("\r",w[1][1]);break;default:if(m="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}o.push((P?m:"")+o.pop()+(P?"":m)),f=-1}}if(o.length>1&&n.WTF)throw new Error("bad formula stack");return o[0]}function DE(t,s,r){var a=t.l+s,n=r.biff==2?1:2,i,l=t.read_shift(n);if(l==65535)return[[],Hs(t,s-2)];var o=qo(t,l,r);return s!==l+n&&(i=Go(t,s-l-n,o,r)),t.l=a,[o,i]}function RE(t,s,r){var a=t.l+s,n=r.biff==2?1:2,i,l=t.read_shift(n);if(l==65535)return[[],Hs(t,s-2)];var o=qo(t,l,r);return s!==l+n&&(i=Go(t,s-l-n,o,r)),t.l=a,[o,i]}function LE(t,s,r,a){var n=t.l+s,i=qo(t,a,r),l;return n!==t.l&&(l=Go(t,n-t.l,i,r)),[i,l]}function OE(t,s,r){var a=t.l+s,n,i=t.read_shift(2),l=qo(t,i,r);return i==65535?[[],Hs(t,s-2)]:(s!==i+2&&(n=Go(t,a-i-2,l,r)),[l,n])}function IE(t){var s;if(Da(t,t.l+6)!==65535)return[Us(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return s=t[t.l+2]===1,t.l+=8,[s,"b"];case 2:return s=t[t.l+2],t.l+=8,[s,"e"];case 3:return t.l+=8,["","s"]}return[]}function M0(t,s,r){var a=t.l+s,n=ka(t);r.biff==2&&++t.l;var i=IE(t),l=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=RE(t,a-t.l,r);return{cell:n,val:i[0],formula:o,shared:l>>3&1,tt:i[1]}}function Xd(t,s,r){var a=t.read_shift(4),n=qo(t,a,r),i=t.read_shift(4),l=i>0?Go(t,i,n,r):null;return[n,l]}var ME=Xd,Qd=Xd,BE=Xd,$E=Xd,UE={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},pj={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},zE={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Fp(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(s,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function B0(t){var s=t.split(":"),r=s[0].split(".")[0];return[r,s[0].split(".")[1]+(s.length>1?":"+(s[1].split(".")[1]||s[1].split(".")[0]):"")]}var Zl={},qi={};function eo(t,s){if(t){var r=[.7,.7,.75,.75,.3,.3];s=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function gj(t,s,r,a,n,i){try{a.cellNF&&(t.z=at[s])}catch(o){if(a.WTF)throw o}if(!(t.t==="z"&&!a.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=ks(t.v)),(!a||a.cellText!==!1)&&t.t!=="z")try{if(at[s]==null&&Qn(WS[s]||"General",s),t.t==="e")t.w=t.w||yi[t.v];else if(s===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=To(t.v);else if(t.t==="d"){var l=er(t.v);(l|0)===l?t.w=l.toString(10):t.w=To(l)}else{if(t.v===void 0)return"";t.w=oi(t.v,qi)}else t.t==="d"?t.w=Br(s,er(t.v),qi):t.w=Br(s,t.v,qi)}catch(o){if(a.WTF)throw o}if(a.cellStyles&&r!=null)try{t.s=i.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=Nd(n.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),a.WTF&&(t.s.fgColor.raw_rgb=n.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=Nd(n.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),a.WTF&&(t.s.bgColor.raw_rgb=n.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(a.WTF&&i.Fills)throw o}}}function WE(t,s){var r=Yt(s);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=vt(r))}var VE=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,HE=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,GE=/<(?:\w:)?hyperlink [^>]*>/mg,qE=/"(\w*:\w*)"/,JE=/<(?:\w:)?col\b[^>]*[\/]?>/g,KE=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,YE=/<(?:\w:)?pageMargins[^>]*\/>/g,yj=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,XE=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,QE=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function ZE(t,s,r,a,n,i,l){if(!t)return t;a||(a={"!id":{}});var o=s.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",u="",p=t.match(HE);p?(d=t.slice(0,p.index),u=t.slice(p.index+p[0].length)):d=u=t;var h=d.match(yj);h?zm(h[0],o,n,r):(h=d.match(XE))&&eA(h[0],h[1]||"",o,n,r);var g=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var x=d.slice(g,g+50).match(qE);x&&WE(o,x[1])}var f=d.match(QE);f&&f[1]&&iA(f[1],n);var m=[];if(s.cellStyles){var j=d.match(JE);j&&rA(m,j)}p&&lA(p[1],o,s,c,i,l);var v=u.match(KE);v&&(o["!autofilter"]=aA(v[0]));var w=[],S=u.match(VE);if(S)for(g=0;g!=S.length;++g)w[g]=Yt(S[g].slice(S[g].indexOf('"')+1));var F=u.match(GE);F&&tA(o,F,a);var E=u.match(YE);if(E&&(o["!margins"]=sA(Ke(E[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=vt(c)),s.sheetRows>0&&o["!ref"]){var k=Yt(o["!ref"]);s.sheetRows<=+k.e.r&&(k.e.r=s.sheetRows-1,k.e.r>c.e.r&&(k.e.r=c.e.r),k.e.r<k.s.r&&(k.s.r=k.e.r),k.e.c>c.e.c&&(k.e.c=c.e.c),k.e.c<k.s.c&&(k.s.c=k.e.c),o["!fullref"]=o["!ref"],o["!ref"]=vt(k))}return m.length>0&&(o["!cols"]=m),w.length>0&&(o["!merges"]=w),o}function zm(t,s,r,a){var n=Ke(t);r.Sheets[a]||(r.Sheets[a]={}),n.codeName&&(r.Sheets[a].CodeName=kt(Lt(n.codeName)))}function eA(t,s,r,a,n){zm(t.slice(0,t.indexOf(">")),r,a,n)}function tA(t,s,r){for(var a=Array.isArray(t),n=0;n!=s.length;++n){var i=Ke(Lt(s[n]),!0);if(!i.ref)return;var l=((r||{})["!id"]||[])[i.id];l?(i.Target=l.Target,i.location&&(i.Target+="#"+kt(i.location))):(i.Target="#"+kt(i.location),l={Target:i.Target,TargetMode:"Internal"}),i.Rel=l,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=Yt(i.ref),c=o.s.r;c<=o.e.r;++c)for(var d=o.s.c;d<=o.e.c;++d){var u=tt({c:d,r:c});a?(t[c]||(t[c]=[]),t[c][d]||(t[c][d]={t:"z",v:void 0}),t[c][d].l=i):(t[u]||(t[u]={t:"z",v:void 0}),t[u].l=i)}}}function sA(t){var s={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(s[r]=parseFloat(t[r]))}),s}function rA(t,s){for(var r=!1,a=0;a!=s.length;++a){var n=Ke(s[a],!0);n.hidden&&(n.hidden=$t(n.hidden));var i=parseInt(n.min,10)-1,l=parseInt(n.max,10)-1;for(n.outlineLevel&&(n.level=+n.outlineLevel||0),delete n.min,delete n.max,n.width=+n.width,!r&&n.width&&(r=!0,$m(n.width)),rl(n);i<=l;)t[i++]=Es(n)}}function aA(t){var s={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return s}var nA=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function iA(t,s){s.Views||(s.Views=[{}]),(t.match(nA)||[]).forEach(function(r,a){var n=Ke(r);s.Views[a]||(s.Views[a]={}),+n.zoomScale&&(s.Views[a].zoom=+n.zoomScale),$t(n.rightToLeft)&&(s.Views[a].RTL=!0)})}var lA=function(){var t=/<(?:\w+:)?c[ \/>]/,s=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,n=/ref=["']([^"']*)["']/,i=Eo("v"),l=Eo("f");return function(c,d,u,p,h,g){for(var x=0,f="",m=[],j=[],v=0,w=0,S=0,F="",E,k,A=0,y=0,N,R,T=0,z=0,L=Array.isArray(g.CellXf),O,V=[],Z=[],D=Array.isArray(d),P=[],W={},ee=!1,M=!!u.sheetStubs,U=c.split(s),q=0,Y=U.length;q!=Y;++q){f=U[q].trim();var K=f.length;if(K!==0){var le=0;e:for(x=0;x<K;++x)switch(f[x]){case">":if(f[x-1]!="/"){++x;break e}if(u&&u.cellStyles){if(k=Ke(f.slice(le,x),!0),A=k.r!=null?parseInt(k.r,10):A+1,y=-1,u.sheetRows&&u.sheetRows<A)continue;W={},ee=!1,k.ht&&(ee=!0,W.hpt=parseFloat(k.ht),W.hpx=Do(W.hpt)),k.hidden=="1"&&(ee=!0,W.hidden=!0),k.outlineLevel!=null&&(ee=!0,W.level=+k.outlineLevel),ee&&(P[A-1]=W)}break;case"<":le=x;break}if(le>=x)break;if(k=Ke(f.slice(le,x),!0),A=k.r!=null?parseInt(k.r,10):A+1,y=-1,!(u.sheetRows&&u.sheetRows<A)){p.s.r>A-1&&(p.s.r=A-1),p.e.r<A-1&&(p.e.r=A-1),u&&u.cellStyles&&(W={},ee=!1,k.ht&&(ee=!0,W.hpt=parseFloat(k.ht),W.hpx=Do(W.hpt)),k.hidden=="1"&&(ee=!0,W.hidden=!0),k.outlineLevel!=null&&(ee=!0,W.level=+k.outlineLevel),ee&&(P[A-1]=W)),m=f.slice(x).split(t);for(var J=0;J!=m.length&&m[J].trim().charAt(0)=="<";++J);for(m=m.slice(J),x=0;x!=m.length;++x)if(f=m[x].trim(),f.length!==0){if(j=f.match(r),v=x,w=0,S=0,f="<c "+(f.slice(0,1)=="<"?">":"")+f,j!=null&&j.length===2){for(v=0,F=j[1],w=0;w!=F.length&&!((S=F.charCodeAt(w)-64)<1||S>26);++w)v=26*v+S;--v,y=v}else++y;for(w=0;w!=f.length&&f.charCodeAt(w)!==62;++w);if(++w,k=Ke(f.slice(0,w),!0),k.r||(k.r=tt({r:A-1,c:y})),F=f.slice(w),E={t:""},(j=F.match(i))!=null&&j[1]!==""&&(E.v=kt(j[1])),u.cellFormula){if((j=F.match(l))!=null&&j[1]!==""){if(E.f=kt(Lt(j[1])).replace(/\r\n/g,`
`),u.xlfn||(E.f=_p(E.f)),j[0].indexOf('t="array"')>-1)E.F=(F.match(n)||[])[1],E.F.indexOf(":")>-1&&V.push([Yt(E.F),E.F]);else if(j[0].indexOf('t="shared"')>-1){R=Ke(j[0]);var ae=kt(Lt(j[1]));u.xlfn||(ae=_p(ae)),Z[parseInt(R.si,10)]=[R,ae,k.r]}}else(j=F.match(/<f[^>]*\/>/))&&(R=Ke(j[0]),Z[R.si]&&(E.f=yT(Z[R.si][1],Z[R.si][2],k.r)));var he=Ys(k.r);for(w=0;w<V.length;++w)he.r>=V[w][0].s.r&&he.r<=V[w][0].e.r&&he.c>=V[w][0].s.c&&he.c<=V[w][0].e.c&&(E.F=V[w][1])}if(k.t==null&&E.v===void 0)if(E.f||E.F)E.v=0,E.t="n";else if(M)E.t="z";else continue;else E.t=k.t||"n";switch(p.s.c>y&&(p.s.c=y),p.e.c<y&&(p.e.c=y),E.t){case"n":if(E.v==""||E.v==null){if(!M)continue;E.t="z"}else E.v=parseFloat(E.v);break;case"s":if(typeof E.v>"u"){if(!M)continue;E.t="z"}else N=Zl[parseInt(E.v,10)],E.v=N.t,E.r=N.r,u.cellHTML&&(E.h=N.h);break;case"str":E.t="s",E.v=E.v!=null?Lt(E.v):"",u.cellHTML&&(E.h=Em(E.v));break;case"inlineStr":j=F.match(a),E.t="s",j!=null&&(N=Bm(j[1]))?(E.v=N.t,u.cellHTML&&(E.h=N.h)):E.v="";break;case"b":E.v=$t(E.v);break;case"d":u.cellDates?E.v=ks(E.v,1):(E.v=er(ks(E.v,1)),E.t="n");break;case"e":(!u||u.cellText!==!1)&&(E.w=E.v),E.v=Bv[E.v];break}if(T=z=0,O=null,L&&k.s!==void 0&&(O=g.CellXf[k.s],O!=null&&(O.numFmtId!=null&&(T=O.numFmtId),u.cellStyles&&O.fillId!=null&&(z=O.fillId))),gj(E,T,z,u,h,g),u.cellDates&&L&&E.t=="n"&&ul(at[T])&&(E.t="d",E.v=Kd(E.v)),k.cm&&u.xlmeta){var Fe=(u.xlmeta.Cell||[])[+k.cm-1];Fe&&Fe.type=="XLDAPR"&&(E.D=!0)}if(D){var X=Ys(k.r);d[X.r]||(d[X.r]=[]),d[X.r][X.c]=E}else d[k.r]=E}}}}P.length>0&&(d["!rows"]=P)}}();function oA(t,s){var r={},a=t.l+s;r.r=t.read_shift(4),t.l+=4;var n=t.read_shift(2);t.l+=1;var i=t.read_shift(1);return t.l=a,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=n/20),r}var cA=gi;function dA(){}function uA(t,s){var r={},a=t[t.l];return++t.l,r.above=!(a&64),r.left=!(a&128),t.l+=18,r.name=DC(t),r}function xA(t){var s=$r(t);return[s]}function mA(t){var s=pi(t);return[s]}function hA(t){var s=$r(t),r=t.read_shift(1);return[s,r,"b"]}function fA(t){var s=pi(t),r=t.read_shift(1);return[s,r,"b"]}function pA(t){var s=$r(t),r=t.read_shift(1);return[s,r,"e"]}function gA(t){var s=pi(t),r=t.read_shift(1);return[s,r,"e"]}function yA(t){var s=$r(t),r=t.read_shift(4);return[s,r,"s"]}function bA(t){var s=pi(t),r=t.read_shift(4);return[s,r,"s"]}function vA(t){var s=$r(t),r=Us(t);return[s,r,"n"]}function bj(t){var s=pi(t),r=Us(t);return[s,r,"n"]}function jA(t){var s=$r(t),r=Om(t);return[s,r,"n"]}function wA(t){var s=pi(t),r=Om(t);return[s,r,"n"]}function NA(t){var s=$r(t),r=Rm(t);return[s,r,"is"]}function kA(t){var s=$r(t),r=Ws(t);return[s,r,"str"]}function SA(t){var s=pi(t),r=Ws(t);return[s,r,"str"]}function CA(t,s,r){var a=t.l+s,n=$r(t);n.r=r["!row"];var i=t.read_shift(1),l=[n,i,"b"];if(r.cellFormula){t.l+=2;var o=Qd(t,a-t.l,r);l[3]=Ms(o,null,n,r.supbooks,r)}else t.l=a;return l}function _A(t,s,r){var a=t.l+s,n=$r(t);n.r=r["!row"];var i=t.read_shift(1),l=[n,i,"e"];if(r.cellFormula){t.l+=2;var o=Qd(t,a-t.l,r);l[3]=Ms(o,null,n,r.supbooks,r)}else t.l=a;return l}function TA(t,s,r){var a=t.l+s,n=$r(t);n.r=r["!row"];var i=Us(t),l=[n,i,"n"];if(r.cellFormula){t.l+=2;var o=Qd(t,a-t.l,r);l[3]=Ms(o,null,n,r.supbooks,r)}else t.l=a;return l}function EA(t,s,r){var a=t.l+s,n=$r(t);n.r=r["!row"];var i=Ws(t),l=[n,i,"str"];if(r.cellFormula){t.l+=2;var o=Qd(t,a-t.l,r);l[3]=Ms(o,null,n,r.supbooks,r)}else t.l=a;return l}var AA=gi;function FA(t,s){var r=t.l+s,a=gi(t),n=Lm(t),i=Ws(t),l=Ws(t),o=Ws(t);t.l=r;var c={rfx:a,relId:n,loc:i,display:o};return l&&(c.Tooltip=l),c}function PA(){}function DA(t,s,r){var a=t.l+s,n=Ov(t),i=t.read_shift(1),l=[n];if(l[2]=i,r.cellFormula){var o=ME(t,a-t.l,r);l[1]=o}else t.l=a;return l}function RA(t,s,r){var a=t.l+s,n=gi(t),i=[n];if(r.cellFormula){var l=$E(t,a-t.l,r);i[1]=l,t.l=a}else t.l=a;return i}var LA=["left","right","top","bottom","header","footer"];function OA(t){var s={};return LA.forEach(function(r){s[r]=Us(t)}),s}function IA(t){var s=t.read_shift(2);return t.l+=28,{RTL:s&32}}function MA(){}function BA(){}function $A(t,s,r,a,n,i,l){if(!t)return t;var o=s||{};a||(a={"!id":{}});var c=o.dense?[]:{},d,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},p=!1,h=!1,g,x,f,m,j,v,w,S,F,E=[];o.biff=12,o["!row"]=0;var k=0,A=!1,y=[],N={},R=o.supbooks||n.supbooks||[[]];if(R.sharedf=N,R.arrayf=y,R.SheetNames=n.SheetNames||n.Sheets.map(function(D){return D.name}),!o.supbooks&&(o.supbooks=R,n.Names))for(var T=0;T<n.Names.length;++T)R[0][T+1]=n.Names[T];var z=[],L=[],O=!1;Cd[16]={n:"BrtShortReal",f:bj};var V;if(Ja(t,function(P,W,ee){if(!h)switch(ee){case 148:d=P;break;case 0:g=P,o.sheetRows&&o.sheetRows<=g.r&&(h=!0),S=As(m=g.r),o["!row"]=g.r,(P.hidden||P.hpt||P.level!=null)&&(P.hpt&&(P.hpx=Do(P.hpt)),L[P.r]=P);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(x={t:P[2]},P[2]){case"n":x.v=P[1];break;case"s":w=Zl[P[1]],x.v=w.t,x.r=w.r;break;case"b":x.v=!!P[1];break;case"e":x.v=P[1],o.cellText!==!1&&(x.w=yi[x.v]);break;case"str":x.t="s",x.v=P[1];break;case"is":x.t="s",x.v=P[1].t;break}if((f=l.CellXf[P[0].iStyleRef])&&gj(x,f.numFmtId,null,o,i,l),j=P[0].c==-1?j+1:P[0].c,o.dense?(c[m]||(c[m]=[]),c[m][j]=x):c[ps(j)+S]=x,o.cellFormula){for(A=!1,k=0;k<y.length;++k){var M=y[k];g.r>=M[0].s.r&&g.r<=M[0].e.r&&j>=M[0].s.c&&j<=M[0].e.c&&(x.F=vt(M[0]),A=!0)}!A&&P.length>3&&(x.f=P[3])}if(u.s.r>g.r&&(u.s.r=g.r),u.s.c>j&&(u.s.c=j),u.e.r<g.r&&(u.e.r=g.r),u.e.c<j&&(u.e.c=j),o.cellDates&&f&&x.t=="n"&&ul(at[f.numFmtId])){var U=qn(x.v);U&&(x.t="d",x.v=new Date(U.y,U.m-1,U.d,U.H,U.M,U.S,U.u))}V&&(V.type=="XLDAPR"&&(x.D=!0),V=void 0);break;case 1:case 12:if(!o.sheetStubs||p)break;x={t:"z",v:void 0},j=P[0].c==-1?j+1:P[0].c,o.dense?(c[m]||(c[m]=[]),c[m][j]=x):c[ps(j)+S]=x,u.s.r>g.r&&(u.s.r=g.r),u.s.c>j&&(u.s.c=j),u.e.r<g.r&&(u.e.r=g.r),u.e.c<j&&(u.e.c=j),V&&(V.type=="XLDAPR"&&(x.D=!0),V=void 0);break;case 176:E.push(P);break;case 49:V=((o.xlmeta||{}).Cell||[])[P-1];break;case 494:var q=a["!id"][P.relId];for(q?(P.Target=q.Target,P.loc&&(P.Target+="#"+P.loc),P.Rel=q):P.relId==""&&(P.Target="#"+P.loc),m=P.rfx.s.r;m<=P.rfx.e.r;++m)for(j=P.rfx.s.c;j<=P.rfx.e.c;++j)o.dense?(c[m]||(c[m]=[]),c[m][j]||(c[m][j]={t:"z",v:void 0}),c[m][j].l=P):(v=tt({c:j,r:m}),c[v]||(c[v]={t:"z",v:void 0}),c[v].l=P);break;case 426:if(!o.cellFormula)break;y.push(P),F=o.dense?c[m][j]:c[ps(j)+S],F.f=Ms(P[1],u,{r:g.r,c:j},R,o),F.F=vt(P[0]);break;case 427:if(!o.cellFormula)break;N[tt(P[0].s)]=P[1],F=o.dense?c[m][j]:c[ps(j)+S],F.f=Ms(P[1],u,{r:g.r,c:j},R,o);break;case 60:if(!o.cellStyles)break;for(;P.e>=P.s;)z[P.e--]={width:P.w/256,hidden:!!(P.flags&1),level:P.level},O||(O=!0,$m(P.w/256)),rl(z[P.e+1]);break;case 161:c["!autofilter"]={ref:vt(P)};break;case 476:c["!margins"]=P;break;case 147:n.Sheets[r]||(n.Sheets[r]={}),P.name&&(n.Sheets[r].CodeName=P.name),(P.above||P.left)&&(c["!outline"]={above:P.above,left:P.left});break;case 137:n.Views||(n.Views=[{}]),n.Views[0]||(n.Views[0]={}),P.RTL&&(n.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:p=!0;break;case 36:p=!1;break;case 37:p=!0;break;case 38:p=!1;break;default:if(!W.T){if(!p||o.WTF)throw new Error("Unexpected record 0x"+ee.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(u.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(c["!ref"]=vt(d||u)),o.sheetRows&&c["!ref"]){var Z=Yt(c["!ref"]);o.sheetRows<=+Z.e.r&&(Z.e.r=o.sheetRows-1,Z.e.r>u.e.r&&(Z.e.r=u.e.r),Z.e.r<Z.s.r&&(Z.s.r=Z.e.r),Z.e.c>u.e.c&&(Z.e.c=u.e.c),Z.e.c<Z.s.c&&(Z.s.c=Z.e.c),c["!fullref"]=c["!ref"],c["!ref"]=vt(Z))}return E.length>0&&(c["!merges"]=E),z.length>0&&(c["!cols"]=z),L.length>0&&(c["!rows"]=L),c}function UA(t){var s=[],r=t.match(/^<c:numCache>/),a;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var l=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);l&&(s[+l[1]]=r?+l[2]:l[2])});var n=kt((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){a=i.replace(/<.*?>/g,"")}),[s,n,a]}function zA(t,s,r,a,n,i){var l=i||{"!type":"chart"};if(!t)return i;var o=0,c=0,d="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(p){var h=UA(p);u.s.r=u.s.c=0,u.e.c=o,d=ps(o),h[0].forEach(function(g,x){l[d+As(x)]={t:"n",v:g,z:h[1]},c=x}),u.e.r<c&&(u.e.r=c),++o}),o>0&&(l["!ref"]=vt(u)),l}function WA(t,s,r,a,n){if(!t)return t;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l,o=t.match(yj);return o&&zm(o[0],i,n,r),(l=t.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=l[1]),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}function VA(t,s){t.l+=10;var r=Ws(t);return{name:r}}function HA(t,s,r,a,n){if(!t)return t;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l=!1;return Ja(t,function(c,d,u){switch(u){case 550:i["!rel"]=c;break;case 651:n.Sheets[r]||(n.Sheets[r]={}),c.name&&(n.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!l||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},s),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}var vj=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],GA=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],qA=[],JA=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function Pp(t,s){for(var r=0;r!=t.length;++r)for(var a=t[r],n=0;n!=s.length;++n){var i=s[n];if(a[i[0]]==null)a[i[0]]=i[1];else switch(i[2]){case"bool":typeof a[i[0]]=="string"&&(a[i[0]]=$t(a[i[0]]));break;case"int":typeof a[i[0]]=="string"&&(a[i[0]]=parseInt(a[i[0]],10));break}}}function Dp(t,s){for(var r=0;r!=s.length;++r){var a=s[r];if(t[a[0]]==null)t[a[0]]=a[1];else switch(a[2]){case"bool":typeof t[a[0]]=="string"&&(t[a[0]]=$t(t[a[0]]));break;case"int":typeof t[a[0]]=="string"&&(t[a[0]]=parseInt(t[a[0]],10));break}}}function jj(t){Dp(t.WBProps,vj),Dp(t.CalcPr,JA),Pp(t.WBView,GA),Pp(t.Sheets,qA),qi.date1904=$t(t.WBProps.date1904)}var KA="][*?/\\".split("");function YA(t,s){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return KA.forEach(function(a){if(t.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var XA=/<\w+:workbook/;function QA(t,s){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,n="xmlns",i={},l=0;if(t.replace(Gs,function(c,d){var u=Ke(c);switch(Na(u[0])){case"<?xml":break;case"<workbook":c.match(XA)&&(n="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=u[n];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":vj.forEach(function(p){if(u[p[0]]!=null)switch(p[2]){case"bool":r.WBProps[p[0]]=$t(u[p[0]]);break;case"int":r.WBProps[p[0]]=parseInt(u[p[0]],10);break;default:r.WBProps[p[0]]=u[p[0]]}}),u.codeName&&(r.WBProps.CodeName=Lt(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=kt(Lt(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":i={},i.Name=Lt(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),$t(u.hidden||"0")&&(i.Hidden=!0),l=d+c.length;break;case"</definedName>":i.Ref=kt(Lt(t.slice(l,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&s.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return c}),pC.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return jj(r),r}function ZA(t,s){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=ax(t),r.name=Ws(t),r}function eF(t,s){var r={},a=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var n=s>8?Ws(t):"";return n.length>0&&(r.CodeName=n),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function tF(t,s){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=s-8,r}function sF(t,s,r){var a=t.l+s;t.l+=4,t.l+=1;var n=t.read_shift(4),i=RC(t),l=BE(t,0,r),o=Lm(t);t.l=a;var c={Name:i,Ptg:l};return n<268435455&&(c.Sheet=n),o&&(c.Comment=o),c}function rF(t,s){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],n=!1;s||(s={}),s.biff=12;var i=[],l=[[]];return l.SheetNames=[],l.XTI=[],Cd[16]={n:"BrtFRTArchID$",f:tF},Ja(t,function(c,d,u){switch(u){case 156:l.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(s.SID=c.Sheet),c.Ref=Ms(c.Ptg,null,null,l,s),delete s.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:l[0].length?l.push([u,c]):l[0]=[u,c],l[l.length-1].XTI=[];break;case 362:l.length===0&&(l[0]=[],l[0].XTI=[]),l[l.length-1].XTI=l[l.length-1].XTI.concat(c),l.XTI=l.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(u),n=!0;break;case 36:a.pop(),n=!1;break;case 37:a.push(u),n=!0;break;case 38:a.pop(),n=!1;break;case 16:break;default:if(!d.T){if(!n||s.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},s),jj(r),r.Names=i,r.supbooks=l,r}function aF(t,s,r){return s.slice(-4)===".bin"?rF(t,r):QA(t,r)}function nF(t,s,r,a,n,i,l,o){return s.slice(-4)===".bin"?$A(t,a,r,n,i,l,o):ZE(t,a,r,n,i,l,o)}function iF(t,s,r,a,n,i,l,o){return s.slice(-4)===".bin"?HA(t,a,r,n,i):WA(t,a,r,n,i)}function lF(t,s,r,a,n,i,l,o){return s.slice(-4)===".bin"?fT():pT()}function oF(t,s,r,a,n,i,l,o){return s.slice(-4)===".bin"?mT():hT()}function cF(t,s,r,a){return s.slice(-4)===".bin"?A5(t,r,a):k5(t,r,a)}function dF(t,s,r){return lj(t,r)}function uF(t,s,r){return s.slice(-4)===".bin"?G_(t,r):V_(t,r)}function xF(t,s,r){return s.slice(-4)===".bin"?dT(t,r):nT(t,r)}function mF(t,s,r){return s.slice(-4)===".bin"?sT(t):eT(t)}function hF(t,s,r,a){return r.slice(-4)===".bin"?rT(t,s,r,a):void 0}function fF(t,s,r){return s.slice(-4)===".bin"?Q5(t,s,r):Z5(t,s,r)}var wj=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Nj=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Vr(t,s){var r=t.split(/\s+/),a=[];if(a[0]=r[0],r.length===1)return a;var n=t.match(wj),i,l,o,c;if(n)for(c=0;c!=n.length;++c)i=n[c].match(Nj),(l=i[1].indexOf(":"))===-1?a[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(l+1),a[o]=i[2].slice(1,i[2].length-1));return a}function pF(t){var s=t.split(/\s+/),r={};if(s.length===1)return r;var a=t.match(wj),n,i,l,o;if(a)for(o=0;o!=a.length;++o)n=a[o].match(Nj),(i=n[1].indexOf(":"))===-1?r[n[1]]=n[2].slice(1,n[2].length-1):(n[1].slice(0,6)==="xmlns:"?l="xmlns"+n[1].slice(6):l=n[1].slice(i+1),r[l]=n[2].slice(1,n[2].length-1));return r}var to;function gF(t,s){var r=to[t]||kt(t);return r==="General"?oi(s):Br(r,s)}function yF(t,s,r,a){var n=a;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":n=$t(a);break;case"i2":case"int":n=parseInt(a,10);break;case"r4":case"float":n=parseFloat(a);break;case"date":case"dateTime.tz":n=ks(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[kt(s)]=n}function bF(t,s,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||yi[t.v]:s==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=To(t.v):t.w=oi(t.v):t.w=gF(s||"General",t.v)}catch(i){if(r.WTF)throw i}try{var a=to[s]||s||"General";if(r.cellNF&&(t.z=a),r.cellDates&&t.t=="n"&&ul(a)){var n=qn(t.v);n&&(t.t="d",t.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}catch(i){if(r.WTF)throw i}}}function vF(t,s,r){if(r.cellStyles&&s.Interior){var a=s.Interior;a.Pattern&&(a.patternType=y5[a.Pattern]||a.Pattern)}t[s.ID]=s}function jF(t,s,r,a,n,i,l,o,c,d){var u="General",p=a.StyleID,h={};d=d||{};var g=[],x=0;for(p===void 0&&o&&(p=o.StyleID),p===void 0&&l&&(p=l.StyleID);i[p]!==void 0&&(i[p].nf&&(u=i[p].nf),i[p].Interior&&g.push(i[p].Interior),!!i[p].Parent);)p=i[p].Parent;switch(r.Type){case"Boolean":a.t="b",a.v=$t(t);break;case"String":a.t="s",a.r=tp(kt(t)),a.v=t.indexOf("<")>-1?kt(s||t).replace(/<.*?>/g,""):a.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),a.v=(ks(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),a.v!==a.v?a.v=kt(t):a.v<60&&(a.v=a.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+t),a.t||(a.t="n");break;case"Error":a.t="e",a.v=Bv[t],d.cellText!==!1&&(a.w=t);break;default:t==""&&s==""?a.t="z":(a.t="s",a.v=tp(s||t));break}if(bF(a,u,d),d.cellFormula!==!1)if(a.Formula){var f=kt(a.Formula);f.charCodeAt(0)==61&&(f=f.slice(1)),a.f=Gi(f,n),delete a.Formula,a.ArrayRange=="RC"?a.F=Gi("RC:RC",n):a.ArrayRange&&(a.F=Gi(a.ArrayRange,n),c.push([Yt(a.F),a.F]))}else for(x=0;x<c.length;++x)n.r>=c[x][0].s.r&&n.r<=c[x][0].e.r&&n.c>=c[x][0].s.c&&n.c<=c[x][0].e.c&&(a.F=c[x][1]);d.cellStyles&&(g.forEach(function(m){!h.patternType&&m.patternType&&(h.patternType=m.patternType)}),a.s=h),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function wF(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function $0(t,s){var r=s||{};uv();var a=Dl(Am(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(a=Lt(a));var n=a.slice(0,1024).toLowerCase(),i=!1;if(n=n.replace(/".*?"/g,""),(n.indexOf(">")&1023)>Math.min(n.indexOf(",")&1023,n.indexOf(";")&1023)){var l=Es(r);return l.type="string",Fo.to_workbook(a,l)}if(n.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ie){n.indexOf("<"+Ie)>=0&&(i=!0)}),i)return FF(a,r);to={"General Number":"General","General Date":at[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":at[15],"Short Date":at[14],"Long Time":at[19],"Medium Time":at[18],"Short Time":at[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:at[2],Standard:at[4],Percent:at[10],Scientific:at[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],d,u={},p=[],h=r.dense?[]:{},g="",x={},f={},m=Vr('<Data ss:Type="String">'),j=0,v=0,w=0,S={s:{r:2e6,c:2e6},e:{r:0,c:0}},F={},E={},k="",A=0,y=[],N={},R={},T=0,z=[],L=[],O={},V=[],Z,D=!1,P=[],W=[],ee={},M=0,U=0,q={Sheets:[],WBProps:{date1904:!1}},Y={};Ao.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var K="";o=Ao.exec(a);)switch(o[3]=(K=o[3]).toLowerCase()){case"data":if(K=="data"){if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?jF(a.slice(j,o.index),k,m,c[c.length-1][0]=="comment"?O:x,{c:v,r:w},F,V[v],f,P,r):(k="",m=Vr(o[0]),j=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(L.length>0&&(x.c=L),(!r.sheetRows||r.sheetRows>w)&&x.v!==void 0&&(r.dense?(h[w]||(h[w]=[]),h[w][v]=x):h[ps(v)+As(w)]=x),x.HRef&&(x.l={Target:kt(x.HRef)},x.HRefScreenTip&&(x.l.Tooltip=x.HRefScreenTip),delete x.HRef,delete x.HRefScreenTip),(x.MergeAcross||x.MergeDown)&&(M=v+(parseInt(x.MergeAcross,10)|0),U=w+(parseInt(x.MergeDown,10)|0),y.push({s:{c:v,r:w},e:{c:M,r:U}})),!r.sheetStubs)x.MergeAcross?v=M+1:++v;else if(x.MergeAcross||x.MergeDown){for(var le=v;le<=M;++le)for(var J=w;J<=U;++J)(le>v||J>w)&&(r.dense?(h[J]||(h[J]=[]),h[J][le]={t:"z"}):h[ps(le)+As(J)]={t:"z"});v=M+1}else++v;else x=pF(o[0]),x.Index&&(v=+x.Index-1),v<S.s.c&&(S.s.c=v),v>S.e.c&&(S.e.c=v),o[0].slice(-2)==="/>"&&++v,L=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(w<S.s.r&&(S.s.r=w),w>S.e.r&&(S.e.r=w),o[0].slice(-2)==="/>"&&(f=Vr(o[0]),f.Index&&(w=+f.Index-1)),v=0,++w):(f=Vr(o[0]),f.Index&&(w=+f.Index-1),ee={},(f.AutoFitHeight=="0"||f.Height)&&(ee.hpx=parseInt(f.Height,10),ee.hpt=ij(ee.hpx),W[w]=ee),f.Hidden=="1"&&(ee.hidden=!0,W[w]=ee));break;case"worksheet":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"));p.push(g),S.s.r<=S.e.r&&S.s.c<=S.e.c&&(h["!ref"]=vt(S),r.sheetRows&&r.sheetRows<=S.e.r&&(h["!fullref"]=h["!ref"],S.e.r=r.sheetRows-1,h["!ref"]=vt(S))),y.length&&(h["!merges"]=y),V.length>0&&(h["!cols"]=V),W.length>0&&(h["!rows"]=W),u[g]=h}else S={s:{r:2e6,c:2e6},e:{r:0,c:0}},w=v=0,c.push([o[3],!1]),d=Vr(o[0]),g=kt(d.Name),h=r.dense?[]:{},y=[],P=[],W=[],Y={name:g,Hidden:0},q.Sheets.push(Y);break;case"table":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),V=[],D=!1}break;case"style":o[1]==="/"?vF(F,E,r):E=Vr(o[0]);break;case"numberformat":E.nf=kt(Vr(o[0]).Format||"General"),to[E.nf]&&(E.nf=to[E.nf]);for(var ae=0;ae!=392&&at[ae]!=E.nf;++ae);if(ae==392){for(ae=57;ae!=392;++ae)if(at[ae]==null){Qn(E.nf,ae);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(Z=Vr(o[0]),Z.Hidden&&(Z.hidden=!0,delete Z.Hidden),Z.Width&&(Z.wpx=parseInt(Z.Width,10)),!D&&Z.wpx>10){D=!0,Ks=aj;for(var he=0;he<V.length;++he)V[he]&&rl(V[he])}D&&rl(Z),V[Z.Index-1||V.length]=Z;for(var Fe=0;Fe<+Z.Span;++Fe)V[V.length]=Es(Z);break;case"namedrange":if(o[1]==="/")break;q.Names||(q.Names=[]);var X=Ke(o[0]),Re={Name:X.Name,Ref:Gi(X.RefersTo.slice(1),{r:0,c:0})};q.Sheets.length>0&&(Re.Sheet=q.Sheets.length-1),q.Names.push(Re);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?k+=a.slice(A,o.index):A=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;E.Interior=Vr(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?n6(N,K,a.slice(T,o.index)):T=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"));wF(O),L.push(O)}else c.push([o[3],!1]),d=Vr(o[0]),O={a:d.Author};break;case"autofilter":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var ne=Vr(o[0]);h["!autofilter"]={ref:Gi(ne.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return Bp(a,r);var _e=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:_e=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:_e=!1}break;case"excelworkbook":switch(o[3]){case"date1904":q.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:_e=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:_e=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(a.slice(T,o.index)){case"SheetHidden":Y.Hidden=1;break;case"SheetVeryHidden":Y.Hidden=2;break}else T=o.index+o[0].length;break;case"header":h["!margins"]||eo(h["!margins"]={},"xlml"),isNaN(+Ke(o[0]).Margin)||(h["!margins"].header=+Ke(o[0]).Margin);break;case"footer":h["!margins"]||eo(h["!margins"]={},"xlml"),isNaN(+Ke(o[0]).Margin)||(h["!margins"].footer=+Ke(o[0]).Margin);break;case"pagemargins":var Se=Ke(o[0]);h["!margins"]||eo(h["!margins"]={},"xlml"),isNaN(+Se.Top)||(h["!margins"].top=+Se.Top),isNaN(+Se.Left)||(h["!margins"].left=+Se.Left),isNaN(+Se.Right)||(h["!margins"].right=+Se.Right),isNaN(+Se.Bottom)||(h["!margins"].bottom=+Se.Bottom);break;case"displayrighttoleft":q.Views||(q.Views=[]),q.Views[0]||(q.Views[0]={}),q.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:_e=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:_e=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:_e=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:_e=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:_e=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:_e=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:_e=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:_e=!1}break;case"smarttags":break;default:_e=!1;break}if(_e||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?yF(R,K,z,a.slice(T,o.index)):(z=o,T=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var be={};return!r.bookSheets&&!r.bookProps&&(be.Sheets=u),be.SheetNames=p,be.Workbook=q,be.SSF=Es(at),be.Props=N,be.Custprops=R,be}function ox(t,s){switch(Hm(s=s||{}),s.type||"base64"){case"base64":return $0(wr(t),s);case"binary":case"buffer":case"file":return $0(t,s);case"array":return $0(fi(t),s)}}function NF(t){var s={},r=t.content;if(r.l=28,s.AnsiUserType=r.read_shift(0,"lpstr-ansi"),s.AnsiClipboardFormat=IC(r),r.length-r.l<=4)return s;var a=r.read_shift(4);if(a==0||a>40||(r.l-=4,s.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(a=r.read_shift(4),a!==1907505652)||(s.UnicodeClipboardFormat=MC(r),a=r.read_shift(4),a==0||a>40))return s;r.l-=4,s.Reserved2=r.read_shift(0,"lpwstr")}var kF=[60,1084,2066,2165,2175];function SF(t,s,r,a,n){var i=a,l=[],o=r.slice(r.l,r.l+i);if(n&&n.enc&&n.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:n.enc.insitu(o)}l.push(o),r.l+=i;for(var c=Da(r,r.l),d=cx[c],u=0;d!=null&&kF.indexOf(c)>-1;)i=Da(r,r.l+2),u=r.l+4,c==2066?u+=4:(c==2165||c==2175)&&(u+=12),o=r.slice(u,r.l+4+i),l.push(o),r.l+=4+i,d=cx[c=Da(r,r.l)];var p=ln(l);_s(p,0);var h=0;p.lens=[];for(var g=0;g<l.length;++g)p.lens.push(h),h+=l[g].length;if(p.length<a)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+p.length+" < "+a;return s.f(p,p.length,n)}function oa(t,s,r){if(t.t!=="z"&&t.XF){var a=0;try{a=t.z||t.XF.numFmtId||0,s.cellNF&&(t.z=at[a])}catch(i){if(s.WTF)throw i}if(!s||s.cellText!==!1)try{t.t==="e"?t.w=t.w||yi[t.v]:a===0||a=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=To(t.v):t.w=oi(t.v):t.w=Br(a,t.v,{date1904:!!r,dateNF:s&&s.dateNF})}catch(i){if(s.WTF)throw i}if(s.cellDates&&a&&t.t=="n"&&ul(at[a]||String(a))){var n=qn(t.v);n&&(t.t="d",t.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}}function Nc(t,s,r){return{v:t,ixfe:s,t:r}}function CF(t,s){var r={opts:{}},a={},n=s.dense?[]:{},i={},l={},o=null,c=[],d="",u={},p,h="",g,x,f,m,j={},v=[],w,S,F=[],E=[],k={Sheets:[],WBProps:{date1904:!1},Views:[{}]},A={},y=function(ze){return ze<8?Zn[ze]:ze<64&&E[ze-8]||Zn[ze]},N=function(ze,Ye,jt){var it=Ye.XF.data;if(!(!it||!it.patternType||!jt||!jt.cellStyles)){Ye.s={},Ye.s.patternType=it.patternType;var Xt;(Xt=Po(y(it.icvFore)))&&(Ye.s.fgColor={rgb:Xt}),(Xt=Po(y(it.icvBack)))&&(Ye.s.bgColor={rgb:Xt})}},R=function(ze,Ye,jt){if(!(ee>1)&&!(jt.sheetRows&&ze.r>=jt.sheetRows)){if(jt.cellStyles&&Ye.XF&&Ye.XF.data&&N(ze,Ye,jt),delete Ye.ixfe,delete Ye.XF,p=ze,h=tt(ze),(!l||!l.s||!l.e)&&(l={s:{r:0,c:0},e:{r:0,c:0}}),ze.r<l.s.r&&(l.s.r=ze.r),ze.c<l.s.c&&(l.s.c=ze.c),ze.r+1>l.e.r&&(l.e.r=ze.r+1),ze.c+1>l.e.c&&(l.e.c=ze.c+1),jt.cellFormula&&Ye.f){for(var it=0;it<v.length;++it)if(!(v[it][0].s.c>ze.c||v[it][0].s.r>ze.r)&&!(v[it][0].e.c<ze.c||v[it][0].e.r<ze.r)){Ye.F=vt(v[it][0]),(v[it][0].s.c!=ze.c||v[it][0].s.r!=ze.r)&&delete Ye.f,Ye.f&&(Ye.f=""+Ms(v[it][1],l,ze,P,T));break}}jt.dense?(n[ze.r]||(n[ze.r]=[]),n[ze.r][ze.c]=Ye):n[h]=Ye}},T={enc:!1,sbcch:0,snames:[],sharedf:j,arrayf:v,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!s&&!!s.cellStyles,WTF:!!s&&!!s.wtf};s.password&&(T.password=s.password);var z,L=[],O=[],V=[],Z=[],D=!1,P=[];P.SheetNames=T.snames,P.sharedf=T.sharedf,P.arrayf=T.arrayf,P.names=[],P.XTI=[];var W=0,ee=0,M=0,U=[],q=[],Y;T.codepage=1200,Zr(1200);for(var K=!1;t.l<t.length-1;){var le=t.l,J=t.read_shift(2);if(J===0&&W===10)break;var ae=t.l===t.length?0:t.read_shift(2),he=cx[J];if(he&&he.f){if(s.bookSheets&&W===133&&J!==133)break;if(W=J,he.r===2||he.r==12){var Fe=t.read_shift(2);if(ae-=2,!T.enc&&Fe!==J&&((Fe&255)<<8|Fe>>8)!==J)throw new Error("rt mismatch: "+Fe+"!="+J);he.r==12&&(t.l+=10,ae-=10)}var X={};if(J===10?X=he.f(t,ae,T):X=SF(J,he,t,ae,T),ee==0&&[9,521,1033,2057].indexOf(W)===-1)continue;switch(J){case 34:r.opts.Date1904=k.WBProps.date1904=X;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(T.enc||(t.l=0),T.enc=X,!s.password)throw new Error("File is password-protected");if(X.valid==null)throw new Error("Encryption scheme unsupported");if(!X.valid)throw new Error("Password is incorrect");break;case 92:T.lastuser=X;break;case 66:var Re=Number(X);switch(Re){case 21010:Re=1200;break;case 32768:Re=1e4;break;case 32769:Re=1252;break}Zr(T.codepage=Re),K=!0;break;case 317:T.rrtabid=X;break;case 25:T.winlocked=X;break;case 439:r.opts.RefreshAll=X;break;case 12:r.opts.CalcCount=X;break;case 16:r.opts.CalcDelta=X;break;case 17:r.opts.CalcIter=X;break;case 13:r.opts.CalcMode=X;break;case 14:r.opts.CalcPrecision=X;break;case 95:r.opts.CalcSaveRecalc=X;break;case 15:T.CalcRefMode=X;break;case 2211:r.opts.FullCalc=X;break;case 129:X.fDialog&&(n["!type"]="dialog"),X.fBelow||((n["!outline"]||(n["!outline"]={})).above=!0),X.fRight||((n["!outline"]||(n["!outline"]={})).left=!0);break;case 224:F.push(X);break;case 430:P.push([X]),P[P.length-1].XTI=[];break;case 35:case 547:P[P.length-1].push(X);break;case 24:case 536:Y={Name:X.Name,Ref:Ms(X.rgce,l,null,P,T)},X.itab>0&&(Y.Sheet=X.itab-1),P.names.push(Y),P[0]||(P[0]=[],P[0].XTI=[]),P[P.length-1].push(X),X.Name=="_xlnm._FilterDatabase"&&X.itab>0&&X.rgce&&X.rgce[0]&&X.rgce[0][0]&&X.rgce[0][0][0]=="PtgArea3d"&&(q[X.itab-1]={ref:vt(X.rgce[0][0][1][2])});break;case 22:T.ExternCount=X;break;case 23:P.length==0&&(P[0]=[],P[0].XTI=[]),P[P.length-1].XTI=P[P.length-1].XTI.concat(X),P.XTI=P.XTI.concat(X);break;case 2196:if(T.biff<8)break;Y!=null&&(Y.Comment=X[1]);break;case 18:n["!protect"]=X;break;case 19:X!==0&&T.WTF&&console.error("Password verifier: "+X);break;case 133:i[X.pos]=X,T.snames.push(X.name);break;case 10:{if(--ee)break;if(l.e){if(l.e.r>0&&l.e.c>0){if(l.e.r--,l.e.c--,n["!ref"]=vt(l),s.sheetRows&&s.sheetRows<=l.e.r){var ne=l.e.r;l.e.r=s.sheetRows-1,n["!fullref"]=n["!ref"],n["!ref"]=vt(l),l.e.r=ne}l.e.r++,l.e.c++}L.length>0&&(n["!merges"]=L),O.length>0&&(n["!objects"]=O),V.length>0&&(n["!cols"]=V),Z.length>0&&(n["!rows"]=Z),k.Sheets.push(A)}d===""?u=n:a[d]=n,n=s.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(T.biff===8&&(T.biff={9:2,521:3,1033:4}[J]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[X.BIFFVer]||8),T.biffguess=X.BIFFVer==0,X.BIFFVer==0&&X.dt==4096&&(T.biff=5,K=!0,Zr(T.codepage=28591)),T.biff==8&&X.BIFFVer==0&&X.dt==16&&(T.biff=2),ee++)break;if(n=s.dense?[]:{},T.biff<8&&!K&&(K=!0,Zr(T.codepage=s.codepage||1252)),T.biff<5||X.BIFFVer==0&&X.dt==4096){d===""&&(d="Sheet1"),l={s:{r:0,c:0},e:{r:0,c:0}};var _e={pos:t.l-ae,name:d};i[_e.pos]=_e,T.snames.push(d)}else d=(i[le]||{name:""}).name;X.dt==32&&(n["!type"]="chart"),X.dt==64&&(n["!type"]="macro"),L=[],O=[],T.arrayf=v=[],V=[],Z=[],D=!1,A={Hidden:(i[le]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:n["!type"]=="chart"&&(s.dense?(n[X.r]||[])[X.c]:n[tt({c:X.c,r:X.r})])&&++X.c,w={ixfe:X.ixfe,XF:F[X.ixfe]||{},v:X.val,t:"n"},M>0&&(w.z=U[w.ixfe>>8&63]),oa(w,s,r.opts.Date1904),R({c:X.c,r:X.r},w,s);break;case 5:case 517:w={ixfe:X.ixfe,XF:F[X.ixfe],v:X.val,t:X.t},M>0&&(w.z=U[w.ixfe>>8&63]),oa(w,s,r.opts.Date1904),R({c:X.c,r:X.r},w,s);break;case 638:w={ixfe:X.ixfe,XF:F[X.ixfe],v:X.rknum,t:"n"},M>0&&(w.z=U[w.ixfe>>8&63]),oa(w,s,r.opts.Date1904),R({c:X.c,r:X.r},w,s);break;case 189:for(var Se=X.c;Se<=X.C;++Se){var be=X.rkrec[Se-X.c][0];w={ixfe:be,XF:F[be],v:X.rkrec[Se-X.c][1],t:"n"},M>0&&(w.z=U[w.ixfe>>8&63]),oa(w,s,r.opts.Date1904),R({c:Se,r:X.r},w,s)}break;case 6:case 518:case 1030:{if(X.val=="String"){o=X;break}if(w=Nc(X.val,X.cell.ixfe,X.tt),w.XF=F[w.ixfe],s.cellFormula){var Ie=X.formula;if(Ie&&Ie[0]&&Ie[0][0]&&Ie[0][0][0]=="PtgExp"){var Ze=Ie[0][0][1][0],ge=Ie[0][0][1][1],ie=tt({r:Ze,c:ge});j[ie]?w.f=""+Ms(X.formula,l,X.cell,P,T):w.F=((s.dense?(n[Ze]||[])[ge]:n[ie])||{}).F}else w.f=""+Ms(X.formula,l,X.cell,P,T)}M>0&&(w.z=U[w.ixfe>>8&63]),oa(w,s,r.opts.Date1904),R(X.cell,w,s),o=X}break;case 7:case 519:if(o)o.val=X,w=Nc(X,o.cell.ixfe,"s"),w.XF=F[w.ixfe],s.cellFormula&&(w.f=""+Ms(o.formula,l,o.cell,P,T)),M>0&&(w.z=U[w.ixfe>>8&63]),oa(w,s,r.opts.Date1904),R(o.cell,w,s),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{v.push(X);var Ue=tt(X[0].s);if(g=s.dense?(n[X[0].s.r]||[])[X[0].s.c]:n[Ue],s.cellFormula&&g){if(!o||!Ue||!g)break;g.f=""+Ms(X[1],l,X[0],P,T),g.F=vt(X[0])}}break;case 1212:{if(!s.cellFormula)break;if(h){if(!o)break;j[tt(o.cell)]=X[0],g=s.dense?(n[o.cell.r]||[])[o.cell.c]:n[tt(o.cell)],(g||{}).f=""+Ms(X[0],l,p,P,T)}}break;case 253:w=Nc(c[X.isst].t,X.ixfe,"s"),c[X.isst].h&&(w.h=c[X.isst].h),w.XF=F[w.ixfe],M>0&&(w.z=U[w.ixfe>>8&63]),oa(w,s,r.opts.Date1904),R({c:X.c,r:X.r},w,s);break;case 513:s.sheetStubs&&(w={ixfe:X.ixfe,XF:F[X.ixfe],t:"z"},M>0&&(w.z=U[w.ixfe>>8&63]),oa(w,s,r.opts.Date1904),R({c:X.c,r:X.r},w,s));break;case 190:if(s.sheetStubs)for(var St=X.c;St<=X.C;++St){var dt=X.ixfe[St-X.c];w={ixfe:dt,XF:F[dt],t:"z"},M>0&&(w.z=U[w.ixfe>>8&63]),oa(w,s,r.opts.Date1904),R({c:St,r:X.r},w,s)}break;case 214:case 516:case 4:w=Nc(X.val,X.ixfe,"s"),w.XF=F[w.ixfe],M>0&&(w.z=U[w.ixfe>>8&63]),oa(w,s,r.opts.Date1904),R({c:X.c,r:X.r},w,s);break;case 0:case 512:ee===1&&(l=X);break;case 252:c=X;break;case 1054:if(T.biff==4){U[M++]=X[1];for(var _t=0;_t<M+163&&at[_t]!=X[1];++_t);_t>=163&&Qn(X[1],M+163)}else Qn(X[1],X[0]);break;case 30:{U[M++]=X;for(var Ct=0;Ct<M+163&&at[Ct]!=X;++Ct);Ct>=163&&Qn(X,M+163)}break;case 229:L=L.concat(X);break;case 93:O[X.cmo[0]]=T.lastobj=X;break;case 438:T.lastobj.TxO=X;break;case 127:T.lastobj.ImData=X;break;case 440:for(m=X[0].s.r;m<=X[0].e.r;++m)for(f=X[0].s.c;f<=X[0].e.c;++f)g=s.dense?(n[m]||[])[f]:n[tt({c:f,r:m})],g&&(g.l=X[1]);break;case 2048:for(m=X[0].s.r;m<=X[0].e.r;++m)for(f=X[0].s.c;f<=X[0].e.c;++f)g=s.dense?(n[m]||[])[f]:n[tt({c:f,r:m})],g&&g.l&&(g.l.Tooltip=X[1]);break;case 28:{if(T.biff<=5&&T.biff>=2)break;g=s.dense?(n[X[0].r]||[])[X[0].c]:n[tt(X[0])];var ut=O[X[2]];g||(s.dense?(n[X[0].r]||(n[X[0].r]=[]),g=n[X[0].r][X[0].c]={t:"z"}):g=n[tt(X[0])]={t:"z"},l.e.r=Math.max(l.e.r,X[0].r),l.s.r=Math.min(l.s.r,X[0].r),l.e.c=Math.max(l.e.c,X[0].c),l.s.c=Math.min(l.s.c,X[0].c)),g.c||(g.c=[]),x={a:X[1],t:ut.TxO.t},g.c.push(x)}break;case 2173:J5(F[X.ixfe],X.ext);break;case 125:{if(!T.cellStyles)break;for(;X.e>=X.s;)V[X.e--]={width:X.w/256,level:X.level||0,hidden:!!(X.flags&1)},D||(D=!0,$m(X.w/256)),rl(V[X.e+1])}break;case 520:{var ot={};X.level!=null&&(Z[X.r]=ot,ot.level=X.level),X.hidden&&(Z[X.r]=ot,ot.hidden=!0),X.hpt&&(Z[X.r]=ot,ot.hpt=X.hpt,ot.hpx=Do(X.hpt))}break;case 38:case 39:case 40:case 41:n["!margins"]||eo(n["!margins"]={}),n["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[J]]=X;break;case 161:n["!margins"]||eo(n["!margins"]={}),n["!margins"].header=X.header,n["!margins"].footer=X.footer;break;case 574:X.RTL&&(k.Views[0].RTL=!0);break;case 146:E=X;break;case 2198:z=X;break;case 140:S=X;break;case 442:d?A.CodeName=X||A.name:k.WBProps.CodeName=X||"ThisWorkbook";break}}else he||console.error("Missing Info for XLS Record 0x"+J.toString(16)),t.l+=ae}return r.SheetNames=ba(i).sort(function(ye,ze){return Number(ye)-Number(ze)}).map(function(ye){return i[ye].name}),s.bookSheets||(r.Sheets=a),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&q.forEach(function(ye,ze){r.Sheets[r.SheetNames[ze]]["!autofilter"]=ye}),r.Strings=c,r.SSF=Es(at),T.enc&&(r.Encryption=T.enc),z&&(r.Themes=z),r.Metadata={},S!==void 0&&(r.Metadata.Country=S),P.names.length>0&&(k.Names=P.names),r.Workbook=k,r}var Rp={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function _F(t,s,r){var a=bt.find(t,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var n=gp(a,VC,Rp.DSI);for(var i in n)s[i]=n[i]}catch(d){if(r.WTF)throw d}var l=bt.find(t,"/!SummaryInformation");if(l&&l.size>0)try{var o=gp(l,HC,Rp.SI);for(var c in o)s[c]==null&&(s[c]=o[c])}catch(d){if(r.WTF)throw d}s.HeadingPairs&&s.TitlesOfParts&&(Uv(s.HeadingPairs,s.TitlesOfParts,s,r),delete s.HeadingPairs,delete s.TitlesOfParts)}function kj(t,s){s||(s={}),Hm(s),Zb(),s.codepage&&Nm(s.codepage);var r,a;if(t.FullPaths){if(bt.find(t,"/encryption"))throw new Error("File is password-protected");r=bt.find(t,"!CompObj"),a=bt.find(t,"/Workbook")||bt.find(t,"/Book")}else{switch(s.type){case"base64":t=Qr(wr(t));break;case"binary":t=Qr(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}_s(t,0),a={content:t}}var n,i;if(r&&NF(r),s.bookProps&&!s.bookSheets)n={};else{var l=gt?"buffer":"array";if(a&&a.content)n=CF(a.content,s);else if((i=bt.find(t,"PerfectOffice_MAIN"))&&i.content)n=Ql.to_workbook(i.content,(s.type=l,s));else if((i=bt.find(t,"NativeContent_MAIN"))&&i.content)n=Ql.to_workbook(i.content,(s.type=l,s));else throw(i=bt.find(t,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");s.bookVBA&&t.FullPaths&&bt.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(n.vbaraw=xT(t))}var o={};return t.FullPaths&&_F(t,o,s),n.Props=n.Custprops=o,s.bookFiles&&(n.cfb=t),n}var Cd={0:{f:oA},1:{f:xA},2:{f:jA},3:{f:pA},4:{f:hA},5:{f:vA},6:{f:kA},7:{f:yA},8:{f:EA},9:{f:TA},10:{f:CA},11:{f:_A},12:{f:mA},13:{f:wA},14:{f:gA},15:{f:fA},16:{f:bj},17:{f:SA},18:{f:bA},19:{f:Rm},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:sF},40:{},42:{},43:{f:C5},44:{f:S5},45:{f:_5},46:{f:E5},47:{f:T5},48:{},49:{f:AC},50:{},51:{f:Y5},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Zv},62:{f:NA},63:{f:tT},64:{f:MA},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Hs,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:IA},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:uA},148:{f:cA,p:16},151:{f:PA},152:{},153:{f:eF},154:{},155:{},156:{f:ZA},157:{},158:{},159:{T:1,f:H_},160:{T:-1},161:{T:1,f:gi},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:AA},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:K5},336:{T:-1},337:{f:X5,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:ax},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Qv},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:DA},427:{f:RA},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:OA},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:dA},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:FA},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:ax},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:cT},633:{T:1},634:{T:-1},635:{T:1,f:oT},636:{T:-1},637:{f:PC},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:VA},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:BA},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},cx={6:{f:M0},10:{f:Xa},12:{f:is},13:{f:is},14:{f:Qt},15:{f:Qt},16:{f:Us},17:{f:Qt},18:{f:Qt},19:{f:is},20:{f:jp},21:{f:jp},23:{f:Qv},24:{f:Np},25:{f:Qt},26:{},27:{},28:{f:i_},29:{},34:{f:Qt},35:{f:wp},38:{f:Us},39:{f:Us},40:{f:Us},41:{f:Us},42:{f:Qt},43:{f:Qt},47:{f:d5},49:{f:U6},51:{f:is},60:{},61:{f:M6},64:{f:Qt},65:{f:$6},66:{f:is},77:{},80:{},81:{},82:{},85:{f:is},89:{},90:{},91:{},92:{f:A6},93:{f:o_},94:{},95:{f:Qt},96:{},97:{},99:{f:Qt},125:{f:Zv},128:{f:X6},129:{f:F6},130:{f:is},131:{f:Qt},132:{f:Qt},133:{f:P6},134:{},140:{f:h_},141:{f:is},144:{},146:{f:p_},151:{},152:{},153:{},154:{},155:{},156:{f:is},157:{},158:{},160:{f:j_},161:{f:y_},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:q6},190:{f:J6},193:{f:Xa},197:{},198:{},199:{},200:{},201:{},202:{f:Qt},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:is},220:{},221:{f:Qt},222:{},224:{f:Y6},225:{f:E6},226:{f:Xa},227:{},229:{f:l_},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:D6},253:{f:z6},255:{f:R6},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Gv},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Qt},353:{f:Xa},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Z6},431:{f:Qt},432:{},433:{},434:{},437:{},438:{f:u_},439:{f:Qt},440:{f:x_},441:{},442:{f:Vo},443:{},444:{f:is},445:{},446:{},448:{f:Xa},449:{f:I6,r:2},450:{f:Xa},512:{f:bp},513:{f:v_},515:{f:Q6},516:{f:W6},517:{f:vp},519:{f:w_},520:{f:L6},523:{},545:{f:kp},549:{f:yp},566:{},574:{f:B6},638:{f:G6},659:{},1048:{},1054:{f:V6},1084:{},1212:{f:r_},2048:{f:m_},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:vc},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Xa},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:g_,r:12},2173:{f:q5,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Qt,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:s_,r:12},2197:{},2198:{f:U5,r:12},2199:{},2200:{},2201:{},2202:{f:a_,r:12},2203:{f:Xa},2204:{},2205:{},2206:{},2207:{},2211:{f:O6},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:is},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:b_},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:f_},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:bp},1:{},2:{f:C_},3:{f:S_},4:{f:k_},5:{f:vp},7:{f:__},8:{},9:{f:vc},11:{},22:{f:is},30:{f:H6},31:{},32:{},33:{f:kp},36:{},37:{f:yp},50:{f:T_},62:{},52:{},67:{},68:{f:is},69:{},86:{},126:{},127:{f:N_},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:E_},223:{},234:{},354:{},421:{},518:{f:M0},521:{f:vc},536:{f:Np},547:{f:wp},561:{},579:{},1030:{f:M0},1033:{f:vc},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Hr(t,s,r,a){var n=s;if(!isNaN(n)){var i=(r||[]).length||0,l=t.next(4);l.write_shift(2,n),l.write_shift(2,i),i>0&&Dv(r)&&t.push(r)}}function Lp(t,s){var r=s||{},a=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var n=t.match(/<table/i);if(!n)throw new Error("Invalid HTML: could not find <table>");var i=t.match(/<\/table/i),l=n.index,o=i&&i.index||t.length,c=QS(t.slice(l,o),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,u=0,p=0,h=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},x=[];for(l=0;l<c.length;++l){var f=c[l].trim(),m=f.slice(0,3).toLowerCase();if(m=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}u=0;continue}if(!(m!="<td"&&m!="<th")){var j=f.split(/<\/t[dh]>/i);for(o=0;o<j.length;++o){var v=j[o].trim();if(v.match(/<t[dh]/i)){for(var w=v,S=0;w.charAt(0)=="<"&&(S=w.indexOf(">"))>-1;)w=w.slice(S+1);for(var F=0;F<x.length;++F){var E=x[F];E.s.c==u&&E.s.r<d&&d<=E.e.r&&(u=E.e.c+1,F=-1)}var k=Ke(v.slice(0,v.indexOf(">")));h=k.colspan?+k.colspan:1,((p=+k.rowspan)>1||h>1)&&x.push({s:{r:d,c:u},e:{r:d+(p||1)-1,c:u+h-1}});var A=k.t||k["data-t"]||"";if(!w.length){u+=h;continue}if(w=vv(w),g.s.r>d&&(g.s.r=d),g.e.r<d&&(g.e.r=d),g.s.c>u&&(g.s.c=u),g.e.c<u&&(g.e.c=u),!w.length){u+=h;continue}var y={t:"s",v:w};r.raw||!w.trim().length||A=="s"||(w==="TRUE"?y={t:"b",v:!0}:w==="FALSE"?y={t:"b",v:!1}:isNaN(aa(w))?isNaN(sl(w).getDate())||(y={t:"d",v:ks(w)},r.cellDates||(y={t:"n",v:er(y.v)}),y.z=r.dateNF||at[14]):y={t:"n",v:aa(w)}),r.dense?(a[d]||(a[d]=[]),a[d][u]=y):a[tt({r:d,c:u})]=y,u+=h}}}}return a["!ref"]=vt(g),x.length&&(a["!merges"]=x),a}function TF(t,s,r,a){for(var n=t["!merges"]||[],i=[],l=s.s.c;l<=s.e.c;++l){for(var o=0,c=0,d=0;d<n.length;++d)if(!(n[d].s.r>r||n[d].s.c>l)&&!(n[d].e.r<r||n[d].e.c<l)){if(n[d].s.r<r||n[d].s.c<l){o=-1;break}o=n[d].e.r-n[d].s.r+1,c=n[d].e.c-n[d].s.c+1;break}if(!(o<0)){var u=tt({r,c:l}),p=a.dense?(t[r]||[])[l]:t[u],h=p&&p.v!=null&&(p.h||Em(p.w||(Ha(p),p.w)||""))||"",g={};o>1&&(g.rowspan=o),c>1&&(g.colspan=c),a.editable?h='<span contenteditable="true">'+h+"</span>":p&&(g["data-t"]=p&&p.t||"z",p.v!=null&&(g["data-v"]=p.v),p.z!=null&&(g["data-z"]=p.z),p.l&&(p.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+p.l.Target+'">'+h+"</a>")),g.id=(a.id||"sjs")+"-"+u,i.push(hC("td",h,g))}}var x="<tr>";return x+i.join("")+"</tr>"}var EF='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',AF="</body></html>";function FF(t,s){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Rn(Lp(r[0],s),s);var a=qm();return r.forEach(function(n,i){Jm(a,Lp(n,s),"Sheet"+(i+1))}),a}function PF(t,s,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function DF(t,s){var r=s||{},a=r.header!=null?r.header:EF,n=r.footer!=null?r.footer:AF,i=[a],l=xl(t["!ref"]);r.dense=Array.isArray(t),i.push(PF(t,l,r));for(var o=l.s.r;o<=l.e.r;++o)i.push(TF(t,l,o,r));return i.push("</table>"+n),i.join("")}function Sj(t,s,r){var a=r||{},n=0,i=0;if(a.origin!=null)if(typeof a.origin=="number")n=a.origin;else{var l=typeof a.origin=="string"?Ys(a.origin):a.origin;n=l.r,i=l.c}var o=s.getElementsByTagName("tr"),c=Math.min(a.sheetRows||1e7,o.length),d={s:{r:0,c:0},e:{r:n,c:i}};if(t["!ref"]){var u=xl(t["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),n==-1&&(d.e.r=n=u.e.r+1)}var p=[],h=0,g=t["!rows"]||(t["!rows"]=[]),x=0,f=0,m=0,j=0,v=0,w=0;for(t["!cols"]||(t["!cols"]=[]);x<o.length&&f<c;++x){var S=o[x];if(Op(S)){if(a.display)continue;g[f]={hidden:!0}}var F=S.children;for(m=j=0;m<F.length;++m){var E=F[m];if(!(a.display&&Op(E))){var k=E.hasAttribute("data-v")?E.getAttribute("data-v"):E.hasAttribute("v")?E.getAttribute("v"):vv(E.innerHTML),A=E.getAttribute("data-z")||E.getAttribute("z");for(h=0;h<p.length;++h){var y=p[h];y.s.c==j+i&&y.s.r<f+n&&f+n<=y.e.r&&(j=y.e.c+1-i,h=-1)}w=+E.getAttribute("colspan")||1,((v=+E.getAttribute("rowspan")||1)>1||w>1)&&p.push({s:{r:f+n,c:j+i},e:{r:f+n+(v||1)-1,c:j+i+(w||1)-1}});var N={t:"s",v:k},R=E.getAttribute("data-t")||E.getAttribute("t")||"";k!=null&&(k.length==0?N.t=R||"z":a.raw||k.trim().length==0||R=="s"||(k==="TRUE"?N={t:"b",v:!0}:k==="FALSE"?N={t:"b",v:!1}:isNaN(aa(k))?isNaN(sl(k).getDate())||(N={t:"d",v:ks(k)},a.cellDates||(N={t:"n",v:er(N.v)}),N.z=a.dateNF||at[14]):N={t:"n",v:aa(k)})),N.z===void 0&&A!=null&&(N.z=A);var T="",z=E.getElementsByTagName("A");if(z&&z.length)for(var L=0;L<z.length&&!(z[L].hasAttribute("href")&&(T=z[L].getAttribute("href"),T.charAt(0)!="#"));++L);T&&T.charAt(0)!="#"&&(N.l={Target:T}),a.dense?(t[f+n]||(t[f+n]=[]),t[f+n][j+i]=N):t[tt({c:j+i,r:f+n})]=N,d.e.c<j+i&&(d.e.c=j+i),j+=w}}++f}return p.length&&(t["!merges"]=(t["!merges"]||[]).concat(p)),d.e.r=Math.max(d.e.r,f-1+n),t["!ref"]=vt(d),f>=c&&(t["!fullref"]=vt((d.e.r=o.length-x+f-1+n,d))),t}function Cj(t,s){var r=s||{},a=r.dense?[]:{};return Sj(a,t,s)}function RF(t,s){return Rn(Cj(t,s),s)}function Op(t){var s="",r=LF(t);return r&&(s=r(t).getPropertyValue("display")),s||(s=t.style&&t.style.display),s==="none"}function LF(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function OF(t){var s=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,n){return Array(parseInt(n,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=kt(s.replace(/<[^>]*>/g,""));return[r]}var Ip={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function _j(t,s){var r=s||{},a=Am(t),n=[],i,l,o={name:""},c="",d=0,u,p,h={},g=[],x=r.dense?[]:{},f,m,j={value:""},v="",w=0,S=[],F=-1,E=-1,k={s:{r:1e6,c:1e7},e:{r:0,c:0}},A=0,y={},N=[],R={},T=0,z=0,L=[],O=1,V=1,Z=[],D={Names:[]},P={},W=["",""],ee=[],M={},U="",q=0,Y=!1,K=!1,le=0;for(Ao.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");f=Ao.exec(a);)switch(f[3]=f[3].replace(/_.*$/,"")){case"table":case"":f[1]==="/"?(k.e.c>=k.s.c&&k.e.r>=k.s.r?x["!ref"]=vt(k):x["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=k.e.r&&(x["!fullref"]=x["!ref"],k.e.r=r.sheetRows-1,x["!ref"]=vt(k)),N.length&&(x["!merges"]=N),L.length&&(x["!rows"]=L),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),g.push(u.name),h[u.name]=x,K=!1):f[0].charAt(f[0].length-2)!=="/"&&(u=Ke(f[0],!1),F=E=-1,k.s.r=k.s.c=1e7,k.e.r=k.e.c=0,x=r.dense?[]:{},N=[],L=[],K=!0);break;case"table-row-group":f[1]==="/"?--A:++A;break;case"table-row":case"":if(f[1]==="/"){F+=O,O=1;break}if(p=Ke(f[0],!1),p.?F=p.-1:F==-1&&(F=0),O=+p["number-rows-repeated"]||1,O<10)for(le=0;le<O;++le)A>0&&(L[F+le]={level:A});E=-1;break;case"covered-table-cell":f[1]!=="/"&&++E,r.sheetStubs&&(r.dense?(x[F]||(x[F]=[]),x[F][E]={t:"z"}):x[tt({r:F,c:E})]={t:"z"}),v="",S=[];break;case"table-cell":case"":if(f[0].charAt(f[0].length-2)==="/")++E,j=Ke(f[0],!1),V=parseInt(j["number-columns-repeated"]||"1",10),m={t:"z",v:null},j.formula&&r.cellFormula!=!1&&(m.f=Fp(kt(j.formula))),(j.||j["value-type"])=="string"&&(m.t="s",m.v=kt(j["string-value"]||""),r.dense?(x[F]||(x[F]=[]),x[F][E]=m):x[tt({r:F,c:E})]=m),E+=V-1;else if(f[1]!=="/"){++E,v="",w=0,S=[],V=1;var J=O?F+O-1:F;if(E>k.e.c&&(k.e.c=E),E<k.s.c&&(k.s.c=E),F<k.s.r&&(k.s.r=F),J>k.e.r&&(k.e.r=J),j=Ke(f[0],!1),ee=[],M={},m={t:j.||j["value-type"],v:null},r.cellFormula)if(j.formula&&(j.formula=kt(j.formula)),j["number-matrix-columns-spanned"]&&j["number-matrix-rows-spanned"]&&(T=parseInt(j["number-matrix-rows-spanned"],10)||0,z=parseInt(j["number-matrix-columns-spanned"],10)||0,R={s:{r:F,c:E},e:{r:F+T-1,c:E+z-1}},m.F=vt(R),Z.push([R,m.F])),j.formula)m.f=Fp(j.formula);else for(le=0;le<Z.length;++le)F>=Z[le][0].s.r&&F<=Z[le][0].e.r&&E>=Z[le][0].s.c&&E<=Z[le][0].e.c&&(m.F=Z[le][1]);switch((j["number-columns-spanned"]||j["number-rows-spanned"])&&(T=parseInt(j["number-rows-spanned"],10)||0,z=parseInt(j["number-columns-spanned"],10)||0,R={s:{r:F,c:E},e:{r:F+T-1,c:E+z-1}},N.push(R)),j["number-columns-repeated"]&&(V=parseInt(j["number-columns-repeated"],10)),m.t){case"boolean":m.t="b",m.v=$t(j["boolean-value"]);break;case"float":m.t="n",m.v=parseFloat(j.value);break;case"percentage":m.t="n",m.v=parseFloat(j.value);break;case"currency":m.t="n",m.v=parseFloat(j.value);break;case"date":m.t="d",m.v=ks(j["date-value"]),r.cellDates||(m.t="n",m.v=er(m.v)),m.z="m/d/yy";break;case"time":m.t="n",m.v=KS(j["time-value"])/86400,r.cellDates&&(m.t="d",m.v=Kd(m.v)),m.z="HH:MM:SS";break;case"number":m.t="n",m.v=parseFloat(j.);break;default:if(m.t==="string"||m.t==="text"||!m.t)m.t="s",j["string-value"]!=null&&(v=kt(j["string-value"]),S=[]);else throw new Error("Unsupported value type "+m.t)}}else{if(Y=!1,m.t==="s"&&(m.v=v||"",S.length&&(m.R=S),Y=w==0),P.Target&&(m.l=P),ee.length>0&&(m.c=ee,ee=[]),v&&r.cellText!==!1&&(m.w=v),Y&&(m.t="z",delete m.v),(!Y||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=F))for(var ae=0;ae<O;++ae){if(V=parseInt(j["number-columns-repeated"]||"1",10),r.dense)for(x[F+ae]||(x[F+ae]=[]),x[F+ae][E]=ae==0?m:Es(m);--V>0;)x[F+ae][E+V]=Es(m);else for(x[tt({r:F+ae,c:E})]=m;--V>0;)x[tt({r:F+ae,c:E+V})]=Es(m);k.e.c<=E&&(k.e.c=E)}V=parseInt(j["number-columns-repeated"]||"1",10),E+=V-1,V=0,m={},v="",S=[]}P={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(f[1]==="/"){if((i=n.pop())[0]!==f[3])throw"Bad state: "+i}else f[0].charAt(f[0].length-2)!=="/"&&n.push([f[3],!0]);break;case"annotation":if(f[1]==="/"){if((i=n.pop())[0]!==f[3])throw"Bad state: "+i;M.t=v,S.length&&(M.R=S),M.a=U,ee.push(M)}else f[0].charAt(f[0].length-2)!=="/"&&n.push([f[3],!1]);U="",q=0,v="",w=0,S=[];break;case"creator":f[1]==="/"?U=a.slice(q,f.index):q=f.index+f[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(f[1]==="/"){if((i=n.pop())[0]!==f[3])throw"Bad state: "+i}else f[0].charAt(f[0].length-2)!=="/"&&n.push([f[3],!1]);v="",w=0,S=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(f[1]==="/"){if(y[o.name]=c,(i=n.pop())[0]!==f[3])throw"Bad state: "+i}else f[0].charAt(f[0].length-2)!=="/"&&(c="",o=Ke(f[0],!1),n.push([f[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(n[n.length-1][0]){case"time-style":case"date-style":l=Ke(f[0],!1),c+=Ip[f[3]][l.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(n[n.length-1][0]){case"time-style":case"date-style":l=Ke(f[0],!1),c+=Ip[f[3]][l.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(f[0].slice(-2)==="/>")break;if(f[1]==="/")switch(n[n.length-1][0]){case"number-style":case"date-style":case"time-style":c+=a.slice(d,f.index);break}else d=f.index+f[0].length;break;case"named-range":l=Ke(f[0],!1),W=B0(l["cell-range-address"]);var he={Name:l.name,Ref:W[0]+"!"+W[1]};K&&(he.Sheet=g.length),D.Names.push(he);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(n[n.length-1][0])>-1)break;if(f[1]==="/"&&(!j||!j["string-value"])){var Fe=OF(a.slice(w,f.index));v=(v.length>0?v+`
`:"")+Fe[0]}else Ke(f[0],!1),w=f.index+f[0].length;break;case"s":break;case"database-range":if(f[1]==="/")break;try{W=B0(Ke(f[0])["target-range-address"]),h[W[0]]["!autofilter"]={ref:W[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(f[1]!=="/"){if(P=Ke(f[0],!1),!P.href)break;P.Target=kt(P.href),delete P.href,P.Target.charAt(0)=="#"&&P.Target.indexOf(".")>-1?(W=B0(P.Target.slice(1)),P.Target="#"+W[0]+"!"+W[1]):P.Target.match(/^\.\.[\\\/]/)&&(P.Target=P.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(f[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(f)}}var X={Sheets:h,SheetNames:g,Workbook:D};return r.bookSheets&&delete X.Sheets,X}function Mp(t,s){s=s||{},Er(t,"META-INF/manifest.xml")&&QC(ns(t,"META-INF/manifest.xml"),s);var r=gr(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var a=_j(Lt(r),s);return Er(t,"meta.xml")&&(a.Props=$v(ns(t,"meta.xml"))),a}function Bp(t,s){return _j(t,s)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Wm(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function dx(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Lt(fi(t))}function ux(t){var s=t.reduce(function(n,i){return n+i.length},0),r=new Uint8Array(s),a=0;return t.forEach(function(n){r.set(n,a),a+=n.length}),r}function $p(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function IF(t,s){for(var r=(t[s+15]&127)<<7|t[s+14]>>1,a=t[s+14]&1,n=s+13;n>=s;--n)a=a*256+t[n];return(t[s+15]&128?-a:a)*Math.pow(10,r-6176)}function Ro(t,s){var r=s?s[0]:0,a=t[r]&127;e:if(t[r++]>=128&&(a|=(t[r]&127)<<7,t[r++]<128||(a|=(t[r]&127)<<14,t[r++]<128)||(a|=(t[r]&127)<<21,t[r++]<128)||(a+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(a+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(a+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return s&&(s[0]=r),a}function ys(t){var s=0,r=t[s]&127;e:if(t[s++]>=128){if(r|=(t[s]&127)<<7,t[s++]<128||(r|=(t[s]&127)<<14,t[s++]<128)||(r|=(t[s]&127)<<21,t[s++]<128))break e;r|=(t[s]&127)<<28}return r}function zs(t){for(var s=[],r=[0];r[0]<t.length;){var a=r[0],n=Ro(t,r),i=n&7;n=Math.floor(n/8);var l=0,o;if(n==0)break;switch(i){case 0:{for(var c=r[0];t[r[0]++]>=128;);o=t.slice(c,r[0])}break;case 5:l=4,o=t.slice(r[0],r[0]+l),r[0]+=l;break;case 1:l=8,o=t.slice(r[0],r[0]+l),r[0]+=l;break;case 2:l=Ro(t,r),o=t.slice(r[0],r[0]+l),r[0]+=l;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(n," at offset ").concat(a))}var d={data:o,type:i};s[n]==null?s[n]=[d]:s[n].push(d)}return s}function Vm(t,s){return(t==null?void 0:t.map(function(r){return s(r.data)}))||[]}function MF(t){for(var s,r=[],a=[0];a[0]<t.length;){var n=Ro(t,a),i=zs(t.slice(a[0],a[0]+n));a[0]+=n;var l={id:ys(i[1][0].data),messages:[]};i[2].forEach(function(o){var c=zs(o.data),d=ys(c[3][0].data);l.messages.push({meta:c,data:t.slice(a[0],a[0]+d)}),a[0]+=d}),(s=i[3])!=null&&s[0]&&(l.merge=ys(i[3][0].data)>>>0>0),r.push(l)}return r}function BF(t,s){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],a=Ro(s,r),n=[];r[0]<s.length;){var i=s[r[0]]&3;if(i==0){var l=s[r[0]++]>>2;if(l<60)++l;else{var o=l-59;l=s[r[0]],o>1&&(l|=s[r[0]+1]<<8),o>2&&(l|=s[r[0]+2]<<16),o>3&&(l|=s[r[0]+3]<<24),l>>>=0,l++,r[0]+=o}n.push(s.slice(r[0],r[0]+l)),r[0]+=l;continue}else{var c=0,d=0;if(i==1?(d=(s[r[0]]>>2&7)+4,c=(s[r[0]++]&224)<<3,c|=s[r[0]++]):(d=(s[r[0]++]>>2)+1,i==2?(c=s[r[0]]|s[r[0]+1]<<8,r[0]+=2):(c=(s[r[0]]|s[r[0]+1]<<8|s[r[0]+2]<<16|s[r[0]+3]<<24)>>>0,r[0]+=4)),n=[ux(n)],c==0)throw new Error("Invalid offset 0");if(c>n[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(n.push(n[0].slice(-c)),d-=c;d>=n[n.length-1].length;)n.push(n[n.length-1]),d-=n[n.length-1].length;n.push(n[0].slice(-c,-c+d))}}var u=ux(n);if(u.length!=a)throw new Error("Unexpected length: ".concat(u.length," != ").concat(a));return u}function $F(t){for(var s=[],r=0;r<t.length;){var a=t[r++],n=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,s.push(BF(a,t.slice(r,r+n))),r+=n}if(r!==t.length)throw new Error("data is not a valid framed stream!");return ux(s)}function UF(t,s,r,a){var n=Wm(t),i=n.getUint32(4,!0),l=(a>1?12:8)+$p(i&(a>1?3470:398))*4,o=-1,c=-1,d=NaN,u=new Date(2001,0,1);i&512&&(o=n.getUint32(l,!0),l+=4),l+=$p(i&(a>1?12288:4096))*4,i&16&&(c=n.getUint32(l,!0),l+=4),i&32&&(d=n.getFloat64(l,!0),l+=8),i&64&&(u.setTime(u.getTime()+n.getFloat64(l,!0)*1e3),l+=8);var p;switch(t[2]){case 0:break;case 2:p={t:"n",v:d};break;case 3:p={t:"s",v:s[c]};break;case 5:p={t:"d",v:u};break;case 6:p={t:"b",v:d>0};break;case 7:p={t:"n",v:d/86400};break;case 8:p={t:"e",v:0};break;case 9:if(o>-1)p={t:"s",v:r[o]};else if(c>-1)p={t:"s",v:s[c]};else if(!isNaN(d))p={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return p}function zF(t,s,r){var a=Wm(t),n=a.getUint32(8,!0),i=12,l=-1,o=-1,c=NaN,d=NaN,u=new Date(2001,0,1);n&1&&(c=IF(t,i),i+=16),n&2&&(d=a.getFloat64(i,!0),i+=8),n&4&&(u.setTime(u.getTime()+a.getFloat64(i,!0)*1e3),i+=8),n&8&&(o=a.getUint32(i,!0),i+=4),n&16&&(l=a.getUint32(i,!0),i+=4);var p;switch(t[1]){case 0:break;case 2:p={t:"n",v:c};break;case 3:p={t:"s",v:s[o]};break;case 5:p={t:"d",v:u};break;case 6:p={t:"b",v:d>0};break;case 7:p={t:"n",v:d/86400};break;case 8:p={t:"e",v:0};break;case 9:if(l>-1)p={t:"s",v:r[l]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(n&31," : ").concat(t.slice(0,4)));break;case 10:p={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(n&31," : ").concat(t.slice(0,4)))}return p}function WF(t,s,r){switch(t[0]){case 0:case 1:case 2:case 3:return UF(t,s,r,t[0]);case 5:return zF(t,s,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Nn(t){var s=zs(t);return Ro(s[1][0].data)}function Up(t,s){var r=zs(s.data),a=ys(r[1][0].data),n=r[3],i=[];return(n||[]).forEach(function(l){var o=zs(l.data),c=ys(o[1][0].data)>>>0;switch(a){case 1:i[c]=dx(o[3][0].data);break;case 8:{var d=t[Nn(o[9][0].data)][0],u=zs(d.data),p=t[Nn(u[1][0].data)][0],h=ys(p.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var g=zs(p.data);i[c]=g[3].map(function(x){return dx(x.data)}).join("")}break}}),i}function VF(t,s){var r,a,n,i,l,o,c,d,u,p,h,g,x,f,m=zs(t),j=ys(m[1][0].data)>>>0,v=ys(m[2][0].data)>>>0,w=((a=(r=m[8])==null?void 0:r[0])==null?void 0:a.data)&&ys(m[8][0].data)>0||!1,S,F;if((i=(n=m[7])==null?void 0:n[0])!=null&&i.data&&s!=0)S=(o=(l=m[7])==null?void 0:l[0])==null?void 0:o.data,F=(d=(c=m[6])==null?void 0:c[0])==null?void 0:d.data;else if((p=(u=m[4])==null?void 0:u[0])!=null&&p.data&&s!=1)S=(g=(h=m[4])==null?void 0:h[0])==null?void 0:g.data,F=(f=(x=m[3])==null?void 0:x[0])==null?void 0:f.data;else throw"NUMBERS Tile missing ".concat(s," cell storage");for(var E=w?4:1,k=Wm(S),A=[],y=0;y<S.length/2;++y){var N=k.getUint16(y*2,!0);N<65535&&A.push([y,N])}if(A.length!=v)throw"Expected ".concat(v," cells, found ").concat(A.length);var R=[];for(y=0;y<A.length-1;++y)R[A[y][0]]=F.subarray(A[y][1]*E,A[y+1][1]*E);return A.length>=1&&(R[A[A.length-1][0]]=F.subarray(A[A.length-1][1]*E)),{R:j,cells:R}}function HF(t,s){var r,a=zs(s.data),n=(r=a==null?void 0:a[7])!=null&&r[0]?ys(a[7][0].data)>>>0>0?1:0:-1,i=Vm(a[5],function(l){return VF(l,n)});return{nrows:ys(a[4][0].data)>>>0,data:i.reduce(function(l,o){return l[o.R]||(l[o.R]=[]),o.cells.forEach(function(c,d){if(l[o.R][d])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(d));l[o.R][d]=c}),l},[])}}function GF(t,s,r){var a,n=zs(s.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(ys(n[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(n[6][0].data));if(i.e.c=(ys(n[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(n[7][0].data));r["!ref"]=vt(i);var l=zs(n[4][0].data),o=Up(t,t[Nn(l[4][0].data)][0]),c=(a=l[17])!=null&&a[0]?Up(t,t[Nn(l[17][0].data)][0]):[],d=zs(l[3][0].data),u=0;d[1].forEach(function(p){var h=zs(p.data),g=t[Nn(h[2][0].data)][0],x=ys(g.meta[1][0].data);if(x!=6002)throw new Error("6001 unexpected reference to ".concat(x));var f=HF(t,g);f.data.forEach(function(m,j){m.forEach(function(v,w){var S=tt({r:u+j,c:w}),F=WF(v,o,c);F&&(r[S]=F)})}),u+=f.nrows})}function qF(t,s){var r=zs(s.data),a={"!ref":"A1"},n=t[Nn(r[2][0].data)],i=ys(n[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return GF(t,n[0],a),a}function JF(t,s){var r,a=zs(s.data),n={name:(r=a[1])!=null&&r[0]?dx(a[1][0].data):"",sheets:[]},i=Vm(a[2],Nn);return i.forEach(function(l){t[l].forEach(function(o){var c=ys(o.meta[1][0].data);c==6e3&&n.sheets.push(qF(t,o))})}),n}function KF(t,s){var r=qm(),a=zs(s.data),n=Vm(a[1],Nn);if(n.forEach(function(i){t[i].forEach(function(l){var o=ys(l.meta[1][0].data);if(o==2){var c=JF(t,l);c.sheets.forEach(function(d,u){Jm(r,d,u==0?c.name:c.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function U0(t){var s,r,a,n,i={},l=[];if(t.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var d;try{d=$F(c.content)}catch(p){return console.log("?? "+c.content.length+" "+(p.message||p))}var u;try{u=MF(d)}catch(p){return console.log("## "+(p.message||p))}u.forEach(function(p){i[p.id]=p.messages,l.push(p.id)})}}),!l.length)throw new Error("File has no messages");var o=((n=(a=(r=(s=i==null?void 0:i[1])==null?void 0:s[0])==null?void 0:r.meta)==null?void 0:a[1])==null?void 0:n[0].data)&&ys(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||l.forEach(function(c){i[c].forEach(function(d){var u=ys(d.meta[1][0].data)>>>0;if(u==1)if(!o)o=d;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return KF(i,o)}function YF(t){return function(r){for(var a=0;a!=t.length;++a){var n=t[a];r[n[0]]===void 0&&(r[n[0]]=n[1]),n[2]==="n"&&(r[n[0]]=Number(r[n[0]]))}}}function Hm(t){YF([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function XF(t){return Oi.WS.indexOf(t)>-1?"sheet":t==Oi.CS?"chart":t==Oi.DS?"dialog":t==Oi.MS?"macro":t&&t.length?t:"sheet"}function QF(t,s){if(!t)return 0;try{t=s.map(function(a){return a.id||(a.id=a.strRelID),[a.name,t["!id"][a.id].Target,XF(t["!id"][a.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function ZF(t,s,r,a,n,i,l,o,c,d,u,p){try{i[a]=Yl(gr(t,r,!0),s);var h=ns(t,s),g;switch(o){case"sheet":g=nF(h,s,n,c,i[a],d,u,p);break;case"chart":if(g=iF(h,s,n,c,i[a],d,u,p),!g||!g["!drawel"])break;var x=Ll(g["!drawel"].Target,s),f=nx(x),m=aT(gr(t,x,!0),Yl(gr(t,f,!0),x)),j=Ll(m,x),v=nx(j);g=zA(gr(t,j,!0),j,c,Yl(gr(t,v,!0),j),d,g);break;case"macro":g=lF(h,s,n,c,i[a],d,u,p);break;case"dialog":g=oF(h,s,n,c,i[a],d,u,p);break;default:throw new Error("Unrecognized sheet type "+o)}l[a]=g;var w=[];i&&i[a]&&ba(i[a]).forEach(function(S){var F="";if(i[a][S].Type==Oi.CMNT){F=Ll(i[a][S].Target,s);var E=xF(ns(t,F,!0),F,c);if(!E||!E.length)return;Cp(g,E,!1)}i[a][S].Type==Oi.TCMNT&&(F=Ll(i[a][S].Target,s),w=w.concat(iT(ns(t,F,!0),c)))}),w&&w.length&&Cp(g,w,!0,c.people||[])}catch(S){if(c.WTF)throw S}}function _r(t){return t.charAt(0)=="/"?t.slice(1):t}function e8(t,s){if(uv(),s=s||{},Hm(s),Er(t,"META-INF/manifest.xml")||Er(t,"objectdata.xml"))return Mp(t,s);if(Er(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof U0<"u"){if(t.FileIndex)return U0(t);var r=bt.utils.cfb_new();return Zf(t).forEach(function(L){tC(r,L,eC(t,L))}),U0(r)}throw new Error("Unsupported NUMBERS file")}if(!Er(t,"[Content_Types].xml"))throw Er(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Er(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=Zf(t),n=YC(gr(t,"[Content_Types].xml")),i=!1,l,o;if(n.workbooks.length===0&&(o="xl/workbook.xml",ns(t,o,!0)&&n.workbooks.push(o)),n.workbooks.length===0){if(o="xl/workbook.bin",!ns(t,o,!0))throw new Error("Could not find workbook");n.workbooks.push(o),i=!0}n.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},d={};if(!s.bookSheets&&!s.bookProps){if(Zl=[],n.sst)try{Zl=uF(ns(t,_r(n.sst)),n.sst,s)}catch(L){if(s.WTF)throw L}s.cellStyles&&n.themes.length&&(c=dF(gr(t,n.themes[0].replace(/^\//,""),!0)||"",n.themes[0],s)),n.style&&(d=cF(ns(t,_r(n.style)),n.style,c,s))}n.links.map(function(L){try{var O=Yl(gr(t,nx(_r(L))),L);return hF(ns(t,_r(L)),O,L,s)}catch{}});var u=aF(ns(t,_r(n.workbooks[0])),n.workbooks[0],s),p={},h="";n.coreprops.length&&(h=ns(t,_r(n.coreprops[0]),!0),h&&(p=$v(h)),n.extprops.length!==0&&(h=ns(t,_r(n.extprops[0]),!0),h&&t6(h,p,s)));var g={};(!s.bookSheets||s.bookProps)&&n.custprops.length!==0&&(h=gr(t,_r(n.custprops[0]),!0),h&&(g=r6(h,s)));var x={};if((s.bookSheets||s.bookProps)&&(u.Sheets?l=u.Sheets.map(function(O){return O.name}):p.Worksheets&&p.SheetNames.length>0&&(l=p.SheetNames),s.bookProps&&(x.Props=p,x.Custprops=g),s.bookSheets&&typeof l<"u"&&(x.SheetNames=l),s.bookSheets?x.SheetNames:s.bookProps))return x;l={};var f={};s.bookDeps&&n.calcchain&&(f=mF(ns(t,_r(n.calcchain)),n.calcchain));var m=0,j={},v,w;{var S=u.Sheets;p.Worksheets=S.length,p.SheetNames=[];for(var F=0;F!=S.length;++F)p.SheetNames[F]=S[F].name}var E=i?"bin":"xml",k=n.workbooks[0].lastIndexOf("/"),A=(n.workbooks[0].slice(0,k+1)+"_rels/"+n.workbooks[0].slice(k+1)+".rels").replace(/^\//,"");Er(t,A)||(A="xl/_rels/workbook."+E+".rels");var y=Yl(gr(t,A,!0),A.replace(/_rels.*/,"s5s"));(n.metadata||[]).length>=1&&(s.xlmeta=fF(ns(t,_r(n.metadata[0])),n.metadata[0],s)),(n.people||[]).length>=1&&(s.people=lT(ns(t,_r(n.people[0])),s)),y&&(y=QF(y,u.Sheets));var N=ns(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(m=0;m!=p.Worksheets;++m){var R="sheet";if(y&&y[m]?(v="xl/"+y[m][1].replace(/[\/]?xl\//,""),Er(t,v)||(v=y[m][1]),Er(t,v)||(v=A.replace(/_rels\/.*$/,"")+y[m][1]),R=y[m][2]):(v="xl/worksheets/sheet"+(m+1-N)+"."+E,v=v.replace(/sheet0\./,"sheet.")),w=v.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),s&&s.sheets!=null)switch(typeof s.sheets){case"number":if(m!=s.sheets)continue e;break;case"string":if(p.SheetNames[m].toLowerCase()!=s.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(s.sheets)){for(var T=!1,z=0;z!=s.sheets.length;++z)typeof s.sheets[z]=="number"&&s.sheets[z]==m&&(T=1),typeof s.sheets[z]=="string"&&s.sheets[z].toLowerCase()==p.SheetNames[m].toLowerCase()&&(T=1);if(!T)continue e}}ZF(t,v,w,p.SheetNames[m],m,j,l,R,s,u,c,d)}return x={Directory:n,Workbook:u,Props:p,Custprops:g,Deps:f,Sheets:l,SheetNames:p.SheetNames,Strings:Zl,Styles:d,Themes:c,SSF:Es(at)},s&&s.bookFiles&&(t.files?(x.keys=a,x.files=t.files):(x.keys=[],x.files={},t.FullPaths.forEach(function(L,O){L=L.replace(/^Root Entry[\/]/,""),x.keys.push(L),x.files[L]=t.FileIndex[O]}))),s&&s.bookVBA&&(n.vba.length>0?x.vbaraw=ns(t,_r(n.vba[0]),!0):n.defaults&&n.defaults.bin===uT&&(x.vbaraw=ns(t,"xl/vbaProject.bin",!0))),x}function t8(t,s){var r=s||{},a="Workbook",n=bt.find(t,a);try{if(a="/!DataSpaces/Version",n=bt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(q_(n.content),a="/!DataSpaces/DataSpaceMap",n=bt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=K_(n.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",n=bt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=Y_(n.content);if(l.length!=1||l[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",n=bt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);Q_(n.content)}catch{}if(a="/EncryptionInfo",n=bt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=Z_(n.content);if(a="/EncryptedPackage",n=bt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],n.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],n.content,r.password||"",r);throw new Error("File is password-protected")}function Gm(t,s){var r="";switch((s||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=wr(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(s&&s.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function s8(t,s){return bt.find(t,"EncryptedPackage")?t8(t,s):kj(t,s)}function r8(t,s){var r,a=t,n=s||{};return n.type||(n.type=gt&&Buffer.isBuffer(t)?"buffer":"base64"),r=gv(a,n),e8(r,n)}function Tj(t,s){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return ox(t.slice(r),s);default:break e}return Fo.to_workbook(t,s)}function a8(t,s){var r="",a=Gm(t,s);switch(s.type){case"base64":r=wr(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=ci(t);break;default:throw new Error("Unrecognized type "+s.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(r=Lt(r)),s.type="binary",Tj(r,s)}function n8(t,s){var r=t;return s.type=="base64"&&(r=wr(r)),r=_o.utils.decode(1200,r.slice(2),"str"),s.type="binary",Tj(r,s)}function i8(t){return t.match(/[^\x00-\x7F]/)?Ol(t):t}function z0(t,s,r,a){return a?(r.type="string",Fo.to_workbook(t,r)):Fo.to_workbook(s,r)}function xx(t,s){Zb();var r=s||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return xx(new Uint8Array(t),(r=Es(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var a=t,n=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),qi={},r.dateNF&&(qi.dateNF=r.dateNF),r.type||(r.type=gt&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=gt?"buffer":"binary",a=qS(t),typeof Uint8Array<"u"&&!gt&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,a=i8(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var l=new ArrayBuffer(3),o=new Uint8Array(l);if(o.foo="bar",!o.foo)return r=Es(r),r.type="array",xx(km(a),r)}switch((n=Gm(a,r))[0]){case 208:if(n[1]===207&&n[2]===17&&n[3]===224&&n[4]===161&&n[5]===177&&n[6]===26&&n[7]===225)return s8(bt.read(a,r),r);break;case 9:if(n[1]<=8)return kj(a,r);break;case 60:return ox(a,r);case 73:if(n[1]===73&&n[2]===42&&n[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(n[1]===68)return R_(a,r);break;case 84:if(n[1]===65&&n[2]===66&&n[3]===76)return P_.to_workbook(a,r);break;case 80:return n[1]===75&&n[2]<9&&n[3]<9?r8(a,r):z0(t,a,r,i);case 239:return n[3]===60?ox(a,r):z0(t,a,r,i);case 255:if(n[1]===254)return n8(a,r);if(n[1]===0&&n[2]===2&&n[3]===0)return Ql.to_workbook(a,r);break;case 0:if(n[1]===0&&(n[2]>=2&&n[3]===0||n[2]===0&&(n[3]===8||n[3]===9)))return Ql.to_workbook(a,r);break;case 3:case 131:case 139:case 140:return Sp.to_workbook(a,r);case 123:if(n[1]===92&&n[2]===114&&n[3]===116)return u5.to_workbook(a,r);break;case 10:case 13:case 32:return a8(a,r);case 137:if(n[1]===80&&n[2]===78&&n[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return A_.indexOf(n[0])>-1&&n[2]<=12&&n[3]<=31?Sp.to_workbook(a,r):z0(t,a,r,i)}function l8(t,s,r,a,n,i,l,o){var c=As(r),d=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),p=!0,h=n===1?[]:{};if(n!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!l||t[r])for(var g=s.s.c;g<=s.e.c;++g){var x=l?t[r][g]:t[a[g]+c];if(x===void 0||x.t===void 0){if(d===void 0)continue;i[g]!=null&&(h[i[g]]=d);continue}var f=x.v;switch(x.t){case"z":if(f==null)break;continue;case"e":f=f==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(i[g]!=null){if(f==null)if(x.t=="e"&&f===null)h[i[g]]=null;else if(d!==void 0)h[i[g]]=d;else if(u&&f===null)h[i[g]]=null;else continue;else h[i[g]]=u&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?f:Ha(x,f,o);f!=null&&(p=!1)}}return{row:h,isempty:p}}function mx(t,s){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},a=0,n=1,i=[],l=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},d=s||{},u=d.range!=null?d.range:t["!ref"];switch(d.header===1?a=1:d.header==="A"?a=2:Array.isArray(d.header)?a=3:d.header==null&&(a=0),typeof u){case"string":c=Yt(u);break;case"number":c=Yt(t["!ref"]),c.s.r=u;break;default:c=u}a>0&&(n=0);var p=As(c.s.r),h=[],g=[],x=0,f=0,m=Array.isArray(t),j=c.s.r,v=0,w={};m&&!t[j]&&(t[j]=[]);var S=d.skipHidden&&t["!cols"]||[],F=d.skipHidden&&t["!rows"]||[];for(v=c.s.c;v<=c.e.c;++v)if(!(S[v]||{}).hidden)switch(h[v]=ps(v),r=m?t[j][v]:t[h[v]+p],a){case 1:i[v]=v-c.s.c;break;case 2:i[v]=h[v];break;case 3:i[v]=d.header[v-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=l=Ha(r,null,d),f=w[l]||0,!f)w[l]=1;else{do o=l+"_"+f++;while(w[o]);w[l]=f,w[o]=1}i[v]=o}for(j=c.s.r+n;j<=c.e.r;++j)if(!(F[j]||{}).hidden){var E=l8(t,c,j,h,a,i,m,d);(E.isempty===!1||(a===1?d.blankrows!==!1:d.blankrows))&&(g[x++]=E.row)}return g.length=x,g}var zp=/"/g;function o8(t,s,r,a,n,i,l,o){for(var c=!0,d=[],u="",p=As(r),h=s.s.c;h<=s.e.c;++h)if(a[h]){var g=o.dense?(t[r]||[])[h]:t[a[h]+p];if(g==null)u="";else if(g.v!=null){c=!1,u=""+(o.rawNumbers&&g.t=="n"?g.v:Ha(g,null,o));for(var x=0,f=0;x!==u.length;++x)if((f=u.charCodeAt(x))===n||f===i||f===34||o.forceQuotes){u='"'+u.replace(zp,'""')+'"';break}u=="ID"&&(u='"ID"')}else g.f!=null&&!g.F?(c=!1,u="="+g.f,u.indexOf(",")>=0&&(u='"'+u.replace(zp,'""')+'"')):u="";d.push(u)}return o.blankrows===!1&&c?null:d.join(l)}function Ej(t,s){var r=[],a=s??{};if(t==null||t["!ref"]==null)return"";var n=Yt(t["!ref"]),i=a.FS!==void 0?a.FS:",",l=i.charCodeAt(0),o=a.RS!==void 0?a.RS:`
`,c=o.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),u="",p=[];a.dense=Array.isArray(t);for(var h=a.skipHidden&&t["!cols"]||[],g=a.skipHidden&&t["!rows"]||[],x=n.s.c;x<=n.e.c;++x)(h[x]||{}).hidden||(p[x]=ps(x));for(var f=0,m=n.s.r;m<=n.e.r;++m)(g[m]||{}).hidden||(u=o8(t,n,m,p,l,c,i,a),u!=null&&(a.strip&&(u=u.replace(d,"")),(u||a.blankrows!==!1)&&r.push((f++?o:"")+u)));return delete a.dense,r.join("")}function c8(t,s){s||(s={}),s.FS="	",s.RS=`
`;var r=Ej(t,s);return r}function d8(t){var s="",r,a="";if(t==null||t["!ref"]==null)return[];var n=Yt(t["!ref"]),i="",l=[],o,c=[],d=Array.isArray(t);for(o=n.s.c;o<=n.e.c;++o)l[o]=ps(o);for(var u=n.s.r;u<=n.e.r;++u)for(i=As(u),o=n.s.c;o<=n.e.c;++o)if(s=l[o]+i,r=d?(t[u]||[])[o]:t[s],a="",r!==void 0){if(r.F!=null){if(s=r.F,!r.f)continue;a=r.f,s.indexOf(":")==-1&&(s=s+":"+s)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}c[c.length]=s+"="+a}return c}function Aj(t,s,r){var a=r||{},n=+!a.skipHeader,i=t||{},l=0,o=0;if(i&&a.origin!=null)if(typeof a.origin=="number")l=a.origin;else{var c=typeof a.origin=="string"?Ys(a.origin):a.origin;l=c.r,o=c.c}var d,u={s:{c:0,r:0},e:{c:o,r:l+s.length-1+n}};if(i["!ref"]){var p=Yt(i["!ref"]);u.e.c=Math.max(u.e.c,p.e.c),u.e.r=Math.max(u.e.r,p.e.r),l==-1&&(l=p.e.r+1,u.e.r=l+s.length-1+n)}else l==-1&&(l=0,u.e.r=s.length-1+n);var h=a.header||[],g=0;s.forEach(function(f,m){ba(f).forEach(function(j){(g=h.indexOf(j))==-1&&(h[g=h.length]=j);var v=f[j],w="z",S="",F=tt({c:o+g,r:l+m+n});d=Lo(i,F),v&&typeof v=="object"&&!(v instanceof Date)?i[F]=v:(typeof v=="number"?w="n":typeof v=="boolean"?w="b":typeof v=="string"?w="s":v instanceof Date?(w="d",a.cellDates||(w="n",v=er(v)),S=a.dateNF||at[14]):v===null&&a.nullError&&(w="e",v=0),d?(d.t=w,d.v=v,delete d.w,delete d.R,S&&(d.z=S)):i[F]=d={t:w,v},S&&(d.z=S))})}),u.e.c=Math.max(u.e.c,o+h.length-1);var x=As(l);if(n)for(g=0;g<h.length;++g)i[ps(g+o)+x]={t:"s",v:h[g]};return i["!ref"]=vt(u),i}function u8(t,s){return Aj(null,t,s)}function Lo(t,s,r){if(typeof s=="string"){if(Array.isArray(t)){var a=Ys(s);return t[a.r]||(t[a.r]=[]),t[a.r][a.c]||(t[a.r][a.c]={t:"z"})}return t[s]||(t[s]={t:"z"})}return typeof s!="number"?Lo(t,tt(s)):Lo(t,tt({r:s,c:r||0}))}function x8(t,s){if(typeof s=="number"){if(s>=0&&t.SheetNames.length>s)return s;throw new Error("Cannot find sheet # "+s)}else if(typeof s=="string"){var r=t.SheetNames.indexOf(s);if(r>-1)return r;throw new Error("Cannot find sheet name |"+s+"|")}else throw new Error("Cannot find sheet |"+s+"|")}function qm(){return{SheetNames:[],Sheets:{}}}function Jm(t,s,r,a){var n=1;if(!r)for(;n<=65535&&t.SheetNames.indexOf(r="Sheet"+n)!=-1;++n,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&t.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);n=i&&+i[2]||0;var l=i&&i[1]||r;for(++n;n<=65535&&t.SheetNames.indexOf(r=l+n)!=-1;++n);}if(YA(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=s,r}function m8(t,s,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var a=x8(t,s);switch(t.Workbook.Sheets[a]||(t.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[a].Hidden=r}function h8(t,s){return t.z=s,t}function Fj(t,s,r){return s?(t.l={Target:s},r&&(t.l.Tooltip=r)):delete t.l,t}function f8(t,s,r){return Fj(t,"#"+s,r)}function p8(t,s,r){t.c||(t.c=[]),t.c.push({t:s,a:r||"SheetJS"})}function g8(t,s,r,a){for(var n=typeof s!="string"?s:Yt(s),i=typeof s=="string"?s:vt(s),l=n.s.r;l<=n.e.r;++l)for(var o=n.s.c;o<=n.e.c;++o){var c=Lo(t,l,o);c.t="n",c.F=i,delete c.v,l==n.s.r&&o==n.s.c&&(c.f=r,a&&(c.D=!0))}return t}var y8={encode_col:ps,encode_row:As,encode_cell:tt,encode_range:vt,decode_col:Dm,decode_row:Pm,split_cell:EC,decode_cell:Ys,decode_range:xl,format_cell:Ha,sheet_add_aoa:Lv,sheet_add_json:Aj,sheet_add_dom:Sj,aoa_to_sheet:ml,json_to_sheet:u8,table_to_sheet:Cj,table_to_book:RF,sheet_to_csv:Ej,sheet_to_txt:c8,sheet_to_json:mx,sheet_to_html:DF,sheet_to_formulae:d8,sheet_to_row_object_array:mx,sheet_get_cell:Lo,book_new:qm,book_append_sheet:Jm,book_set_sheet_visibility:m8,cell_set_number_format:h8,cell_set_hyperlink:Fj,cell_set_internal_link:f8,cell_add_comment:p8,sheet_set_array_formula:g8,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function b8(t){const s=t.split(/\r?\n/).filter(n=>n.trim().length>0);if(s.length===0)return[];const r=Wp(s[0]).map(n=>n.trim()),a=[];for(let n=1;n<s.length;n++){const i=Wp(s[n]);if(i.length===0)continue;const l={};r.forEach((o,c)=>{l[o]=(i[c]??"").trim()}),a.push(l)}return a}function Wp(t){const s=[];let r="",a=!1;for(let n=0;n<t.length;n++){const i=t[n];if(i==='"'){if(a&&t[n+1]==='"'){r+='"',n++;continue}a=!a;continue}if(i===","&&!a){s.push(r),r="";continue}r+=i}return s.push(r),s}function Vp(t){return t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}async function Dr(t,s){const r=new FormData;r.append("file",t);const a=localStorage.getItem("auth_token"),n=localStorage.getItem("role"),i=localStorage.getItem("permissions"),l={};a&&(l.Authorization=`Bearer ${a}`),n&&(l["x-user-role"]=n),i&&(l["x-user-permissions"]=i);const o=await fetch(`${s}/upload`,{method:"POST",body:r,headers:l});if(!o.ok){const h=await o.text();let g="upload failed";try{const x=JSON.parse(h);g=x.message||x.error||g}catch{g=h||g}throw new Error(g)}const d=(await o.json()).url;if(!d)throw new Error("upload failed: no URL in response");if(/^https?:\/\//i.test(d))return d;let u=s.replace(/\/$/,"");d.startsWith("/uploads/")&&u.endsWith("/api")&&(u=u.replace(/\/api$/,""));const p=d.startsWith("/")?d:`/${d}`;return`${u}${p}`}function v8(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Products"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage your product catalog"})]}),e.jsx("button",{className:"btn-primary",children:"Add Product"})]}),e.jsx(j8,{})]})})}function j8(){var _e,Se,be,Ie,Ze,ge,ie,Ue,St,dt,_t,Ct,ut,ot,ye,ze,Ye,jt,it,Xt,ia,Sa,Ka,Ur,xe,ue,je,ve,Oe,De,Be,Ne,Ce,Je,Ge,Dt,te,de,fe,pe,ke,I,G;const{notify:t}=mr(),[s,r]=b.useState([]),[a,n]=b.useState(!1),[i,l]=b.useState(""),[o,c]=b.useState(""),[d,u]=b.useState(""),[p,h]=b.useState("title"),[g,x]=b.useState("asc"),[f,m]=b.useState(null),[j,v]=b.useState([]),[w,S]=b.useState(!1),[F,E]=b.useState(null),[k,A]=b.useState([]),[y,N]=b.useState([]),[R,T]=b.useState({slug:"",title:"",category:"",price:"",list_image:"",description:"",details:{sku:"",hsn:"",mrp:"",websitePrice:"",discountPercent:"",brand:"",subtitle:"",skinHairType:"",netQuantity:"",unitCount:"",packageContent:"",innerPackaging:"",outerPackaging:"",netWeight:"",deadWeight:"",gstPercent:"",countryOfOrigin:"",manufacturer:"",keyIngredients:"",ingredientBenefits:"",howToUse:"",longDescription:"",bulletHighlights:"",imageLinks:"",videoLinks:"",platformCategoryMapping:"",hazardous:"",badges:""}}),[z,L]=b.useState(null),[O,V]=b.useState([]),D=(()=>{if(typeof window<"u"){const _=window.location.hostname;return _==="thenefol.com"||_==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}/api`:"https://thenefol.com/api"}return"https://thenefol.com/api"})(),P=_=>{if(!_)return"";if(/^https?:\/\//i.test(_))return _;const C=D.replace(/\/$/,""),B=_.startsWith("/")?_:`/${_}`;return`${C}${B}`},W=async()=>{var _;try{n(!0),l(""),console.log(" Loading products from API:",`${D}/products`);const C=await fetch(`${D}/products?_=${Date.now()}`,{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(console.log(" API Response Status:",C.status,C.ok),!C.ok)throw new Error(`HTTP error! status: ${C.status}`);const B=await C.json();console.log(` Loaded ${(B==null?void 0:B.length)||0} products from database`),console.log(" First product:",((_=B==null?void 0:B[0])==null?void 0:_.title)||"None"),r(Array.isArray(B)?B:[])}catch(C){console.error(" Failed to load products:",C),l("Failed to load products: "+C.message)}finally{n(!1)}};b.useEffect(()=>{W();const _=Xe.subscribe("product_updated",B=>{console.log(" Product updated in Products page:",B),W()}),C=Xe.subscribe("products_updated",B=>{console.log(" Products updated in Products page:",B),W()});return()=>{_&&_(),C&&C()}},[]);const ee=async _=>{_.preventDefault();try{let C=R.list_image||"";if(z)try{C=await Dr(z,D)}catch{t("error","Main image upload failed");return}const B=await fetch(`${D}/products`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:R.slug,title:R.title,category:R.category,price:R.price,listImage:C,description:R.description,details:R.details})});if(!B.ok)throw new Error("create failed");const H=await B.json();if(O.length)try{const Q=[];for(const se of O){const ce=await Dr(se,D);Q.push(ce)}await fetch(`${D}/products/${H.id}/images`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({images:Q})})}catch{}await W(),T({slug:"",title:"",category:"",price:"",list_image:"",description:"",details:{...R.details,sku:"",hsn:"",mrp:"",websitePrice:"",discountPercent:""}}),L(null),V([])}catch{t("error","Create failed")}},[M,U]=b.useState(null),[q,Y]=b.useState(new Set),[K,le]=b.useState(!1),J=async _=>{try{if(!(await fetch(`${D}/products/${_}`,{method:"DELETE"})).ok)throw new Error("delete failed");Y(B=>{const H=new Set(B);return H.delete(_),H}),await W(),t("success","Product deleted")}catch{t("error","Delete failed")}},ae=async()=>{if(q.size===0){t("error","No products selected");return}try{const _=Array.from(q),C=await fetch(`${D}/products/bulk-delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:_})});if(!C.ok){const H=await C.json().catch(()=>({}));throw new Error(H.error||H.message||"Bulk delete failed")}await W();const B=new Set(q);_.forEach(H=>B.delete(H)),Y(B),le(!1),t("success",`Successfully deleted ${_.length} product(s)`)}catch(_){t("error",`Bulk delete failed: ${_.message}`)}},he=_=>{Y(C=>{const B=new Set(C);return B.has(_)?B.delete(_):B.add(_),B})},Fe=()=>{q.size===ne.length?Y(new Set):Y(new Set(ne.map(_=>_.id)))},X=_=>{m({..._,details:_.details||{sku:"",hsn:"",mrp:"",websitePrice:"",discountPercent:"",brand:"",subtitle:"",skinHairType:"",netQuantity:"",unitCount:"",packageContent:"",innerPackaging:"",outerPackaging:"",netWeight:"",deadWeight:"",gstPercent:"",countryOfOrigin:"",manufacturer:"",keyIngredients:"",ingredientBenefits:"",howToUse:"",longDescription:"",bulletHighlights:"",imageLinks:"",videoLinks:"",platformCategoryMapping:"",hazardous:"",badges:""}})},Re=async _=>{if(_.preventDefault(),!(!f||!f.id)){if(!f.title||!f.slug){t("error","Slug and Title are required");return}try{if(!(await fetch(`${D}/products/${f.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:f.slug,title:f.title,category:f.category,price:f.price,listImage:f.list_image,description:f.description,details:f.details})})).ok)throw new Error("update failed");await W(),m(null),t("success","Product updated")}catch{t("error","Update failed")}}},ne=b.useMemo(()=>{let _=s;if(o){const C=o.toLowerCase();_=_.filter(B=>B.title.toLowerCase().includes(C)||B.slug.toLowerCase().includes(C)||(B.category||"").toLowerCase().includes(C))}return d&&(_=_.filter(C=>(C.category||"")===d)),_=[..._].sort((C,B)=>{const H=g==="asc"?1:-1,Q=p==="price"?Number(C.price)||0:C[p]||"",se=p==="price"?Number(B.price)||0:B[p]||"";return Q<se?-1*H:Q>se?1*H:0}),_},[s,o,d,p,g]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Bulk Import"}),e.jsxs("div",{className:"mb-3 rounded bg-green-50 p-3 text-sm text-green-800",children:[e.jsx("strong",{children:" Enhanced Bulk Import:"})," CSV import will automatically map all product fields including pricing, GST, packaging, ingredients, and more. First image from Image Links will be used as list image. Remaining fields can be updated manually after import."]}),e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center",children:[e.jsx("input",{type:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",onChange:async _=>{var H;const C=(H=_.target.files)==null?void 0:H[0];if(!C)return;const B=await C.arrayBuffer();if(C.name.endsWith(".csv")){let Q=new TextDecoder().decode(new Uint8Array(B));Q.charCodeAt(0)===65279&&(Q=Q.slice(1)),v(b8(Q))}else{const Q=xx(B,{type:"array"}),se=Q.Sheets[Q.SheetNames[0]],ce=y8.sheet_to_json(se);v(ce)}}}),e.jsx("button",{disabled:!j.length||w,onClick:async()=>{S(!0);try{const _=(re,me)=>{const Te=Object.entries(re),Le=me.find(We=>Te.some(([ht])=>ht.toLowerCase().replace(/\s+|_|\(|\)/g,"")===We.toLowerCase().replace(/\s+|_|\(|\)/g,"")));if(!Le)return"";const we=Te.find(([We])=>We.toLowerCase().replace(/\s+|_|\(|\)/g,"")===Le.toLowerCase().replace(/\s+|_|\(|\)/g,""))[0],Pe=re[we];return Pe==null||Pe===""?"":String(Pe).trim()},C=re=>re&&re.split(",")[0].trim()||"",B=re=>{if(!re)return"";const me=re.toLowerCase().trim();return me==="face care"?"Face Care":me==="hair care"?"Hair Care":me==="body care"?"Body Care":me==="combo"||me.includes("combo")||me.includes("pack")?"Combo":me.includes("hair")?"Hair Care":me.includes("face")&&!me.includes("hair")?"Face Care":me.includes("body")?"Body Care":re.split(" ").map(Te=>Te.charAt(0).toUpperCase()+Te.slice(1).toLowerCase()).join(" ")};let H=0,Q=0;const se=[],ce=new Set;for(let re=0;re<j.length;re++){const me=j[re],Te=_(me,["product name","title","producttitle","name","Product Name"]),Le=_(me,["slug","Slug"])||Vp(Te);let we=Le,Pe=1;for(;ce.has(we);)we=`${Le}-${Pe}`,Pe++;ce.add(we);const We=_(me,["product category","category","cat","Product Category"]),ht=B(We),lt=_(me,["mrp","MRP","MRP "]),Tt=_(me,["website price","websiteprice","websiteprice","WEBSITE price","websitePrice"]),Ps=_(me,["discount","discountpercent","discount %","Discount %","discountPercent"]),et=Tt||lt||_(me,["price","amount"]),yt=_(me,["product description (long)","longdescription","description","desc","Product Description (Long)"]),wt=et?String(et):"",Ds=_(me,["image links","imagelinks","Image Links","imageLinks"]),Qe=C(Ds),Et={sku:_(me,["sku","SKU"]),hsn:_(me,["hsn code","hsncode","HSN Code","hsn"]),brand:_(me,["brand name","brandname","Brand Name","brand"])||"NEFOL",productTitle:_(me,["product title","producttitle","Product Title","productTitle"]),subtitle:_(me,["subtitle / tagline","subtitle","Subtitle / Tagline","subtitle"]),subCategory:_(me,["product sub-category","subcategory","Product Sub-Category","subCategory"]),productType:_(me,["product type","producttype","Product Type","productType"]),skinHairType:_(me,["skin/hair type","skinhairtype","Skin/Hair Type","skinHairType"]),mrp:lt||"",websitePrice:Tt||"",discountPercent:Ps||(lt&&Tt?String(Math.round((parseFloat(lt)-parseFloat(Tt))/parseFloat(lt)*100)):""),discount:Ps||"",gst:_(me,["gst %","gstpercent","GST %","gstPercent","gst"]),gstPercent:_(me,["gst %","gstpercent","GST %","gstPercent","gst"]),netQuantity:_(me,["net quantity (content)","netquantity","Net Quantity (Content)","netQuantity"]),unitCount:_(me,["unit count (pack of)","unitcount","Unit Count (Pack of)","unitCount"]),netWeight:_(me,["net weight (product only)","netweight","Net Weight (Product Only)","netWeight"]),deadWeight:_(me,["dead weight (packaging only)","deadweight","Dead Weight (Packaging Only)","deadWeight"]),packageContent:_(me,["package content details","packagecontent","Package Content Details","packageContent"]),innerPackaging:_(me,["inner packaging type","innerpackaging","Inner Packaging Type","innerPackaging"]),outerPackaging:_(me,["outer packaging type","outerpackaging","Outer Packaging Type","outerPackaging"]),countryOfOrigin:_(me,["country of origin","countryoforigin","Country of Origin","countryOfOrigin"]),manufacturer:_(me,["manufacturer / packer / importer","manufacturer","Manufacturer / Packer / Importer","manufacturer"]),keyIngredients:_(me,["key ingredients","keyingredients","Key Ingredients","keyIngredients"]),ingredientBenefits:_(me,["ingredient benefits","ingredientbenefits","Ingredient Benefits","ingredientBenefits"]),howToUse:_(me,["how to use (steps)","howtouse","How to Use (Steps)","howToUse","how to use"]),longDescription:yt||_(me,["product description (long)","longdescription","Product Description (Long)","longDescription"]),bulletHighlights:_(me,["bullet highlights","bullethighlights","Bullet Highlights","bulletHighlights"]),imageLinks:Ds||"",videoLinks:_(me,["video links","videolinks","Video Links","videoLinks"]),platformCategoryMapping:_(me,["platform category mapping","platformcategorymapping","Platform Category Mapping","platformCategoryMapping"]),hazardous:_(me,["hazardous / fragile (y/n)","hazardous","Hazardous / Fragile (Y/N)","hazardous"]),badges:_(me,["special attributes (badges)","badges","Special Attributes (Badges)","badges"])};Object.keys(Et).forEach(Rs=>{(Et[Rs]===""||Et[Rs]===null||Et[Rs]===void 0)&&delete Et[Rs]});const Ln={slug:we,title:Te,category:ht,price:wt,listImage:Qe,description:yt,details:Et};if(!Ln.title||!Ln.slug){Q++,se.push(`Row ${re+1}: missing title/slug`);continue}try{const Rs=await fetch(`${D}/products`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ln)});if(Rs.ok){const On=await Rs.json();H++,console.log(`Product created: ${On.id} - ${On.title}`)}else{const On=await Rs.json().catch(()=>({}));Q++;const xt=On.error||On.message||`HTTP ${Rs.status}`;se.push(`Row ${re+1}: ${xt}`),console.error("Failed to create product:",On)}}catch(Rs){Q++,se.push(`Row ${re+1}: Network error - ${Rs}`),console.error(`Network error for row ${re+1}:`,Rs)}}console.log("Import finished. Waiting for database commit..."),await new Promise(re=>setTimeout(re,500)),console.log("Reloading products from database..."),await W(),v([]);const oe=`Import complete! Success: ${H}, Failed: ${Q}`;t(Q?"error":"success",oe)}catch(_){console.error("Import failed:",_),t("error",`Import failed: ${_}`)}finally{S(!1)}},className:"rounded bg-blue-600 px-4 py-2 text-sm font-semibold hover:bg-blue-700 disabled:opacity-50",children:w?"Importing...":`Import ${j.length||""}`})]}),!!j.length&&e.jsxs("div",{className:"mt-4 max-h-64 overflow-auto rounded border border-white/10",children:[e.jsxs("table",{className:"w-full text-left text-xs",children:[e.jsx("thead",{className:"sticky top-0 border-b border-white/10 bg-slate-900 text-white/70",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pr-3",children:"title"}),e.jsx("th",{className:"py-2 pr-3",children:"slug"}),e.jsx("th",{className:"py-2 pr-3",children:"category"}),e.jsx("th",{className:"py-2 pr-3",children:"price"}),e.jsx("th",{className:"py-2 pr-3",children:"description"})]})}),e.jsx("tbody",{children:j.slice(0,50).map((_,C)=>e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-1 pr-3",children:_.title}),e.jsx("td",{className:"py-1 pr-3",children:_.slug||Vp(_.title||"")}),e.jsx("td",{className:"py-1 pr-3",children:_.category}),e.jsx("td",{className:"py-1 pr-3",children:_.price}),e.jsx("td",{className:"py-1 pr-3",children:_.description})]},C))})]}),j.length>50&&e.jsxs("div",{className:"p-2 text-center text-xs text-white/60",children:["Showing first 50 of ",j.length]})]})]}),e.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 p-6",children:[e.jsx("h2",{className:"mb-4 text-lg font-semibold",children:"Add Product"}),e.jsxs("form",{onSubmit:ee,className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Slug",value:R.slug||"",onChange:_=>T(C=>({...C,slug:_.target.value})),required:!0}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Title",value:R.title||"",onChange:_=>T(C=>({...C,title:_.target.value})),required:!0}),e.jsxs("select",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:R.category||"",onChange:_=>T(C=>({...C,category:_.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"Face Care",children:"Face Care"}),e.jsx("option",{value:"Hair Care",children:"Hair Care"}),e.jsx("option",{value:"Body Care",children:"Body Care"}),e.jsx("option",{value:"Combo",children:"Combo"})]}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Price (display)",value:R.price||"",onChange:_=>T(C=>({...C,price:_.target.value}))}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"SKU",value:((_e=R.details)==null?void 0:_e.sku)||"",onChange:_=>T(C=>({...C,details:{...C.details||{},sku:_.target.value}}))}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"HSN Code",value:((Se=R.details)==null?void 0:Se.hsn)||"",onChange:_=>T(C=>({...C,details:{...C.details||{},hsn:_.target.value}}))}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"MRP",value:((be=R.details)==null?void 0:be.mrp)||"",onChange:_=>{var H;const C=_.target.value,B=(H=R.details)==null?void 0:H.discountPercent;if(C&&B){const Q=parseFloat(C)-parseFloat(C)*parseFloat(B)/100;T(se=>({...se,details:{...se.details||{},mrp:C,websitePrice:Q.toFixed(2)}}))}else T(Q=>({...Q,details:{...Q.details||{},mrp:C}}))}}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Discount %",type:"number",min:"0",max:"100",value:((Ie=R.details)==null?void 0:Ie.discountPercent)||"",onChange:_=>{var H;const C=_.target.value,B=(H=R.details)==null?void 0:H.mrp;if(C&&B){const Q=parseFloat(B)-parseFloat(B)*parseFloat(C)/100;T(se=>({...se,details:{...se.details||{},discountPercent:C,websitePrice:Q.toFixed(2)}}))}else T(Q=>({...Q,details:{...Q.details||{},discountPercent:C}}))}}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Website Price (Discounted)",value:((Ze=R.details)==null?void 0:Ze.websitePrice)||"",onChange:_=>{var H;const C=_.target.value,B=(H=R.details)==null?void 0:H.mrp;if(C&&B){const Q=((parseFloat(B)-parseFloat(C))/parseFloat(B)*100).toFixed(1);T(se=>({...se,details:{...se.details||{},websitePrice:C,discountPercent:Q}}))}else T(Q=>({...Q,details:{...Q.details||{},websitePrice:C}}))}}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"mb-1 text-xs text-white/70",children:"Main Image (upload or fallback URL)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:_=>{var C;return L(((C=_.target.files)==null?void 0:C[0])||null)},className:"rounded border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),e.jsx("span",{className:"text-xs text-white/50",children:"or"}),e.jsx("input",{className:"flex-1 rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"List Image URL (optional)",value:R.list_image||"",onChange:_=>T(C=>({...C,list_image:_.target.value}))})]}),e.jsx("div",{className:"mt-2 text-xs text-white/50",children:"Add additional video in PDP Media below."})]}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"Description",value:R.description||"",onChange:_=>T(C=>({...C,description:_.target.value}))}),e.jsx("textarea",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"How to Use",value:((ge=R.details)==null?void 0:ge.howToUse)||"",onChange:_=>T(C=>({...C,details:{...C.details||{},howToUse:_.target.value}}))}),e.jsx("textarea",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"Key Ingredients",value:((ie=R.details)==null?void 0:ie.keyIngredients)||"",onChange:_=>T(C=>({...C,details:{...C.details||{},keyIngredients:_.target.value}}))}),e.jsx("textarea",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"Ingredient Benefits",value:((Ue=R.details)==null?void 0:Ue.ingredientBenefits)||"",onChange:_=>T(C=>({...C,details:{...C.details||{},ingredientBenefits:_.target.value}}))}),e.jsx("textarea",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"Bullet Highlights",value:((St=R.details)==null?void 0:St.bulletHighlights)||"",onChange:_=>T(C=>({...C,details:{...C.details||{},bulletHighlights:_.target.value}}))}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("div",{className:"mb-1 text-xs text-white/70",children:"PDP Media (images or 1 video)"}),e.jsx("input",{multiple:!0,type:"file",accept:"image/*,video/*",onChange:_=>V(Array.from(_.target.files||[])),className:"rounded border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),e.jsx("div",{className:"mt-2 text-xs text-white/50",children:"Tip: Upload up to 7 images and 1 short video (mp4/webm)."})]}),e.jsx("div",{className:"md:col-span-3",children:e.jsx("button",{className:"rounded bg-blue-600 px-4 py-2 font-semibold hover:bg-blue-700",children:"Save"})})]})]}),e.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 p-6",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Products"}),q.size>0&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-sm text-white/70",children:[q.size," selected"]}),e.jsxs("button",{onClick:()=>le(!0),className:"rounded bg-red-600 px-4 py-2 text-sm font-semibold hover:bg-red-700 disabled:opacity-50",disabled:q.size===0,children:["Delete Selected (",q.size,")"]})]})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-2 md:flex-row md:items-center md:justify-end",children:[e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Search...",value:o,onChange:_=>c(_.target.value)}),e.jsxs("select",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:d,onChange:_=>u(_.target.value),children:[e.jsx("option",{value:"",children:"All categories"}),e.jsx("option",{value:"Face Care",children:"Face Care"}),e.jsx("option",{value:"Hair Care",children:"Hair Care"}),e.jsx("option",{value:"Body Care",children:"Body Care"}),e.jsx("option",{value:"Combo",children:"Combo"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:p,onChange:_=>h(_.target.value),children:[e.jsx("option",{value:"title",children:"Title"}),e.jsx("option",{value:"price",children:"Price"}),e.jsx("option",{value:"category",children:"Category"})]}),e.jsx("button",{className:"rounded bg-white/10 px-3 py-2 text-sm hover:bg-white/15",onClick:()=>x(_=>_==="asc"?"desc":"asc"),children:g==="asc"?"Asc":"Desc"})]}),e.jsx("button",{onClick:W,className:"rounded bg-white/10 px-3 py-2 text-sm hover:bg-white/15",children:"Refresh"}),e.jsxs("form",{onSubmit:async _=>{var se;_.preventDefault();const B=(se=_.currentTarget.elements.namedItem("csv").files)==null?void 0:se[0];if(!B)return;const H=new FormData;H.append("file",B),(await fetch(`${D}/products-csv/upload`,{method:"POST",body:H})).ok?alert("CSV uploaded"):alert("CSV upload failed")},className:"flex items-center gap-2",children:[e.jsx("input",{name:"csv",type:"file",accept:".csv",className:"rounded border border-gray-300 bg-white px-3 py-2 text-xs text-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),e.jsx("button",{className:"rounded bg-white/10 px-3 py-2 text-sm hover:bg-white/15",children:"Upload CSV"})]})]})]}),a?e.jsx("p",{children:"Loading..."}):i?e.jsx("p",{className:"text-red-400",children:i}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"border-b border-white/10 text-xs uppercase text-white/70",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pr-4",children:e.jsx("input",{type:"checkbox",checked:q.size===ne.length&&ne.length>0,onChange:Fe,className:"cursor-pointer"})}),e.jsx("th",{className:"py-2 pr-4",children:"ID"}),e.jsx("th",{className:"py-2 pr-4",children:"Slug"}),e.jsx("th",{className:"py-2 pr-4",children:"Title"}),e.jsx("th",{className:"py-2 pr-4",children:"Category"}),e.jsx("th",{className:"py-2 pr-4",children:"Price"}),e.jsx("th",{className:"py-2 pr-4",children:"Image"}),e.jsx("th",{className:"py-2 pr-4",children:"Actions"})]})}),e.jsx("tbody",{children:ne.map(_=>{var C,B;return e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2 pr-4",children:e.jsx("input",{type:"checkbox",checked:q.has(_.id),onChange:()=>he(_.id),className:"cursor-pointer"})}),e.jsx("td",{className:"py-2 pr-4",children:_.id}),e.jsx("td",{className:"py-2 pr-4",children:_.slug}),e.jsx("td",{className:"py-2 pr-4",children:_.title}),e.jsx("td",{className:"py-2 pr-4",children:_.category}),e.jsx("td",{className:"py-2 pr-4",children:e.jsx("div",{className:"text-sm",children:(C=_.details)!=null&&C.mrp&&((B=_.details)!=null&&B.websitePrice)?e.jsxs("div",{children:[e.jsxs("div",{className:"text-gray-500 line-through text-xs",children:["",_.details.mrp]}),e.jsxs("div",{className:"font-semibold text-green-600",children:["",_.details.websitePrice]}),e.jsxs("div",{className:"text-xs text-green-500",children:[((parseFloat(_.details.mrp)-parseFloat(_.details.websitePrice))/parseFloat(_.details.mrp)*100).toFixed(0),"% OFF"]})]}):e.jsxs("div",{className:"font-semibold",children:["",_.price]})})}),e.jsx("td",{className:"py-2 pr-4",children:_.list_image?e.jsx("img",{src:P(_.list_image),className:"h-10 w-10 rounded object-cover"}):e.jsx("span",{className:"opacity-50",children:""})}),e.jsx("td",{className:"py-2 pr-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:async()=>{E(_),A([]),N([]);try{const H=await fetch(`${D}/products/${_.id}/images`);if(H.ok){const Q=await H.json(),se=Array.isArray(Q)?Q:Q.data||Q.images||[],ce=se.filter(re=>(re.type==="pdp"||!re.type)&&re.url&&re.id).map(re=>({id:re.id,url:re.url,type:re.type})),oe=se.filter(re=>re.type==="banner"&&re.url&&re.id).map(re=>({id:re.id,url:re.url,type:re.type}));A(ce),N(oe)}}catch{}},className:"rounded bg-white/10 px-3 py-1 text-xs hover:bg-white/15",children:"Images"}),e.jsx("button",{onClick:()=>X(_),className:"rounded bg-white/10 px-3 py-1 text-xs hover:bg-white/15",children:"Edit"}),e.jsx("button",{onClick:()=>U(_.id),className:"rounded bg-red-600 px-3 py-1 text-xs hover:bg-red-700",children:"Delete"})]})})]},_.id)})})]})}),F&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",children:e.jsxs("div",{className:"w-full max-w-2xl rounded-lg border border-gray-300 bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Manage Images  ",F.title]}),e.jsx("button",{onClick:()=>E(null),className:"rounded bg-gray-200 px-3 py-1 text-sm text-gray-700 hover:bg-gray-300",children:"Close"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 text-sm text-gray-700",children:"Main image"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"relative group",children:F.list_image?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:P(F.list_image),className:"h-16 w-16 rounded object-cover"}),e.jsx("button",{type:"button",onClick:async()=>{if(confirm("Are you sure you want to remove the main image?"))try{const _=await fetch(`${D}/products/${F.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({listImage:""})});if(!_.ok){const C=await _.text().catch(()=>"");throw new Error(C||"Update failed")}r(C=>C.map(B=>B.id===F.id?{...B,list_image:""}:B)),E(C=>C&&{...C,list_image:""}),await W(),t("success","Main image removed")}catch{t("error","Failed to remove main image")}},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",title:"Remove main image",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsx("div",{className:"h-16 w-16 rounded border border-gray-300 bg-gray-50"})}),e.jsx("input",{type:"file",accept:"image/*",className:"rounded border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",onChange:async _=>{var B;const C=(B=_.target.files)==null?void 0:B[0];if(C)try{const H=await Dr(C,D),Q=await fetch(`${D}/products/${F.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({listImage:H})});if(!Q.ok){const se=await Q.text().catch(()=>"");throw new Error(se||"Update failed")}r(se=>se.map(ce=>ce.id===F.id?{...ce,list_image:H}:ce)),E(se=>se&&{...se,list_image:H}),await W(),t("success","Main image updated")}catch{t("error","Upload failed")}}})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 text-sm text-gray-700",children:"PDP images"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.map((_,C)=>{const B=P(_.url),H=/\.(mp4|webm|ogg)(\?|$)/i.test(B);return e.jsxs("div",{className:"relative group",children:[H?e.jsx("video",{src:B,className:"h-16 w-16 rounded object-cover"}):e.jsx("img",{src:B,className:"h-16 w-16 rounded object-cover"}),e.jsx("button",{onClick:async()=>{if(confirm("Are you sure you want to delete this image?"))try{(await fetch(`${D}/products/${F.id}/images/${_.id}`,{method:"DELETE"})).ok?(A(se=>se.filter(ce=>ce.id!==_.id)),await W(),t("success","Image deleted successfully")):t("error","Failed to delete image")}catch{t("error","Failed to delete image")}},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",title:"Delete image",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},_.id||C)})}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{multiple:!0,type:"file",accept:"image/*,video/*",className:"rounded border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",onChange:async _=>{const C=Array.from(_.target.files||[]);if(C.length)try{const B=[];for(const Q of C){const se=await Dr(Q,D);B.push(se)}await fetch(`${D}/products/${F.id}/images`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({images:B,type:"pdp"})});const H=await fetch(`${D}/products/${F.id}/images`);if(H.ok){const Q=await H.json(),ce=(Array.isArray(Q)?Q:Q.data||Q.images||[]).filter(oe=>(oe.type==="pdp"||!oe.type)&&oe.url&&oe.id).map(oe=>({id:oe.id,url:oe.url,type:oe.type}));A(ce)}await W(),t("success","PDP images uploaded")}catch{t("error","Upload failed")}}})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 text-sm text-gray-700",children:"Banner images"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.map((_,C)=>{const B=P(_.url),H=/\.(mp4|webm|ogg)(\?|$)/i.test(B);return e.jsxs("div",{className:"relative group",children:[H?e.jsx("video",{src:B,className:"h-16 w-16 rounded object-cover"}):e.jsx("img",{src:B,className:"h-16 w-16 rounded object-cover"}),e.jsx("button",{onClick:async()=>{if(confirm("Are you sure you want to delete this image?"))try{(await fetch(`${D}/products/${F.id}/images/${_.id}`,{method:"DELETE"})).ok?(N(se=>se.filter(ce=>ce.id!==_.id)),await W(),t("success","Image deleted successfully")):t("error","Failed to delete image")}catch{t("error","Failed to delete image")}},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",title:"Delete image",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},_.id||C)})}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{multiple:!0,type:"file",accept:"image/*,video/*",className:"rounded border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",onChange:async _=>{const C=Array.from(_.target.files||[]);if(C.length)try{const B=[];for(const Q of C){const se=await Dr(Q,D);B.push(se)}await fetch(`${D}/products/${F.id}/images`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({images:B,type:"banner"})});const H=await fetch(`${D}/products/${F.id}/images`);if(H.ok){const Q=await H.json(),ce=(Array.isArray(Q)?Q:Q.data||Q.images||[]).filter(oe=>oe.type==="banner"&&oe.url&&oe.id).map(oe=>({id:oe.id,url:oe.url,type:oe.type}));N(ce)}await W(),t("success","Banner images uploaded")}catch{t("error","Upload failed")}}})})]})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-black/60 p-4 overflow-y-auto",children:e.jsxs("div",{className:"w-full max-w-4xl rounded-lg border border-gray-300 bg-white shadow-xl my-8",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 z-10 flex items-center justify-between rounded-t-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Edit Product - ",f.title]}),e.jsx("button",{onClick:()=>m(null),className:"rounded bg-gray-200 px-3 py-1 text-sm text-gray-700 hover:bg-gray-300",children:"Close"})]}),e.jsx("div",{className:"max-h-[calc(100vh-8rem)] overflow-y-auto px-6 py-6",children:e.jsxs("form",{onSubmit:Re,className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Product Name *",value:f.title||"",onChange:_=>m(C=>({...C,title:_.target.value})),required:!0}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Slug *",value:f.slug||"",onChange:_=>m(C=>({...C,slug:_.target.value})),required:!0}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Brand Name",value:((dt=f.details)==null?void 0:dt.brand)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},brand:_.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"SKU",value:((_t=f.details)==null?void 0:_t.sku)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},sku:_.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"HSN Code",value:((Ct=f.details)==null?void 0:Ct.hsn)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},hsn:_.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"Product Title",value:((ut=f.details)==null?void 0:ut.productTitle)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},productTitle:_.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"Subtitle / Tagline",value:((ot=f.details)==null?void 0:ot.subtitle)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},subtitle:_.target.value}}))})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Category & Type"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("select",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:f.category||"",onChange:_=>m(C=>({...C,category:_.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"Face Care",children:"Face Care"}),e.jsx("option",{value:"Hair Care",children:"Hair Care"}),e.jsx("option",{value:"Body Care",children:"Body Care"}),e.jsx("option",{value:"Combo",children:"Combo"})]}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Sub-Category",value:((ye=f.details)==null?void 0:ye.subCategory)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},subCategory:_.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Product Type",value:((ze=f.details)==null?void 0:ze.productType)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},productType:_.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Skin/Hair Type",value:((Ye=f.details)==null?void 0:Ye.skinHairType)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},skinHairType:_.target.value}}))})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Pricing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"MRP ()"}),e.jsx("input",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"MRP",type:"number",value:((jt=f.details)==null?void 0:jt.mrp)||"",onChange:_=>{var H;const C=_.target.value,B=(H=f.details)==null?void 0:H.discountPercent;if(C&&B){const Q=parseFloat(C)-parseFloat(C)*parseFloat(B)/100;m(se=>({...se,details:{...(se==null?void 0:se.details)||{},mrp:C,websitePrice:Q.toFixed(2)}}))}else m(Q=>({...Q,details:{...(Q==null?void 0:Q.details)||{},mrp:C}}))}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Discount %"}),e.jsx("input",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Discount %",type:"number",min:"0",max:"100",value:((it=f.details)==null?void 0:it.discount)||((Xt=f.details)==null?void 0:Xt.discountPercent)||"",onChange:_=>{var H;const C=_.target.value,B=(H=f.details)==null?void 0:H.mrp;if(C&&B){const Q=parseFloat(B)-parseFloat(B)*parseFloat(C)/100;m(se=>({...se,details:{...(se==null?void 0:se.details)||{},discount:C,discountPercent:C,websitePrice:Q.toFixed(2)}}))}else m(Q=>({...Q,details:{...(Q==null?void 0:Q.details)||{},discount:C,discountPercent:C}}))}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Website Price ()"}),e.jsx("input",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Website Price",type:"number",value:((ia=f.details)==null?void 0:ia.websitePrice)||"",onChange:_=>{var H;const C=_.target.value,B=(H=f.details)==null?void 0:H.mrp;if(C&&B){const Q=((parseFloat(B)-parseFloat(C))/parseFloat(B)*100).toFixed(1);m(se=>({...se,details:{...(se==null?void 0:se.details)||{},websitePrice:C,discount:Q,discountPercent:Q}}))}else m(Q=>({...Q,details:{...(Q==null?void 0:Q.details)||{},websitePrice:C}}))}})]}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"GST %",value:((Sa=f.details)==null?void 0:Sa.gst)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},gst:_.target.value}}))})]}),((Ka=f.details)==null?void 0:Ka.mrp)&&((Ur=f.details)==null?void 0:Ur.websitePrice)&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mt-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Discount Amount"}),e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:["",(parseFloat(f.details.mrp)-parseFloat(f.details.websitePrice)).toFixed(2)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Discount %"}),e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:[((parseFloat(f.details.mrp)-parseFloat(f.details.websitePrice))/parseFloat(f.details.mrp)*100).toFixed(1),"%"]})]})]})})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Packaging & Quantity"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Net Quantity",value:((xe=f.details)==null?void 0:xe.netQuantity)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},netQuantity:_.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Unit Count (Pack of)",value:((ue=f.details)==null?void 0:ue.unitCount)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},unitCount:_.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Net Weight",value:((je=f.details)==null?void 0:je.netWeight)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},netWeight:_.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Dead Weight",value:((ve=f.details)==null?void 0:ve.deadWeight)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},deadWeight:_.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-2",placeholder:"Package Content Details",value:((Oe=f.details)==null?void 0:Oe.packageContent)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},packageContent:_.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Inner Packaging Type",value:((De=f.details)==null?void 0:De.innerPackaging)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},innerPackaging:_.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Outer Packaging Type",value:((Be=f.details)==null?void 0:Be.outerPackaging)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},outerPackaging:_.target.value}}))})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Manufacturer & Origin"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Country of Origin",value:((Ne=f.details)==null?void 0:Ne.countryOfOrigin)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},countryOfOrigin:_.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Manufacturer / Packer / Importer",value:((Ce=f.details)==null?void 0:Ce.manufacturer)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},manufacturer:_.target.value}}))})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Product Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("textarea",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Key Ingredients",rows:2,value:((Je=f.details)==null?void 0:Je.keyIngredients)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},keyIngredients:_.target.value}}))}),e.jsx("textarea",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Ingredient Benefits",rows:2,value:((Ge=f.details)==null?void 0:Ge.ingredientBenefits)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},ingredientBenefits:_.target.value}}))}),e.jsx("textarea",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"How to Use",rows:2,value:((Dt=f.details)==null?void 0:Dt.howToUse)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},howToUse:_.target.value}}))}),e.jsx("textarea",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Product Description (Long)",rows:4,value:((te=f.details)==null?void 0:te.longDescription)||f.description||"",onChange:_=>{m(C=>({...C,description:_.target.value,details:{...(C==null?void 0:C.details)||{},longDescription:_.target.value}}))}}),e.jsx("textarea",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Bullet Highlights",rows:2,value:((de=f.details)==null?void 0:de.bulletHighlights)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},bulletHighlights:_.target.value}}))})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Media & Links"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"List Image URL",value:f.list_image||"",onChange:_=>m(C=>({...C,list_image:_.target.value}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Image Links (comma separated)",value:((fe=f.details)==null?void 0:fe.imageLinks)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},imageLinks:_.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Video Links (comma separated)",value:((pe=f.details)==null?void 0:pe.videoLinks)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},videoLinks:_.target.value}}))})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Platform Category Mapping",value:((ke=f.details)==null?void 0:ke.platformCategoryMapping)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},platformCategoryMapping:_.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Hazardous / Fragile (Y/N)",value:((I=f.details)==null?void 0:I.hazardous)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},hazardous:_.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-2",placeholder:"Special Attributes (Badges)",value:((G=f.details)==null?void 0:G.badges)||"",onChange:_=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},badges:_.target.value}}))})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-white pt-4 pb-2 -mx-6 px-6 border-t border-gray-200",children:e.jsx("button",{type:"submit",className:"w-full rounded bg-blue-600 px-4 py-3 font-semibold text-white hover:bg-blue-700 transition-colors",children:" Save All Changes"})})]})})]})})]})]}),e.jsx(Va,{open:!!M,onClose:()=>U(null),onConfirm:()=>{M!=null&&J(M)},title:"Delete this product?",description:"This action cannot be undone.",confirmText:"Delete"}),e.jsx(Va,{open:K,onClose:()=>le(!1),onConfirm:ae,title:`Delete ${q.size} product(s)?`,description:`You are about to delete ${q.size} product(s). This action cannot be undone.`,confirmText:"Delete All"})]})}function w8(){const[t,s]=b.useState({sessions:0,pageViews:0,bounceRate:0,avgSessionDuration:"0:00",conversionRate:0,revenue:0,orders:0,customers:0,sessionsChange:0,pageViewsChange:0,bounceRateChange:0,avgSessionDurationChange:0,conversionRateChange:0,revenueChange:0,ordersChange:0,customersChange:0}),[r,a]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState(!0),[c,d]=b.useState("30d"),p=(()=>{if(typeof window<"u"){const m=window.location.hostname;if(m==="thenefol.com"||m==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();b.useEffect(()=>{h()},[c]);const h=async()=>{try{o(!0);const m=await fetch(`${p}/analytics?range=${c}`);if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const j=await m.json();j.overview&&s({sessions:j.overview.sessions??0,pageViews:j.overview.pageViews??0,bounceRate:j.overview.bounceRate??0,avgSessionDuration:j.overview.avgSessionDuration??"0:00",conversionRate:j.overview.conversionRate??0,revenue:j.overview.revenue??0,orders:j.overview.orders??0,customers:j.overview.customers??0,sessionsChange:j.overview.sessionsChange??0,pageViewsChange:j.overview.pageViewsChange??0,bounceRateChange:j.overview.bounceRateChange??0,avgSessionDurationChange:j.overview.avgSessionDurationChange??0,conversionRateChange:j.overview.conversionRateChange??0,revenueChange:j.overview.revenueChange??0,ordersChange:j.overview.ordersChange??0,customersChange:j.overview.customersChange??0}),a(j.chartData||[]),i(j.topPages||[])}catch(m){console.error("Failed to load analytics:",m),s({sessions:0,pageViews:0,bounceRate:0,avgSessionDuration:"0:00",conversionRate:0,revenue:0,orders:0,customers:0,sessionsChange:0,pageViewsChange:0,bounceRateChange:0,avgSessionDurationChange:0,conversionRateChange:0,revenueChange:0,ordersChange:0,customersChange:0}),a([]),i([])}finally{o(!1)}},g=m=>m==null||isNaN(m)?"0.0%":`${m>=0?"+":""}${m.toFixed(1)}%`,x=m=>m==null||isNaN(m)?"neutral":m>=0?"up":"down",f=[{title:"Sessions",value:(t.sessions||0).toLocaleString(),change:g(t.sessionsChange),trend:x(t.sessionsChange),icon:""},{title:"Page Views",value:(t.pageViews||0).toLocaleString(),change:g(t.pageViewsChange),trend:x(t.pageViewsChange),icon:""},{title:"Bounce Rate",value:`${t.bounceRate||0}%`,change:g(t.bounceRateChange),trend:x(t.bounceRateChange),icon:""},{title:"Avg. Session",value:t.avgSessionDuration||"0:00",change:g(t.avgSessionDurationChange),trend:x(t.avgSessionDurationChange),icon:""},{title:"Conversion Rate",value:`${t.conversionRate||0}%`,change:g(t.conversionRateChange),trend:x(t.conversionRateChange),icon:""},{title:"Revenue",value:`${(t.revenue||0).toLocaleString()}`,change:g(t.revenueChange),trend:x(t.revenueChange),icon:""},{title:"Orders",value:(t.orders||0).toString(),change:g(t.ordersChange),trend:x(t.ordersChange),icon:""},{title:"Customers",value:(t.customers||0).toString(),change:g(t.customersChange),trend:x(t.customersChange),icon:""}];return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Analytics"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Track your business performance and insights"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:c,onChange:m=>d(m.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"},children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]}),e.jsx("button",{onClick:h,className:"btn-secondary",children:"Refresh"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:f.map((m,j)=>e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:m.title}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:m.value})]}),e.jsx("div",{className:"text-2xl",children:m.icon})]}),e.jsxs("div",{className:"mt-4 flex items-center",children:[e.jsx("span",{className:`text-sm font-medium ${m.trend==="up"?"text-green-600":m.trend==="down"?"text-red-600":"text-gray-500"}`,children:m.change}),e.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"vs last period"})]})]},j))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sessions Over Time"}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-2",children:r.map((m,j)=>e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:"bg-brand-secondary rounded-t w-full mb-2",style:{height:`${m.sessions/Math.max(...r.map(v=>v.sessions))*200}px`}}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(m.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},j))})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Over Time"}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-2",children:r.map((m,j)=>e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:"bg-green-500 rounded-t w-full mb-2",style:{height:`${m.revenue/Math.max(...r.map(v=>v.revenue))*200}px`}}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(m.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},j))})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Pages"}),l?e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((m,j)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0 animate-pulse",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-16 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"})]})]},j))}):n.length>0?e.jsx("div",{className:"space-y-3",children:n.map((m,j)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:m.page}),e.jsxs("p",{className:"text-sm text-gray-500",children:[m.unique," unique views"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:m.views}),e.jsx("p",{className:"text-sm text-gray-500",children:"total views"})]})]},j))}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No page data available"})]})]})}function N8(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!1),[l,o]=b.useState("campaigns"),[c,d]=b.useState(!1),p=(()=>{if(typeof window<"u"){const m=window.location.hostname;if(m==="thenefol.com"||m==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();b.useEffect(()=>{h(),g()},[]);const h=async()=>{try{i(!0);const m=await fetch(`${p}/api/marketing/campaigns`);if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const j=await m.json();s(Array.isArray(j)?j:[])}catch(m){console.error("Failed to load campaigns:",m),s([])}finally{i(!1)}},g=async()=>{try{const m=await fetch(`${p}/api/marketing/templates`);if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const j=await m.json();a(Array.isArray(j)?j:[])}catch(m){console.error("Failed to load templates:",m),a([])}},x=m=>{switch(m){case"active":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"draft":return"bg-gray-100 text-gray-800";case"completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},f=m=>{switch(m){case"email":return"";case"social":return"";case"push":return"";case"sms":return"";default:return""}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Marketing"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage your marketing campaigns and templates"})]}),e.jsx("button",{onClick:()=>d(!0),className:"btn-primary",children:"Create Campaign"})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"campaigns",name:"Campaigns",count:t.length},{id:"templates",name:"Templates",count:r.length},{id:"audiences",name:"Audiences",count:0}].map(m=>e.jsxs("button",{onClick:()=>o(m.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${l===m.id?"border-brand-primary text-brand-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[m.name," (",m.count,")"]},m.id))})}),l==="campaigns"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{title:"Total Campaigns",value:t.length,icon:""},{title:"Active",value:t.filter(m=>m.status==="active").length,icon:""},{title:"Total Sent",value:t.reduce((m,j)=>m+j.sent,0).toLocaleString(),icon:""},{title:"Conversion Rate",value:"3.2%",icon:""}].map((m,j)=>e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:m.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.value})]}),e.jsx("div",{className:"text-2xl",children:m.icon})]})},j))}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"border-b border-gray-200 text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 pr-4",children:"Campaign"}),e.jsx("th",{className:"py-3 pr-4",children:"Type"}),e.jsx("th",{className:"py-3 pr-4",children:"Status"}),e.jsx("th",{className:"py-3 pr-4",children:"Audience"}),e.jsx("th",{className:"py-3 pr-4",children:"Sent"}),e.jsx("th",{className:"py-3 pr-4",children:"Opened"}),e.jsx("th",{className:"py-3 pr-4",children:"Clicked"}),e.jsx("th",{className:"py-3 pr-4",children:"Converted"}),e.jsx("th",{className:"py-3 pr-4",children:"Actions"})]})}),e.jsx("tbody",{children:t.map(m=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:m.name}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(m.createdAt).toLocaleDateString()})]})}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:f(m.type)}),e.jsx("span",{className:"capitalize",children:m.type})]})}),e.jsx("td",{className:"py-3 pr-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${x(m.status)}`,children:m.status})}),e.jsx("td",{className:"py-3 pr-4 text-gray-600",children:m.audience}),e.jsx("td",{className:"py-3 pr-4 font-medium",children:m.sent.toLocaleString()}),e.jsx("td",{className:"py-3 pr-4",children:m.opened.toLocaleString()}),e.jsx("td",{className:"py-3 pr-4",children:m.clicked.toLocaleString()}),e.jsx("td",{className:"py-3 pr-4 font-semibold text-green-600",children:m.converted}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Edit"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"View"}),e.jsx("button",{className:"bg-red-600 text-white px-2 py-1 text-xs rounded hover:bg-red-700",children:"Delete"})]})})]},m.id))})]})})})]}),l==="templates"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Email Templates"}),e.jsx("button",{className:"btn-primary",children:"Create Template"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(m=>e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:m.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:m.subject}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:m.preview}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-500",children:new Date(m.createdAt).toLocaleDateString()}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Edit"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Preview"})]})]})]},m.id))})]}),l==="audiences"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Audience Segments"}),e.jsx("button",{className:"btn-primary",children:"Create Audience"})]}),e.jsx("div",{className:"metric-card",children:e.jsx("p",{className:"text-gray-600",children:"Audience management features coming soon. This will include creating customer segments, importing lists, and managing subscriber preferences."})})]}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"w-full max-w-2xl rounded-lg bg-white p-6 m-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"mb-6 text-xl font-semibold",children:"Create New Campaign"}),e.jsxs("form",{onSubmit:m=>{m.preventDefault();const j=new FormData(m.currentTarget),v={id:t.length+1,name:j.get("name"),type:j.get("type"),status:"draft",audience:j.get("audience"),sent:0,opened:0,clicked:0,converted:0,createdAt:new Date().toISOString().split("T")[0]};s([...t,v]),d(!1)},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Campaign Name"}),e.jsx("input",{type:"text",name:"name",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Summer Sale Campaign",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Campaign Type"}),e.jsxs("select",{name:"type",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"social",children:"Social Media"}),e.jsx("option",{value:"push",children:"Push Notification"}),e.jsx("option",{value:"sms",children:"SMS"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Target Audience"}),e.jsx("input",{type:"text",name:"audience",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"All customers",required:!0})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Campaign"})]})]})]})})]})}const k8=()=>{if(typeof window<"u"){const t=window.location.hostname;if(t==="thenefol.com"||t==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"},ca=k8();function S8(){const[t,s]=b.useState("campaigns"),[r,a]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState([]),[c,d]=b.useState([]),[u,p]=b.useState(!1),[h,g]=b.useState(""),[x,f]=b.useState(!1),[m,j]=b.useState(!1),[v,w]=b.useState(null),[S,F]=b.useState({ad_account_id:"",pixel_id:"",access_token:""});b.useEffect(()=>{k(),E()},[t]);const E=async()=>{try{const V=await(await fetch(`${ca}/api/meta-ads/config`)).json();V.data&&F({ad_account_id:V.data.ad_account_id||"",pixel_id:V.data.pixel_id||"",access_token:V.data.access_token||""})}catch(O){console.error("Failed to load config:",O)}},k=async()=>{try{if(p(!0),g(""),t==="campaigns"){const V=await(await fetch(`${ca}/api/meta-ads/campaigns`)).json();a(Array.isArray(V.data)?V.data:[])}else if(t==="adsets"){const V=await(await fetch(`${ca}/api/meta-ads/adsets`)).json();i(Array.isArray(V.data)?V.data:[])}else if(t==="ads"){const V=await(await fetch(`${ca}/api/meta-ads/ads`)).json();o(Array.isArray(V.data)?V.data:[])}else if(t==="insights"){const V=await(await fetch(`${ca}/api/meta-ads/insights`)).json();d(Array.isArray(V.data)?V.data:[])}}catch(O){g(O.message||"Failed to load data")}finally{p(!1)}},A=async()=>{var O;try{p(!0);const Z=await(await fetch(`${ca}/api/meta-ads/config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)})).json();Z.success||(O=Z.data)!=null&&O.success?(alert("Configuration saved successfully!"),j(!1)):alert("Failed to save configuration")}catch{alert("Failed to save configuration")}finally{p(!1)}},y=async O=>{try{p(!0);const Z=await(await fetch(`${ca}/api/meta-ads/campaigns`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)})).json();Z.success||Z.data?(await k(),f(!1),alert("Campaign created successfully!")):alert(Z.error||"Failed to create campaign")}catch(V){alert(V.message||"Failed to create campaign")}finally{p(!1)}},N=async(O,V)=>{try{const D=await(await fetch(`${ca}/api/meta-ads/campaigns/${O}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:V})})).json();D.success||D.data?await k():alert("Failed to update campaign status")}catch{alert("Failed to update campaign status")}},R=async O=>{if(confirm("Are you sure you want to delete this campaign?"))try{const Z=await(await fetch(`${ca}/api/meta-ads/campaigns/${O}`,{method:"DELETE"})).json();Z.success||Z.data?(await k(),alert("Campaign deleted successfully!")):alert("Failed to delete campaign")}catch{alert("Failed to delete campaign")}},T=async()=>{try{p(!0);const O=r.map(D=>D.campaign_id).join(","),Z=await(await fetch(`${ca}/api/meta-ads/insights/sync?campaign_id=${O}`)).json();Z.success||Z.data?(await k(),alert("Insights synced successfully!")):alert("Failed to sync insights")}catch{alert("Failed to sync insights")}finally{p(!1)}},z=O=>{switch(O==null?void 0:O.toUpperCase()){case"ACTIVE":case"PAUSED":return O==="ACTIVE"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800";case"DELETED":case"ARCHIVED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},L=c.reduce((O,V)=>({impressions:O.impressions+(V.impressions||0),clicks:O.clicks+(V.clicks||0),spend:O.spend+(V.spend||0),reach:O.reach+(V.reach||0),conversions:O.conversions+(V.conversions||0),conversion_value:O.conversion_value+(V.conversion_value||0)}),{impressions:0,clicks:0,spend:0,reach:0,conversions:0,conversion_value:0});return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Meta Ads Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Create and manage your Facebook & Instagram ad campaigns"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>j(!0),className:"btn-secondary flex items-center space-x-2",children:[e.jsx(ws,{className:"h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),t==="campaigns"&&e.jsxs("button",{onClick:()=>f(!0),className:"btn-primary flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Campaign"})]}),t==="insights"&&e.jsxs("button",{onClick:T,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[e.jsx(or,{className:"h-4 w-4"}),e.jsx("span",{children:"Sync Insights"})]})]})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex space-x-8",children:[{id:"campaigns",label:"Campaigns",icon:ds},{id:"adsets",label:"Ad Sets",icon:Pt},{id:"ads",label:"Ads",icon:ct},{id:"insights",label:"Performance",icon:Ss}].map(O=>{const V=O.icon;return e.jsxs("button",{onClick:()=>s(O.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${t===O.id?"":"border-transparent"}`,style:t===O.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx("span",{children:O.label})]},O.id)})})}),h&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:h}),u&&!r.length&&!n.length&&!l.length?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})}):e.jsxs(e.Fragment,{children:[t==="campaigns"&&e.jsx("div",{className:"space-y-4",children:r.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(ds,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No campaigns yet. Create your first campaign to get started."})]}):e.jsx("div",{className:"grid gap-4",children:r.map(O=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:O.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Objective: ",O.objective,"  ID: ",O.campaign_id]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${z(O.status)}`,children:O.status}),e.jsx("button",{onClick:()=>N(O.campaign_id,O.status==="ACTIVE"?"PAUSED":"ACTIVE"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:O.status==="ACTIVE"?e.jsx(Cn,{className:"h-4 w-4"}):e.jsx(Wa,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>R(O.campaign_id),className:"p-2 hover:bg-red-100 dark:hover:bg-red-900 rounded text-red-600",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Daily Budget"}),e.jsx("p",{className:"font-semibold",children:O.daily_budget?`${(O.daily_budget/100).toFixed(2)}`:"Not set"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Lifetime Budget"}),e.jsx("p",{className:"font-semibold",children:O.lifetime_budget?`${(O.lifetime_budget/100).toFixed(2)}`:"Not set"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Created"}),e.jsx("p",{className:"font-semibold",children:O.created_time?new Date(O.created_time).toLocaleDateString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Status"}),e.jsx("p",{className:"font-semibold",children:O.status})]})]})]},O.campaign_id))})}),t==="adsets"&&e.jsx("div",{className:"space-y-4",children:n.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(Pt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No ad sets yet."})]}):e.jsx("div",{className:"grid gap-4",children:n.map(O=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:O.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Campaign ID: ",O.campaign_id]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${z(O.status)}`,children:O.status})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Daily Budget"}),e.jsx("p",{className:"font-semibold",children:O.daily_budget?`${(O.daily_budget/100).toFixed(2)}`:"Not set"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Status"}),e.jsx("p",{className:"font-semibold",children:O.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Ad Set ID"}),e.jsx("p",{className:"font-semibold text-xs",children:O.adset_id})]})]})]},O.adset_id))})}),t==="ads"&&e.jsx("div",{className:"space-y-4",children:l.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(ct,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No ads yet."})]}):e.jsx("div",{className:"grid gap-4",children:l.map(O=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:O.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Ad Set: ",O.adset_id,"  Campaign: ",O.campaign_id]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${z(O.status)}`,children:O.status})]}),O.preview_url&&e.jsx("div",{className:"mt-4",children:e.jsx("a",{href:O.preview_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"View Preview "})})]},O.ad_id))})}),t==="insights"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Impressions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:L.impressions.toLocaleString()})]}),e.jsx(ct,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Clicks"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:L.clicks.toLocaleString()})]}),e.jsx(d4,{className:"h-8 w-8 text-green-500"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Spend"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["",L.spend.toFixed(2)]})]}),e.jsx(Co,{className:"h-8 w-8 text-yellow-500"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Conversions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:L.conversions})]}),e.jsx(zt,{className:"h-8 w-8 text-purple-500"})]})})]}),c.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(Ss,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No insights data yet. Sync insights to view performance metrics."})]}):e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Impressions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Clicks"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Spend"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"CPC"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"CTR"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Conversions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:c.map((O,V)=>{var Z,D,P,W,ee;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:O.date_start||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:((Z=O.impressions)==null?void 0:Z.toLocaleString())||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:((D=O.clicks)==null?void 0:D.toLocaleString())||0}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:["",((P=O.spend)==null?void 0:P.toFixed(2))||"0.00"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:["",((W=O.cpc)==null?void 0:W.toFixed(2))||"0.00"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:[((ee=O.ctr)==null?void 0:ee.toFixed(2))||"0.00","%"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:O.conversions||0})]},V)})})]})})]})]}),x&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Create New Campaign"}),e.jsxs("form",{onSubmit:O=>{O.preventDefault();const V=new FormData(O.currentTarget);y({name:V.get("name"),objective:V.get("objective"),status:V.get("status")||"PAUSED",daily_budget:V.get("daily_budget")?parseFloat(V.get("daily_budget")):void 0,lifetime_budget:V.get("lifetime_budget")?parseFloat(V.get("lifetime_budget")):void 0,start_time:V.get("start_time")||void 0,stop_time:V.get("stop_time")||void 0})},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Campaign Name"}),e.jsx("input",{type:"text",name:"name",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100",placeholder:"Summer Sale 2024"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Objective"}),e.jsxs("select",{name:"objective",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100",children:[e.jsx("option",{value:"OUTCOME_TRAFFIC",children:"Traffic"}),e.jsx("option",{value:"OUTCOME_LEADS",children:"Leads"}),e.jsx("option",{value:"OUTCOME_ENGAGEMENT",children:"Engagement"}),e.jsx("option",{value:"OUTCOME_AWARENESS",children:"Awareness"}),e.jsx("option",{value:"OUTCOME_SALES",children:"Sales"}),e.jsx("option",{value:"OUTCOME_APP_PROMOTION",children:"App Promotion"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Daily Budget ()"}),e.jsx("input",{type:"number",name:"daily_budget",min:"0",step:"0.01",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Lifetime Budget ()"}),e.jsx("input",{type:"number",name:"lifetime_budget",min:"0",step:"0.01",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Start Date"}),e.jsx("input",{type:"datetime-local",name:"start_time",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"End Date"}),e.jsx("input",{type:"datetime-local",name:"stop_time",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Status"}),e.jsxs("select",{name:"status",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100",children:[e.jsx("option",{value:"PAUSED",children:"Paused"}),e.jsx("option",{value:"ACTIVE",children:"Active"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Campaign"})]})]})]})}),m&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Meta Ads Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Ad Account ID"}),e.jsx("input",{type:"text",value:S.ad_account_id,onChange:O=>F({...S,ad_account_id:O.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100",placeholder:"act_123456789"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Pixel ID"}),e.jsx("input",{type:"text",value:S.pixel_id,onChange:O=>F({...S,pixel_id:O.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100",placeholder:"123456789012345"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Access Token"}),e.jsx("input",{type:"password",value:S.access_token,onChange:O=>F({...S,access_token:O.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100",placeholder:"Your Meta access token"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{onClick:A,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Configuration"})]})]})]})})]})}const Hp=()=>{if(typeof window<"u"){const t=window.location.hostname;return t==="thenefol.com"||t==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}/api`:"https://thenefol.com/api"}return"https://thenefol.com/api"};class C8{constructor(){Ca(this,"config",{api:{baseUrl:Hp(),timeout:3e4,retries:3},features:{loyaltyProgram:!0,affiliateProgram:!0,cashbackSystem:!0,emailMarketing:!0,smsMarketing:!0,pushNotifications:!0,whatsappChat:!0,liveChat:!0,analytics:!0,formBuilder:!0,workflowAutomation:!0,customerSegmentation:!0,journeyTracking:!0,actionableAnalytics:!0,aiBox:!0,journeyFunnel:!0,aiPersonalization:!0,customAudience:!0,omniChannel:!0,apiManager:!0},ui:{theme:"auto",language:"en",timezone:"Asia/Kolkata",dateFormat:"DD/MM/YYYY",currency:"INR"},security:{sessionTimeout:36e5,maxLoginAttempts:5,passwordMinLength:8,requireTwoFactor:!1},notifications:{email:!0,sms:!0,push:!0,inApp:!0}})}getConfig(){return{...this.config}}getSection(s){return{...this.config[s]}}getValue(s,r){return this.config[s][r]}updateSection(s,r){this.config[s]={...this.config[s],...r},this.saveToStorage()}updateValue(s,r,a){this.config[s][r]=a,this.saveToStorage()}reset(){this.config={api:{baseUrl:Hp(),timeout:3e4,retries:3},features:{loyaltyProgram:!0,affiliateProgram:!0,cashbackSystem:!0,emailMarketing:!0,smsMarketing:!0,pushNotifications:!0,whatsappChat:!0,liveChat:!0,analytics:!0,formBuilder:!0,workflowAutomation:!0,customerSegmentation:!0,journeyTracking:!0,actionableAnalytics:!0,aiBox:!0,journeyFunnel:!0,aiPersonalization:!0,customAudience:!0,omniChannel:!0,apiManager:!0},ui:{theme:"auto",language:"en",timezone:"Asia/Kolkata",dateFormat:"DD/MM/YYYY",currency:"INR"},security:{sessionTimeout:36e5,maxLoginAttempts:5,passwordMinLength:8,requireTwoFactor:!1},notifications:{email:!0,sms:!0,push:!0,inApp:!0}},this.saveToStorage()}loadFromStorage(){try{const s=localStorage.getItem("nefol_admin_config");if(s){const r=JSON.parse(s);this.config={...this.config,...r}}}catch(s){console.error("Failed to load config from storage:",s)}}saveToStorage(){try{localStorage.setItem("nefol_admin_config",JSON.stringify(this.config))}catch(s){console.error("Failed to save config to storage:",s)}}isFeatureEnabled(s){return this.config.features[s]}setFeatureEnabled(s,r){this.config.features[s]=r,this.saveToStorage()}getApiConfig(){return this.config.api}getUiConfig(){return this.config.ui}getSecurityConfig(){return this.config.security}getNotificationsConfig(){return this.config.notifications}}const Km=new C8;Km.loadFromStorage();function _8(){return Km.getApiConfig().baseUrl}function T8(){const[t,s]=b.useState([]),[r,a]=b.useState({}),[n,i]=b.useState(!0),[l,o]=b.useState(""),[c,d]=b.useState(1),[u,p]=b.useState({total:0,totalPages:0}),[h,g]=b.useState("all"),x=_8(),f=b.useRef(c),m=b.useRef(h),j=b.useRef(l);b.useEffect(()=>{f.current=c,m.current=h,j.current=l},[c,h,l]);const v=b.useCallback(async()=>{var k;try{i(!0);const A=localStorage.getItem("auth_token")||localStorage.getItem("token"),y=localStorage.getItem("role")||"admin",N=localStorage.getItem("permissions")||"orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update",R=new URLSearchParams({page:f.current.toString(),limit:"50",...j.current&&{search:j.current}}),T=await fetch(`${x}/api/whatsapp/subscriptions?${R}`,{headers:{"Content-Type":"application/json",...A&&{Authorization:`Bearer ${A}`},"x-user-role":y,"x-user-permissions":N}});if(T.ok){const z=await T.json();console.log(" Fetched subscriptions:",((k=z.subscriptions)==null?void 0:k.length)||0,"total");let L=z.subscriptions||[];m.current==="active"?L=L.filter(O=>O.is_active):m.current==="inactive"&&(L=L.filter(O=>!O.is_active)),s(L),p(z.pagination||{})}else{const z=await T.text();console.error(`Failed to fetch subscriptions: ${T.status} ${T.statusText}`,z),T.status===401&&console.error("Authentication failed. Please check your login credentials.")}}catch(A){console.error("Failed to fetch subscriptions:",A)}finally{i(!1)}},[x]);b.useEffect(()=>{const k=setTimeout(()=>{v()},l?500:0);return()=>clearTimeout(k)},[c,h,l,v]),b.useEffect(()=>{w()},[]),b.useEffect(()=>{const k=y=>{var N,R,T;y.type==="whatsapp-subscription"&&(console.log(" Received WhatsApp subscription update, refreshing list..."),v(),w(),Notification.permission==="granted"&&new Notification("New WhatsApp Subscription!",{body:`New subscription: ${((R=(N=y.data)==null?void 0:N.subscription)==null?void 0:R.phone)||((T=y.data)==null?void 0:T.message)||"Unknown"}`,icon:"/favicon.ico"}))},A=Xe.subscribe("update",k);return()=>{A&&A()}},[v]);const w=async()=>{try{const k=localStorage.getItem("auth_token")||localStorage.getItem("token"),A=localStorage.getItem("role")||"admin",y=localStorage.getItem("permissions")||"orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update",N=await fetch(`${x}/api/whatsapp/stats`,{headers:{"Content-Type":"application/json",...k&&{Authorization:`Bearer ${k}`},"x-user-role":A,"x-user-permissions":y}});if(N.ok){const R=await N.json();a(R)}else{const R=await N.text();console.error(`Failed to fetch stats: ${N.status} ${N.statusText}`,R),N.status===401&&console.error("Authentication failed. Please check your login credentials.")}}catch(k){console.error("Failed to fetch stats:",k)}},S=k=>k.length===10?`+91 ${k.slice(0,5)} ${k.slice(5)}`:k,F=k=>new Date(k).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),E=()=>{const k=[["Phone","Name","Source","Subscribed At","Status"].join(","),...t.map(R=>[R.phone,R.name||"",R.source||"",R.subscribed_at,R.is_active?"Active":"Inactive"].join(","))].join(`
`),A=new Blob([k],{type:"text/csv"}),y=URL.createObjectURL(A),N=document.createElement("a");N.href=y,N.download=`whatsapp-subscriptions-${new Date().toISOString().split("T")[0]}.csv`,N.click(),setTimeout(()=>URL.revokeObjectURL(y),100)};return b.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[]),e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"WhatsApp Subscriptions"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage and view all WhatsApp subscriptions"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Total Subscribers"}),e.jsx("div",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:r.total_subscribers||0})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Active"}),e.jsx("div",{className:"text-2xl font-light",style:{color:"#059669",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:r.active_subscribers||0})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Last 24 Hours"}),e.jsx("div",{className:"text-2xl font-light",style:{color:"var(--arctic-blue-primary-dark)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:r.new_last_24_hours||0})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Last 7 Days"}),e.jsx("div",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:r.new_last_7_days||0})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex-1 w-full md:w-auto",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by phone or name...",value:l,onChange:k=>o(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:h,onChange:k=>{g(k.target.value),d(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Subscriptions"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]}),e.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(wa,{className:"w-4 h-4"}),"Export CSV"]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[n?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading subscriptions..."}):t.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"No subscriptions found"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscribed At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(k=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pa,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:S(k.phone)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.name||e.jsx("span",{className:"text-gray-400 italic",children:"Not provided"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:k.source||"Unknown"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mr,{className:"w-4 h-4"}),F(k.subscribed_at)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${k.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:k.is_active?"Active":"Inactive"})})]},k.id))})]})}),u.totalPages>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing page ",c," of ",u.totalPages," (",u.total," total)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>d(Math.max(1,c-1)),disabled:c===1,className:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),e.jsx("button",{onClick:()=>d(Math.min(u.totalPages,c+1)),disabled:c===u.totalPages,className:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]})]})}function E8(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!1),[l,o]=b.useState("discounts"),[c,d]=b.useState(!1),[u,p]=b.useState(null),[h,g]=b.useState({code:"",name:"",type:"percentage",value:"",min_purchase:"",max_discount:"",usage_limit:"",valid_from:"",valid_until:"",is_active:!0}),f=(()=>{if(typeof window<"u"){const N=window.location.hostname;if(N==="thenefol.com"||N==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();b.useEffect(()=>{m(),j()},[]);const m=async()=>{try{i(!0);const N=await fetch(`${f}/discounts`);if(N.ok){const R=await N.json();s(R)}else console.error("Failed to load discounts:",await N.text()),s([])}catch(N){console.error("Failed to load discounts:",N),s([])}finally{i(!1)}},j=async()=>{try{const N=await fetch(`${f}/discounts/usage`);if(N.ok){const R=await N.json();a(R)}else console.error("Failed to load usage:",await N.text()),a([])}catch(N){console.error("Failed to load usage:",N),a([])}},v=async N=>{N.preventDefault();try{i(!0);const R={code:h.code.toUpperCase(),name:h.name,type:h.type,value:parseFloat(h.value),min_purchase:h.min_purchase?parseFloat(h.min_purchase):null,max_discount:h.max_discount?parseFloat(h.max_discount):null,usage_limit:h.usage_limit?parseInt(h.usage_limit):null,valid_from:h.valid_from||null,valid_until:h.valid_until||null,is_active:h.is_active},T=u?"PUT":"POST",z=u?`${f}/discounts/${u.id}`:`${f}/discounts`,L=await fetch(z,{method:T,headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(L.ok)await m(),g({code:"",name:"",type:"percentage",value:"",min_purchase:"",max_discount:"",usage_limit:"",valid_from:"",valid_until:"",is_active:!0}),p(null),o("discounts"),alert(u?"Discount updated successfully!":"Discount created successfully!");else{const O=await L.json();alert(O.message||"Failed to save discount")}}catch(R){console.error("Error saving discount:",R),alert("Failed to save discount")}finally{i(!1)}},w=N=>{var R,T,z;p(N),g({code:N.code,name:N.name,type:N.type,value:N.value.toString(),min_purchase:((R=N.min_purchase)==null?void 0:R.toString())||"",max_discount:((T=N.max_discount)==null?void 0:T.toString())||"",usage_limit:((z=N.usage_limit)==null?void 0:z.toString())||"",valid_from:N.valid_from?N.valid_from.split("T")[0]:"",valid_until:N.valid_until?N.valid_until.split("T")[0]:"",is_active:N.is_active}),o("create")},S=async N=>{if(confirm("Are you sure you want to delete this discount?"))try{i(!0),(await fetch(`${f}/discounts/${N}`,{method:"DELETE"})).ok?(await m(),alert("Discount deleted successfully!")):alert("Failed to delete discount")}catch(R){console.error("Error deleting discount:",R),alert("Failed to delete discount")}finally{i(!1)}},F=async N=>{try{i(!0),(await fetch(`${f}/discounts/${N.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!N.is_active})})).ok?await m():alert("Failed to update discount status")}catch(R){console.error("Error updating discount status:",R),alert("Failed to update discount status")}finally{i(!1)}},E=(N,R)=>N?R&&new Date(R)<new Date?"bg-red-100 text-red-800":"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",k=N=>N.is_active?N.valid_until&&new Date(N.valid_until)<new Date?"Expired":"Active":"Inactive",A=N=>{switch(N){case"percentage":return"";case"fixed":return"";default:return""}},y=N=>{switch(N.type){case"percentage":return`${N.value}%`;case"fixed":return`${N.value}`;case"free_shipping":return"Free Shipping";default:return`${N.value}`}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Discounts"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Create and manage discount codes and promotions"})]}),e.jsx("button",{onClick:()=>d(!0),className:"btn-primary",children:"Create Discount"})]}),e.jsx("div",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"discounts",name:"Discount Codes",count:t.length},{id:"usage",name:"Usage History",count:r.length},{id:"create",name:"Create New",count:0}].map(N=>e.jsxs("button",{onClick:()=>o(N.id),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${l===N.id?"text-[var(--arctic-blue-primary-dark)]":"border-transparent hover:text-[var(--text-primary)]"}`,style:l===N.id?{borderColor:"var(--arctic-blue-primary)"}:{color:"var(--text-muted)"},children:[N.name," (",N.count,")"]},N.id))})}),l==="discounts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{title:"Total Discounts",value:t.length,icon:""},{title:"Active",value:t.filter(N=>N.is_active&&(!N.valid_until||new Date(N.valid_until)>=new Date)).length,icon:""},{title:"Total Uses",value:t.reduce((N,R)=>N+(R.usage_count||0),0),icon:""},{title:"Total Saved",value:`${(Array.isArray(r)?r.reduce((N,R)=>N+(Number(R.discount_amount)||0),0):0).toFixed(2)}`,icon:""}].map((N,R)=>e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:N.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N.value})]}),e.jsx("div",{className:"text-2xl",children:N.icon})]})},R))}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"border-b border-gray-200 text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 pr-4",children:"Code"}),e.jsx("th",{className:"py-3 pr-4",children:"Name"}),e.jsx("th",{className:"py-3 pr-4",children:"Type"}),e.jsx("th",{className:"py-3 pr-4",children:"Value"}),e.jsx("th",{className:"py-3 pr-4",children:"Min Amount"}),e.jsx("th",{className:"py-3 pr-4",children:"Usage"}),e.jsx("th",{className:"py-3 pr-4",children:"Status"}),e.jsx("th",{className:"py-3 pr-4",children:"Valid Until"}),e.jsx("th",{className:"py-3 pr-4",children:"Actions"})]})}),e.jsx("tbody",{children:t.map(N=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-3 pr-4",children:e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm font-mono",children:N.code})}),e.jsx("td",{className:"py-3 pr-4 font-medium text-gray-900",children:N.name}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:A(N.type)}),e.jsx("span",{className:"capitalize",children:N.type.replace("_"," ")})]})}),e.jsx("td",{className:"py-3 pr-4 font-semibold",children:y(N)}),e.jsx("td",{className:"py-3 pr-4 text-gray-600",children:N.min_purchase?`${N.min_purchase}`:""}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:N.usage_count||0}),N.usage_limit&&e.jsxs("span",{className:"text-gray-500",children:[" / ",N.usage_limit]})]})}),e.jsx("td",{className:"py-3 pr-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${E(N.is_active,N.valid_until)}`,children:k(N)})}),e.jsx("td",{className:"py-3 pr-4 text-gray-600",children:N.valid_until?new Date(N.valid_until).toLocaleDateString():""}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>w(N),className:"btn-secondary text-xs px-2 py-1",children:"Edit"}),e.jsx("button",{onClick:async()=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(N.code),alert("Discount code copied to clipboard!");else{const R=document.createElement("textarea");R.value=N.code,R.style.position="fixed",R.style.left="-999999px",document.body.appendChild(R),R.select(),document.execCommand("copy"),document.body.removeChild(R),alert(`Discount code copied: ${N.code}`)}}catch{alert(`Discount code: ${N.code}`)}},className:"btn-secondary text-xs px-2 py-1",children:"Copy"}),e.jsx("button",{onClick:()=>F(N),className:`text-xs px-2 py-1 rounded ${N.is_active?"bg-yellow-600 text-white hover:bg-yellow-700":"bg-green-600 text-white hover:bg-green-700"}`,children:N.is_active?"Deactivate":"Activate"}),e.jsx("button",{onClick:()=>S(N.id),className:"bg-red-600 text-white px-2 py-1 text-xs rounded hover:bg-red-700",children:"Delete"})]})})]},N.id))})]})})})]}),l==="usage"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Discount Usage History"}),e.jsx("button",{className:"btn-secondary",children:"Export"})]}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"border-b border-gray-200 text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 pr-4",children:"Customer"}),e.jsx("th",{className:"py-3 pr-4",children:"Order ID"}),e.jsx("th",{className:"py-3 pr-4",children:"Discount Code"}),e.jsx("th",{className:"py-3 pr-4",children:"Amount Saved"}),e.jsx("th",{className:"py-3 pr-4",children:"Used At"})]})}),e.jsx("tbody",{children:r.map(N=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-3 pr-4 text-gray-600",children:N.customer_email}),e.jsxs("td",{className:"py-3 pr-4 font-medium",children:["#",N.order_id]}),e.jsx("td",{className:"py-3 pr-4",children:e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm font-mono",children:N.discount_code||"Unknown"})}),e.jsxs("td",{className:"py-3 pr-4 font-semibold text-green-600",children:["",(N.discount_amount||0).toFixed(2)]}),e.jsx("td",{className:"py-3 pr-4 text-gray-600",children:new Date(N.created_at).toLocaleString()})]},N.id))})]})})})]}),l==="create"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:u?"Edit Discount":"Create New Discount"}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Code *"}),e.jsx("input",{type:"text",required:!0,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"WELCOME10",value:h.code,onChange:N=>g({...h,code:N.target.value.toUpperCase()}),disabled:!!u}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Code cannot be changed after creation"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Name *"}),e.jsx("input",{type:"text",required:!0,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"Welcome Discount",value:h.name,onChange:N=>g({...h,name:N.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",value:h.type,onChange:N=>g({...h,type:N.target.value}),children:[e.jsx("option",{value:"percentage",children:"Percentage"}),e.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value *"}),e.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:h.type==="percentage"?"10":"100",value:h.value,onChange:N=>g({...h,value:N.target.value})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.type==="percentage"?"Percentage (0-100)":"Amount in "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Purchase Amount"}),e.jsx("input",{type:"number",min:"0",step:"0.01",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"500",value:h.min_purchase,onChange:N=>g({...h,min_purchase:N.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Discount (for percentage)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"1000",value:h.max_discount,onChange:N=>g({...h,max_discount:N.target.value}),disabled:h.type==="fixed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum discount amount for percentage type"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usage Limit"}),e.jsx("input",{type:"number",min:"1",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"100",value:h.usage_limit,onChange:N=>g({...h,usage_limit:N.target.value})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for unlimited"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("label",{className:"flex items-center space-x-2 mt-2",children:[e.jsx("input",{type:"checkbox",checked:h.is_active,onChange:N=>g({...h,is_active:N.target.checked}),className:"rounded border-gray-300"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid From"}),e.jsx("input",{type:"date",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",value:h.valid_from,onChange:N=>g({...h,valid_from:N.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid Until"}),e.jsx("input",{type:"date",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",value:h.valid_until,onChange:N=>g({...h,valid_until:N.target.value})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>{g({code:"",name:"",type:"percentage",value:"",min_purchase:"",max_discount:"",usage_limit:"",valid_from:"",valid_until:"",is_active:!0}),p(null),o("discounts")},className:"btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":u?"Update Discount":"Create Discount"})]})]})]})})]})}function A8(){const[t,s]=b.useState(!1),[r,a]=b.useState([]),[n,i]=b.useState({totalPosts:0,scheduled:0,engagement:"0",reach:"0"}),[l,o]=b.useState(!0),[c,d]=b.useState(""),p=(()=>{if(typeof window<"u"){const g=window.location.hostname;if(g==="thenefol.com"||g==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();b.useEffect(()=>{h()},[]);const h=async()=>{try{o(!0),d("");const[g,x,f]=await Promise.all([fetch(`${p}/api/social/connection-status`),fetch(`${p}/api/social/posts`),fetch(`${p}/api/social/stats`)]);if(g.ok){const m=await g.json();s(m.connected||!1)}if(x.ok){const m=await x.json();a(m.posts||[])}if(f.ok){const m=await f.json();i(m)}}catch(g){console.error("Failed to load social data:",g),d("Failed to load social media data")}finally{o(!1)}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Facebook & Instagram"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage your social media presence"})]}),e.jsx("button",{onClick:()=>s(!t),className:t?"btn-secondary":"btn-primary",children:t?"Disconnect":"Connect Account"})]}),t?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"f"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Facebook Page"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Nefol Skincare"})]})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:"Connected"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{title:"Total Posts",value:"24",icon:""},{title:"Scheduled",value:"3",icon:""},{title:"Engagement",value:"2.4K",icon:""},{title:"Reach",value:"8.7K",icon:""}].map((g,x)=>e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:g.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.value})]}),e.jsx("div",{className:"text-2xl",children:g.icon})]})},x))}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Posts"}),e.jsx("button",{className:"btn-primary",children:"Create Post"})]}),e.jsx("div",{className:"space-y-4",children:r.map(g=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("img",{src:g.image,alt:"Post",className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${g.platform==="facebook"?"bg-blue-100 text-blue-800":"bg-pink-100 text-pink-800"}`,children:g.platform==="facebook"?" Facebook":" Instagram"}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${g.status==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:g.status})]}),e.jsx("p",{className:"text-gray-900 mb-2",children:g.content}),e.jsxs("p",{className:"text-sm text-gray-500",children:[g.status==="scheduled"?"Scheduled for":"Published on"," ",new Date(g.scheduledFor).toLocaleString()]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Edit"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"View"})]})]})},g.id))})]})]}):e.jsxs("div",{className:"metric-card text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Connect Your Social Media"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Connect your Facebook and Instagram accounts to manage posts, stories, and ads from one place."}),e.jsx("button",{onClick:()=>s(!0),className:"btn-primary",children:"Connect Facebook & Instagram"})]})]})}function F8(){const[t,s]=b.useState({name:"Nefol Store",description:"Premium skincare products for healthy, glowing skin",currency:"INR",timezone:"Asia/Kolkata",language:"en",domain:"nefol.com",status:"live"}),[r]=b.useState([{id:1,name:"Nefol Classic",active:!0,preview:"/IMAGES/light theme logo.png"},{id:2,name:"Nefol Dark",active:!1,preview:"/IMAGES/dark theme logo.png"},{id:3,name:"Minimal",active:!1,preview:"/IMAGES/light theme logo.png"}]);return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Online Store"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Configure your online store settings"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Store is live"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Store Status"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"#059669",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:"Live"})]}),e.jsx("div",{className:"text-2xl",children:""})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Domain"}),e.jsx("p",{className:"text-lg font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:"nefol.com"})]}),e.jsx("div",{className:"text-2xl",children:""})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Theme"}),e.jsx("p",{className:"text-lg font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:"Nefol Classic"})]}),e.jsx("div",{className:"text-2xl",children:""})]})})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Store Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Name"}),e.jsx("input",{type:"text",value:t.name,onChange:a=>s({...t,name:a.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsxs("select",{value:t.currency,onChange:a=>s({...t,currency:a.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",children:[e.jsx("option",{value:"INR",children:"Indian Rupee ()"}),e.jsx("option",{value:"USD",children:"US Dollar ($)"}),e.jsx("option",{value:"EUR",children:"Euro ()"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),e.jsxs("select",{value:t.timezone,onChange:a=>s({...t,timezone:a.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",children:[e.jsx("option",{value:"Asia/Kolkata",children:"Asia/Kolkata"}),e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/New_York",children:"America/New_York"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Language"}),e.jsxs("select",{value:t.language,onChange:a=>s({...t,language:a.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"hi",children:"Hindi"}),e.jsx("option",{value:"ta",children:"Tamil"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Description"}),e.jsx("textarea",{value:t.description,onChange:a=>s({...t,description:a.target.value}),rows:3,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none"})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{className:"btn-primary",children:"Save Settings"})})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Store Themes"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:r.map(a=>e.jsxs("div",{className:`border-2 rounded-lg p-4 ${a.active?"border-brand-primary":"border-gray-200"}`,children:[e.jsx("img",{src:a.preview,alt:a.name,className:"w-full h-32 object-cover rounded mb-3"}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:a.name}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${a.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:a.active?"Active":"Inactive"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:a.active?"Customize":"Activate"})]})]},a.id))})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Domain Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Domain"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:t.domain,onChange:a=>s({...t,domain:a.target.value}),className:"flex-1 rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none"}),e.jsx("button",{className:"btn-secondary",children:"Update"})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Domain Configuration"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Make sure to update your DNS settings to point to our servers."})]})]})})]})]})]})}function P8(){const[t,s]=b.useState(!1),[r,a]=b.useState({impressions:0,clicks:0,ctr:0,conversions:0}),[n,i]=b.useState([]),[l,o]=b.useState(!0),[c,d]=b.useState(""),p=(()=>{if(typeof window<"u"){const g=window.location.hostname;if(g==="thenefol.com"||g==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();b.useEffect(()=>{h()},[]);const h=async()=>{try{o(!0),d("");const[g,x,f]=await Promise.all([fetch(`${p}/api/google/connection-status`),fetch(`${p}/api/google/analytics`),fetch(`${p}/api/google/campaigns`)]);if(g.ok){const m=await g.json();s(m.connected||!1)}if(x.ok){const m=await x.json();a(m)}if(f.ok){const m=await f.json();i(m.campaigns||[])}}catch(g){console.error("Failed to load Google data:",g),d("Failed to load Google data")}finally{o(!1)}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Google & YouTube"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage Google Ads and YouTube campaigns"})]}),e.jsx("button",{onClick:()=>s(!t),className:t?"btn-secondary":"btn-primary",children:t?"Disconnect":"Connect Google"})]}),c&&e.jsx("div",{className:"metric-card bg-red-50 border-red-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-red-600",children:c}),e.jsx("button",{onClick:h,className:"ml-auto text-red-600 hover:text-red-800 underline",children:"Retry"})]})}),l&&!c&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[...Array(4)].map((g,x)=>e.jsxs("div",{className:"metric-card animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded"})]},x))}),e.jsx("div",{className:"metric-card animate-pulse",children:e.jsx("div",{className:"h-64 bg-gray-200 rounded"})})]}),t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"Y"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"YouTube Channel"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Nefol Skincare"})]})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:"Connected"})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"G"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Google Ads"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Nefol Campaigns"})]})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:"Connected"})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{title:"Impressions",value:r.impressions.toLocaleString(),icon:""},{title:"Clicks",value:r.clicks.toLocaleString(),icon:""},{title:"CTR",value:`${r.ctr}%`,icon:""},{title:"Conversions",value:r.conversions.toString(),icon:""}].map((g,x)=>e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:g.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.value})]}),e.jsx("div",{className:"text-2xl",children:g.icon})]})},x))}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Campaigns"}),e.jsx("button",{className:"btn-primary",children:"Create Campaign"})]}),e.jsx("div",{className:"space-y-4",children:n.length>0?n.map((g,x)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:g.name}),e.jsx("p",{className:"text-sm text-gray-600",children:g.platform})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${g.status==="active"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:g.status}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["",g.spent.toLocaleString()," / ",g.budget.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[g.clicks.toLocaleString()," clicks"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Edit"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"View"})]})]})]})},x)):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No campaigns available"})})]})]}):e.jsxs("div",{className:"metric-card text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Connect Google Services"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Connect your Google Ads and YouTube accounts to manage campaigns and track performance."}),e.jsx("button",{onClick:()=>s(!0),className:"btn-primary",children:"Connect Google Account"})]})]})}function D8(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState(""),d=(()=>{if(typeof window<"u"){const x=window.location.hostname;if(x==="thenefol.com"||x==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();b.useEffect(()=>{(async()=>{try{i(!0),o("");const[f,m]=await Promise.all([fetch(`${d}/api/forms`),fetch(`${d}/api/forms/submissions`)]);if(f.ok){const j=await f.json();a(j.forms||[])}else console.error("Failed to fetch forms"),a([]);if(m.ok){const j=await m.json();s(j.submissions||[])}else console.error("Failed to fetch submissions"),s([])}catch(f){console.error("Error fetching data:",f),o("Failed to load forms data"),a([]),s([])}finally{i(!1)}})()},[]);const[u,p]=b.useState("forms"),h=x=>{switch(x){case"contact":return"";case"newsletter":return"";case"feedback":return"";case"survey":return"";default:return""}},g=x=>x==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800";return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Forms"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Create and manage contact forms and surveys"})]}),e.jsx("button",{className:"btn-primary",children:"Create Form"})]}),l&&e.jsx("div",{className:"metric-card bg-red-50 border-red-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-red-600",children:l}),e.jsx("button",{onClick:()=>window.location.reload(),className:"ml-auto text-red-600 hover:text-red-800 underline",children:"Retry"})]})}),n&&!l&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[...Array(4)].map((x,f)=>e.jsxs("div",{className:"metric-card animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded"})]},f))}),e.jsx("div",{className:"metric-card animate-pulse",children:e.jsx("div",{className:"h-64 bg-gray-200 rounded"})})]}),!n&&!l&&e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"forms",name:"Forms",count:r.length},{id:"submissions",name:"Submissions",count:r.reduce((x,f)=>x+f.submissions,0)},{id:"create",name:"Create New",count:0}].map(x=>e.jsxs("button",{onClick:()=>p(x.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${u===x.id?"border-brand-primary text-brand-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[x.name," (",x.count,")"]},x.id))})}),!n&&!l&&u==="forms"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{title:"Total Forms",value:r.length,icon:""},{title:"Active",value:r.filter(x=>x.status==="active").length,icon:""},{title:"Total Submissions",value:r.reduce((x,f)=>x+f.submissions,0),icon:""},{title:"Avg. Submissions",value:r.length>0?Math.round(r.reduce((x,f)=>x+f.submissions,0)/r.length):0,icon:""}].map((x,f)=>e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:x.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.value})]}),e.jsx("div",{className:"text-2xl",children:x.icon})]})},f))}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"border-b border-gray-200 text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 pr-4",children:"Form"}),e.jsx("th",{className:"py-3 pr-4",children:"Type"}),e.jsx("th",{className:"py-3 pr-4",children:"Status"}),e.jsx("th",{className:"py-3 pr-4",children:"Submissions"}),e.jsx("th",{className:"py-3 pr-4",children:"Created"}),e.jsx("th",{className:"py-3 pr-4",children:"Actions"})]})}),e.jsx("tbody",{children:r.map(x=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:h(x.type)}),e.jsx("span",{className:"font-medium text-gray-900",children:x.name})]})}),e.jsx("td",{className:"py-3 pr-4",children:e.jsx("span",{className:"capitalize text-gray-600",children:x.type})}),e.jsx("td",{className:"py-3 pr-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${g(x.status)}`,children:x.status})}),e.jsx("td",{className:"py-3 pr-4 font-semibold",children:x.submissions}),e.jsx("td",{className:"py-3 pr-4 text-gray-600",children:new Date(x.createdAt).toLocaleDateString()}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Edit"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"View"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Submissions"})]})})]},x.id))})]})})})]}),!n&&!l&&u==="submissions"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Submissions"}),e.jsx("button",{className:"btn-secondary",children:"Export All"})]}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"space-y-4",children:t.length>0?t.map((x,f)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:x.name}),e.jsx("span",{className:"text-gray-500",children:""}),e.jsx("span",{className:"text-sm text-gray-600",children:x.email})]}),e.jsx("p",{className:"text-gray-700 mb-2",children:x.message}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Via ",x.form,"  ",new Date(x.submittedAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Reply"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"View"})]})]})},f)):e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No form submissions available"})})})})]}),!n&&!l&&u==="create"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create New Form"}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Form Name"}),e.jsx("input",{type:"text",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"Contact Form"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Form Type"}),e.jsxs("select",{className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",children:[e.jsx("option",{value:"contact",children:"Contact"}),e.jsx("option",{value:"newsletter",children:"Newsletter"}),e.jsx("option",{value:"feedback",children:"Feedback"}),e.jsx("option",{value:"survey",children:"Survey"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Form Fields"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Name (required)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Email (required)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Message"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Phone Number"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",className:"btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Create Form"})]})]})]})})]})}const R8=()=>{const{notify:t}=mr(),[s,r]=b.useState([]),[a,n]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState(null),[d,u]=b.useState(""),[p,h]=b.useState("all"),[g,x]=b.useState(!1),[f,m]=b.useState(null);b.useEffect(()=>{j()},[]);const j=async()=>{try{x(!0);const T=(()=>{if(typeof window<"u"){const L=window.location.hostname;if(L==="thenefol.com"||L==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),z=await fetch(`${T}/invoices`);if(z.ok){const L=await z.json(),O=Array.isArray(L)?L.filter(V=>V&&typeof V=="object"&&V.invoiceNumber&&V.customerName&&V.customerEmail):[];r(O)}}catch(R){console.error("Failed to load invoices:",R),r([])}finally{x(!1)}},v=s.filter(R=>{var L,O,V;const T=((L=R.invoiceNumber)==null?void 0:L.toLowerCase().includes(d.toLowerCase()))||!1||((O=R.customerName)==null?void 0:O.toLowerCase().includes(d.toLowerCase()))||!1||((V=R.customerEmail)==null?void 0:V.toLowerCase().includes(d.toLowerCase()))||!1,z=p==="all"||R.status===p;return T&&z}),w=R=>{switch(R){case"paid":return"bg-green-100 text-green-800";case"sent":return"bg-blue-100 text-blue-800";case"overdue":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},S=async R=>{x(!0);try{const T=await fetch("/api/invoices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(T.ok){const z=await T.json();r([...s,z]),n(!1),t("success","Invoice created")}}catch(T){console.error("Error creating invoice:",T),t("error","Failed to create invoice")}finally{x(!1)}},F=async R=>{if(o){x(!0);try{const T=await fetch(`/api/invoices/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(T.ok){const z=await T.json();r(s.map(L=>L.id===o.id?z:L)),l(!1),c(null),t("success","Invoice updated")}}catch(T){console.error("Error updating invoice:",T),t("error","Failed to update invoice")}finally{x(!1)}}},E=async R=>{if(R){x(!0);try{const z=(()=>{if(typeof window<"u"){const O=window.location.hostname;if(O==="thenefol.com"||O==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();(await fetch(`${z}/invoices/${R}`,{method:"DELETE"})).ok&&(r(s.filter(O=>O.id!==R)),t("success","Invoice deleted"))}catch(T){console.error("Error deleting invoice:",T),t("error","Failed to delete invoice")}finally{x(!1)}}},k=async R=>{x(!0);try{const z=(()=>{if(typeof window<"u"){const O=window.location.hostname;if(O==="thenefol.com"||O==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();(await fetch(`${z}/invoices/${R}/send`,{method:"POST"})).ok&&(r(s.map(O=>O.id===R?{...O,status:"sent"}:O)),t("success","Invoice sent"))}catch(T){console.error("Error sending invoice:",T),t("error","Failed to send invoice")}finally{x(!1)}},A=s.reduce((R,T)=>R+T.total,0),y=s.filter(R=>R.status==="paid").reduce((R,T)=>R+T.total,0),N=s.filter(R=>R.status==="overdue").reduce((R,T)=>R+T.total,0);return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Invoices"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage customer invoices and billing"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(jn,{to:"/admin/invoice-settings",className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Invoice Settings"]}),e.jsxs("button",{onClick:()=>n(!0),className:"btn-primary",children:[e.jsx("span",{className:"text-lg mr-2",children:""}),"Create Invoice"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Invoices"}),e.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:s.length})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-brand-primary",children:["$",A.toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Paid Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",y.toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overdue Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["$",N.toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})})]}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search invoices...",value:d,onChange:R=>u(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsxs("select",{value:p,onChange:R=>h(R.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Invoice #"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Customer"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Order ID"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Amount"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Due Date"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:v.map(R=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx(jn,{to:`/admin/invoices/${R.id}`,className:"text-brand-primary hover:underline font-medium",children:R.invoiceNumber||"N/A"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:R.customerName||"N/A"}),e.jsx("p",{className:"text-sm text-gray-500",children:R.customerEmail||"N/A"})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(jn,{to:`/admin/orders/${R.orderId}`,className:"text-brand-primary hover:underline",children:R.orderId||"N/A"})}),e.jsxs("td",{className:"py-3 px-4 font-medium",children:["$",(R.total||0).toFixed(2)]}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w(R.status||"draft")}`,children:(R.status||"draft").charAt(0).toUpperCase()+(R.status||"draft").slice(1)})}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:R.dueDate||"N/A"}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{c(R),l(!0)},className:"text-brand-secondary hover:text-brand-primary",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),R.status==="draft"&&e.jsx("button",{onClick:()=>k(R.id),className:"text-blue-600 hover:text-blue-800",title:"Send Invoice",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})}),e.jsx("button",{onClick:()=>m(R.id),className:"text-red-600 hover:text-red-800",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},R.id))})]})})}),a&&e.jsx(L8,{onClose:()=>n(!1),onSubmit:S,loading:g}),i&&o&&e.jsx(O8,{invoice:o,onClose:()=>{l(!1),c(null)},onSubmit:F,loading:g}),e.jsx(Va,{open:!!f,onClose:()=>m(null),onConfirm:()=>{f&&E(f)},title:"Delete this invoice?",description:"This action cannot be undone.",confirmText:"Delete"})]})},L8=({onClose:t,onSubmit:s,loading:r})=>{const[a,n]=b.useState({customerName:"",customerEmail:"",orderId:"",dueDate:"",items:[{id:`item-${Date.now()}`,productName:"",quantity:1,price:0,total:0}]}),i=l=>{l.preventDefault();const o=a.items.reduce((u,p)=>u+p.quantity*p.price,0),c=o*.1,d={...a,amount:o,tax:c,total:o+c,status:"draft",invoiceNumber:`INV-${Date.now()}`,createdAt:new Date().toISOString()};s(d)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Create Invoice"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),e.jsx("input",{type:"text",required:!0,value:a.customerName,onChange:l=>n({...a,customerName:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Email"}),e.jsx("input",{type:"email",required:!0,value:a.customerEmail,onChange:l=>n({...a,customerEmail:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order ID"}),e.jsx("input",{type:"text",required:!0,value:a.orderId,onChange:l=>n({...a,orderId:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",required:!0,value:a.dueDate,onChange:l=>n({...a,dueDate:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Items"}),a.items.map((l,o)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Product Name",value:l.productName,onChange:c=>{const d=[...a.items];d[o].productName=c.target.value,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsx("div",{children:e.jsx("input",{type:"number",placeholder:"Quantity",min:"1",value:l.quantity,onChange:c=>{const d=[...a.items];d[o].quantity=parseInt(c.target.value)||1,d[o].total=d[o].quantity*d[o].price,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsx("div",{children:e.jsx("input",{type:"number",placeholder:"Price",min:"0",step:"0.01",value:l.price,onChange:c=>{const d=[...a.items];d[o].price=parseFloat(c.target.value)||0,d[o].total=d[o].quantity*d[o].price,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})})]},o)),e.jsx("button",{type:"button",onClick:()=>n({...a,items:[...a.items,{id:`item-${Date.now()}`,productName:"",quantity:1,price:0,total:0}]}),className:"text-brand-secondary hover:text-brand-primary",children:"+ Add Item"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r,className:"btn-primary",children:r?"Creating...":"Create Invoice"})]})]})]})})},O8=({invoice:t,onClose:s,onSubmit:r,loading:a})=>{const[n,i]=b.useState({customerName:t.customerName,customerEmail:t.customerEmail,orderId:t.orderId,dueDate:t.dueDate,status:t.status,items:t.items}),l=o=>{o.preventDefault();const c=n.items.reduce((p,h)=>p+h.quantity*h.price,0),d=c*.1,u={...n,amount:c,tax:d,total:c+d};r(u)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Edit Invoice"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),e.jsx("input",{type:"text",required:!0,value:n.customerName,onChange:o=>i({...n,customerName:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Email"}),e.jsx("input",{type:"email",required:!0,value:n.customerEmail,onChange:o=>i({...n,customerEmail:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order ID"}),e.jsx("input",{type:"text",required:!0,value:n.orderId,onChange:o=>i({...n,orderId:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",required:!0,value:n.dueDate,onChange:o=>i({...n,dueDate:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:n.status,onChange:o=>i({...n,status:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"btn-primary",children:a?"Updating...":"Update Invoice"})]})]})]})})},I8=()=>{const[t,s]=b.useState({companyDetails:{companyName:"Nefol",companyAddress:"",companyPhone:"7355384939",companyEmail:"info@nefol.com",gstNumber:"",panNumber:"",bankName:"",accountNumber:"",ifscCode:""},colors:{primaryStart:"#667eea",primaryEnd:"#764ba2",accentStart:"#667eea",accentEnd:"#764ba2"},tax:{rate:18,type:"IGST"},terms:"Thank you for doing business with us.",signatureText:"Authorized Signatory",currency:""}),[r,a]=b.useState(!1),[n,i]=b.useState("idle"),[l,o]=b.useState(!1),[c,d]=b.useState("company"),[u,p]=b.useState(!1),[h,g]=b.useState(!1),[x,f]=b.useState(!1),[m,j]=b.useState(null),[v,w]=b.useState(null);b.useEffect(()=>{S()},[]);const S=async()=>{try{const O=(()=>{if(typeof window<"u"){const D=window.location.hostname;if(D==="thenefol.com"||D==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),V=await fetch(`${O}/invoice-settings/company-details`);if(V.ok){const D=await V.json();D&&Object.keys(D).length>0&&s(P=>({...P,companyDetails:{companyName:D.companyName||P.companyDetails.companyName||"",companyAddress:D.companyAddress||P.companyDetails.companyAddress||"",companyPhone:D.companyPhone||P.companyDetails.companyPhone||"",companyEmail:D.companyEmail||P.companyDetails.companyEmail||"",gstNumber:D.gstNumber||P.companyDetails.gstNumber||"",panNumber:D.panNumber||P.companyDetails.panNumber||"",bankName:D.bankName||P.companyDetails.bankName||"",accountNumber:D.accountNumber||P.companyDetails.accountNumber||"",ifscCode:D.ifscCode||P.companyDetails.ifscCode||""}}))}const Z=await fetch(`${O}/invoice-settings/all`);if(Z.ok){const D=await Z.json();if(D){if(s(P=>({...P,...D.colors&&{colors:D.colors},...D.tax&&{tax:D.tax},...D.terms!==void 0&&{terms:D.terms||""},...D.signatureText!==void 0&&{signatureText:D.signatureText||""},...D.currency!==void 0&&{currency:D.currency||""},...D.companyDetails&&{companyDetails:{companyName:D.companyDetails.companyName||P.companyDetails.companyName||"",companyAddress:D.companyDetails.companyAddress||P.companyDetails.companyAddress||"",companyPhone:D.companyDetails.companyPhone||P.companyDetails.companyPhone||"",companyEmail:D.companyDetails.companyEmail||P.companyDetails.companyEmail||"",gstNumber:D.companyDetails.gstNumber||P.companyDetails.gstNumber||"",panNumber:D.companyDetails.panNumber||P.companyDetails.panNumber||"",bankName:D.companyDetails.bankName||P.companyDetails.bankName||"",accountNumber:D.companyDetails.accountNumber||P.companyDetails.accountNumber||"",ifscCode:D.companyDetails.ifscCode||P.companyDetails.ifscCode||""}},...D.logoUrl!==void 0&&{logoUrl:D.logoUrl||void 0},...D.signatoryPhotoUrl!==void 0&&{signatoryPhotoUrl:D.signatoryPhotoUrl||void 0}})),D.logoUrl){const P=D.logoUrl.startsWith("http")?D.logoUrl:`${O}${D.logoUrl}`;j(P)}if(D.signatoryPhotoUrl){const P=D.signatoryPhotoUrl.startsWith("http")?D.signatoryPhotoUrl:`${O}${D.signatoryPhotoUrl}`;w(P)}}}}catch(L){console.error("Failed to load settings:",L)}},F=async()=>{a(!0),i("idle");try{const O=(()=>{if(typeof window<"u"){const V=window.location.hostname;if(V==="thenefol.com"||V==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();await fetch(`${O}/invoice-settings/company-details`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t.companyDetails)}),await fetch(`${O}/invoice-settings/all`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,logoUrl:t.logoUrl,signatoryPhotoUrl:t.signatoryPhotoUrl})}),i("success"),setTimeout(()=>i("idle"),3e3)}catch(L){console.error("Failed to save settings:",L),i("error"),setTimeout(()=>i("idle"),3e3)}finally{a(!1)}},E=(L,O,V)=>{s(Z=>{const D={...Z};return L==="companyDetails"||L==="colors"||L==="tax"?D[L]={...Z[L],[O]:V}:D[O]=V,D})},k=(L,O)=>{s(V=>({...V,[L]:O}))},A=()=>({background:`linear-gradient(135deg, ${t.colors.primaryStart} 0%, ${t.colors.primaryEnd} 100%)`,color:"white",padding:"20px",borderRadius:"8px",marginBottom:"20px"}),y=()=>{if(typeof window<"u"){const L=window.location.hostname;if(L==="thenefol.com"||L==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"},N=async L=>{var V;const O=(V=L.target.files)==null?void 0:V[0];if(O){if(!O.type.startsWith("image/")){alert("Please select an image file");return}if(O.size>5*1024*1024){alert("Image size must be less than 5MB");return}try{g(!0);const Z=y(),D=await Dr(O,Z),P=D.replace(/^https?:\/\/[^/]+/,"");s(W=>({...W,logoUrl:P})),j(D)}catch(Z){console.error("Failed to upload logo:",Z),alert("Failed to upload logo. Please try again.")}finally{g(!1)}}},R=async L=>{var V;const O=(V=L.target.files)==null?void 0:V[0];if(O){if(!O.type.startsWith("image/")){alert("Please select an image file");return}if(O.size>5*1024*1024){alert("Image size must be less than 5MB");return}try{f(!0);const Z=y(),D=await Dr(O,Z),P=D.replace(/^https?:\/\/[^/]+/,"");s(W=>({...W,signatoryPhotoUrl:P})),w(D)}catch(Z){console.error("Failed to upload signatory photo:",Z),alert("Failed to upload signatory photo. Please try again.")}finally{f(!1)}}},T=()=>{s(L=>({...L,logoUrl:void 0})),j(null)},z=()=>{s(L=>({...L,signatoryPhotoUrl:void 0})),w(null)};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Invoice Settings"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Customize your invoice design and details"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>p(!0),className:"btn-secondary flex items-center gap-2",children:[e.jsx(Xn,{className:"w-5 h-5"}),"Upload Images"]}),e.jsxs("button",{onClick:()=>o(!l),className:"btn-secondary flex items-center gap-2",children:[e.jsx(ct,{className:"w-5 h-5"}),l?"Hide":"Show"," Preview"]}),e.jsxs("button",{onClick:F,disabled:r,className:"btn-primary flex items-center gap-2",children:[e.jsx($s,{className:"w-5 h-5"}),r?"Saving...":"Save All Settings"]})]})]}),n==="success"&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg",children:" All settings saved successfully!"}),n==="error"&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:" Failed to save settings. Please try again."}),e.jsx("div",{className:"flex gap-2 border-b",style:{borderColor:"var(--arctic-blue-light)"},children:["Company","Design","Tax","Terms"].map((L,O)=>e.jsx("button",{onClick:()=>d(L.toLowerCase().replace("tax","tax").replace("terms","terms").replace("company","company").replace("design","design")),className:`px-6 py-3 font-medium transition-colors ${c===(L==="Company"?"company":L==="Design"?"design":L==="Tax"?"tax":"terms")?"border-b-2":""}`,style:c===(L==="Company"?"company":L==="Design"?"design":L==="Tax"?"tax":"terms")?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:L},L))}),e.jsxs("div",{className:"space-y-6",children:[c==="company"&&e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Tb,{className:"w-6 h-6 text-brand-primary"}),e.jsx("h2",{className:"text-xl font-bold text-brand-primary",children:"Company Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Company Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.companyDetails.companyName||"",onChange:L=>E("companyDetails","companyName",L.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",value:t.companyDetails.companyPhone||"",onChange:L=>E("companyDetails","companyPhone",L.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:t.companyDetails.companyEmail||"",onChange:L=>E("companyDetails","companyEmail",L.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST Number"}),e.jsx("input",{type:"text",value:t.companyDetails.gstNumber||"",onChange:L=>E("companyDetails","gstNumber",L.target.value),placeholder:"29ABCDE1234F1Z5",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PAN Number"}),e.jsx("input",{type:"text",value:t.companyDetails.panNumber||"",onChange:L=>E("companyDetails","panNumber",L.target.value),placeholder:"ABCDE1234F",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Complete Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{rows:4,value:t.companyDetails.companyAddress||"",onChange:L=>E("companyDetails","companyAddress",L.target.value),placeholder:"Enter complete company address",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Banking Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Name"}),e.jsx("input",{type:"text",value:t.companyDetails.bankName||"",onChange:L=>E("companyDetails","bankName",L.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Number"}),e.jsx("input",{type:"text",value:t.companyDetails.accountNumber||"",onChange:L=>E("companyDetails","accountNumber",L.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IFSC Code"}),e.jsx("input",{type:"text",value:t.companyDetails.ifscCode||"",onChange:L=>E("companyDetails","ifscCode",L.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]})]})]}),c==="design"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Ku,{className:"w-6 h-6 text-brand-primary"}),e.jsx("h2",{className:"text-xl font-bold text-brand-primary",children:"Color Customization"})]}),e.jsxs("div",{style:A(),className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Invoice Header Preview"}),e.jsx("p",{children:"This is how your invoice header will look"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Gradient Start"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"color",value:t.colors.primaryStart,onChange:L=>E("colors","primaryStart",L.target.value),className:"w-20 h-10 rounded border border-gray-300"}),e.jsx("input",{type:"text",value:t.colors.primaryStart,onChange:L=>E("colors","primaryStart",L.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Gradient End"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"color",value:t.colors.primaryEnd,onChange:L=>E("colors","primaryEnd",L.target.value),className:"w-20 h-10 rounded border border-gray-300"}),e.jsx("input",{type:"text",value:t.colors.primaryEnd,onChange:L=>E("colors","primaryEnd",L.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency Symbol"}),e.jsx("input",{type:"text",value:t.currency||"",onChange:L=>k("currency",L.target.value),placeholder:"",maxLength:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Quick Color Presets"}),e.jsx("div",{className:"flex gap-3 flex-wrap",children:[{name:"Arctic Blue",start:"#667eea",end:"#764ba2"},{name:"Ocean Blue",start:"#2193b0",end:"#6dd5ed"},{name:"Purple",start:"#9b59b6",end:"#e74c3c"},{name:"Green",start:"#11998e",end:"#38ef7d"},{name:"Orange",start:"#f12711",end:"#f5af19"},{name:"Pink",start:"#ec008c",end:"#fc6767"}].map(L=>e.jsx("button",{onClick:()=>{E("colors","primaryStart",L.start),E("colors","primaryEnd",L.end)},className:"px-4 py-2 rounded-lg border border-gray-300 hover:border-brand-primary transition-colors",style:{background:`linear-gradient(135deg, ${L.start} 0%, ${L.end} 100%)`,color:"white"},children:L.name},L.name))})]})]})}),c==="tax"&&e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(k4,{className:"w-6 h-6 text-brand-primary"}),e.jsx("h2",{className:"text-xl font-bold text-brand-primary",children:"Tax Settings"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Rate (%)"}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx("input",{type:"range",min:"0",max:"28",step:"0.5",value:t.tax.rate,onChange:L=>E("tax","rate",parseFloat(L.target.value)),className:"flex-1"}),e.jsxs("span",{className:"font-bold text-brand-primary text-lg w-20 text-right",children:[t.tax.rate,"%"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Type"}),e.jsxs("select",{value:t.tax.type,onChange:L=>E("tax","type",L.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"IGST",children:"IGST (Inter-State)"}),e.jsx("option",{value:"CGST+SGST",children:"CGST + SGST (Intra-State)"})]})]})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Tax Calculation:"}),e.jsx("p",{className:"text-sm text-blue-700",children:t.tax.type==="IGST"?`Your invoices will show ${t.tax.rate}% IGST (Integrated GST) for inter-state sales.`:`Your invoices will show ${t.tax.rate/2}% CGST and ${t.tax.rate/2}% SGST for intra-state sales.`})]})]}),c==="terms"&&e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(gs,{className:"w-6 h-6 text-brand-primary"}),e.jsx("h2",{className:"text-xl font-bold text-brand-primary",children:"Terms & Signature"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Terms and Conditions"}),e.jsx("textarea",{rows:6,value:t.terms||"",onChange:L=>k("terms",L.target.value),placeholder:"Enter your terms and conditions...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Signature Text"}),e.jsx("input",{type:"text",value:t.signatureText||"",onChange:L=>k("signatureText",L.target.value),placeholder:"Authorized Signatory",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Preview:"}),e.jsx("p",{className:"text-gray-700 mb-4",children:t.terms}),e.jsxs("div",{className:"text-gray-600",children:[e.jsxs("div",{children:["For: ",t.companyDetails.companyName||"Your Company"]}),e.jsx("div",{className:"mt-2",children:t.signatureText})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:F,disabled:r,className:"btn-primary px-6 py-3 flex items-center gap-2",children:[e.jsx($s,{className:"w-5 h-5"}),r?"Saving...":"Save All Settings"]})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Upload Invoice Images"}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx(es,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Company Logo"}),e.jsxs("div",{className:"space-y-4",children:[m?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:m,alt:"Logo preview",className:"max-w-full h-32 object-contain border border-gray-200 rounded-lg p-2 bg-gray-50"}),e.jsx("button",{onClick:T,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:e.jsx(es,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(Xn,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No logo uploaded"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"image/*",onChange:N,disabled:h,className:"hidden",id:"logo-upload"}),e.jsxs("label",{htmlFor:"logo-upload",className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg cursor-pointer transition-colors ${h?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-brand-primary text-white hover:bg-brand-secondary"}`,children:[e.jsx(rn,{className:"w-4 h-4"}),h?"Uploading...":m?"Change Logo":"Upload Logo"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Recommended: PNG or JPG, max 5MB. Transparent background preferred."})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Authorized Signatory Photo"}),e.jsxs("div",{className:"space-y-4",children:[v?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:v,alt:"Signatory preview",className:"max-w-full h-48 object-contain border border-gray-200 rounded-lg p-2 bg-gray-50"}),e.jsx("button",{onClick:z,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:e.jsx(es,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(Xn,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No signatory photo uploaded"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"image/*",onChange:R,disabled:x,className:"hidden",id:"signatory-upload"}),e.jsxs("label",{htmlFor:"signatory-upload",className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg cursor-pointer transition-colors ${x?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-brand-primary text-white hover:bg-brand-secondary"}`,children:[e.jsx(rn,{className:"w-4 h-4"}),x?"Uploading...":v?"Change Photo":"Upload Photo"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Recommended: PNG or JPG, max 5MB. Clear signature or photo preferred."})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>p(!1),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"}),e.jsxs("button",{onClick:async()=>{await F(),p(!1)},disabled:r,className:"btn-primary px-6 py-2 flex items-center gap-2",children:[e.jsx($s,{className:"w-5 h-5"}),"Save Images"]})]})]})})]})},M8=()=>{const{notify:t}=mr(),[s,r]=b.useState([]),[a,n]=b.useState(!1),[i,l]=b.useState(""),[o,c]=b.useState("all"),[d,u]=b.useState("all"),[p,h]=b.useState(!1),[g,x]=b.useState(new Set),[f,m]=b.useState(""),[j,v]=b.useState(null),w=[0,5,12,18,28],F=(()=>{if(typeof window<"u"){const D=window.location.hostname;if(D==="thenefol.com"||D==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();b.useEffect(()=>{E();const D=Xe.subscribe("product_updated",W=>{console.log(" Product updated in Tax page:",W),E()}),P=Xe.subscribe("products_updated",W=>{console.log(" Products updated in Tax page:",W),E()});return()=>{D&&D(),P&&P()}},[]);const E=async()=>{try{n(!0);const D=await fetch(`${F}/api/products?_=${Date.now()}`,{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(!D.ok)throw new Error(`HTTP error! status: ${D.status}`);const W=(await D.json()).map(ee=>{const M=ee.details||{},U=M["GST %"]||M.gstPercent||M.gst||"0",q=parseFloat(U)||0;return{...ee,currentGSTRate:q,isEditing:!1,tempGSTRate:q.toString()}});r(W)}catch(D){console.error("Failed to load products:",D),t("error","Failed to load products")}finally{n(!1)}},k=s.filter(D=>{var M;const P=D.title.toLowerCase().includes(i.toLowerCase())||D.slug.toLowerCase().includes(i.toLowerCase())||(((M=D.details)==null?void 0:M.sku)||"").toLowerCase().includes(i.toLowerCase()),W=o==="all"||D.category===o;let ee=!0;if(d==="no-gst")ee=D.currentGSTRate===0;else if(d!=="all"){const U=parseFloat(d);ee=D.currentGSTRate===U}return P&&W&&ee}),A=Array.from(new Set(s.map(D=>D.category).filter(Boolean))),y=D=>{r(s.map(P=>P.id===D?{...P,isEditing:!0,tempGSTRate:P.currentGSTRate.toString()}:{...P,isEditing:!1}))},N=D=>{r(s.map(P=>P.id===D?{...P,isEditing:!1,tempGSTRate:P.currentGSTRate.toString()}:P))},R=(D,P)=>{r(s.map(W=>W.id===D?{...W,tempGSTRate:P}:W))},T=async D=>{const P=s.find(ee=>ee.id===D);if(!P)return;const W=parseFloat(P.tempGSTRate);if(isNaN(W)||W<0||W>100){t("error","Invalid GST rate. Please enter a value between 0 and 100");return}try{if(v(D),!(await fetch(`${F}/api/products/${D}/gst`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({gstRate:W})})).ok)throw new Error("Failed to update GST rate");r(s.map(M=>M.id===D?{...M,currentGSTRate:W,isEditing:!1,tempGSTRate:W.toString()}:M)),t("success",`GST rate updated to ${W}% for ${P.title}`)}catch(ee){console.error("Failed to save GST rate:",ee),t("error","Failed to save GST rate")}finally{v(null)}},z=D=>{const P=new Set(g);P.has(D)?P.delete(D):P.add(D),x(P)},L=()=>{g.size===k.length?x(new Set):x(new Set(k.map(D=>D.id)))},O=async()=>{if(g.size===0){t("error","Please select at least one product");return}if(!f||f==="custom"){t("error","Please select or enter a valid GST rate");return}const D=parseFloat(f);if(isNaN(D)||D<0||D>100){t("error","Invalid GST rate. Please enter a value between 0 and 100");return}try{n(!0);const P=Array.from(g).map(M=>({productId:M,gstRate:D})),W=await fetch(`${F}/api/products/bulk-update-gst`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:P})});if(!W.ok)throw new Error("Failed to bulk update GST rates");const ee=await W.json();r(s.map(M=>g.has(M.id)?{...M,currentGSTRate:D,tempGSTRate:D.toString()}:M)),x(new Set),h(!1),m(""),t("success",`GST rate updated to ${D}% for ${ee.updated} products`)}catch(P){console.error("Failed to bulk update GST rates:",P),t("error","Failed to bulk update GST rates")}finally{n(!1)}},V=async(D,P)=>{const W=s.find(ee=>ee.id===D);if(W)try{if(v(D),!(await fetch(`${F}/api/products/${D}/gst`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({gstRate:P})})).ok)throw new Error("Failed to update GST rate");r(s.map(M=>M.id===D?{...M,currentGSTRate:P,isEditing:!1,tempGSTRate:P.toString()}:M)),t("success",`GST rate set to ${P}% for ${W.title}`)}catch(ee){console.error("Failed to update GST rate:",ee),t("error","Failed to update GST rate")}finally{v(null)}},Z={total:s.length,withGST:s.filter(D=>D.currentGSTRate>0).length,noGST:s.filter(D=>D.currentGSTRate===0).length,byRate:w.reduce((D,P)=>(D[P]=s.filter(W=>W.currentGSTRate===P).length,D),{})};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Tax Management (GST)"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage GST rates for all products according to Indian GST law"})]}),e.jsx("div",{className:"flex gap-3",children:p?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{h(!1),x(new Set),m("")},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel Bulk Edit"}),e.jsxs("button",{onClick:O,disabled:g.size===0||!f||a,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:["Save Bulk Update (",g.size," products)"]})]}):e.jsxs("button",{onClick:()=>h(!0),className:"btn-primary",children:[e.jsx("span",{className:"text-lg mr-2",children:""}),"Bulk Edit GST Rates"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Products"}),e.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:Z.total})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"0% GST"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:Z.byRate[0]||0})]})})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"5% GST"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:Z.byRate[5]||0})]})})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"12% GST"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:Z.byRate[12]||0})]})})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"18% GST"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Z.byRate[18]||0})]})})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"28% GST"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:Z.byRate[28]||0})]})})})]}),p&&e.jsxs("div",{className:"metric-card bg-yellow-50 border-2 border-yellow-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Bulk Edit Mode - ",g.size," product(s) selected"]}),e.jsx("button",{onClick:L,className:"text-sm text-brand-primary hover:underline",children:g.size===k.length?"Deselect All":"Select All"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Set GST Rate (%):"}),e.jsxs("select",{value:f,onChange:D=>m(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"",children:"Select GST Rate"}),w.map(D=>e.jsxs("option",{value:D,children:[D,"% (Standard Indian GST)"]},D)),e.jsx("option",{value:"custom",children:"Custom Rate"})]}),f==="custom"||f&&!w.includes(parseFloat(f)||0)?e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",placeholder:"Enter custom GST rate",value:f==="custom"?"":f,onChange:D=>m(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary w-48",autoFocus:!0}):null]})]}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search products by name, slug, or SKU...",value:i,onChange:D=>l(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsxs("select",{value:o,onChange:D=>c(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"all",children:"All Categories"}),A.map(D=>e.jsx("option",{value:D,children:D},D))]}),e.jsxs("select",{value:d,onChange:D=>u(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"all",children:"All GST Rates"}),e.jsx("option",{value:"no-gst",children:"No GST (0%)"}),w.filter(D=>D>0).map(D=>e.jsxs("option",{value:D.toString(),children:[D,"% GST"]},D))]})]})}),e.jsx("div",{className:"metric-card",children:a&&s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading products..."})]}):k.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"No products found"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[p&&e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 w-12",children:e.jsx("input",{type:"checkbox",checked:g.size===k.length&&k.length>0,onChange:L,className:"rounded border-gray-300"})}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Product"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"SKU"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"HSN Code"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Category"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Current GST"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:k.map(D=>{var P,W;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[p&&e.jsx("td",{className:"py-3 px-4",children:e.jsx("input",{type:"checkbox",checked:g.has(D.id),onChange:()=>z(D.id),className:"rounded border-gray-300"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[D.list_image&&e.jsx("img",{src:D.list_image.startsWith("http")?D.list_image:`${F}${D.list_image}`,alt:D.title,className:"w-12 h-12 object-cover rounded",onError:ee=>{ee.target.style.display="none"}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:D.title}),e.jsx("div",{className:"text-sm text-gray-500",children:D.slug})]})]})}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:((P=D.details)==null?void 0:P.sku)||"-"}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:((W=D.details)==null?void 0:W.hsn)||"-"}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:D.category||"-"}),e.jsx("td",{className:"py-3 px-4",children:D.isEditing?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:D.tempGSTRate,onChange:ee=>R(D.id,ee.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-brand-secondary",autoFocus:!0}),e.jsx("span",{className:"text-gray-600",children:"%"}),e.jsx("button",{onClick:()=>T(D.id),disabled:j===D.id,className:"text-green-600 hover:text-green-800 disabled:opacity-50",title:"Save",children:j===D.id?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600"}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("button",{onClick:()=>N(D.id),className:"text-red-600 hover:text-red-800",title:"Cancel",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:`font-medium px-2 py-1 rounded text-sm ${D.currentGSTRate===0?"bg-green-100 text-green-800":D.currentGSTRate===5?"bg-orange-100 text-orange-800":D.currentGSTRate===12?"bg-yellow-100 text-yellow-800":D.currentGSTRate===18?"bg-purple-100 text-purple-800":D.currentGSTRate===28?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:[D.currentGSTRate,"%"]})})}),e.jsx("td",{className:"py-3 px-4",children:D.isEditing?e.jsx("div",{className:"text-sm text-gray-500",children:"Editing..."}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>y(D.id),className:"text-brand-secondary hover:text-brand-primary",title:"Edit GST Rate",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("div",{className:"flex gap-1",children:w.map(ee=>e.jsxs("button",{onClick:()=>V(D.id,ee),disabled:j===D.id||D.currentGSTRate===ee,className:`text-xs px-2 py-1 rounded ${D.currentGSTRate===ee?"bg-brand-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"} disabled:opacity-50`,title:`Quick set to ${ee}%`,children:[ee,"%"]},ee))})]})})]},D.id)})})]})})}),e.jsxs("div",{className:"metric-card bg-blue-50 border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:" Indian GST Law Information"}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"0% GST:"})," Essential items, unprocessed food, etc."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"5% GST:"})," Packaged food items, medicines, etc."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"12% GST:"})," Processed food, computers, mobile phones, etc."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"18% GST:"})," Most goods and services, cosmetics, etc."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"28% GST:"})," Luxury items, automobiles, etc."]}),e.jsx("p",{className:"mt-2 text-xs text-gray-600",children:"Note: You can also set custom GST rates as per your business requirements."})]})]})]})},B8=()=>{const{notify:t}=mr(),[s,r]=b.useState([]),[a,n]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState(null),[d,u]=b.useState(""),[p,h]=b.useState("all"),[g,x]=b.useState(!1),[f,m]=b.useState(null);b.useEffect(()=>{j()},[]);const j=async()=>{try{x(!0);const L=(()=>{if(typeof window<"u"){const V=window.location.hostname;if(V==="thenefol.com"||V==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),O=await fetch(`${L}/api/returns`,{headers:{"x-user-role":"admin","x-user-permissions":"returns:read"}});if(O.ok){const V=await O.json();r(Array.isArray(V)?V:(V==null?void 0:V.data)||[])}}catch(z){console.error("Failed to load returns:",z)}finally{x(!1)}},v=s.filter(z=>{const L=z.returnNumber.toLowerCase().includes(d.toLowerCase())||z.customerName.toLowerCase().includes(d.toLowerCase())||z.customerEmail.toLowerCase().includes(d.toLowerCase())||z.orderId.toLowerCase().includes(d.toLowerCase()),O=p==="all"||z.status===p;return L&&O}),w=z=>{switch(z){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"processing":return"bg-blue-100 text-blue-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},S=async z=>{x(!0);try{const O=(()=>{if(typeof window<"u"){const D=window.location.hostname;if(D==="thenefol.com"||D==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),V={order_id:z.orderId,items:z.items||[],reason:z.reason||""},Z=await fetch(`${O}/api/returns`,{method:"POST",headers:{"Content-Type":"application/json","x-user-role":"admin","x-user-permissions":"returns:create"},body:JSON.stringify(V)});if(Z.ok){const D=await Z.json();r([...s,(D==null?void 0:D.data)||D]),n(!1),t("success","Return created")}}catch(L){console.error("Error creating return:",L),t("error","Failed to create return")}finally{x(!1)}},F=async z=>{if(o){x(!0);try{const L=await fetch(`/api/returns/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)});if(L.ok){const O=await L.json();r(s.map(V=>V.id===o.id?O:V)),l(!1),c(null),t("success","Return updated")}}catch(L){console.error("Error updating return:",L),t("error","Failed to update return")}finally{x(!1)}}},E=async z=>{if(z){x(!0);try{const O=(()=>{if(typeof window<"u"){const Z=window.location.hostname;if(Z==="thenefol.com"||Z==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();(await fetch(`${O}/api/returns/${z}`,{method:"DELETE"})).ok&&(r(s.filter(Z=>Z.id!==z)),t("success","Return deleted"))}catch(L){console.error("Error deleting return:",L),t("error","Failed to delete return")}finally{x(!1)}}},k=async(z,L)=>{x(!0);try{const V=(()=>{if(typeof window<"u"){const D=window.location.hostname;if(D==="thenefol.com"||D==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();(await fetch(`${V}/api/returns/${z}/status`,{method:"PUT",headers:{"Content-Type":"application/json","x-user-role":"admin","x-user-permissions":"returns:update"},body:JSON.stringify({status:L})})).ok&&r(s.map(D=>D.id===z?{...D,status:L,updatedAt:new Date().toISOString()}:D))}catch(O){console.error("Error updating return status:",O)}finally{x(!1)}},A=async z=>{var L;try{const V=(()=>{if(typeof window<"u"){const P=window.location.hostname;if(P==="thenefol.com"||P==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),Z=await fetch(`${V}/api/returns/${z}/label`,{method:"POST",headers:{"x-user-role":"admin","x-user-permissions":"returns:update"}}),D=await Z.json();if(!Z.ok)throw new Error((D==null?void 0:D.error)||"Failed to generate label");alert(`Return Label: ${((L=D==null?void 0:D.data)==null?void 0:L.label_url)||(D==null?void 0:D.label_url)}`)}catch(O){alert((O==null?void 0:O.message)||"Failed to generate label")}},y=s.length,N=s.filter(z=>z.status==="pending").length,R=s.reduce((z,L)=>z+L.refundAmount,0),T=y>0?R/y:0;return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Returns Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Process customer returns and refunds"})]}),e.jsxs("button",{onClick:()=>n(!0),className:"btn-primary",children:[e.jsx("span",{className:"text-lg mr-2",children:""}),"Process Return"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Total Returns"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--arctic-blue-primary-dark)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:y})]}),e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:"var(--arctic-blue-light)"},children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Pending Returns"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"#D97706",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:N})]}),e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:"#FEF3C7"},children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Total Refunds"}),e.jsxs("p",{className:"text-2xl font-light",style:{color:"#DC2626",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:["",R.toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:"#FEE2E2"},children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Avg Refund"}),e.jsxs("p",{className:"text-2xl font-light",style:{color:"var(--arctic-blue-primary-dark)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:["",T.toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:"var(--arctic-blue-light)"},children:e.jsx("span",{className:"text-2xl",children:""})})]})})]}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search returns...",value:d,onChange:z=>u(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsxs("select",{value:p,onChange:z=>h(z.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Return #"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Order ID"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Customer"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Reason"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Amount"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Created"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:v.map(z=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx(jn,{to:`/admin/returns/${z.id}`,className:"text-brand-primary hover:underline font-medium",children:z.returnNumber})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(jn,{to:`/admin/orders/${z.orderId}`,className:"text-brand-primary hover:underline",children:z.orderId})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:z.customerName}),e.jsx("p",{className:"text-sm text-gray-500",children:z.customerEmail})]})}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:z.reason}),e.jsxs("td",{className:"py-3 px-4 font-medium",children:["$",z.refundAmount.toFixed(2)]}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w(z.status)}`,children:z.status.charAt(0).toUpperCase()+z.status.slice(1)})}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:z.createdAt}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{c(z),l(!0)},className:"text-brand-secondary hover:text-brand-primary",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),z.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>k(z.id,"approved"),className:"text-green-600 hover:text-green-800",title:"Approve",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("button",{onClick:()=>k(z.id,"rejected"),className:"text-red-600 hover:text-red-800",title:"Reject",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),z.status==="approved"&&e.jsx("button",{onClick:()=>k(z.id,"processing"),className:"text-blue-600 hover:text-blue-800",title:"Start Processing",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h8m-9-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),z.status==="processing"&&e.jsx("button",{onClick:()=>k(z.id,"completed"),className:"text-green-600 hover:text-green-800",title:"Mark Complete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("button",{onClick:()=>A(z.id),className:"text-indigo-600 hover:text-indigo-800",title:"Generate Return Label",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v8m4-4H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("button",{onClick:()=>m(z.id),className:"text-red-600 hover:text-red-800",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},z.id))})]})})}),e.jsx(Va,{open:!!f,onClose:()=>m(null),onConfirm:()=>{f&&E(f)},title:"Delete this return?",description:"This action cannot be undone.",confirmText:"Delete"}),a&&e.jsx($8,{onClose:()=>n(!1),onSubmit:S,loading:g}),i&&o&&e.jsx(U8,{returnItem:o,onClose:()=>{l(!1),c(null)},onSubmit:F,loading:g})]})},$8=({onClose:t,onSubmit:s,loading:r})=>{const[a,n]=b.useState({orderId:"",customerName:"",customerEmail:"",reason:"",notes:"",items:[{productName:"",quantity:1,reason:"",condition:"new",refundAmount:0}]}),i=l=>{l.preventDefault();const o=a.items.reduce((d,u)=>d+u.refundAmount,0),c={...a,returnNumber:`RET-${Date.now()}`,status:"pending",totalAmount:o,refundAmount:o,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),items:a.items.map((d,u)=>({...d,id:`item-${Date.now()}-${u}`}))};s(c)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Process Return"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order ID"}),e.jsx("input",{type:"text",required:!0,value:a.orderId,onChange:l=>n({...a,orderId:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),e.jsx("input",{type:"text",required:!0,value:a.customerName,onChange:l=>n({...a,customerName:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Email"}),e.jsx("input",{type:"email",required:!0,value:a.customerEmail,onChange:l=>n({...a,customerEmail:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason"}),e.jsxs("select",{required:!0,value:a.reason,onChange:l=>n({...a,reason:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"",children:"Select reason"}),e.jsx("option",{value:"Product defect",children:"Product defect"}),e.jsx("option",{value:"Wrong size",children:"Wrong size"}),e.jsx("option",{value:"Changed mind",children:"Changed mind"}),e.jsx("option",{value:"Not as described",children:"Not as described"}),e.jsx("option",{value:"Damaged in shipping",children:"Damaged in shipping"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:a.notes,onChange:l=>n({...a,notes:l.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Return Items"}),a.items.map((l,o)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4 p-4 border border-gray-200 rounded-lg",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Product Name",value:l.productName,onChange:c=>{const d=[...a.items];d[o].productName=c.target.value,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsx("div",{children:e.jsx("input",{type:"number",placeholder:"Quantity",min:"1",value:l.quantity,onChange:c=>{const d=[...a.items];d[o].quantity=parseInt(c.target.value)||1,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsx("div",{children:e.jsxs("select",{value:l.condition,onChange:c=>{const d=[...a.items];d[o].condition=c.target.value,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"used",children:"Used"}),e.jsx("option",{value:"damaged",children:"Damaged"})]})}),e.jsx("div",{children:e.jsx("input",{type:"number",placeholder:"Refund Amount",min:"0",step:"0.01",value:l.refundAmount,onChange:c=>{const d=[...a.items];d[o].refundAmount=parseFloat(c.target.value)||0,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})})]},o)),e.jsx("button",{type:"button",onClick:()=>n({...a,items:[...a.items,{productName:"",quantity:1,reason:"",condition:"new",refundAmount:0}]}),className:"text-brand-secondary hover:text-brand-primary",children:"+ Add Item"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r,className:"btn-primary",children:r?"Processing...":"Process Return"})]})]})]})})},U8=({returnItem:t,onClose:s,onSubmit:r,loading:a})=>{const[n,i]=b.useState({status:t.status,notes:t.notes||""}),l=o=>{o.preventDefault();const c={...n,updatedAt:new Date().toISOString()};r(c)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Edit Return"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:n.status,onChange:o=>i({...n,status:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:n.notes,onChange:o=>i({...n,notes:o.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"btn-primary",children:a?"Updating...":"Update Return"})]})]})]})})},z8=()=>{const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!1),[l,o]=b.useState(!1),[c,d]=b.useState(null),[u,p]=b.useState(""),[h,g]=b.useState("all"),[x,f]=b.useState(!1),[m,j]=b.useState(null);b.useEffect(()=>{v()},[]);const v=async()=>{try{f(!0);const O=(()=>{if(typeof window<"u"){const P=window.location.hostname;if(P==="thenefol.com"||P==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),[V,Z,D]=await Promise.all([fetch(`${O}/api/payment-methods`),fetch(`${O}/api/payment-transactions`),fetch(`${O}/api/payment-report`)]);if(V.ok){const P=await V.json();s(P)}if(Z.ok){const P=await Z.json();a(P)}if(D.ok){const P=await D.json();j(P)}}catch(L){console.error("Failed to load payment data:",L)}finally{f(!1)}},w=r.filter(L=>{const O=(L.transactionId||"").toLowerCase().includes(u.toLowerCase())||(L.customerName||"").toLowerCase().includes(u.toLowerCase())||(L.orderId||"").toLowerCase().includes(u.toLowerCase()),V=h==="all"||L.status===h;return O&&V}),S=L=>{switch(L){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case"refunded":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},F=async L=>{f(!0);try{const O=await fetch("/api/payment-methods",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(O.ok){const V=await O.json();s([...t,V]),i(!1)}}catch(O){console.error("Error creating payment method:",O)}finally{f(!1)}},E=async L=>{if(c){f(!0);try{const O=await fetch(`/api/payment-methods/${c.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(O.ok){const V=await O.json();s(t.map(Z=>Z.id===c.id?V:Z)),o(!1),d(null)}}catch(O){console.error("Error updating payment method:",O)}finally{f(!1)}}},k=async L=>{if(confirm("Are you sure you want to delete this payment method?")){f(!0);try{(await fetch(`/api/payment-methods/${L}`,{method:"DELETE"})).ok&&s(t.filter(V=>V.id!==L))}catch(O){console.error("Error deleting payment method:",O)}finally{f(!1)}}},A=async L=>{f(!0);try{const O=t.find(Z=>Z.id===L);if(!O)return;(await fetch(`/api/payment-methods/${L}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!O.isActive})})).ok&&s(t.map(Z=>Z.id===L?{...Z,isActive:!Z.isActive}:Z))}catch(O){console.error("Error toggling payment method:",O)}finally{f(!1)}},y=t.filter(L=>L.isActive),N=r.length,R=r.filter(L=>L.status==="completed").length,T=r.reduce((L,O)=>L+O.amount,0),z=N>0?R/N*100:0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-brand-primary",children:"Payment Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure payment methods and monitor transactions"})]}),e.jsxs("button",{onClick:()=>i(!0),className:"btn-primary",children:[e.jsx("span",{className:"text-lg mr-2",children:""}),"Add Payment Method"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Methods"}),e.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:y.length})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Transactions"}),e.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:N})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[z.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-brand-primary",children:["$",T.toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})})]}),m&&e.jsxs("div",{className:"metric-card",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Payment Report - ",m.period]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Transactions"}),e.jsx("span",{className:"font-semibold",children:m.totalTransactions})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Successful"}),e.jsx("span",{className:"font-semibold text-green-600",children:m.successfulTransactions})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Failed"}),e.jsx("span",{className:"font-semibold text-red-600",children:m.failedTransactions})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Average Amount"}),e.jsxs("span",{className:"font-semibold",children:["$",m.averageTransactionAmount.toFixed(2)]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Payment Method Breakdown"}),m.paymentMethodBreakdown.map((L,O)=>e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600",children:L.method}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-sm font-medium",children:["$",L.amount.toFixed(2)]}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",L.count,")"]})]})]},O))]})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Methods"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(L=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:L.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:L.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("p",{children:["Fee: ",L.processingFee,"%"]}),e.jsxs("p",{children:["Min: $",L.minimumAmount]}),e.jsxs("p",{children:["Max: $",L.maximumAmount]}),e.jsxs("p",{children:["Currencies: ",(L.supportedCurrencies||[]).join(", ")]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsx("button",{onClick:()=>{d(L),o(!0)},className:"text-brand-secondary hover:text-brand-primary",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>A(L.id),className:`${L.isActive?"text-orange-600 hover:text-orange-800":"text-green-600 hover:text-green-800"}`,title:L.isActive?"Deactivate":"Activate",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})}),e.jsx("button",{onClick:()=>k(L.id),className:"text-red-600 hover:text-red-800",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},L.id))})]}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search transactions...",value:u,onChange:L=>p(L.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsxs("select",{value:h,onChange:L=>g(L.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"refunded",children:"Refunded"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Transaction ID"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Order ID"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Customer"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Amount"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Method"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Created"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:w.map(L=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:L.transactionId}),e.jsx("td",{className:"py-3 px-4 text-brand-primary",children:L.orderId}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:L.customerName}),e.jsxs("td",{className:"py-3 px-4 font-medium",children:["$",L.amount.toFixed(2)," ",L.currency]}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:L.paymentMethod}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S(L.status)}`,children:L.status.charAt(0).toUpperCase()+L.status.slice(1)})}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:L.createdAt}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[L.status==="completed"&&e.jsx("button",{onClick:()=>{console.log("Process refund for",L.id)},className:"text-blue-600 hover:text-blue-800",title:"Process Refund",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})}),e.jsx("button",{onClick:()=>{console.log("View details for",L.id)},className:"text-brand-secondary hover:text-brand-primary",title:"View Details",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})})]},L.id))})]})})}),n&&e.jsx(W8,{onClose:()=>i(!1),onSubmit:F,loading:x}),l&&c&&e.jsx(V8,{paymentMethod:c,onClose:()=>{o(!1),d(null)},onSubmit:E,loading:x})]})},W8=({onClose:t,onSubmit:s,loading:r})=>{const[a,n]=b.useState({name:"",type:"credit_card",processingFee:0,minimumAmount:1,maximumAmount:1e4,supportedCurrencies:["USD"],isActive:!0}),i=l=>{l.preventDefault();const o={...a,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};s(o)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Add Payment Method"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method Name"}),e.jsx("input",{type:"text",required:!0,value:a.name,onChange:l=>n({...a,name:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:a.type,onChange:l=>n({...a,type:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"credit_card",children:"Credit Card"}),e.jsx("option",{value:"debit_card",children:"Debit Card"}),e.jsx("option",{value:"paypal",children:"PayPal"}),e.jsx("option",{value:"stripe",children:"Stripe"}),e.jsx("option",{value:"razorpay",children:"Razorpay"}),e.jsx("option",{value:"cash_on_delivery",children:"Cash on Delivery"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Processing Fee (%)"}),e.jsx("input",{type:"number",required:!0,min:"0",step:"0.1",value:a.processingFee,onChange:l=>n({...a,processingFee:parseFloat(l.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Amount"}),e.jsx("input",{type:"number",required:!0,min:"0",value:a.minimumAmount,onChange:l=>n({...a,minimumAmount:parseFloat(l.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Amount"}),e.jsx("input",{type:"number",required:!0,min:"0",value:a.maximumAmount,onChange:l=>n({...a,maximumAmount:parseFloat(l.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:a.isActive,onChange:l=>n({...a,isActive:l.target.checked}),className:"h-4 w-4 text-brand-secondary focus:ring-brand-secondary border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r,className:"btn-primary",children:r?"Creating...":"Create Payment Method"})]})]})]})})},V8=({paymentMethod:t,onClose:s,onSubmit:r,loading:a})=>{const[n,i]=b.useState({name:t.name,processingFee:t.processingFee,minimumAmount:t.minimumAmount,maximumAmount:t.maximumAmount,isActive:t.isActive}),l=o=>{o.preventDefault();const c={...n,updatedAt:new Date().toISOString()};r(c)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Edit Payment Method"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method Name"}),e.jsx("input",{type:"text",required:!0,value:n.name,onChange:o=>i({...n,name:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Processing Fee (%)"}),e.jsx("input",{type:"number",required:!0,min:"0",step:"0.1",value:n.processingFee,onChange:o=>i({...n,processingFee:parseFloat(o.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Amount"}),e.jsx("input",{type:"number",required:!0,min:"0",value:n.minimumAmount,onChange:o=>i({...n,minimumAmount:parseFloat(o.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Amount"}),e.jsx("input",{type:"number",required:!0,min:"0",value:n.maximumAmount,onChange:o=>i({...n,maximumAmount:parseFloat(o.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:n.isActive,onChange:o=>i({...n,isActive:o.target.checked}),className:"h-4 w-4 text-brand-secondary focus:ring-brand-secondary border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"btn-primary",children:a?"Updating...":"Update Payment Method"})]})]})]})})},H8=()=>{var u;const{user:t}=Uo(),{notify:s}=mr(),[r,a]=b.useState({currentPassword:"",newPassword:"",confirmNewPassword:""}),[n,i]=b.useState(!1),[l,o]=b.useState(null),c=p=>{const{name:h,value:g}=p.target;a(x=>({...x,[h]:g}))},d=async p=>{if(p.preventDefault(),o(null),r.newPassword.length<8){o("New password must be at least 8 characters long.");return}if(r.newPassword!==r.confirmNewPassword){o("New password and confirmation do not match.");return}i(!0);try{await en.changePassword(r.currentPassword,r.newPassword,r.confirmNewPassword),s("success","Password updated successfully"),a({currentPassword:"",newPassword:"",confirmNewPassword:""})}catch(h){const g=(h==null?void 0:h.message)||"Failed to update password";o(g),s("error",g)}finally{i(!1)}};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Account Security"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Manage your admin credentials and keep your account secure."})]}),e.jsxs("div",{className:"grid gap-8 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow border border-gray-100 dark:border-gray-800 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Reset Password"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Enter your current password, then choose a strong new password. All other active sessions will be revoked automatically."}),e.jsxs("form",{className:"space-y-4",onSubmit:d,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Current Password"}),e.jsx("input",{type:"password",name:"currentPassword",value:r.currentPassword,onChange:c,required:!0,className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 px-3 py-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password"}),e.jsx("input",{type:"password",name:"newPassword",value:r.newPassword,onChange:c,required:!0,minLength:8,className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 px-3 py-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm New Password"}),e.jsx("input",{type:"password",name:"confirmNewPassword",value:r.confirmNewPassword,onChange:c,required:!0,className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 px-3 py-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),l&&e.jsx("div",{className:"rounded-lg bg-red-50 text-red-700 px-4 py-3 text-sm",children:l}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Updating...":"Update Password"})})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow border border-gray-100 dark:border-gray-800 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Account Details"}),e.jsxs("dl",{className:"mt-4 space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"Name"}),e.jsx("dd",{className:"font-medium text-gray-900 dark:text-white",children:t==null?void 0:t.name})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("dd",{className:"font-medium text-gray-900 dark:text-white",children:t==null?void 0:t.email})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"Role"}),e.jsx("dd",{className:"font-medium text-gray-900 dark:text-white",children:t==null?void 0:t.role})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"Permissions"}),e.jsx("dd",{className:"font-medium text-gray-900 dark:text-white",children:(u=t==null?void 0:t.permissions)!=null&&u.length?t.permissions.join(", "):"No permissions assigned"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 rounded-xl border border-blue-100 dark:border-blue-800 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100",children:"Security Tips"}),e.jsxs("ul",{className:"mt-4 text-sm text-blue-900/80 dark:text-blue-100/80 space-y-2",children:[e.jsx("li",{children:" Use a unique password that you dont reuse elsewhere."}),e.jsx("li",{children:" Update your password every few months."}),e.jsx("li",{children:" Log out from shared devices after use."})]})]})]})]})]})},G8=Dn();class q8{constructor(){Ca(this,"baseURL");this.baseURL=G8}async apiCall(s,r={}){try{const a=localStorage.getItem("admin_token"),n=await fetch(`${this.baseURL}${s}`,{...r,headers:{"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`},...r.headers}}),i=await n.json();return n.ok?{success:!0,data:i.data||i,message:i.message}:{success:!1,error:i.message||"API call failed"}}catch(a){return console.error("API call error:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async getUserProfiles(s=1,r=10,a=""){return this.apiCall(`/admin/users/profiles?page=${s}&limit=${r}&search=${a}`)}async getUserProfile(s){return this.apiCall(`/admin/users/profiles/${s}`)}async updateUserProfile(s,r){return this.apiCall(`/admin/users/profiles/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteUserProfile(s){return this.apiCall(`/admin/users/profiles/${s}`,{method:"DELETE"})}async getNotifications(s=1,r=10,a={}){const n=new URLSearchParams({page:s.toString(),limit:r.toString(),...a});return this.apiCall(`/admin/notifications?${n}`)}async createNotification(s){return this.apiCall("/admin/notifications",{method:"POST",body:JSON.stringify(s)})}async updateNotification(s,r){return this.apiCall(`/admin/notifications/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteNotification(s){return this.apiCall(`/admin/notifications/${s}`,{method:"DELETE"})}async sendNotification(s){return this.apiCall(`/admin/notifications/${s}/send`,{method:"POST"})}async getLoyaltyPrograms(){return this.apiCall("/admin/loyalty/programs")}async createLoyaltyProgram(s){return this.apiCall("/admin/loyalty/programs",{method:"POST",body:JSON.stringify(s)})}async updateLoyaltyProgram(s,r){return this.apiCall(`/admin/loyalty/programs/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteLoyaltyProgram(s){return this.apiCall(`/admin/loyalty/programs/${s}`,{method:"DELETE"})}async getLoyaltyTiers(){return this.apiCall("/admin/loyalty/tiers")}async getLoyaltyUsers(s=1,r=10){return this.apiCall(`/admin/loyalty/users?page=${s}&limit=${r}`)}async adjustUserPoints(s,r,a){return this.apiCall(`/admin/loyalty/users/${s}/adjust`,{method:"POST",body:JSON.stringify({points:r,reason:a})})}async getStaticPages(){return this.apiCall("/admin/static-pages")}async createStaticPage(s){return this.apiCall("/admin/static-pages",{method:"POST",body:JSON.stringify(s)})}async updateStaticPage(s,r){return this.apiCall(`/admin/static-pages/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteStaticPage(s){return this.apiCall(`/admin/static-pages/${s}`,{method:"DELETE"})}async toggleStaticPageStatus(s,r){return this.apiCall(`/admin/static-pages/${s}/toggle`,{method:"PUT",body:JSON.stringify({is_active:r})})}async getCommunityPosts(s=1,r=10,a={}){const n=new URLSearchParams({page:s.toString(),limit:r.toString(),...a});return this.apiCall(`/admin/community/posts?${n}`)}async getCommunityComments(s=1,r=10,a={}){const n=new URLSearchParams({page:s.toString(),limit:r.toString(),...a});return this.apiCall(`/admin/community/comments?${n}`)}async updatePostStatus(s,r){return this.apiCall(`/admin/community/posts/${s}/status`,{method:"PUT",body:JSON.stringify({status:r})})}async updateCommentStatus(s,r){return this.apiCall(`/admin/community/comments/${s}/status`,{method:"PUT",body:JSON.stringify({status:r})})}async deletePost(s){return this.apiCall(`/admin/community/posts/${s}`,{method:"DELETE"})}async deleteComment(s){return this.apiCall(`/admin/community/comments/${s}`,{method:"DELETE"})}async getCartItems(s=1,r=10,a={}){const n=new URLSearchParams({page:s.toString(),limit:r.toString(),...a});return this.apiCall(`/admin/cart/items?${n}`)}async updateCartItemQuantity(s,r){return this.apiCall(`/admin/cart/items/${s}`,{method:"PUT",body:JSON.stringify({quantity:r})})}async removeCartItem(s){return this.apiCall(`/admin/cart/items/${s}`,{method:"DELETE"})}async getCheckoutSessions(s=1,r=10,a={}){const n=new URLSearchParams({page:s.toString(),limit:r.toString(),...a});return this.apiCall(`/admin/checkout/sessions?${n}`)}async updateSessionStatus(s,r){return this.apiCall(`/admin/checkout/sessions/${s}/status`,{method:"PUT",body:JSON.stringify({status:r})})}async getDashboardStats(){return this.apiCall("/admin/dashboard/stats")}async getUserAnalytics(s="30d"){return this.apiCall(`/admin/analytics/users?range=${s}`)}async getOrderAnalytics(s="30d"){return this.apiCall(`/admin/analytics/orders?range=${s}`)}async getRevenueAnalytics(s="30d"){return this.apiCall(`/admin/analytics/revenue?range=${s}`)}async subscribeToUpdates(s){console.log("Subscribing to real-time updates...")}async unsubscribeFromUpdates(){console.log("Unsubscribing from real-time updates...")}async bulkUpdateUserStatus(s,r){return this.apiCall("/admin/users/bulk-status",{method:"PUT",body:JSON.stringify({userIds:s,status:r})})}async bulkSendNotifications(s,r){return this.apiCall("/admin/notifications/bulk-send",{method:"POST",body:JSON.stringify({userIds:s,notificationData:r})})}async bulkDeletePosts(s){return this.apiCall("/admin/community/posts/bulk-delete",{method:"DELETE",body:JSON.stringify({postIds:s})})}async exportUserData(s="csv"){return this.apiCall(`/admin/users/export?format=${s}`)}async importUserData(s){const r=new FormData;return r.append("file",s),this.apiCall("/admin/users/import",{method:"POST",body:r,headers:{}})}async getSystemHealth(){return this.apiCall("/admin/system/health")}async getApiStatus(){return this.apiCall("/admin/system/api-status")}}const Gp=new q8;function J8(){const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(""),[l,o]=b.useState("all"),[c,d]=b.useState(null),[u,p]=b.useState(!1),[h,g]=b.useState(!1);b.useEffect(()=>{x()},[]);const x=async()=>{try{a(!0);const S=await Gp.getUserProfiles();S.success&&S.data?s(S.data.profiles||[]):(console.error("Failed to fetch user profiles:",S.error),s([]))}catch(S){console.error("Error fetching user profiles:",S),s([])}finally{a(!1)}},f=t.filter(S=>{const F=S.name.toLowerCase().includes(n.toLowerCase())||S.email.toLowerCase().includes(n.toLowerCase()),E=l==="all"||l==="verified"&&S.is_verified||l==="unverified"&&!S.is_verified;return F&&E}),m=S=>{d(S),p(!0)},j=S=>{d(S),g(!0)},v=async S=>{if(confirm("Are you sure you want to delete this user profile?"))try{(await fetch(`/api/admin/users/profiles/${S}`,{method:"DELETE"})).ok?s(t.filter(E=>E.id!==S)):alert("Failed to delete profile")}catch(F){console.error("Error deleting profile:",F),alert("Error deleting profile")}},w=async S=>{try{const F=await Gp.updateUserProfile(S.id,S);F.success?(s(t.map(E=>E.id===S.id?S:E)),p(!1),d(null)):alert("Failed to update profile: "+F.error)}catch(F){console.error("Error updating profile:",F),alert("Error updating profile")}};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"User Profiles Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage user profiles, preferences, and account settings"})]}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:n,onChange:S=>i(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("select",{value:l,onChange:S=>o(S.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Users"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"unverified",children:"Unverified"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(ct,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(xr,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Verified Users"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(S=>S.is_verified).length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(li,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.reduce((S,F)=>S+F.total_orders,0)})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(xr,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Loyalty Points"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.reduce((S,F)=>S+F.loyalty_points,0)})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Orders"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Loyalty Points"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Member Since"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:f.map(S=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-full",src:S.profile_photo||"/default-avatar.png",alt:S.name})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:S.name}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",S.id]})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:S.email}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:S.phone})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${S.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:S.is_verified?"Verified":"Unverified"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:S.total_orders}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:S.loyalty_points}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(S.member_since).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>j(S),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(ct,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>m(S),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:e.jsx(jr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>v(S.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},S.id))})]})})}),u&&c&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Edit User Profile"}),e.jsxs("form",{onSubmit:S=>{S.preventDefault(),w(c)},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name"}),e.jsx("input",{type:"text",value:c.name,onChange:S=>d({...c,name:S.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),e.jsx("input",{type:"email",value:c.email,onChange:S=>d({...c,email:S.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Phone"}),e.jsx("input",{type:"tel",value:c.phone,onChange:S=>d({...c,phone:S.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Loyalty Points"}),e.jsx("input",{type:"number",value:c.loyalty_points,onChange:S=>d({...c,loyalty_points:parseInt(S.target.value)||0}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.is_verified,onChange:S=>d({...c,is_verified:S.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-900 dark:text-white",children:"Verified User"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Update Profile"})]})]})]})})}),h&&c&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"User Profile Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{className:"h-16 w-16 rounded-full",src:c.profile_photo||"/default-avatar.png",alt:c.name}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:c.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Member since ",new Date(c.member_since).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:c.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Phone"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:c.phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Orders"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:c.total_orders})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Loyalty Points"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:c.loyalty_points})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Address"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[c.address.street,", ",c.address.city,", ",c.address.state," ",c.address.zip]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Preferences"}),e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[e.jsxs("p",{children:["Theme: ",c.preferences.theme]}),e.jsxs("p",{children:["Notifications: ",c.preferences.notifications?"Enabled":"Disabled"]}),e.jsxs("p",{children:["Newsletter: ",c.preferences.newsletter?"Subscribed":"Not Subscribed"]})]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Close"})})]})})})]})}function K8(){const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(""),[l,o]=b.useState("all"),[c,d]=b.useState("all"),[u,p]=b.useState(null),[h,g]=b.useState(!1),[x,f]=b.useState(!1),[m,j]=b.useState(!1);b.useEffect(()=>{v()},[]);const v=async()=>{try{a(!0);const T=await fetch("/api/admin/notifications");if(T.ok){const z=await T.json();s(z.notifications||[])}else console.error("Failed to fetch notifications"),s([])}catch(T){console.error("Error fetching notifications:",T),s([])}finally{a(!1)}},w=t.filter(T=>{const z=T.title.toLowerCase().includes(n.toLowerCase())||T.user_name.toLowerCase().includes(n.toLowerCase())||T.message.toLowerCase().includes(n.toLowerCase()),L=l==="all"||T.type===l,O=c==="all"||T.status===c;return z&&L&&O}),S=async T=>{try{const z=await fetch("/api/admin/notifications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)});if(z.ok){const L=await z.json();s([L,...t]),g(!1)}else alert("Failed to create notification")}catch(z){console.error("Error creating notification:",z),alert("Error creating notification")}},F=T=>{p(T),f(!0)},E=T=>{p(T),j(!0)},k=async T=>{if(confirm("Are you sure you want to delete this notification?"))try{(await fetch(`/api/admin/notifications/${T}`,{method:"DELETE"})).ok?s(t.filter(L=>L.id!==T)):alert("Failed to delete notification")}catch(z){console.error("Error deleting notification:",z),alert("Error deleting notification")}},A=async T=>{try{(await fetch(`/api/admin/notifications/${T}/send`,{method:"POST"})).ok?s(t.map(L=>L.id===T?{...L,status:"sent",sent_at:new Date().toISOString()}:L)):alert("Failed to send notification")}catch(z){console.error("Error sending notification:",z),alert("Error sending notification")}},y=T=>{switch(T){case"order":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"promotion":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"system":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";case"loyalty":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"affiliate":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},N=T=>{switch(T){case"sent":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"failed":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},R=T=>{switch(T){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"User Notifications Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage and send notifications to users"})]}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search notifications...",value:n,onChange:T=>i(T.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("select",{value:l,onChange:T=>o(T.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"order",children:"Order"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"system",children:"System"}),e.jsx("option",{value:"loyalty",children:"Loyalty"}),e.jsx("option",{value:"affiliate",children:"Affiliate"})]}),e.jsxs("select",{value:c,onChange:T=>d(T.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsxs("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500",children:[e.jsx(ra,{className:"h-4 w-4 inline mr-2"}),"Send Notification"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(Oa,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Notifications"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(ra,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Sent"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(T=>T.status==="sent").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(Mr,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(T=>T.status==="pending").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900 rounded-lg",children:e.jsx(ss,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Failed"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(T=>T.status==="failed").length})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Notification"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:w.map(T=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center",children:e.jsx(ga,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:T.user_name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:T.user_email})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:T.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:T.message})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y(T.type)}`,children:T.type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${R(T.priority)}`,children:T.priority})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N(T.status)}`,children:T.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(T.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>E(T),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(ct,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>F(T),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:e.jsx(jr,{className:"h-4 w-4"})}),T.status==="pending"&&e.jsx("button",{onClick:()=>A(T.id),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:e.jsx(ra,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>k(T.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},T.id))})]})})}),h&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Send New Notification"}),e.jsxs("form",{onSubmit:T=>{T.preventDefault();const z=new FormData(T.target);S({user_id:parseInt(z.get("user_id")),title:z.get("title"),message:z.get("message"),type:z.get("type"),priority:z.get("priority"),status:"pending"})},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"User ID"}),e.jsx("input",{type:"number",name:"user_id",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Title"}),e.jsx("input",{type:"text",name:"title",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Message"}),e.jsx("textarea",{name:"message",rows:3,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Type"}),e.jsxs("select",{name:"type",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"order",children:"Order"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"system",children:"System"}),e.jsx("option",{value:"loyalty",children:"Loyalty"}),e.jsx("option",{value:"affiliate",children:"Affiliate"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Priority"}),e.jsxs("select",{name:"priority",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Send Notification"})]})]})]})})}),m&&u&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Notification Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"User"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[u.user_name," (",u.user_email,")"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Title"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:u.title})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Message"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:u.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Type"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y(u.type)}`,children:u.type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Priority"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${R(u.priority)}`,children:u.priority})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N(u.status)}`,children:u.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Created"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(u.created_at).toLocaleString()})]}),u.sent_at&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Sent At"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(u.sent_at).toLocaleString()})]}),u.read_at&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Read At"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(u.read_at).toLocaleString()})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Close"})})]})})})]})}function Y8(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState(!0),[c,d]=b.useState(""),[u,p]=b.useState("programs"),[h,g]=b.useState(null),[x,f]=b.useState(null),[m,j]=b.useState(!1),[v,w]=b.useState(!1);b.useEffect(()=>{S()},[]);const S=async()=>{try{o(!0);const[y,N,R]=await Promise.all([fetch("/api/admin/loyalty/programs"),fetch("/api/admin/loyalty/tiers"),fetch("/api/admin/loyalty/users")]);if(y.ok){const T=await y.json();s(T.programs||[])}if(N.ok){const T=await N.json();a(T.tiers||[])}if(R.ok){const T=await R.json();i(T.users||[])}}catch(y){console.error("Error fetching loyalty data:",y)}finally{o(!1)}},F=async y=>{try{const N=await fetch("/api/admin/loyalty/programs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(N.ok){const R=await N.json();s([R,...t]),j(!1)}else alert("Failed to create loyalty program")}catch(N){console.error("Error creating loyalty program:",N),alert("Error creating loyalty program")}},E=async y=>{if(confirm("Are you sure you want to delete this loyalty program?"))try{(await fetch(`/api/admin/loyalty/programs/${y}`,{method:"DELETE"})).ok?s(t.filter(R=>R.id!==y)):alert("Failed to delete loyalty program")}catch(N){console.error("Error deleting loyalty program:",N),alert("Error deleting loyalty program")}},k=async(y,N,R)=>{try{(await fetch(`/api/admin/loyalty/users/${y}/adjust`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({points:N,reason:R})})).ok?S():alert("Failed to adjust user points")}catch(T){console.error("Error adjusting user points:",T),alert("Error adjusting user points")}},A=n.filter(y=>y.user_name.toLowerCase().includes(c.toLowerCase())||y.user_email.toLowerCase().includes(c.toLowerCase()));return l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Loyalty Program Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage loyalty programs, tiers, and user points"})]}),e.jsx("div",{children:e.jsx("div",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"programs",label:"Loyalty Programs",icon:T0},{id:"tiers",label:"Tiers",icon:Af},{id:"users",label:"User Points",icon:Pt}].map(y=>e.jsxs("button",{onClick:()=>p(y.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm transition-colors ${u===y.id?"":"border-transparent"}`,style:u===y.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx(y.icon,{className:"h-4 w-4 mr-2"}),y.label]},y.id))})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(T0,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Programs"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(y=>y.is_active).length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(Af,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Loyalty Tiers"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(xr,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Points"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:n.reduce((y,N)=>y+N.total_points,0)})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(zt,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:n.filter(y=>y.total_points>0).length})]})]})})]}),u==="programs"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search loyalty programs...",value:c,onChange:y=>d(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("button",{onClick:()=>j(!0),className:"ml-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500",children:[e.jsx(T0,{className:"h-4 w-4 inline mr-2"}),"Create Program"]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Program"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Points Rate"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Min Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Expiry"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:y.name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:y.description})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[y.points_per_rupee," pts/"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["",y.min_order_amount]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[y.expiry_days," days"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:y.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{g(y),w(!0)},className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:e.jsx(jr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>E(y.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},y.id))})]})})})]}),u==="users"&&e.jsxs("div",{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:c,onChange:y=>d(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total Points"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Available Points"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Redeemed Points"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Tier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Next Tier"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:A.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:y.user_name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:y.user_email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:y.total_points}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:y.available_points}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:y.redeemed_points}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:y.tier})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[y.next_tier_points," pts"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:()=>{const N=prompt("Enter points to adjust (positive to add, negative to subtract):"),R=prompt("Enter reason for adjustment:");N&&R&&k(y.user_id,parseInt(N),R)},className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:e.jsx(jr,{className:"h-4 w-4"})})})]},y.user_id))})]})})})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Create Loyalty Program"}),e.jsxs("form",{onSubmit:y=>{y.preventDefault();const N=new FormData(y.target);F({name:N.get("name"),description:N.get("description"),points_per_rupee:parseFloat(N.get("points_per_rupee")),min_order_amount:parseFloat(N.get("min_order_amount")),max_points_per_order:parseFloat(N.get("max_points_per_order")),expiry_days:parseInt(N.get("expiry_days")),is_active:!0})},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Program Name"}),e.jsx("input",{type:"text",name:"name",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),e.jsx("textarea",{name:"description",rows:3,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Points per Rupee"}),e.jsx("input",{type:"number",step:"0.1",name:"points_per_rupee",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Minimum Order Amount"}),e.jsx("input",{type:"number",name:"min_order_amount",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Max Points per Order"}),e.jsx("input",{type:"number",name:"max_points_per_order",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Points Expiry (Days)"}),e.jsx("input",{type:"number",name:"expiry_days",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Create Program"})]})]})]})})})]})}function X8(){const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(""),[l,o]=b.useState("all"),[c,d]=b.useState(null),[u,p]=b.useState(!1),[h,g]=b.useState(!1),[x,f]=b.useState(!1);b.useEffect(()=>{m()},[]);const m=async()=>{try{a(!0);const E=await fetch("/api/admin/static-pages");if(E.ok){const k=await E.json();s(k.pages||[])}else console.error("Failed to fetch static pages"),s([])}catch(E){console.error("Error fetching static pages:",E),s([])}finally{a(!1)}},j=t.filter(E=>{const k=E.title.toLowerCase().includes(n.toLowerCase())||E.slug.toLowerCase().includes(n.toLowerCase())||E.content.toLowerCase().includes(n.toLowerCase()),A=l==="all"||E.page_type===l;return k&&A}),v=async(E,k)=>{try{(await fetch(`/api/admin/static-pages/${E}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)})).ok?(s(t.map(y=>y.id===E?{...y,...k}:y)),p(!1),d(null)):alert("Failed to update static page")}catch(A){console.error("Error updating static page:",A),alert("Error updating static page")}},w=async E=>{if(confirm("Are you sure you want to delete this static page?"))try{(await fetch(`/api/admin/static-pages/${E}`,{method:"DELETE"})).ok?s(t.filter(A=>A.id!==E)):alert("Failed to delete static page")}catch(k){console.error("Error deleting static page:",k),alert("Error deleting static page")}},S=async(E,k)=>{try{(await fetch(`/api/admin/static-pages/${E}/toggle`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!k})})).ok?s(t.map(y=>y.id===E?{...y,is_active:!k}:y)):alert("Failed to toggle page status")}catch(A){console.error("Error toggling page status:",A),alert("Error toggling page status")}},F=E=>{switch(E){case"about":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"faq":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"policy":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"terms":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"shipping":return"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200";case"refund":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"privacy":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";case"contact":return"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200";case"custom":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Static Pages Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage static pages like About Us, FAQ, Policies, etc."})]}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search pages...",value:n,onChange:E=>i(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("select",{value:l,onChange:E=>o(E.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"about",children:"About"}),e.jsx("option",{value:"faq",children:"FAQ"}),e.jsx("option",{value:"policy",children:"Policy"}),e.jsx("option",{value:"terms",children:"Terms"}),e.jsx("option",{value:"shipping",children:"Shipping"}),e.jsx("option",{value:"refund",children:"Refund"}),e.jsx("option",{value:"privacy",children:"Privacy"}),e.jsx("option",{value:"contact",children:"Contact"}),e.jsx("option",{value:"custom",children:"Custom"})]}),e.jsxs("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500",children:[e.jsx(gs,{className:"h-4 w-4 inline mr-2"}),"Create Page"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(gs,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Pages"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(Yn,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Pages"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(E=>E.is_active).length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(ws,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Policy Pages"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(E=>["policy","terms","privacy","shipping","refund"].includes(E.page_type)).length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(gs,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Custom Pages"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(E=>E.page_type==="custom").length})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Page"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Slug"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Last Updated"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:j.map(E=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:E.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:E.meta_description})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${F(E.page_type)}`,children:E.page_type})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["/",E.slug]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>S(E.id,E.is_active),className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full cursor-pointer ${E.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:E.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(E.updated_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{d(E),f(!0)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(ct,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{d(E),p(!0)},className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:e.jsx(jr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>w(E.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},E.id))})]})})}),u&&c&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-10 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Edit Static Page"}),e.jsxs("form",{onSubmit:E=>{E.preventDefault();const k=new FormData(E.target);v(c.id,{title:k.get("title"),slug:k.get("slug"),content:k.get("content"),meta_description:k.get("meta_description"),page_type:k.get("page_type"),is_active:k.get("is_active")==="on"})},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Page Title"}),e.jsx("input",{type:"text",name:"title",defaultValue:c.title,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Slug"}),e.jsx("input",{type:"text",name:"slug",defaultValue:c.slug,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Page Type"}),e.jsxs("select",{name:"page_type",defaultValue:c.page_type,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"about",children:"About"}),e.jsx("option",{value:"faq",children:"FAQ"}),e.jsx("option",{value:"policy",children:"Policy"}),e.jsx("option",{value:"terms",children:"Terms"}),e.jsx("option",{value:"shipping",children:"Shipping"}),e.jsx("option",{value:"refund",children:"Refund"}),e.jsx("option",{value:"privacy",children:"Privacy"}),e.jsx("option",{value:"contact",children:"Contact"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Meta Description"}),e.jsx("textarea",{name:"meta_description",rows:2,defaultValue:c.meta_description,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Content"}),e.jsx("textarea",{name:"content",rows:10,defaultValue:c.content,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",name:"is_active",defaultChecked:c.is_active,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-900 dark:text-white",children:"Active Page"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:[e.jsx($s,{className:"h-4 w-4 inline mr-2"}),"Update Page"]})]})]})]})})}),x&&c&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-10 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["Page Preview: ",c.title]}),e.jsxs("div",{className:"prose max-w-none dark:prose-invert",children:[e.jsx("h1",{children:c.title}),e.jsx("div",{dangerouslySetInnerHTML:{__html:c.content}})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Close Preview"})})]})})})]})}function Q8(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState(""),[c,d]=b.useState("all"),[u,p]=b.useState("posts"),[h,g]=b.useState(null),[x,f]=b.useState(!1);b.useEffect(()=>{m()},[]);const m=async()=>{try{i(!0);const[A,y]=await Promise.all([fetch("/api/admin/community/posts"),fetch("/api/admin/community/comments")]);if(A.ok){const N=await A.json();s(N.posts||[])}if(y.ok){const N=await y.json();a(N.comments||[])}}catch(A){console.error("Error fetching community data:",A)}finally{i(!1)}},j=t.filter(A=>{const y=A.title.toLowerCase().includes(l.toLowerCase())||A.content.toLowerCase().includes(l.toLowerCase())||A.user_name.toLowerCase().includes(l.toLowerCase()),N=c==="all"||A.status===c;return y&&N}),v=r.filter(A=>{const y=A.content.toLowerCase().includes(l.toLowerCase())||A.user_name.toLowerCase().includes(l.toLowerCase()),N=c==="all"||A.status===c;return y&&N}),w=async(A,y)=>{try{(await fetch(`/api/admin/community/posts/${A}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:y})})).ok?s(t.map(R=>R.id===A?{...R,status:y}:R)):alert("Failed to update post status")}catch(N){console.error("Error updating post status:",N),alert("Error updating post status")}},S=async(A,y)=>{try{(await fetch(`/api/admin/community/comments/${A}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:y})})).ok?a(r.map(R=>R.id===A?{...R,status:y}:R)):alert("Failed to update comment status")}catch(N){console.error("Error updating comment status:",N),alert("Error updating comment status")}},F=async A=>{if(confirm("Are you sure you want to delete this post?"))try{(await fetch(`/api/admin/community/posts/${A}`,{method:"DELETE"})).ok?s(t.filter(N=>N.id!==A)):alert("Failed to delete post")}catch(y){console.error("Error deleting post:",y),alert("Error deleting post")}},E=async A=>{if(confirm("Are you sure you want to delete this comment?"))try{(await fetch(`/api/admin/community/comments/${A}`,{method:"DELETE"})).ok?a(r.filter(N=>N.id!==A)):alert("Failed to delete comment")}catch(y){console.error("Error deleting comment:",y),alert("Error deleting comment")}},k=A=>{switch(A){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"flagged":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Community Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage community posts, comments, and user interactions"})]}),e.jsx("div",{children:e.jsx("div",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"posts",label:"Posts",icon:fs},{id:"comments",label:"Comments",icon:Pt}].map(A=>e.jsxs("button",{onClick:()=>p(A.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm transition-colors ${u===A.id?"":"border-transparent"}`,style:u===A.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx(A.icon,{className:"h-4 w-4 mr-2"}),A.label]},A.id))})})}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search community content...",value:l,onChange:A=>o(A.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("select",{value:c,onChange:A=>d(A.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"flagged",children:"Flagged"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(fs,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Posts"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(Pt,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Comments"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(B2,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Flagged Content"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(A=>A.status==="flagged").length+r.filter(A=>A.status==="flagged").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Wi,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Likes"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.reduce((A,y)=>A+y.likes_count,0)+r.reduce((A,y)=>A+y.likes_count,0)})]})]})})]}),u==="posts"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Post"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Author"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Engagement"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:j.map(A=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:A.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:A.content}),A.tags.length>0&&e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:A.tags.slice(0,3).map((y,N)=>e.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:["#",y]},N))})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:A.user_name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:A.user_email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(Wi,{className:"h-4 w-4 mr-1"}),A.likes_count]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(fs,{className:"h-4 w-4 mr-1"}),A.comments_count]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k(A.status)}`,children:A.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(A.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{g(A),f(!0)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(ct,{className:"h-4 w-4"})}),A.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>w(A.id,"active"),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:e.jsx(Vt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>w(A.id,"rejected"),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Ff,{className:"h-4 w-4"})})]}),e.jsx("button",{onClick:()=>F(A.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},A.id))})]})})}),u==="comments"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Comment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Author"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Post ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Likes"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:v.map(A=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white truncate max-w-xs",children:A.content})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:A.user_name})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["#",A.post_id]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(Wi,{className:"h-4 w-4 mr-1"}),A.likes_count]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k(A.status)}`,children:A.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(A.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[A.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>S(A.id,"active"),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:e.jsx(Vt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>S(A.id,"rejected"),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Ff,{className:"h-4 w-4"})})]}),e.jsx("button",{onClick:()=>E(A.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},A.id))})]})})}),x&&h&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["Post Details: ",h.title]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Author"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[h.user_name," (",h.user_email,")"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k(h.status)}`,children:h.status})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Content"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 dark:bg-gray-700 rounded-md",children:e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:h.content})})]}),h.image_url&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Image"}),e.jsx("img",{src:h.image_url,alt:"Post image",className:"mt-1 max-w-xs rounded-md"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Likes"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:h.likes_count})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Comments"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:h.comments_count})]})]}),h.tags.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Tags"}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:h.tags.map((A,y)=>e.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:["#",A]},y))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Created"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(h.created_at).toLocaleString()})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Close"})})]})})})]})}function Pj({imageUrl:t,aspectRatio:s,onCrop:r,onCancel:a}){var T,z;const[n,i]=b.useState({x:0,y:0,width:0,height:0}),[l,o]=b.useState(!1),[c,d]=b.useState({x:0,y:0}),[u,p]=b.useState({width:0,height:0}),[h,g]=b.useState({width:0,height:0}),[x,f]=b.useState(null),m=b.useRef(null),j=b.useRef(null);b.useEffect(()=>{const L=new Image;L.crossOrigin="anonymous",L.onerror=O=>{console.error("Error loading image:",O);const V=new Image;V.onload=()=>{if(p({width:V.width,height:V.height}),m.current){const Z=m.current.clientWidth-40,D=m.current.clientHeight-40,P=Z/V.width,W=D/V.height,ee=Math.min(P,W,1);g({width:V.width*ee,height:V.height*ee});const M=Math.min(V.width,V.height*s),U=M/s;i({x:(V.width-M)/2,y:(V.height-U)/2,width:M,height:U})}},V.onerror=()=>{console.error("Failed to load image even without CORS")},V.src=t},L.onload=()=>{if(p({width:L.width,height:L.height}),m.current){const O=m.current.clientWidth-40,V=m.current.clientHeight-40,Z=O/L.width,D=V/L.height,P=Math.min(Z,D,1);g({width:L.width*P,height:L.height*P});const W=Math.min(L.width,L.height*s),ee=W/s;i({x:(L.width-W)/2,y:(L.height-ee)/2,width:W,height:ee})}},L.src=t},[t,s]);const v=()=>{if(!u.width||!h.width)return{x:0,y:0,width:0,height:0};const L=h.width/u.width;return{x:n.x*L,y:n.y*L,width:n.width*L,height:n.height*L}},w=L=>{if(!m.current)return;const O=L.target;if(O.classList.contains("resize-handle")){const W=O.getAttribute("data-handle");if(W){f(W),o(!0);const ee=m.current.getBoundingClientRect(),M=h.width/u.width,U=(L.clientX-ee.left-(ee.width-h.width)/2)/M,q=(L.clientY-ee.top-(ee.height-h.height)/2)/M;d({x:U,y:q})}return}const V=m.current.getBoundingClientRect();v();const Z=h.width/u.width,D=(L.clientX-V.left-(V.width-h.width)/2)/Z,P=(L.clientY-V.top-(V.height-h.height)/2)/Z;D>=n.x&&D<=n.x+n.width&&P>=n.y&&P<=n.y+n.height&&(o(!0),d({x:D-n.x,y:P-n.y}))},S=L=>{if(!l||!m.current)return;const O=m.current.getBoundingClientRect(),V=h.width/u.width,Z=(L.clientX-O.left-(O.width-h.width)/2)/V,D=(L.clientY-O.top-(O.height-h.height)/2)/V;if(x){let P={...n};if(x==="se"){const W=Z-n.x,ee=W/s;P={x:n.x,y:n.y,width:Math.min(W,u.width-n.x),height:Math.min(ee,u.height-n.y)},P.y+P.height>u.height&&(P.height=u.height-P.y,P.width=P.height*s),P.x+P.width>u.width&&(P.width=u.width-P.x,P.height=P.width/s)}else if(x==="sw"){const W=n.x+n.width-Z,ee=W/s;P={x:Math.max(0,Z),y:n.y,width:Math.min(W,n.x+n.width),height:Math.min(ee,u.height-n.y)},P.y+P.height>u.height&&(P.height=u.height-P.y,P.width=P.height*s,P.x=n.x+n.width-P.width)}else if(x==="ne"){const W=Z-n.x,ee=W/s;P={x:n.x,y:Math.max(0,n.y+n.height-ee),width:Math.min(W,u.width-n.x),height:Math.min(ee,n.y+n.height)},P.y<0&&(P.y=0,P.height=n.y+n.height,P.width=P.height*s)}else if(x==="nw"){const W=n.x+n.width-Z,ee=W/s;P={x:Math.max(0,Z),y:Math.max(0,n.y+n.height-ee),width:Math.min(W,n.x+n.width),height:Math.min(ee,n.y+n.height)},P.y<0&&(P.y=0,P.height=n.y+n.height,P.width=P.height*s,P.x=n.x+n.width-P.width),P.x<0&&(P.x=0,P.width=n.x+n.width,P.height=P.width/s,P.y=n.y+n.height-P.height)}i(P)}else{const P=Math.max(0,Math.min(Z-c.x,u.width-n.width)),W=Math.max(0,Math.min(D-c.y,u.height-n.height));i(ee=>({...ee,x:P,y:W}))}},F=()=>{o(!1),f(null)},E=()=>{if(!n.width||!n.height||n.width<=0||n.height<=0){console.error("Invalid crop dimensions:",n),alert("Please wait for the image to load completely before cropping.");return}if(!u.width||!u.height){console.error("Image size not loaded yet"),alert("Please wait for the image to load completely before cropping.");return}const L=new Image;L.crossOrigin="anonymous",L.onerror=O=>{console.error("Error loading image for cropping:",O);const V=new Image;V.onload=()=>{try{const Z=document.createElement("canvas"),D=Z.getContext("2d");if(!D){console.error("Failed to get canvas context");return}Z.width=n.width,Z.height=n.height,D.drawImage(V,n.x,n.y,n.width,n.height,0,0,n.width,n.height),Z.toBlob(P=>{P?r(P):(console.error("Failed to create blob from canvas"),alert("Failed to crop image. Please try again."))},"image/jpeg",.95)}catch(Z){console.error("Error during crop:",Z),alert("Failed to crop image. Please try again.")}},V.onerror=()=>{console.error("Failed to load image even without CORS"),alert("Failed to load image for cropping. Please try again.")},V.src=t},L.onload=()=>{try{const O=document.createElement("canvas"),V=O.getContext("2d");if(!V){console.error("Failed to get canvas context");return}O.width=n.width,O.height=n.height,V.drawImage(L,n.x,n.y,n.width,n.height,0,0,n.width,n.height),O.toBlob(Z=>{Z?r(Z):(console.error("Failed to create blob from canvas"),alert("Failed to crop image. Please try again."))},"image/jpeg",.95)}catch(O){console.error("Error during crop:",O),alert("Failed to crop image. Please try again.")}},L.src=t},k=v(),A=((T=m.current)==null?void 0:T.clientWidth)||800,y=((z=m.current)==null?void 0:z.clientHeight)||600,N=(A-h.width)/2,R=(y-h.height)/2;return e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Crop Image (",s===1?"1:1":s===16/9?"16:9":s===4/5?"4:5":s===5/4?"5:4":s===4/3?"4:3":s.toFixed(2)+":1"," Aspect Ratio)"]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded transition-colors",children:e.jsx(es,{className:"w-5 h-5"})})]}),e.jsxs("div",{ref:m,className:"relative flex-1 overflow-hidden bg-gray-100 flex items-center justify-center",style:{minHeight:"400px",maxHeight:"70vh"},onMouseMove:S,onMouseUp:F,onMouseLeave:F,children:[e.jsx("img",{ref:j,src:t,alt:"Crop",className:"max-w-full max-h-full",style:{width:`${h.width}px`,height:`${h.height}px`,objectFit:"contain"},draggable:!1}),k.width>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"absolute border-2 border-blue-500 bg-blue-500/20 cursor-move",style:{left:`${N+k.x}px`,top:`${R+k.y}px`,width:`${k.width}px`,height:`${k.height}px`},onMouseDown:w,children:[e.jsx("div",{className:"absolute -top-1 -left-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-nw-resize resize-handle","data-handle":"nw"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-ne-resize resize-handle","data-handle":"ne"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-sw-resize resize-handle","data-handle":"sw"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-se-resize resize-handle","data-handle":"se"})]}),e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.jsxs("svg",{className:"w-full h-full",children:[e.jsx("defs",{children:e.jsxs("mask",{id:"crop-mask",children:[e.jsx("rect",{width:"100%",height:"100%",fill:"black"}),e.jsx("rect",{x:N+k.x,y:R+k.y,width:k.width,height:k.height,fill:"white"})]})}),e.jsx("rect",{width:"100%",height:"100%",fill:"black",fillOpacity:"0.5",mask:"url(#crop-mask)"})]})})]})]}),e.jsxs("div",{className:"p-4 border-t flex items-center justify-between relative z-10 bg-white",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Drag to move  Aspect ratio locked to ",s===1?"1:1":s===16/9?"16:9":s===4/5?"4:5":s===5/4?"5:4":s===4/3?"4:3":s.toFixed(2)+":1"]}),e.jsxs("div",{className:"flex gap-2 relative z-10",children:[e.jsx("button",{onClick:L=>{L.preventDefault(),L.stopPropagation(),a()},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",type:"button",children:"Cancel"}),e.jsxs("button",{onClick:L=>{L.preventDefault(),L.stopPropagation(),E()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 cursor-pointer",type:"button",disabled:!n.width||!n.height||n.width<=0||n.height<=0,children:[e.jsx(fd,{className:"w-4 h-4"}),"Apply Crop"]})]})]})]})})}function Z8({videoUrl:t,aspectRatio:s=16/9,onCrop:r,onCancel:a}){var ee,M;const[n,i]=b.useState({x:0,y:0,width:0,height:0}),[l,o]=b.useState(!1),[c,d]=b.useState({x:0,y:0}),[u,p]=b.useState({width:0,height:0}),[h,g]=b.useState({width:0,height:0}),[x,f]=b.useState(null),[m,j]=b.useState(!1),[v,w]=b.useState(0),[S,F]=b.useState(!1),E=b.useRef(null),k=b.useRef(null),A=b.useRef(null);b.useRef(null);const y=b.useRef([]);b.useEffect(()=>{const U=k.current;if(!U)return;const q=()=>{if(p({width:U.videoWidth,height:U.videoHeight}),E.current){const Y=E.current.clientWidth-40,K=E.current.clientHeight-40,le=Y/U.videoWidth,J=K/U.videoHeight,ae=Math.min(le,J,1);g({width:U.videoWidth*ae,height:U.videoHeight*ae});const he=Math.min(U.videoWidth,U.videoHeight*s),Fe=he/s;i({x:(U.videoWidth-he)/2,y:(U.videoHeight-Fe)/2,width:he,height:Fe})}};return U.addEventListener("loadedmetadata",q),U.load(),()=>{U.removeEventListener("loadedmetadata",q)}},[t,s]);const N=()=>{if(!u.width||!h.width)return{x:0,y:0,width:0,height:0};const U=h.width/u.width;return{x:n.x*U,y:n.y*U,width:n.width*U,height:n.height*U}},R=U=>{if(!E.current)return;const q=U.target;if(q.classList.contains("resize-handle")){const ae=q.getAttribute("data-handle");if(ae){f(ae),o(!0);const he=E.current.getBoundingClientRect(),Fe=h.width/u.width,X=(U.clientX-he.left-(he.width-h.width)/2)/Fe,Re=(U.clientY-he.top-(he.height-h.height)/2)/Fe;d({x:X,y:Re})}return}const Y=E.current.getBoundingClientRect();N();const K=h.width/u.width,le=(U.clientX-Y.left-(Y.width-h.width)/2)/K,J=(U.clientY-Y.top-(Y.height-h.height)/2)/K;le>=n.x&&le<=n.x+n.width&&J>=n.y&&J<=n.y+n.height&&(o(!0),d({x:le-n.x,y:J-n.y}))},T=U=>{if(!l||!E.current)return;const q=E.current.getBoundingClientRect(),Y=h.width/u.width,K=(U.clientX-q.left-(q.width-h.width)/2)/Y,le=(U.clientY-q.top-(q.height-h.height)/2)/Y;if(x){let J={...n};if(x==="se"){const ae=K-n.x,he=ae/s;J={x:n.x,y:n.y,width:Math.min(ae,u.width-n.x),height:Math.min(he,u.height-n.y)},J.y+J.height>u.height&&(J.height=u.height-J.y,J.width=J.height*s),J.x+J.width>u.width&&(J.width=u.width-J.x,J.height=J.width/s)}else if(x==="sw"){const ae=n.x+n.width-K,he=ae/s;J={x:Math.max(0,K),y:n.y,width:Math.min(ae,n.x+n.width),height:Math.min(he,u.height-n.y)},J.y+J.height>u.height&&(J.height=u.height-J.y,J.width=J.height*s,J.x=n.x+n.width-J.width)}else if(x==="ne"){const ae=K-n.x,he=ae/s;J={x:n.x,y:Math.max(0,n.y+n.height-he),width:Math.min(ae,u.width-n.x),height:Math.min(he,n.y+n.height)},J.y<0&&(J.y=0,J.height=n.y+n.height,J.width=J.height*s)}else if(x==="nw"){const ae=n.x+n.width-K,he=ae/s;J={x:Math.max(0,K),y:Math.max(0,n.y+n.height-he),width:Math.min(ae,n.x+n.width),height:Math.min(he,n.y+n.height)},J.y<0&&(J.y=0,J.height=n.y+n.height,J.width=J.height*s,J.x=n.x+n.width-J.width),J.x<0&&(J.x=0,J.width=n.x+n.width,J.height=J.width/s,J.y=n.y+n.height-J.height)}i(J)}else{const J=Math.max(0,Math.min(K-c.x,u.width-n.width)),ae=Math.max(0,Math.min(le-c.y,u.height-n.height));i(he=>({...he,x:J,y:ae}))}},z=()=>{o(!1),f(null)},L=()=>{const U=k.current;U&&(U.paused?(U.play(),F(!0)):(U.pause(),F(!1)))},O=async()=>{const U=k.current,q=A.current;if(!(!U||!q)){if(!n.width||!n.height||n.width<=0||n.height<=0){alert("Please wait for the video to load completely before cropping.");return}j(!0),w(0);try{q.width=n.width,q.height=n.height;const Y=q.getContext("2d");if(!Y)throw new Error("Failed to get canvas context");U.currentTime=0,await new Promise(Re=>{U.onseeked=Re});const K=U.duration,le=30,J=1/le,ae=q.captureStream(le),he=new MediaRecorder(ae,{mimeType:"video/webm;codecs=vp9",videoBitsPerSecond:25e5});y.current=[],he.ondataavailable=Re=>{Re.data.size>0&&y.current.push(Re.data)},he.onstop=()=>{const Re=new Blob(y.current,{type:"video/webm"});r(Re),j(!1),w(0)},he.start();let Fe=0;const X=async()=>{if(Fe>=K){he.stop();return}U.currentTime=Fe,await new Promise(ne=>{U.onseeked=ne}),Y.drawImage(U,n.x,n.y,n.width,n.height,0,0,n.width,n.height);const Re=Fe/K*100;w(Re),Fe+=J,requestAnimationFrame(X)};await X()}catch(Y){console.error("Error during video crop:",Y),alert("Failed to crop video. Please try again."),j(!1),w(0)}}},V=N(),Z=((ee=E.current)==null?void 0:ee.clientWidth)||800,D=((M=E.current)==null?void 0:M.clientHeight)||600,P=(Z-h.width)/2,W=(D-h.height)/2;return e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Crop Video (",s===1?"1:1":s===16/9?"16:9":s===4/5?"4:5":s===5/4?"5:4":s===4/3?"4:3":s.toFixed(2)+":1"," Aspect Ratio)"]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded transition-colors",disabled:m,children:e.jsx(es,{className:"w-5 h-5"})})]}),e.jsxs("div",{ref:E,className:"relative flex-1 overflow-hidden bg-gray-100 flex items-center justify-center",style:{minHeight:"400px",maxHeight:"70vh"},onMouseMove:T,onMouseUp:z,onMouseLeave:z,onMouseDown:R,children:[e.jsx("video",{ref:k,src:t,className:"max-w-full max-h-full",style:{width:`${h.width}px`,height:`${h.height}px`,objectFit:"contain"},muted:!0,playsInline:!0}),V.width>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"absolute border-2 border-blue-500 bg-blue-500/20 cursor-move",style:{left:`${P+V.x}px`,top:`${W+V.y}px`,width:`${V.width}px`,height:`${V.height}px`},children:[e.jsx("div",{className:"absolute -top-1 -left-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-nw-resize resize-handle","data-handle":"nw"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-ne-resize resize-handle","data-handle":"ne"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-sw-resize resize-handle","data-handle":"sw"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-se-resize resize-handle","data-handle":"se"})]}),e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.jsxs("svg",{className:"w-full h-full",children:[e.jsx("defs",{children:e.jsxs("mask",{id:"video-crop-mask",children:[e.jsx("rect",{width:"100%",height:"100%",fill:"black"}),e.jsx("rect",{x:P+V.x,y:W+V.y,width:V.width,height:V.height,fill:"white"})]})}),e.jsx("rect",{width:"100%",height:"100%",fill:"black",fillOpacity:"0.5",mask:"url(#video-crop-mask)"})]})})]}),e.jsx("canvas",{ref:A,className:"hidden"})]}),m&&e.jsxs("div",{className:"p-4 border-t bg-blue-50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"animate-spin",children:e.jsx(Fb,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("span",{className:"text-sm text-blue-600",children:["Processing video... ",Math.round(v),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${v}%`}})})]}),e.jsxs("div",{className:"p-4 border-t flex items-center justify-between relative z-10 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:L,className:"p-2 hover:bg-gray-100 rounded transition-colors",disabled:m,children:S?e.jsx(Cn,{className:"w-5 h-5"}):e.jsx(Wa,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Drag to move  Aspect ratio locked to ",s===1?"1:1":s===16/9?"16:9":s===4/5?"4:5":s===5/4?"5:4":s===4/3?"4:3":s.toFixed(2)+":1"]})]}),e.jsxs("div",{className:"flex gap-2 relative z-10",children:[e.jsx("button",{onClick:U=>{U.preventDefault(),U.stopPropagation(),a()},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",type:"button",disabled:m,children:"Cancel"}),e.jsxs("button",{onClick:U=>{U.preventDefault(),U.stopPropagation(),O()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 cursor-pointer",type:"button",disabled:!n.width||!n.height||n.width<=0||n.height<=0||m,children:[e.jsx(fd,{className:"w-4 h-4"}),m?"Processing...":"Apply Crop"]})]})]})]})})}const rr=Km.getApiConfig().baseUrl,W0=t=>t?/^https?:\/\//i.test(t)?t:typeof window<"u"&&t.startsWith("/")?`${window.location.protocol}//${window.location.host}${t}`:typeof window<"u"?`${window.location.protocol}//${window.location.host}/${t.replace(/^\/+/,"")}`:t:"",_a=(t,s)=>{const r=[...t];for(;r.length<s;)r.push("");return r.slice(0,s)},e9=[{key:"desktop",label:"Desktop (16:9)",helper:"Recommended 19201080 MP4/WebM for large screens.",index:0},{key:"tablet",label:"Tablet (4:3)",helper:"Recommended 15361152 landscape video.",index:1},{key:"mobile",label:"Mobile Portrait (9:16)",helper:"Recommended 10801920 portrait video for phones.",index:2}];function t9(){const{notify:t}=mr(),[s,r]=b.useState([]),[a,n]=b.useState(!0),[i,l]=b.useState(null),[o,c]=b.useState(null),[d,u]=b.useState({}),[p,h]=b.useState(!1),[g,x]=b.useState(!1),[f,m]=b.useState(!1),[j,v]=b.useState(!1),[w,S]=b.useState(!1),[F,E]=b.useState(!1),[k,A]=b.useState(""),[y,N]=b.useState(""),[R,T]=b.useState(""),[z,L]=b.useState(void 0),[O,V]=b.useState(1),[Z,D]=b.useState(null),[P,W]=b.useState(!1),[ee,M]=b.useState(null),[U,q]=b.useState(null),[Y,K]=b.useState(null),[le,J]=b.useState(7e3),[ae,he]=b.useState({name:"",description:"",sectionType:"",imageCount:5,type:"gallery"}),[Fe,X]=b.useState({animationType:"fade",transitionDuration:1e3,autoPlay:!0,autoPlayDelay:7e3,designStyle:"modern",showDots:!0,showArrows:!0,loop:!0}),[Re,ne]=b.useState({animationType:"fade",transitionDuration:1e3,autoPlay:!0,autoPlayDelay:7e3,designStyle:"modern",showDots:!0,showArrows:!0,loop:!0}),[_e,Se]=b.useState(""),[be,Ie]=b.useState({heading:"Join The Nefol Circle",description:"Stay ahead with exclusive style drops, member-only offers, and insider fashion updates.",footer:"By subscribing, you agree to receive WhatsApp messages from Nefol.",logoName:"NEFL"}),Ze=b.useCallback(async()=>{const xe=[{id:"scrolling_text_banner",name:"Scrolling Text Banner",type:"banner",images:[],description:"Continuous scrolling text line for offers and promotions (displays between navbar and top media carousel)",sectionType:"scrolling_text_banner",imageCount:0},{id:"splash_screen",name:"Splash Screen Videos",type:"banner",images:["","",""],description:"Upload device-specific splash screen videos (Desktop 16:9, Tablet 4:3, Mobile 9:16)",sectionType:"splash_screen",imageCount:3},{id:"top_media_carousel",name:"Top Media Carousel (Above Hero)",type:"hero",images:[],description:"Media carousel displayed above Hero Banner - Images and videos with full aspect ratio (up to 30)",sectionType:"top_media_carousel",imageCount:30,settings:{animationType:"fade",transitionDuration:1e3,autoPlay:!0,autoPlayDelay:7e3,designStyle:"modern",showDots:!0,showArrows:!0,loop:!0}},{id:"hero_banner",name:"Hero Banner (Top Slider)",type:"hero",images:[],description:"Main banner at the top - Rotating hero images and videos (up to 30)",sectionType:"hero_banner",imageCount:30,settings:{animationType:"fade",transitionDuration:1e3,autoPlay:!0,autoPlayDelay:7e3,designStyle:"modern",showDots:!0,showArrows:!0,loop:!0}},{id:"body_category",name:"Body Category",type:"category",images:[],description:"Body products category image",sectionType:"shop_categories",imageCount:1},{id:"face_category",name:"Face Category",type:"category",images:[],description:"Face products category image",sectionType:"shop_categories",imageCount:1},{id:"hair_category",name:"Hair Category",type:"category",images:[],description:"Hair products category image",sectionType:"shop_categories",imageCount:1},{id:"combos_category",name:"Combos Category",type:"category",images:[],description:"Combos products category image",sectionType:"shop_categories",imageCount:1},{id:"commitments",name:"Certifications/Commitments",type:"certification",images:[],description:"Certification badges (Cruelty-Free, Paraben-Free, etc.)",sectionType:"commitments",imageCount:10},{id:"complete_kit",name:"Complete Kit Banner",type:"banner",images:[],description:"Large banner for complete kit section",sectionType:"complete_kit",imageCount:1},{id:"marketplace_logos",name:"Marketplace Logos",type:"gallery",images:[],description:"Available on (Amazon, Flipkart, Meesho) logos",sectionType:"marketplace_logos",imageCount:10},{id:"nefol_collection",name:"Nefol Collection",type:"banner",images:[],description:"NEFOL COLLECTION section with image, title, subtitle, description, and button",sectionType:"nefol_collection",imageCount:1},{id:"forever_favorites",name:"Forever Favorites",type:"gallery",images:[],description:"FOREVER FAVORITES section with two images (Luxury Skincare and Natural Beauty)",sectionType:"forever_favorites",imageCount:2},{id:"natural_beauty",name:"Natural Beauty",type:"banner",images:[],description:"NATURAL BEAUTY section with image, title, subtitle, description, and button",sectionType:"natural_beauty",imageCount:1},{id:"whatsappsubscription",name:"WhatsApp Subscription",type:"banner",images:[],description:"WhatsApp subscription modal with image, heading, description, footer text, logo, and logo name",sectionType:"whatsappsubscription",imageCount:2}];try{const je=await(await fetch(`${rr}/cms/sections/home`)).json(),ve=xe.map(Ne=>Ne.sectionType),Oe=je.filter(Ne=>!ve.includes(Ne.section_type)&&Ne.section_type.startsWith("custom_")).map(Ne=>{var Ce,Je,Ge,Dt,te;return{id:Ne.section_type,name:Ne.title||Ne.section_type.replace("custom_","").replace(/_/g," "),type:"custom",images:(Ce=Ne.content)!=null&&Ce.images||(Je=Ne.content)!=null&&Je.image?[Ne.content.image]:[],description:((Ge=Ne.content)==null?void 0:Ge.description)||"",sectionType:Ne.section_type,imageCount:Array.isArray((Dt=Ne.content)==null?void 0:Dt.images)?Ne.content.images.length:(te=Ne.content)!=null&&te.image?1:5,isCustom:!0,orderIndex:Ne.order_index||999}}),Be=[...xe.map(Ne=>{var Je,Ge,Dt,te,de;const Ce=je.find(fe=>fe.section_type===Ne.sectionType);if(Ce&&Ce.content){if(Ne.sectionType==="splash_screen"){const fe=(Je=Ce.content.desktop)!=null&&Je.video?W0(Ce.content.desktop.video):"",pe=(Ge=Ce.content.tablet)!=null&&Ge.video?W0(Ce.content.tablet.video):"",ke=(Dt=Ce.content.mobile)!=null&&Dt.video?W0(Ce.content.mobile.video):"";return{...Ne,images:_a([fe,pe,ke],Ne.imageCount)}}if((Ne.sectionType==="hero_banner"||Ne.sectionType==="top_media_carousel")&&Ce.content.images){const fe=Array.isArray(Ce.content.images)?Ce.content.images:[];let pe;Ne.sectionType==="top_media_carousel"&&(Ce.content.mediaItems&&Array.isArray(Ce.content.mediaItems)?pe=Ce.content.mediaItems:Ce.content.media&&Array.isArray(Ce.content.media)?pe=Ce.content.media.map(I=>({url:I.url||I,type:I.type||(/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(I.url||I)?"video":"image"),timing:I.timing||Re.autoPlayDelay,thumbnail:I.thumbnail})):pe=fe.map(I=>({url:I,type:/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(I)?"video":"image",timing:Re.autoPlayDelay})));const ke={...Ne,name:Ne.name,images:fe,mediaItems:pe,settings:Ce.content.settings||Ne.settings};return Ne.sectionType==="hero_banner"&&Ce.content.settings&&X(Ce.content.settings),Ne.sectionType==="top_media_carousel"&&Ce.content.settings&&ne(Ce.content.settings),ke}if(Ne.sectionType==="shop_categories"&&Ce.content.categories){const fe={Body:"body_category",Face:"face_category",Hair:"hair_category",Combos:"combos_category"},pe=Ce.content.categories.find(ke=>fe[ke.name]===Ne.id);if(pe&&pe.image)return{...Ne,images:[(I=>{if(!I)return"";if(/^https?:\/\//i.test(I))return I;if(I.startsWith("/")){const G=window.location.hostname;return G==="thenefol.com"||G==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}${I}`:`${window.location.protocol}//${window.location.host}${I}`}return I})(pe.image)]}}if(Ne.sectionType==="scrolling_text_banner"&&Ce.content.text)return Se(Ce.content.text),{...Ne,description:Ce.content.text};if(Ne.sectionType==="commitments"&&Ce.content.images)return{...Ne,images:Ce.content.images};if(Ne.sectionType==="complete_kit"&&Ce.content.image)return{...Ne,images:[Ce.content.image]};if(Ne.sectionType==="marketplace_logos"&&Ce.content.logos)return{...Ne,images:Ce.content.logos};if(Ne.sectionType==="nefol_collection"&&Ce.content.image)return{...Ne,images:[(pe=>{if(!pe)return"";if(/^https?:\/\//i.test(pe))return pe;if(pe.startsWith("/")){const ke=window.location.hostname;return ke==="thenefol.com"||ke==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}${pe}`:`${window.location.protocol}//${window.location.host}${pe}`}return pe})(Ce.content.image)]};if(Ne.sectionType==="forever_favorites"&&Ce.content.images){const fe=C=>{if(!C)return"";if(/^https?:\/\//i.test(C))return C;if(C.startsWith("/")){const B=window.location.hostname;return B==="thenefol.com"||B==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}${C}`:`${window.location.protocol}//${window.location.host}${C}`}return C},pe=Array.isArray(Ce.content.images)?Ce.content.images:[],ke=(te=Ce.content.luxurySkincare)==null?void 0:te.image,I=(de=Ce.content.naturalBeauty)==null?void 0:de.image,G=[];ke&&G.push(ke),I&&G.push(I);const _=pe.length>0?pe:G;return{...Ne,images:_.map(fe)}}if(Ne.sectionType==="natural_beauty"&&Ce.content.image)return{...Ne,images:[(pe=>{if(!pe)return"";if(/^https?:\/\//i.test(pe))return pe;if(pe.startsWith("/")){const ke=window.location.hostname;return ke==="thenefol.com"||ke==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}${pe}`:`${window.location.protocol}//${window.location.host}${pe}`}return pe})(Ce.content.image)]};if(Ne.sectionType==="whatsappsubscription"&&Ce.content){const fe=G=>{if(!G)return"";if(/^https?:\/\//i.test(G))return G;if(G.startsWith("/")){const _=window.location.hostname;return _==="thenefol.com"||_==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}${G}`:`${window.location.protocol}//${window.location.host}${G}`}return G},pe=Ce.content.image?fe(Ce.content.image):"",ke=Ce.content.logo?fe(Ce.content.logo):"",I=[];return pe&&I.push(pe),ke&&I.push(ke),(Ce.content.heading||Ce.content.description||Ce.content.footer||Ce.content.logoName)&&Ie({heading:Ce.content.heading||"Join The Nefol Circle",description:Ce.content.description||"Stay ahead with exclusive style drops, member-only offers, and insider fashion updates.",footer:Ce.content.footer||"By subscribing, you agree to receive WhatsApp messages from Nefol.",logoName:Ce.content.logoName||"NEFL"}),{...Ne,images:I}}}return Ne}),...Oe].sort((Ne,Ce)=>(Ne.orderIndex||0)-(Ce.orderIndex||0));r(Be)}catch(ue){console.error("Failed to load sections:",ue),r(xe)}finally{n(!1)}},[]);b.useEffect(()=>{Ze()},[Ze]);const ge=xe=>xe.type.startsWith("video/")||/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(xe.name),ie=xe=>({hero_banner:1.25,nefol_collection:1.7777777777777777,natural_beauty:1.7777777777777777,forever_favorites:1.3333333333333333,complete_kit:1.7777777777777777})[xe]||null,Ue=async(xe,ue,je,ve)=>{const Oe=ge(xe);if(!Oe&&xe.type.startsWith("image/")&&!ve){q({file:xe,sectionId:ue,index:je}),W(!0);return}try{u(Ge=>({...Ge,[ue]:!0}));const De=await Dr(xe,rr),Be=s.find(Ge=>Ge.id===ue);if(!Be)return;let Ne=[...Be.images];if(Be.sectionType==="splash_screen"){Ne=_a(Ne,Be.imageCount);let Ge=je;Ge===void 0&&(Ge=Ne.findIndex(Dt=>!Dt),Ge===-1&&(Ge=Be.imageCount-1)),Ge>=0&&(Ge>=Ne.length&&(Ne=_a(Ne,Ge+1)),Ne[Ge]=De)}else je!==void 0&&je<Ne.length?Ne[je]=De:Ne.push(De);const Ce=Be.sectionType==="splash_screen"?_a(Ne,Be.imageCount):Ne.slice(0,Be.imageCount);let Je;if(ue==="top_media_carousel"){const Ge=Be.mediaItems||[],te={url:De,type:Oe?"video":"image",timing:Re.autoPlayDelay};je!==void 0&&je<Ge.length?(Je=[...Ge],Je[je]={...Ge[je],...te}):Je=[...Ge,te],Je=Je.slice(0,Be.imageCount)}r(Ge=>Ge.map(Dt=>Dt.id===ue?{...Dt,images:Ce,mediaItems:Je||Dt.mediaItems}:Dt)),await Ct(ue,De,je,Ce,Je),t("success",Oe?"Video uploaded successfully":"Image uploaded successfully")}catch(De){console.error("Upload failed:",De);const Be=(De==null?void 0:De.message)||(ge(xe)?"Failed to upload video":"Failed to upload image");t("error",Be)}finally{u(De=>({...De,[ue]:!1}))}},St=async xe=>{try{u(Je=>({...Je,[R]:!0}));const ue=Z?Z.name.replace(/\.[^/.]+$/,".jpg"):`cropped-thumbnail-${Date.now()}.jpg`,je=new File([xe],ue,{type:"image/jpeg"}),ve=await Dr(je,rr),Oe=s.find(Je=>Je.id===R);if(!Oe)return;const De=!Z&&z!==void 0&&Oe.images[z]&&/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(Oe.images[z]),Be=[...Oe.images];De||(z!==void 0&&z<Be.length?Be[z]=ve:Be.push(ve));const Ne=Be.slice(0,Oe.imageCount);let Ce;if(R==="top_media_carousel"){const Je=Oe.mediaItems||[],Ge=De||Oe.images[z||0]&&/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(Oe.images[z||0]);z!==void 0&&z<Je.length?(Ce=[...Je],Ce[z]={...Je[z],url:De||Ge?Je[z].url:ve,thumbnail:De||Ge?ve:void 0}):(Ce=[...Je],Ge?Ce.push({url:Oe.images[z||Je.length]||ve,type:"video",timing:Re.autoPlayDelay,thumbnail:De?ve:void 0}):Ce.push({url:ve,type:"image",timing:Re.autoPlayDelay})),Ce=Ce.slice(0,Oe.imageCount)}r(Je=>Je.map(Ge=>Ge.id===R?{...Ge,images:Ne,mediaItems:Ce||Ge.mediaItems}:Ge)),await Ct(R,ve,z,Ne,Ce),t("success",De?"Video thumbnail cropped and uploaded successfully":"Image cropped and uploaded successfully"),k.startsWith("blob:")&&URL.revokeObjectURL(k),S(!1),A(""),D(null)}catch(ue){console.error("Crop upload failed:",ue),t("error","Failed to upload cropped image")}finally{u(ue=>({...ue,[R]:!1}))}},dt=()=>{k&&URL.revokeObjectURL(k),S(!1),A(""),T(""),L(void 0),V(1),D(null)},_t=async xe=>{if(M(xe),W(!1),U){const{file:ue,sectionId:je,index:ve}=U;if(xe){const Oe=URL.createObjectURL(ue);A(Oe),T(je),L(ve),V(xe.ratio),D(ue),S(!0)}else try{u(Ce=>({...Ce,[je]:!0}));const Oe=await Dr(ue,rr),De=s.find(Ce=>Ce.id===je);if(!De)return;const Be=[...De.images];ve!==void 0&&ve<Be.length?Be[ve]=Oe:Be.push(Oe);const Ne=Be.slice(0,De.imageCount);r(Ce=>Ce.map(Je=>Je.id===je?{...Je,images:Ne}:Je)),await Ct(je,Oe,ve,Ne),t("success","Image uploaded successfully")}catch(Oe){console.error("Upload failed:",Oe),t("error",(Oe==null?void 0:Oe.message)||"Failed to upload image")}finally{u(Oe=>({...Oe,[je]:!1}))}q(null)}},Ct=async(xe,ue,je,ve,Oe)=>{var Be,Ne,Ce,Je,Ge,Dt,te,de,fe,pe,ke,I,G,_,C,B,H,Q,se,ce,oe,re,me,Te,Le,we,Pe,We,ht,lt,Tt,Ps,et,yt;const De=s.find(wt=>wt.id===xe);if(De)try{const wt=xt=>{if(!xt)return"";if(xt.startsWith("/"))return xt;try{return new URL(xt).pathname}catch{return xt}};let Ds=ve||De.images;De.sectionType==="splash_screen"&&(Ds=_a(Ds,De.imageCount));const Qe=Ds.map(wt);let Et={};if(De.sectionType==="hero_banner"){const xt=s.find(Sr=>Sr.id==="hero_banner");Et={title:"Hero Banner",subtitle:"NATURAL BEAUTY",description:"infused with premium natural ingredients",buttonText:"SHOP NOW",buttonLink:"/shop",images:Qe,videos:Qe.filter(Sr=>/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(Sr)),settings:(xt==null?void 0:xt.settings)||Fe}}else if(De.sectionType==="top_media_carousel"){const xt=s.find(st=>st.id==="top_media_carousel"),zr=(Oe||(xt==null?void 0:xt.mediaItems)||Qe.map(st=>({url:st,type:/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(st)?"video":"image",timing:Re.autoPlayDelay}))).map(st=>({...st,url:wt(st.url),thumbnail:st.thumbnail?wt(st.thumbnail):void 0})),Ve=Qe.filter(st=>/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(st)),He=Qe.filter(st=>!/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(st));Et={title:"Top Media Carousel",images:Qe,videos:Ve,media:Qe.map(st=>({url:wt(st),type:/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(st)?"video":"image"})),mediaItems:zr,settings:(xt==null?void 0:xt.settings)||Re}}else if(De.sectionType==="scrolling_text_banner")Et={text:_e||""};else if(De.sectionType==="shop_categories"){const zr=(await(await fetch(`${rr}/cms/sections/home`)).json()).find(ft=>ft.section_type==="shop_categories"),He={body_category:"Body",face_category:"Face",hair_category:"Hair",combos_category:"Combos"}[xe],qe=(ft=>{if(!ft||ft.startsWith("/"))return ft;if(ft.includes("/uploads/")){const Cr=ft.match(/\/uploads\/[^?]+/);if(Cr)return Cr[0]}try{return new URL(ft).pathname}catch{return ft}})(ue);if(zr&&zr.content&&zr.content.categories){const ft=zr.content.categories.map(Cr=>Cr.name===He?{...Cr,image:qe}:Cr);Et={...zr.content,categories:ft}}else{const ft={Body:"/body",Face:"/face",Hair:"/hair",Combos:"/combos"},Cr={Body:"/IMAGES/body.jpg",Face:"/IMAGES/face.jpg",Hair:"/IMAGES/hair.jpg",Combos:"/IMAGES/combo.jpg"};Et={title:"SHOP BY CATEGORY",categories:[{name:"Body",image:xe==="body_category"?qe:Cr.Body,link:ft.Body},{name:"Face",image:xe==="face_category"?qe:Cr.Face,link:ft.Face},{name:"Hair",image:xe==="hair_category"?qe:Cr.Hair,link:ft.Hair},{name:"Combos",image:xe==="combos_category"?qe:Cr.Combos,link:ft.Combos}]}}}else if(De.sectionType==="commitments")Et={title:"THOUGHTFUL COMMITMENTS",description:"We are committed to providing you with the safest and most effective natural skincare products.",images:Qe};else if(De.sectionType==="complete_kit")Et={title:"THE COMPLETE KIT",description:"Get the full Nefol experience in one curated bundle",buttonText:"View Kit",buttonLink:"/combos",image:wt(ue)};else if(De.sectionType==="marketplace_logos")Et={title:"AVAILABLE ON",logos:Qe};else if(De.sectionType==="nefol_collection"){const Sr=(qe=>{if(!qe||qe.startsWith("/"))return qe;if(qe.includes("/uploads/")){const ft=qe.match(/\/uploads\/[^?]+/);if(ft)return ft[0]}try{return new URL(qe).pathname}catch{return qe}})(ue),He=(await(await fetch(`${rr}/cms/sections/home`)).json()).find(qe=>qe.section_type==="nefol_collection"),st=Sr||((Be=He==null?void 0:He.content)==null?void 0:Be.image)||"";Et={title:((Ne=He==null?void 0:He.content)==null?void 0:Ne.title)||"NEFOL COLLECTION",subtitle:((Ce=He==null?void 0:He.content)==null?void 0:Ce.subtitle)||"ELEVATE YOUR SKINCARE WITH",description:((Je=He==null?void 0:He.content)==null?void 0:Je.description)||"Our premium collection combines the best of nature and science to deliver exceptional results for your skin.",buttonText:((Ge=He==null?void 0:He.content)==null?void 0:Ge.buttonText)||"SHOP NOW",buttonLink:((Dt=He==null?void 0:He.content)==null?void 0:Dt.buttonLink)||"/shop",image:wt(st)}}else if(De.sectionType==="forever_favorites"){const xt=st=>{if(!st||st.startsWith("/"))return st;if(st.includes("/uploads/")){const qe=st.match(/\/uploads\/[^?]+/);if(qe)return qe[0]}try{return new URL(st).pathname}catch{return st}},Ve=(await(await fetch(`${rr}/cms/sections/home`)).json()).find(st=>st.section_type==="forever_favorites");let He=Qe.length>0?Qe.map(xt):[];if(He.length===0&&(Ve!=null&&Ve.content)){const st=Ve.content.images||[],qe=(te=Ve.content.luxurySkincare)==null?void 0:te.image,ft=(de=Ve.content.naturalBeauty)==null?void 0:de.image;st.length>0?He=st.map(xt):(qe||ft)&&(He=[qe,ft].filter(Boolean).map(xt))}Et={title:((fe=Ve==null?void 0:Ve.content)==null?void 0:fe.title)||"FOREVER FAVORITES",description:((pe=Ve==null?void 0:Ve.content)==null?void 0:pe.description)||"Discover our most loved products that have become staples in skincare routines worldwide.",images:He,luxurySkincare:{title:((I=(ke=Ve==null?void 0:Ve.content)==null?void 0:ke.luxurySkincare)==null?void 0:I.title)||"LUXURY SKINCARE",buttonText:((_=(G=Ve==null?void 0:Ve.content)==null?void 0:G.luxurySkincare)==null?void 0:_.buttonText)||"SHOP NOW",image:wt(He[0]||((B=(C=Ve==null?void 0:Ve.content)==null?void 0:C.luxurySkincare)==null?void 0:B.image)||"")},naturalBeauty:{title:((Q=(H=Ve==null?void 0:Ve.content)==null?void 0:H.naturalBeauty)==null?void 0:Q.title)||"NATURAL BEAUTY",buttonText:((ce=(se=Ve==null?void 0:Ve.content)==null?void 0:se.naturalBeauty)==null?void 0:ce.buttonText)||"SHOP NOW",image:wt(He[1]||((re=(oe=Ve==null?void 0:Ve.content)==null?void 0:oe.naturalBeauty)==null?void 0:re.image)||"")}}}else if(De.sectionType==="natural_beauty"){const Sr=(qe=>{if(!qe||qe.startsWith("/"))return qe;if(qe.includes("/uploads/")){const ft=qe.match(/\/uploads\/[^?]+/);if(ft)return ft[0]}try{return new URL(qe).pathname}catch{return qe}})(ue),He=(await(await fetch(`${rr}/cms/sections/home`)).json()).find(qe=>qe.section_type==="natural_beauty"),st=Sr||((me=He==null?void 0:He.content)==null?void 0:me.image)||"";Et={title:((Te=He==null?void 0:He.content)==null?void 0:Te.title)||"NATURAL BEAUTY",subtitle:((Le=He==null?void 0:He.content)==null?void 0:Le.subtitle)||"ELEVATE YOUR SKIN WITH",description:((we=He==null?void 0:He.content)==null?void 0:we.description)||"infused with premium natural ingredients",buttonText:((Pe=He==null?void 0:He.content)==null?void 0:Pe.buttonText)||"SHOP NOW",buttonLink:((We=He==null?void 0:He.content)==null?void 0:We.buttonLink)||"/shop",image:wt(st)}}else if(De.sectionType==="whatsappsubscription"){const xt=qe=>{if(!qe)return"";if(qe.startsWith("/"))return qe;if(qe.includes("/uploads/")){const ft=qe.match(/\/uploads\/[^?]+/);if(ft)return ft[0]}try{return new URL(qe).pathname}catch{if(qe.includes("/uploads/")){const ft=qe.match(/\/uploads\/[^?]+/);if(ft)return ft[0]}return qe}},Ve=(await(await fetch(`${rr}/cms/sections/home`)).json()).find(qe=>qe.section_type==="whatsappsubscription");let He=((ht=Ve==null?void 0:Ve.content)==null?void 0:ht.image)||"",st=((lt=Ve==null?void 0:Ve.content)==null?void 0:lt.logo)||"";if(ve&&ve.length>0)je===0||je===void 0&&ve.length>=1?(He=xt(ve[0]),ve.length>1?st=xt(ve[1]):(Tt=Ve==null?void 0:Ve.content)!=null&&Tt.logo&&(st=Ve.content.logo)):je===1||je===void 0&&ve.length===2?(st=xt(ve[1]||ve[ve.length-1]),ve.length>0?He=xt(ve[0]):(Ps=Ve==null?void 0:Ve.content)!=null&&Ps.image&&(He=Ve.content.image)):(ve[0]&&(He=xt(ve[0])),ve[1]&&(st=xt(ve[1])));else if(ue){const qe=xt(ue);je===1?(st=qe,He=((et=Ve==null?void 0:Ve.content)==null?void 0:et.image)||""):(He=qe,st=((yt=Ve==null?void 0:Ve.content)==null?void 0:yt.logo)||"")}Et={image:wt(He),logo:wt(st),heading:be.heading,description:be.description,footer:be.footer,logoName:be.logoName}}else if(De.sectionType==="splash_screen"){const xt=_a(Qe,3);Et={desktop:{video:xt[0]||""},tablet:{video:xt[1]||""},mobile:{video:xt[2]||""},updatedAt:new Date().toISOString()}}else De.sectionType.startsWith("custom_")&&(Et={title:De.name,description:De.description,images:Qe});const Rs={scrolling_text_banner:"Scrolling Text Banner",top_media_carousel:"Top Media Carousel (Above Hero)",hero_banner:"Hero Banner (Top Slider)",body_category:"Body Category",face_category:"Face Category",hair_category:"Hair Category",combos_category:"Combos Category",commitments:"Certifications/Commitments",complete_kit:"Complete Kit Banner",marketplace_logos:"Marketplace Logos",nefol_collection:"Nefol Collection",forever_favorites:"Forever Favorites",natural_beauty:"Natural Beauty",whatsappsubscription:"WhatsApp Subscription",splash_screen:"Splash Screen Videos"}[De.sectionType]||De.name;if(!(await fetch(`${rr}/cms/sections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page_slug:"home",section_type:De.sectionType,title:Rs,content:Et,order_index:De.orderIndex||0,is_active:!0})})).ok)throw new Error("Failed to save to CMS")}catch(wt){throw console.error("Failed to save section:",wt),wt}},ut=async()=>{const xe=s.find(ue=>ue.id==="hero_banner");if(xe){r(ue=>ue.map(je=>je.id==="hero_banner"?{...je,settings:Fe}:je));try{await Ct("hero_banner",xe.images[0]||"",void 0,xe.images),t("success","Hero settings saved successfully"),x(!1)}catch{t("error","Failed to save hero settings")}}},ot=async(xe,ue)=>{const je=s.find(De=>De.id===xe);if(!je)return;let ve;je.sectionType==="splash_screen"?(ve=_a(je.images,je.imageCount),ue!==void 0&&ue>=0&&ue<ve.length&&(ve[ue]="")):ve=je.images.filter((De,Be)=>Be!==ue);let Oe;xe==="top_media_carousel"&&je.mediaItems&&(Oe=je.mediaItems.filter((De,Be)=>Be!==ue)),r(De=>De.map(Be=>Be.id===xe?{...Be,images:je.sectionType==="splash_screen"?_a(ve,je.imageCount):ve,mediaItems:Oe||Be.mediaItems}:Be));try{const De=je.sectionType==="splash_screen"?_a(ve,je.imageCount):ve;await Ct(xe,De[0]||"",void 0,De,Oe),t("success","Media removed")}catch{t("error","Failed to update CMS")}},ye=async(xe,ue,je)=>{const ve=s.find(De=>De.id===xe);if(!ve||xe!=="top_media_carousel"||!ve.mediaItems)return;const Oe=[...ve.mediaItems];ue<Oe.length&&(Oe[ue]={...Oe[ue],timing:je}),r(De=>De.map(Be=>Be.id===xe?{...Be,mediaItems:Oe}:Be));try{await Ct(xe,ve.images[0]||"",void 0,ve.images,Oe),t("success","Timing updated successfully")}catch{t("error","Failed to update timing")}},ze=xe=>new Promise((ue,je)=>{const ve=document.createElement("video");ve.crossOrigin="anonymous",ve.src=xe,ve.currentTime=.1,ve.onloadeddata=()=>{ve.onseeked=()=>{const Oe=document.createElement("canvas");Oe.width=ve.videoWidth,Oe.height=ve.videoHeight;const De=Oe.getContext("2d");if(De){De.drawImage(ve,0,0);const Be=Oe.toDataURL("image/jpeg");ue(Be)}else je(new Error("Failed to get canvas context"))},ve.currentTime=.1},ve.onerror=()=>{je(new Error("Failed to load video"))}}),Ye=async(xe,ue)=>{const je=s.find(Oe=>Oe.id===xe);if(!je||!je.images[ue])return;const ve=je.images[ue];if(!/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(ve)){t("error","Selected item is not a video");return}try{const Oe=await ze(ve);A(Oe),T(xe),L(ue),V(16/9),D(null),S(!0)}catch(Oe){console.error("Failed to extract video frame:",Oe),t("error","Failed to extract video frame. Please try again.")}},jt=(xe,ue)=>{const je=s.find(Oe=>Oe.id===xe);if(!je||!je.images[ue])return;const ve=je.images[ue];if(!/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(ve)){t("error","Selected item is not a video");return}N(ve),T(xe),L(ue),V(16/9),E(!0)},it=async xe=>{try{u(Ne=>({...Ne,[R]:!0}));const ue=new File([xe],`cropped-video-${Date.now()}.webm`,{type:"video/webm"}),je=await Dr(ue,rr),ve=s.find(Ne=>Ne.id===R);if(!ve)return;const Oe=[...ve.images];z!==void 0&&z<Oe.length?Oe[z]=je:Oe.push(je);const De=Oe.slice(0,ve.imageCount);let Be;if(R==="top_media_carousel"){const Ne=ve.mediaItems||[];z!==void 0&&z<Ne.length?(Be=[...Ne],Be[z]={...Ne[z],url:je,type:"video"}):(Be=[...Ne],Be.push({url:je,type:"video",timing:Re.autoPlayDelay})),Be=Be.slice(0,ve.imageCount)}r(Ne=>Ne.map(Ce=>Ce.id===R?{...Ce,images:De,mediaItems:Be||Ce.mediaItems}:Ce)),await Ct(R,je,z,De,Be),t("success","Video cropped and uploaded successfully"),E(!1),N(""),T(""),L(void 0)}catch(ue){console.error("Video crop upload failed:",ue),t("error","Failed to upload cropped video")}finally{u(ue=>({...ue,[R]:!1}))}},Xt=()=>{E(!1),N(""),T(""),L(void 0)},ia=(xe,ue)=>{xe.preventDefault(),xe.stopPropagation(),c(ue)},Sa=xe=>{xe.preventDefault(),xe.stopPropagation(),c(null)},Ka=async(xe,ue)=>{xe.preventDefault(),xe.stopPropagation(),c(null);const je=Array.from(xe.dataTransfer.files).filter(ve=>ve.type.startsWith("image/")||ve.type.startsWith("video/")||/\.(mp4|webm|ogg|mov|avi|jpg|jpeg|png|gif|webp)(\?|$)/i.test(ve.name));if(je.length===0){t("error","Please drop image or video files only");return}for(const ve of je)ge(ve)?await Ue(ve,ue,void 0,!0):await Ue(ve,ue)},Ur=(xe,ue)=>{Array.from(xe.target.files||[]).forEach(ve=>{ge(ve)?Ue(ve,ue,void 0,!0):Ue(ve,ue)}),xe.target.value=""};return a?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"text-lg",children:"Loading homepage layout..."})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Homepage Layout Manager"}),e.jsx("p",{className:"text-sm font-light tracking-wide mt-2",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Drag and drop images to different sections or click to upload"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>v(!0),className:"btn-primary flex items-center gap-2",children:[e.jsx(rs,{className:"w-5 h-5"}),"Create New Section"]}),e.jsxs("button",{onClick:()=>h(!p),className:"btn-secondary flex items-center gap-2",children:[e.jsx(ct,{className:"w-5 h-5"}),p?"Edit Mode":"Preview Mode"]}),e.jsxs("button",{onClick:Ze,className:"btn-secondary flex items-center gap-2",children:[e.jsx(or,{className:"w-5 h-5"}),"Refresh"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:s.map(xe=>e.jsxs("div",{onDragOver:ue=>ia(ue,xe.id),onDragLeave:Sa,onDrop:ue=>Ka(ue,xe.id),className:`border-2 rounded-lg p-6 transition-all ${o===xe.id?"border-blue-500 bg-blue-50 border-dashed":"border-gray-200 hover:border-gray-300"} ${d[xe.id]?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[xe.name,xe.isCustom&&e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-green-100 text-green-800 rounded",children:"Custom"})]}),(xe.id==="hero_banner"||xe.id==="top_media_carousel")&&e.jsx("button",{onClick:()=>{xe.id==="hero_banner"?x(!g):m(!f)},className:"p-1.5 hover:bg-gray-100 rounded transition-colors",title:"Animation & Design Settings",children:e.jsx(ws,{className:"w-4 h-4 text-blue-600"})}),xe.isCustom&&e.jsx("button",{onClick:async()=>{if(confirm(`Are you sure you want to delete "${xe.name}"?`))try{const ve=(await(await fetch(`${rr}/cms/sections/home`)).json()).find(Oe=>Oe.section_type===xe.sectionType);if(ve)if((await fetch(`${rr}/cms/sections/${ve.id}`,{method:"DELETE"})).ok)t("success","Section deleted successfully"),await Ze();else throw new Error("Failed to delete")}catch(ue){console.error("Failed to delete section:",ue),t("error","Failed to delete section")}},className:"p-1.5 hover:bg-red-100 rounded transition-colors",title:"Delete Section",children:e.jsx(Mt,{className:"w-4 h-4 text-red-600"})})]}),e.jsx("p",{className:"text-sm text-gray-600",children:xe.description}),xe.id!=="scrolling_text_banner"&&xe.id!=="splash_screen"&&e.jsxs("span",{className:"inline-block mt-2 px-2 py-1 text-xs bg-gray-100 rounded",children:["Max ",xe.imageCount," image",xe.imageCount>1?"s":""]})]}),xe.id!=="scrolling_text_banner"&&xe.id!=="splash_screen"&&e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:xe.id==="hero_banner"||xe.id==="top_media_carousel"?"image/*,video/*":"image/*",multiple:xe.imageCount>1,onChange:ue=>Ur(ue,xe.id),className:"hidden",disabled:d[xe.id]}),e.jsx("div",{className:"p-2 hover:bg-gray-100 rounded transition-colors",children:e.jsx(rn,{className:"w-5 h-5 text-gray-600"})})]})]}),xe.id==="scrolling_text_banner"&&e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-br from-yellow-50 to-orange-50 rounded-lg border border-yellow-200",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scrolling Text (Offers, Promotions, etc.)"}),e.jsx("textarea",{value:_e,onChange:ue=>Se(ue.target.value),placeholder:"Enter text to display in the scrolling banner. You can add multiple items separated by commas or new lines. Example: 'Free Shipping on Orders Above 500', 'Buy 2 Get 1 Free', 'New Arrivals - Shop Now!'",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 resize-y min-h-[100px]",rows:4}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"This text will scroll continuously 24/7 on the homepage"}),e.jsxs("button",{onClick:async()=>{try{if(!s.find(je=>je.id==="scrolling_text_banner"))return;await Ct("scrolling_text_banner","",void 0,[]),t("success","Scrolling text saved successfully")}catch{t("error","Failed to save scrolling text")}},className:"flex items-center gap-2 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:[e.jsx($s,{className:"w-4 h-4"}),"Save Text"]})]})]}),xe.id==="whatsappsubscription"&&e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-br from-green-50 to-blue-50 rounded-lg border border-green-200",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"WhatsApp Subscription Modal Content"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Heading"}),e.jsx("input",{type:"text",value:be.heading,onChange:ue=>Ie({...be,heading:ue.target.value}),placeholder:"Join The Nefol Circle",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Description"}),e.jsx("textarea",{value:be.description,onChange:ue=>Ie({...be,description:ue.target.value}),placeholder:"Stay ahead with exclusive style drops, member-only offers, and insider fashion updates.",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-y min-h-[80px]",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Footer Text"}),e.jsx("input",{type:"text",value:be.footer,onChange:ue=>Ie({...be,footer:ue.target.value}),placeholder:"By subscribing, you agree to receive WhatsApp messages from Nefol.",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Logo Name"}),e.jsx("input",{type:"text",value:be.logoName,onChange:ue=>Ie({...be,logoName:ue.target.value}),placeholder:"NEFL",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Product Image"}),xe.images[0]?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:xe.images[0],alt:"Product",className:"w-full h-32 object-contain rounded-lg border border-gray-200"}),e.jsx("button",{onClick:()=>ot(xe.id,0),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 hover:opacity-100 transition-opacity",children:e.jsx(es,{className:"w-4 h-4"})})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:ue=>{var ve;const je=(ve=ue.target.files)==null?void 0:ve[0];je&&Ue(je,xe.id,0,!0)},className:"hidden"}),e.jsx("div",{className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center hover:border-green-500 hover:bg-green-50 transition-colors",children:e.jsx(rn,{className:"w-6 h-6 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Logo Image"}),xe.images[1]?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:xe.images[1],alt:"Logo",className:"w-full h-32 object-contain rounded-lg border border-gray-200"}),e.jsx("button",{onClick:()=>ot(xe.id,1),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 hover:opacity-100 transition-opacity",children:e.jsx(es,{className:"w-4 h-4"})})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:ue=>{var ve;const je=(ve=ue.target.files)==null?void 0:ve[0];je&&Ue(je,xe.id,1,!0)},className:"hidden"}),e.jsx("div",{className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center hover:border-green-500 hover:bg-green-50 transition-colors",children:e.jsx(rn,{className:"w-6 h-6 text-gray-400"})})]})]})]})}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Edit the text content, upload product image and logo for the WhatsApp subscription modal"}),e.jsxs("button",{onClick:async()=>{try{const ue=s.find(je=>je.id==="whatsappsubscription");if(!ue)return;await Ct("whatsappsubscription",ue.images[0]||"",void 0,ue.images),t("success","WhatsApp subscription content saved successfully")}catch{t("error","Failed to save WhatsApp subscription content")}},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx($s,{className:"w-4 h-4"}),"Save Content"]})]})]}),xe.id==="splash_screen"&&e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-br from-purple-50 to-indigo-50 rounded-lg border border-purple-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold text-purple-900",children:"Splash Screen Videos"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Upload device-specific videos (MP4/WebM) to personalize the opening animation for every visitor."})]}),e.jsx("span",{className:"text-xs text-slate-500",children:"Auto-plays for desktop, tablet & mobile users."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e9.map(({label:ue,helper:je,index:ve})=>{const Oe=xe.images[ve];return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-800",children:ue}),e.jsx("p",{className:"text-xs text-slate-500",children:je})]}),Oe?e.jsxs("div",{className:"relative group border border-purple-200 rounded-xl overflow-hidden bg-white shadow-sm",children:[e.jsx("video",{src:Oe,className:"w-full h-48 object-cover bg-black",controls:!0,playsInline:!0,muted:!0,loop:!0}),!p&&e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"video/*",className:"hidden",onChange:De=>{var Ne;const Be=(Ne=De.target.files)==null?void 0:Ne[0];Be&&Ue(Be,xe.id,ve,!0),De.currentTarget.value=""}}),e.jsx("div",{className:"px-3 py-1 text-xs bg-white/80 text-purple-700 rounded-full shadow",children:"Change"})]}),e.jsx("button",{onClick:()=>ot(xe.id,ve),className:"px-3 py-1 text-xs bg-red-500 text-white rounded-full shadow hover:bg-red-600",children:"Delete"})]})]}):e.jsxs("label",{className:"cursor-pointer block",children:[e.jsx("input",{type:"file",accept:"video/*",className:"hidden",onChange:De=>{var Ne;const Be=(Ne=De.target.files)==null?void 0:Ne[0];Be&&Ue(Be,xe.id,ve,!0),De.currentTarget.value=""}}),e.jsxs("div",{className:"w-full h-48 border-2 border-dashed border-purple-200 rounded-xl flex flex-col items-center justify-center bg-white/70 hover:border-purple-400 hover:bg-purple-50 transition-colors",children:[e.jsx(rn,{className:"w-6 h-6 text-purple-400 mb-2"}),e.jsxs("p",{className:"text-sm text-purple-700 font-medium",children:["Upload ",ue," Video"]}),e.jsx("p",{className:"text-xs text-purple-500 mt-1 text-center px-4",children:"MP4 / WebM  up to 30 MB"})]})]})]},ue)})}),e.jsx("p",{className:"text-xs text-purple-600 mt-4",children:"Tip: Keep videos short (2-4s), muted, and optimized for fast autoplay. Splash screen automatically skips after 1.8 seconds if the video doesn't load."})]}),xe.id==="top_media_carousel"&&f&&e.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ku,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold text-blue-900",children:"Animation & Design Settings"})]}),e.jsx("button",{onClick:()=>m(!1),className:"p-1 hover:bg-blue-200 rounded transition-colors",children:e.jsx(es,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Animation Type"}),e.jsxs("select",{value:Re.animationType,onChange:ue=>ne({...Re,animationType:ue.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"fade",children:"Fade"}),e.jsx("option",{value:"slide",children:"Slide"}),e.jsx("option",{value:"zoom",children:"Zoom"}),e.jsx("option",{value:"cube",children:"Cube 3D"}),e.jsx("option",{value:"flip",children:"Flip"}),e.jsx("option",{value:"coverflow",children:"Coverflow"}),e.jsx("option",{value:"cards",children:"Cards"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Design Style"}),e.jsxs("select",{value:Re.designStyle,onChange:ue=>ne({...Re,designStyle:ue.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"modern",children:"Modern"}),e.jsx("option",{value:"classic",children:"Classic"}),e.jsx("option",{value:"minimal",children:"Minimal"}),e.jsx("option",{value:"gradient",children:"Gradient"}),e.jsx("option",{value:"dark",children:"Dark Theme"}),e.jsx("option",{value:"colorful",children:"Colorful"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Transition Duration: ",Re.transitionDuration,"ms"]}),e.jsx("input",{type:"range",min:"300",max:"3000",step:"100",value:Re.transitionDuration,onChange:ue=>ne({...Re,transitionDuration:parseInt(ue.target.value)}),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"Fast (300ms)"}),e.jsx("span",{children:"Slow (3000ms)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Auto-play Delay: ",Re.autoPlayDelay/1e3,"s"]}),e.jsx("input",{type:"range",min:"2000",max:"15000",step:"500",value:Re.autoPlayDelay,onChange:ue=>ne({...Re,autoPlayDelay:parseInt(ue.target.value)}),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"2s"}),e.jsx("span",{children:"15s"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Re.autoPlay,onChange:ue=>ne({...Re,autoPlay:ue.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Auto-play"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Re.showDots,onChange:ue=>ne({...Re,showDots:ue.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Show Navigation Dots"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Re.showArrows,onChange:ue=>ne({...Re,showArrows:ue.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Show Arrow Buttons"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Re.loop,onChange:ue=>ne({...Re,loop:ue.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Loop Slides"})]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{const ue=s.find(je=>je.id==="top_media_carousel");ue!=null&&ue.settings&&ne(ue.settings),m(!1)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:async()=>{const ue=s.find(je=>je.id==="top_media_carousel");if(ue){r(je=>je.map(ve=>ve.id==="top_media_carousel"?{...ve,settings:Re}:ve));try{await Ct("top_media_carousel",ue.images[0]||"",void 0,ue.images),t("success","Top Media Carousel settings saved successfully"),m(!1)}catch{t("error","Failed to save top media carousel settings")}}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx($s,{className:"w-4 h-4"}),"Save Settings"]})]})]}),xe.id==="hero_banner"&&g&&e.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ku,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold text-blue-900",children:"Animation & Design Settings"})]}),e.jsx("button",{onClick:()=>x(!1),className:"p-1 hover:bg-blue-200 rounded transition-colors",children:e.jsx(es,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Animation Type"}),e.jsxs("select",{value:Fe.animationType,onChange:ue=>X({...Fe,animationType:ue.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"fade",children:"Fade"}),e.jsx("option",{value:"slide",children:"Slide"}),e.jsx("option",{value:"zoom",children:"Zoom"}),e.jsx("option",{value:"cube",children:"Cube 3D"}),e.jsx("option",{value:"flip",children:"Flip"}),e.jsx("option",{value:"coverflow",children:"Coverflow"}),e.jsx("option",{value:"cards",children:"Cards"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Design Style"}),e.jsxs("select",{value:Fe.designStyle,onChange:ue=>X({...Fe,designStyle:ue.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"modern",children:"Modern"}),e.jsx("option",{value:"classic",children:"Classic"}),e.jsx("option",{value:"minimal",children:"Minimal"}),e.jsx("option",{value:"gradient",children:"Gradient"}),e.jsx("option",{value:"dark",children:"Dark Theme"}),e.jsx("option",{value:"colorful",children:"Colorful"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Transition Duration: ",Fe.transitionDuration,"ms"]}),e.jsx("input",{type:"range",min:"300",max:"3000",step:"100",value:Fe.transitionDuration,onChange:ue=>X({...Fe,transitionDuration:parseInt(ue.target.value)}),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"Fast (300ms)"}),e.jsx("span",{children:"Slow (3000ms)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Auto-play Delay: ",Fe.autoPlayDelay/1e3,"s"]}),e.jsx("input",{type:"range",min:"2000",max:"15000",step:"500",value:Fe.autoPlayDelay,onChange:ue=>X({...Fe,autoPlayDelay:parseInt(ue.target.value)}),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"2s"}),e.jsx("span",{children:"15s"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Fe.autoPlay,onChange:ue=>X({...Fe,autoPlay:ue.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Auto-play"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Fe.showDots,onChange:ue=>X({...Fe,showDots:ue.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Show Navigation Dots"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Fe.showArrows,onChange:ue=>X({...Fe,showArrows:ue.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Show Arrow Buttons"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Fe.loop,onChange:ue=>X({...Fe,loop:ue.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Loop Slides"})]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{const ue=s.find(je=>je.id==="hero_banner");ue!=null&&ue.settings&&X(ue.settings),x(!1)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:ut,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx($s,{className:"w-4 h-4"}),"Save Settings"]})]})]}),xe.id!=="splash_screen"&&(xe.images.length===0?e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(Xn,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Drag and drop ",xe.id==="hero_banner"||xe.id==="top_media_carousel"?"images or videos":"images"," here"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"or click the upload button above"})]}):e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:[xe.images.map((ue,je)=>{const ve=ue.toLowerCase(),Oe=/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(ue),De=ue.includes("/uploads/"),Be=Oe||De&&(ve.includes("video")||ve.includes("mp4")||ve.includes("webm")||ve.includes("mov")),Ne=xe.id==="top_media_carousel"&&xe.mediaItems?xe.mediaItems[je]:null,Ce=(Ne==null?void 0:Ne.timing)||(xe.id==="top_media_carousel"?Re.autoPlayDelay:void 0);return(Y==null?void 0:Y.sectionId)===xe.id&&(Y==null||Y.index),e.jsxs("div",{className:"relative group",children:[Be?e.jsx("video",{src:ue,className:"w-full h-32 object-cover rounded-lg border border-gray-200",controls:!1,muted:!0,playsInline:!0,poster:Ne==null?void 0:Ne.thumbnail,children:"Your browser does not support the video tag."}):e.jsx("img",{src:ue,alt:`${xe.name} ${je+1}`,className:`w-full object-cover rounded-lg border border-gray-200 ${xe.id==="hero_banner"?"h-40":"h-32"}`,style:xe.id==="hero_banner"?{aspectRatio:"5/4"}:{}}),Be&&e.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 bg-black bg-opacity-70 text-white text-xs rounded",children:"Video"}),xe.id==="top_media_carousel"&&Ce&&e.jsxs("div",{className:"absolute bottom-2 right-2 px-2 py-1 bg-blue-600 bg-opacity-90 text-white text-xs rounded flex items-center gap-1",children:[e.jsx(cs,{className:"w-3 h-3"}),Ce/1e3,"s"]}),!p&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ot(xe.id,je),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity z-10",children:e.jsx(es,{className:"w-4 h-4"})}),e.jsx("div",{className:"absolute top-2 left-2 flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:Be?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>jt(xe.id,je),className:"p-1 bg-green-500 text-white rounded-full",title:"Crop Video",children:e.jsx(Hu,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Ye(xe.id,je),className:"p-1 bg-blue-500 text-white rounded-full",title:"Crop Video Thumbnail",children:e.jsx(Xn,{className:"w-4 h-4"})})]}):e.jsx("button",{onClick:()=>{A(ue),T(xe.id),L(je);const Je=ie(xe.id)||1;V(Je),D(null),S(!0)},className:"p-1 bg-green-500 text-white rounded-full",title:"Crop Image",children:e.jsx(Hu,{className:"w-4 h-4"})})}),xe.id==="top_media_carousel"&&e.jsx("button",{onClick:()=>{K({sectionId:xe.id,index:je}),J(Ce||Re.autoPlayDelay)},className:"absolute bottom-2 left-2 p-1 bg-purple-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity z-10",title:"Set Timing",children:e.jsx(cs,{className:"w-4 h-4"})}),e.jsxs("label",{className:`absolute cursor-pointer ${xe.id==="top_media_carousel"?"bottom-2 right-2":"bottom-2 left-2"}`,children:[e.jsx("input",{type:"file",accept:xe.id==="hero_banner"||xe.id==="top_media_carousel"?"image/*,video/*":"image/*",onChange:Je=>{var Dt;const Ge=(Dt=Je.target.files)==null?void 0:Dt[0];Ge&&(ge(Ge)?Ue(Ge,xe.id,je,!0):Ue(Ge,xe.id,je))},className:"hidden"}),e.jsx("div",{className:"p-1 bg-blue-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(rn,{className:"w-3 h-3"})})]})]})]},je)}),xe.images.length<xe.imageCount&&!p&&e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:xe.id==="hero_banner"||xe.id==="top_media_carousel"?"image/*,video/*":"image/*",multiple:xe.id==="hero_banner"||xe.id==="top_media_carousel",onChange:ue=>Ur(ue,xe.id),className:"hidden"}),e.jsx("div",{className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center hover:border-blue-500 hover:bg-blue-50 transition-colors",children:e.jsx(rn,{className:"w-6 h-6 text-gray-400"})})]})]})),d[xe.id]&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 text-blue-600",children:[e.jsx(or,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Uploading..."})]})})]},xe.id))}),e.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How to use:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"Drag images or videos from your computer directly onto any section"}),e.jsx("li",{children:"Or click the upload icon to browse and select files"}),e.jsx("li",{children:"Top Media Carousel and Hero Banner support up to 30 images and videos"}),e.jsx("li",{children:"Videos should be in MP4, WebM, OGG, MOV, or AVI format (max 100MB)"}),e.jsx("li",{children:'Click "Create New Section" to add custom sections to your homepage'}),e.jsx("li",{children:"Hover over media to replace or remove them"}),e.jsx("li",{children:"Changes are saved automatically to the CMS"}),e.jsx("li",{children:"Use Preview Mode to see how it looks without edit controls"})]})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Create New Section"}),e.jsx("button",{onClick:()=>{v(!1),he({name:"",description:"",sectionType:"",imageCount:5,type:"gallery"})},className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(es,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section Name *"}),e.jsx("input",{type:"text",value:ae.name,onChange:xe=>he({...ae,name:xe.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Featured Products, Special Offers"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:ae.description,onChange:xe=>he({...ae,description:xe.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Brief description of this section"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section Type (Unique ID) *"}),e.jsx("input",{type:"text",value:ae.sectionType,onChange:xe=>{const ue=xe.target.value.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"");he({...ae,sectionType:`custom_${ue}`})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"featured-products (will become: custom_featured_products)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only lowercase letters, numbers, and underscores"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Images/Videos"}),e.jsx("input",{type:"number",value:ae.imageCount,onChange:xe=>he({...ae,imageCount:parseInt(xe.target.value)||5}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"1",max:"50"})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[e.jsx("button",{onClick:()=>{v(!1),he({name:"",description:"",sectionType:"",imageCount:5,type:"gallery"})},className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:async()=>{if(!ae.name||!ae.sectionType){t("error","Please fill in all required fields");return}try{if((await fetch(`${rr}/cms/sections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page_slug:"home",section_type:ae.sectionType||`custom_${ae.name.toLowerCase().replace(/\s+/g,"_")}`,title:ae.name,content:{title:ae.name,description:ae.description,images:[]},order_index:s.length,is_active:!0})})).ok)t("success","Section created successfully"),v(!1),he({name:"",description:"",sectionType:"",imageCount:5,type:"gallery"}),await Ze();else throw new Error("Failed to create section")}catch(xe){console.error("Failed to create section:",xe),t("error","Failed to create section")}},className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx($s,{className:"w-4 h-4"}),"Create Section"]})]})]})]})}),P&&U&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Choose Image Size"}),(()=>{const xe=s.find(je=>je.id===U.sectionId),ue=ie(U.sectionId);if(ue){const je=ue===1.25?"5:4":ue===1.7777777777777777?"16:9":ue===1.3333333333333333?"4:3":ue===.8?"4:5":"1:1";return e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Recommended for ",xe==null?void 0:xe.name,": ",je]})}return null})()]}),e.jsx("button",{onClick:()=>{W(!1),q(null),M(null)},className:"p-2 hover:bg-gray-100 rounded transition-colors",children:e.jsx(es,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-2 mb-4 max-h-[60vh] overflow-y-auto",children:[e.jsxs("button",{onClick:()=>_t(null),className:"w-full px-4 py-3 text-left border border-gray-300 rounded-lg hover:bg-blue-50 hover:border-blue-500 transition-colors",children:[e.jsx("div",{className:"font-medium",children:"Free (No Crop)"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Upload image as-is without cropping"})]}),(()=>{const xe=ie(U.sectionId);return[{name:"Square (1:1)",ratio:1,desc:"Perfect for profile images and thumbnails"},{name:"Landscape (16:9)",ratio:16/9,desc:"Widescreen format for banners"},{name:"Portrait (4:5)",ratio:4/5,desc:"Vertical format for mobile"},{name:"Hero Banner (5:4)",ratio:5/4,desc:"Standard hero banner format"},{name:"Standard (4:3)",ratio:4/3,desc:"Classic photo format"}].map(je=>{const ve=xe&&Math.abs(je.ratio-xe)<.01;return e.jsxs("button",{onClick:()=>_t(je),className:`w-full px-4 py-3 text-left border rounded-lg transition-colors ${ve?"border-blue-500 bg-blue-50 hover:bg-blue-100":"border-gray-300 hover:bg-blue-50 hover:border-blue-500"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:je.name}),ve&&e.jsx("span",{className:"text-xs bg-blue-500 text-white px-2 py-0.5 rounded",children:"Recommended"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:je.desc})]},je.name)})})()]})]})}),w&&k&&e.jsx(Pj,{imageUrl:k,aspectRatio:O,onCrop:St,onCancel:dt}),F&&y&&e.jsx(Z8,{videoUrl:y,aspectRatio:O,onCrop:it,onCancel:Xt}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Set Media Timing"}),e.jsx("button",{onClick:()=>{K(null),J(7e3)},className:"p-2 hover:bg-gray-100 rounded transition-colors",children:e.jsx(es,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Display Duration: ",(le/1e3).toFixed(1),"s"]}),e.jsx("input",{type:"range",min:"1000",max:"30000",step:"500",value:le,onChange:xe=>J(parseInt(xe.target.value)),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"1s"}),e.jsx("span",{children:"30s"})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[e.jsx("button",{onClick:()=>{K(null),J(7e3)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:async()=>{Y&&(await ye(Y.sectionId,Y.index,le),K(null),J(7e3))},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[e.jsx($s,{className:"w-4 h-4"}),"Save Timing"]})]})]})]})})]})}const s9=()=>{if(typeof window<"u"){const t=window.location.hostname;if(t==="thenefol.com"||t==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"};function r9(){const{notify:t}=mr(),[s,r]=b.useState("offers"),[a,n]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState([]),[d,u]=b.useState(!1),[p,h]=b.useState(!0),[g,x]=b.useState(null),[f,m]=b.useState(null),[j,v]=b.useState(!1),w=s9();b.useEffect(()=>{S(),s==="recommendation_posts"?E():F()},[s]);const S=async()=>{try{h(!0),console.log(" Loading products from API:",`${w}/products`);const N=await fetch(`${w}/products?_=${Date.now()}`,{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(!N.ok)throw new Error(`HTTP error! status: ${N.status}`);const R=await N.json();console.log(" Raw API response:",typeof R,Array.isArray(R)?`Array with ${R.length} items`:"Object");let T=[];Array.isArray(R)?(T=R,console.log(" Response is array:",T.length)):R&&R.success&&Array.isArray(R.data)?(T=R.data,console.log(" Response has success.data:",T.length)):R&&Array.isArray(R.data)?(T=R.data,console.log(" Response has data array:",T.length)):console.warn(" Unexpected response format:",R);const z=T.filter(L=>L&&L.id&&L.title).map(L=>({id:L.id,title:L.title||"",slug:L.slug||"",list_image:L.list_image||L.listImage||"",price:L.price||""}));console.log(` Valid products: ${z.length}`),c(z),z.length===0&&console.warn(" No valid products found after filtering")}catch(N){console.error(" Failed to load products:",N),t("error","Failed to load products. Please check the console for details."),c([])}finally{h(!1)}},F=async()=>{try{u(!0);const R=await(await fetch(`${w}/collections?type=${s}`)).json();R.success&&n(R.data||[])}catch(N){console.error("Failed to load collections:",N),t("error","Failed to load collections")}finally{u(!1)}},E=async()=>{try{u(!0);const R=await(await fetch(`${w}/recommendation-posts`)).json();R.success&&l(R.data||[])}catch(N){console.error("Failed to load recommendation posts:",N),t("error","Failed to load recommendation posts")}finally{u(!1)}},k=async N=>{try{const R=localStorage.getItem("auth_token"),T=localStorage.getItem("role")||"admin",z=localStorage.getItem("permissions")||"orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update",L=g!=null&&g.id?`${w}/${s==="recommendation_posts"?"recommendation-posts":"collections"}/${g.id}`:`${w}/${s==="recommendation_posts"?"recommendation-posts":"collections"}`,O=g!=null&&g.id?"PUT":"POST",Z=await(await fetch(L,{method:O,headers:{"Content-Type":"application/json","x-user-role":T,"x-user-permissions":z,...R&&{Authorization:`Bearer ${R}`}},body:JSON.stringify(N)})).json();Z.success?(t("success",g!=null&&g.id?"Updated successfully":"Created successfully"),v(!1),x(null),s==="recommendation_posts"?E():F()):t("error",Z.message||"Failed to save")}catch(R){console.error("Failed to save:",R),t("error","Failed to save")}},A=async()=>{if(f)try{const N=localStorage.getItem("auth_token"),R=localStorage.getItem("role")||"admin",T=localStorage.getItem("permissions")||"orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update",z=f.type==="post"?`${w}/recommendation-posts/${f.id}`:`${w}/collections/${f.id}`,O=await(await fetch(z,{method:"DELETE",headers:{"x-user-role":R,"x-user-permissions":T,...N&&{Authorization:`Bearer ${N}`}}})).json();O.success?(t("success","Deleted successfully"),m(null),s==="recommendation_posts"?E():F()):t("error",O.message||"Failed to delete")}catch(N){console.error("Failed to delete:",N),t("error","Failed to delete")}},y=[{id:"offers",label:"Offers",icon:""},{id:"new_arrivals",label:"New Arrivals",icon:""},{id:"best_sellers",label:"Best Sellers",icon:""},{id:"recommendations",label:"Recommendations",icon:""},{id:"recommendation_posts",label:"Recommendation Posts",icon:""}];return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Product Collections"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage product collections and recommendations"})]}),e.jsxs("button",{onClick:()=>{x(null),v(!0)},className:"btn-primary",children:["Add ",s==="recommendation_posts"?"Recommendation Post":"Item"]})]}),e.jsx("div",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:y.map(N=>e.jsxs("button",{onClick:()=>r(N.id),className:`whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium transition-colors ${s===N.id?"":"border-transparent"}`,style:s===N.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx("span",{className:"mr-2",children:N.icon}),N.label]},N.id))})}),s!=="recommendation_posts"&&e.jsx(a9,{collections:a,loading:d,onEdit:N=>{x(N),v(!0)},onDelete:N=>m({id:N,type:"collection"}),onTogglePublish:async(N,R)=>{try{const T=localStorage.getItem("auth_token"),z=localStorage.getItem("role")||"admin",L=localStorage.getItem("permissions")||"orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update";(await(await fetch(`${w}/collections/${N}`,{method:"PUT",headers:{"Content-Type":"application/json","x-user-role":z,"x-user-permissions":L,...T&&{Authorization:`Bearer ${T}`}},body:JSON.stringify({is_published:!R})})).json()).success&&(t("success","Updated successfully"),F())}catch{t("error","Failed to update")}}}),s==="recommendation_posts"&&e.jsx(n9,{posts:i,loading:d,onEdit:N=>{x(N),v(!0)},onDelete:N=>m({id:N,type:"post"}),onTogglePublish:async(N,R)=>{try{const T=localStorage.getItem("auth_token"),z=localStorage.getItem("role")||"admin",L=localStorage.getItem("permissions")||"orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update";(await(await fetch(`${w}/recommendation-posts/${N}`,{method:"PUT",headers:{"Content-Type":"application/json","x-user-role":z,"x-user-permissions":L,...T&&{Authorization:`Bearer ${T}`}},body:JSON.stringify({is_published:!R})})).json()).success&&(t("success","Updated successfully"),E())}catch{t("error","Failed to update")}}}),j&&e.jsx(i9,{type:s,editing:g,products:o,productsLoading:p,onClose:()=>{v(!1),x(null)},onSave:k}),f&&e.jsx(Va,{open:!0,onClose:()=>m(null),onConfirm:A,title:"Delete Item",description:"Are you sure you want to delete this item? This action cannot be undone."})]})}function a9({collections:t,loading:s,onEdit:r,onDelete:a,onTogglePublish:n}){const l=(()=>{if(typeof window<"u"){const c=window.location.hostname;if(c==="thenefol.com"||c==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),o=c=>{if(!c)return"";if(/^https?:\/\//i.test(c))return c;const d=l.replace(/\/$/,""),u=c.startsWith("/")?c:`/${c}`;return`${d}${u}`};return s?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):t.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No items found"}):e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(c=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[(c.product_image||c.image_url)&&e.jsx("img",{src:o(c.product_image||c.image_url||""),alt:c.product_title||"",className:"h-12 w-12 rounded object-cover mr-3",style:{aspectRatio:"1/1"},onError:d=>{const u=d.currentTarget;u.style.display="none"}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:c.product_title||c.title||"No Product"}),c.product_id&&e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",c.product_id]})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:c.title||"-"}),c.subtitle&&e.jsx("div",{className:"text-sm text-gray-500",children:c.subtitle})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:c.code||"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>n(c.id,c.is_published),className:`px-2 py-1 rounded text-xs font-medium ${c.is_published?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:c.is_published?"Published":"Draft"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.order_index}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>r(c),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>a(c.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},c.id))})]})})}function n9({posts:t,loading:s,onEdit:r,onDelete:a,onTogglePublish:n}){return s?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):t.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No posts found"}):e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Products"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Published"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(i=>{var l,o;return e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:i.title}),i.content&&e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:i.content})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[((l=i.products)==null?void 0:l.length)||((o=i.product_ids)==null?void 0:o.length)||0," products"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>n(i.id,i.is_published),className:`px-2 py-1 rounded text-xs font-medium ${i.is_published?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:i.is_published?"Published":"Draft"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.published_at?new Date(i.published_at).toLocaleDateString():"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>r(i),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>a(i.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},i.id)})})]})})}function i9({type:t,editing:s,products:r,productsLoading:a,onClose:n,onSave:i}){var S,F;const{notify:l}=mr(),o=t==="recommendation_posts",c=!!s,[d,u]=b.useState(!1),[p,h]=b.useState(null),x=(()=>{if(typeof window<"u"){const E=window.location.hostname;if(E==="thenefol.com"||E==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),f=E=>{if(!E)return"";if(/^https?:\/\//i.test(E))return E;const k=x.replace(/\/$/,""),A=E.startsWith("/")?E:`/${E}`;return`${k}${A}`},[m,j]=b.useState(()=>{if(s)if(o){const E=s;return{title:E.title||"",content:E.content||"",image_url:E.image_url||"",product_ids:E.product_ids||[],is_published:E.is_published||!1,order_index:E.order_index||0}}else{const E=s;return{collection_type:E.collection_type,product_id:E.product_id||"",title:E.title||"",subtitle:E.subtitle||"",description:E.description||"",image_url:E.image_url||"",code:E.code||"",expiry_date:E.expiry_date||"",discount_percent:E.discount_percent||"",discount_amount:E.discount_amount||"",is_featured:E.is_featured||!1,is_published:E.is_published||!1,order_index:E.order_index||0}}return{collection_type:t,product_id:"",title:"",subtitle:"",description:"",image_url:"",code:"",expiry_date:"",discount_percent:"",discount_amount:"",is_featured:!1,is_published:!1,order_index:0,...o&&{title:"",content:"",image_url:"",product_ids:[],is_published:!1,order_index:0}}});b.useEffect(()=>{if(m.image_url){const E=/^https?:\/\//i.test(m.image_url)?m.image_url:f(m.image_url);h(E),console.log(" Image preview updated:",{image_url:m.image_url,previewUrl:E})}else h(null)},[m.image_url]);const v=async E=>{var A;const k=(A=E.target.files)==null?void 0:A[0];if(k){if(!k.type.startsWith("image/")){l("error","Please select an image file");return}if(k.size>5*1024*1024){l("error","Image size must be less than 5MB");return}try{u(!0);const y=await Dr(k,x),N=y.replace(/^https?:\/\/[^/]+/,"");console.log(" Uploaded image:",{absoluteUrl:y,relativePath:N}),j({...m,image_url:N}),h(y),l("success","Image uploaded successfully")}catch(y){console.error("Upload failed:",y),l("error","Failed to upload image")}finally{u(!1)}}},w=E=>{E.preventDefault();const k={...m};k.image_url&&(/^https?:\/\//i.test(k.image_url)?k.image_url=k.image_url.replace(/^https?:\/\/[^/]+/,""):k.image_url.startsWith("/")||(k.image_url=`/${k.image_url}`)),o?(k.product_ids=Array.isArray(k.product_ids)?k.product_ids:[],k.order_index=parseInt(k.order_index)||0):(k.product_id=k.product_id?parseInt(k.product_id):null,k.discount_percent=k.discount_percent?parseFloat(k.discount_percent):null,k.discount_amount=k.discount_amount?parseFloat(k.discount_amount):null,k.order_index=parseInt(k.order_index)||0),console.log(" Saving collection with data:",{...k,image_url:k.image_url}),i(k)};return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold",children:[c?"Edit":"Add"," ",o?"Recommendation Post":"Collection Item"]}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[!o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product *"}),e.jsxs("select",{value:m.product_id||"",onChange:E=>j({...m,product_id:E.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,disabled:a,children:[e.jsx("option",{value:"",children:a?"Loading products...":"Select Product"}),a?e.jsx("option",{disabled:!0,children:"Loading products..."}):r.length===0?e.jsx("option",{disabled:!0,children:"No products available"}):r.map(E=>e.jsxs("option",{value:E.id,children:[E.title," ",E.price?`- ${E.price}`:""]},E.id))]}),a&&e.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Loading products from server..."}),!a&&r.length===0&&e.jsxs("p",{className:"mt-1 text-sm text-red-500",children:["No products available. Please add products first in the Products page.",e.jsx("button",{type:"button",onClick:()=>window.open("/admin/products","_blank"),className:"ml-2 text-blue-600 hover:underline",children:"Go to Products"})]}),!a&&r.length>0&&e.jsxs("p",{className:"mt-1 text-sm text-green-600",children:[r.length," product(s) available"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{type:"text",value:m.title,onChange:E=>j({...m,title:E.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subtitle"}),e.jsx("input",{type:"text",value:m.subtitle,onChange:E=>j({...m,subtitle:E.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:m.description,onChange:E=>j({...m,description:E.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Code"}),e.jsx("input",{type:"text",value:m.code,onChange:E=>j({...m,code:E.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Expiry Date"}),e.jsx("input",{type:"date",value:m.expiry_date,onChange:E=>j({...m,expiry_date:E.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Discount %"}),e.jsx("input",{type:"number",step:"0.01",value:m.discount_percent,onChange:E=>j({...m,discount_percent:E.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Discount Amount"}),e.jsx("input",{type:"number",step:"0.01",value:m.discount_amount,onChange:E=>j({...m,discount_amount:E.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]})]}),o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title *"}),e.jsx("input",{type:"text",required:!0,value:m.title,onChange:E=>j({...m,title:E.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Content"}),e.jsx("textarea",{value:m.content,onChange:E=>j({...m,content:E.target.value}),rows:5,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Products"}),e.jsx("select",{multiple:!0,value:((S=m.product_ids)==null?void 0:S.map(String))||[],onChange:E=>{const k=Array.from(E.target.selectedOptions,A=>parseInt(A.value));j({...m,product_ids:k})},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",size:5,children:r.length===0?e.jsx("option",{disabled:!0,children:"Loading products..."}):r.map(E=>e.jsxs("option",{value:E.id,children:[E.title," ",E.price?`- ${E.price}`:""]},E.id))}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Hold Ctrl/Cmd to select multiple products"}),((F=m.product_ids)==null?void 0:F.length)>0&&e.jsxs("p",{className:"mt-1 text-sm text-blue-600",children:["Selected: ",m.product_ids.length," product(s)"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Image"}),e.jsxs("div",{className:"mt-1 space-y-3",children:[p&&e.jsxs("div",{className:"relative w-full bg-gray-100 rounded-lg p-2",children:[e.jsx("img",{src:p,alt:"Preview",className:"w-full h-auto rounded-lg border border-gray-300 object-contain",style:{maxHeight:"256px",width:"auto",margin:"0 auto",display:"block"},onError:E=>{console.error(" Image preview failed to load:",p);const k=E.currentTarget;k.style.display="none",l("error","Failed to load image preview")},onLoad:()=>{console.log(" Image preview loaded:",p)}}),e.jsx("button",{type:"button",onClick:()=>{j({...m,image_url:""}),h(null)},className:"absolute top-4 right-4 bg-red-500 text-white rounded-full p-1.5 hover:bg-red-600 shadow-lg",title:"Remove image",children:""})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"flex-1 cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:v,disabled:d,className:"hidden"}),e.jsx("div",{className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsx("span",{className:"text-sm text-gray-600",children:"Uploading..."}):e.jsx("span",{className:"text-sm text-gray-700",children:" Upload Image"})})]}),e.jsx("span",{className:"text-sm text-gray-500",children:"or"}),e.jsx("input",{type:"url",value:m.image_url||"",onChange:E=>{const k=E.target.value;if(j({...m,image_url:k}),k){const A=/^https?:\/\//i.test(k)?k:f(k);h(A)}else h(null)},placeholder:"Enter image URL (e.g., /uploads/image.jpg or http://...)",className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Upload an image or enter a URL. Recommended: 1200x800px or similar aspect ratio"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Order Index"}),e.jsx("input",{type:"number",value:m.order_index,onChange:E=>j({...m,order_index:E.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-6",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:m.is_featured||!1,onChange:E=>j({...m,is_featured:E.target.checked}),className:"mr-2"}),"Featured"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:m.is_published,onChange:E=>j({...m,is_published:E.target.checked}),className:"mr-2"}),"Published"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d||!o&&!m.product_id,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Uploading...":c?"Update":"Create"})]})]})]})})}function l9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState(""),[c,d]=b.useState("all"),[u,p]=b.useState("cart"),[h,g]=b.useState(null),[x,f]=b.useState(null),[m,j]=b.useState(!1);b.useEffect(()=>{v()},[]);const v=async()=>{try{i(!0);const[y,N]=await Promise.all([fetch("/api/admin/cart/items"),fetch("/api/admin/checkout/sessions")]);if(y.ok){const R=await y.json();s(R.items||[])}if(N.ok){const R=await N.json();a(R.sessions||[])}}catch(y){console.error("Error fetching cart/checkout data:",y)}finally{i(!1)}},w=t.filter(y=>y.product_name.toLowerCase().includes(l.toLowerCase())||y.user_name.toLowerCase().includes(l.toLowerCase())||y.user_email.toLowerCase().includes(l.toLowerCase())),S=r.filter(y=>{const N=y.user_name.toLowerCase().includes(l.toLowerCase())||y.user_email.toLowerCase().includes(l.toLowerCase())||y.session_id.toLowerCase().includes(l.toLowerCase()),R=c==="all"||y.status===c;return N&&R}),F=async(y,N)=>{try{(await fetch(`/api/admin/cart/items/${y}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantity:N})})).ok?s(t.map(T=>T.id===y?{...T,quantity:N,total_price:T.price*N}:T)):alert("Failed to update cart item quantity")}catch(R){console.error("Error updating cart item:",R),alert("Error updating cart item")}},E=async y=>{if(confirm("Are you sure you want to remove this item from cart?"))try{(await fetch(`/api/admin/cart/items/${y}`,{method:"DELETE"})).ok?s(t.filter(R=>R.id!==y)):alert("Failed to remove cart item")}catch(N){console.error("Error removing cart item:",N),alert("Error removing cart item")}},k=async(y,N)=>{try{(await fetch(`/api/admin/checkout/sessions/${y}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:N})})).ok?a(T=>T.map(z=>z.id===y?{...z,status:N}:z)):alert("Failed to update session status")}catch(R){console.error("Error updating session status:",R),alert("Error updating session status")}},A=y=>{switch(y){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"abandoned":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"expired":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Cart & Checkout Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage user carts and checkout sessions"})]}),e.jsx("div",{children:e.jsx("div",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"cart",label:"Cart Items",icon:Qs},{id:"checkout",label:"Checkout Sessions",icon:li}].map(y=>e.jsxs("button",{onClick:()=>p(y.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm transition-colors ${u===y.id?"":"border-transparent"}`,style:u===y.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx(y.icon,{className:"h-4 w-4 mr-2"}),y.label]},y.id))})})}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search cart/checkout data...",value:l,onChange:y=>o(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),u==="checkout"&&e.jsxs("select",{value:c,onChange:y=>d(y.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"abandoned",children:"Abandoned"}),e.jsx("option",{value:"expired",children:"Expired"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(Qs,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Cart Items"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(li,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Checkout Sessions"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(cs,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending Sessions"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r.filter(y=>y.status==="pending").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(fa,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Cart Value"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:["",t.reduce((y,N)=>y+N.total_price,0).toLocaleString()]})]})]})})]}),u==="cart"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Added"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:w.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-lg object-cover",src:y.product_image||"/placeholder-product.png",alt:y.product_name})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:y.product_name}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",y.product_id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:y.user_name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:y.user_email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>F(y.id,Math.max(1,y.quantity-1)),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"-"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white min-w-[2rem] text-center",children:y.quantity}),e.jsx("button",{onClick:()=>F(y.id,y.quantity+1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"+"})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["",y.price.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["",y.total_price.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(y.added_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{g(y),j(!0)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(ct,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>E(y.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},y.id))})]})})}),u==="checkout"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Session"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Items"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:S.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:y.session_id}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",y.id]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:y.user_name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:y.user_email})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["",y.total_amount.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:y.items_count}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${A(y.status)}`,children:y.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(y.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{f(y),j(!0)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(ct,{className:"h-4 w-4"})}),y.status==="pending"&&e.jsx("button",{onClick:()=>k(y.id,"completed"),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:"Complete"})]})})]},y.id))})]})})}),m&&(h||x)&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:h?"Cart Item Details":"Checkout Session Details"}),e.jsx("div",{className:"space-y-4",children:h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Product"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:h.product_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"User"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[h.user_name," (",h.user_email,")"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Quantity"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:h.quantity})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Unit Price"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:["",h.price.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Price"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:["",h.total_price.toLocaleString()]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Added At"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(h.added_at).toLocaleString()})]})]}):x?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Session ID"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:x.session_id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"User"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[x.user_name," (",x.user_email,")"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Amount"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:["",x.total_amount.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Items Count"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:x.items_count})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${A(x.status)}`,children:x.status})]})]}),x.payment_method&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Payment Method"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:x.payment_method})]}),x.shipping_address&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Shipping Address"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:x.shipping_address})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Created At"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(x.created_at).toLocaleString()})]}),x.completed_at&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Completed At"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(x.completed_at).toLocaleString()})]})]}):null}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>{j(!1),g(null),f(null)},className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Close"})})]})})})]})}function o9(){const[t,s]=b.useState([]),[r,a]=b.useState(null),[n,i]=b.useState(!0),[l,o]=b.useState("all"),[c,d]=b.useState(1),[u,p]=b.useState(1),[h,g]=b.useState(""),[x,f]=b.useState(""),[m,j]=b.useState(!1),[v,w]=b.useState("view"),[S,F]=b.useState(""),[E,k]=b.useState("date"),[A,y]=b.useState("desc"),[N,R]=b.useState({total:0,pending:0,approved:0,rejected:0}),[T,z]=b.useState({commission_percentage:15,is_active:!0}),[L,O]=b.useState(!1),[V,Z]=b.useState(!1),[D,P]=b.useState("applications"),[W,ee]=b.useState([]),[M,U]=b.useState(!1),[q,Y]=b.useState(null),[K,le]=b.useState("");b.useEffect(()=>{J(),ae()},[l,c,E,A]),b.useEffect(()=>{D==="referrals"&&be()},[D]),b.useEffect(()=>{const ge=setTimeout(()=>{S!==""&&J()},500);return()=>clearTimeout(ge)},[S]);const J=async()=>{try{i(!0);const ge=new URLSearchParams({page:c.toString(),limit:"10",sort:E,order:A});l!=="all"&&ge.append("status",l),S.trim()&&ge.append("search",S.trim());const ie=await fetch(`/api/admin/affiliate-applications?${ge}`),Ue=await ie.json();ie.ok&&Ue.applications?(s(Ue.applications),p(Ue.pagination.pages),R({total:Ue.pagination.total,pending:Ue.applications.filter(St=>St.status==="pending").length,approved:Ue.applications.filter(St=>St.status==="approved").length,rejected:Ue.applications.filter(St=>St.status==="rejected").length})):(console.error("Failed to fetch applications:",Ue.error||"Unknown error"),s([]),p(0),R({total:0,pending:0,approved:0,rejected:0}))}catch(ge){console.error("Error fetching applications:",ge),alert("Failed to load applications. Please check your connection and try again.")}finally{i(!1)}},ae=async()=>{try{const ge=await fetch("/api/admin/affiliate-commission-settings"),ie=await ge.json();ge.ok&&ie.commission_percentage!==void 0&&z(ie)}catch(ge){console.error("Error fetching commission settings:",ge)}},he=async()=>{try{Z(!0);const ge=await fetch("/api/admin/affiliate-commission-settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)}),ie=await ge.json();ge.ok&&ie.commission_percentage!==void 0?(alert("Commission settings updated successfully!"),O(!1),z(ie),window.io&&window.io.emit("commission_settings_updated",ie)):alert("Failed to update commission settings: "+(ie.error||"Unknown error"))}catch(ge){console.error("Error updating commission settings:",ge),alert("Error updating commission settings")}finally{Z(!1)}},Fe=async()=>{if(r)try{const ge=await fetch(`/api/admin/affiliate-applications/${r.id}/approve`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminNotes:h})}),ie=await ge.json();ge.ok&&ie.application?(alert(`Application approved! Verification code: ${ie.verificationCode}`),j(!1),g(""),J()):alert("Failed to approve application: "+(ie.error||"Unknown error"))}catch(ge){console.error("Error approving application:",ge),alert("Error approving application")}},X=async()=>{if(!r||!x.trim()){alert("Please provide a rejection reason");return}try{const ge=await fetch(`/api/admin/affiliate-applications/${r.id}/reject`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({rejectionReason:x})}),ie=await ge.json();ge.ok&&ie.id?(alert("Application rejected"),j(!1),f(""),J()):alert("Failed to reject application: "+(ie.error||"Unknown error"))}catch(ge){console.error("Error rejecting application:",ge),alert("Error rejecting application")}},Re=(ge,ie)=>{a(ge),w(ie),j(!0),g(""),f("")},ne=ge=>{switch(ge){case"approved":return e.jsx(Vt,{className:"h-5 w-5 text-green-500"});case"rejected":return e.jsx(Kt,{className:"h-5 w-5 text-red-500"});default:return e.jsx(cs,{className:"h-5 w-5 text-yellow-500"})}},_e=ge=>{switch(ge){case"approved":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"}},Se=ge=>new Date(ge).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),be=async()=>{try{U(!0);const ge=await fetch("/api/admin/affiliate-referral-analytics"),ie=await ge.json();ge.ok&&ie.analytics?ee(ie.analytics):(console.error("Failed to fetch referral analytics:",ie.error||"Unknown error"),ee([]))}catch(ge){console.error("Error fetching referral analytics:",ge),ee([])}finally{U(!1)}},Ie=W.filter(ge=>{var Ue,St,dt,_t;if(!K.trim())return!0;const ie=K.toLowerCase();return((Ue=ge.name)==null?void 0:Ue.toLowerCase().includes(ie))||((St=ge.email)==null?void 0:St.toLowerCase().includes(ie))||((dt=ge.id)==null?void 0:dt.toString().includes(ie))||((_t=ge.phone)==null?void 0:_t.includes(ie))}),Ze=ge=>{Y(q===ge?null:ge)};return e.jsxs("div",{className:"min-h-screen",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)",backgroundColor:"var(--arctic-blue-background)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsx("div",{className:"metric-card border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Affiliate Program Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage affiliate applications, approvals, and partner accounts"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>P("applications"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${D==="applications"?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Applications"}),e.jsx("button",{onClick:()=>P("referrals"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${D==="referrals"?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Referral Analytics"})]})})]})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[e.jsx(b4,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),L?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:T.commission_percentage,onChange:ge=>z(ie=>({...ie,commission_percentage:parseFloat(ge.target.value)||0})),className:"w-20 px-2 py-1 text-sm border border-blue-300 dark:border-blue-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"}),e.jsx("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:"%"}),e.jsx("button",{onClick:he,disabled:V,className:"p-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 disabled:opacity-50",title:"Save changes",children:e.jsx($s,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>O(!1),className:"p-1 text-gray-600 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",title:"Cancel",children:e.jsx(Kt,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:["Commission: ",T.commission_percentage,"%"]}),e.jsx("button",{onClick:()=>O(!0),className:"p-1 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-800 rounded",title:"Edit commission percentage",children:e.jsx(jr,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"flex items-center gap-3",children:D==="applications"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:J,disabled:n,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[e.jsx(or,{className:`h-4 w-4 ${n?"animate-spin":""}`}),"Refresh"]}),e.jsxs("button",{className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(wa,{className:"h-4 w-4"}),"Export"]})]}):e.jsxs("button",{onClick:be,disabled:M,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[e.jsx(or,{className:`h-4 w-4 ${M?"animate-spin":""}`}),"Refresh Analytics"]})})]})}),e.jsx("div",{className:"p-6",children:D==="referrals"?e.jsxs("div",{children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by affiliate name, email, ID, or phone...",value:K,onChange:ge=>le(ge.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})}),M?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-12 shadow-sm border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(or,{className:"h-8 w-8 animate-spin mx-auto text-blue-600 dark:text-blue-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading referral analytics..."})]}):Ie.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-12 shadow-sm border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(So,{className:"h-8 w-8 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:K?"No affiliates found matching your search":"No affiliate data available"})]}):e.jsx("div",{className:"space-y-4",children:Ie.map(ge=>{var ie,Ue,St,dt,_t,Ct;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"p-6 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",onClick:()=>Ze(ge.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:ge.name||"Unknown"}),e.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:["ID: ",ge.id]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ge.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-400"}`,children:ge.status||"unverified"})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ss,{className:"h-4 w-4"}),ge.email]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(pa,{className:"h-4 w-4"}),ge.phone]}),ge.platform&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Yn,{className:"h-4 w-4"}),ge.platform]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((ie=ge.stats)==null?void 0:ie.total_referrals)||0}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Referrals"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:((Ue=ge.stats)==null?void 0:Ue.confirmed_referrals)||0}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Confirmed"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:((St=ge.stats)==null?void 0:St.unique_customers)||0}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Customers"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:["",((_t=(dt=ge.stats)==null?void 0:dt.total_earnings)==null?void 0:_t.toFixed(2))||"0.00"]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Earnings"})]}),q===ge.id?e.jsx(hm,{className:"h-5 w-5 text-gray-400"}):e.jsx(mm,{className:"h-5 w-5 text-gray-400"})]})]})}),q===ge.id&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6 bg-gray-50 dark:bg-gray-900/50",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Pt,{className:"h-5 w-5"}),"Referrals (",((Ct=ge.referrals)==null?void 0:Ct.length)||0,")"]}),ge.referrals&&ge.referrals.length>0?e.jsx("div",{className:"space-y-4",children:ge.referrals.map((ut,ot)=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:ut.customer_name||"Unknown Customer"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",ut.customer_email,")"]})]}),ut.order_number&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Order: ",ut.order_number]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:["Date: ",Se(ut.referral_date||ut.order_date)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:["",parseFloat(ut.commission_earned||0).toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Commission"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Order Total: ",parseFloat(ut.order_total||ut.order_total_amount||0).toFixed(2)]})]})]}),ut.order_items&&Array.isArray(ut.order_items)&&ut.order_items.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-1",children:[e.jsx(fa,{className:"h-4 w-4"}),"Products:"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:ut.order_items.map((ye,ze)=>e.jsxs("div",{className:"text-sm bg-gray-50 dark:bg-gray-700/50 rounded p-2",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:ye.title||ye.name||"Unknown Product"}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Qty: ",ye.quantity||0,"  ",parseFloat(ye.price||0).toFixed(2)]})]},ze))})]})]},ot))}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No referrals yet"})]}),ge.products&&ge.products.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(D4,{className:"h-5 w-5"}),"All Products Sold (",ge.products.length,")"]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Product"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Customer"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Order"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Qty"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:ge.products.map((ut,ot)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:ut.product_name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:ut.customer_name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:ut.order_number}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:ut.quantity}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:["",parseFloat(ut.price||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:Se(ut.referral_date)})]},ot))})]})})})]})]})]},ge.id)})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Applications"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:N.total}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"All time applications"})]}),e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-full",children:e.jsx(Pt,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:N.pending}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Awaiting approval"})]}),e.jsx("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/20 rounded-full",children:e.jsx(cs,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:N.approved}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Active partners"})]}),e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-full",children:e.jsx(Vt,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:N.rejected}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Not approved"})]}),e.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/20 rounded-full",children:e.jsx(Kt,{className:"h-6 w-6 text-red-600 dark:text-red-400"})})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or platform...",value:S,onChange:ge=>F(ge.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cl,{className:"h-4 w-4 text-gray-400"}),e.jsxs("select",{value:l,onChange:ge=>o(ge.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"h-4 w-4 text-gray-400"}),e.jsxs("select",{value:E,onChange:ge=>k(ge.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"status",children:"Sort by Status"})]})]}),e.jsx("button",{onClick:()=>y(A==="asc"?"desc":"asc"),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:`Sort ${A==="asc"?"Descending":"Ascending"}`,children:A==="asc"?"":""})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Applicant"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Platform"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Followers"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Applied"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(or,{className:"h-4 w-4 animate-spin"}),"Loading applications..."]})})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(So,{className:"h-8 w-8 text-gray-400"}),"No applications found",S&&e.jsx("p",{className:"text-sm",children:"Try adjusting your search criteria"})]})})}):t.map(ge=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:ge.name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:ge.email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:ge.phone})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:ge.platform})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:ge.followers})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${_e(ge.status)}`,children:[ne(ge.status),ge.status]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:Se(ge.application_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Re(ge,"view"),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(ct,{className:"h-4 w-4"})}),ge.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Re(ge,"approve"),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:e.jsx(Vt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Re(ge,"reject"),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Kt,{className:"h-4 w-4"})})]})]})})]},ge.id))})]})}),u>1&&e.jsx("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Page ",c," of ",u]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>d(Math.max(1,c-1)),disabled:c===1,className:"px-3 py-1 text-sm border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>d(Math.min(u,c+1)),disabled:c===u,className:"px-3 py-1 text-sm border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]}),m&&r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:[v==="view"&&"Application Details",v==="approve"&&"Approve Application",v==="reject"&&"Reject Application"]}),e.jsx("button",{onClick:()=>j(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:e.jsx(Kt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pt,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Name:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.name})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ss,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Email:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pa,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Phone:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.phone})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Social Media Profiles"}),e.jsxs("div",{className:"space-y-3",children:[r.instagram&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ab,{className:"h-4 w-4 text-pink-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Instagram:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.instagram})]}),r.youtube&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ib,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"YouTube:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.youtube})]}),r.facebook&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Eb,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Facebook:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.facebook})]}),r.snapchat&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fs,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Snapchat:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.snapchat})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Address"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fm,{className:"h-4 w-4 text-slate-500"}),e.jsxs("span",{className:"text-sm text-slate-900 dark:text-slate-100",children:[r.house_number,", ",r.street,r.building&&`, ${r.building}`,r.apartment&&`, ${r.apartment}`,e.jsx("br",{}),r.road,", ",r.city,e.jsx("br",{}),r.pincode,", ",r.state]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Experience"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-700 p-3 rounded-lg",children:r.experience})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Why Join Nefol?"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-700 p-3 rounded-lg",children:r.why_join})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Platform:"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.platform})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Followers:"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.followers})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Expected Sales:"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.expected_sales})]})]}),v==="approve"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Admin Notes (Optional)"}),e.jsx("textarea",{value:h,onChange:ge=>g(ge.target.value),rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",placeholder:"Add any notes for the affiliate partner..."})]}),v==="reject"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Rejection Reason *"}),e.jsx("textarea",{value:x,onChange:ge=>f(ge.target.value),rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",placeholder:"Please provide a reason for rejection...",required:!0})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),v==="approve"&&e.jsx("button",{onClick:Fe,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Approve Application"}),v==="reject"&&e.jsx("button",{onClick:X,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Reject Application"})]})]})})})]})})]})}function c9(){const[t,s]=b.useState([]),[r,a]=b.useState(null),[n,i]=b.useState(!0),[l,o]=b.useState("pending"),[c,d]=b.useState(1),[u,p]=b.useState(1),[h,g]=b.useState(""),[x,f]=b.useState(""),[m,j]=b.useState(!1),[v,w]=b.useState("view"),[S,F]=b.useState(null),[E,k]=b.useState(new Set),[A,y]=b.useState(""),[N,R]=b.useState("date"),[T,z]=b.useState("desc"),[L,O]=b.useState(new Set),[V,Z]=b.useState({total:0,pending:0,approved:0,rejected:0});b.useEffect(()=>{D()},[l,c,N,T]),b.useEffect(()=>{const J=setTimeout(()=>{A!==""&&D()},500);return()=>clearTimeout(J)},[A]);const D=async()=>{try{i(!0);const J=new URLSearchParams({page:c.toString(),limit:"10",sort:N,order:T});l!=="all"&&J.append("status",l),A.trim()&&J.append("search",A.trim());const ae=await fetch(`/api/admin/affiliate-applications?${J}`),he=await ae.json();ae.ok&&he.applications?(s(he.applications),p(he.pagination.pages),Z({total:he.pagination.total,pending:he.applications.filter(Fe=>Fe.status==="pending").length,approved:he.applications.filter(Fe=>Fe.status==="approved").length,rejected:he.applications.filter(Fe=>Fe.status==="rejected").length})):(console.error("Failed to fetch applications:",he.message),s([]),p(0),Z({total:0,pending:0,approved:0,rejected:0}))}catch(J){console.error("Error fetching applications:",J),alert("Failed to load applications. Please check your connection and try again.")}finally{i(!1)}},P=async()=>{var J;if(r)try{const ae=await fetch(`/api/admin/affiliate-applications/${r.id}/approve`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminNotes:h})}),he=await ae.json();ae.ok&&he.message?(alert(`Application approved successfully!

Verification Code: ${((J=he.data)==null?void 0:J.verificationCode)||"Generated"}

Copy this code and send it to the affiliate partner.`),j(!1),g(""),D()):alert(he.error||he.message||"Failed to approve application")}catch(ae){console.error("Error approving application:",ae),alert("Error approving application. Please try again.")}},W=async()=>{if(!r||!x.trim()){alert("Please provide a reason for rejection");return}try{const J=await fetch(`/api/admin/affiliate-applications/${r.id}/reject`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({rejectionReason:x})}),ae=await J.json();J.ok&&ae.message?(alert("Application rejected successfully!"),j(!1),f(""),D()):alert(ae.error||ae.message||"Failed to reject application")}catch(J){console.error("Error rejecting application:",J),alert("Error rejecting application. Please try again.")}},ee=async J=>{if(confirm("Are you sure you want to regenerate the verification code? This will invalidate the current code and the affiliate partner will need to verify again with the new code."))try{F(J);const ae=await fetch(`/api/admin/affiliate-applications/${J}`),he=await ae.json();if(!ae.ok){alert(he.error||"Failed to get application details");return}const Fe=await fetch(`/api/admin/affiliate-partners?applicationId=${J}`),X=await Fe.json();if(!Fe.ok||!X.partners||X.partners.length===0){alert("Affiliate partner record not found");return}const Re=X.partners[0].id,ne=await fetch(`/api/admin/affiliate-partners/${Re}/regenerate-code`,{method:"POST",headers:{"Content-Type":"application/json"}}),_e=await ne.json();ne.ok&&_e.verificationCode?(s(Se=>Se.map(be=>be.id===J?{...be,verification_code:_e.verificationCode}:be)),k(Se=>new Set(Se).add(J)),setTimeout(()=>{k(Se=>{const be=new Set(Se);return be.delete(J),be})},3e3),alert(`New verification code generated successfully!

New Code: ${_e.verificationCode}

The code has been updated in the UI and is ready to copy.`)):alert(_e.error||_e.message||"Failed to regenerate verification code")}catch(ae){console.error("Error regenerating verification code:",ae),alert("Error regenerating verification code. Please try again.")}finally{F(null)}},M=(J,ae)=>{a(J),w(ae),j(!0),g(""),f("")},U=J=>{const ae=new Set(L);ae.has(J)?ae.delete(J):ae.add(J),O(ae)},q=J=>{switch(J){case"approved":return e.jsx(Vt,{className:"h-5 w-5 text-green-500"});case"rejected":return e.jsx(Kt,{className:"h-5 w-5 text-red-500"});case"pending":return e.jsx(cs,{className:"h-5 w-5 text-yellow-500"});default:return e.jsx(cs,{className:"h-5 w-5 text-gray-500"})}},Y=J=>{switch(J){case"approved":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}},K=J=>new Date(J).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),le=async J=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(J),alert("Copied to clipboard!");else{const ae=document.createElement("textarea");ae.value=J,ae.style.position="fixed",ae.style.left="-999999px",ae.style.top="-999999px",document.body.appendChild(ae),ae.focus(),ae.select(),document.execCommand("copy"),ae.remove(),alert("Copied to clipboard!")}}catch(ae){console.error("Failed to copy: ",ae),alert("Failed to copy to clipboard")}};return e.jsxs("div",{className:"min-h-screen",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)",backgroundColor:"var(--arctic-blue-background)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsx("div",{className:"metric-card border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Affiliate Requests Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Review and manage affiliate applications"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:D,disabled:n,className:"btn-secondary inline-flex items-center gap-2",children:[e.jsx(or,{className:`h-4 w-4 ${n?"animate-spin":""}`}),"Refresh"]}),e.jsxs("button",{className:"btn-primary inline-flex items-center gap-2",children:[e.jsx(wa,{className:"h-4 w-4"}),"Export"]})]})]})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Requests"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:V.total}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"All applications"})]}),e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-full",children:e.jsx(gs,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:V.pending}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Awaiting approval"})]}),e.jsx("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/20 rounded-full",children:e.jsx(cs,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:V.approved}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Active partners"})]}),e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-full",children:e.jsx(Rb,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:V.rejected}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Not approved"})]}),e.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/20 rounded-full",children:e.jsx(U4,{className:"h-6 w-6 text-red-600 dark:text-red-400"})})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or platform...",value:A,onChange:J=>y(J.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cl,{className:"h-4 w-4 text-gray-400"}),e.jsxs("select",{value:l,onChange:J=>o(J.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"h-4 w-4 text-gray-400"}),e.jsxs("select",{value:N,onChange:J=>R(J.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"status",children:"Sort by Status"})]})]}),e.jsx("button",{onClick:()=>z(T==="asc"?"desc":"asc"),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:`Sort ${T==="asc"?"Descending":"Ascending"}`,children:T==="asc"?"":""})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Applicant"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Platform"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Followers"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Applied"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(or,{className:"h-4 w-4 animate-spin"}),"Loading applications..."]})})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(So,{className:"h-8 w-8 text-gray-400"}),"No applications found",A&&e.jsx("p",{className:"text-sm",children:"Try adjusting your search criteria"})]})})}):t.map(J=>e.jsxs(yx.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:J.name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:J.email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:J.phone})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:J.platform})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:J.followers})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${Y(J.status)}`,children:[q(J.status),J.status]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:K(J.application_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>U(J.id),className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300",title:L.has(J.id)?"Collapse Details":"Expand Details",children:L.has(J.id)?e.jsx("span",{className:"text-lg",children:""}):e.jsx("span",{className:"text-lg",children:"+"})}),e.jsx("button",{onClick:()=>M(J,"view"),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"View Details",children:e.jsx(ct,{className:"h-4 w-4"})}),J.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>M(J,"approve"),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Approve",children:e.jsx(Vt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>M(J,"reject"),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Reject",children:e.jsx(Kt,{className:"h-4 w-4"})})]}),J.verification_code&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>le(J.verification_code),className:"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300",title:"Copy Verification Code",children:e.jsx(tl,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ee(J.id),disabled:S===J.id,className:"text-orange-600 hover:text-orange-900 dark:text-orange-400 dark:hover:text-orange-300 disabled:opacity-50",title:"Regenerate Verification Code",children:e.jsx(or,{className:`h-4 w-4 ${S===J.id?"animate-spin":""}`})})]})]})})]}),L.has(J.id)&&e.jsx("tr",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("td",{colSpan:7,className:"px-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Application Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Phone:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:J.phone})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Platform:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:J.platform})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Followers:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:J.followers})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Expected Sales:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:J.expected_sales})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Social Media & Verification"}),e.jsxs("div",{className:"space-y-2",children:[J.instagram&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Instagram:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:J.instagram})]}),J.youtube&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"YouTube:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:J.youtube})]}),J.facebook&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Facebook:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:J.facebook})]}),J.verification_code&&e.jsxs("div",{className:`mt-4 p-3 rounded-lg border transition-all duration-500 ${E.has(J.id)?"bg-blue-50 dark:bg-blue-900/20 border-blue-300 dark:border-blue-700 shadow-lg ring-2 ring-blue-200 dark:ring-blue-800":"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm font-semibold ${E.has(J.id)?"text-blue-800 dark:text-blue-200":"text-green-800 dark:text-green-200"}`,children:"Verification Code:"}),E.has(J.id)&&e.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full animate-pulse",children:"Just Updated!"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>le(J.verification_code),className:`flex items-center gap-1 ${E.has(J.id)?"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200":"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-200"}`,children:[e.jsx(tl,{className:"h-4 w-4"}),"Copy"]}),e.jsxs("button",{onClick:()=>ee(J.id),disabled:S===J.id,className:"text-orange-600 hover:text-orange-800 dark:text-orange-400 dark:hover:text-orange-200 flex items-center gap-1 disabled:opacity-50",children:[e.jsx(or,{className:`h-4 w-4 ${S===J.id?"animate-spin":""}`}),"Regenerate"]})]})]}),e.jsx("div",{className:`rounded p-2 border transition-colors duration-500 ${E.has(J.id)?"bg-white dark:bg-gray-800 border-blue-300 dark:border-blue-700":"bg-white dark:bg-gray-800 border-green-300 dark:border-green-700"}`,children:e.jsx("code",{className:`text-lg font-mono tracking-wider transition-colors duration-500 ${E.has(J.id)?"text-blue-900 dark:text-blue-100":"text-green-900 dark:text-green-100"}`,children:J.verification_code})}),e.jsx("p",{className:`text-xs mt-1 transition-colors duration-500 ${E.has(J.id)?"text-blue-700 dark:text-blue-300":"text-green-700 dark:text-green-300"}`,children:"Send this 20-digit code to the affiliate partner for account verification"})]}),J.admin_notes&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("span",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200",children:"Admin Notes:"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:J.admin_notes})]}),J.rejection_reason&&e.jsxs("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsx("span",{className:"text-sm font-semibold text-red-800 dark:text-red-200",children:"Rejection Reason:"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:J.rejection_reason})]})]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Address"}),e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[J.house_number,", ",J.street,J.building&&`, ${J.building}`,J.apartment&&`, ${J.apartment}`,", ",J.road,", ",J.city,", ",J.state," - ",J.pincode]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Experience"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:J.experience})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Why Join"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:J.why_join})]})]})})]})})]},J.id))})]})})}),u>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing page ",c," of ",u]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>d(Math.max(1,c-1)),disabled:c===1,className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>d(Math.min(u,c+1)),disabled:c===u,className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),m&&r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[v==="view"&&"Application Details",v==="approve"&&"Approve Application",v==="reject"&&"Reject Application"]}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(Kt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Personal Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ga,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Name:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.name})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ss,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pa,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Phone:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.phone})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fm,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Address:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[r.house_number,", ",r.street,", ",r.road,", ",r.city,", ",r.state," - ",r.pincode]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Social Media & Platform"}),e.jsxs("div",{className:"space-y-3",children:[r.instagram&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ab,{className:"h-4 w-4 text-pink-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Instagram:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.instagram})]}),r.youtube&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ib,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"YouTube:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.youtube})]}),r.facebook&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Eb,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Facebook:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.facebook})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pt,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Followers:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.followers})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Yn,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Platform:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.platform})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Experience & Motivation"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Experience:"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:r.experience})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Why Join:"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:r.why_join})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Expected Sales:"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:r.expected_sales})]})]})]}),v==="approve"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Admin Notes (Optional)"}),e.jsx("textarea",{value:h,onChange:J=>g(J.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Add any notes for the affiliate partner..."})]}),v==="reject"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rejection Reason *"}),e.jsx("textarea",{value:x,onChange:J=>f(J.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Please provide a reason for rejection...",required:!0})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),v==="approve"&&e.jsxs("button",{onClick:P,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(Vt,{className:"h-4 w-4"}),"Approve Application"]}),v==="reject"&&e.jsxs("button",{onClick:W,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(Kt,{className:"h-4 w-4"}),"Reject Application"]})]})]})})})]})}function d9(){const s=(()=>{if(typeof window<"u"){const S=window.location.hostname;if(S==="thenefol.com"||S==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),[r,a]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState(!1),[c,d]=b.useState(""),[u,p]=b.useState({name:"",email:"",password:""}),[h,g]=b.useState(""),x=b.useMemo(()=>({"Content-Type":"application/json","x-user-role":"admin","x-user-permissions":"users:update"}),[]),f=async()=>{try{o(!0),d("");const[S,F]=await Promise.all([fetch(`${s}/staff/users`),fetch(`${s}/staff/roles`)]),E=await S.json(),k=await F.json();a((E==null?void 0:E.data)||E||[]),i((k==null?void 0:k.data)||k||[])}catch(S){d((S==null?void 0:S.message)||"Failed to load staff")}finally{o(!1)}};b.useEffect(()=>{f()},[]);const m=async()=>{if(!u.name||!u.email||!u.password)return alert("Fill all fields");try{if(!(await fetch(`${s}/staff/users`,{method:"POST",headers:x,body:JSON.stringify(u)})).ok)throw new Error("Failed to create user");p({name:"",email:"",password:""}),await f()}catch(S){alert((S==null?void 0:S.message)||"Failed")}},j=async(S,F)=>{try{if(!(await fetch(`${s}/staff/user-roles`,{method:"POST",headers:x,body:JSON.stringify({staffId:S,roleId:F})})).ok)throw new Error("Failed to assign role");await f()}catch(E){alert((E==null?void 0:E.message)||"Failed")}},v=async S=>{if(!h)return alert("Enter new password");try{const F=await fetch(`${s}/staff/users/reset-password`,{method:"POST",headers:x,body:JSON.stringify({staffId:S,newPassword:h})}),E=await F.json();if(!F.ok)throw new Error((E==null?void 0:E.error)||"Failed to reset password");g(""),alert("Password reset")}catch(F){alert((F==null?void 0:F.message)||"Failed")}},w=async S=>{if(confirm("Disable this account?"))try{const F=await fetch(`${s}/staff/users/disable`,{method:"POST",headers:x,body:JSON.stringify({staffId:S})}),E=await F.json();if(!F.ok)throw new Error((E==null?void 0:E.error)||"Failed to disable");await f()}catch(F){alert((F==null?void 0:F.message)||"Failed")}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Staff Accounts"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage staff members and their access"})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx("input",{className:"input",placeholder:"Name",value:u.name,onChange:S=>p({...u,name:S.target.value})}),e.jsx("input",{className:"input",placeholder:"Email",value:u.email,onChange:S=>p({...u,email:S.target.value})}),e.jsx("input",{className:"input",placeholder:"Password",type:"password",value:u.password,onChange:S=>p({...u,password:S.target.value})}),e.jsx(ms,{role:"admin",children:e.jsx("button",{onClick:m,className:"btn-primary",children:"Create Staff"})})]})}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx("input",{className:"input",placeholder:"New password (for reset)",value:h,onChange:S=>g(S.target.value)}),e.jsx("span",{className:"text-xs text-gray-500",children:"Enter before clicking Reset"})]}),l?"Loading...":c?e.jsx("div",{className:"text-red-600",children:c}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pr-4",children:"Name"}),e.jsx("th",{className:"py-2 pr-4",children:"Email"}),e.jsx("th",{className:"py-2 pr-4",children:"Roles"}),e.jsx("th",{className:"py-2 pr-4",children:"Assign Role"}),e.jsx("th",{className:"py-2 pr-4",children:"Actions"})]})}),e.jsx("tbody",{children:r.map(S=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 pr-4 font-medium",children:S.name}),e.jsx("td",{className:"py-2 pr-4",children:S.email}),e.jsx("td",{className:"py-2 pr-4",children:(S.roles||[]).map(F=>F.name).join(", ")||"-"}),e.jsx("td",{className:"py-2 pr-4",children:e.jsx("div",{className:"flex gap-2 flex-wrap",children:n.map(F=>e.jsx(ms,{role:"admin",children:e.jsx("button",{onClick:()=>j(S.id,F.id),className:"btn-secondary text-xs",children:F.name})},F.id))})}),e.jsx("td",{className:"py-2 pr-4",children:e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(ms,{role:"admin",children:e.jsx("button",{onClick:()=>v(S.id),className:"btn-secondary text-xs",children:"Reset Password"})}),e.jsx(ms,{role:"admin",children:e.jsx("button",{onClick:()=>w(S.id),className:"bg-red-600 text-white px-2 py-1 text-xs rounded",children:"Disable"})})]})})]},S.id))})]})})]})]})}function u9(){const s=(()=>{if(typeof window<"u"){const f=window.location.hostname;if(f==="thenefol.com"||f==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),[r,a]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState({}),[c,d]=b.useState(!1),u=b.useMemo(()=>({"Content-Type":"application/json","x-user-role":"admin","x-user-permissions":"users:update"}),[]),p=(f,m)=>`${f}:${m}`,h=async()=>{try{d(!0);const[f,m,j]=await Promise.all([fetch(`${s}/api/staff/roles`),fetch(`${s}/api/staff/permissions`),fetch(`${s}/api/staff/role-permissions`)]),v=await f.json(),w=await m.json(),S=await j.json(),F=(v==null?void 0:v.data)||v||[],E=(w==null?void 0:w.data)||w||[];a(F),i(E);const k={},A=(S==null?void 0:S.data)||S||[];for(const y of A)y.role_id&&y.permission_id&&(k[p(y.role_id,y.permission_id)]=!0);o(k)}catch{}finally{d(!1)}};b.useEffect(()=>{h()},[]);const g=(f,m)=>{const j=p(f,m);o(v=>({...v,[j]:!v[j]}))},x=async f=>{try{const m=n.filter(w=>l[p(f,w.id)]).map(w=>w.id),j=await fetch(`${s}/api/staff/role-permissions/set`,{method:"POST",headers:u,body:JSON.stringify({roleId:f,permissionIds:m})}),v=await j.json();if(!j.ok)throw new Error((v==null?void 0:v.error)||"Failed to save");alert("Saved")}catch(m){alert((m==null?void 0:m.message)||"Failed")}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Roles & Permission Matrix"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Configure role-based access control"})]}),c?"Loading...":e.jsxs("div",{className:"overflow-x-auto metric-card",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-2 pr-4",style:{color:"var(--text-primary)"},children:"Permission"}),r.map(f=>e.jsx("th",{className:"text-left py-2 pr-4",style:{color:"var(--text-primary)"},children:f.name},f.id))]})}),e.jsx("tbody",{children:n.map(f=>e.jsxs("tr",{className:"border-t",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsx("td",{className:"py-2 pr-4 font-medium",style:{color:"var(--text-secondary)"},children:f.code}),r.map(m=>e.jsx("td",{className:"py-2 pr-4",children:e.jsx("input",{type:"checkbox",checked:!!l[p(m.id,f.id)],onChange:()=>g(m.id,f.id)})},m.id))]},f.id))})]}),e.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:r.map(f=>e.jsxs("button",{onClick:()=>x(f.id),className:"btn-secondary",children:["Save ",f.name]},f.id))})]})]})}function x9(){const s=(()=>{if(typeof window<"u"){const f=window.location.hostname;if(f==="thenefol.com"||f==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),[r,a]=b.useState([]),[n,i]=b.useState(""),[l,o]=b.useState(""),[c,d]=b.useState(""),[u,p]=b.useState(""),[h,g]=b.useState(!1),x=async()=>{try{g(!0);const f=new URLSearchParams;n&&f.set("staff_id",n),l&&f.set("action",l),c&&f.set("from",c),u&&f.set("to",u);const j=await(await fetch(`${s}/api/staff/activity?${f.toString()}`)).json();a((j==null?void 0:j.data)||j||[])}catch{a([])}finally{g(!1)}};return b.useEffect(()=>{x()},[]),e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Audit Logs"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Track all system activities and changes"})]}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[e.jsx("input",{className:"input",placeholder:"Staff ID",value:n,onChange:f=>i(f.target.value)}),e.jsx("input",{className:"input",placeholder:"Action contains",value:l,onChange:f=>o(f.target.value)}),e.jsx("input",{className:"input",type:"date",value:c,onChange:f=>d(f.target.value)}),e.jsx("input",{className:"input",type:"date",value:u,onChange:f=>p(f.target.value)}),e.jsx("button",{className:"btn-primary",onClick:x,children:"Apply Filters"})]})}),e.jsx("div",{className:"metric-card",children:h?"Loading...":e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"border-b text-xs uppercase",style:{borderColor:"var(--arctic-blue-light)",color:"var(--text-muted)"},children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pr-4",children:"Time"}),e.jsx("th",{className:"py-2 pr-4",children:"Staff"}),e.jsx("th",{className:"py-2 pr-4",children:"Action"}),e.jsx("th",{className:"py-2 pr-4",children:"Details"})]})}),e.jsx("tbody",{children:r.map(f=>e.jsxs("tr",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsx("td",{className:"py-2 pr-4",style:{color:"var(--text-secondary)"},children:new Date(f.created_at).toLocaleString()}),e.jsx("td",{className:"py-2 pr-4",style:{color:"var(--text-secondary)"},children:f.staff_id||"-"}),e.jsx("td",{className:"py-2 pr-4",style:{color:"var(--text-secondary)"},children:f.action||"-"}),e.jsx("td",{className:"py-2 pr-4",children:e.jsx("pre",{className:"text-xs whitespace-pre-wrap",style:{color:"var(--text-muted)"},children:f.details?JSON.stringify(f.details):"-"})})]},f.id))})]})})})]})}function m9(){const[t,s]=b.useState({whatsapp_token:"",whatsapp_phone_id:"",notify_phone:"",smtp_provider:"gmail",smtp_host:"",smtp_port:587,smtp_user:"",smtp_pass:"",notify_email:"",from_email:""}),[r,a]=b.useState(""),[n,i]=b.useState("Hello from Nefol Admin!"),[l,o]=b.useState(""),[c,d]=b.useState("Test Email from Nefol"),[u,p]=b.useState("This is a test email."),[h,g]=b.useState(!1),[x,f]=b.useState({email:!1,whatsapp:!1}),[m,j]=b.useState(null),v=async()=>{try{const N=await(await fetch("/api/alerts/config")).json();N!=null&&N.data&&s({...t,...N.data})}catch{}};b.useEffect(()=>{v()},[]);const w=y=>{s({...t,smtp_provider:y,...{gmail:{smtp_host:"",smtp_port:587},hostinger:{smtp_host:"smtp.hostinger.com",smtp_port:587},godaddy:{smtp_host:"smtpout.secureserver.net",smtp_port:587},custom:{smtp_host:"",smtp_port:587}}[y]})},S=async()=>{g(!0);try{const y=await fetch("/api/alerts/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),N=await y.json();if(!y.ok){j({type:"save",success:!1,message:(N==null?void 0:N.error)||"Failed to save"});return}j({type:"save",success:!0,message:"Settings saved successfully!"}),setTimeout(()=>j(null),3e3)}catch(y){j({type:"save",success:!1,message:y.message||"Failed to save"})}finally{g(!1)}},F=async()=>{if(!r){j({type:"whatsapp",success:!1,message:"Please enter a phone number"});return}f({...x,whatsapp:!0});try{const y=await fetch("/api/alerts/test/whatsapp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone_number:r,message:n})}),N=await y.json();if(!y.ok){j({type:"whatsapp",success:!1,message:(N==null?void 0:N.error)||"Failed to send"});return}j({type:"whatsapp",success:!0,message:"WhatsApp message sent successfully!"})}catch(y){j({type:"whatsapp",success:!1,message:y.message||"Failed to send"})}finally{f({...x,whatsapp:!1})}},E=async()=>{if(!l){j({type:"email",success:!1,message:"Please enter recipient email"});return}f({...x,email:!0});try{const y=await fetch("/api/alerts/test/email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:l,subject:c,text:u})}),N=await y.json();if(!y.ok){j({type:"email",success:!1,message:(N==null?void 0:N.error)||"Failed to send"});return}j({type:"email",success:!0,message:"Email sent successfully!"})}catch(y){j({type:"email",success:!1,message:y.message||"Failed to send"})}finally{f({...x,email:!1})}},A=(y=>{const N={gmail:{title:"Gmail SMTP Configuration",description:"Use your Gmail account to send emails. You need to generate an App Password.",instructions:["1. Go to your Google Account settings","2. Enable 2-Step Verification",'3. Generate an App Password for "Mail"',"4. Use your Gmail address and the App Password below"],host:"Automatically configured",port:"587 (TLS)"},hostinger:{title:"Hostinger SMTP Configuration",description:"Use your Hostinger email account to send emails.",instructions:["1. Log in to your Hostinger control panel","2. Go to Email section","3. Use your full email address (e.g., noreply@yourdomain.com)","4. Use your email account password"],host:"smtp.hostinger.com",port:"587 (TLS)"},godaddy:{title:"GoDaddy SMTP Configuration",description:"Use your GoDaddy email account to send emails.",instructions:["1. Log in to your GoDaddy account","2. Go to Email & Office Dashboard","3. Use your full email address (e.g., noreply@yourdomain.com)","4. Use your email account password"],host:"smtpout.secureserver.net",port:"587 (TLS)"},custom:{title:"Custom SMTP Configuration",description:"Configure your own SMTP server settings.",instructions:["1. Enter your SMTP server hostname","2. Enter the SMTP port (usually 587 for TLS, 465 for SSL)","3. Enter your SMTP username and password","4. Test the connection before saving"],host:"Your SMTP server",port:"587 or 465"}};return N[y]||N.custom})(t.smtp_provider||"gmail");return e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Email & WhatsApp Settings"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Configure notification and alert settings"})]})}),m&&e.jsxs("div",{className:`p-4 rounded-lg flex items-center space-x-2 ${m.success?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 border border-red-200 dark:border-red-800"}`,children:[m.success?e.jsx(Vt,{className:"h-5 w-5"}):e.jsx(So,{className:"h-5 w-5"}),e.jsx("span",{children:m.message})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ss,{className:"h-5 w-5 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Email Marketing Configuration"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Email Provider"}),e.jsxs("select",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",value:t.smtp_provider||"gmail",onChange:y=>w(y.target.value),children:[e.jsx("option",{value:"gmail",children:"Gmail"}),e.jsx("option",{value:"hostinger",children:"Hostinger"}),e.jsx("option",{value:"godaddy",children:"GoDaddy"}),e.jsx("option",{value:"custom",children:"Custom SMTP"})]})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2 mb-2",children:[e.jsx(Y2,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-300 mb-1",children:A.title}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400 mb-2",children:A.description}),e.jsx("ul",{className:"text-sm text-blue-600 dark:text-blue-400 space-y-1",children:A.instructions.map((y,N)=>e.jsx("li",{children:y},N))}),e.jsxs("div",{className:"mt-3 text-sm",children:[e.jsx("span",{className:"font-medium",children:"SMTP Host:"})," ",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-2 py-1 rounded",children:A.host})," ",e.jsx("span",{className:"font-medium ml-3",children:"Port:"})," ",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-2 py-1 rounded",children:A.port})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["SMTP Host ",t.smtp_provider!=="gmail"&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:A.host,value:t.smtp_host||"",onChange:y=>s({...t,smtp_host:y.target.value}),disabled:t.smtp_provider==="gmail"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["SMTP Port ",t.smtp_provider!=="gmail"&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",type:"number",placeholder:A.port,value:t.smtp_port||587,onChange:y=>s({...t,smtp_port:Number(y.target.value)}),disabled:t.smtp_provider==="gmail"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["SMTP Username/Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"your-email@domain.com",value:t.smtp_user||"",onChange:y=>s({...t,smtp_user:y.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["SMTP Password/App Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",type:"password",placeholder:"Enter password",value:t.smtp_pass||"",onChange:y=>s({...t,smtp_pass:y.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"From Email Address"}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"noreply@yourdomain.com",value:t.from_email||"",onChange:y=>s({...t,from_email:y.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notification Email (for alerts)"}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"admin@yourdomain.com",value:t.notify_email||"",onChange:y=>s({...t,notify_email:y.target.value})})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(fs,{className:"h-5 w-5 text-green-600"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Configuration (Meta Cloud API)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"WhatsApp Phone ID"}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"WhatsApp Phone ID",value:t.whatsapp_phone_id||"",onChange:y=>s({...t,whatsapp_phone_id:y.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Access Token"}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",type:"password",placeholder:"Access Token",value:t.whatsapp_token||"",onChange:y=>s({...t,whatsapp_token:y.target.value})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Default Notify Phone (with country code)"}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"+1234567890",value:t.notify_phone||"",onChange:y=>s({...t,notify_phone:y.target.value})})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2 disabled:opacity-50",onClick:S,disabled:h,children:[e.jsx($s,{className:"h-5 w-5"}),e.jsx("span",{children:h?"Saving...":"Save Settings"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4 flex items-center space-x-2",children:[e.jsx(ss,{className:"h-5 w-5"}),e.jsx("span",{children:"Test Email"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Recipient Email",value:l,onChange:y=>o(y.target.value)}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Subject",value:c,onChange:y=>d(y.target.value)}),e.jsx("textarea",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Email Body",rows:3,value:u,onChange:y=>p(y.target.value)}),e.jsxs("button",{className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2 disabled:opacity-50",onClick:E,disabled:x.email,children:[e.jsx(ra,{className:"h-4 w-4"}),e.jsx("span",{children:x.email?"Sending...":"Send Test Email"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4 flex items-center space-x-2",children:[e.jsx(fs,{className:"h-5 w-5"}),e.jsx("span",{children:"Test WhatsApp"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Phone with country code (+1234567890)",value:r,onChange:y=>a(y.target.value)}),e.jsx("textarea",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Message",rows:4,value:n,onChange:y=>i(y.target.value)}),e.jsxs("button",{className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2 disabled:opacity-50",onClick:F,disabled:x.whatsapp,children:[e.jsx(ra,{className:"h-4 w-4"}),e.jsx("span",{children:x.whatsapp?"Sending...":"Send Test WhatsApp"})]})]})]})]})]})}function h9(){const{id:t}=bb(),s=ja(),[r,a]=b.useState(null),[n,i]=b.useState(!0),[l,o]=b.useState(null),[c,d]=b.useState("overview"),[u,p]=b.useState(""),[h,g]=b.useState("");b.useEffect(()=>{f()},[t]);const x=()=>{if(typeof window<"u"){const W=window.location.hostname;if(W==="thenefol.com"||W==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"},f=async()=>{try{i(!0);const W=x(),ee=await fetch(`${W}/users/${t}`);if(ee.ok){const M=await ee.json();a(M)}else o("Failed to fetch user details")}catch{o("Failed to fetch user details")}finally{i(!1)}},m=async()=>{if(u.trim())try{const W=x();(await fetch(`${W}/users/${t}/notes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:u,note_type:"general"})})).ok&&(p(""),f())}catch(W){console.error("Failed to add note:",W)}},j=async()=>{if(h.trim())try{const W=x();(await fetch(`${W}/users/${t}/tags`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:h})})).ok&&(g(""),f())}catch(W){console.error("Failed to add tag:",W)}},v=async W=>{try{const ee=x();await fetch(`${ee}/users/${t}/tags`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:W})}),f()}catch(ee){console.error("Failed to remove tag:",ee)}},w=W=>{const M={page_view:ct,cart:Qs,order:fa,payment:li,form_submit:gs,login:ga}[W]||Bn;return e.jsx(M,{className:"h-4 w-4"})},S=W=>({page_view:"text-blue-600 bg-blue-100 dark:bg-blue-900/20",cart:"text-green-600 bg-green-100 dark:bg-green-900/20",order:"text-purple-600 bg-purple-100 dark:bg-purple-900/20",payment:"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20",form_submit:"text-orange-600 bg-orange-100 dark:bg-orange-900/20",login:"text-indigo-600 bg-indigo-100 dark:bg-indigo-900/20"})[W]||"text-gray-600 bg-gray-100 dark:bg-gray-900/20",F=W=>W?new Date(W).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",E=W=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(W||0);if(n)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(l||!r)return e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{className:"text-red-600",children:l||"User not found"}),e.jsx("button",{onClick:()=>s("/admin/users"),className:"mt-4 text-blue-600",children:"Back to Users"})]});const{user:k,stats:A,addresses:y,orders:N,activities:R,sessions:T,notes:z,tags:L,cart:O,wishlist:V,activitySummary:Z,topPages:D,productInteractions:P}=r;return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s("/admin/users"),className:"p-2 hover:bg-[var(--arctic-blue-lighter)] rounded-xl transition-colors",style:{color:"var(--text-secondary)"},children:e.jsx(r2,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:k.name}),e.jsxs("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:["User ID: ",k.id]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${k.is_verified,""}`,style:k.is_verified?{backgroundColor:"#D1FAE5",color:"#059669"}:{backgroundColor:"#FEF3C7",color:"#D97706"},children:k.is_verified?"Verified":"Unverified"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:A.total_orders||0})]}),e.jsx(fa,{className:"h-8 w-8 text-purple-600"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Spent"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:E(A.total_spent)})]}),e.jsx(Co,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Page Views"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:A.total_page_views||0})]}),e.jsx(ct,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loyalty Points"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:k.loyalty_points||0})]}),e.jsx(xr,{className:"h-8 w-8 text-yellow-600"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ss,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:k.email})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pa,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:k.phone||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Mr,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Member Since"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:F(k.created_at)})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(cs,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last Seen"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:F(A.last_seen)})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:L.map(W=>e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 rounded-full text-sm",children:[e.jsx(Lb,{className:"h-3 w-3"}),W,e.jsx("button",{onClick:()=>v(W),className:"hover:text-red-600",children:""})]},W))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:h,onChange:W=>g(W.target.value),placeholder:"Add tag...",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-sm",onKeyPress:W=>W.key==="Enter"&&j()}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"Add"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Addresses"}),e.jsx("div",{className:"space-y-4",children:y.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No addresses saved"}):y.map(W=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400 uppercase",children:W.address_type}),W.is_default&&e.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-300 px-2 py-1 rounded",children:"Default"})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:W.full_name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:W.phone}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:[W.address_line1,W.address_line2&&`, ${W.address_line2}`]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[W.city,", ",W.state," ",W.postal_code]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:W.country})]},W.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Current Cart"}),e.jsx("div",{className:"space-y-2",children:O.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"Cart is empty"}):O.map(W=>e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx(Qs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"flex-1 text-gray-900 dark:text-white",children:W.product_name}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["",W.quantity]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:E(W.price)})]},W.id))})]})]}),e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"flex overflow-x-auto",children:["overview","orders","activity","sessions","notes"].map(W=>e.jsx("button",{onClick:()=>d(W),className:`px-6 py-3 text-sm font-medium capitalize whitespace-nowrap ${c===W?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:W},W))})}),e.jsxs("div",{className:"p-6",children:[c==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Activity Summary"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Z.slice(0,6).map((W,ee)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${S(W.activity_type)}`,children:w(W.activity_type)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:W.activity_type}),W.activity_subtype&&e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 capitalize",children:W.activity_subtype})]})]}),e.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:W.count})]},ee))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Most Viewed Pages"}),e.jsx("div",{className:"space-y-2",children:D.slice(0,5).map((W,ee)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:W.page_title||W.page_url}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:W.page_url})]}),e.jsxs("div",{className:"ml-4 text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[W.view_count," views"]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:new Date(W.last_viewed).toLocaleDateString()})]})]},ee))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Product Interactions"}),e.jsx("div",{className:"space-y-2",children:P.slice(0,5).map((W,ee)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:W.product_name}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 capitalize",children:[W.activity_type," - ",W.activity_subtype]})]}),e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[W.interaction_count,""]})]},ee))})]})]}),c==="orders"&&e.jsx("div",{className:"space-y-4",children:N.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No orders yet"}):N.map(W=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["Order #",W.order_number]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:F(W.created_at)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${W.status==="delivered"?"bg-green-100 text-green-800":W.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:W.status}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white mt-1",children:E(W.total_amount)})]})]}),e.jsx("div",{className:"space-y-2",children:W.items.map((ee,M)=>e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx(fa,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"flex-1 text-gray-900 dark:text-white",children:ee.product_name}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["",ee.quantity]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:E(ee.price)})]},M))})]},W.id))}),c==="activity"&&e.jsx("div",{className:"space-y-3",children:R.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No activities yet"}):R.map(W=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:`p-2 rounded-lg ${S(W.activity_type)}`,children:w(W.activity_type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:[W.activity_type,W.activity_subtype&&` - ${W.activity_subtype}`]}),W.page_title&&e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:W.page_title}),W.product_name&&e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[W.product_name,W.product_price&&` - ${E(W.product_price)}`]}),W.payment_amount&&e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Payment: ",E(W.payment_amount)," via ",W.payment_method]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:F(W.created_at)})]})]},W.id))}),c==="sessions"&&e.jsx("div",{className:"space-y-3",children:T.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No sessions yet"}):T.map(W=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G2,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-xs font-mono text-gray-600 dark:text-gray-400",children:[W.session_id.substring(0,12),"..."]})]}),W.ended_at?e.jsx("span",{className:"text-xs text-gray-500",children:"Ended"}):e.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"Active"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Started"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:F(W.started_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Last Activity"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:F(W.last_activity)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Device"}),e.jsxs("p",{className:"text-gray-900 dark:text-white",children:[W.device_type||"Unknown"," - ",W.browser||"Unknown"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Location"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:W.city&&W.country?`${W.city}, ${W.country}`:"Unknown"})]})]})]},W.id))}),c==="notes"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("textarea",{value:u,onChange:W=>p(W.target.value),placeholder:"Add a note about this user...",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white resize-none"}),e.jsx("button",{onClick:m,className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Note"})]}),e.jsx("div",{className:"space-y-3",children:z.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No notes yet"}):z.map(W=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(fs,{className:"h-5 w-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:W.note}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:["By ",W.admin_name||"Admin"]}),e.jsx("span",{children:""}),e.jsx("span",{children:F(W.created_at)})]})]})]})},W.id))})]})]})]})})]})]})}function f9(){var R;const{notify:t}=mr(),[s,r]=b.useState([]),[a,n]=b.useState(!1),[i,l]=b.useState(""),c=(()=>{if(typeof window<"u"){const T=window.location.hostname;if(T==="thenefol.com"||T==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),[d,u]=b.useState(""),[p,h]=b.useState(""),[g,x]=b.useState("0.5"),[f,m]=b.useState(!1),[j,v]=b.useState(null),[w,S]=b.useState(""),[F,E]=b.useState(null),k=async()=>{try{n(!0),l("");const T=await fetch(`${c}/api/shiprocket/shipments`);if(!T.ok)throw new Error(`HTTP error! status: ${T.status}`);const z=await T.json();r(Array.isArray(z)?z:[])}catch(T){console.error("Failed to load shipments:",T),l("Failed to load shipments"),r([])}finally{n(!1)}};b.useEffect(()=>{k();const T=Xe.subscribe("shipment_created",L=>{console.log("New shipment created:",L),r(O=>[L,...O])}),z=Xe.subscribe("shipment_updated",L=>{console.log("Shipment updated:",L),r(O=>O.map(V=>V.id===L.id?L:V))});return()=>{T(),z()}},[]);const A=async T=>{try{const z=await fetch(`${c}/api/shiprocket/orders/${T}/shipment`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(z.ok){const L=await z.json();console.log("Shiprocket shipment created:",L),k(),t("success","Shipment created successfully in Shiprocket!")}else{const L=await z.json().catch(()=>({})),O=(L==null?void 0:L.error)||(L==null?void 0:L.message)||"Failed to create Shiprocket shipment";l(O),t("error",O)}}catch(z){const L=(z==null?void 0:z.message)||"Failed to create Shiprocket shipment";l(L),t("error",L)}},y=async(T,z)=>{try{const L=await fetch(`${c}/api/shiprocket/shipments/${T}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:z,awb_code:`AWB${Date.now()}`,courier_name:"Shiprocket",tracking_url:`https://shiprocket.co/tracking/${T}`})});if(L.ok){const O=await L.json();console.log("Shipment status updated:",O),k(),t("success","Shipment updated")}else l("Failed to update shipment status"),t("error","Failed to update shipment status")}catch{l("Failed to update shipment status")}},N=T=>{switch(T){case"pending":return"bg-yellow-100 text-yellow-800";case"created":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Shipments"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage Shiprocket deliveries"})]}),e.jsx("button",{onClick:k,className:"btn-primary",children:"Refresh"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Pincode Serviceability"}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-2",style:{color:"var(--text-muted)"},children:"Pickup Postcode"}),e.jsx("input",{value:d,onChange:T=>u(T.target.value),placeholder:"110001",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)] w-40",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-2",style:{color:"var(--text-muted)"},children:"Delivery Postcode"}),e.jsx("input",{value:p,onChange:T=>h(T.target.value),placeholder:"560001",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)] w-40",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-2",style:{color:"var(--text-muted)"},children:"Weight (kg)"}),e.jsx("input",{type:"number",step:"0.1",value:g,onChange:T=>x(T.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)] w-28",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}})]}),e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",style:{color:"var(--text-secondary)"},children:[e.jsx("input",{type:"checkbox",checked:f,onChange:T=>m(T.target.checked)})," COD"]}),e.jsx("button",{onClick:async()=>{try{v(null);const T=new URLSearchParams({pickup_postcode:d,delivery_postcode:p,weight:g,cod:f?"1":"0"}),L=await(await fetch(`${c}/api/shiprocket/serviceability?${T.toString()}`,{headers:{"x-user-role":"admin","x-user-permissions":"shipping:read"}})).json();v(L)}catch{v({success:!1,message:"Failed to check serviceability"})}},className:"btn-primary",children:"Check Serviceability"})]}),j&&e.jsxs("div",{className:"mt-4",children:[(R=j.data)!=null&&R.available_courier_companies&&j.data.available_courier_companies.length>0?e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold mb-3 text-slate-900 dark:text-slate-100",children:["Available Couriers (",j.data.available_courier_companies.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-96 overflow-y-auto",children:j.data.available_courier_companies.map((T,z)=>e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 text-sm",children:T.courier_name}),e.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:[T.is_surface?"Surface":"Air","  ",T.city,", ",T.state]})]}),T.recommended&&e.jsx("span",{className:"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs px-2 py-1 rounded",children:"Recommended"})]}),e.jsxs("div",{className:"space-y-1.5 mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Rate:"}),e.jsxs("span",{className:"font-bold text-slate-900 dark:text-slate-100",children:["",T.rate||T.freight_charge]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Delivery:"}),e.jsx("span",{className:"text-xs font-medium text-slate-900 dark:text-slate-100",children:T.etd||`${T.estimated_delivery_days} days`})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"COD:"}),e.jsx("span",{className:`text-xs font-medium ${T.cod?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:T.cod?"Available":"Not Available"})]}),T.cod_charges>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"COD Charges:"}),e.jsxs("span",{className:"text-xs text-slate-900 dark:text-slate-100",children:["",T.cod_charges]})]}),T.rating&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Rating:"}),e.jsxs("span",{className:"text-xs font-medium text-slate-900 dark:text-slate-100",children:[" ",T.rating.toFixed(1)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tracking:"}),e.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:T.realtime_tracking||"N/A"})]}),T.cutoff_time&&e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cutoff:"}),e.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:T.cutoff_time})]})]}),T.courier_company_id===j.data.recommended_courier_company_id&&e.jsx("div",{className:"mt-2 pt-2 border-t border-slate-200 dark:border-slate-700",children:e.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded",children:" Shiprocket Recommended"})})]},z))})]}):e.jsx("div",{className:"mt-3 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"No courier companies available for this route."})}),e.jsxs("details",{className:"mt-4",children:[e.jsx("summary",{className:"text-xs text-slate-600 dark:text-slate-400 cursor-pointer hover:text-slate-900 dark:hover:text-slate-100",children:"Show Raw Response (for debugging)"}),e.jsx("pre",{className:"mt-2 text-xs bg-slate-50 dark:bg-slate-900 p-3 rounded overflow-auto max-h-64",children:JSON.stringify(j,null,2)})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3 text-slate-900 dark:text-slate-100",children:"Manifest & Pickup"}),e.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[e.jsx("button",{onClick:async()=>{try{const T=s.map(O=>Number(O.order_id)).filter(Boolean),z=await fetch(`${c}/api/shiprocket/manifest`,{method:"POST",headers:{"Content-Type":"application/json","x-user-role":"admin","x-user-permissions":"shipping:update"},body:JSON.stringify({orderIds:T})}),L=await z.json();if(!z.ok)throw new Error((L==null?void 0:L.error)||"Failed");alert(`Manifest Ready: ${L.manifest_url}`)}catch(T){alert((T==null?void 0:T.message)||"Failed to generate manifest")}},className:"px-4 py-2 bg-slate-900 text-white rounded hover:bg-slate-700",children:"Generate Manifest (All)"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-300 mb-1",children:"Pickup Date"}),e.jsx("input",{type:"date",value:w,onChange:T=>S(T.target.value),className:"border px-3 py-2 rounded w-44 dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),e.jsx("button",{onClick:async()=>{if(!w)return alert("Choose pickup date");try{const T=s.map(O=>Number(O.order_id)).filter(Boolean),z=await fetch(`${c}/api/shiprocket/pickup`,{method:"POST",headers:{"Content-Type":"application/json","x-user-role":"admin","x-user-permissions":"shipping:update"},body:JSON.stringify({pickup_date:w,orderIds:T})}),L=await z.json();if(!z.ok)throw new Error((L==null?void 0:L.error)||"Failed");alert("Pickup scheduled")}catch(T){alert((T==null?void 0:T.message)||"Failed to schedule pickup")}},className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Schedule Pickup"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3 text-slate-900 dark:text-slate-100",children:"Non-Delivery Reports (NDR)"}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{onClick:async()=>{try{const z=await(await fetch(`${c}/api/shiprocket/ndr`,{headers:{"x-user-role":"admin","x-user-permissions":"shipping:read"}})).json();E(z)}catch{E({items:[]})}},className:"px-4 py-2 bg-slate-900 text-white rounded hover:bg-slate-700",children:"Load NDRs"})}),F&&e.jsx("pre",{className:"mt-3 text-xs bg-slate-50 dark:bg-slate-900 p-3 rounded overflow-auto max-h-64",children:JSON.stringify(F,null,2)})]}),i&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:i}),a?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Loading shipments..."})}):e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"AWB Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Courier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:s.map(T=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:T.order_id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:T.customer_name||"N/A"}),e.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:T.customer_email||"N/A"})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900 dark:text-slate-100",children:["",T.total?Number(T.total).toFixed(2):"0.00"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N(T.status)}`,children:T.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:T.awb_code||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:T.courier_name||"N/A"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[T.status==="pending"&&e.jsx("button",{onClick:()=>A(T.order_id),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:"Create Shipment"}),T.status==="created"&&e.jsx("button",{onClick:()=>y(T.id,"shipped"),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:"Mark Shipped"}),T.status==="shipped"&&e.jsx("button",{onClick:()=>y(T.id,"delivered"),className:"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300",children:"Mark Delivered"}),T.tracking_url&&e.jsx("a",{href:T.tracking_url,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:"Track"}),e.jsx("button",{onClick:async()=>{try{const z=await fetch(`${c}/api/shiprocket/rto/${T.id}`,{method:"POST",headers:{"x-user-role":"admin","x-user-permissions":"shipping:update"}}),L=await z.json();if(!z.ok)throw new Error((L==null?void 0:L.error)||"Failed");alert("Marked RTO"),k()}catch(z){alert((z==null?void 0:z.message)||"Failed to mark RTO")}},className:"text-red-600 hover:text-red-800 ml-2",children:"Mark RTO"})]})]},T.id))})]})})})]})}function p9(){const{orderNumber:t}=bb(),s=ja(),{notify:r}=mr(),[a,n]=b.useState(null),[i,l]=b.useState(!1),[o,c]=b.useState(""),[d,u]=b.useState(""),[p,h]=b.useState(""),[g,x]=b.useState(""),[f,m]=b.useState(""),[j,v]=b.useState(!1),[w,S]=b.useState(null),E=(()=>{if(typeof window<"u"){const O=window.location.hostname;if(O==="thenefol.com"||O==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),k=b.useMemo(()=>{const O=localStorage.getItem("auth_token");return{"Content-Type":"application/json",...O?{Authorization:`Bearer ${O}`}:{},"x-user-permissions":"orders:read,orders:update,shipping:read","x-user-role":"admin"}},[]),A=async()=>{if(t)try{l(!0),c("");const O=await fetch(`${E}/api/orders/${encodeURIComponent(t)}`,{headers:k});if(!O.ok)throw new Error("Failed to fetch order");const V=await O.json();if(n(V),u(V.status),V.id)try{const Z=await fetch(`${E}/api/shiprocket_shipments?order_id=${V.id}`,{headers:k});if(Z.ok){const D=await Z.json(),P=Array.isArray(D)?D:D.data||[];if(P.length>0){const W=P.find(M=>M.order_id===V.id)||P[0],ee=W&&W.shipment_id;v(ee),S(ee?W:null)}else v(!1),S(null)}else v(!1),S(null)}catch{v(!1),S(null)}}catch(O){c((O==null?void 0:O.message)||"Failed to load order")}finally{l(!1)}};b.useEffect(()=>{A()},[t]);const y=async()=>{if(a)try{if(l(!0),!(await fetch(`${E}/api/orders/${a.id}`,{method:"PUT",headers:k,body:JSON.stringify({status:d,note:p})})).ok)throw new Error("Failed to update status");await A(),h(""),r("success","Order status updated")}catch(O){r("error",(O==null?void 0:O.message)||"Failed to update")}finally{l(!1)}},N=async()=>{if(!a)return;const O=g.split(",").map(Z=>Z.trim()).filter(Boolean);if(!(await fetch(`${E}/api/orders/${a.id}/tags`,{method:"POST",headers:k,body:JSON.stringify({tags:O})})).ok){r("error","Failed to update tags");return}await A(),r("success","Tags updated")},R=async()=>{var O;if(a)try{l(!0);const V=await fetch(`${E}/api/shiprocket/orders/${a.id}/shipment`,{method:"POST",headers:k});let Z={};const D=V.headers.get("content-type");if(D&&D.includes("application/json")&&(Z=await V.json()),!V.ok){const P=(Z==null?void 0:Z.error)||(Z==null?void 0:Z.message)||(Z==null?void 0:Z.details)||`Failed to create shipment (${V.status})`;throw new Error(P)}r("success","Shipment created in Shiprocket!"),(Z.shipment_id||(O=Z.shiprocket_response)!=null&&O.shipment_id)&&(v(!0),S(Z)),await A()}catch(V){r("error",(V==null?void 0:V.message)||"Failed to create shipment"),console.error("Create shipment error:",V)}finally{l(!1)}},T=async()=>{if(a)try{if(l(!0),!j||!(w!=null&&w.shipment_id)){r("error","Please create a shipment first. A shipment must be created in Shiprocket before generating an AWB.");return}const O=await fetch(`${E}/api/shiprocket/orders/${a.id}/awb`,{method:"POST",headers:k});let V={};const Z=O.headers.get("content-type");if(Z&&Z.includes("application/json")&&(V=await O.json()),!O.ok){const D=(V==null?void 0:V.error)||(V==null?void 0:V.message)||(V==null?void 0:V.details)||`Failed to create AWB (${O.status})`;throw new Error(D)}r("success","AWB created successfully"),v(!0),S(V),await A()}catch(O){const V=(O==null?void 0:O.message)||"Failed to create AWB";r("error",V),console.error("Create AWB error:",O)}finally{l(!1)}},z=async()=>{if(a)try{l(!0);const O=await fetch(`${E}/api/shiprocket/orders/${a.id}/track`,{headers:k});if(!O.ok){if(O.status===404)throw new Error("Tracking information not available. Please create a shipment first.");const Z=await O.json().catch(()=>({}));throw new Error((Z==null?void 0:Z.error)||(Z==null?void 0:Z.message)||`Failed to fetch tracking (${O.status})`)}const V=await O.json();r("info","Tracking fetched (see console)"),console.log("Tracking:",V)}catch(O){r("error",(O==null?void 0:O.message)||"Failed to fetch tracking"),console.error("View tracking error:",O)}finally{l(!1)}},L=async()=>{var V,Z;if(!a)return;const O=f.split(",").map(D=>parseInt(D.trim(),10)).filter(D=>!isNaN(D));if(O.length===0){r("error","Provide item indexes like 0,2");return}try{l(!0);const D=await fetch(`${E}/api/orders/${a.id}/split`,{method:"POST",headers:k,body:JSON.stringify({itemIndexes:O})}),P=await D.json();if(!D.ok){const W=(P==null?void 0:P.error)||(P==null?void 0:P.message)||(P==null?void 0:P.details)||`Failed to split order (${D.status})`;throw new Error(W)}r("success",`Split created: ${((V=P.split)==null?void 0:V.order_number)||((Z=P.split)==null?void 0:Z.id)}`),await A(),m("")}catch(D){r("error",(D==null?void 0:D.message)||"Failed to split order"),console.error("Split order error:",D)}finally{l(!1)}};return i&&!a?e.jsx("div",{className:"p-6",children:"Loading..."}):o?e.jsx("div",{className:"p-6 text-red-600",children:o}):a?e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:["Order #",a.order_number]}),e.jsxs("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:["Placed on ",new Date(a.created_at).toLocaleString()]})]}),e.jsx("button",{onClick:()=>s(-1),className:"btn-secondary",children:"Back"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"metric-card md:col-span-2",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Items"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-xs uppercase text-gray-500 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pr-4",children:"Product"}),e.jsx("th",{className:"py-2 pr-4",children:"SKU"}),e.jsx("th",{className:"py-2 pr-4",children:"Qty"}),e.jsx("th",{className:"py-2 pr-4",children:"Price"}),e.jsx("th",{className:"py-2 pr-4",children:"Subtotal"})]})}),e.jsx("tbody",{children:(a.items||[]).map((O,V)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 pr-4",children:O.title||O.product_id}),e.jsx("td",{className:"py-2 pr-4",children:O.sku||"-"}),e.jsx("td",{className:"py-2 pr-4",children:O.qty||1}),e.jsxs("td",{className:"py-2 pr-4",children:["",Number(O.price||0).toFixed(2)]}),e.jsxs("td",{className:"py-2 pr-4 font-medium",children:["",Number((O.qty||1)*(O.price||0)).toFixed(2)]})]},V))})]})})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["",Number(a.subtotal||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shipping"}),e.jsxs("span",{children:["",Number(a.shipping||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"GST"}),e.jsxs("span",{children:["",Number(a.tax||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["",Number(a.total||0).toFixed(2)]})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Status"}),e.jsxs("select",{value:d,onChange:O=>u(O.target.value),className:"input w-full",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsx("input",{className:"input w-full",placeholder:"Add note (optional)",value:p,onChange:O=>h(O.target.value)}),e.jsx("button",{onClick:y,className:"btn-primary w-full",children:"Update Status"}),e.jsxs("div",{className:"pt-4 border-t mt-4",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Tags (comma-separated)"}),e.jsx("input",{className:"input w-full",placeholder:"e.g. priority,vip",value:g,onChange:O=>x(O.target.value)}),e.jsx("button",{onClick:N,className:"btn-secondary w-full mt-2",children:"Update Tags"})]}),e.jsxs("div",{className:"pt-4 border-t mt-4",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Split Items (indexes)"}),e.jsx("input",{className:"input w-full",placeholder:"e.g. 0,2",value:f,onChange:O=>m(O.target.value)}),e.jsx("button",{onClick:L,className:"btn-secondary w-full mt-2",children:"Split Order"})]}),e.jsxs("div",{className:"pt-4 border-t mt-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Shipping (Shiprocket)"}),j&&w&&e.jsxs("div",{className:"mb-3 p-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded text-xs",children:[e.jsx("p",{className:"text-green-700 dark:text-green-300 font-medium",children:" Shipment Created"}),w.shipment_id&&e.jsxs("p",{className:"text-green-600 dark:text-green-400",children:["ID: ",w.shipment_id]}),w.awb_code&&e.jsxs("p",{className:"text-green-600 dark:text-green-400",children:["AWB: ",w.awb_code]})]}),!j&&e.jsx("div",{className:"mb-3 p-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded text-xs",children:e.jsx("p",{className:"text-yellow-700 dark:text-yellow-300",children:" Create a shipment first to generate AWB"})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:R,className:"btn-primary w-full",disabled:i||j,children:j?"Shipment Already Created":"Create Shipment"}),e.jsx("button",{onClick:T,className:"btn-secondary w-full",disabled:i||!j,title:j?"":"Please create a shipment first",children:"Generate AWB & Label"}),e.jsx("button",{onClick:z,className:"btn-secondary w-full",disabled:i||!j||!(w!=null&&w.awb_code),title:j?w!=null&&w.awb_code?"":"AWB not generated yet":"Please create a shipment first",children:"View Tracking"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Shipping Address"}),e.jsx("div",{className:"text-sm space-y-1",children:a.shipping_address?typeof a.shipping_address=="string"?e.jsx("p",{children:a.shipping_address}):e.jsxs(e.Fragment,{children:[a.shipping_address.firstName||a.shipping_address.first_name?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"font-semibold",children:[a.shipping_address.firstName||a.shipping_address.first_name," ",a.shipping_address.lastName||a.shipping_address.last_name]}),a.shipping_address.company&&e.jsx("p",{className:"text-xs text-gray-600",children:a.shipping_address.company})]}):e.jsx("p",{className:"font-semibold",children:a.customer_name}),e.jsx("p",{children:a.shipping_address.address||a.shipping_address.street||""}),a.shipping_address.apartment&&e.jsx("p",{children:a.shipping_address.apartment}),e.jsxs("p",{children:[a.shipping_address.city||"",", ",a.shipping_address.state||""," ",a.shipping_address.zip||""]}),e.jsx("p",{children:a.shipping_address.country||"India"}),a.shipping_address.phone&&e.jsxs("p",{children:["Phone: ",a.shipping_address.phone]}),a.shipping_address.email&&e.jsxs("p",{children:["Email: ",a.shipping_address.email]})]}):e.jsx("p",{className:"text-gray-600",children:"No shipping address available"})})]}),a.billing_address&&e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Billing Address"}),e.jsx("div",{className:"text-sm space-y-1",children:typeof a.billing_address=="string"?e.jsx("p",{children:a.billing_address}):e.jsxs(e.Fragment,{children:[a.billing_address.firstName||a.billing_address.first_name?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"font-semibold",children:[a.billing_address.firstName||a.billing_address.first_name," ",a.billing_address.lastName||a.billing_address.last_name]}),a.billing_address.company&&e.jsx("p",{className:"text-xs text-gray-600",children:a.billing_address.company})]}):e.jsx("p",{className:"font-semibold",children:a.customer_name}),e.jsx("p",{children:a.billing_address.address||a.billing_address.street||""}),a.billing_address.apartment&&e.jsx("p",{children:a.billing_address.apartment}),e.jsxs("p",{children:[a.billing_address.city||"",", ",a.billing_address.state||""," ",a.billing_address.zip||""]}),e.jsx("p",{children:a.billing_address.country||"India"})]})})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Timeline"}),e.jsx("div",{className:"space-y-3",children:(a.history||[]).length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No history."}):(a.history||[]).map(O=>e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:O.new_status}),O.old_status?e.jsxs("span",{className:"text-gray-500",children:[" (from ",O.old_status,")"]}):null,O.note?e.jsxs("span",{className:"text-gray-600",children:["  ",O.note]}):null,e.jsx("div",{className:"text-xs text-gray-500",children:new Date(O.created_at).toLocaleString()})]},O.id))})]})]}):e.jsx("div",{className:"p-6",children:"Not found"})}function g9(){var g,x;const[t,s]=b.useState(""),[r,a]=b.useState(""),[n,i]=b.useState(!1),[l,o]=b.useState(""),{login:c,isAuthenticated:d,isLoading:u}=Uo(),p=mi();if(d){const f=((x=(g=p.state)==null?void 0:g.from)==null?void 0:x.pathname)||"/admin/dashboard";return e.jsx(No,{to:f,replace:!0})}const h=async f=>{f.preventDefault(),i(!0),o("");try{await c(t,r)||o("Invalid email or password")}catch{o("Login failed. Please try again.")}finally{i(!1)}};return u?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Nefol Admin Panel"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:"Sign in to your admin account"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:h,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:f=>s(f.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Email address"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:f=>a(f.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Password"})]})]}),l&&e.jsx("div",{className:"text-red-600 text-sm text-center",children:l}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:n,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:n?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"})})]})]})})}function y9(){var ee;const{notify:t}=mr(),[s,r]=b.useState([]),[a,n]=b.useState(""),[i,l]=b.useState([]),[o,c]=b.useState(!0),[d,u]=b.useState(null),[p,h]=b.useState(null),[g,x]=b.useState(!1),[f,m]=b.useState(!1),[j,v]=b.useState(!1),[w,S]=b.useState(null),[F,E]=b.useState("pages"),A=(()=>{if(typeof window<"u"){const M=window.location.hostname;return M==="thenefol.com"||M==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}/api`:"https://thenefol.com/api"}return"https://thenefol.com/api"})(),y=async()=>{try{const q=(await(await fetch(`${A}/cms/pages`)).json()).map(Y=>({id:Y.id,page_name:Y.slug,page_title:Y.title,page_subtitle:"",meta_description:Y.meta_description||"",created_at:Y.created_at,updated_at:Y.updated_at}));r(q),q.length>0&&!a&&n(q[0].page_name)}catch(M){console.error("Failed to fetch pages:",M),t("error","Failed to fetch pages")}},N=async M=>{try{const Y=(await(await fetch(`${A}/cms/sections/${M}`)).json()).map(K=>({id:K.id,page_name:M,section_key:K.section_type,section_title:K.title||K.section_type,section_type:K.section_type,content:K.content,order_index:K.order_index,is_active:K.is_active,created_at:K.created_at,updated_at:K.updated_at}));l(Y)}catch(U){console.error("Failed to fetch sections:",U),t("error","Failed to fetch sections")}};b.useEffect(()=>{y().then(()=>c(!1)),Xe.connect(),v(Xe.isConnected());const M=Xe.subscribe("cms-update",q=>{console.log(" Real-time CMS update received:",q),S(new Date),q.event.includes("page")&&y(),q.event.includes("section")&&a&&N(a)}),U=setInterval(()=>{v(Xe.isConnected())},3e3);return()=>{clearInterval(U),M()}},[]),b.useEffect(()=>{a&&N(a)},[a]);const R=async M=>{try{(await fetch(`${A}/cms/pages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:M.page_name,title:M.page_title,content:{},meta_description:M.meta_description})})).ok&&(await y(),x(!1),u(null),t("success","Page saved"))}catch(U){console.error("Failed to save page:",U),t("error","Failed to save page")}},[T,z]=b.useState(null),L=async M=>{try{await fetch(`${A}/cms/pages/${M}`,{method:"DELETE"}),await y(),a===M&&n(""),t("success","Page deleted")}catch(U){console.error("Failed to delete page:",U),t("error","Failed to delete page")}},O=async M=>{try{(await fetch(`${A}/cms/sections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page_slug:a,section_type:M.section_type,title:M.section_title,content:M.content,order_index:M.order_index,is_active:M.is_active})})).ok&&(await N(a),m(!1),h(null),t("success","Section saved"))}catch(U){console.error("Failed to save section:",U),t("error","Failed to save section")}},[V,Z]=b.useState(null),D=async M=>{try{await fetch(`${A}/cms/sections/${M}`,{method:"DELETE"}),await N(a),t("success","Section deleted")}catch(U){console.error("Failed to delete section:",U),t("error","Failed to delete section")}},P=async M=>{await O({...M,is_active:!M.is_active})},W=async(M,U)=>{const q=U==="up"?M.order_index-1:M.order_index+1,Y=i.find(K=>K.order_index===q);Y&&(await O({...M,order_index:q}),await O({...Y,order_index:M.order_index}),await N(a))};return o?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"text-lg",children:"Loading CMS..."})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Content Management System"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[j?e.jsxs(e.Fragment,{children:[e.jsx(r3,{className:"w-4 h-4",style:{color:"#059669"}}),e.jsx("span",{className:"text-sm",style:{color:"#059669"},children:"Live  Real-time updates enabled"})]}):e.jsxs(e.Fragment,{children:[e.jsx(t3,{className:"w-4 h-4",style:{color:"var(--text-muted)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Offline  Changes may not sync"})]}),w&&e.jsxs("span",{className:"text-xs ml-4",style:{color:"var(--text-muted)"},children:["Last update: ",w.toLocaleTimeString()]})]})]}),e.jsxs("button",{onClick:()=>{u(null),x(!0)},className:"btn-primary flex items-center gap-2",children:[e.jsx(rs,{className:"w-5 h-5"}),"New Page"]})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>E("pages"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${F==="pages"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Pages"}),e.jsx("button",{onClick:()=>E("sections"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${F==="sections"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Sections"}),e.jsxs("button",{onClick:()=>E("settings"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${F==="settings"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(ws,{className:"w-4 h-4 mr-2"}),"Settings"]})]}),F==="pages"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"CMS Pages"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(M=>e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold",children:M.page_title||M.page_name}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:M.page_name}),M.page_subtitle&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:M.page_subtitle}),M.meta_description&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:M.meta_description})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>{u(M),x(!0)},className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(Yu,{className:"w-4 h-4 text-blue-600"})}),e.jsx("button",{onClick:()=>z(M.page_name),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(Mt,{className:"w-4 h-4 text-red-600"})})]})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Created: ",new Date(M.created_at).toLocaleDateString()]})]},M.id))})]}),F==="sections"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 bg-white rounded-lg shadow p-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Select Page"}),e.jsx("div",{className:"space-y-2",children:s.map(M=>e.jsx("div",{className:`p-3 rounded-lg cursor-pointer flex items-center justify-between ${a===M.page_name?"bg-blue-100 border-blue-500 border":"bg-gray-50 hover:bg-gray-100"}`,onClick:()=>n(M.page_name),children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:M.page_title||M.page_name}),e.jsx("div",{className:"text-xs text-gray-500",children:M.page_name})]})},M.id))})]}),e.jsx("div",{className:"lg:col-span-3",children:a?e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold",children:["Sections for ",((ee=s.find(M=>M.page_name===a))==null?void 0:ee.page_title)||a]}),e.jsxs("button",{onClick:()=>{h(null),m(!0)},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(rs,{className:"w-5 h-5"}),"Add Section"]})]}),e.jsx("div",{className:"space-y-4",children:i.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No sections yet. Add your first section to get started."}):i.map(M=>e.jsxs("div",{className:`border rounded-lg p-4 ${M.is_active?"border-gray-200":"border-gray-300 bg-gray-50 opacity-60"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:M.section_title}),e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 rounded",children:M.section_type}),!M.is_active&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded",children:"Hidden"})]}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:M.section_key})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>W(M,"up"),disabled:M.order_index===0,className:"p-1 hover:bg-gray-200 rounded disabled:opacity-30",children:e.jsx(hm,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>W(M,"down"),disabled:M.order_index===i.length-1,className:"p-1 hover:bg-gray-200 rounded disabled:opacity-30",children:e.jsx(mm,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>P(M),className:"p-1 hover:bg-gray-200 rounded",children:M.is_active?e.jsx(ct,{className:"w-5 h-5 text-green-600"}):e.jsx(Gu,{className:"w-5 h-5 text-gray-400"})}),e.jsx("button",{onClick:()=>{h(M),m(!0)},className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(Yu,{className:"w-5 h-5 text-blue-600"})}),e.jsx("button",{onClick:()=>Z(M.id),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(Mt,{className:"w-5 h-5 text-red-600"})})]})]}),e.jsx("div",{className:"bg-gray-50 rounded p-3 text-sm",children:e.jsx("pre",{className:"whitespace-pre-wrap font-mono text-xs",children:JSON.stringify(M.content,null,2)})})]},M.id))})]}):e.jsx("div",{className:"bg-white rounded-lg shadow p-12 text-center text-gray-500",children:"Select a page from the sidebar to view and edit its sections"})})]}),F==="settings"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"CMS Settings"}),e.jsx("div",{className:"text-center py-12 text-gray-500",children:"CMS Settings panel coming soon..."})]}),g&&e.jsx(b9,{page:d,onSave:R,onClose:()=>{x(!1),u(null)}}),f&&e.jsx(v9,{section:p,pageName:a,onSave:O,onClose:()=>{m(!1),h(null)}}),e.jsx(Va,{open:!!T,onClose:()=>z(null),onConfirm:()=>{T&&L(T)},title:"Delete this page?",description:"This will remove all its sections.",confirmText:"Delete"}),e.jsx(Va,{open:!!V,onClose:()=>Z(null),onConfirm:()=>{V!=null&&D(V)},title:"Delete this section?",description:"This action cannot be undone.",confirmText:"Delete"})]})}function b9({page:t,onSave:s,onClose:r}){const[a,n]=b.useState({page_name:(t==null?void 0:t.page_name)||"",page_title:(t==null?void 0:t.page_title)||"",page_subtitle:(t==null?void 0:t.page_subtitle)||"",meta_description:(t==null?void 0:t.meta_description)||""}),i=l=>{l.preventDefault(),s(a)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:t?"Edit Page":"Create New Page"}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(es,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Page Name (URL Slug)"}),e.jsx("input",{type:"text",value:a.page_name,onChange:l=>n({...a,page_name:l.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"home, about, contact",required:!0,disabled:!!t}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used in the URL, cannot be changed after creation"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Page Title"}),e.jsx("input",{type:"text",value:a.page_title,onChange:l=>n({...a,page_title:l.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Home Page"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Page Subtitle"}),e.jsx("input",{type:"text",value:a.page_subtitle,onChange:l=>n({...a,page_subtitle:l.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Welcome to our store"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Meta Description"}),e.jsx("textarea",{value:a.meta_description,onChange:l=>n({...a,meta_description:l.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Description for SEO"})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:r,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx($s,{className:"w-5 h-5"}),"Save Page"]})]})]})]})})}function v9({section:t,pageName:s,onSave:r,onClose:a}){const[n,i]=b.useState({section_key:(t==null?void 0:t.section_key)||"",section_title:(t==null?void 0:t.section_title)||"",section_type:(t==null?void 0:t.section_type)||"text",content:t!=null&&t.content?JSON.stringify(t.content,null,2):"{}",order_index:(t==null?void 0:t.order_index)||0,is_active:(t==null?void 0:t.is_active)!==!1}),l=c=>{c.preventDefault();try{const d=JSON.parse(n.content);r({...n,content:d})}catch{alert("Invalid JSON content")}},o=["hero","text","grid","list","gallery","form","testimonials","features","pricing","cta","contact","faq","team","stats"];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:t?"Edit Section":"Create New Section"}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(es,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Section Key (Unique Identifier)"}),e.jsx("input",{type:"text",value:n.section_key,onChange:c=>i({...n,section_key:c.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"hero_banner, features_section",required:!0,disabled:!!t}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unique key for this section, cannot be changed after creation"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Section Title"}),e.jsx("input",{type:"text",value:n.section_title,onChange:c=>i({...n,section_title:c.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Hero Banner"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Section Type"}),e.jsx("select",{value:n.section_type,onChange:c=>i({...n,section_type:c.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:o.map(c=>e.jsx("option",{value:c,children:c},c))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Content (JSON)"}),e.jsx("textarea",{value:n.content,onChange:c=>i({...n,content:c.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 font-mono text-sm",rows:15,placeholder:'{"title": "Welcome", "description": "..."}'}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter valid JSON content for this section"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Order Index"}),e.jsx("input",{type:"number",value:n.order_index,onChange:c=>i({...n,order_index:parseInt(c.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 border rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.is_active,onChange:c=>i({...n,is_active:c.target.checked}),className:"w-4 h-4"}),e.jsx("span",{children:"Active (Visible on website)"})]})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx($s,{className:"w-5 h-5"}),"Save Section"]})]})]})]})})}function j9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!1),[l,o]=b.useState("requests"),[c,d]=b.useState("all"),[u,p]=b.useState(""),[h,g]=b.useState(null),[x,f]=b.useState(!1),m=Dn(),j=async()=>{try{i(!0);const N=await(await fetch(`${m}/blog/admin/requests`)).json();s(N)}catch(y){console.error("Failed to fetch blog requests:",y)}finally{i(!1)}},v=async()=>{try{i(!0);const N=await(await fetch(`${m}/blog/admin/posts`)).json();a(N)}catch(y){console.error("Failed to fetch blog posts:",y)}finally{i(!1)}};b.useEffect(()=>{l==="requests"?j():v()},[l]);const w=async(y,N=!1)=>{try{(await fetch(`${m}/blog/admin/approve/${y}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({featured:N})})).ok&&(await j(),await v())}catch(R){console.error("Failed to approve blog request:",R)}},S=async(y,N)=>{try{(await fetch(`${m}/blog/admin/reject/${y}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:N})})).ok&&await j()}catch(R){console.error("Failed to reject blog request:",R)}},F=async y=>{if(confirm("Are you sure you want to delete this blog post?"))try{(await fetch(`${m}/blog/admin/posts/${y}`,{method:"DELETE"})).ok&&await v()}catch(N){console.error("Failed to delete blog post:",N)}},E=t.filter(y=>{const N=c==="all"||y.status===c,R=y.title.toLowerCase().includes(u.toLowerCase())||y.author_name.toLowerCase().includes(u.toLowerCase());return N&&R}),k=r.filter(y=>y.title.toLowerCase().includes(u.toLowerCase())||y.author_name.toLowerCase().includes(u.toLowerCase())),A=y=>{switch(y){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Blog Request Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage blog submissions and published posts"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"w-5 h-5",style:{color:"#D97706"}}),e.jsxs("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:[t.filter(y=>y.status==="pending").length," pending"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"w-5 h-5",style:{color:"#059669"}}),e.jsxs("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:[r.filter(y=>y.status==="approved").length," published"]})]})]})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>o("requests"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="requests"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Blog Requests"}),e.jsx("button",{onClick:()=>o("posts"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="posts"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Published Posts"})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by title or author...",value:u,onChange:y=>p(y.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),l==="requests"&&e.jsxs("select",{value:c,onChange:y=>d(y.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),n?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Loading..."})]}):e.jsx("div",{className:"space-y-4",children:l==="requests"?E.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No blog requests found"}):E.map(y=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:y.title}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${A(y.status)}`,children:y.status}),y.featured&&e.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded flex items-center gap-1",children:[e.jsx(xr,{className:"w-3 h-3"}),"Featured"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ga,{className:"w-4 h-4"}),y.author_name]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Mr,{className:"w-4 h-4"}),new Date(y.created_at).toLocaleDateString()]})]}),e.jsx("p",{className:"text-gray-700 mb-3",children:y.excerpt}),y.images&&y.images.length>0&&e.jsx("div",{className:"flex gap-2 mb-3",children:y.images.map((N,R)=>e.jsx("img",{src:`${m}${N}`,alt:`Blog image ${R+1}`,className:"w-16 h-16 object-cover rounded"},R))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{g(y),f(!0)},className:"flex items-center gap-1 px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700",children:[e.jsx(ct,{className:"w-4 h-4"}),"View"]}),y.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>w(y.id,!1),className:"flex items-center gap-1 px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:[e.jsx(Vt,{className:"w-4 h-4"}),"Approve"]}),e.jsxs("button",{onClick:()=>w(y.id,!0),className:"flex items-center gap-1 px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",children:[e.jsx(xr,{className:"w-4 h-4"}),"Featured"]}),e.jsxs("button",{onClick:()=>{const N=prompt("Reason for rejection:");N&&S(y.id,N)},className:"flex items-center gap-1 px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:[e.jsx(Kt,{className:"w-4 h-4"}),"Reject"]})]})]})]}),y.rejection_reason&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"Rejection Reason:"})," ",y.rejection_reason]})})]},y.id)):k.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No published posts yet"}):k.map(y=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:y.title}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${A(y.status)}`,children:y.status}),y.featured&&e.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded flex items-center gap-1",children:[e.jsx(xr,{className:"w-3 h-3"}),"Featured"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ga,{className:"w-4 h-4"}),y.author_name]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Mr,{className:"w-4 h-4"}),new Date(y.created_at).toLocaleDateString()]})]}),e.jsx("p",{className:"text-gray-700",children:y.excerpt})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{g(y),f(!0)},className:"flex items-center gap-1 px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700",children:[e.jsx(ct,{className:"w-4 h-4"}),"View"]}),e.jsxs("button",{onClick:()=>F(y.id),className:"flex items-center gap-1 px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:[e.jsx(Mt,{className:"w-4 h-4"}),"Delete"]})]})]}),y.images&&y.images.length>0&&e.jsx("div",{className:"flex gap-2",children:y.images.map((N,R)=>e.jsx("img",{src:`${m}${N}`,alt:`Blog image ${R+1}`,className:"w-16 h-16 object-cover rounded"},R))})]},y.id))}),x&&h&&e.jsx(w9,{blog:h,onClose:()=>{f(!1),g(null)}})]})}function w9({blog:t,onClose:s}){const r=Dn();return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:t.title}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(Kt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ga,{className:"w-4 h-4"}),t.author_name," (",t.author_email,")"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Mr,{className:"w-4 h-4"}),new Date(t.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"bg-gray-50 rounded p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Excerpt:"}),e.jsx("p",{className:"text-gray-700",children:t.excerpt})]}),e.jsxs("div",{className:"bg-gray-50 rounded p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Full Content:"}),e.jsx("div",{className:"whitespace-pre-wrap text-gray-700",children:t.content})]}),t.images&&t.images.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Images:"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:t.images.map((a,n)=>e.jsx("img",{src:`${r}${a}`,alt:`Blog image ${n+1}`,className:"w-full h-32 object-cover rounded"},n))})]}),t.rejection_reason&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-4",children:[e.jsx("h3",{className:"font-semibold text-red-800 mb-2",children:"Rejection Reason:"}),e.jsx("p",{className:"text-red-700",children:t.rejection_reason})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:s,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Close"})})]})})}function N9(){const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(!1),[l,o]=b.useState(null),[c,d]=b.useState({name:"",description:"",points_per_rupee:1,referral_bonus:100,vip_threshold:1e3,status:"active"});b.useEffect(()=>{u()},[]);const u=async()=>{try{a(!0);const g=await rt.getLoyaltyPrograms();s(g)}catch(g){console.error("Failed to fetch loyalty programs:",g)}finally{a(!1)}},p=async g=>{g.preventDefault();try{l?await rt.updateLoyaltyProgram(l,c):await rt.createLoyaltyProgram(c),i(!1),o(null),d({name:"",description:"",points_per_rupee:1,referral_bonus:100,vip_threshold:1e3,status:"active"}),u()}catch(x){console.error("Failed to save loyalty program:",x)}},h=g=>{d({name:g.name,description:g.description||"",points_per_rupee:g.points_per_rupee??1,referral_bonus:g.referral_bonus??0,vip_threshold:g.vip_threshold??0,status:g.status||"active"}),o(g.id),i(!0)};return e.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Loyalty Program"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage customer loyalty programs and rewards"})]}),e.jsxs("button",{onClick:()=>{i(!n),n||o(null)},className:"btn-primary inline-flex items-center",children:[e.jsx(rs,{className:"h-4 w-4 mr-2"})," ",n?"Close":"Add Program"]})]}),n&&e.jsxs("form",{onSubmit:p,className:"bg-white dark:bg-slate-800 rounded-lg p-4 shadow space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-300 mb-1",children:"Name"}),e.jsx("input",{value:c.name,onChange:g=>d({...c,name:g.target.value}),className:"w-full px-3 py-2 border rounded-md bg-slate-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-300 mb-1",children:"Points per  (rupee)"}),e.jsx("input",{type:"number",step:"0.01",value:c.points_per_rupee,onChange:g=>d({...c,points_per_rupee:Number(g.target.value)}),className:"w-full px-3 py-2 border rounded-md bg-slate-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-300 mb-1",children:"Referral Bonus (points)"}),e.jsx("input",{type:"number",value:c.referral_bonus,onChange:g=>d({...c,referral_bonus:Number(g.target.value)}),className:"w-full px-3 py-2 border rounded-md bg-slate-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-300 mb-1",children:"VIP Threshold (points)"}),e.jsx("input",{type:"number",value:c.vip_threshold,onChange:g=>d({...c,vip_threshold:Number(g.target.value)}),className:"w-full px-3 py-2 border rounded-md bg-slate-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-300 mb-1",children:"Description"}),e.jsx("textarea",{value:c.description,onChange:g=>d({...c,description:g.target.value}),className:"w-full px-3 py-2 border rounded-md bg-slate-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-300 mb-1",children:"Status"}),e.jsxs("select",{value:c.status,onChange:g=>d({...c,status:g.target.value}),className:"w-full px-3 py-2 border rounded-md bg-slate-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"active",children:"active"}),e.jsx("option",{value:"inactive",children:"inactive"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",className:"px-4 py-2 rounded-md bg-green-600 text-white hover:bg-green-700",children:[l?"Update":"Create"," Program"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Configured Programs"})}),e.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:r?e.jsx("div",{className:"p-4 text-slate-600 dark:text-slate-300",children:"Loading..."}):t.length===0?e.jsx("div",{className:"p-4 text-slate-600 dark:text-slate-300",children:"No programs configured."}):t.map(g=>e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:g.name}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Points/: ",g.points_per_rupee??1,"  Referral Bonus: ",g.referral_bonus??0,"  VIP Threshold: ",g.vip_threshold??0,"  Status: ",g.status]})]}),e.jsxs("button",{onClick:()=>h(g),className:"inline-flex items-center px-3 py-2 rounded-md bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600",children:[e.jsx(jr,{className:"h-4 w-4 mr-2"})," Edit"]})]},g.id))})]})]})}const kc=t=>`${t} coins`;function k9(){const[t,s]=b.useState(null),[r,a]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState(!0),[c,d]=b.useState(""),[u,p]=b.useState(!1),[h,g]=b.useState(0);b.useEffect(()=>{x()},[]);const x=async()=>{try{o(!0),d("");const[v,w,S]=await Promise.all([rt.getCashbackWallet().catch(()=>null),rt.getCashbackOffers().catch(()=>[]),rt.getCashbackTransactions().catch(()=>[])]);v&&s(v),a(Array.isArray(w)?w:[]),i(Array.isArray(S)?S:[])}catch(v){console.error("Failed to load cashback data:",v),d("Failed to load cashback data")}finally{o(!1)}},f=v=>{switch(v){case"pending":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"approved":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"credited":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"expired":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},m=v=>{switch(v){case"pending":return e.jsx(cs,{className:"h-4 w-4"});case"approved":return e.jsx(Vt,{className:"h-4 w-4"});case"credited":return e.jsx(Vt,{className:"h-4 w-4"});case"expired":return e.jsx(Kt,{className:"h-4 w-4"});default:return e.jsx(cs,{className:"h-4 w-4"})}},j=async()=>{if(!t||h>t.availableBalance){alert("Insufficient balance");return}if(h<100){alert("Minimum redemption amount is 100");return}try{await rt.redeemCashback({amount:h}),alert(`Cashback redemption request submitted for ${h}`),p(!1),g(0),await x()}catch(v){alert("Redemption failed. Please try again."),console.error("Redemption error:",v)}};return l?e.jsx("div",{className:"max-w-6xl mx-auto p-6 flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading cashback data..."})]})}):c?e.jsx("div",{className:"max-w-6xl mx-auto p-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:[c,e.jsx("button",{onClick:x,className:"ml-4 underline",children:"Retry"})]})}):t?e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Nefol Coins Program"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Earn coins on every purchase and redeem them for future orders"})]}),e.jsx("button",{onClick:x,className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Refresh"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Available Coins"}),e.jsx("p",{className:"text-3xl font-bold",children:kc(t.availableBalance)})]}),e.jsx(Ob,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Earned"}),e.jsx("p",{className:"text-3xl font-bold",children:kc(t.totalEarned)})]}),e.jsx(zt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Pending"}),e.jsx("p",{className:"text-3xl font-bold",children:kc(t.pendingAmount)})]}),e.jsx(cs,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Used"}),e.jsx("p",{className:"text-3xl font-bold",children:kc(t.usedAmount)})]}),e.jsx(li,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Redeem Points"}),e.jsx("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Redeem Now"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Next Payout"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(t.nextPayoutDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Payout Method"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:t.payoutMethod})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Minimum Redemption"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"100"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Active Cashback Offers"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(v=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:v.title}),e.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs rounded-full",children:[v.cashbackPercentage,"% Cashback"]})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-3",children:v.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Min Order:"}),e.jsxs("span",{className:"font-semibold",children:["",v.minOrderValue]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Max Cashback:"}),e.jsxs("span",{className:"font-semibold",children:["",v.maxCashback]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Valid Until:"}),e.jsx("span",{className:"font-semibold",children:new Date(v.validUntil).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded-full",children:v.category}),e.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Shop Now"})]})]},v.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Cashback Calculator"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Order Value ()"}),e.jsx("input",{type:"number",placeholder:"Enter order value",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Select Offer"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{children:"Skincare Essentials (5%)"}),e.jsx("option",{children:"Premium Products (8%)"}),e.jsx("option",{children:"First Time Buyer (10%)"}),e.jsx("option",{children:"Bundle Offers (12%)"})]})]})]}),e.jsx("div",{className:"mt-4 p-4 bg-green-50 dark:bg-green-900 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-green-800 dark:text-green-200 font-semibold",children:"Estimated Cashback:"}),e.jsx("span",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:"150"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Transaction History"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Order Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Cashback"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:n.map(v=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:v.orderId}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:v.productName}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:["",v.orderValue]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:["",v.amount]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${f(v.status)}`,children:[m(v.status),e.jsx("span",{className:"ml-1",children:v.status})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:new Date(v.date).toLocaleDateString()})]},v.id))})]})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"How Cashback Works"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Shop & Earn"}),e.jsx("p",{className:"text-sm opacity-90",children:"Make purchases and automatically earn cashback based on active offers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Cashback Processing"}),e.jsx("p",{className:"text-sm opacity-90",children:"Your cashback is processed within 24-48 hours after order confirmation"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Redeem & Save"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use your cashback balance to get discounts on future purchases"})]})]})]}),u&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Redeem Cashback"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Available Balance: ",t.availableBalance]}),e.jsx("input",{type:"number",value:h,onChange:v=>g(Number(v.target.value)),placeholder:"Enter amount to redeem",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Payout Method"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{children:"Bank Transfer"}),e.jsx("option",{children:"UPI"}),e.jsx("option",{children:"Wallet Credit"})]})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>p(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:j,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Redeem"})]})]})})]}):e.jsx("div",{className:"max-w-6xl mx-auto p-6",children:e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No cashback data available"})})}function S9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState({isEnabled:!0,allowWelcome:!0,allowPromotional:!0,allowTransactional:!0,allowCart:!0,quietHours:{enabled:!0,start:"22:00",end:"08:00"},frequencyLimit:{enabled:!0,maxPerDay:3}}),[c,d]=b.useState(!0),[u,p]=b.useState(""),[h,g]=b.useState(!1),[x,f]=b.useState(!1),[m,j]=b.useState(!1),[v,w]=b.useState(!1),[S,F]=b.useState(!1),[E,k]=b.useState(null),[A,y]=b.useState("welcome"),[N,R]=b.useState({title:"",message:"",audience:"all"}),[T,z]=b.useState({name:"",category:"",type:"welcome",title:"",message:"",isCustom:!0}),[L,O]=b.useState({name:"",trigger:"",condition:"",action:"",notificationType:"welcome",isActive:!0}),[V,Z]=b.useState("all"),[D,P]=b.useState("all"),[W,ee]=b.useState("");b.useEffect(()=>{M()},[]);const M=async()=>{try{d(!0),p("");const ie=[{id:"1",title:"Welcome to Nefol!",message:"Welcome to Nefol! Enjoy 10% off your first order with code WELCOME10",status:"sent",type:"welcome",audience:"all",sentDate:new Date().toISOString(),recipients:1523,deliveryRate:98.5,openRate:87.2,clickRate:23.4,conversionRate:12.5,revenue:45678},{id:"2",title:"Your Cart is Waiting!",message:"You have items in your cart! Complete your purchase now and save 15%",status:"sent",type:"add_to_cart",audience:"cart_abandoners",sentDate:new Date().toISOString(),recipients:842,deliveryRate:97.8,openRate:65.3,clickRate:31.2,conversionRate:18.9,revenue:32145},{id:"3",title:"Order Confirmed!",message:"Your order #12345 has been confirmed and is being processed",status:"sent",type:"purchase",audience:"purchasers",sentDate:new Date().toISOString(),recipients:1205,deliveryRate:99.2,openRate:92.1,clickRate:15.3,conversionRate:8.7,revenue:28934},{id:"4",title:"Share Your Experience!",message:"How was your purchase? We'd love to hear from you!",status:"sent",type:"review",audience:"recent_purchasers",sentDate:new Date().toISOString(),recipients:589,deliveryRate:96.5,openRate:52.3,clickRate:28.7,conversionRate:12.4,revenue:12567}],Ue=[{id:"1",name:"Welcome Message",category:"Onboarding",type:"welcome",title:"Welcome to Nefol!",message:"Welcome to Nefol! Enjoy {{discount}}% off your first order with code {{code}}",isCustom:!1},{id:"2",name:"Add to Cart Reminder",category:"Abandoned Cart",type:"add_to_cart",title:"Your Cart is Waiting!",message:"You have {{item_count}} items in your cart! Complete your purchase now",isCustom:!1},{id:"3",name:"Order Confirmation",category:"Transactional",type:"purchase",title:"Order Confirmed!",message:"Your order #{{order_number}} has been confirmed and is being processed",isCustom:!1},{id:"4",name:"Review Request",category:"Engagement",type:"review",title:"Share Your Experience!",message:"How was your purchase of {{product_name}}? We'd love to hear from you!",isCustom:!1},{id:"5",name:"Promotion Alert",category:"Marketing",type:"promotion",title:"Special Offer Inside!",message:"{{product_name}} is now {{discount}}% off! Limited time only",isCustom:!1},{id:"6",name:"Order Cancellation",category:"Transactional",type:"cancellation",title:"Order Cancelled",message:"Your order #{{order_number}} has been cancelled as requested",isCustom:!1},{id:"7",name:"Product Back in Stock",category:"Product Updates",type:"push",title:"Back in Stock!",message:"{{product_name}} is back in stock! Order now before it's gone",isCustom:!1}];s(ie),a(Ue),i([])}catch(ie){console.error("Failed to load WhatsApp data:",ie),p("Failed to load WhatsApp notification data")}finally{d(!1)}},U=t.filter(ie=>{const Ue=V==="all"||ie.status===V,St=D==="all"||ie.type===D,dt=W===""||ie.title.toLowerCase().includes(W.toLowerCase())||ie.message.toLowerCase().includes(W.toLowerCase());return Ue&&St&&dt}),q={totalNotifications:U.length,totalRecipients:U.reduce((ie,Ue)=>ie+Ue.recipients,0),averageDeliveryRate:U.length>0?U.reduce((ie,Ue)=>ie+Ue.deliveryRate,0)/U.length:0,totalRevenue:U.reduce((ie,Ue)=>ie+Ue.revenue,0)},Y=ie=>{switch(ie){case"draft":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";case"scheduled":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"sent":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"paused":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},K=ie=>{switch(ie){case"welcome":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"add_to_cart":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"purchase":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"review":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"promotion":return"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200";case"cancellation":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"push":return"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},le=ie=>{switch(ie){case"welcome":return e.jsx(ss,{className:"h-5 w-5"});case"add_to_cart":return e.jsx(Qs,{className:"h-5 w-5"});case"purchase":return e.jsx(fa,{className:"h-5 w-5"});case"review":return e.jsx(xr,{className:"h-5 w-5"});case"promotion":return e.jsx(Lb,{className:"h-5 w-5"});case"cancellation":return e.jsx(Kt,{className:"h-5 w-5"});case"push":return e.jsx(Oa,{className:"h-5 w-5"});default:return e.jsx(Pa,{className:"h-5 w-5"})}},J=ie=>{switch(ie){case"welcome":return"Welcome";case"add_to_cart":return"Add to Cart";case"purchase":return"Purchase";case"review":return"Review";case"promotion":return"Promotion";case"cancellation":return"Cancellation";case"push":return"Push Update";default:return ie}},ae=ie=>{y(ie.type),R({title:ie.title,message:ie.message,audience:"all"}),g(!0)},he=ie=>{alert(`Preview: ${ie.title}

${ie.message}`)},Fe=ie=>{k(ie),j(!0)},X=ie=>{y(ie.type),R({title:ie.title,message:ie.message,audience:ie.audience}),g(!0)},Re=ie=>{confirm("Are you sure you want to delete this notification?")&&(s(t.filter(Ue=>Ue.id!==ie)),alert("Notification deleted successfully!"))},ne=()=>{if(!N.title||!N.message){alert("Please fill in all required fields");return}const ie={id:Date.now().toString(),title:N.title,message:N.message,status:"sent",type:A,audience:N.audience,sentDate:new Date().toISOString(),recipients:0,deliveryRate:0,openRate:0,clickRate:0,conversionRate:0,revenue:0};s([ie,...t]),g(!1),R({title:"",message:"",audience:"all"}),alert("WhatsApp notification sent successfully!")},_e=()=>{alert("Settings saved successfully!"),f(!1)},Se=()=>{if(!T.name||!T.title||!T.message){alert("Please fill in all required fields");return}const ie={id:Date.now().toString(),...T,category:T.category||"Custom"};a([...r,ie]),w(!1),z({name:"",category:"",type:"welcome",title:"",message:"",isCustom:!0}),alert("Template created successfully!")},be=()=>{if(!L.name||!L.trigger||!L.action){alert("Please fill in all required fields");return}const ie={id:Date.now().toString(),...L,messagesSent:0,conversionRate:0};i([...n,ie]),F(!1),O({name:"",trigger:"",condition:"",action:"",notificationType:"welcome",isActive:!0}),alert("Automation created successfully!")},Ie=ie=>{confirm("Are you sure you want to delete this template?")&&(a(r.filter(Ue=>Ue.id!==ie)),alert("Template deleted successfully!"))},Ze=ie=>{confirm("Are you sure you want to delete this automation?")&&(i(n.filter(Ue=>Ue.id!==ie)),alert("Automation deleted successfully!"))},ge=ie=>{i(n.map(Ue=>Ue.id===ie?{...Ue,isActive:!Ue.isActive}:Ue))};return c?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading WhatsApp notifications..."})]})})}):u?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:u})]}),e.jsx("button",{onClick:M,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"WhatsApp Notifications"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage WhatsApp notifications for your customers - Add to Cart, Purchase, Review, Promotions, Cancellations, Welcome, and more"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:M,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:()=>f(!0),className:"btn-secondary flex items-center space-x-2",children:[e.jsx(ws,{className:"h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{onClick:()=>{g(!0),R({title:"",message:"",audience:"all"})},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Send Notification"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Notifications"}),e.jsx("p",{className:"text-3xl font-bold",children:q.totalNotifications})]}),e.jsx(Pa,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Recipients"}),e.jsx("p",{className:"text-3xl font-bold",children:q.totalRecipients.toLocaleString()})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Avg Delivery Rate"}),e.jsxs("p",{className:"text-3xl font-bold",children:[q.averageDeliveryRate.toFixed(1),"%"]})]}),e.jsx(ra,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Revenue"}),e.jsxs("p",{className:"text-3xl font-bold",children:["",q.totalRevenue.toLocaleString()]})]}),e.jsx(zt,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Quick Send Notification"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:["welcome","add_to_cart","purchase","review","promotion","cancellation","push"].map(ie=>e.jsxs("button",{onClick:()=>{y(ie),R({title:"",message:"",audience:"all"}),g(!0)},className:"p-4 border-2 border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-center",children:[e.jsx("div",{className:"flex justify-center mb-2",children:le(ie)}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:J(ie)})]},ie))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Notification Settings"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${l.isEnabled?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:l.isEnabled?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Allowed Types"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Welcome"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Add to Cart"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Purchase"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Review"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Meta Integration"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Connected to WhatsApp Business API"}),e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-green-600",children:"Active"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Quiet Hours"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:l.quietHours.enabled?`${l.quietHours.start} - ${l.quietHours.end}`:"Disabled"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Frequency Limit"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:l.frequencyLimit.enabled?`Max ${l.frequencyLimit.maxPerDay} per day`:"No limit"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Recent Notifications"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",placeholder:"Search notifications...",value:W,onChange:ie=>ee(ie.target.value),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 rounded text-sm"}),e.jsxs("select",{value:V,onChange:ie=>Z(ie.target.value),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 rounded text-sm",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"paused",children:"Paused"})]}),e.jsxs("select",{value:D,onChange:ie=>P(ie.target.value),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 rounded text-sm",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"welcome",children:"Welcome"}),e.jsx("option",{value:"add_to_cart",children:"Add to Cart"}),e.jsx("option",{value:"purchase",children:"Purchase"}),e.jsx("option",{value:"review",children:"Review"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"cancellation",children:"Cancellation"}),e.jsx("option",{value:"push",children:"Push Update"})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Notification"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Recipients"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Delivery Rate"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:U.map(ie=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[le(ie.type),e.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-medium rounded-full ${K(ie.type)}`,children:J(ie.type)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:ie.title}),e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 max-w-xs truncate",children:ie.message})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${Y(ie.status)}`,children:ie.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:ie.recipients.toLocaleString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:[ie.deliveryRate,"%"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:["",ie.revenue.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsx("button",{onClick:()=>Fe(ie),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400",title:"View Details",children:e.jsx(ct,{className:"h-4 w-4 inline"})}),e.jsx("button",{onClick:()=>X(ie),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400",title:"Edit",children:e.jsx(jr,{className:"h-4 w-4 inline"})}),e.jsx("button",{onClick:()=>Re(ie.id),className:"text-red-600 hover:text-red-900 dark:text-red-400",title:"Delete",children:e.jsx(Mt,{className:"h-4 w-4 inline"})})]})]},ie.id))})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Templates"}),e.jsxs("button",{onClick:()=>{z({name:"",category:"",type:"welcome",title:"",message:"",isCustom:!0}),w(!0)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Template"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(ie=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:ie.name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${K(ie.type)}`,children:J(ie.type)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100 mb-1",children:ie.title}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:ie.message})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>ae(ie),className:"flex-1 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Use Template"}),e.jsx("button",{onClick:()=>he(ie),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Preview"}),e.jsx("button",{onClick:()=>Ie(ie.id),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},ie.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Automations"}),e.jsxs("button",{onClick:()=>{O({name:"",trigger:"",condition:"",action:"",notificationType:"welcome",isActive:!0}),F(!0)},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Automation"})]})]}),n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-4",children:"No automations yet"}),e.jsx("button",{onClick:()=>{O({name:"",trigger:"",condition:"",action:"",notificationType:"welcome",isActive:!0}),F(!0)},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Create Your First Automation"})]}):e.jsx("div",{className:"space-y-4",children:n.map(ie=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:ie.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ie.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:ie.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>ge(ie.id),className:`px-3 py-1 text-sm rounded transition-colors ${ie.isActive?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"bg-green-100 text-green-800 hover:bg-green-200"}`,children:ie.isActive?"Deactivate":"Activate"}),e.jsx("button",{onClick:()=>Ze(ie.id),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Trigger:"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:ie.trigger})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Condition:"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:ie.condition||"None"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Action:"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:ie.action})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Messages Sent: ",e.jsx("span",{className:"font-semibold",children:ie.messagesSent})]}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Conversion Rate: ",e.jsxs("span",{className:"font-semibold text-green-600",children:[ie.conversionRate,"%"]})]})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${K(ie.notificationType)}`,children:J(ie.notificationType)})]})]},ie.id))})]}),h&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Send WhatsApp Notification"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notification Type"}),e.jsxs("select",{value:A,onChange:ie=>y(ie.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"welcome",children:"Welcome"}),e.jsx("option",{value:"add_to_cart",children:"Add to Cart"}),e.jsx("option",{value:"purchase",children:"Purchase"}),e.jsx("option",{value:"review",children:"Review"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"cancellation",children:"Cancellation"}),e.jsx("option",{value:"push",children:"Push Update"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notification Title"}),e.jsx("input",{type:"text",value:N.title,onChange:ie=>R({...N,title:ie.target.value}),placeholder:"Enter notification title",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notification Message"}),e.jsx("textarea",{rows:4,value:N.message,onChange:ie=>R({...N,message:ie.target.value}),placeholder:"Enter notification message (max 4096 characters for WhatsApp)",maxLength:4096,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Target Audience"}),e.jsxs("select",{value:N.audience,onChange:ie=>R({...N,audience:ie.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"all",children:"All Customers"}),e.jsx("option",{value:"new",children:"New Customers"}),e.jsx("option",{value:"vip",children:"VIP Customers"}),e.jsx("option",{value:"cart_abandoners",children:"Cart Abandoners"}),e.jsx("option",{value:"recent_purchasers",children:"Recent Purchasers"})]})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ne,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Send Notification"})]})]})}),m&&E&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Notification Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Type"}),e.jsx("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:J(E.type)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Status"}),e.jsx("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:E.status})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Title"}),e.jsx("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:E.title})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Message"}),e.jsx("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:E.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Recipients"}),e.jsx("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:E.recipients})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Delivery Rate"}),e.jsxs("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:[E.deliveryRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Open Rate"}),e.jsxs("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:[E.openRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Conversion Rate"}),e.jsxs("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:[E.conversionRate,"%"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Revenue"}),e.jsxs("p",{className:"text-sm text-green-600",children:["",E.revenue.toLocaleString()]})]})]}),e.jsx("div",{className:"flex space-x-4 mt-6",children:e.jsx("button",{onClick:()=>j(!1),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close"})})]})}),x&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"WhatsApp Notification Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Enable WhatsApp Notifications"}),e.jsx("input",{type:"checkbox",checked:l.isEnabled,onChange:ie=>o({...l,isEnabled:ie.target.checked}),className:"rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Allow Welcome Messages"}),e.jsx("input",{type:"checkbox",checked:l.allowWelcome,onChange:ie=>o({...l,allowWelcome:ie.target.checked}),className:"rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Allow Promotional"}),e.jsx("input",{type:"checkbox",checked:l.allowPromotional,onChange:ie=>o({...l,allowPromotional:ie.target.checked}),className:"rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Allow Transactional"}),e.jsx("input",{type:"checkbox",checked:l.allowTransactional,onChange:ie=>o({...l,allowTransactional:ie.target.checked}),className:"rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Allow Cart Notifications"}),e.jsx("input",{type:"checkbox",checked:l.allowCart,onChange:ie=>o({...l,allowCart:ie.target.checked}),className:"rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Quiet Hours Start"}),e.jsx("input",{type:"time",value:l.quietHours.start,onChange:ie=>o({...l,quietHours:{...l.quietHours,start:ie.target.value}}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Quiet Hours End"}),e.jsx("input",{type:"time",value:l.quietHours.end,onChange:ie=>o({...l,quietHours:{...l.quietHours,end:ie.target.value}}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Max Notifications Per Day"}),e.jsx("input",{type:"number",value:l.frequencyLimit.maxPerDay,onChange:ie=>o({...l,frequencyLimit:{...l.frequencyLimit,maxPerDay:parseInt(ie.target.value)}}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Close"}),e.jsx("button",{onClick:_e,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Settings"})]})]})}),v&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Create WhatsApp Template"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Template Name *"}),e.jsx("input",{type:"text",value:T.name,onChange:ie=>z({...T,name:ie.target.value}),placeholder:"e.g., Welcome Message",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category"}),e.jsx("input",{type:"text",value:T.category,onChange:ie=>z({...T,category:ie.target.value}),placeholder:"e.g., Onboarding, Marketing",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notification Type *"}),e.jsxs("select",{value:T.type,onChange:ie=>z({...T,type:ie.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"welcome",children:"Welcome"}),e.jsx("option",{value:"add_to_cart",children:"Add to Cart"}),e.jsx("option",{value:"purchase",children:"Purchase"}),e.jsx("option",{value:"review",children:"Review"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"cancellation",children:"Cancellation"}),e.jsx("option",{value:"push",children:"Push Update"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:T.title,onChange:ie=>z({...T,title:ie.target.value}),placeholder:"Enter template title",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Message *"}),e.jsx("textarea",{rows:4,value:T.message,onChange:ie=>z({...T,message:ie.target.value}),placeholder:"Enter template message (use {{variable}} for dynamic content)",maxLength:4096,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>w(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Se,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Create Template"})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Create WhatsApp Automation"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Automation Name *"}),e.jsx("input",{type:"text",value:L.name,onChange:ie=>O({...L,name:ie.target.value}),placeholder:"e.g., Welcome New Users",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Trigger *"}),e.jsxs("select",{value:L.trigger,onChange:ie=>O({...L,trigger:ie.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"",children:"Select a trigger..."}),e.jsx("option",{value:"user_signs_up",children:"User Signs Up"}),e.jsx("option",{value:"cart_abandoned",children:"Cart Abandoned"}),e.jsx("option",{value:"order_placed",children:"Order Placed"}),e.jsx("option",{value:"order_delivered",children:"Order Delivered"}),e.jsx("option",{value:"product_back_in_stock",children:"Product Back in Stock"}),e.jsx("option",{value:"user_inactive_7_days",children:"User Inactive for 7 Days"}),e.jsx("option",{value:"birthday",children:"Customer Birthday"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Condition (Optional)"}),e.jsx("input",{type:"text",value:L.condition,onChange:ie=>O({...L,condition:ie.target.value}),placeholder:"e.g., Only for VIP customers",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Action *"}),e.jsxs("select",{value:L.action,onChange:ie=>O({...L,action:ie.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"",children:"Select an action..."}),e.jsx("option",{value:"send_welcome_message",children:"Send Welcome Message"}),e.jsx("option",{value:"send_cart_reminder",children:"Send Cart Reminder"}),e.jsx("option",{value:"send_order_confirmation",children:"Send Order Confirmation"}),e.jsx("option",{value:"request_review",children:"Request Product Review"}),e.jsx("option",{value:"send_promotion",children:"Send Promotion"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notification Type *"}),e.jsxs("select",{value:L.notificationType,onChange:ie=>O({...L,notificationType:ie.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"welcome",children:"Welcome"}),e.jsx("option",{value:"add_to_cart",children:"Add to Cart"}),e.jsx("option",{value:"purchase",children:"Purchase"}),e.jsx("option",{value:"review",children:"Review"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"cancellation",children:"Cancellation"}),e.jsx("option",{value:"push",children:"Push Update"})]})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>F(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:be,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Create Automation"})]})]})})]})}function C9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState([]),[c,d]=b.useState(!0),[u,p]=b.useState(""),[h,g]=b.useState(null),[x,f]=b.useState(""),[m,j]=b.useState(!1),[v,w]=b.useState(!1),[S,F]=b.useState(!1),[E,k]=b.useState(!1),[A,y]=b.useState(!1),[N,R]=b.useState(""),[T,z]=b.useState(""),[L,O]=b.useState(!1),[V,Z]=b.useState(null),[D,P]=b.useState(""),[W,ee]=b.useState(""),[M,U]=b.useState("Custom"),[q,Y]=b.useState(""),[K,le]=b.useState(""),[J,ae]=b.useState(!1),[he,Fe]=b.useState(""),[X,Re]=b.useState(""),[ne,_e]=b.useState(""),[Se,be]=b.useState(""),[Ie,Ze]=b.useState(!1);b.useEffect(()=>{ge()},[]);const ge=async()=>{try{d(!0),p("");const[ye,ze,Ye]=await Promise.all([rt.getWhatsAppChats().catch(()=>[]),rt.getWhatsAppTemplates().catch(()=>[]),rt.getWhatsAppAutomations().catch(()=>[])]),jt=Array.isArray(ye)?ye:[];s(jt),i(Array.isArray(ze)?ze:[]),o(Array.isArray(Ye)?Ye:[]),jt&&jt.length>0&&g(jt[0])}catch(ye){console.error("Failed to load WhatsApp data:",ye),p("Failed to load WhatsApp data")}finally{d(!1)}},ie={totalSessions:t.length,activeSessions:t.filter(ye=>ye.status==="active").length,waitingSessions:t.filter(ye=>ye.status==="waiting").length,resolvedSessions:t.filter(ye=>ye.status==="resolved").length},Ue=ye=>{switch(ye){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"waiting":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"resolved":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"closed":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},St=ye=>{switch(ye){case"urgent":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";case"high":return"text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-200";case"medium":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},dt=()=>{x.trim()&&(console.log("Sending message:",x),f(""))},_t=async()=>{if(!N.trim()||!T.trim()){alert("Please enter both phone number and message");return}O(!0),Z(null);try{const ze=(()=>{if(typeof window<"u"){const it=window.location.hostname;if(it==="thenefol.com"||it==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),Ye=await fetch(`${ze}/api/whatsapp-chat/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:N,message:T})}),jt=await Ye.json();Z(jt),Ye.ok?(alert(" Message sent successfully!"),R(""),z("")):alert(` Failed to send message: ${jt.error||"Unknown error"}`)}catch(ye){console.error("Failed to send WhatsApp message:",ye),Z({error:"Network error: "+ye.message}),alert(" Network error occurred")}finally{O(!1)}},Ct=async()=>{if(!D.trim()||!W.trim()){alert("Please enter template name and content");return}try{const ze=(()=>{if(typeof window<"u"){const Xt=window.location.hostname;if(Xt==="thenefol.com"||Xt==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),Ye={name:D,content:W,category:M};J&&(Ye.scheduled_date=q,Ye.scheduled_time=K,Ye.is_scheduled=!0);const jt=await fetch(`${ze}/api/whatsapp/templates`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ye)}),it=await jt.json();jt.ok?(alert(" Template created successfully!"),k(!1),P(""),ee(""),U("Custom"),Y(""),le(""),ae(!1),ge()):alert(` Failed to create template: ${it.error||"Unknown error"}`)}catch(ye){console.error("Failed to create template:",ye),alert(" Network error occurred")}},ut=async()=>{if(!he.trim()||!X.trim()){alert("Please enter automation name and trigger");return}try{const ze=(()=>{if(typeof window<"u"){const Xt=window.location.hostname;if(Xt==="thenefol.com"||Xt==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),Ye={name:he,trigger:X,action:"Send WhatsApp Message"};Ie&&(Ye.scheduled_date=ne,Ye.scheduled_time=Se,Ye.is_scheduled=!0);const jt=await fetch(`${ze}/api/whatsapp/automations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ye)}),it=await jt.json();jt.ok?(alert(" Automation created successfully!"),y(!1),Fe(""),Re(""),_e(""),be(""),Ze(!1),ge()):alert(` Failed to create automation: ${it.error||"Unknown error"}`)}catch(ye){console.error("Failed to create automation:",ye),alert(" Network error occurred")}},ot=ye=>{g(ye)};return c?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading WhatsApp data..."})]})})}):u?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:u})]}),e.jsx("button",{onClick:ge,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"WhatsApp Chat Support"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Manage customer conversations and provide instant support"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>F(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(ra,{className:"h-4 w-4"}),e.jsx("span",{children:"Test WhatsApp"})]}),e.jsxs("button",{onClick:ge,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:()=>j(!0),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(gs,{className:"h-4 w-4"}),e.jsx("span",{children:"Templates"})]}),e.jsxs("button",{onClick:()=>w(!0),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Automations"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Sessions"}),e.jsx("p",{className:"text-3xl font-bold",children:ie.totalSessions})]}),e.jsx(Pa,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active"}),e.jsx("p",{className:"text-3xl font-bold",children:ie.activeSessions})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Waiting"}),e.jsx("p",{className:"text-3xl font-bold",children:ie.waitingSessions})]}),e.jsx(cs,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Resolved"}),e.jsx("p",{className:"text-3xl font-bold",children:ie.resolvedSessions})]}),e.jsx(Vt,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Chat Sessions"})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:t.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Pa,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No chat sessions available"})]}):t.map(ye=>e.jsxs("div",{onClick:()=>ot(ye),className:`p-4 border-b border-slate-200 dark:border-slate-700 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 ${(h==null?void 0:h.id)===ye.id?"bg-blue-50 dark:bg-blue-900":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:ye.customerName}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Ue(ye.status)}`,children:ye.status}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${St(ye.priority)}`,children:ye.priority})]})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-1",children:ye.customerPhone}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500 truncate",children:ye.lastMessage}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:ye.lastMessageTime}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:[ye.messageCount," messages"]})]}),ye.assignedAgent&&e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:["Assigned to: ",ye.assignedAgent]})]},ye.id))})]}),e.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-lg shadow-lg flex flex-col",children:h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:h.customerName}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:h.customerPhone})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:e.jsx(pa,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:e.jsx(Q4,{className:"h-4 w-4"})})]})]}),h.tags&&h.tags.length>0&&e.jsx("div",{className:"flex space-x-2 mt-2",children:h.tags.map((ye,ze)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded-full",children:ye},ze))})]}),e.jsx("div",{className:"flex-1 p-4 overflow-y-auto max-h-96",children:e.jsx("div",{className:"space-y-4",children:r.map(ye=>e.jsx("div",{className:`flex ${ye.sender==="customer"?"justify-start":"justify-end"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${ye.sender==="customer"?"bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-slate-100":"bg-blue-600 text-white"}`,children:[e.jsx("p",{className:"text-sm",children:ye.message}),e.jsx("p",{className:`text-xs mt-1 ${ye.sender==="customer"?"text-slate-500 dark:text-slate-400":"text-blue-100"}`,children:ye.timestamp})]})},ye.id))})}),e.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:e.jsx(Xn,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:e.jsx(gs,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:e.jsx(Db,{className:"h-4 w-4"})}),e.jsx("input",{type:"text",value:x,onChange:ye=>f(ye.target.value),placeholder:"Type your message...",className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",onKeyPress:ye=>ye.key==="Enter"&&dt()}),e.jsx("button",{onClick:dt,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:e.jsx(ra,{className:"h-4 w-4"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Pa,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Select a chat session to start conversation"})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Templates"}),e.jsx("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Create Template"})]}),n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(gs,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No templates available"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.map(ye=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:ye.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ye.isApproved?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:ye.isApproved?"Approved":"Pending"})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:ye.category}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 mb-3",children:ye.content}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"flex-1 px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors",children:"Use Template"}),e.jsx("button",{className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Edit"})]})]},ye.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Automations"}),e.jsx("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Automation"})]}),l.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(rs,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No automations available"})]}):e.jsx("div",{className:"space-y-4",children:l.map(ye=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:ye.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ye.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:ye.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Edit"}),e.jsx("button",{className:`px-3 py-1 text-sm rounded transition-colors ${ye.isActive?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"bg-green-100 text-green-800 hover:bg-green-200"}`,children:ye.isActive?"Pause":"Activate"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Trigger:"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:ye.trigger})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Condition:"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:ye.condition})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Action:"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:ye.action})]})]}),e.jsx("div",{className:"mt-3 flex items-center justify-between text-sm",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Messages Sent: ",e.jsx("span",{className:"font-semibold",children:ye.messagesSent})]}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Response Rate: ",e.jsxs("span",{className:"font-semibold text-green-600",children:[ye.responseRate,"%"]})]})]})})]},ye.id))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"WhatsApp Business Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Quick Response"}),e.jsx("p",{className:"text-sm opacity-90",children:"Respond to customer messages within 24 hours to maintain good business rating."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Use Templates"}),e.jsx("p",{className:"text-sm opacity-90",children:"Create approved templates for common messages to ensure consistency and compliance."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Personal Touch"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use customer names and personalize messages to create better engagement."})]})]})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Create WhatsApp Template"}),e.jsx("button",{onClick:()=>k(!1),className:"text-slate-500 hover:text-slate-700 dark:text-slate-400",children:e.jsx(Kt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Template Name"}),e.jsx("input",{type:"text",value:D,onChange:ye=>P(ye.target.value),placeholder:"e.g., Welcome Message",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Template Content"}),e.jsx("textarea",{value:W,onChange:ye=>ee(ye.target.value),placeholder:"Enter your template message...",rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category"}),e.jsxs("select",{value:M,onChange:ye=>U(ye.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"Custom",children:"Custom"}),e.jsx("option",{value:"Welcome",children:"Welcome"}),e.jsx("option",{value:"Promotional",children:"Promotional"}),e.jsx("option",{value:"Transactional",children:"Transactional"}),e.jsx("option",{value:"Reminder",children:"Reminder"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"scheduleTemplate",checked:J,onChange:ye=>ae(ye.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"scheduleTemplate",className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Schedule this template"})]}),J&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Scheduled Date"}),e.jsx("input",{type:"date",value:q,onChange:ye=>Y(ye.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Scheduled Time"}),e.jsx("input",{type:"time",value:K,onChange:ye=>le(ye.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:Ct,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700",children:"Create Template"}),e.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancel"})]})]})]})}),A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Create WhatsApp Automation"}),e.jsx("button",{onClick:()=>y(!1),className:"text-slate-500 hover:text-slate-700 dark:text-slate-400",children:e.jsx(Kt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Automation Name"}),e.jsx("input",{type:"text",value:he,onChange:ye=>Fe(ye.target.value),placeholder:"e.g., Order Confirmation",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Trigger"}),e.jsx("input",{type:"text",value:X,onChange:ye=>Re(ye.target.value),placeholder:"e.g., When order is placed",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"scheduleAutomation",checked:Ie,onChange:ye=>Ze(ye.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"scheduleAutomation",className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Schedule this automation"})]}),Ie&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Scheduled Date"}),e.jsx("input",{type:"date",value:ne,onChange:ye=>_e(ye.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Scheduled Time"}),e.jsx("input",{type:"time",value:Se,onChange:ye=>be(ye.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:ut,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700",children:"Create Automation"}),e.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancel"})]})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Test WhatsApp Message"}),e.jsx("button",{onClick:()=>F(!1),className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:e.jsx(Kt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Phone Number (with country code)"}),e.jsx("input",{type:"text",value:N,onChange:ye=>R(ye.target.value),placeholder:"917355384939",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Include country code (e.g., 91 for India, 1 for USA)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Message"}),e.jsx("textarea",{value:T,onChange:ye=>z(ye.target.value),placeholder:"Enter your test message here...",rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white"})]}),V&&e.jsx("div",{className:`p-3 rounded-lg ${V.success?"bg-green-50 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-red-50 dark:bg-red-900 text-red-800 dark:text-red-200"}`,children:e.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(V,null,2)})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:_t,disabled:L,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors disabled:bg-slate-400 flex items-center justify-center space-x-2",children:L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Sending..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ra,{className:"h-4 w-4"}),e.jsx("span",{children:"Send Message"})]})}),e.jsx("button",{onClick:()=>{F(!1),Z(null)},className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Close"})]})]})]})})]})}function _9(){const[t,s]=b.useState("config"),[r,a]=b.useState({accessToken:"",phoneNumberId:"",businessAccountId:"",webhookUrl:"",verifyToken:""}),[n,i]=b.useState([]),[l,o]=b.useState([]),[c,d]=b.useState([]),[u,p]=b.useState(!1),[h,g]=b.useState("idle"),[x,f]=b.useState(!1),[m,j]=b.useState(null),[v,w]=b.useState(!1),[S,F]=b.useState(!1),[E,k]=b.useState(!1),[A,y]=b.useState(""),[N,R]=b.useState(""),[T,z]=b.useState({name:"",category:"UTILITY",language:"en",headerType:"none",headerText:"",headerExample:"",bodyText:"",bodyExamples:[""],footerText:"",buttonType:"none",buttonText:"",buttonUrl:"",buttonPhone:"",allowCategoryChange:!1}),[L,O]=b.useState({name:"",trigger:"",action:"",template:""}),Z=(()=>{if(typeof window<"u"){const ne=window.location.hostname;if(ne==="thenefol.com"||ne==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();b.useEffect(()=>{D()},[]);const D=async()=>{p(!0);try{const ne=await fetch(`${Z}/api/whatsapp/config`);if(ne.ok){const Ie=await ne.json(),Ze=(Ie==null?void 0:Ie.data)??Ie;Ze&&a(Ze)}const _e=await fetch(`${Z}/api/whatsapp-chat/templates`);if(_e.ok){const Ie=await _e.json(),Ze=(Ie==null?void 0:Ie.data)??Ie;i(Array.isArray(Ze)?Ze:[])}const Se=await fetch(`${Z}/api/whatsapp-chat/automations`);if(Se.ok){const Ie=await Se.json(),Ze=(Ie==null?void 0:Ie.data)??Ie;o(Array.isArray(Ze)?Ze:[])}const be=await fetch(`${Z}/api/whatsapp-chat/sessions`);if(be.ok){const Ie=await be.json(),Ze=(Ie==null?void 0:Ie.data)??Ie;d(Array.isArray(Ze)?Ze:[])}}catch(ne){console.error("Failed to load data:",ne)}finally{p(!1)}},P=async()=>{g("saving");try{(await fetch(`${Z}/api/whatsapp/config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok?(g("success"),alert(" Configuration saved successfully!")):(g("error"),alert(" Failed to save configuration"))}catch{g("error"),alert(" Network error")}setTimeout(()=>g("idle"),2e3)},W=async()=>{try{f(!0);const ne=await fetch(`${Z}/api/whatsapp/templates/sync`,{method:"POST"}),_e=await ne.json();if(!ne.ok)throw new Error((_e==null?void 0:_e.error)||"Failed to sync templates");const Se=(_e==null?void 0:_e.data)??_e;i(Array.isArray(Se)?Se:[]),alert(" Templates synced from Meta successfully.")}catch(ne){console.error("Sync templates failed:",ne),alert(` ${(ne==null?void 0:ne.message)||"Failed to sync templates."}`)}finally{f(!1)}},ee=async()=>{if(!A||!N){alert("Please enter phone number and message");return}try{const ne=await fetch(`${Z}/api/whatsapp-chat/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:A,message:N})}),_e=await ne.json();ne.ok?(alert(" Message sent successfully!"),y(""),R(""),w(!1),D()):alert(` Failed: ${_e.error||"Unknown error"}`)}catch{alert(" Network error")}},M=async()=>{if(!T.name||!T.bodyText.trim()){alert("Please provide template name and body text.");return}if(T.bodyText.match(/{{\d+}}/g)&&T.bodyExamples.filter(Boolean).length===0){alert("Please provide example values for all placeholders in the body.");return}const _e=q();if(!_e.length){alert("A template must contain at least a BODY component.");return}try{const Se={name:T.name,category:T.category,language:T.language,components:_e,allow_category_change:T.allowCategoryChange},be=await fetch(`${Z}/api/whatsapp/templates`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Se)}),Ie=await be.json();be.ok?(alert(" Template submitted to Meta! It may take a few minutes to get approved."),F(!1),z({name:"",category:"UTILITY",language:"en",headerType:"none",headerText:"",headerExample:"",bodyText:"",bodyExamples:[""],footerText:"",buttonType:"none",buttonText:"",buttonUrl:"",buttonPhone:"",allowCategoryChange:!1}),((Ie==null?void 0:Ie.data)??Ie)&&D()):alert(` Failed: ${(Ie==null?void 0:Ie.error)||"Unable to create template"}`)}catch(Se){console.error("create template",Se),alert(" Network error")}},U=async()=>{if(!L.name||!L.trigger){alert("Please fill all fields");return}try{(await fetch(`${Z}/api/whatsapp/automations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)})).ok?(alert(" Automation created!"),k(!1),O({name:"",trigger:"",action:"",template:""}),D()):alert(" Failed to create automation")}catch{alert(" Network error")}},q=()=>{const ne=[];if(T.headerType==="text"&&T.headerText.trim()){const _e={type:"HEADER",format:"TEXT",text:T.headerText.trim()};T.headerExample.trim()&&(_e.example={header_text:[[T.headerExample.trim()]]}),ne.push(_e)}if(T.bodyText.trim()){const _e={type:"BODY",text:T.bodyText.trim()},Se=T.bodyExamples.map(be=>be.trim()).filter(Boolean);Se.length&&(_e.example={body_text:[Se]}),ne.push(_e)}if(T.footerText.trim()&&ne.push({type:"FOOTER",text:T.footerText.trim()}),T.buttonType!=="none"&&T.buttonText.trim()){const _e=[];if(T.buttonType==="quick_reply")_e.push({type:"QUICK_REPLY",text:T.buttonText.trim()});else if(T.buttonType==="url"&&T.buttonUrl.trim()){const Se=T.buttonUrl.trim().startsWith("http")?T.buttonUrl.trim():`https://${T.buttonUrl.trim()}`;_e.push({type:"URL",text:T.buttonText.trim(),url:Se})}else T.buttonType==="phone"&&T.buttonPhone.trim()&&_e.push({type:"PHONE_NUMBER",text:T.buttonText.trim(),phone_number:T.buttonPhone.trim()});_e.length&&ne.push({type:"BUTTONS",buttons:_e})}return ne},Y=(ne,_e)=>{z(Se=>{const be=[...Se.bodyExamples];return be[ne]=_e,{...Se,bodyExamples:be}})},K=()=>{z(ne=>({...ne,bodyExamples:[...ne.bodyExamples,""]}))},le=ne=>{z(_e=>{const Se=_e.bodyExamples.filter((be,Ie)=>Ie!==ne);return{..._e,bodyExamples:Se.length?Se:[""]}})},J=async ne=>{if(ne.id&&confirm(`Delete template "${ne.name}"? This will also delete it on Meta.`))try{const _e=await fetch(`${Z}/api/whatsapp/templates/${ne.id}`,{method:"DELETE"}),Se=await _e.json();if(!_e.ok)throw new Error((Se==null?void 0:Se.error)||"Failed to delete template");i(be=>be.filter(Ie=>Ie.id!==ne.id)),alert(" Template deleted")}catch(_e){alert(` ${(_e==null?void 0:_e.message)||"Failed to delete template"}`)}},ae=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900 border border-blue-200 dark:border-blue-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(So,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-1",children:"How to get these credentials?"}),e.jsxs("ol",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1 list-decimal list-inside",children:[e.jsxs("li",{children:["Go to ",e.jsx("a",{href:"https://developers.facebook.com",target:"_blank",className:"underline",children:"developers.facebook.com"})]}),e.jsx("li",{children:"Select your app  WhatsApp  API Setup"}),e.jsx("li",{children:"Copy Access Token and Phone Number ID"}),e.jsx("li",{children:"Paste them below and click Save"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[e.jsx(qu,{className:"inline h-4 w-4 mr-1"}),"Access Token *"]}),e.jsx("textarea",{value:r.accessToken,onChange:ne=>a({...r,accessToken:ne.target.value}),placeholder:"EAAQy...",rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[e.jsx(pm,{className:"inline h-4 w-4 mr-1"}),"Phone Number ID *"]}),e.jsx("input",{type:"text",value:r.phoneNumberId,onChange:ne=>a({...r,phoneNumberId:ne.target.value}),placeholder:"368410443015784",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Business Account ID (Optional)"}),e.jsx("input",{type:"text",value:r.businessAccountId,onChange:ne=>a({...r,businessAccountId:ne.target.value}),placeholder:"353217381206675",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Webhook URL (Optional)"}),e.jsx("input",{type:"text",value:r.webhookUrl,onChange:ne=>a({...r,webhookUrl:ne.target.value}),placeholder:"https://yourdomain.com/webhook",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:P,disabled:h==="saving",className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:bg-slate-400 flex items-center space-x-2",children:[e.jsx($s,{className:"h-4 w-4"}),e.jsx("span",{children:h==="saving"?"Saving...":"Save Configuration"})]}),e.jsxs("button",{onClick:()=>w(!0),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(ra,{className:"h-4 w-4"}),e.jsx("span",{children:"Send Test Message"})]})]})]}),he=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Message Templates"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"View Meta-approved templates or submit new ones for review."})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:W,disabled:x,className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors flex items-center space-x-2 disabled:opacity-60",children:[e.jsx(or,{className:`h-4 w-4 ${x?"animate-spin":""}`}),e.jsx("span",{children:x?"Syncing":"Sync from Meta"})]}),e.jsxs("button",{onClick:()=>F(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Template"})]})]})]}),n.length===0?e.jsxs("div",{className:"text-center py-12 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[e.jsx(gs,{className:"h-12 w-12 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No templates yet. Sync or create your first template!"})]}):e.jsx("div",{className:"space-y-4",children:n.map(ne=>{var _e,Se,be,Ie;return e.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h4",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:ne.name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full uppercase ${((_e=ne.status)==null?void 0:_e.toLowerCase())==="approved"?"bg-green-100 text-green-800":((Se=ne.status)==null?void 0:Se.toLowerCase())==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:ne.status||"PENDING"})]}),e.jsxs("p",{className:"text-xs text-slate-500",children:[ne.category,"  ",(be=ne.language)==null?void 0:be.replace("_","-"),ne.meta_template_id&&e.jsxs("span",{className:"ml-2 text-slate-400",children:["ID: ",ne.meta_template_id]})]}),ne.updated_at&&e.jsxs("p",{className:"text-xs text-slate-400",children:["Updated ",new Date(ne.updated_at).toLocaleString()]}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 line-clamp-3",children:((Ie=ne.content)==null?void 0:Ie.length)>120?`${ne.content.slice(0,120)}`:ne.content})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>j(ne),className:"px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-1",children:[e.jsx(ct,{className:"w-4 h-4"}),"Preview"]}),e.jsxs("button",{onClick:()=>J(ne),className:"px-3 py-2 text-sm border border-red-200 text-red-600 rounded-lg hover:bg-red-50 flex items-center gap-1",children:[e.jsx(Mt,{className:"w-4 h-4"}),"Delete"]})]})]})},ne.id)})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:m.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[m.category,"  ",m.language,"  Status: ",m.status]})]}),e.jsx("button",{onClick:()=>j(null),children:e.jsx(Kt,{className:"h-6 w-6 text-slate-500"})})]}),e.jsxs("div",{className:"space-y-4",children:[(m.components||[]).map((ne,_e)=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-3",children:[e.jsxs("h4",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[e.jsx(Pa,{className:"w-4 h-4"}),ne.type]}),ne.text&&e.jsx("p",{className:"mt-2 text-slate-800 whitespace-pre-wrap",children:ne.text}),ne.buttons&&ne.buttons.length>0&&e.jsx("ul",{className:"mt-2 text-sm list-disc list-inside text-slate-600",children:ne.buttons.map((Se,be)=>e.jsxs("li",{children:[Se.type,": ",Se.text," ",Se.url||Se.phone_number||""]},be))})]},_e)),e.jsx("pre",{className:"bg-slate-100 dark:bg-slate-900 text-xs p-3 rounded-lg overflow-auto",children:JSON.stringify(m.components??m.content,null,2)})]})]})})]}),Fe=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Automations"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Automate messages based on triggers"})]}),e.jsxs("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Automation"})]})]}),l.length===0?e.jsxs("div",{className:"text-center py-12 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[e.jsx(Gl,{className:"h-12 w-12 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No automations yet. Create your first automation!"})]}):e.jsx("div",{className:"space-y-4",children:l.map(ne=>e.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:ne.name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${ne.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:ne.isActive?"Active":"Inactive"})]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("strong",{children:"Trigger:"})," ",ne.trigger]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("strong",{children:"Action:"})," ",ne.action]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-3 py-1 text-sm border border-slate-300 dark:border-slate-600 rounded hover:bg-slate-50",children:e.jsx(jr,{className:"inline h-3 w-3"})}),e.jsx("button",{className:`px-3 py-1 text-sm rounded ${ne.isActive?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:ne.isActive?"Disable":"Enable"})]})]})},ne.id))})]}),X=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Chat Sessions"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Recent WhatsApp conversations"})]}),c.length===0?e.jsxs("div",{className:"text-center py-12 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[e.jsx(Pa,{className:"h-12 w-12 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No chat sessions yet"})]}):e.jsx("div",{className:"space-y-3",children:c.map(ne=>e.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:ne.customerName}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:ne.customerPhone}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 mt-2",children:ne.lastMessage})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs text-slate-500",children:ne.lastMessageTime}),e.jsx("span",{className:`block mt-1 px-2 py-1 text-xs rounded-full ${ne.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:ne.status})]})]})},ne.id))})]}),Re=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Analytics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:[e.jsx(Pt,{className:"h-8 w-8 mb-2"}),e.jsx("p",{className:"text-sm opacity-90",children:"Total Messages"}),e.jsx("p",{className:"text-3xl font-bold",children:c.length})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:[e.jsx(Pa,{className:"h-8 w-8 mb-2"}),e.jsx("p",{className:"text-sm opacity-90",children:"Active Chats"}),e.jsx("p",{className:"text-3xl font-bold",children:c.filter(ne=>ne.status==="active").length})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:[e.jsx(gs,{className:"h-8 w-8 mb-2"}),e.jsx("p",{className:"text-sm opacity-90",children:"Templates"}),e.jsx("p",{className:"text-3xl font-bold",children:n.length})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:[e.jsx(Gl,{className:"h-8 w-8 mb-2"}),e.jsx("p",{className:"text-sm opacity-90",children:"Automations"}),e.jsx("p",{className:"text-3xl font-bold",children:l.filter(ne=>ne.isActive).length})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-8 text-center",children:[e.jsx(Ss,{className:"h-16 w-16 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Detailed analytics coming soon..."})]})]});return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"WhatsApp Business Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Complete WhatsApp integration - Configuration, Templates, Automations, and More"})]}),e.jsx("div",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("div",{className:"flex space-x-8",children:[{id:"config",label:"Configuration",icon:ws},{id:"templates",label:"Templates",icon:gs},{id:"automations",label:"Automations",icon:Gl},{id:"sessions",label:"Sessions",icon:Pa},{id:"analytics",label:"Analytics",icon:Ss}].map(ne=>e.jsxs("button",{onClick:()=>s(ne.id),className:`flex items-center space-x-2 pb-4 border-b-2 transition-colors ${t===ne.id?"":"border-transparent"}`,style:t===ne.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx(ne.icon,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:ne.label})]},ne.id))})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:u?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(or,{className:"h-12 w-12 text-slate-400 mx-auto mb-4 animate-spin"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[t==="config"&&ae(),t==="templates"&&he(),t==="automations"&&Fe(),t==="sessions"&&X(),t==="analytics"&&Re()]})}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Send Test Message"}),e.jsx("button",{onClick:()=>w(!1),children:e.jsx(Kt,{className:"h-6 w-6 text-slate-500"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Phone Number"}),e.jsx("input",{type:"text",value:A,onChange:ne=>y(ne.target.value),placeholder:"917355384939",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Message"}),e.jsx("textarea",{value:N,onChange:ne=>R(ne.target.value),placeholder:"Enter your message...",rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsx("button",{onClick:ee,className:"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700",children:"Send Message"})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Create WhatsApp Template"}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Name must be lowercase with underscores. Body supports placeholders like ","{{1}}","."]})]}),e.jsx("button",{onClick:()=>F(!1),children:e.jsx(Kt,{className:"h-6 w-6 text-slate-500"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Template Name"}),e.jsx("input",{type:"text",value:T.name,onChange:ne=>z({...T,name:ne.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")}),placeholder:"welcome_message",className:"w-full px-3 py-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Language"}),e.jsxs("select",{value:T.language,onChange:ne=>z({...T,language:ne.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"en_US",children:"English (US)"}),e.jsx("option",{value:"en_GB",children:"English (UK)"}),e.jsx("option",{value:"hi",children:"Hindi"}),e.jsx("option",{value:"mr",children:"Marathi"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),e.jsxs("select",{value:T.category,onChange:ne=>z({...T,category:ne.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"UTILITY",children:"Utility"}),e.jsx("option",{value:"AUTHENTICATION",children:"Authentication"}),e.jsx("option",{value:"MARKETING",children:"Marketing"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"allowCategoryChange",type:"checkbox",checked:T.allowCategoryChange,onChange:ne=>z({...T,allowCategoryChange:ne.target.checked})}),e.jsx("label",{htmlFor:"allowCategoryChange",className:"text-sm text-slate-600",children:"Allow Meta to change category"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Header"}),e.jsxs("select",{value:T.headerType,onChange:ne=>z({...T,headerType:ne.target.value}),className:"w-full px-3 py-2 border rounded-lg mb-2",children:[e.jsx("option",{value:"none",children:"No Header"}),e.jsx("option",{value:"text",children:"Text Header"})]}),T.headerType==="text"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:T.headerText,onChange:ne=>z({...T,headerText:ne.target.value}),placeholder:"Header text",className:"w-full px-3 py-2 border rounded-lg"}),e.jsx("input",{type:"text",value:T.headerExample,onChange:ne=>z({...T,headerExample:ne.target.value}),placeholder:"Example value (for {{1}})",className:"w-full px-3 py-2 border rounded-lg"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Body (required)"}),e.jsx("textarea",{value:T.bodyText,onChange:ne=>z({...T,bodyText:ne.target.value}),rows:4,className:"w-full px-3 py-2 border rounded-lg",placeholder:"Hello {{1}}, your order {{2}} has been packed."}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"Example values for placeholders"}),e.jsx("button",{type:"button",onClick:K,className:"text-xs text-blue-600 underline",children:"Add example"})]}),T.bodyExamples.map((ne,_e)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:ne,onChange:Se=>Y(_e,Se.target.value),placeholder:`Value for {{${_e+1}}}`,className:"flex-1 px-3 py-2 border rounded-lg"}),T.bodyExamples.length>1&&e.jsx("button",{type:"button",onClick:()=>le(_e),className:"text-red-500 text-xs",children:"Remove"})]},_e))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Footer (optional)"}),e.jsx("input",{type:"text",value:T.footerText,onChange:ne=>z({...T,footerText:ne.target.value}),className:"w-full px-3 py-2 border rounded-lg",placeholder:"Powered by Nefol"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Button"}),e.jsxs("select",{value:T.buttonType,onChange:ne=>z({...T,buttonType:ne.target.value}),className:"w-full px-3 py-2 border rounded-lg mb-2",children:[e.jsx("option",{value:"none",children:"No Button"}),e.jsx("option",{value:"quick_reply",children:"Quick Reply"}),e.jsx("option",{value:"url",children:"Website URL"}),e.jsx("option",{value:"phone",children:"Call Phone Number"})]}),T.buttonType!=="none"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",value:T.buttonText,onChange:ne=>z({...T,buttonText:ne.target.value}),placeholder:"Button text",className:"px-3 py-2 border rounded-lg"}),T.buttonType==="url"&&e.jsx("input",{type:"text",value:T.buttonUrl,onChange:ne=>z({...T,buttonUrl:ne.target.value}),placeholder:"https://example.com",className:"px-3 py-2 border rounded-lg"}),T.buttonType==="phone"&&e.jsx("input",{type:"text",value:T.buttonPhone,onChange:ne=>z({...T,buttonPhone:ne.target.value}),placeholder:"917355384939",className:"px-3 py-2 border rounded-lg"})]})]}),e.jsx("button",{onClick:M,className:"w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700",children:"Submit to Meta for approval"})]})]})}),E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Create Automation"}),e.jsx("button",{onClick:()=>k(!1),children:e.jsx(Kt,{className:"h-6 w-6 text-slate-500"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Automation Name"}),e.jsx("input",{type:"text",value:L.name,onChange:ne=>O({...L,name:ne.target.value}),placeholder:"Order Confirmation",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Trigger"}),e.jsxs("select",{value:L.trigger,onChange:ne=>O({...L,trigger:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Select trigger..."}),e.jsx("option",{value:"order_placed",children:"Order Placed"}),e.jsx("option",{value:"order_shipped",children:"Order Shipped"}),e.jsx("option",{value:"order_delivered",children:"Order Delivered"}),e.jsx("option",{value:"cart_abandoned",children:"Cart Abandoned"}),e.jsx("option",{value:"user_registered",children:"User Registered"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Action"}),e.jsx("input",{type:"text",value:L.action,onChange:ne=>O({...L,action:ne.target.value}),placeholder:"Send WhatsApp message",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsx("button",{onClick:U,className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700",children:"Create Automation"})]})]})})]})}function T9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState(""),[c,d]=b.useState(null),[u,p]=b.useState(""),[h,g]=b.useState(!1),[x,f]=b.useState(""),m=b.useRef(null);b.useEffect(()=>{j()},[]);const j=async()=>{try{i(!0),o("");const A=await rt.getLiveChatSessions().catch(()=>[]),y=Array.isArray(A)?A.map(N=>({id:String(N.id),customerName:N.customerName||N.customer_name||N.customerEmail||N.customer_email||"User",customerEmail:N.customerEmail||N.customer_email||"",customerPhone:N.customerPhone||N.customer_phone,status:N.status||"active",priority:N.priority||"low",assignedAgent:N.assignedAgent||N.assigned_agent,lastMessage:N.lastMessage||N.last_message||"",lastMessageTime:N.lastMessageTime||N.last_message_time||"",messageCount:Number(N.messageCount??N.message_count??0),tags:N.tags||[],notes:N.notes||"",customerLocation:N.customerLocation||N.customer_location,deviceInfo:N.deviceInfo||N.device_info,referrer:N.referrer})):[];y.length>0?(s(y),c||d(y[0])):(s([]),d(null)),a([])}catch(A){console.error("Failed to load chat data:",A),o("Failed to load chat data"),s([]),a([])}finally{i(!1)}};b.useEffect(()=>{let A,y;return(async()=>{if(!c){a([]);return}Xe.emit("live-chat:join-session",{sessionId:c.id});try{const R=await rt.getLiveChatMessages(c.id),T=Array.isArray(R)?R.map(L=>({id:String(L.id),sender:L.sender,senderName:L.sender_name||"",message:L.message,timestamp:L.created_at,type:L.type||"text",isRead:!!L.is_read})):[],z=Array.from(new Map(T.map(L=>[L.id,L])).values());a(z)}catch(R){console.error("Failed to load messages",R),a([])}A=Xe.subscribe("live-chat:message",R=>{var T;if(((T=R==null?void 0:R.session_id)==null?void 0:T.toString())===c.id.toString()){const z={id:String(R.id),sender:R.sender,senderName:R.sender_name||"",message:R.message,timestamp:R.created_at,type:R.type||"text",isRead:!!R.is_read};a(L=>L.some(O=>O.id===z.id)?L:[...L,z])}}),y=Xe.subscribe("live-chat:typing",R=>{var T;((T=R==null?void 0:R.sessionId)==null?void 0:T.toString())===c.id.toString()&&g(!!R.isTyping&&R.sender==="customer")})})(),()=>{A&&A(),y&&y()}},[c]),b.useEffect(()=>{var A;(A=m.current)==null||A.scrollIntoView({behavior:"smooth"})},[r]);const v=async()=>{if(!c)return;const A=u.trim();if(A)try{await rt.sendLiveChatMessage({sessionId:c.id,sender:"agent",senderName:"Admin Agent",message:A,type:"text"}),p(""),Xe.emit("live-chat:typing",{sessionId:c.id,sender:"agent",isTyping:!1})}catch(y){console.error("Failed to send message",y)}},w=A=>{d(A),p("")},S=A=>{p(A.target.value),!h&&A.target.value.length>0?(g(!0),c&&Xe.emit("live-chat:typing",{sessionId:c.id,sender:"agent",isTyping:!0})):h&&A.target.value.length===0&&(g(!1),c&&Xe.emit("live-chat:typing",{sessionId:c.id,sender:"agent",isTyping:!1}))},F=A=>{try{const y=new Date(A),R=new Date().getTime()-y.getTime(),T=Math.floor(R/6e4),z=Math.floor(T/60),L=Math.floor(z/24);return T<1?"Just now":T<60?`${T}m ago`:z<24?`${z}h ago`:L<7?`${L}d ago`:y.toLocaleDateString()}catch{return A}},E=A=>{try{return new Date(A).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}catch{return A}},k=t.filter(A=>{const y=(A.customerName||"").toLowerCase(),N=(A.customerEmail||"").toLowerCase(),R=(x||"").toLowerCase();return y.includes(R)||N.includes(R)});return n?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading live chat..."})]})}):e.jsx("div",{className:"h-screen flex flex-col bg-gray-100 dark:bg-slate-900",children:e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"w-1/3 border-r border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800 flex flex-col",children:[e.jsxs("div",{className:"p-4 bg-green-600 dark:bg-green-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-xl font-semibold text-white",children:"Chats"}),e.jsx("button",{onClick:j,className:"text-white hover:text-gray-200 transition-colors",title:"Refresh",children:e.jsx(fs,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search or start new chat",value:x,onChange:A=>f(A.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-slate-700 rounded-lg text-sm text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-400"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:k.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[e.jsx(fs,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No chat sessions found"})]}):k.map(A=>e.jsx("div",{onClick:()=>w(A),className:`p-4 border-b border-gray-200 dark:border-slate-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors ${(c==null?void 0:c.id)===A.id?"bg-gray-100 dark:bg-slate-700":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white font-semibold text-lg",children:((A.customerName||A.customerEmail||"U").charAt(0)||"U").toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:A.customerName||A.customerEmail||"User"}),A.lastMessageTime&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex-shrink-0 ml-2",children:F(A.lastMessageTime)})]}),A.customerEmail&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate mb-1",children:A.customerEmail}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:A.lastMessage||"No messages yet"}),A.status==="active"&&e.jsx("span",{className:"inline-block mt-1 w-2 h-2 bg-green-500 rounded-full"})]})]})},A.id))})]}),e.jsx("div",{className:"flex-1 flex flex-col bg-gray-50 dark:bg-slate-900",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-green-600 dark:bg-green-700 px-4 py-3 flex items-center justify-between border-b border-green-700 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-green-600 font-semibold",children:((c.customerName||c.customerEmail||"U").charAt(0)||"U").toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-white truncate",children:c.customerName||c.customerEmail||"User"}),c.customerEmail&&e.jsx("p",{className:"text-sm text-green-100 truncate",children:c.customerEmail})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-[#ECE5DD] dark:bg-slate-800",children:r.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[e.jsx(fs,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No messages yet. Start the conversation!"})]})}):e.jsxs(e.Fragment,{children:[r.map(A=>e.jsx("div",{className:`flex ${A.sender==="customer"?"justify-start":"justify-end"}`,children:e.jsxs("div",{className:`max-w-[65%] rounded-lg px-3 py-2 shadow-sm ${A.sender==="customer"?"bg-white dark:bg-slate-700 text-gray-900 dark:text-gray-100":"bg-green-500 text-white"}`,children:[A.sender==="customer"&&e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1 font-medium",children:A.senderName}),e.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:A.message}),e.jsxs("div",{className:`flex items-center justify-end gap-1 mt-1 ${A.sender==="customer"?"text-gray-500 dark:text-gray-400":"text-green-50"}`,children:[e.jsx("span",{className:"text-xs",children:E(A.timestamp)}),A.sender==="agent"&&A.isRead&&e.jsx("span",{className:"text-xs",children:""})]})]})},`${A.id}-${A.timestamp||""}`)),h&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-white dark:bg-slate-700 px-3 py-2 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),e.jsx("div",{ref:m})]})}),e.jsx("div",{className:"bg-gray-100 dark:bg-slate-800 px-4 py-3 border-t border-gray-300 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-slate-700 rounded-full transition-colors",children:e.jsx(Db,{className:"h-5 w-5"})}),e.jsx("button",{className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-slate-700 rounded-full transition-colors",children:e.jsx(f4,{className:"h-5 w-5"})}),e.jsx("input",{type:"text",value:u,onChange:S,onKeyPress:A=>A.key==="Enter"&&v(),placeholder:"Type a message",className:"flex-1 px-4 py-2 bg-white dark:bg-slate-700 rounded-full text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500"}),u.trim()?e.jsx("button",{onClick:v,className:"p-2 bg-green-600 text-white rounded-full hover:bg-green-700 transition-colors",children:e.jsx(ra,{className:"h-5 w-5"})}):e.jsx("button",{className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-slate-700 rounded-full transition-colors",children:e.jsx(i4,{className:"h-5 w-5"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50 dark:bg-slate-900",children:e.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[e.jsx(fs,{className:"h-20 w-20 mx-auto mb-4 opacity-30"}),e.jsx("p",{className:"text-lg",children:"Select a chat to start messaging"}),e.jsx("p",{className:"text-sm mt-2",children:"Choose a conversation from the left panel"})]})})})]})})}function E9(){const[t,s]=b.useState({label:"Last 30 Days",value:"30d",days:30}),[r]=b.useState({revenue:{total:125e4,growth:15.2,monthly:[95e3,11e4,125e3,14e4,135e3,15e4],daily:[4200,3800,4500,5200,4800,5100,4900]},orders:{total:2847,growth:12.8,average:439,conversion:3.2},customers:{total:15420,new:1250,returning:14170,growth:18.5},traffic:{total:125e3,growth:8.7,sources:{organic:45e3,direct:35e3,social:25e3,paid:15e3,email:5e3}},engagement:{pageViews:45e4,bounceRate:35.2,sessionDuration:4.2,pagesPerSession:3.8},products:{topSelling:[{name:"Face Cleanser",sales:450,revenue:225e3,growth:22.5},{name:"Moisturizer",sales:380,revenue:19e4,growth:18.3},{name:"Serum",sales:320,revenue:32e4,growth:25.7},{name:"Sunscreen",sales:280,revenue:14e4,growth:15.2},{name:"Face Mask",sales:250,revenue:125e3,growth:20.1}],categories:[{name:"Skincare",sales:1200,revenue:6e5},{name:"Hair Care",sales:800,revenue:4e5},{name:"Body Care",sales:600,revenue:3e5},{name:"Accessories",sales:200,revenue:1e5}]},marketing:{email:{sent:5e4,opened:15e3,clicked:3e3,conversion:450},sms:{sent:15e3,delivered:14850,clicked:2250,conversion:180},push:{sent:25e3,opened:8750,clicked:1750,conversion:280}}}),a=[{label:"Last 7 Days",value:"7d",days:7},{label:"Last 30 Days",value:"30d",days:30},{label:"Last 90 Days",value:"90d",days:90},{label:"Last Year",value:"1y",days:365}],n=c=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(c),i=c=>new Intl.NumberFormat("en-IN").format(c),l=c=>c>0?"text-green-600":c<0?"text-red-600":"text-gray-600",o=c=>c>0?e.jsx(zt,{className:"h-4 w-4 text-green-600"}):c<0?e.jsx(zt,{className:"h-4 w-4 text-red-600 rotate-180"}):e.jsx(zt,{className:"h-4 w-4 text-gray-600"});return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Advanced Analytics Dashboard"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Comprehensive insights into your business performance"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("select",{value:t.value,onChange:c=>{const d=a.find(u=>u.value===c.target.value);d&&s(d)},className:"px-3 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"},children:a.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))}),e.jsxs("button",{className:"btn-secondary flex items-center space-x-2",children:[e.jsx(wa,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(or,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Revenue"}),e.jsx("p",{className:"text-3xl font-bold",children:n(r.revenue.total)}),e.jsxs("div",{className:"flex items-center mt-2",children:[o(r.revenue.growth),e.jsxs("span",{className:"ml-1 text-sm",children:[r.revenue.growth>0?"+":"",r.revenue.growth,"%"]})]})]}),e.jsx(Co,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Orders"}),e.jsx("p",{className:"text-3xl font-bold",children:i(r.orders.total)}),e.jsxs("div",{className:"flex items-center mt-2",children:[o(r.orders.growth),e.jsxs("span",{className:"ml-1 text-sm",children:[r.orders.growth>0?"+":"",r.orders.growth,"%"]})]})]}),e.jsx(Qs,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Customers"}),e.jsx("p",{className:"text-3xl font-bold",children:i(r.customers.total)}),e.jsxs("div",{className:"flex items-center mt-2",children:[o(r.customers.growth),e.jsxs("span",{className:"ml-1 text-sm",children:[r.customers.growth>0?"+":"",r.customers.growth,"%"]})]})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Conversion Rate"}),e.jsxs("p",{className:"text-3xl font-bold",children:[r.orders.conversion,"%"]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(ds,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-1 text-sm",children:"Industry avg: 2.5%"})]})]}),e.jsx(ds,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Revenue Trend"}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-2",children:r.revenue.monthly.map((c,d)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"bg-blue-500 rounded-t w-8 mb-2",style:{height:`${c/Math.max(...r.revenue.monthly)*200}px`}}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:n(c)}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:["M",d+1]})]},d))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Daily Orders"}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-2",children:r.revenue.daily.map((c,d)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"bg-green-500 rounded-t w-8 mb-2",style:{height:`${c/Math.max(...r.revenue.daily)*200}px`}}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:c}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:["D",d+1]})]},d))})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Traffic Sources"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:Object.entries(r.traffic.sources).map(([c,d])=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-2 relative",children:e.jsx("div",{className:"w-full h-full rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center",children:e.jsxs("span",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:[Math.round(d/r.traffic.total*100),"%"]})})}),e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 capitalize",children:c}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[i(d)," visitors"]})]},c))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Top Selling Products"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Sales"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Growth"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:r.products.topSelling.map((c,d)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:d+1})}),e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:c.name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:i(c.sales)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:n(c.revenue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[o(c.growth),e.jsxs("span",{className:`ml-1 text-sm ${l(c.growth)}`,children:[c.growth>0?"+":"",c.growth,"%"]})]})})]},d))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Email Marketing"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Sent"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:i(r.marketing.email.sent)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Open Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[(r.marketing.email.opened/r.marketing.email.sent*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Click Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[(r.marketing.email.clicked/r.marketing.email.sent*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Conversions"}),e.jsx("span",{className:"font-semibold text-green-600",children:i(r.marketing.email.conversion)})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"SMS Marketing"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Sent"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:i(r.marketing.sms.sent)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Delivery Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[(r.marketing.sms.delivered/r.marketing.sms.sent*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Click Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[(r.marketing.sms.clicked/r.marketing.sms.sent*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Conversions"}),e.jsx("span",{className:"font-semibold text-green-600",children:i(r.marketing.sms.conversion)})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Push Notifications"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Sent"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:i(r.marketing.push.sent)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Open Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[(r.marketing.push.opened/r.marketing.push.sent*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Click Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[(r.marketing.push.clicked/r.marketing.push.sent*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Conversions"}),e.jsx("span",{className:"font-semibold text-green-600",children:i(r.marketing.push.conversion)})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Customer Breakdown"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Customers"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:i(r.customers.total)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"New Customers"}),e.jsx("span",{className:"font-semibold text-blue-600",children:i(r.customers.new)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Returning Customers"}),e.jsx("span",{className:"font-semibold text-green-600",children:i(r.customers.returning)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Customer Growth"}),e.jsxs("div",{className:"flex items-center",children:[o(r.customers.growth),e.jsxs("span",{className:`ml-1 text-sm ${l(r.customers.growth)}`,children:[r.customers.growth>0?"+":"",r.customers.growth,"%"]})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Engagement Metrics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Page Views"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:i(r.engagement.pageViews)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Bounce Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[r.engagement.bounceRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Session Duration"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[r.engagement.sessionDuration,"m"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Pages per Session"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:r.engagement.pagesPerSession})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Product Categories Performance"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:r.products.categories.map((c,d)=>e.jsxs("div",{className:"text-center p-4 border border-slate-200 dark:border-slate-700 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:c.name}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Sales"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:i(c.sales)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:n(c.revenue)})]})]})]},d))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Performance Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(zt,{className:"h-6 w-6"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Revenue Growth"}),e.jsxs("p",{className:"text-sm opacity-90",children:["Your revenue has grown by ",r.revenue.growth,"% compared to last period"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(Pt,{className:"h-6 w-6"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Customer Acquisition"}),e.jsxs("p",{className:"text-sm opacity-90",children:[r.customers.new," new customers acquired this period"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(ds,{className:"h-6 w-6"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Conversion Rate"}),e.jsxs("p",{className:"text-sm opacity-90",children:[r.orders.conversion,"% conversion rate, above industry average"]})]})]})]})]})}const Qa=Dn();function A9(){var M,U,q,Y;const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState(null),[c,d]=b.useState(!1),[u,p]=b.useState(!1),[h,g]=b.useState(!1),[x,f]=b.useState(null),[m,j]=b.useState(""),[v,w]=b.useState(""),[S,F]=b.useState(null),E=[{type:"text",label:"Text Input",icon:E0},{type:"email",label:"Email",icon:ss},{type:"phone",label:"Phone",icon:pa},{type:"textarea",label:"Text Area",icon:gs},{type:"select",label:"Dropdown",icon:ws},{type:"checkbox",label:"Checkbox",icon:Rb},{type:"radio",label:"Radio Button",icon:ws},{type:"date",label:"Date Picker",icon:Mr},{type:"number",label:"Number",icon:E0},{type:"file",label:"File Upload",icon:Xn},{type:"rating",label:"Rating",icon:xr}];b.useEffect(()=>{k(),A()},[]);const k=async()=>{try{i(!0);const K=await fetch(`${Qa}/forms`);if(K.ok){const le=await K.json(),J=le.forms||le||[];s(J.map(ae=>({...ae,fields:typeof ae.fields=="string"?JSON.parse(ae.fields):ae.fields||[]})))}}catch(K){console.error("Error fetching forms:",K)}finally{i(!1)}},A=async()=>{try{const K=await fetch(`${Qa}/forms/submissions`);if(K.ok){const le=await K.json();a(le.submissions||le||[])}}catch(K){console.error("Error fetching submissions:",K)}},y=async()=>{if(!m.trim()){alert("Please enter a form title");return}try{const K={name:m,fields:[],status:"draft"},le=await fetch(`${Qa}/forms`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m,description:v,fields:[],settings:{},isPublished:!1})});if(le.ok){const J=await le.json(),ae={...J,fields:typeof J.fields=="string"?JSON.parse(J.fields):J.fields||[]};s([ae,...t]),o(ae),d(!1),j(""),w(""),alert("Form created successfully!")}else{const J=await le.json();alert(J.message||"Failed to create form")}}catch(K){console.error("Error creating form:",K),alert("Failed to create form")}},N=K=>{if(!l)return;const le={id:Date.now().toString(),type:K,label:`New ${K} Field`,required:!1,options:K==="select"||K==="radio"?["Option 1","Option 2"]:void 0},J=[...l.fields||[],le];L(J)},R=K=>{if(!l)return;const le=l.fields.filter(J=>J.id!==K);L(le)},T=K=>{f({...K})},z=()=>{if(!l||!x)return;const K=l.fields.map(le=>le.id===x.id?x:le);L(K),f(null)},L=async K=>{if(l)try{const le={...l,fields:K},J=await fetch(`${Qa}/forms/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:le.name,description:"",fields:K,settings:{},isPublished:le.status==="active"})});if(J.ok){const ae=await J.json(),he={...ae,fields:typeof ae.fields=="string"?JSON.parse(ae.fields):ae.fields||[]};o(he),s(t.map(Fe=>Fe.id===he.id?he:Fe))}}catch(le){console.error("Error updating form:",le),alert("Failed to update form")}},O=async K=>{try{const le=t.find(ae=>ae.id===K);if(!le)return;(await fetch(`${Qa}/forms/${K}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:le.name,description:"",fields:le.fields,settings:{},isPublished:!0})})).ok&&(await k(),alert("Form published successfully!"))}catch(le){console.error("Error publishing form:",le),alert("Failed to publish form")}},V=async K=>{try{const le=t.find(ae=>ae.id===K);if(!le)return;(await fetch(`${Qa}/forms/${K}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:le.name,description:"",fields:le.fields,settings:{},isPublished:!1})})).ok&&(await k(),alert("Form unpublished successfully!"))}catch(le){console.error("Error unpublishing form:",le),alert("Failed to unpublish form")}},Z=async K=>{try{const le=t.find(ae=>ae.id===K);if(!le)return;(await fetch(`${Qa}/forms`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:`${le.name} (Copy)`,description:"",fields:le.fields,settings:{},isPublished:!1})})).ok&&(await k(),alert("Form copied successfully!"))}catch(le){console.error("Error copying form:",le),alert("Failed to copy form")}},D=async K=>{if(confirm("Are you sure you want to delete this form? This action cannot be undone."))try{(await fetch(`${Qa}/forms/${K}`,{method:"DELETE"})).ok&&(s(t.filter(J=>J.id!==K)),(l==null?void 0:l.id)===K&&o(null),alert("Form deleted successfully!"))}catch(le){console.error("Error deleting form:",le),alert("Failed to delete form")}},P=(K,le)=>{if(!l)return;const J=[...l.fields],ae=le==="up"?K-1:K+1;ae<0||ae>=J.length||([J[K],J[ae]]=[J[ae],J[K]],L(J))},W=K=>{const le=E.find(J=>J.type===K);return le?le.icon:E0},ee=K=>r.filter(le=>le.form_id===K);return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Form Builder"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Create custom forms to collect customer data and feedback"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>g(!h),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center space-x-2",children:[e.jsx(ct,{className:"h-4 w-4"}),e.jsx("span",{children:"View Submissions"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Form"})]})]})]}),h&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"All Form Submissions"}),e.jsx("button",{onClick:()=>g(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:e.jsx(es,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"space-y-4",children:r.length===0?e.jsx("p",{className:"text-slate-500 text-center py-8",children:"No submissions yet"}):r.map(K=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:K.form_name||`Form #${K.form_id}`}),e.jsx("span",{className:"text-sm text-slate-500",children:new Date(K.created_at).toLocaleString()})]}),e.jsx("div",{className:"space-y-1",children:Object.entries(K.data).map(([le,J])=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:[le,":"]})," ",e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:String(J)})]},le))})]},K.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Your Forms"}),t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-slate-500 mb-4",children:"No forms created yet"}),e.jsx("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Your First Form"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(K=>{var J;const le=ee(K.id);return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:K.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${K.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:K.status==="active"?"Published":"Draft"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-500 dark:text-slate-500 mb-4",children:[e.jsxs("span",{children:[le.length," submissions"]}),e.jsxs("span",{children:[((J=K.fields)==null?void 0:J.length)||0," fields"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>o(K),className:"flex-1 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>{o(K),p(!0)},className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(ct,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Z(K.id),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(tl,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>D(K.id),className:"px-3 py-1 border border-red-300 dark:border-red-600 text-red-700 dark:text-red-300 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},K.id)})})]}),l&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Add Field"}),e.jsx("div",{className:"space-y-2",children:E.map(K=>{const le=K.icon;return e.jsxs("button",{onClick:()=>N(K.type),className:"w-full flex items-center space-x-3 p-3 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[e.jsx(le,{className:"h-4 w-4 text-slate-600 dark:text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:K.label})]},K.type)})})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Form Fields: ",l.name]}),e.jsx("div",{className:"flex gap-2",children:l.status==="active"?e.jsx("button",{onClick:()=>V(l.id),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:"Unpublish"}):e.jsx("button",{onClick:()=>O(l.id),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Publish Form"})})]}),((M=l.fields)==null?void 0:M.length)===0?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg",children:[e.jsx("p",{className:"text-slate-500 mb-4",children:"No fields added yet"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Click on a field type to add it to your form"})]}):e.jsx("div",{className:"space-y-4",children:(U=l.fields)==null?void 0:U.map((K,le)=>{const J=W(K.type);return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[e.jsx(V2,{className:"h-4 w-4 text-slate-400 cursor-move"}),e.jsx(J,{className:"h-4 w-4 text-slate-600 dark:text-slate-400"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:K.label}),K.required&&e.jsx("span",{className:"text-red-500 text-sm",children:"*"})]}),e.jsxs("div",{className:"flex space-x-2",children:[le>0&&e.jsx("button",{onClick:()=>P(le,"up"),className:"p-1 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400",children:e.jsx(hm,{className:"h-4 w-4"})}),le<l.fields.length-1&&e.jsx("button",{onClick:()=>P(le,"down"),className:"p-1 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400",children:e.jsx(mm,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>T(K),className:"p-1 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400",children:e.jsx(jr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>R(K.id),className:"p-1 text-slate-600 dark:text-slate-400 hover:text-red-600 dark:hover:text-red-400",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Type: ",K.type,K.placeholder&&e.jsxs("span",{className:"ml-2",children:["Placeholder: ",K.placeholder]})]}),K.options&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Options:"}),e.jsx("ul",{className:"text-sm text-slate-500 dark:text-slate-500",children:K.options.map((ae,he)=>e.jsxs("li",{children:[" ",ae]},he))})]})]},K.id)})})]})]}),x&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Edit Field"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Label"}),e.jsx("input",{type:"text",value:x.label,onChange:K=>f({...x,label:K.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Placeholder"}),e.jsx("input",{type:"text",value:x.placeholder||"",onChange:K=>f({...x,placeholder:K.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),(x.type==="select"||x.type==="radio")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Options (one per line)"}),e.jsx("textarea",{value:((q=x.options)==null?void 0:q.join(`
`))||"",onChange:K=>f({...x,options:K.target.value.split(`
`).filter(le=>le.trim())}),rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:x.required,onChange:K=>f({...x,required:K.target.checked}),className:"rounded"}),e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Required"})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>f(null),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:z,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save"})]})]})}),u&&l&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Form Preview: ",l.name]}),e.jsx("button",{onClick:()=>p(!1),className:"text-2xl text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:""})]}),e.jsxs("div",{className:"space-y-4",children:[(Y=l.fields)==null?void 0:Y.map(K=>{var le,J;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:[K.label,K.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),K.type==="text"&&e.jsx("input",{type:"text",placeholder:K.placeholder,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),K.type==="email"&&e.jsx("input",{type:"email",placeholder:K.placeholder,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),K.type==="phone"&&e.jsx("input",{type:"tel",placeholder:K.placeholder,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),K.type==="textarea"&&e.jsx("textarea",{rows:4,placeholder:K.placeholder,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),K.type==="select"&&e.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{children:"Select an option"}),(le=K.options)==null?void 0:le.map((ae,he)=>e.jsx("option",{value:ae,children:ae},he))]}),K.type==="checkbox"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",className:"rounded"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:K.label})]}),K.type==="radio"&&e.jsx("div",{className:"space-y-2",children:(J=K.options)==null?void 0:J.map((ae,he)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:K.id,className:"rounded"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:ae})]},he))}),K.type==="date"&&e.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),K.type==="number"&&e.jsx("input",{type:"number",placeholder:K.placeholder,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),K.type==="file"&&e.jsx("input",{type:"file",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),K.type==="rating"&&e.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(ae=>e.jsx("button",{className:"text-yellow-400 hover:text-yellow-500",children:e.jsx(xr,{className:"h-6 w-6"})},ae))})]},K.id)}),e.jsx("button",{className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"Submit"})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Create New Form"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Form Title *"}),e.jsx("input",{type:"text",value:m,onChange:K=>j(K.target.value),placeholder:"Enter form title",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{rows:3,value:v,onChange:K=>w(K.target.value),placeholder:"Enter form description",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>{d(!1),j(""),w("")},className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:y,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Form"})]})]})})]})}const V0=Dn();function F9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState(""),[c,d]=b.useState("all"),[u,p]=b.useState("all"),[h,g]=b.useState(null),[x,f]=b.useState([]);b.useEffect(()=>{m(),j(),v()},[]);const m=async()=>{try{i(!0);const y=await fetch(`${V0}/forms/submissions`);if(y.ok){const N=await y.json();s(N.submissions||N||[])}}catch(y){console.error("Error fetching submissions:",y)}finally{i(!1)}},j=async()=>{try{const y=await fetch(`${V0}/users`);if(y.ok){const N=await y.json();a(N||[])}}catch(y){console.error("Error fetching users:",y)}},v=async()=>{try{const y=await fetch(`${V0}/forms`);if(y.ok){const N=await y.json();f(N.forms||N||[])}}catch(y){console.error("Error fetching forms:",y)}},w=y=>{const N=y.data||{},R=N.email||N.Email||"";return R&&r.find(T=>T.email.toLowerCase()===R.toLowerCase())||null},S=y=>{const N=w(y),R=y.data||{};return{user:N,name:R.name||R.Name||(N==null?void 0:N.name)||"Anonymous",email:R.email||R.Email||(N==null?void 0:N.email)||"N/A",phone:R.phone||R.Phone||(N==null?void 0:N.phone)||null}},F=t.filter(y=>{var z;const N=((z=y.form_name)==null?void 0:z.toLowerCase().includes(l.toLowerCase()))||Object.values(y.data||{}).some(L=>String(L).toLowerCase().includes(l.toLowerCase())),R=c==="all"||y.status===c,T=u==="all"||String(y.form_id)===u;return N&&R&&T}),E=async(y,N)=>{try{s(t.map(R=>R.id===y?{...R,status:N}:R))}catch(R){console.error("Error updating submission status:",R)}},k=()=>{var z;const y=[["Form Name","User Name","Email","Phone","Submission Date","Status",...Object.keys(((z=t[0])==null?void 0:z.data)||{})].join(","),...F.map(L=>{const O=S(L),V=L.data||{};return[L.form_name||`Form #${L.form_id}`,O.name,O.email,O.phone||"",new Date(L.created_at).toLocaleString(),L.status,...Object.values(V).map(Z=>`"${String(Z).replace(/"/g,'""')}"`)].join(",")})].join(`
`),N=new Blob([y],{type:"text/csv"}),R=window.URL.createObjectURL(N),T=document.createElement("a");T.href=R,T.download=`form-submissions-${new Date().toISOString().split("T")[0]}.csv`,T.click(),window.URL.revokeObjectURL(R)},A=y=>{switch(y){case"new":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300";case"read":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300";case"archived":return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300";default:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300"}};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Form Submissions"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"View and manage all form submissions from users"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:k,disabled:F.length===0,className:"btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(wa,{className:"h-4 w-4"}),e.jsx("span",{children:"Export CSV"})]}),e.jsxs("div",{className:"metric-card px-4 py-2",children:[e.jsx("div",{className:"text-sm font-medium mb-1",style:{color:"var(--text-muted)"},children:"Total Submissions"}),e.jsx("div",{className:"text-2xl font-light",style:{color:"var(--arctic-blue-primary-dark)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:t.length})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search submissions...",value:l,onChange:y=>o(y.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("select",{value:c,onChange:y=>d(y.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"read",children:"Read"}),e.jsx("option",{value:"archived",children:"Archived"})]}),e.jsxs("select",{value:u,onChange:y=>p(y.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Forms"}),x.map(y=>e.jsx("option",{value:String(y.id),children:y.name},y.id))]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:F.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(gs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No submissions found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l||c!=="all"||u!=="all"?"Try adjusting your filters":"No form submissions have been received yet"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Form"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Submitted"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:F.map(y=>{const N=S(y);return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(gs,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:y.form_name||`Form #${y.form_id}`}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ID: ",y.form_id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900/20 flex items-center justify-center",children:e.jsx(ga,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:N.name}),N.user&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["User ID: ",N.user.id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ss,{className:"h-4 w-4 text-gray-400"}),N.email]}),N.phone&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:N.phone})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mr,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:new Date(y.created_at).toLocaleDateString()})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:new Date(y.created_at).toLocaleTimeString()})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${A(y.status)}`,children:y.status||"new"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("button",{onClick:()=>g(y),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors flex items-center space-x-1",children:[e.jsx(ct,{className:"h-4 w-4"}),e.jsx("span",{children:"View"})]})})]},y.id)})})]})})}),h&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Submission Details"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:h.form_name||`Form #${h.form_id}`})]}),e.jsx("button",{onClick:()=>g(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(es,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(ga,{className:"h-5 w-5 mr-2"}),"User Information"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(()=>{const y=S(h);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Name"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:y.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:y.email})]}),y.phone&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Phone"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:y.phone})]}),y.user&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Registered User"}),e.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:["Yes (User ID: ",y.user.id,")"]})]})]})})()})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(gs,{className:"h-5 w-5 mr-2"}),"Form Data"]}),e.jsx("div",{className:"space-y-4",children:Object.entries(h.data||{}).map(([y,N])=>["email","Email","name","Name","phone","Phone"].includes(y)?null:e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-4 last:border-0",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:y}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:typeof N=="object"?JSON.stringify(N,null,2):String(N)})]},y))})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(Mr,{className:"h-5 w-5 mr-2"}),"Submission Metadata"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Submission ID"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:["#",h.id]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),e.jsx("p",{className:"text-sm mt-1",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${A(h.status)}`,children:h.status||"new"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Submitted At"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:new Date(h.created_at).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Form ID"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:h.form_id})]})]})]}),e.jsxs("div",{className:"flex space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>{E(h.id,"read"),g(null)},className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4"}),e.jsx("span",{children:"Mark as Read"})]}),e.jsx("button",{onClick:()=>{E(h.id,"archived"),g(null)},className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Archive"}),e.jsx("button",{onClick:()=>g(null),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Close"})]})]})]})})]})}function P9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState("");b.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0),o("");const y=await rt.getWorkflows().catch(()=>[]);s(Array.isArray(y)?y:[])}catch(y){console.error("Failed to load workflows data:",y),o("Failed to load workflows data")}finally{i(!1)}},[d,u]=b.useState(null),[p,h]=b.useState(!1),[g,x]=b.useState(!1),[f,m]=b.useState("workflows"),j={totalWorkflows:t.length||0,activeWorkflows:t.filter(y=>y.status==="active").length||0,totalRuns:t.reduce((y,N)=>{var R;return y+(((R=N.stats)==null?void 0:R.totalRuns)||0)},0),averageSuccessRate:t.length>0?t.reduce((y,N)=>{var R;return y+(((R=N.stats)==null?void 0:R.successRate)||0)},0)/t.length:0},v=y=>{switch(y){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"paused":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"draft":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}};if(n)return e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading workflows..."})]})})});if(l)return e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:l})]}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})});const w=y=>{switch(y){case"marketing":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"sales":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"support":return"text-purple-600 bg-purple-100 dark:bg-purple-900 dark:text-purple-200";case"retention":return"text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},S=y=>{console.log("Toggling workflow:",y),alert("Workflow status updated!")},F=y=>{u(y)},E=y=>{console.log("Deleting workflow:",y),alert("Workflow deleted successfully!")},k=y=>{console.log("Copying workflow:",y),alert("Workflow copied successfully!")},A=y=>{console.log("Using template:",y),alert("Workflow created from template!")};return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Workflow Automation"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Automate customer interactions across all channels"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>x(!0),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(ct,{className:"h-4 w-4"}),e.jsx("span",{children:"Templates"})]}),e.jsxs("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Workflow"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Workflows"}),e.jsx("p",{className:"text-3xl font-bold",children:j.totalWorkflows})]}),e.jsx(n3,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active"}),e.jsx("p",{className:"text-3xl font-bold",children:j.activeWorkflows})]}),e.jsx(Wa,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Runs"}),e.jsx("p",{className:"text-3xl font-bold",children:j.totalRuns.toLocaleString()})]}),e.jsx(Ss,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Success Rate"}),e.jsxs("p",{className:"text-3xl font-bold",children:[j.averageSuccessRate.toFixed(1),"%"]})]}),e.jsx(ds,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsxs("nav",{className:"flex space-x-8 px-6",children:[e.jsx("button",{onClick:()=>m("workflows"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${f==="workflows"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"My Workflows"}),e.jsx("button",{onClick:()=>m("templates"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${f==="templates"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"Templates"}),e.jsx("button",{onClick:()=>m("analytics"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${f==="analytics"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"Analytics"})]})}),e.jsxs("div",{className:"p-6",children:[f==="workflows"&&e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(y=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:y.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${v(y.status)}`,children:y.status})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:y.description}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Runs:"}),e.jsx("span",{className:"font-semibold",children:y.stats.totalRuns})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Success Rate:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[y.stats.successRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Last Run:"}),e.jsx("span",{className:"font-semibold",children:y.stats.lastRun})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>F(y),className:"flex-1 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>S(y.id),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:y.status==="active"?e.jsx(Cn,{className:"h-4 w-4"}):e.jsx(Wa,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>k(y.id),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(tl,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>E(y.id),className:"px-3 py-1 border border-red-300 dark:border-red-600 text-red-700 dark:text-red-300 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},y.id))})}),f==="templates"&&e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map(y=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:y.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w(y.category)}`,children:y.category})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:y.description}),y.isPopular&&e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:"px-2 py-1 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 text-xs rounded-full",children:"Popular"})}),e.jsx("button",{onClick:()=>A(y.id),className:"w-full px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Use Template"})]},y.id))})}),f==="analytics"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Top Performing Workflows"}),e.jsx("div",{className:"space-y-3",children:t.sort((y,N)=>N.stats.successRate-y.stats.successRate).slice(0,3).map((y,N)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:N+1})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:y.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[y.stats.totalRuns," runs"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-green-600",children:[y.stats.successRate,"%"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Success Rate"})]})]},y.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Workflow Performance"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Workflows"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:j.totalWorkflows})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Active Workflows"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:j.activeWorkflows})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Runs"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:j.totalRuns.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Average Success Rate"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[j.averageSuccessRate.toFixed(1),"%"]})]})]})]})]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Workflow Automation Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Start Simple"}),e.jsx("p",{className:"text-sm opacity-90",children:"Begin with basic workflows and gradually add complexity as you learn what works."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Test Thoroughly"}),e.jsx("p",{className:"text-sm opacity-90",children:"Always test your workflows before going live to ensure they work as expected."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Monitor Performance"}),e.jsx("p",{className:"text-sm opacity-90",children:"Regularly review workflow performance and optimize based on results."})]})]})]}),p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Create New Workflow"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Workflow Name"}),e.jsx("input",{type:"text",placeholder:"Enter workflow name",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{rows:3,placeholder:"Enter workflow description",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Trigger Type"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{children:"Customer Signup"}),e.jsx("option",{children:"Order Placed"}),e.jsx("option",{children:"Cart Abandoned"}),e.jsx("option",{children:"Product Viewed"}),e.jsx("option",{children:"Email Opened"}),e.jsx("option",{children:"SMS Clicked"})]})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{h(!1),alert("Workflow created successfully!")},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Workflow"})]})]})})]})}function D9(){var O,V,Z;const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState(""),[c,d]=b.useState(null),[u,p]=b.useState(null),[h,g]=b.useState(!1),[x,f]=b.useState(!1),[m,j]=b.useState("segments"),[v,w]=b.useState({name:"",description:"",criteria:[]});b.useEffect(()=>{S(),E()},[]);const S=async()=>{try{i(!0),o("");const D=await rt.getCustomerSegments().catch(()=>[]);let P=Array.isArray(D)?D:[];if(!P||P.length===0){const W=await rt.getCustomerSegmentAggregates().catch(()=>[]);P=Array.isArray(W)?W:[]}s(P),a([])}catch(D){console.error("Failed to load segments data:",D),o("Failed to load segments data")}finally{i(!1)}},F=async()=>{try{o("");const D=await rt.getUsers(),P=(Array.isArray(D)?D:[]).map(W=>({id:String(W.id),name:W.name,email:W.email,segment:"All",totalOrders:parseInt(String(W.total_orders||0),10)||0,totalSpent:parseFloat(String(W.total_spent||0))||0,lastOrderDate:W.last_order_date||W.member_since,location:W.city||"N/A",tags:[]}));a(P)}catch(D){console.error("Failed to load customers:",D),a([])}},E=async()=>{try{const D=await rt.getAnalytics(),P=(D==null?void 0:D.overview)||null;d(P)}catch(D){console.error("Failed to load analytics:",D),d(null)}};b.useEffect(()=>{m==="customers"?F():m==="analytics"&&E()},[m]);const k={totalSegments:t.length,totalCustomers:t.reduce((D,P)=>D+P.customerCount,0),activeSegments:t.filter(D=>D.isActive).length,totalRevenue:t.reduce((D,P)=>D+P.stats.totalRevenue,0)},A=D=>{switch(D){case"equals":return"equals";case"not_equals":return"does not equal";case"contains":return"contains";case"not_contains":return"does not contain";case"greater_than":return"is greater than";case"less_than":return"is less than";case"between":return"is between";case"in":return"is in";case"not_in":return"is not in";default:return D}},y=D=>{switch(D){case"total_spent":return"Total Spent";case"total_orders":return"Total Orders";case"registration_date":return"Registration Date";case"last_order_date":return"Last Order Date";case"category_preference":return"Category Preference";case"location":return"Location";case"age":return"Age";case"gender":return"Gender";default:return D}},N=()=>{g(!0)},R=D=>{p(D),g(!0),w({name:D.name,description:D.description,criteria:D.criteria||[]})},T=D=>{D&&confirm("Delete this segment?")&&rt.deleteCustomerSegment(D).then(()=>S()).catch(()=>alert("Failed to delete segment"))},z=D=>{p(D),f(!0)},L=[{id:"segments",label:"Segments",icon:ds},{id:"customers",label:"Customers",icon:Pt},{id:"analytics",label:"Analytics",icon:Ss}];return n?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading segments..."})]})})}):l?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:l})]}),e.jsx("button",{onClick:S,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Customer Segmentation"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Create targeted customer segments for personalized marketing"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:S,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(ds,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:N,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Segment"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Segments"}),e.jsx("p",{className:"text-3xl font-bold",children:k.totalSegments})]}),e.jsx(ds,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Customers"}),e.jsx("p",{className:"text-3xl font-bold",children:((c==null?void 0:c.customers)??k.totalCustomers).toLocaleString()})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active Segments"}),e.jsx("p",{className:"text-3xl font-bold",children:k.activeSegments})]}),e.jsx(zt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Revenue"}),e.jsx("p",{className:"text-3xl font-bold",children:(c==null?void 0:c.revenue)!==void 0?`${Number(c.revenue).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`:`${(k.totalRevenue/1e5).toFixed(1)}L`})]}),e.jsx(Qs,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:L.map(D=>{const P=D.icon;return e.jsxs("button",{onClick:()=>j(D.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${m===D.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{children:D.label})]},D.id)})})}),e.jsxs("div",{className:"p-6",children:[m==="segments"&&e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(D=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:D.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${D.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:D.isActive?"Active":"Inactive"})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:D.description}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Customers:"}),e.jsx("span",{className:"font-semibold",children:D.customerCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Revenue:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["",(D.stats.totalRevenue/1e5).toFixed(1),"L"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Avg Order:"}),e.jsxs("span",{className:"font-semibold",children:["",D.stats.averageOrderValue]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:D.tags.map((P,W)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded",children:P},W))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>z(D),className:"flex-1 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"View"}),e.jsx("button",{onClick:()=>R(D),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(jr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>T(D.id),className:"px-3 py-1 border border-red-300 dark:border-red-600 text-red-700 dark:text-red-300 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},D.id))})}),m==="customers"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Customer List"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{children:"All Segments"}),e.jsx("option",{children:"VIP Customers"}),e.jsx("option",{children:"New Customers"}),e.jsx("option",{children:"At-Risk Customers"}),e.jsx("option",{children:"Skincare Enthusiasts"})]}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(cl,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Segment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Orders"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Total Spent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Last Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:r.map(D=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:D.name}),e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:D.email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded-full",children:D.segment})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:D.totalOrders}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:["",D.totalSpent.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:new Date(D.lastOrderDate).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:D.location}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),e.jsx("button",{className:"text-green-600 hover:text-green-900",children:"Message"})]})]},D.id))})]})})]}),m==="analytics"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Segment Performance"}),e.jsx("div",{className:"space-y-3",children:t.sort((D,P)=>P.stats.totalRevenue-D.stats.totalRevenue).slice(0,3).map((D,P)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:P+1})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:D.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[D.customerCount," customers"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-green-600",children:["",(D.stats.totalRevenue/1e5).toFixed(1),"L"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]})]},D.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Segment Analytics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Segments"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:k.totalSegments})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Active Segments"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:k.activeSegments})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Customers"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:(c==null?void 0:c.customers)??k.totalCustomers})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Revenue"}),e.jsx("span",{className:"font-semibold text-green-600",children:(c==null?void 0:c.revenue)!==void 0?`${Number(c.revenue).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`:`${(k.totalRevenue/1e5).toFixed(1)}L`})]})]})]})]})})]})]}),x&&u&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Segment Details: ",u.name]}),e.jsx("button",{onClick:()=>f(!1),className:"text-2xl text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:""})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Description"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:u.description})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Segmentation Criteria"}),e.jsx("div",{className:"space-y-2",children:u.criteria.map((D,P)=>e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:y(D.field)}),e.jsx("span",{className:"mx-2 text-slate-600 dark:text-slate-400",children:A(D.operator)}),e.jsxs("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:[D.value,D.value2&&` and ${D.value2}`]})]},P))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Segment Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u.customerCount}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Customers"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:u.stats.totalOrders}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Orders"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["",(u.stats.totalRevenue/1e5).toFixed(1),"L"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["",u.stats.averageOrderValue]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Avg Order Value"})]})]})]})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:u?"Edit Segment":"Create New Segment"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Segment Name"}),e.jsx("input",{type:"text",value:v.name,onChange:D=>w(P=>({...P,name:D.target.value})),placeholder:"Enter segment name",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{rows:3,value:v.description,onChange:D=>w(P=>({...P,description:D.target.value})),placeholder:"Enter segment description",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Criteria"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",onChange:D=>w(P=>({...P,criteria:[{field:D.target.value,operator:"greater_than",value:""}]})),value:((O=v.criteria[0])==null?void 0:O.field)||"",children:[e.jsx("option",{value:"",children:"Select field"}),e.jsx("option",{value:"total_spent",children:"Total Spent"}),e.jsx("option",{value:"total_orders",children:"Total Orders"}),e.jsx("option",{value:"registration_date",children:"Registration Date"}),e.jsx("option",{value:"last_order_date",children:"Last Order Date"}),e.jsx("option",{value:"category_preference",children:"Category Preference"})]}),e.jsxs("select",{className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",onChange:D=>w(P=>({...P,criteria:[{...P.criteria[0]||{field:"",operator:"greater_than",value:""},operator:D.target.value}]})),value:((V=v.criteria[0])==null?void 0:V.operator)||"greater_than",children:[e.jsx("option",{value:"greater_than",children:"is greater than"}),e.jsx("option",{value:"less_than",children:"is less than"}),e.jsx("option",{value:"equals",children:"equals"}),e.jsx("option",{value:"contains",children:"contains"})]}),e.jsx("input",{type:"text",placeholder:"Value",value:((Z=v.criteria[0])==null?void 0:Z.value)||"",onChange:D=>w(P=>({...P,criteria:[{...P.criteria[0]||{field:"",operator:"greater_than",value:""},value:D.target.value}]})),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>{g(!1),p(null),w({name:"",description:"",criteria:[]})},className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:async()=>{try{if(!v.name.trim())return alert("Segment name is required");const D={name:v.name.trim(),description:v.description.trim(),criteria:v.criteria,is_active:!0};u?await rt.updateCustomerSegment(u.id,D):await rt.createCustomerSegment(D),await S(),g(!1),p(null),w({name:"",description:"",criteria:[]})}catch{alert("Failed to save segment")}},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:u?"Update Segment":"Create Segment"})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Customer Segmentation Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Define Clear Criteria"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use specific, measurable criteria to create meaningful customer segments."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Regular Updates"}),e.jsx("p",{className:"text-sm opacity-90",children:"Regularly update segments based on changing customer behavior and preferences."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Personalized Marketing"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use segments to deliver personalized marketing messages and offers."})]})]})]})]})}function R9(){const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(""),[l]=b.useState([{name:"Awareness",events:["page_view","email_open"],color:"bg-blue-500",description:"Customer discovers your brand"},{name:"Interest",events:["product_view","email_click"],color:"bg-green-500",description:"Customer shows interest in products"},{name:"Consideration",events:["add_to_cart","sms_click"],color:"bg-yellow-500",description:"Customer considers purchasing"},{name:"Purchase",events:["purchase"],color:"bg-purple-500",description:"Customer makes a purchase"},{name:"Retention",events:["review_submit","chat_start"],color:"bg-pink-500",description:"Customer engages post-purchase"}]),[o,c]=b.useState(null),[d,u]=b.useState("journeys"),[p,h]=b.useState("7d"),[g,x]=b.useState("all"),f=async()=>{try{a(!0),i("");const F=await rt.getCustomerJourneys(p,g),E=Array.isArray(F)?F:(F==null?void 0:F.data)||[];s(E)}catch(F){console.error("Error loading journeys:",F),i("Failed to load journey data"),s([])}finally{a(!1)}};b.useEffect(()=>{f()},[p,g]),b.useEffect(()=>{Xe.isConnected()||Xe.connect();const F=Xe.subscribe("user-action-update",A=>{f()}),E=Xe.subscribe("page-view-update",A=>{f()}),k=Xe.subscribe("cart-update",A=>{f()});return()=>{F(),E(),k()}},[]);const m={totalCustomers:t.length,totalEvents:t.reduce((F,E)=>F+E.totalEvents,0),totalValue:t.reduce((F,E)=>F+E.totalValue,0),activeCustomers:t.filter(F=>F.status==="active").length},j=F=>{switch(F){case"page_view":return e.jsx(ct,{className:"h-4 w-4"});case"product_view":return e.jsx(ct,{className:"h-4 w-4"});case"add_to_cart":return e.jsx(Qs,{className:"h-4 w-4"});case"purchase":return e.jsx(Qs,{className:"h-4 w-4"});case"email_open":return e.jsx(ss,{className:"h-4 w-4"});case"email_click":return e.jsx(ss,{className:"h-4 w-4"});case"sms_click":return e.jsx(fs,{className:"h-4 w-4"});case"push_click":return e.jsx(Oa,{className:"h-4 w-4"});case"chat_start":return e.jsx(fs,{className:"h-4 w-4"});case"review_submit":return e.jsx(Wi,{className:"h-4 w-4"});default:return e.jsx(cs,{className:"h-4 w-4"})}},v=F=>{switch(F){case"page_view":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"product_view":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"add_to_cart":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"purchase":return"text-purple-600 bg-purple-100 dark:bg-purple-900 dark:text-purple-200";case"email_open":return"text-indigo-600 bg-indigo-100 dark:bg-indigo-900 dark:text-indigo-200";case"email_click":return"text-indigo-600 bg-indigo-100 dark:bg-indigo-900 dark:text-indigo-200";case"sms_click":return"text-cyan-600 bg-cyan-100 dark:bg-cyan-900 dark:text-cyan-200";case"push_click":return"text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-200";case"chat_start":return"text-pink-600 bg-pink-100 dark:bg-pink-900 dark:text-pink-200";case"review_submit":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},w=F=>{switch(F){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"inactive":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"at-risk":return"text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-200";case"churned":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},S=[{id:"journeys",label:"Customer Journeys",icon:fm},{id:"events",label:"Event Analytics",icon:zt},{id:"stages",label:"Journey Stages",icon:cs}];return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Customer Journey Tracking"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Track and analyze customer interactions across all touchpoints"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("select",{value:p,onChange:F=>h(F.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"1d",children:"Last 24 hours"}),e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"})]}),e.jsxs("button",{className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(wa,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Customers"}),e.jsx("p",{className:"text-3xl font-bold",children:m.totalCustomers})]}),e.jsx(ga,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Events"}),e.jsx("p",{className:"text-3xl font-bold",children:m.totalEvents})]}),e.jsx(zt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Value"}),e.jsxs("p",{className:"text-3xl font-bold",children:["",(m.totalValue/1e5).toFixed(1),"L"]})]}),e.jsx(Qs,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active Customers"}),e.jsx("p",{className:"text-3xl font-bold",children:m.activeCustomers})]}),e.jsx(Wi,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:S.map(F=>{const E=F.icon;return e.jsxs("button",{onClick:()=>u(F.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${d===F.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:F.label})]},F.id)})})}),e.jsxs("div",{className:"p-6",children:[d==="journeys"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Customer Journeys"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{value:g,onChange:F=>x(F.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"all",children:"All Events"}),e.jsx("option",{value:"page_view",children:"Page Views"}),e.jsx("option",{value:"product_view",children:"Product Views"}),e.jsx("option",{value:"add_to_cart",children:"Add to Cart"}),e.jsx("option",{value:"purchase",children:"Purchases"}),e.jsx("option",{value:"email_open",children:"Email Opens"})]}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(cl,{className:"h-4 w-4"})})]})]}),r?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Loading journey data..."})]}):n?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-600 dark:text-red-400",children:n}),e.jsx("button",{onClick:f,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})]}):t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No journey data found for the selected time range."})}):e.jsx("div",{className:"space-y-4",children:t.map(F=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-800 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-200 font-bold",children:F.customerName.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:F.customerName}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:F.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Value"}),e.jsxs("p",{className:"font-semibold text-green-600",children:["",F.totalValue.toLocaleString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Events"}),e.jsx("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:F.totalEvents})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w(F.status)}`,children:F.status})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex space-x-4 text-sm text-slate-600 dark:text-slate-400",children:[e.jsxs("span",{children:["First seen: ",new Date(F.firstSeen).toLocaleDateString()]}),e.jsxs("span",{children:["Last seen: ",new Date(F.lastSeen).toLocaleDateString()]})]}),e.jsx("button",{onClick:()=>c(F),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"View Journey"})]}),e.jsxs("div",{className:"flex space-x-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ct,{className:"h-4 w-4 text-blue-500"}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Website: ",F.touchpoints.website]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ss,{className:"h-4 w-4 text-indigo-500"}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Email: ",F.touchpoints.email]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(fs,{className:"h-4 w-4 text-cyan-500"}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["SMS: ",F.touchpoints.sms]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Oa,{className:"h-4 w-4 text-orange-500"}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Push: ",F.touchpoints.push]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(fs,{className:"h-4 w-4 text-pink-500"}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Chat: ",F.touchpoints.chat]})]})]})]},F.customerId))})]}),d==="events"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Event Analytics"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(F=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:`w-8 h-8 ${F.color} rounded-full flex items-center justify-center`,children:e.jsx("span",{className:"text-white font-bold text-sm",children:F.name.charAt(0)})}),e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:F.name})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:F.description}),e.jsx("div",{className:"space-y-2",children:F.events.map((E,k)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[j(E),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:E.replace("_"," ")})]},k))})]},F.name))})]}),d==="stages"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Journey Stage Analysis"}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Customer Journey Flow"}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Last 30 days"})]}),e.jsx("div",{className:"space-y-4",children:l.map((F,E)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-12 h-12 ${F.color} rounded-full flex items-center justify-center text-white font-bold`,children:E+1}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100",children:F.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:F.description})]})]}),E<l.length-1&&e.jsx("div",{className:"flex-1 mx-4",children:e.jsx("div",{className:"h-0.5 bg-slate-200 dark:bg-slate-700 relative",children:e.jsx("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 w-0 h-0 border-l-4 border-l-slate-300 dark:border-l-slate-600 border-t-2 border-t-transparent border-b-2 border-b-transparent"})})})]},F.name))})]})]})]})]}),o&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Journey Details: ",o.customerName]}),e.jsx("button",{onClick:()=>c(null),className:"text-2xl text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:""})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o.totalEvents}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Events"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",o.totalValue.toLocaleString()]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Value"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Math.ceil((new Date(o.lastSeen).getTime()-new Date(o.firstSeen).getTime())/(1e3*60*60*24))}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Days Active"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-3",children:"Event Timeline"}),e.jsx("div",{className:"space-y-3",children:o.events.map(F=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[e.jsx("div",{className:`p-2 rounded-full ${v(F.eventType)}`,children:j(F.eventType)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100",children:F.eventName}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:F.timestamp}),F.details.product&&e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Product: ",F.details.product]}),F.details.value&&e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Value: ",F.details.value.toLocaleString()]})]})]},F.id))})]})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Customer Journey Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Track All Touchpoints"}),e.jsx("p",{className:"text-sm opacity-90",children:"Monitor customer interactions across all channels to get a complete picture."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Identify Pain Points"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use journey data to identify where customers drop off and optimize those areas."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Personalize Experiences"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use journey insights to deliver personalized experiences at each stage."})]})]})]})]})}function L9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState(!0),[c,d]=b.useState("");b.useEffect(()=>{u()},[]);const u=async()=>{try{o(!0),d("");const v=await rt.getActionableInsights().catch(()=>[]);a(Array.isArray(v)?v:[]),s([]),i([])}catch(v){console.error("Failed to load analytics data:",v),d("Failed to load analytics data")}finally{o(!1)}},[p,h]=b.useState("overview"),[g,x]=b.useState("30d");if(l)return e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading analytics..."})]})})});if(c)return e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]}),e.jsx("button",{onClick:u,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})});const f=v=>{switch(v){case"high":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";case"medium":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},m=v=>{switch(v){case"excellent":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"good":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"average":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"poor":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},j=[{id:"overview",label:"Overview",icon:Ss},{id:"insights",label:"Actionable Insights",icon:ds},{id:"performance",label:"Performance",icon:zt}];return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Actionable Analytics"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Data-driven insights to optimize your business performance"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(zt,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("select",{value:g,onChange:v=>x(v.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]}),e.jsxs("button",{className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(wa,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.length===0?e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx(Ss,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No metrics available"})]}):t.map(v=>{const w=v.icon;return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:v.name}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:v.name==="Revenue"?`${(v.value/1e5).toFixed(1)}L`:v.name==="Conversion Rate"?`${v.value}%`:v.name==="Customer Retention"?`${v.value}%`:`${v.value}`})]}),e.jsx("div",{className:`p-3 rounded-full ${v.color.replace("text-","bg-").replace("-600","-100")} dark:bg-opacity-20`,children:e.jsx(w,{className:`h-6 w-6 ${v.color}`})})]}),e.jsxs("div",{className:"mt-4 flex items-center",children:[e.jsxs("span",{className:`text-sm font-medium ${v.trend==="up"?"text-green-600":v.trend==="down"?"text-red-600":"text-gray-600"}`,children:[v.trend==="up"?"":v.trend==="down"?"":""," ",Math.abs(v.change),"%"]}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400 ml-2",children:"vs last period"})]})]},v.id)})}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:j.map(v=>{const w=v.icon;return e.jsxs("button",{onClick:()=>h(v.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${p===v.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{children:v.label})]},v.id)})})}),e.jsxs("div",{className:"p-6",children:[p==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Business Overview"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Revenue Trends"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Monthly Revenue"}),e.jsx("span",{className:"font-semibold text-green-600",children:"2.5M"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Growth Rate"}),e.jsx("span",{className:"font-semibold text-green-600",children:"+12.5%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Target Achievement"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"95%"})]})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Customer Metrics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"New Customers"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"1,250"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Retention Rate"}),e.jsx("span",{className:"font-semibold text-green-600",children:"78.5%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Churn Rate"}),e.jsx("span",{className:"font-semibold text-red-600",children:"5.2%"})]})]})]})]})]}),p==="insights"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Actionable Insights"}),e.jsx("div",{className:"space-y-4",children:r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ds,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No insights available"})]}):r.map(v=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:v.title}),e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${f(v.impact)}`,children:[v.impact," impact"]}),e.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200",children:["Priority ",v.priority]})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-3",children:v.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Category: ",e.jsx("span",{className:"font-semibold",children:v.category})]}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Estimated Value: ",e.jsxs("span",{className:"font-semibold text-green-600",children:["",(v.estimatedValue/1e5).toFixed(1),"L"]})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"h-4 w-4 text-slate-400"}),e.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Recommended Action: ",v.action]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Implement"}),e.jsx("button",{className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-sm",children:"Learn More"})]})]})]},v.id))})]}),p==="performance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Performance Analysis"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Metric"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Current"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Previous"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Benchmark"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:n.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-12 text-center",children:[e.jsx(zt,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No performance data available"})]})}):n.map((v,w)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:v.metric}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:v.metric.includes("Cost")||v.metric.includes("Value")?`${v.current}`:`${v.current}%`}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:v.metric.includes("Cost")||v.metric.includes("Value")?`${v.previous}`:`${v.previous}%`}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:v.metric.includes("Cost")||v.metric.includes("Value")?`${v.benchmark}`:`${v.benchmark}%`}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${m(v.status)}`,children:v.status})})]},w))})]})})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Actionable Analytics Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Focus on Actionable Metrics"}),e.jsx("p",{className:"text-sm opacity-90",children:"Track metrics that directly impact business decisions and can be acted upon."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Set Clear Benchmarks"}),e.jsx("p",{className:"text-sm opacity-90",children:"Compare performance against industry standards and historical data."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Regular Review Cycles"}),e.jsx("p",{className:"text-sm opacity-90",children:"Schedule regular reviews to identify trends and take corrective actions."})]})]})]})]})}function O9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState("features");b.useEffect(()=>{l()},[]);const l=async()=>{try{const p=(()=>{if(typeof window<"u"){const x=window.location.hostname;if(x==="thenefol.com"||x==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),[h,g]=await Promise.all([fetch(`${p}/api/ai/features`),fetch(`${p}/api/ai/tasks`)]);if(h.ok){const x=await h.json();s(x)}if(g.ok){const x=await g.json();a(x)}}catch(u){console.error("Failed to load AI data:",u)}},o=u=>{switch(u){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"inactive":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";case"learning":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"running":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"completed":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"failed":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";case"pending":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},c=u=>{switch(u){case"high":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";case"medium":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},d=[{id:"features",label:"AI Features",icon:Pf},{id:"tasks",label:"AI Tasks",icon:Gl},{id:"insights",label:"AI Insights",icon:u2}];return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"AI Box"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Intelligent automation and AI-powered features for your store"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{className:"btn-secondary flex items-center space-x-2",children:[e.jsx(ws,{className:"h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(Fl,{className:"h-4 w-4"}),e.jsx("span",{children:"Enable AI"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active AI Features"}),e.jsx("p",{className:"text-3xl font-bold",children:t.filter(u=>u.status==="active").length})]}),e.jsx(Pf,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"AI Accuracy"}),e.jsxs("p",{className:"text-3xl font-bold",children:[t.length>0?(t.reduce((u,p)=>{var h;return u+(((h=p.metrics)==null?void 0:h.accuracy)||0)},0)/t.length).toFixed(1):"0.0","%"]})]}),e.jsx(ds,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Tasks Completed"}),e.jsx("p",{className:"text-3xl font-bold",children:r.filter(u=>u.status==="completed").length})]}),e.jsx(Gl,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Performance Boost"}),e.jsxs("p",{className:"text-3xl font-bold",children:["+",t.length>0?(t.reduce((u,p)=>{var h;return u+(((h=p.metrics)==null?void 0:h.improvement)||0)},0)/t.length).toFixed(1):"0.0","%"]})]}),e.jsx(zt,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:d.map(u=>{const p=u.icon;return e.jsxs("button",{onClick:()=>i(u.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${n===u.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx("span",{children:u.label})]},u.id)})})}),e.jsxs("div",{className:"p-6",children:[n==="features"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"AI Features"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(u=>{var p,h,g;return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:u.name}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${o(u.status)}`,children:u.status}),e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${c(u.impact)}`,children:[u.impact," impact"]})]})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:u.description}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Accuracy"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[((p=u.metrics)==null?void 0:p.accuracy)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Usage"}),e.jsxs("span",{className:"font-semibold text-blue-600",children:[((h=u.metrics)==null?void 0:h.usage)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Improvement"}),e.jsxs("span",{className:"font-semibold text-purple-600",children:["+",((g=u.metrics)==null?void 0:g.improvement)||0,"%"]})]})]}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsx("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Configure"}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:u.status==="active"?e.jsx(Cn,{className:"h-4 w-4"}):e.jsx(Wa,{className:"h-4 w-4"})})]})]},u.id)})})]}),n==="tasks"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"AI Tasks"}),e.jsx("div",{className:"space-y-4",children:r.map(u=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:u.name}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:u.description})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${o(u.status)}`,children:u.status})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Progress"}),e.jsxs("span",{className:"font-semibold",children:[u.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${u.progress}%`}})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Estimated Time"}),e.jsx("span",{className:"font-semibold",children:u.estimatedTime})]})]}),u.results&&e.jsxs("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900 rounded-lg",children:[e.jsx("h5",{className:"font-semibold text-green-800 dark:text-green-200 mb-2",children:"Results"}),e.jsx("div",{className:"space-y-1 text-sm",children:Object.entries(u.results).map(([p,h])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-green-700 dark:text-green-300",children:[p.replace(/([A-Z])/g," $1").replace(/^./,g=>g.toUpperCase()),":"]}),e.jsx("span",{className:"font-semibold text-green-800 dark:text-green-200",children:typeof h=="number"?p.includes("Increase")?`+${h}%`:h.toLocaleString():String(h)})]},p))})]})]},u.id))})]}),n==="insights"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"AI Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Performance Insights"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"AI Efficiency"}),e.jsx("span",{className:"font-semibold text-green-600",children:"94.2%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cost Reduction"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"23.5%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Time Saved"}),e.jsx("span",{className:"font-semibold text-purple-600",children:"45 hours/week"})]})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Recommendations"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Enable dynamic pricing for skincare products to increase revenue by 15%"})}),e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-800 dark:text-green-200",children:"Implement AI chatbot for customer support to reduce response time"})}),e.jsx("div",{className:"p-3 bg-purple-50 dark:bg-purple-900 rounded-lg",children:e.jsx("p",{className:"text-sm text-purple-800 dark:text-purple-200",children:"Use AI for inventory prediction to reduce stockouts by 30%"})})]})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"AI Box Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Start Small"}),e.jsx("p",{className:"text-sm opacity-90",children:"Begin with simple AI features and gradually expand to more complex automation."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Monitor Performance"}),e.jsx("p",{className:"text-sm opacity-90",children:"Regularly track AI accuracy and performance to ensure optimal results."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Continuous Learning"}),e.jsx("p",{className:"text-sm opacity-90",children:"Allow AI systems to learn from new data and improve over time."})]})]})]})]})}function I9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState("");b.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0),o("");const w=await rt.getJourneyFunnels().catch(()=>[]);s([]),a([])}catch(w){console.error("Failed to load funnel data:",w),o("Failed to load funnel data")}finally{i(!1)}},[d,u]=b.useState("30d"),[p,h]=b.useState("overview"),g=t.length>0?t[0].visitors:0,x=t.length>0?t[t.length-1].conversions:0,f=g>0?x/g*100:0,m=w=>{switch(w){case"up":return"";case"down":return"";case"stable":return"";default:return""}},j=w=>{switch(w){case"up":return"text-green-600";case"down":return"text-red-600";case"stable":return"text-gray-600";default:return"text-gray-600"}},v=[{id:"overview",label:"Funnel Overview",icon:Ss},{id:"analysis",label:"Stage Analysis",icon:ds},{id:"optimization",label:"Optimization",icon:zt}];return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Customer Journey Funnel"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Track customer progression through each stage of the journey"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("select",{value:d,onChange:w=>u(w.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]}),e.jsxs("button",{className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(wa,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Visitors"}),e.jsx("p",{className:"text-3xl font-bold",children:g.toLocaleString()})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Conversions"}),e.jsx("p",{className:"text-3xl font-bold",children:x.toLocaleString()})]}),e.jsx(ds,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Overall Conversion"}),e.jsxs("p",{className:"text-3xl font-bold",children:[f.toFixed(1),"%"]})]}),e.jsx(zt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Drop-off Rate"}),e.jsxs("p",{className:"text-3xl font-bold",children:[(100-f).toFixed(1),"%"]})]}),e.jsx(Ju,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:v.map(w=>{const S=w.icon;return e.jsxs("button",{onClick:()=>h(w.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${p===w.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(S,{className:"h-4 w-4"}),e.jsx("span",{children:w.label})]},w.id)})})}),e.jsxs("div",{className:"p-6",children:[p==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Customer Journey Funnel"}),e.jsx("div",{className:"space-y-4",children:t.map((w,S)=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex items-center space-x-4 w-full",children:[e.jsx("div",{className:`w-12 h-12 ${w.color} rounded-full flex items-center justify-center text-white font-bold`,children:S+1}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:w.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:[w.visitors.toLocaleString()," visitors"]}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:[w.conversions.toLocaleString()," conversions"]}),e.jsxs("span",{className:"font-semibold text-green-600",children:[w.conversionRate,"% conversion"]})]})]}),e.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:e.jsx("div",{className:`${w.color} h-3 rounded-full transition-all duration-300`,style:{width:`${w.conversionRate}%`}})})]})]})}),S<t.length-1&&e.jsx("div",{className:"flex justify-center my-4",children:e.jsx("div",{className:"w-0.5 h-8 bg-slate-300 dark:bg-slate-600 relative",children:e.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-l-slate-300 dark:border-l-slate-600 border-t-2 border-t-transparent border-b-2 border-b-transparent"})})})]},w.id))})]}),p==="analysis"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Stage Analysis"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Stage"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Visitors"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Conversions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Conversion Rate"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Trend"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:r.map((w,S)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:w.stage}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:w.visitors.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:w.conversions.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:e.jsxs("span",{className:"font-semibold text-green-600",children:[w.conversionRate,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("span",{className:`font-semibold ${j(w.trend)}`,children:[m(w.trend)," ",w.previousRate,"%"]})})]},S))})]})})]}),p==="optimization"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Optimization Recommendations"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border border-red-200 dark:border-red-700 rounded-lg p-6 bg-red-50 dark:bg-red-900",children:[e.jsx("h4",{className:"font-semibold text-red-900 dark:text-red-100 mb-3",children:"High Drop-off: Consideration Stage"}),e.jsx("p",{className:"text-red-700 dark:text-red-300 mb-4",children:"The consideration stage has a 50% drop-off rate. Customers are losing interest before making a purchase decision."}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm text-red-700 dark:text-red-300",children:"Add product comparison tools"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wi,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm text-red-700 dark:text-red-300",children:"Implement wishlist functionality"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qs,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm text-red-700 dark:text-red-300",children:"Add urgency indicators (limited stock)"})]})]})]}),e.jsxs("div",{className:"border border-yellow-200 dark:border-yellow-700 rounded-lg p-6 bg-yellow-50 dark:bg-yellow-900",children:[e.jsx("h4",{className:"font-semibold text-yellow-900 dark:text-yellow-100 mb-3",children:"Medium Drop-off: Interest Stage"}),e.jsx("p",{className:"text-yellow-700 dark:text-yellow-300 mb-4",children:"The interest stage shows 20% drop-off. Improve engagement with better content and personalization."}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ds,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Personalize product recommendations"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(cs,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Send follow-up emails with reviews"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ss,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Add social proof and testimonials"})]})]})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Journey Funnel Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Identify Bottlenecks"}),e.jsx("p",{className:"text-sm opacity-90",children:"Focus on stages with the highest drop-off rates to maximize impact."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"A/B Test Changes"}),e.jsx("p",{className:"text-sm opacity-90",children:"Test different approaches to optimize each stage of the funnel."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Monitor Continuously"}),e.jsx("p",{className:"text-sm opacity-90",children:"Track funnel performance regularly to identify new opportunities."})]})]})]})]})}function M9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState("");b.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0),o("");const x=await rt.getPersonalizationRules().catch(()=>[]);s(Array.isArray(x)?x:[])}catch(x){console.error("Failed to load personalization data:",x),o("Failed to load personalization data")}finally{i(!1)}},[d,u]=b.useState("rules"),p=x=>{switch(x){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"inactive":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";case"testing":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"paused":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"draft":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},h=x=>{switch(x){case"product_recommendation":return e.jsx(Qs,{className:"h-4 w-4"});case"content_personalization":return e.jsx(ct,{className:"h-4 w-4"});case"pricing":return e.jsx(ds,{className:"h-4 w-4"});case"email":return e.jsx(Ju,{className:"h-4 w-4"});default:return e.jsx(Fl,{className:"h-4 w-4"})}},g=[{id:"rules",label:"Personalization Rules",icon:ds},{id:"campaigns",label:"Campaigns",icon:Ss},{id:"insights",label:"Insights",icon:Fl}];return n?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading personalization data..."})]})})}):l?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:l})]}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"AI Personalization"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Deliver personalized experiences using AI-powered insights"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:c,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(Fl,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{className:"btn-secondary flex items-center space-x-2",children:[e.jsx(ws,{className:"h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{className:"btn-primary flex items-center space-x-2",children:[e.jsx(Fl,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Rule"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active Rules"}),e.jsx("p",{className:"text-3xl font-bold",children:t.filter(x=>x.status==="active").length})]}),e.jsx(ds,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Impressions"}),e.jsx("p",{className:"text-3xl font-bold",children:t.reduce((x,f)=>x+f.performance.impressions,0).toLocaleString()})]}),e.jsx(ct,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Conversions"}),e.jsx("p",{className:"text-3xl font-bold",children:t.reduce((x,f)=>x+f.performance.conversions,0).toLocaleString()})]}),e.jsx(Ju,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Revenue Generated"}),e.jsxs("p",{className:"text-3xl font-bold",children:["",(t.reduce((x,f)=>x+f.performance.revenue,0)/1e5).toFixed(1),"L"]})]}),e.jsx(Ss,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:g.map(x=>{const f=x.icon;return e.jsxs("button",{onClick:()=>u(x.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${d===x.id?"":"border-transparent"}`,style:d===x.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("span",{children:x.label})]},x.id)})})}),e.jsxs("div",{className:"p-6",children:[d==="rules"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Personalization Rules"}),e.jsx("div",{className:"space-y-4",children:t.map(x=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:x.name}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:x.description})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${p(x.status)}`,children:x.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Target Audience"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:x.targetAudience})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Conditions"}),e.jsx("ul",{className:"text-sm text-slate-600 dark:text-slate-400",children:x.conditions.map((f,m)=>e.jsxs("li",{children:[" ",f]},m))})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Actions"}),e.jsx("ul",{className:"text-sm text-slate-600 dark:text-slate-400",children:x.actions.map((f,m)=>e.jsxs("li",{children:[" ",f]},m))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:x.performance.impressions.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Impressions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.performance.clicks.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Clicks"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:x.performance.conversions.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Conversions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["",(x.performance.revenue/1e5).toFixed(1),"L"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Edit Rule"}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:x.status==="active"?e.jsx(Cn,{className:"h-4 w-4"}):e.jsx(Wa,{className:"h-4 w-4"})}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(Fb,{className:"h-4 w-4"})})]})]},x.id))})]}),d==="campaigns"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Personalization Campaigns"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(x=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[h(x.type),e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:x.name})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${p(x.status)}`,children:x.status})]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:["Audience: ",x.audience]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Reach"}),e.jsx("span",{className:"font-semibold text-blue-600",children:x.performance.reach.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Engagement"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[x.performance.engagement,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Conversion"}),e.jsxs("span",{className:"font-semibold text-purple-600",children:[x.performance.conversion,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"}),e.jsxs("span",{className:"font-semibold text-orange-600",children:["",(x.performance.revenue/1e5).toFixed(1),"L"]})]})]}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsx("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"View Details"}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:x.status==="active"?e.jsx(Cn,{className:"h-4 w-4"}):e.jsx(Wa,{className:"h-4 w-4"})})]})]},x.id))})]}),d==="insights"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Personalization Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Top Performing Rules"}),e.jsx("div",{className:"space-y-3",children:t.sort((x,f)=>f.performance.revenue-x.performance.revenue).slice(0,3).map((x,f)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:f+1})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100",children:x.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[x.performance.conversions," conversions"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-green-600",children:["",(x.performance.revenue/1e5).toFixed(1),"L"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]})]},x.id))})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Personalization Impact"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Revenue Increase"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"+35.2%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Conversion Rate"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"+18.7%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Customer Engagement"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"+42.1%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Average Order Value"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"+25.8%"})]})]})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"AI Personalization Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Start with Clear Goals"}),e.jsx("p",{className:"text-sm opacity-90",children:"Define specific objectives for each personalization rule to measure success effectively."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Test and Iterate"}),e.jsx("p",{className:"text-sm opacity-90",children:"Continuously test different personalization approaches and optimize based on results."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Respect Privacy"}),e.jsx("p",{className:"text-sm opacity-90",children:"Ensure personalization respects customer privacy and complies with regulations."})]})]})]})]})}function B9(){const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(""),[l,o]=b.useState("audiences"),[c,d]=b.useState(!1),[u,p]=b.useState(null);b.useEffect(()=>{h()},[]);const h=async()=>{try{a(!0),i("");const v=await rt.getCustomAudiences().catch(()=>[]);s(Array.isArray(v)?v:[])}catch(v){console.error("Failed to load audiences data:",v),i("Failed to load audiences data")}finally{a(!1)}},g={totalAudiences:t.length,totalSize:t.reduce((v,w)=>v+w.size,0),activeAudiences:t.filter(v=>v.status==="active").length,totalRevenue:t.reduce((v,w)=>v+w.performance.revenue,0)},x=v=>{switch(v){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"inactive":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";case"draft":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},f=v=>{switch(v){case"equals":return"equals";case"not_equals":return"does not equal";case"contains":return"contains";case"not_contains":return"does not contain";case"greater_than":return"is greater than";case"less_than":return"is less than";case"between":return"is between";case"in":return"is in";case"not_in":return"is not in";default:return v}},m=v=>{switch(v){case"category_preference":return"Category Preference";case"total_orders":return"Total Orders";case"total_spent":return"Total Spent";case"cart_status":return"Cart Status";case"cart_value":return"Cart Value";case"registration_date":return"Registration Date";case"last_order_date":return"Last Order Date";case"location":return"Location";case"age":return"Age";case"gender":return"Gender";default:return v}},j=[{id:"audiences",label:"Custom Audiences",icon:Pt},{id:"performance",label:"Performance",icon:Ss},{id:"insights",label:"Insights",icon:zt}];return r?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading audiences..."})]})})}):n?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:n})]}),e.jsx("button",{onClick:h,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Custom Audience Targeting"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Create and manage targeted customer audiences for personalized marketing"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:h,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(ds,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Audience"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Audiences"}),e.jsx("p",{className:"text-3xl font-bold",children:g.totalAudiences})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Size"}),e.jsx("p",{className:"text-3xl font-bold",children:g.totalSize.toLocaleString()})]}),e.jsx(ds,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active Audiences"}),e.jsx("p",{className:"text-3xl font-bold",children:g.activeAudiences})]}),e.jsx(zt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Revenue Generated"}),e.jsxs("p",{className:"text-3xl font-bold",children:["",(g.totalRevenue/1e5).toFixed(1),"L"]})]}),e.jsx(Ss,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:j.map(v=>{const w=v.icon;return e.jsxs("button",{onClick:()=>o(v.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${l===v.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{children:v.label})]},v.id)})})}),e.jsxs("div",{className:"p-6",children:[l==="audiences"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Custom Audiences"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(cl,{className:"h-4 w-4"})}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(wa,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(v=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:v.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${x(v.status)}`,children:v.status})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:v.description}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Size:"}),e.jsx("span",{className:"font-semibold",children:v.size.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Engagement:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[v.performance.engagement,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Conversion:"}),e.jsxs("span",{className:"font-semibold text-blue-600",children:[v.performance.conversion,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Revenue:"}),e.jsxs("span",{className:"font-semibold text-purple-600",children:["",(v.performance.revenue/1e3).toFixed(0),"K"]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:v.tags.map((w,S)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded",children:w},S))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>p(v),className:"flex-1 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"View"}),e.jsx("button",{className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(jr,{className:"h-4 w-4"})}),e.jsx("button",{className:"px-3 py-1 border border-red-300 dark:border-red-600 text-red-700 dark:text-red-300 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},v.id))})]}),l==="performance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Audience Performance"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Audience"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Size"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Reach"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Engagement"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Conversion"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Revenue"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:t.map(v=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:v.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:v.size.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:v.performance.reach.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:e.jsxs("span",{className:"font-semibold text-green-600",children:[v.performance.engagement,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:e.jsxs("span",{className:"font-semibold text-blue-600",children:[v.performance.conversion,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:e.jsxs("span",{className:"font-semibold text-purple-600",children:["",(v.performance.revenue/1e3).toFixed(0),"K"]})})]},v.id))})]})})]}),l==="insights"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Audience Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Top Performing Audiences"}),e.jsx("div",{className:"space-y-3",children:t.sort((v,w)=>w.performance.revenue-v.performance.revenue).slice(0,3).map((v,w)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:w+1})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100",children:v.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[v.size.toLocaleString()," members"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-green-600",children:["",(v.performance.revenue/1e3).toFixed(0),"K"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]})]},v.id))})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Audience Analytics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Audiences"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:g.totalAudiences})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Active Audiences"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:g.activeAudiences})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Members"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:g.totalSize.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Revenue"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["",(g.totalRevenue/1e5).toFixed(1),"L"]})]})]})]})]})]})]})]}),u&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Audience Details: ",u.name]}),e.jsx("button",{onClick:()=>p(null),className:"text-2xl text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:""})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Description"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:u.description})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Audience Criteria"}),e.jsx("div",{className:"space-y-2",children:u.criteria.map((v,w)=>e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:m(v.field)}),e.jsx("span",{className:"mx-2 text-slate-600 dark:text-slate-400",children:f(v.operator)}),e.jsxs("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:[v.value,v.value2&&` and ${v.value2}`]})]},w))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Performance Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u.performance.reach.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Reach"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[u.performance.engagement,"%"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Engagement"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[u.performance.conversion,"%"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Conversion"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["",(u.performance.revenue/1e3).toFixed(0),"K"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]})]})]})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Custom Audience Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Define Clear Criteria"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use specific, measurable criteria to create meaningful audience segments."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Test and Optimize"}),e.jsx("p",{className:"text-sm opacity-90",children:"Continuously test audience performance and optimize targeting criteria."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Personalize Content"}),e.jsx("p",{className:"text-sm opacity-90",children:"Create personalized content and offers for each audience segment."})]})]})]})]})}function $9(){const[t]=b.useState([{id:"1",name:"Website",type:"website",status:"active",metrics:{reach:5e4,engagement:12.5,conversion:3.2,revenue:8e5},icon:o4,color:"bg-blue-500"},{id:"2",name:"Mobile App",type:"mobile",status:"active",metrics:{reach:25e3,engagement:18.3,conversion:5.7,revenue:45e4},icon:pm,color:"bg-green-500"},{id:"3",name:"Email Marketing",type:"email",status:"active",metrics:{reach:3e4,engagement:15.2,conversion:4.8,revenue:35e4},icon:ss,color:"bg-purple-500"},{id:"4",name:"SMS Marketing",type:"sms",status:"active",metrics:{reach:15e3,engagement:22.1,conversion:8.3,revenue:2e5},icon:fs,color:"bg-orange-500"},{id:"5",name:"Push Notifications",type:"push",status:"active",metrics:{reach:2e4,engagement:16.7,conversion:6.2,revenue:28e4},icon:Oa,color:"bg-pink-500"},{id:"6",name:"Live Chat",type:"chat",status:"active",metrics:{reach:8e3,engagement:45.2,conversion:12.8,revenue:15e4},icon:fs,color:"bg-cyan-500"}]),[s]=b.useState([{id:"1",name:"Holiday Sale Campaign",description:"Multi-channel holiday promotion across all touchpoints",channels:["website","mobile","email","sms","push"],status:"active",startDate:"2024-01-15",endDate:"2024-01-31",budget:1e5,performance:{impressions:15e4,clicks:25e3,conversions:3500,revenue:12e5}},{id:"2",name:"New Product Launch",description:"Launch campaign for new skincare line",channels:["website","email","push","chat"],status:"active",startDate:"2024-01-20",endDate:"2024-02-05",budget:75e3,performance:{impressions:8e4,clicks:12e3,conversions:1800,revenue:65e4}},{id:"3",name:"Customer Retention",description:"Retention campaign for at-risk customers",channels:["email","sms","push"],status:"paused",startDate:"2024-01-10",endDate:"2024-01-25",budget:5e4,performance:{impressions:4e4,clicks:6e3,conversions:900,revenue:3e5}}]),[r,a]=b.useState("overview"),n={totalChannels:t.length,activeChannels:t.filter(o=>o.status==="active").length,totalReach:t.reduce((o,c)=>o+c.metrics.reach,0),totalRevenue:t.reduce((o,c)=>o+c.metrics.revenue,0)},i=o=>{switch(o){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"inactive":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";case"maintenance":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"paused":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"draft":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},l=[{id:"overview",label:"Channel Overview",icon:Yn},{id:"campaigns",label:"Campaigns",icon:Ss},{id:"analytics",label:"Analytics",icon:zt}];return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Omni Channel Marketing"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Manage and optimize customer interactions across all channels"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(ws,{className:"h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(Yn,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Campaign"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Channels"}),e.jsx("p",{className:"text-3xl font-bold",children:n.totalChannels})]}),e.jsx(Yn,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active Channels"}),e.jsx("p",{className:"text-3xl font-bold",children:n.activeChannels})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Reach"}),e.jsxs("p",{className:"text-3xl font-bold",children:[(n.totalReach/1e3).toFixed(0),"K"]})]}),e.jsx(zt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Revenue"}),e.jsxs("p",{className:"text-3xl font-bold",children:["",(n.totalRevenue/1e5).toFixed(1),"L"]})]}),e.jsx(Ss,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:l.map(o=>{const c=o.icon;return e.jsxs("button",{onClick:()=>a(o.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${r===o.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(c,{className:"h-4 w-4"}),e.jsx("span",{children:o.label})]},o.id)})})}),e.jsxs("div",{className:"p-6",children:[r==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Channel Performance"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(o=>{const c=o.icon;return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 ${o.color} rounded-full flex items-center justify-center`,children:e.jsx(c,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:o.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:o.type})]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${i(o.status)}`,children:o.status})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Reach"}),e.jsx("span",{className:"font-semibold text-blue-600",children:o.metrics.reach.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Engagement"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[o.metrics.engagement,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Conversion"}),e.jsxs("span",{className:"font-semibold text-purple-600",children:[o.metrics.conversion,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"}),e.jsxs("span",{className:"font-semibold text-orange-600",children:["",(o.metrics.revenue/1e3).toFixed(0),"K"]})]})]}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsx("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Configure"}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:o.status==="active"?e.jsx(Cn,{className:"h-4 w-4"}):e.jsx(Wa,{className:"h-4 w-4"})})]})]},o.id)})})]}),r==="campaigns"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Omni Channel Campaigns"}),e.jsx("div",{className:"space-y-4",children:s.map(o=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:o.name}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:o.description})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${i(o.status)}`,children:o.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Channels"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:o.channels.map((c,d)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded",children:c},d))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Campaign Period"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[new Date(o.startDate).toLocaleDateString()," - ",new Date(o.endDate).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Budget: ",o.budget.toLocaleString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o.performance.impressions.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Impressions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:o.performance.clicks.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Clicks"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:o.performance.conversions.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Conversions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["",(o.performance.revenue/1e5).toFixed(1),"L"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"View Details"}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:o.status==="active"?e.jsx(Cn,{className:"h-4 w-4"}):e.jsx(Wa,{className:"h-4 w-4"})}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Edit"})]})]},o.id))})]}),r==="analytics"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Omni Channel Analytics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Channel Performance Comparison"}),e.jsx("div",{className:"space-y-3",children:t.sort((o,c)=>c.metrics.conversion-o.metrics.conversion).slice(0,3).map((o,c)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:c+1})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100",children:o.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[o.metrics.reach.toLocaleString()," reach"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-green-600",children:[o.metrics.conversion,"%"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Conversion"})]})]},o.id))})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Cross-Channel Insights"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cross-Channel Engagement"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"+28.5%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Customer Journey Length"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"4.2 touchpoints"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Channel Synergy"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"High"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Attribution Accuracy"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"92.3%"})]})]})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Omni Channel Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Consistent Experience"}),e.jsx("p",{className:"text-sm opacity-90",children:"Ensure consistent messaging and branding across all customer touchpoints."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Data Integration"}),e.jsx("p",{className:"text-sm opacity-90",children:"Integrate data from all channels to get a complete customer view."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Channel Optimization"}),e.jsx("p",{className:"text-sm opacity-90",children:"Continuously optimize each channel while maintaining cross-channel synergy."})]})]})]})]})}const H0={payment:li,email:ss,sms:fs,push:Oa,analytics:Yn,social:pm,shipping:Qs,database:E2,ai:Pb,other:ws},G0={payment:"bg-green-500",email:"bg-blue-500",sms:"bg-purple-500",push:"bg-orange-500",analytics:"bg-indigo-500",social:"bg-pink-500",shipping:"bg-yellow-500",database:"bg-cyan-500",ai:"bg-emerald-500",other:"bg-gray-500"};function U9(){const{notify:t}=mr(),[s,r]=b.useState([]),[a,n]=b.useState(!0),[i,l]=b.useState(null),[o,c]=b.useState("overview"),[d,u]=b.useState(null),[p,h]=b.useState({}),[g,x]=b.useState(null),[f,m]=b.useState(null),[j,v]=b.useState(!1),[w,S]=b.useState({name:"",description:"",category:"other",status:"inactive",fields:[]});b.useEffect(()=>{F()},[]);const F=async()=>{try{n(!0);const P=await rt.getAPIConfigurations(),ee=(Array.isArray(P)?P:(P==null?void 0:P.data)||[]).map(M=>({...M,fields:M.fields||[],lastUpdated:M.lastUpdated||M.updated_at||M.created_at||new Date().toISOString()}));r(ee)}catch(P){console.error("Failed to load API configurations:",P),t("error",P.message||"Failed to load API configurations")}finally{n(!1)}},E=async P=>{try{l(P.id);const W={id:P.id,name:P.name,description:P.description,category:P.category,status:P.status,fields:P.fields};if(P.id&&P.id!=="new")await rt.updateAPIConfiguration(P.id,W),t("success",`${P.name} updated successfully`);else{const ee=await rt.createAPIConfiguration(W);t("success",`${P.name} created successfully`),ee.data&&(m(null),v(!1))}await F()}catch(W){console.error("Failed to save configuration:",W),t("error",W.message||"Failed to save configuration")}finally{l(null)}},k=async P=>{if(confirm("Are you sure you want to delete this API configuration?"))try{await rt.deleteAPIConfiguration(P),t("success","API configuration deleted successfully"),await F(),(d==null?void 0:d.id)===P&&u(null),(f==null?void 0:f.id)===P&&m(null)}catch(W){console.error("Failed to delete configuration:",W),t("error",W.message||"Failed to delete configuration")}},A=(P,W,ee)=>{r(M=>M.map(U=>U.id===P?{...U,fields:U.fields.map(q=>q.id===W?{...q,value:ee}:q)}:U)),(f==null?void 0:f.id)===P&&m(M=>M?{...M,fields:M.fields.map(U=>U.id===W?{...U,value:ee}:U)}:null)},y=(P,W)=>{f&&m({...f,[P]:W})},N=()=>{S(P=>({...P,fields:[...P.fields||[],{id:`field_${Date.now()}`,name:"",label:"",type:"text",value:"",required:!1,sensitive:!1}]}))},R=(P,W)=>{S(ee=>({...ee,fields:(ee.fields||[]).map(M=>M.id===P?{...M,...W}:M)}))},T=P=>{S(W=>({...W,fields:(W.fields||[]).filter(ee=>ee.id!==P)}))},z=async()=>{if(!w.name||!w.category){t("error","Name and category are required");return}try{l("new");const P={name:w.name,description:w.description||"",category:w.category,status:w.status||"inactive",fields:w.fields||[]};await rt.createAPIConfiguration(P),t("success",`${w.name} created successfully`),v(!1),S({name:"",description:"",category:"other",status:"inactive",fields:[]}),await F()}catch(P){console.error("Failed to create configuration:",P),t("error",P.message||"Failed to create configuration")}finally{l(null)}},L=async(P,W="connection")=>{try{const ee=await rt.testAPIConfiguration(P,W);t("success",ee.message||"API test completed successfully")}catch(ee){t("error",ee.message||"API test failed")}},O=P=>{switch(P){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"inactive":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";case"testing":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},V=P=>{h(W=>({...W,[P]:!W[P]}))},Z=async(P,W)=>{try{await navigator.clipboard.writeText(P),x(W),setTimeout(()=>x(null),2e3)}catch(ee){console.error("Failed to copy:",ee)}},D=[{id:"overview",label:"API Overview",icon:ws},{id:"configs",label:"Configurations",icon:qu},{id:"test",label:"Test APIs",icon:Df}];return a?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading API configurations..."})]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"API & Code Manager"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Manage all your API keys, codes, and integration settings"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Service"})]}),e.jsxs("button",{className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(D2,{className:"h-4 w-4"}),e.jsx("span",{children:"Export Config"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total APIs"}),e.jsx("p",{className:"text-3xl font-bold",children:s.length})]}),e.jsx(ws,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active APIs"}),e.jsx("p",{className:"text-3xl font-bold",children:s.filter(P=>P.status==="active").length})]}),e.jsx(qu,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Testing APIs"}),e.jsx("p",{className:"text-3xl font-bold",children:s.filter(P=>P.status==="testing").length})]}),e.jsx(Df,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Sensitive Keys"}),e.jsx("p",{className:"text-3xl font-bold",children:s.reduce((P,W)=>P+W.fields.filter(ee=>ee.sensitive).length,0)})]}),e.jsx(Pb,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:D.map(P=>{const W=P.icon;return e.jsxs("button",{onClick:()=>c(P.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${o===P.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{children:P.label})]},P.id)})})}),e.jsxs("div",{className:"p-6",children:[o==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"API Configurations Overview"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(P=>{const W=H0[P.category]||ws,ee=G0[P.category]||"bg-gray-500";return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 ${ee} rounded-full flex items-center justify-center`,children:e.jsx(W,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:P.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:P.category})]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${O(P.status)}`,children:P.status})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:P.description}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Fields:"}),e.jsx("span",{className:"font-semibold",children:P.fields.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Sensitive:"}),e.jsx("span",{className:"font-semibold text-red-600",children:P.fields.filter(M=>M.sensitive).length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Last Updated:"}),e.jsx("span",{className:"font-semibold",children:new Date(P.lastUpdated).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{m(P),u(P)},className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Configure"}),e.jsx("button",{onClick:()=>L(P.id),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Test"}),e.jsx("button",{onClick:()=>k(P.id),className:"px-3 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900 text-sm rounded transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},P.id)})})]}),o==="configs"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"API Configuration Management"})}),e.jsx("div",{className:"space-y-6",children:s.map(P=>{const W=H0[P.category]||ws,ee=G0[P.category]||"bg-gray-500",M=(f==null?void 0:f.id)===P.id,U=M?f:P;return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:`w-8 h-8 ${ee} rounded-full flex items-center justify-center`,children:e.jsx(W,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex-1",children:[M?e.jsx("input",{type:"text",value:(U==null?void 0:U.name)||"",onChange:q=>y("name",q.target.value),className:"text-lg font-semibold bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded px-2 py-1 w-full"}):e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:P.name}),M?e.jsx("input",{type:"text",value:(U==null?void 0:U.description)||"",onChange:q=>y("description",q.target.value),placeholder:"Description",className:"text-sm bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded px-2 py-1 w-full mt-1"}):e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:P.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[M?e.jsxs("select",{value:(U==null?void 0:U.status)||"inactive",onChange:q=>y("status",q.target.value),className:"px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-xs",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"testing",children:"Testing"})]}):e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${O(P.status)}`,children:P.status}),M?e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>{U&&E(U)},disabled:i===P.id,className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700 transition-colors disabled:opacity-50",children:i===P.id?"Saving...":"Save"}),e.jsx("button",{onClick:()=>{m(null),F()},className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-xs rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"})]}):e.jsxs("button",{onClick:()=>m({...P}),className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors flex items-center space-x-1",children:[e.jsx(Yu,{className:"h-3 w-3"}),e.jsx("span",{children:"Edit"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:((U==null?void 0:U.fields)||[]).map(q=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:[q.label,q.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:q.sensitive&&!p[q.id]||q.type==="password"?"password":"text",value:q.value,onChange:Y=>{M&&U&&A(U.id,q.id,Y.target.value)},disabled:!M,placeholder:q.placeholder,className:`w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 pr-20 ${M?"":"cursor-not-allowed opacity-60"}`}),e.jsxs("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex space-x-1",children:[q.sensitive&&e.jsx("button",{onClick:()=>V(q.id),className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:p[q.id]?e.jsx(Gu,{className:"h-4 w-4"}):e.jsx(ct,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Z(q.value,q.id),className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:g===q.id?e.jsx(fd,{className:"h-4 w-4 text-green-600"}):e.jsx(tl,{className:"h-4 w-4"})})]})]}),q.description&&e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:q.description})]},q.id))})]},P.id)})})]}),o==="test"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"API Testing & Validation"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map(P=>{const W=H0[P.category]||ws,ee=G0[P.category]||"bg-gray-500";return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:`w-8 h-8 ${ee} rounded-full flex items-center justify-center`,children:e.jsx(W,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:P.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Test API connectivity and authentication"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Connection Test"}),e.jsx("button",{onClick:()=>L(P.id,"connection"),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Test"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Authentication"}),e.jsx("button",{onClick:()=>L(P.id,"authentication"),className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors",children:"Validate"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Rate Limits"}),e.jsx("button",{onClick:()=>L(P.id,"rate_limits"),className:"px-3 py-1 bg-purple-600 text-white text-sm rounded hover:bg-purple-700 transition-colors",children:"Check"})]})]})]},P.id)})})]})]})]}),j&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Add New API Service"}),e.jsx("button",{onClick:()=>{v(!1),S({name:"",description:"",category:"other",status:"inactive",fields:[]})},className:"text-2xl text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:e.jsx(es,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Service Name *"}),e.jsx("input",{type:"text",value:w.name||"",onChange:P=>S({...w,name:P.target.value}),placeholder:"e.g., Payment Gateway",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category *"}),e.jsxs("select",{value:w.category||"other",onChange:P=>S({...w,category:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",children:[e.jsx("option",{value:"payment",children:"Payment"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"sms",children:"SMS"}),e.jsx("option",{value:"push",children:"Push Notifications"}),e.jsx("option",{value:"analytics",children:"Analytics"}),e.jsx("option",{value:"social",children:"Social Media"}),e.jsx("option",{value:"shipping",children:"Shipping"}),e.jsx("option",{value:"database",children:"Database"}),e.jsx("option",{value:"ai",children:"AI Services"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{value:w.description||"",onChange:P=>S({...w,description:P.target.value}),placeholder:"Describe what this API service does",rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Status"}),e.jsxs("select",{value:w.status||"inactive",onChange:P=>S({...w,status:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"testing",children:"Testing"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"API Fields"}),e.jsxs("button",{onClick:N,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors flex items-center space-x-1",children:[e.jsx(rs,{className:"h-3 w-3"}),e.jsx("span",{children:"Add Field"})]})]}),e.jsx("div",{className:"space-y-3",children:(w.fields||[]).map((P,W)=>e.jsxs("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:P.name,onChange:ee=>R(P.id,{name:ee.target.value}),placeholder:"Field name (e.g., api_key)",className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700"}),e.jsx("input",{type:"text",value:P.label,onChange:ee=>R(P.id,{label:ee.target.value}),placeholder:"Field label (e.g., API Key)",className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("select",{value:P.type,onChange:ee=>R(P.id,{type:ee.target.value}),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700",children:[e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"password",children:"Password"}),e.jsx("option",{value:"url",children:"URL"}),e.jsx("option",{value:"number",children:"Number"}),e.jsx("option",{value:"textarea",children:"Textarea"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:P.required,onChange:ee=>R(P.id,{required:ee.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Required"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:P.sensitive,onChange:ee=>R(P.id,{sensitive:ee.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Sensitive"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:P.placeholder||"",onChange:ee=>R(P.id,{placeholder:ee.target.value}),placeholder:"Placeholder text",className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700"}),e.jsx("button",{onClick:()=>T(P.id),className:"px-3 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900 rounded transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},P.id))})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:z,disabled:i==="new",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:i==="new"?"Creating...":"Create Service"}),e.jsx("button",{onClick:()=>{v(!1),S({name:"",description:"",category:"other",status:"inactive",fields:[]})},className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"})]})]})]})}),d&&!j&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Configure: ",d.name]}),e.jsx("button",{onClick:()=>u(null),className:"text-2xl text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:e.jsx(es,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4",children:e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:d.description})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.fields.map(P=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:[P.label,P.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:P.sensitive&&!p[P.id]||P.type==="password"?"password":"text",value:P.value,placeholder:P.placeholder,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 pr-20",readOnly:!0}),e.jsxs("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex space-x-1",children:[P.sensitive&&e.jsx("button",{onClick:()=>V(P.id),className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:p[P.id]?e.jsx(Gu,{className:"h-4 w-4"}):e.jsx(ct,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Z(P.value,P.id),className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:g===P.id?e.jsx(fd,{className:"h-4 w-4 text-green-600"}):e.jsx(tl,{className:"h-4 w-4"})})]})]}),P.description&&e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:P.description})]},P.id))}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{m(d),u(null)},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Edit Configuration"}),e.jsx("button",{onClick:()=>L(d.id),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Test API"})]})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"API Management Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Secure Storage"}),e.jsx("p",{className:"text-sm opacity-90",children:"Store sensitive API keys securely and never expose them in client-side code."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Regular Rotation"}),e.jsx("p",{className:"text-sm opacity-90",children:"Regularly rotate API keys and monitor usage to maintain security."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Test & Monitor"}),e.jsx("p",{className:"text-sm opacity-90",children:"Continuously test API connections and monitor performance metrics."})]})]})]})]})}const q0=[{value:"razorpay",label:"Razorpay",icon:"",color:"bg-blue-500"},{value:"phonepe",label:"PhonePe",icon:"",color:"bg-purple-500"},{value:"googlepay",label:"Google Pay",icon:"",color:"bg-blue-600"},{value:"paytm",label:"Paytm",icon:"",color:"bg-yellow-500"},{value:"navi",label:"Navi",icon:"",color:"bg-indigo-500"},{value:"bhim",label:"BHIM",icon:"",color:"bg-orange-500"},{value:"stripe",label:"Stripe",icon:"",color:"bg-purple-600"},{value:"paypal",label:"PayPal",icon:"",color:"bg-blue-700"}];function z9(){const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(!1),[l,o]=b.useState(null),[c,d]=b.useState({name:"",type:"razorpay",api_key:"",secret_key:"",webhook_url:"",merchant_id:"",processing_fee_percentage:0,processing_fee_fixed:0,min_amount:0,max_amount:999999,supported_methods:[],is_active:!0});b.useEffect(()=>{u()},[]);const u=async()=>{try{a(!0);const m=await rt.getPaymentGateways();s(m)}catch(m){console.error("Failed to fetch payment gateways:",m)}finally{a(!1)}},p=async m=>{m.preventDefault();try{l?await rt.updatePaymentGateway(l.id,c):await rt.createPaymentGateway(c),i(!1),o(null),d({name:"",type:"razorpay",api_key:"",secret_key:"",webhook_url:"",merchant_id:"",processing_fee_percentage:0,processing_fee_fixed:0,min_amount:0,max_amount:999999,supported_methods:[],is_active:!0}),u()}catch(j){console.error("Failed to save payment gateway:",j)}},h=m=>{o(m),d({name:m.name,type:m.type,api_key:m.api_key,secret_key:m.secret_key,webhook_url:m.webhook_url,merchant_id:m.merchant_id||"",processing_fee_percentage:m.processing_fee_percentage,processing_fee_fixed:m.processing_fee_fixed,min_amount:m.min_amount,max_amount:m.max_amount,supported_methods:m.supported_methods||[],is_active:m.is_active}),i(!0)},g=async m=>{if(confirm("Are you sure you want to delete this payment gateway?"))try{await rt.deletePaymentGateway(m),u()}catch(j){console.error("Failed to delete payment gateway:",j)}},x=async m=>{try{await rt.updatePaymentGateway(m.id,{is_active:!m.is_active}),u()}catch(j){console.error("Failed to toggle gateway status:",j)}},f=m=>q0.find(j=>j.value===m)||q0[0];return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:"Payment Options"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Manage payment gateways and processing fees"})]}),e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 transition-colors",children:[e.jsx(rs,{className:"h-4 w-4"}),"Add Payment Gateway"]})]}),e.jsxs("div",{className:"mb-6 rounded-lg bg-blue-50 p-4 dark:bg-blue-900/20",children:[e.jsx("h3",{className:"mb-2 font-semibold text-blue-900 dark:text-blue-100",children:"Payment Rules"}),e.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[e.jsx("li",{children:" Orders below 1000: Prepaid and Postpaid options available"}),e.jsx("li",{children:" Orders above 1000: Prepaid only"}),e.jsx("li",{children:" All payment gateways support both prepaid and postpaid modes"})]})]}),r?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(m=>{var v;const j=f(m.type);return e.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${j.color} flex items-center justify-center text-white text-lg`,children:j.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:m.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:j.label})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:m.is_active?e.jsx(Vt,{className:"h-5 w-5 text-green-500"}):e.jsx(Kt,{className:"h-5 w-5 text-red-500"})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Processing Fee:"}),e.jsxs("span",{className:"font-medium",children:[m.processing_fee_percentage,"% + ",m.processing_fee_fixed]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Amount Range:"}),e.jsxs("span",{className:"font-medium",children:["",m.min_amount," - ",m.max_amount]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Methods:"}),e.jsxs("span",{className:"font-medium",children:[((v=m.supported_methods)==null?void 0:v.length)||0," methods"]})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:()=>h(m),className:"flex-1 rounded-lg border border-slate-300 px-3 py-2 text-sm hover:bg-slate-50 dark:border-slate-600 dark:hover:bg-slate-700 transition-colors",children:e.jsx(jr,{className:"h-4 w-4 mx-auto"})}),e.jsx("button",{onClick:()=>x(m),className:`flex-1 rounded-lg px-3 py-2 text-sm transition-colors ${m.is_active?"bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900/20 dark:text-red-400":"bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/20 dark:text-green-400"}`,children:m.is_active?"Disable":"Enable"}),e.jsx("button",{onClick:()=>g(m.id),className:"rounded-lg border border-red-300 px-3 py-2 text-sm text-red-700 hover:bg-red-50 dark:border-red-600 dark:text-red-400 dark:hover:bg-red-900/20 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},m.id)})}),n&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"w-full max-w-2xl rounded-lg bg-white dark:bg-slate-800 p-6 m-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"mb-6 text-xl font-semibold text-slate-900 dark:text-slate-100",children:l?"Edit Payment Gateway":"Add Payment Gateway"}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Gateway Name"}),e.jsx("input",{type:"text",value:c.name,onChange:m=>d({...c,name:m.target.value}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Payment Type"}),e.jsx("select",{value:c.type,onChange:m=>d({...c,type:m.target.value}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",children:q0.map(m=>e.jsxs("option",{value:m.value,children:[m.icon," ",m.label]},m.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"API Key"}),e.jsx("input",{type:"text",value:c.api_key,onChange:m=>d({...c,api_key:m.target.value}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Secret Key"}),e.jsx("input",{type:"password",value:c.secret_key,onChange:m=>d({...c,secret_key:m.target.value}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Webhook URL"}),e.jsx("input",{type:"url",value:c.webhook_url,onChange:m=>d({...c,webhook_url:m.target.value}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Merchant ID (Optional)"}),e.jsx("input",{type:"text",value:c.merchant_id,onChange:m=>d({...c,merchant_id:m.target.value}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Processing Fee (%)"}),e.jsx("input",{type:"number",step:"0.01",value:c.processing_fee_percentage,onChange:m=>d({...c,processing_fee_percentage:parseFloat(m.target.value)}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fixed Fee ()"}),e.jsx("input",{type:"number",step:"0.01",value:c.processing_fee_fixed,onChange:m=>d({...c,processing_fee_fixed:parseFloat(m.target.value)}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Min Amount ()"}),e.jsx("input",{type:"number",value:c.min_amount,onChange:m=>d({...c,min_amount:parseFloat(m.target.value)}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Max Amount ()"}),e.jsx("input",{type:"number",value:c.max_amount,onChange:m=>d({...c,max_amount:parseFloat(m.target.value)}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.is_active,onChange:m=>d({...c,is_active:m.target.checked}),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Active"})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 rounded-lg bg-blue-600 py-2 text-white hover:bg-blue-700 transition-colors",children:l?"Update Gateway":"Add Gateway"}),e.jsx("button",{type:"button",onClick:()=>{i(!1),o(null)},className:"flex-1 rounded-lg border border-slate-300 py-2 text-slate-700 hover:bg-slate-50 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-700 transition-colors",children:"Cancel"})]})]})]})})]})}const Gr=Dn(),W9=()=>{const[t,s]=b.useState([]),[r,a]=b.useState(!1),[n,i]=b.useState(null),[l,o]=b.useState(!1),[c,d]=b.useState(!1),[u,p]=b.useState(!1),[h,g]=b.useState(null),[x,f]=b.useState(!1),[m,j]=b.useState({autoAdvanceInterval:3e3,videoPlayDuration:3e3,animationDuration:700,animationEasing:"ease-in-out",autoPlay:!0,radius:500,blurAmount:12,minOpacity:.6,minScale:.85}),[v,w]=b.useState(!1),[S,F]=b.useState({title:"",description:"",video_url:"",redirect_url:"",price:"",size:"medium",thumbnail_url:"",is_active:!0,video_type:"local"}),[E,k]=b.useState(null),[A,y]=b.useState(null),N=async(U,q)=>{const Y=new FormData;Y.append("file",U),Y.append("type",q);const K=await fetch(`${Gr}/upload`,{method:"POST",body:Y});if(!K.ok)throw new Error("Upload failed");return(await K.json()).filename},R=(U,q)=>{var K;const Y=(K=U.target.files)==null?void 0:K[0];if(Y)if(q==="video"){if(k(Y),!A){const le=document.createElement("video");le.src=URL.createObjectURL(Y),le.onloadedmetadata=()=>{const J=document.createElement("canvas");J.width=le.videoWidth,J.height=le.videoHeight;const ae=J.getContext("2d");ae&&(ae.drawImage(le,0,0),J.toBlob(he=>{if(he){const Fe=new File([he],"thumbnail.jpg",{type:"image/jpeg"});y(Fe)}},"image/jpeg"))}}}else y(Y)},T=U=>U.includes("instagram.com")?"instagram":U.includes("facebook.com")||U.includes("fb.com")?"facebook":U.includes("youtube.com")||U.includes("youtu.be")?"youtube":U.startsWith("/")||U.includes("localhost")?"local":"url",z=async()=>{try{const U=await fetch(`${Gr}/videos`);if(U.ok){const q=await U.json();s(q)}}catch(U){console.error("Failed to fetch videos:",U)}};b.useEffect(()=>{z(),L()},[]);const L=async()=>{try{const U=await fetch(`${Gr}/carousel-settings`);if(U.ok){const q=await U.json();q&&q.length>0&&j(q[0].settings||m)}}catch(U){console.error("Failed to load carousel settings:",U);const q=localStorage.getItem("carousel-settings");if(q)try{j(JSON.parse(q))}catch(Y){console.error("Failed to parse saved settings:",Y)}}},O=async()=>{w(!0);try{if((await fetch(`${Gr}/carousel-settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:m})})).ok)localStorage.setItem("carousel-settings",JSON.stringify(m)),alert("Carousel settings saved successfully!"),f(!1);else throw new Error("Failed to save settings")}catch(U){console.error("Failed to save settings:",U),localStorage.setItem("carousel-settings",JSON.stringify(m)),alert("Settings saved to local storage!"),f(!1)}finally{w(!1)}},V=async U=>{if(U.preventDefault(),!S.title.trim()){alert("Please enter a title");return}if(!S.description.trim()){alert("Please enter a description");return}if(!S.price.trim()){alert("Please enter a price");return}if(!S.redirect_url.trim()){alert("Please enter a redirect URL");return}if(S.video_type==="local"&&!E){alert("Please select a video file for local upload");return}if(S.video_type!=="local"&&!S.video_url.trim()){alert("Please enter a video URL");return}o(!0),d(!0);try{let q=S.video_url,Y=S.thumbnail_url;E&&(q=await N(E,"video")),A&&(Y=await N(A,"thumbnail")),!q&&S.video_type==="local"&&(q="local-upload-pending");const K=E?"local":T(S.video_url),le=n?`${Gr}/videos/${n.id}`:`${Gr}/videos`,ae=await fetch(le,{method:n?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...S,video_url:q||S.video_url,thumbnail_url:Y||S.thumbnail_url,video_type:K})});if(ae.ok)await z(),a(!1),i(null),k(null),y(null),F({title:"",description:"",video_url:"",redirect_url:"",price:"",size:"medium",thumbnail_url:"",is_active:!0,video_type:"local"});else{const he=await ae.json();console.error("Server error:",he),alert(`Failed to save video: ${he.message||"Unknown error"}`)}}catch(q){console.error("Failed to save video:",q),alert("Failed to save video. Please try again.")}finally{o(!1),d(!1)}},Z=U=>{i(U),F({title:U.title,description:U.description,video_url:U.video_url,redirect_url:U.redirect_url,price:U.price,size:U.size,thumbnail_url:U.thumbnail_url,is_active:U.is_active,video_type:U.video_type}),a(!0)},D=async U=>{if(confirm("Are you sure you want to delete this video?"))try{(await fetch(`${Gr}/videos/${U}`,{method:"DELETE"})).ok&&await z()}catch(q){console.error("Failed to delete video:",q)}},P=async U=>{try{const q=await fetch(`${Gr}/videos/${U.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!U.is_active})});if(q.ok)await z();else{const Y=await q.text();console.error("Failed to toggle video status:",Y)}}catch(q){console.error("Failed to toggle video status:",q)}},W=U=>{if(!U.thumbnail_url){alert("No thumbnail available to crop. Please upload a thumbnail first.");return}g(U),p(!0)},ee=async U=>{if(h)try{const q=new FormData;q.append("file",U,"cropped-thumbnail.jpg"),q.append("type","thumbnail");const Y=await fetch(`${Gr}/upload`,{method:"POST",body:q});if(!Y.ok){const ae=await Y.text();throw console.error("Upload error:",ae),new Error("Upload failed")}const le=(await Y.json()).filename,J=await fetch(`${Gr}/videos/${h.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({thumbnail_url:le})});if(J.ok)await z(),p(!1),g(null),alert("Thumbnail cropped and updated successfully!");else{const ae=await J.text();throw console.error("Update error:",ae),new Error(`Failed to update video: ${ae}`)}}catch(q){console.error("Failed to crop thumbnail:",q),alert("Failed to crop thumbnail. Please try again.")}},M=U=>U.video_type==="local"?`${Dn().replace("/api","").replace("/api","")}/uploads/${U.video_url}`:U.video_url;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Video Manager"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>f(!x),className:"rounded-lg bg-gray-600 px-4 py-2 text-white hover:bg-gray-700 transition-colors flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4"}),"Carousel Settings"]}),e.jsx("button",{onClick:()=>{i(null),F({title:"",description:"",video_url:"",redirect_url:"",price:"",size:"medium",thumbnail_url:"",is_active:!0,video_type:"local"}),a(!0)},className:"rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 transition-colors",children:"Add New Video"})]})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Unlimited videos supported  Max file size: 500MB per video  Total videos: ",t.length]})]}),x&&e.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Carousel Animation Settings"}),e.jsx("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Auto-Advance Interval (ms)"}),e.jsx("input",{type:"number",min:"1000",max:"10000",step:"500",value:m.autoAdvanceInterval,onChange:U=>j({...m,autoAdvanceInterval:parseInt(U.target.value)||3e3}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Time between video changes (1000-10000ms)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Video Play Duration (ms)"}),e.jsx("input",{type:"number",min:"1000",max:"30000",step:"500",value:m.videoPlayDuration,onChange:U=>j({...m,videoPlayDuration:parseInt(U.target.value)||3e3}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"How long each video plays before next (1000-30000ms)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Animation Duration (ms)"}),e.jsx("input",{type:"number",min:"200",max:"2000",step:"100",value:m.animationDuration,onChange:U=>j({...m,animationDuration:parseInt(U.target.value)||700}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Transition speed (200-2000ms)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Animation Easing"}),e.jsxs("select",{value:m.animationEasing,onChange:U=>j({...m,animationEasing:U.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"linear",children:"Linear"}),e.jsx("option",{value:"ease",children:"Ease"}),e.jsx("option",{value:"ease-in",children:"Ease In"}),e.jsx("option",{value:"ease-out",children:"Ease Out"}),e.jsx("option",{value:"ease-in-out",children:"Ease In Out"}),e.jsx("option",{value:"cubic-bezier(0.68, -0.55, 0.265, 1.55)",children:"Bounce"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"3D Circle Radius (px)"}),e.jsx("input",{type:"number",min:"300",max:"1000",step:"50",value:m.radius,onChange:U=>j({...m,radius:parseInt(U.target.value)||500}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Distance of videos from center (300-1000px)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Side Video Blur (px)"}),e.jsx("input",{type:"number",min:"0",max:"30",step:"1",value:m.blurAmount,onChange:U=>j({...m,blurAmount:parseInt(U.target.value)||12}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Blur effect for side videos (0-30px)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Minimum Opacity"}),e.jsx("input",{type:"number",min:"0.1",max:"1",step:"0.1",value:m.minOpacity,onChange:U=>j({...m,minOpacity:parseFloat(U.target.value)||.6}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Minimum opacity for side videos (0.1-1.0)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Minimum Scale"}),e.jsx("input",{type:"number",min:"0.5",max:"1",step:"0.05",value:m.minScale,onChange:U=>j({...m,minScale:parseFloat(U.target.value)||.85}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Minimum scale for side videos (0.5-1.0)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"autoPlay",checked:m.autoPlay,onChange:U=>j({...m,autoPlay:U.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"autoPlay",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Enable Auto-Play"})]})]}),e.jsxs("div",{className:"mt-6 flex gap-4",children:[e.jsxs("button",{onClick:O,disabled:v,className:"flex items-center gap-2 rounded-lg bg-green-600 px-4 py-2 text-white hover:bg-green-700 transition-colors disabled:opacity-50",children:[e.jsx($s,{className:"w-4 h-4"}),v?"Saving...":"Save Settings"]}),e.jsx("button",{onClick:()=>{j({autoAdvanceInterval:3e3,videoPlayDuration:3e3,animationDuration:700,animationEasing:"ease-in-out",autoPlay:!0,radius:500,blurAmount:12,minOpacity:.6,minScale:.85})},className:"rounded-lg bg-gray-600 px-4 py-2 text-white hover:bg-gray-700 transition-colors",children:"Reset to Default"})]})]}),t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"No videos found. Add your first video!"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(U=>{var q;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"relative group",children:[U.video_type==="local"||U.video_url?e.jsx("video",{src:M(U),className:"w-full h-64 object-cover",muted:!0,playsInline:!0,onMouseEnter:Y=>{Y.target.play().catch(()=>{})},onMouseLeave:Y=>{const K=Y.target;K.pause(),K.currentTime=0}}):e.jsx("img",{src:U.thumbnail_url||"/placeholder-video.jpg",alt:U.title,className:"w-full h-64 object-cover"}),e.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${U.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:U.is_active?"Active":"Inactive"}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold bg-purple-100 text-purple-800",children:((q=U.video_type)==null?void 0:q.toUpperCase())||"URL"})]}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold bg-blue-100 text-blue-800",children:U.size.toUpperCase()})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:U.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:U.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-3",children:[e.jsxs("span",{children:[" ",U.views," views"]}),e.jsxs("span",{children:[" ",U.likes," likes"]}),e.jsx("span",{className:"font-bold text-green-600",children:U.price})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>Z(U),className:"flex-1 rounded-lg bg-blue-600 px-3 py-2 text-sm text-white hover:bg-blue-700 transition-colors",children:"Edit"}),e.jsxs("button",{onClick:()=>W(U),className:"rounded-lg bg-green-600 px-3 py-2 text-sm text-white hover:bg-green-700 transition-colors flex items-center gap-1",title:"Crop Thumbnail",children:[e.jsx(Hu,{className:"w-4 h-4"}),"Crop"]}),e.jsx("button",{onClick:()=>P(U),className:`flex-1 rounded-lg px-3 py-2 text-sm text-white transition-colors ${U.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:U.is_active?"Deactivate":"Activate"}),e.jsx("button",{onClick:()=>D(U.id),className:"rounded-lg bg-gray-600 px-3 py-2 text-sm text-white hover:bg-gray-700 transition-colors",children:"Delete"})]})]})]},U.id)})}),u&&h&&h.thumbnail_url&&e.jsx(Pj,{imageUrl:h.thumbnail_url.startsWith("http")?h.thumbnail_url:`${Gr}/uploads/${h.thumbnail_url}`,aspectRatio:9/16,onCrop:ee,onCancel:()=>{p(!1),g(null)}}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:n?"Edit Video":"Add New Video"}),e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title"}),e.jsx("input",{type:"text",value:S.title,onChange:U=>F({...S,title:U.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Price"}),e.jsx("input",{type:"text",value:S.price,onChange:U=>F({...S,price:U.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"1899",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:S.description,onChange:U=>F({...S,description:U.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Video Source Type"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:[{value:"local",label:"Local Upload",icon:""},{value:"instagram",label:"Instagram",icon:""},{value:"facebook",label:"Facebook",icon:""},{value:"youtube",label:"YouTube",icon:""},{value:"url",label:"Direct URL",icon:""}].map(U=>e.jsxs("button",{type:"button",onClick:()=>F({...S,video_type:U.value}),className:`p-3 rounded-lg border text-sm font-medium transition-colors ${S.video_type===U.value?"border-blue-500 bg-blue-50 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300"}`,children:[e.jsx("div",{className:"text-lg mb-1",children:U.icon}),e.jsx("div",{children:U.label})]},U.value))})]}),S.video_type==="local"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Upload Video File"}),e.jsx("input",{type:"file",accept:"video/*",onChange:U=>R(U,"video"),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!n}),E&&e.jsxs("div",{className:"mt-2 text-sm text-green-600",children:["Selected: ",E.name," (",(E.size/1024/1024).toFixed(2)," MB)"]}),e.jsx("input",{type:"hidden",value:E?"local-upload":"",onChange:()=>{}})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Video URL"}),e.jsx("input",{type:"url",value:S.video_url,onChange:U=>F({...S,video_url:U.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:S.video_type==="instagram"?"https://www.instagram.com/p/...":S.video_type==="facebook"?"https://www.facebook.com/watch/?v=VIDEO_ID":S.video_type==="youtube"?"https://www.youtube.com/watch?v=VIDEO_ID":"https://your-domain.com/video.mp4",required:!0}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[S.video_type==="instagram"&&"Paste Instagram post URL",S.video_type==="facebook"&&"Paste Facebook video URL",S.video_type==="youtube"&&"Paste YouTube video URL",S.video_type==="url"&&"Paste direct video URL"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Redirect URL"}),e.jsx("input",{type:"url",value:S.redirect_url,onChange:U=>F({...S,redirect_url:U.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://your-domain.com/product",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Thumbnail"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:U=>R(U,"thumbnail"),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),A&&e.jsxs("div",{className:"text-sm text-green-600",children:["Selected: ",A.name]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Or enter URL manually below"}),e.jsx("input",{type:"url",value:S.thumbnail_url,onChange:U=>F({...S,thumbnail_url:U.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://your-domain.com/thumbnail.jpg"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Size"}),e.jsxs("select",{value:S.size,onChange:U=>F({...S,size:U.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"small",children:"Small (w-48 h-64)"}),e.jsx("option",{value:"medium",children:"Medium (w-56 h-72)"}),e.jsx("option",{value:"large",children:"Large (w-64 h-80)"})]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:S.is_active,onChange:U=>F({...S,is_active:U.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Active"})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"submit",disabled:l||c,className:"flex-1 rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 transition-colors disabled:opacity-50",children:l||c?"Saving...":n?"Update Video":"Add Video"}),e.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 rounded-lg bg-gray-600 px-4 py-2 text-white hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})]})})]})};function V9(){const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(""),[l,o]=b.useState("all");b.useEffect(()=>{c();const x=window.socketService;return x&&(x.subscribe("contact_message_created",f=>{s(m=>[f,...m])}),x.subscribe("contact_message_updated",f=>{s(m=>m.map(j=>j.id===f.id?f:j))})),()=>{x&&(x.unsubscribe("contact_message_created"),x.unsubscribe("contact_message_updated"))}},[]);const c=async()=>{try{a(!0);const x=await rt.getContactMessages();s(x||[])}catch(x){console.error("Failed to fetch contact messages:",x)}finally{a(!1)}},d=async(x,f)=>{try{await rt.updateContactMessageStatus(x,f),s(m=>m.map(j=>j.id===x?{...j,status:f}:j))}catch(m){console.error("Failed to update message status:",m)}},u=t.filter(x=>{const f=x.name.toLowerCase().includes(n.toLowerCase())||x.email.toLowerCase().includes(n.toLowerCase())||x.message.toLowerCase().includes(n.toLowerCase()),m=l==="all"||x.status===l;return f&&m}),p=t.filter(x=>x.status==="unread").length,h=x=>{switch(x){case"unread":return"bg-blue-100 text-blue-800";case"read":return"bg-gray-100 text-gray-800";case"replied":return"bg-green-100 text-green-800";case"archived":return"bg-slate-100 text-slate-800";default:return"bg-gray-100 text-gray-800"}},g=x=>new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Contact Messages"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage and respond to customer inquiries"})]}),p>0&&e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:[e.jsx(ss,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsxs("span",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:[p," new messages"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 rounded-xl",style:{backgroundColor:"var(--arctic-blue-light)"},children:e.jsx(ss,{className:"w-6 h-6",style:{color:"var(--arctic-blue-primary)"}})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Total"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:t.length})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 rounded-xl",style:{backgroundColor:"var(--arctic-blue-light)"},children:e.jsx(cs,{className:"w-6 h-6",style:{color:"var(--arctic-blue-primary)"}})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Unread"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:p})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 rounded-xl",style:{backgroundColor:"#D1FAE5"},children:e.jsx(Vt,{className:"w-6 h-6",style:{color:"#059669"}})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Replied"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:t.filter(x=>x.status==="replied").length})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 rounded-xl",style:{backgroundColor:"#E9D5FF"},children:e.jsx(ct,{className:"w-6 h-6",style:{color:"#7C3AED"}})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Read"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:t.filter(x=>x.status==="read").length})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 shadow flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search messages...",value:n,onChange:x=>i(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:l,onChange:x=>o(x.target.value),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"unread",children:"Unread"}),e.jsx("option",{value:"read",children:"Read"}),e.jsx("option",{value:"replied",children:"Replied"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),r?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Loading messages..."})]}):u.length===0?e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-12 text-center shadow",children:[e.jsx(ss,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"No messages found"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:n||l!=="all"?"Try adjusting your filters":"No contact messages yet"})]}):e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Message"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:u.map(x=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ga,{className:"w-5 h-5 text-slate-400"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:x.name})]}),e.jsxs("div",{className:"mt-1 flex items-center space-x-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx(ss,{className:"w-4 h-4"}),e.jsx("span",{children:x.email})]}),x.phone&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx(pa,{className:"w-4 h-4"}),e.jsx("span",{children:x.phone})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fs,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-slate-100 max-w-md truncate",children:x.message})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${h(x.status)}`,children:x.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-400",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Mr,{className:"w-4 h-4"}),e.jsx("span",{children:g(x.created_at)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[x.status==="unread"&&e.jsx("button",{onClick:()=>d(x.id,"read"),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900 rounded",title:"Mark as read",children:e.jsx(Vt,{className:"w-5 h-5"})}),x.status!=="replied"&&e.jsx("button",{onClick:()=>d(x.id,"replied"),className:"p-2 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900 rounded",title:"Mark as replied",children:e.jsx(Vt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>d(x.id,"archived"),className:"p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700 rounded",title:"Archive",children:e.jsx(Mt,{className:"w-5 h-5"})})]})})]},x.id))})]})})})]})}function H9(){var A;const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState("all"),[l,o]=b.useState(""),[c,d]=b.useState(null),[u,p]=b.useState(!1),[h,g]=b.useState({status:"processing",transaction_id:"",admin_notes:"",rejection_reason:""});b.useEffect(()=>{f()},[n]);const x=()=>{if(typeof window<"u"){const y=window.location.hostname;if(y==="thenefol.com"||y==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"},f=async()=>{try{a(!0);const y=x(),N=await fetch(`${y}/admin/coin-withdrawals${n!=="all"?`?status=${n}`:""}`,{headers:{"Content-Type":"application/json"}});if(N.ok){const R=await N.json();s(Array.isArray(R)?R:[])}else console.error("Failed to fetch withdrawals:",N.status,N.statusText)}catch(y){console.error("Failed to fetch withdrawals:",y)}finally{a(!1)}},m=async y=>{if(y.preventDefault(),!!c)try{const N=localStorage.getItem("auth_token"),R=localStorage.getItem("role")||"admin",T=localStorage.getItem("permissions")||"",z={"Content-Type":"application/json"};N&&(z.Authorization=`Bearer ${N}`),R&&(z["x-user-role"]=R),T&&(z["x-user-permissions"]=T);const L=x(),O=await fetch(`${L}/admin/coin-withdrawals/${c.id}/process`,{method:"PUT",headers:z,body:JSON.stringify(h)});if(O.ok)alert("Withdrawal processed successfully!"),p(!1),d(null),f();else{const V=await O.json();alert(V.message||"Failed to process withdrawal")}}catch(N){console.error("Error processing withdrawal:",N),alert("Failed to process withdrawal")}},j=y=>{d(y),g({status:y.status,transaction_id:y.transaction_id||"",admin_notes:y.admin_notes||"",rejection_reason:y.rejection_reason||""}),p(!0)},v=y=>{const N={pending:"bg-yellow-100 text-yellow-800 border-yellow-300",processing:"bg-blue-100 text-blue-800 border-blue-300",completed:"bg-green-100 text-green-800 border-green-300",rejected:"bg-red-100 text-red-800 border-red-300",failed:"bg-red-100 text-red-800 border-red-300"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${N[y]||N.pending}`,children:y.charAt(0).toUpperCase()+y.slice(1)})},w=y=>{switch(y){case"completed":return e.jsx(v2,{className:"w-5 h-5 text-green-600"});case"rejected":case"failed":return e.jsx(Kt,{className:"w-5 h-5 text-red-600"});case"processing":return e.jsx(e4,{className:"w-5 h-5 text-blue-600 animate-spin"});default:return e.jsx(cs,{className:"w-5 h-5 text-yellow-600"})}},S=t.filter(y=>{var N;if(l){const R=l.toLowerCase();return y.user_name.toLowerCase().includes(R)||y.user_email.toLowerCase().includes(R)||((N=y.transaction_id)==null?void 0:N.toLowerCase().includes(R))||y.id.toString().includes(R)}return!0}),F=t.filter(y=>y.status==="pending").length,E=t.reduce((y,N)=>y+(Number(N.amount)||0)/10,0),k=t.filter(y=>y.status==="pending").reduce((y,N)=>y+(Number(N.amount)||0)/10,0);return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Coin Withdrawals"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage user withdrawal requests"})]}),e.jsx("button",{className:"px-4 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:e.jsx(wa,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Total Requests"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:t.length})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Pending"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"#D97706",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:F})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:["",E.toFixed(2)]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Pending Amount"}),e.jsxs("p",{className:"text-2xl font-light",style:{color:"#EA580C",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:["",k.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"mb-6 flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or ID...",value:l,onChange:y=>o(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),e.jsxs("select",{value:n,onChange:y=>i(y.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"failed",children:"Failed"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:S.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ob,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No withdrawal requests found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:S.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:["#",y.id]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:y.user_name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:y.user_email})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900 dark:text-gray-100",children:["",((Number(y.amount)||0)/10).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[y.withdrawal_method==="bank"?e.jsx(Tb,{className:"w-4 h-4 text-blue-600"}):e.jsx(li,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:y.withdrawal_method==="bank"?"Bank":"UPI"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[w(y.status),v(y.status)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(y.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>j(y),className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Process"})})]},y.id))})]})})}),u&&c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Process Withdrawal"}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"User"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:c.user_name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.user_email})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Amount"}),e.jsxs("p",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:["",((Number(c.amount)||0)/10).toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[c.amount," coins"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Method"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:c.withdrawal_method==="bank"?"Bank Transfer":"UPI Transfer"})]})]}),c.withdrawal_method==="bank"&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Bank Details"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:["Account: ",c.account_holder_name]}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:["Bank: ",c.bank_name]}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:["Account Number: ****",(A=c.account_number)==null?void 0:A.slice(-4)]}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:["IFSC: ",c.ifsc_code]})]}),c.withdrawal_method==="upi"&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"UPI Details"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:["UPI ID: ",c.upi_id]})]})]}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),e.jsxs("select",{value:h.status,onChange:y=>g(N=>({...N,status:y.target.value})),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"failed",children:"Failed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Transaction ID (Optional)"}),e.jsx("input",{type:"text",value:h.transaction_id,onChange:y=>g(N=>({...N,transaction_id:y.target.value})),placeholder:"Enter transaction ID",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Admin Notes (Optional)"}),e.jsx("textarea",{value:h.admin_notes,onChange:y=>g(N=>({...N,admin_notes:y.target.value})),rows:3,placeholder:"Add notes...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),(h.status==="rejected"||h.status==="failed")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-red-700 dark:text-red-300 mb-2",children:"Rejection Reason *"}),e.jsx("textarea",{value:h.rejection_reason,onChange:y=>g(N=>({...N,rejection_reason:y.target.value})),rows:3,required:!0,placeholder:`Reason for ${h.status==="rejected"?"rejection":"failure"}...`,className:"w-full px-4 py-2 border border-red-300 dark:border-red-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Process Withdrawal"}),e.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})]})})]})}function G9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(""),[l,o]=b.useState({name:"",values:""}),[c,d]=b.useState({});b.useEffect(()=>{(async()=>{if(n){try{const v=await(await fetch(`/api/products/${n}/variant-options`)).json();v!=null&&v.success&&Array.isArray(v.data)&&s(v.data)}catch{}try{const v=await(await fetch(`/api/products/${n}/variants`)).json();v!=null&&v.success&&Array.isArray(v.data)&&a(v.data)}catch{}}})()},[n]);const u=()=>{l.name&&l.values&&(s([...t,{name:l.name,values:l.values.split(",").map(m=>m.trim())}]),o({name:"",values:""}))},p=async()=>{const j=await(await fetch(`/api/products/${n}/variant-options`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({options:t})})).json();console.log("Options saved:",j)},h=async()=>{const j=await(await fetch(`/api/products/${n}/variants/generate`,{method:"POST"})).json();j.success&&(a(j.data),alert(`Generated ${j.data.length} variants`))},g=(m,j,v)=>{a(w=>w.map(S=>S.id===m?{...S,[j]:v}:S))},x=async m=>{const j=r.find(v=>v.id===m);j&&await fetch(`/api/variants/${m}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sku:j.sku,attributes:j.attributes,price:j.price?Number(j.price):null,mrp:j.mrp?Number(j.mrp):null,image_url:j.image_url||null,barcode:j.barcode||null,is_active:j.is_active})})},f=async m=>{const j=c[m];j&&await fetch(`/api/inventory/${n}/${m}/low-threshold`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threshold:Number(j)})})};return e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Product Variants"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage product variants with multiple sizes or colors"})]}),e.jsx("div",{className:"metric-card",style:{backgroundColor:"var(--arctic-blue-lighter)",borderColor:"var(--arctic-blue-primary)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",style:{color:"var(--arctic-blue-primary-dark)"},children:"Product Variants Page"}),e.jsxs("p",{className:"text-sm",style:{color:"var(--text-muted)",letterSpacing:"0.02em"},children:["Yeh page sirf un products ke liye hai jinke multiple variants hain (jaise: Size S, M, L ya different Colors).",e.jsx("br",{}),e.jsx("strong",{children:"Agar aapke products mein sirf ek hi size hai, to is page ki zaroorat nahi hai."}),e.jsx("br",{}),"Single-size products ko directly ",e.jsx("a",{href:"/admin/products",className:"underline font-semibold",style:{color:"var(--arctic-blue-primary-dark)"},children:"Products page"})," se manage karein."]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product ID"}),e.jsx("input",{type:"text",value:n,onChange:m=>i(m.target.value),className:"border p-2 rounded dark:bg-gray-800 dark:border-gray-600 dark:text-white",placeholder:"Enter product ID"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Variant Options"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",placeholder:"Option name (e.g., Size)",value:l.name,onChange:m=>o({...l,name:m.target.value}),className:"border p-2 rounded"}),e.jsx("input",{type:"text",placeholder:"Values (comma-separated, e.g., S, M, L)",value:l.values,onChange:m=>o({...l,values:m.target.value}),className:"border p-2 rounded"}),e.jsx("button",{onClick:u,className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Add Option"})]}),e.jsx("button",{onClick:p,className:"px-4 py-2 bg-green-500 text-white rounded",children:"Save Options"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Generated Variants"}),e.jsx("button",{onClick:h,className:"px-4 py-2 bg-purple-500 text-white rounded mb-4",children:"Generate Variants"}),e.jsx("div",{className:"space-y-3",children:r.map(m=>e.jsxs("div",{className:"border p-3 rounded space-y-2",children:[e.jsxs("div",{className:"text-sm",children:["Attributes: ",JSON.stringify(m.attributes)]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2 items-center",children:[e.jsx("input",{className:"border p-2 rounded",placeholder:"SKU",value:m.sku||"",onChange:j=>g(m.id,"sku",j.target.value)}),e.jsx("input",{className:"border p-2 rounded",placeholder:"Price",type:"number",value:m.price||"",onChange:j=>g(m.id,"price",j.target.value)}),e.jsx("input",{className:"border p-2 rounded",placeholder:"MRP",type:"number",value:m.mrp||"",onChange:j=>g(m.id,"mrp",j.target.value)}),e.jsx("input",{className:"border p-2 rounded",placeholder:"Barcode",value:m.barcode||"",onChange:j=>g(m.id,"barcode",j.target.value)}),e.jsx("input",{className:"border p-2 rounded",placeholder:"Image URL",value:m.image_url||"",onChange:j=>g(m.id,"image_url",j.target.value)}),e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:!!m.is_active,onChange:j=>g(m.id,"is_active",j.target.checked)})," Active"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>x(m.id),className:"px-3 py-2 bg-green-600 text-white rounded",children:"Save"}),e.jsx("input",{className:"border p-2 rounded w-40",placeholder:"Low stock threshold",value:c[m.id]||"",onChange:j=>d(v=>({...v,[m.id]:j.target.value}))}),e.jsx("button",{onClick:()=>f(m.id),className:"px-3 py-2 bg-indigo-600 text-white rounded",children:"Set Threshold"})]})]},m.id))})]})]})}function q9(){const{notify:t}=mr(),[s,r]=b.useState(""),[a,n]=b.useState(null),[i,l]=b.useState([]),[o,c]=b.useState({variantId:"",delta:"",reason:""}),d=async()=>{const f=await(await fetch(`/api/inventory/${s}/summary`)).json();f.success?n(f.data):t("error","Failed to fetch summary")},u=async()=>{const f=await(await fetch("/api/inventory/low-stock")).json();f.success&&l(f.data)},[p,h]=b.useState(!1),g=async()=>{const[x,f]=o.variantId.split(":");(await(await fetch(`/api/inventory/${x}/${f}/adjust`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delta:Number(o.delta),reason:o.reason||"manual"})})).json()).success?(t("success","Stock adjusted"),c({variantId:"",delta:"",reason:""}),d()):t("error","Failed to adjust stock")};return b.useEffect(()=>{u()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Inventory Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Track and manage product inventory levels"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Product Inventory Summary"}),e.jsx("input",{type:"text",value:s,onChange:x=>r(x.target.value),placeholder:"Enter product ID",className:"border p-2 rounded mr-2"}),e.jsx("button",{onClick:d,className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Fetch Summary"}),a&&e.jsxs("div",{className:"mt-4 border p-4 rounded",children:[e.jsxs("p",{children:["Available: ",a.available]}),e.jsxs("p",{children:["Total: ",a.total]}),e.jsxs("p",{children:["Low Stock Variants: ",a.low_variants]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Adjust Stock"}),e.jsx("input",{type:"text",value:o.variantId,onChange:x=>c({...o,variantId:x.target.value}),placeholder:"productId:variantId",className:"border p-2 rounded mr-2"}),e.jsx("input",{type:"number",value:o.delta,onChange:x=>c({...o,delta:x.target.value}),placeholder:"Change in quantity",className:"border p-2 rounded mr-2"}),e.jsx("input",{type:"text",value:o.reason,onChange:x=>c({...o,reason:x.target.value}),placeholder:"Reason",className:"border p-2 rounded mr-2"}),e.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-green-500 text-white rounded",children:"Adjust Stock"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Low Stock Items"}),i.length===0?e.jsx("p",{className:"text-gray-500",children:"No low stock items"}):e.jsx("div",{className:"space-y-2",children:i.map(x=>e.jsxs("div",{className:"border p-3 rounded",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"SKU:"})," ",x.sku]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Available:"})," ",x.quantity]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Threshold:"})," ",x.low_stock_threshold]})]},x.variant_id))})]})]}),e.jsx(Va,{open:p,onClose:()=>h(!1),onConfirm:g,title:"Adjust stock?",description:"Please confirm updating stock levels.",confirmText:"Adjust"})]})}function J9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState({name:"",channel:"amazon",credentials:{api_key:"",api_secret:""}}),l=async c=>{const u=await(await fetch(`/api/marketplaces/${c}/accounts`)).json();u.success&&(c==="amazon"?s(u.data):a(u.data))},o=async()=>{const c=n.channel==="amazon"?"/api/marketplaces/amazon/accounts":"/api/marketplaces/flipkart/accounts";(await(await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n.name,credentials:n.credentials})})).json()).success&&(alert("Account created successfully"),i({name:"",channel:"amazon",credentials:{api_key:"",api_secret:""}}),l(n.channel))};return b.useEffect(()=>{l("amazon"),l("flipkart")},[]),e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Marketplace Integrations"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Connect and manage marketplace accounts"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Add New Marketplace Account"}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsxs("select",{value:n.channel,onChange:c=>i({...n,channel:c.target.value}),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"},children:[e.jsx("option",{value:"amazon",children:"Amazon"}),e.jsx("option",{value:"flipkart",children:"Flipkart"})]}),e.jsx("input",{type:"text",value:n.name,onChange:c=>i({...n,name:c.target.value}),placeholder:"Account name",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("input",{type:"text",value:n.credentials.api_key,onChange:c=>i({...n,credentials:{...n.credentials,api_key:c.target.value}}),placeholder:"API Key",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("input",{type:"text",value:n.credentials.api_secret,onChange:c=>i({...n,credentials:{...n.credentials,api_secret:c.target.value}}),placeholder:"API Secret",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("button",{onClick:o,className:"btn-primary",children:"Create Account"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Amazon Accounts"}),t.length===0?e.jsx("p",{style:{color:"var(--text-muted)"},children:"No accounts"}):e.jsx("div",{className:"space-y-3",children:t.map(c=>e.jsxs("div",{className:"border p-4 rounded-xl transition-colors hover:bg-[var(--arctic-blue-lighter)]",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsx("p",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:e.jsx("strong",{children:c.name})}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:c.is_active?"Active":"Inactive"})]},c.id))})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Flipkart Accounts"}),r.length===0?e.jsx("p",{style:{color:"var(--text-muted)"},children:"No accounts"}):e.jsx("div",{className:"space-y-3",children:r.map(c=>e.jsxs("div",{className:"border p-4 rounded-xl transition-colors hover:bg-[var(--arctic-blue-lighter)]",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsx("p",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:e.jsx("strong",{children:c.name})}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:c.is_active?"Active":"Inactive"})]},c.id))})]})]})]})}function K9(){const[t,s]=b.useState([]),[r,a]=b.useState({name:"",address:{}}),n=async()=>{const o=await(await fetch("/api/warehouses")).json();o.success&&s(o.data)},i=async()=>{(await(await fetch("/api/warehouses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json()).success&&(alert("Warehouse created"),a({name:"",address:{}}),n())};return b.useEffect(()=>{n()},[]),e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Warehouse Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage your warehouse locations and inventory"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Add Warehouse"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:r.name,onChange:l=>a({...r,name:l.target.value}),placeholder:"Warehouse name",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)] flex-1",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("button",{onClick:i,className:"btn-primary",children:"Create Warehouse"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"All Warehouses"}),t.length===0?e.jsx("p",{style:{color:"var(--text-muted)"},children:"No warehouses"}):e.jsx("div",{className:"space-y-3",children:t.map(l=>e.jsxs("div",{className:"border p-4 rounded-xl transition-colors hover:bg-[var(--arctic-blue-lighter)]",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsx("p",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:e.jsx("strong",{children:l.name})}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:l.is_active?"Active":"Inactive"})]},l.id))})]})]})}function Y9(){const[t,s]=b.useState([]),[r,a]=b.useState({staff_id:"",opening_amount:""}),n=async()=>{const o=await(await fetch("/api/pos/transactions")).json();o.success&&s(o.data)},i=async()=>{(await(await fetch("/api/pos/sessions/open",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({staff_id:Number(r.staff_id),opening_amount:Number(r.opening_amount)})})).json()).success&&(alert("POS session opened"),a({staff_id:"",opening_amount:""}))};return b.useEffect(()=>{n()},[]),e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"POS System"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage point of sale transactions and sessions"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Open POS Session"}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsx("input",{type:"number",value:r.staff_id,onChange:l=>a({...r,staff_id:l.target.value}),placeholder:"Staff ID",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("input",{type:"number",value:r.opening_amount,onChange:l=>a({...r,opening_amount:l.target.value}),placeholder:"Opening amount",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("button",{onClick:i,className:"btn-primary",children:"Open Session"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Recent Transactions"}),t.length===0?e.jsx("p",{style:{color:"var(--text-muted)"},children:"No transactions"}):e.jsx("div",{className:"space-y-3",children:t.map(l=>e.jsxs("div",{className:"border p-4 rounded-xl transition-colors hover:bg-[var(--arctic-blue-lighter)]",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsxs("p",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Transaction:"})," ",l.transaction_number]}),e.jsxs("p",{style:{color:"var(--text-secondary)"},children:[e.jsx("strong",{children:"Total:"})," ",l.total]}),e.jsxs("p",{style:{color:"var(--text-secondary)"},children:[e.jsx("strong",{children:"Method:"})," ",l.payment_method]}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:new Date(l.created_at).toLocaleString()})]},l.id))})]})]})}function X9(){const[t,s]=b.useState({page_id:"",access_token:""}),[r,a]=b.useState(null),[n,i]=b.useState([]),[l,o]=b.useState(!1),[c,d]=b.useState(null),[u,p]=b.useState({brand:"Nefol",condition:"new",availability:"in stock"}),[h,g]=b.useState(null),f=(()=>{if(typeof window<"u"){const y=window.location.hostname;if(y==="thenefol.com"||y==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),m=b.useMemo(()=>({"Content-Type":"application/json"}),[]),j=async()=>{var R;const N=await(await fetch("/api/fb-shop/config",{method:"POST",headers:m,body:JSON.stringify(t)})).json();(N.success||(R=N.data)!=null&&R.success)&&alert("Configuration saved")},v=async()=>{try{o(!0);const N=await(await fetch("/api/facebook/sync-errors")).json();i((N==null?void 0:N.data)||N||[])}finally{o(!1)}},w=async()=>{try{const N=await(await fetch("/api/facebook/field-mapping")).json(),R=(N==null?void 0:N.data)||N||{};p(T=>({...T,...R}))}catch{}},S=async()=>{try{const N=await(await fetch("/api/facebook/sync/last")).json();g(N)}catch{}};b.useEffect(()=>{v(),w(),S()},[]),b.useEffect(()=>{let y;const N=async()=>{var z;if(!c)return;const T=await(await fetch(`/api/facebook/sync/status/${c}`)).json();a((T==null?void 0:T.data)||T),(z=(T==null?void 0:T.data)||T)!=null&&z.running&&(y=setTimeout(N,500))};return N(),()=>y&&clearTimeout(y)},[c]);const F=async()=>{var T;a(null),d(null);const N=await(await fetch("/api/facebook/sync-products",{method:"POST",headers:m})).json(),R=(T=(N==null?void 0:N.data)||N)==null?void 0:T.jobId;d(R)},E=async()=>{var T;a(null),d(null);const N=await(await fetch("/api/facebook/sync-stock-price",{method:"POST",headers:m,body:JSON.stringify({})})).json(),R=(T=(N==null?void 0:N.data)||N)==null?void 0:T.jobId;d(R)},k=async()=>{await fetch("/api/facebook/sync-errors/clear",{method:"POST"}),await v()},A=async()=>{const y=await fetch("/api/facebook/field-mapping",{method:"POST",headers:m,body:JSON.stringify(u)}),N=await y.json();if(!y.ok)return alert((N==null?void 0:N.error)||"Failed to save mapping");alert("Mapping saved")};return e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"FB Shop Integration"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Sync products with Facebook Shop"})]}),h&&e.jsxs("div",{className:"metric-card",style:{backgroundColor:"var(--arctic-blue-lighter)"},children:[e.jsx("b",{children:"Last auto-sync:"})," ",h.lastRun?new Date(h.lastRun).toLocaleString():"Never",h.result&&h.result.error&&e.jsxs("span",{className:"ml-3 text-red-700",children:["Error: ",h.result.error]})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Facebook/Instagram Shop Integration"}),e.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded",children:e.jsxs("p",{className:"text-yellow-800",children:[e.jsx("strong",{children:"Note:"})," Background sync with progress and a CSV feed are ready. Replace stubs with Graph API calls when credentials are finalized."]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 bg-white rounded border",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Configuration"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Page ID"}),e.jsx("input",{type:"text",value:t.page_id,onChange:y=>s({...t,page_id:y.target.value}),className:"border p-2 rounded w-full",placeholder:"Facebook Page ID"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Access Token"}),e.jsx("input",{type:"text",value:t.access_token,onChange:y=>s({...t,access_token:y.target.value}),className:"border p-2 rounded w-full",placeholder:"Long-lived access token"})]}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Save Configuration"}),e.jsxs("div",{className:"mt-4 text-sm",children:[e.jsx("div",{children:"Catalog Feed URL:"}),e.jsxs("a",{className:"text-blue-600 underline",href:`${f}/api/facebook/catalog.csv`,target:"_blank",rel:"noreferrer",children:[f||window.location.origin,"/api/facebook/catalog.csv"]})]})]}),e.jsxs("div",{className:"p-4 bg-white rounded border",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Sync Actions"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{onClick:F,className:"px-4 py-2 bg-slate-900 text-white rounded",children:"Sync All Products"}),e.jsx("button",{onClick:E,className:"px-4 py-2 bg-indigo-600 text-white rounded",children:"Sync Stock & Price"})]}),r&&e.jsxs("div",{className:"mt-4 p-3 bg-slate-50 rounded text-sm",children:[e.jsxs("div",{className:"mb-2",children:["Job: ",r.id," (",r.type,")"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded h-3 overflow-hidden",children:e.jsx("div",{className:"bg-green-600 h-3",style:{width:`${Math.min(100,Math.floor((r.success+r.failed)/Math.max(1,r.total)*100))}%`}})}),e.jsxs("div",{className:"mt-2",children:[r.success+r.failed,"/",r.total," processed  Success: ",r.success,"  Failed: ",r.failed," ",r.running?"(running...)":"(done)"]})]})]})]})]}),e.jsxs("div",{className:"p-4 bg-white rounded border",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Field Mapping"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Brand"}),e.jsx("input",{className:"input",value:u.brand||"",onChange:y=>p({...u,brand:y.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Condition"}),e.jsx("input",{className:"input",value:u.condition||"",onChange:y=>p({...u,condition:y.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Availability"}),e.jsx("input",{className:"input",value:u.availability||"",onChange:y=>p({...u,availability:y.target.value})})]})]}),e.jsx("button",{onClick:A,className:"mt-3 px-4 py-2 bg-slate-900 text-white rounded",children:"Save Mapping"})]}),e.jsxs("div",{className:"p-4 bg-white rounded border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"font-semibold",children:"Sync Errors"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:v,className:"px-3 py-1 border rounded",children:"Refresh"}),e.jsx("button",{onClick:k,className:"px-3 py-1 bg-red-600 text-white rounded",children:"Clear"})]})]}),l?"Loading...":e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pr-4",children:"Time"}),e.jsx("th",{className:"py-2 pr-4",children:"Product ID"}),e.jsx("th",{className:"py-2 pr-4",children:"Code"}),e.jsx("th",{className:"py-2 pr-4",children:"Message"}),e.jsx("th",{className:"py-2 pr-4",children:"Payload"})]})}),e.jsxs("tbody",{children:[n.map(y=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 pr-4",children:new Date(y.created_at).toLocaleString()}),e.jsx("td",{className:"py-2 pr-4",children:y.product_id||"-"}),e.jsx("td",{className:"py-2 pr-4",children:y.code||"-"}),e.jsx("td",{className:"py-2 pr-4",children:y.message||"-"}),e.jsx("td",{className:"py-2 pr-4",children:e.jsx("pre",{className:"whitespace-pre-wrap text-xs",children:y.payload?JSON.stringify(y.payload):"-"})})]},y.id)),n.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"py-2 pr-4",colSpan:5,children:"No errors"})})]})]})})]})]})}function Q9(){const t=b.useRef(!1);return b.useEffect(()=>{if(t.current)return;t.current=!0,console.log("?? Initializing admin socket connection..."),Xe.connect();const s=Xe.subscribe("order_created",x=>{console.log("? New order created:",x),"Notification"in window&&Notification.permission==="granted"&&new Notification("New Order!",{body:`Order #${x.order_number||x.id||"N/A"} received`,icon:"/favicon.ico"})}),r=Xe.subscribe("orders_created",x=>{console.log("? Order created (batch):",x)}),a=Xe.subscribe("order_updated",x=>{console.log("?? Order updated:",x)}),n=Xe.subscribe("orders_updated",x=>{console.log("?? Order updated (batch):",x)}),i=Xe.subscribe("user_profile_updated",x=>{console.log("?? User profile updated:",x)}),l=Xe.subscribe("users_created",x=>{console.log("?? New user registered:",x)}),o=Xe.subscribe("products_created",x=>{console.log("??? Product created:",x)}),c=Xe.subscribe("products_updated",x=>{console.log("??? Product updated:",x)}),d=Xe.subscribe("products_deleted",x=>{console.log("??? Product deleted:",x)}),u=Xe.subscribe("delivery_status_updated",x=>{console.log("?? Delivery status updated:",x)}),p=Xe.subscribe("contact_message_created",x=>{console.log("?? New contact message:",x),"Notification"in window&&Notification.permission==="granted"&&new Notification("New Contact Message!",{body:`Message from ${x.name}`,icon:"/favicon.ico"})}),h=Xe.subscribe("contact_message_updated",x=>{console.log("?? Contact message updated:",x)}),g=Xe.subscribe("update",x=>{var f;x.type==="whatsapp-subscription"&&(console.log("?? New WhatsApp subscription:",x.data),"Notification"in window&&Notification.permission==="granted"&&new Notification("New WhatsApp Subscription!",{body:x.data.message||`New subscription: ${(f=x.data.subscription)==null?void 0:f.phone}`,icon:"/favicon.ico"}))});return"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission(),()=>{s(),r(),a(),n(),i(),l(),o(),c(),d(),u(),p(),h(),g()}},[]),e.jsx(Jk,{children:e.jsx(oS,{children:e.jsxs(kk,{children:[e.jsx(Me,{path:"/admin/login",element:e.jsx(g9,{})}),e.jsx(Me,{path:"/admin",element:e.jsx(Kk,{}),children:e.jsxs(Me,{element:e.jsx(lS,{}),children:[e.jsx(Me,{index:!0,element:e.jsx(No,{to:"/admin/dashboard",replace:!0})}),e.jsx(Me,{path:"dashboard",element:e.jsx(dS,{})}),e.jsx(Me,{path:"products",element:e.jsx(v8,{})}),e.jsx(Me,{path:"product-variants",element:e.jsx(G9,{})}),e.jsx(Me,{path:"categories",element:e.jsx(fS,{})}),e.jsx(Me,{path:"product-collections",element:e.jsx(r9,{})}),e.jsx(Me,{path:"inventory",element:e.jsx(q9,{})}),e.jsx(Me,{path:"warehouses",element:e.jsx(K9,{})}),e.jsx(Me,{path:"orders",element:e.jsx(uS,{})}),e.jsx(Me,{path:"orders/:orderNumber",element:e.jsx(p9,{})}),e.jsx(Me,{path:"shipments",element:e.jsx(f9,{})}),e.jsx(Me,{path:"returns",element:e.jsx(B8,{})}),e.jsx(Me,{path:"customers",element:e.jsx(mS,{})}),e.jsx(Me,{path:"users",element:e.jsx(hS,{})}),e.jsx(Me,{path:"users/:id",element:e.jsx(h9,{})}),e.jsx(Me,{path:"user-profiles",element:e.jsx(J8,{})}),e.jsx(Me,{path:"user-notifications",element:e.jsx(K8,{})}),e.jsx(Me,{path:"contact-messages",element:e.jsx(V9,{})}),e.jsx(Me,{path:"invoices",element:e.jsx(R8,{})}),e.jsx(Me,{path:"invoice-settings",element:e.jsx(I8,{})}),e.jsx(Me,{path:"tax",element:e.jsx(M8,{})}),e.jsx(Me,{path:"payment",element:e.jsx(z8,{})}),e.jsx(Me,{path:"payment-options",element:e.jsx(z9,{})}),e.jsx(Me,{path:"coin-withdrawals",element:e.jsx(H9,{})}),e.jsx(Me,{path:"marketing",element:e.jsx(N8,{})}),e.jsx(Me,{path:"meta-ads",element:e.jsx(S8,{})}),e.jsx(Me,{path:"discounts",element:e.jsx(E8,{})}),e.jsx(Me,{path:"whatsapp-subscriptions",element:e.jsx(T8,{})}),e.jsx(Me,{path:"whatsapp-notifications",element:e.jsx(S9,{})}),e.jsx(Me,{path:"whatsapp-chat",element:e.jsx(C9,{})}),e.jsx(Me,{path:"whatsapp-management",element:e.jsx(_9,{})}),e.jsx(Me,{path:"analytics",element:e.jsx(w8,{})}),e.jsx(Me,{path:"advanced-analytics",element:e.jsx(E9,{})}),e.jsx(Me,{path:"actionable-analytics",element:e.jsx(L9,{})}),e.jsx(Me,{path:"journey-tracking",element:e.jsx(R9,{})}),e.jsx(Me,{path:"journey-funnel",element:e.jsx(I9,{})}),e.jsx(Me,{path:"loyalty-program",element:e.jsx(N9,{})}),e.jsx(Me,{path:"loyalty-program-management",element:e.jsx(Y8,{})}),e.jsx(Me,{path:"affiliate-program",element:e.jsx(o9,{})}),e.jsx(Me,{path:"affiliate-requests",element:e.jsx(c9,{})}),e.jsx(Me,{path:"cashback",element:e.jsx(k9,{})}),e.jsx(Me,{path:"live-chat",element:e.jsx(T9,{})}),e.jsx(Me,{path:"customer-segmentation",element:e.jsx(D9,{})}),e.jsx(Me,{path:"ai-box",element:e.jsx(O9,{})}),e.jsx(Me,{path:"ai-personalization",element:e.jsx(M9,{})}),e.jsx(Me,{path:"custom-audience",element:e.jsx(B9,{})}),e.jsx(Me,{path:"cms",element:e.jsx(y9,{})}),e.jsx(Me,{path:"static-pages",element:e.jsx(X8,{})}),e.jsx(Me,{path:"community-management",element:e.jsx(Q8,{})}),e.jsx(Me,{path:"homepage-layout",element:e.jsx(t9,{})}),e.jsx(Me,{path:"blog-requests",element:e.jsx(j9,{})}),e.jsx(Me,{path:"video-manager",element:e.jsx(W9,{})}),e.jsx(Me,{path:"cart-checkout",element:e.jsx(l9,{})}),e.jsx(Me,{path:"forms",element:e.jsx(D8,{})}),e.jsx(Me,{path:"form-builder",element:e.jsx(A9,{})}),e.jsx(Me,{path:"form-submissions",element:e.jsx(F9,{})}),e.jsx(Me,{path:"workflow-automation",element:e.jsx(P9,{})}),e.jsx(Me,{path:"omni-channel",element:e.jsx($9,{})}),e.jsx(Me,{path:"api-manager",element:e.jsx(U9,{})}),e.jsx(Me,{path:"marketplaces",element:e.jsx(ms,{role:"admin",children:e.jsx(J9,{})})}),e.jsx(Me,{path:"facebook",element:e.jsx(A8,{})}),e.jsx(Me,{path:"fb-shop",element:e.jsx(X9,{})}),e.jsx(Me,{path:"store",element:e.jsx(F8,{})}),e.jsx(Me,{path:"google",element:e.jsx(P8,{})}),e.jsx(Me,{path:"pos",element:e.jsx(ms,{anyOf:["pos:read","pos:update"],children:e.jsx(Y9,{})})}),e.jsx(Me,{path:"settings",element:e.jsx(pS,{})}),e.jsx(Me,{path:"system/alerts",element:e.jsx(ms,{role:"admin",children:e.jsx(m9,{})})}),e.jsx(Me,{path:"system/staff",element:e.jsx(ms,{role:"admin",children:e.jsx(d9,{})})}),e.jsx(Me,{path:"system/roles",element:e.jsx(ms,{role:"admin",children:e.jsx(u9,{})})}),e.jsx(Me,{path:"system/audit-logs",element:e.jsx(ms,{role:"admin",children:e.jsx(x9,{})})}),e.jsx(Me,{path:"account-security",element:e.jsx(H8,{})})]})}),e.jsx(Me,{path:"*",element:e.jsx(No,{to:"/admin/dashboard",replace:!0})})]})})})}const Z9=Fk([{path:"/*",element:e.jsx(Q9,{})}]);J0.createRoot(document.getElementById("root")).render(e.jsx(yx.StrictMode,{children:e.jsx($k,{router:Z9})}));
