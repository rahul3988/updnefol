var Aj=Object.defineProperty;var Fj=(t,s,r)=>s in t?Aj(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var Ca=(t,s,r)=>Fj(t,typeof s!="symbol"?s+"":s,r);function Vp(t,s){for(var r=0;r<s.length;r++){const a=s[r];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in t)){const i=Object.getOwnPropertyDescriptor(a,n);i&&Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();function Hp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gp={exports:{}},Sd={},qp={exports:{}},xt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ro=Symbol.for("react.element"),Pj=Symbol.for("react.portal"),Dj=Symbol.for("react.fragment"),Rj=Symbol.for("react.strict_mode"),Lj=Symbol.for("react.profiler"),Oj=Symbol.for("react.provider"),Ij=Symbol.for("react.context"),Mj=Symbol.for("react.forward_ref"),Bj=Symbol.for("react.suspense"),$j=Symbol.for("react.memo"),Uj=Symbol.for("react.lazy"),qm=Symbol.iterator;function zj(t){return t===null||typeof t!="object"?null:(t=qm&&t[qm]||t["@@iterator"],typeof t=="function"?t:null)}var Jp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kp=Object.assign,Yp={};function sl(t,s,r){this.props=t,this.context=s,this.refs=Yp,this.updater=r||Jp}sl.prototype.isReactComponent={};sl.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};sl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Xp(){}Xp.prototype=sl.prototype;function ux(t,s,r){this.props=t,this.context=s,this.refs=Yp,this.updater=r||Jp}var xx=ux.prototype=new Xp;xx.constructor=ux;Kp(xx,sl.prototype);xx.isPureReactComponent=!0;var Jm=Array.isArray,Qp=Object.prototype.hasOwnProperty,mx={current:null},Zp={key:!0,ref:!0,__self:!0,__source:!0};function eg(t,s,r){var a,n={},i=null,l=null;if(s!=null)for(a in s.ref!==void 0&&(l=s.ref),s.key!==void 0&&(i=""+s.key),s)Qp.call(s,a)&&!Zp.hasOwnProperty(a)&&(n[a]=s[a]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(t&&t.defaultProps)for(a in o=t.defaultProps,o)n[a]===void 0&&(n[a]=o[a]);return{$$typeof:Ro,type:t,key:i,ref:l,props:n,_owner:mx.current}}function Wj(t,s){return{$$typeof:Ro,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function hx(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ro}function Vj(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var Km=/\/+/g;function Xd(t,s){return typeof t=="object"&&t!==null&&t.key!=null?Vj(""+t.key):s.toString(36)}function Nc(t,s,r,a,n){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Ro:case Pj:l=!0}}if(l)return l=t,n=n(l),t=a===""?"."+Xd(l,0):a,Jm(n)?(r="",t!=null&&(r=t.replace(Km,"$&/")+"/"),Nc(n,s,r,"",function(d){return d})):n!=null&&(hx(n)&&(n=Wj(n,r+(!n.key||l&&l.key===n.key?"":(""+n.key).replace(Km,"$&/")+"/")+t)),s.push(n)),1;if(l=0,a=a===""?".":a+":",Jm(t))for(var o=0;o<t.length;o++){i=t[o];var c=a+Xd(i,o);l+=Nc(i,s,r,c,n)}else if(c=zj(t),typeof c=="function")for(t=c.call(t),o=0;!(i=t.next()).done;)i=i.value,c=a+Xd(i,o++),l+=Nc(i,s,r,c,n);else if(i==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return l}function Go(t,s,r){if(t==null)return t;var a=[],n=0;return Nc(t,a,"","",function(i){return s.call(r,i,n++)}),a}function Hj(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var er={current:null},kc={transition:null},Gj={ReactCurrentDispatcher:er,ReactCurrentBatchConfig:kc,ReactCurrentOwner:mx};function tg(){throw Error("act(...) is not supported in production builds of React.")}xt.Children={map:Go,forEach:function(t,s,r){Go(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return Go(t,function(){s++}),s},toArray:function(t){return Go(t,function(s){return s})||[]},only:function(t){if(!hx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xt.Component=sl;xt.Fragment=Dj;xt.Profiler=Lj;xt.PureComponent=ux;xt.StrictMode=Rj;xt.Suspense=Bj;xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gj;xt.act=tg;xt.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var a=Kp({},t.props),n=t.key,i=t.ref,l=t._owner;if(s!=null){if(s.ref!==void 0&&(i=s.ref,l=mx.current),s.key!==void 0&&(n=""+s.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in s)Qp.call(s,c)&&!Zp.hasOwnProperty(c)&&(a[c]=s[c]===void 0&&o!==void 0?o[c]:s[c])}var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];a.children=o}return{$$typeof:Ro,type:t.type,key:n,ref:i,props:a,_owner:l}};xt.createContext=function(t){return t={$$typeof:Ij,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Oj,_context:t},t.Consumer=t};xt.createElement=eg;xt.createFactory=function(t){var s=eg.bind(null,t);return s.type=t,s};xt.createRef=function(){return{current:null}};xt.forwardRef=function(t){return{$$typeof:Mj,render:t}};xt.isValidElement=hx;xt.lazy=function(t){return{$$typeof:Uj,_payload:{_status:-1,_result:t},_init:Hj}};xt.memo=function(t,s){return{$$typeof:$j,type:t,compare:s===void 0?null:s}};xt.startTransition=function(t){var s=kc.transition;kc.transition={};try{t()}finally{kc.transition=s}};xt.unstable_act=tg;xt.useCallback=function(t,s){return er.current.useCallback(t,s)};xt.useContext=function(t){return er.current.useContext(t)};xt.useDebugValue=function(){};xt.useDeferredValue=function(t){return er.current.useDeferredValue(t)};xt.useEffect=function(t,s){return er.current.useEffect(t,s)};xt.useId=function(){return er.current.useId()};xt.useImperativeHandle=function(t,s,r){return er.current.useImperativeHandle(t,s,r)};xt.useInsertionEffect=function(t,s){return er.current.useInsertionEffect(t,s)};xt.useLayoutEffect=function(t,s){return er.current.useLayoutEffect(t,s)};xt.useMemo=function(t,s){return er.current.useMemo(t,s)};xt.useReducer=function(t,s,r){return er.current.useReducer(t,s,r)};xt.useRef=function(t){return er.current.useRef(t)};xt.useState=function(t){return er.current.useState(t)};xt.useSyncExternalStore=function(t,s,r){return er.current.useSyncExternalStore(t,s,r)};xt.useTransition=function(){return er.current.useTransition()};xt.version="18.3.1";qp.exports=xt;var b=qp.exports;const fx=Hp(b),qj=Vp({__proto__:null,default:fx},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jj=b,Kj=Symbol.for("react.element"),Yj=Symbol.for("react.fragment"),Xj=Object.prototype.hasOwnProperty,Qj=Jj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zj={key:!0,ref:!0,__self:!0,__source:!0};function sg(t,s,r){var a,n={},i=null,l=null;r!==void 0&&(i=""+r),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(l=s.ref);for(a in s)Xj.call(s,a)&&!Zj.hasOwnProperty(a)&&(n[a]=s[a]);if(t&&t.defaultProps)for(a in s=t.defaultProps,s)n[a]===void 0&&(n[a]=s[a]);return{$$typeof:Kj,type:t,key:i,ref:l,props:n,_owner:Qj.current}}Sd.Fragment=Yj;Sd.jsx=sg;Sd.jsxs=sg;Gp.exports=Sd;var e=Gp.exports,H0={},rg={exports:{}},kr={},ag={exports:{}},ng={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(D,F){var V=D.length;D.push(F);e:for(;0<V;){var te=V-1>>>1,I=D[te];if(0<n(I,F))D[te]=F,D[V]=I,V=te;else break e}}function r(D){return D.length===0?null:D[0]}function a(D){if(D.length===0)return null;var F=D[0],V=D.pop();if(V!==F){D[0]=V;e:for(var te=0,I=D.length,U=I>>>1;te<U;){var z=2*(te+1)-1,Y=D[z],K=z+1,ne=D[K];if(0>n(Y,V))K<I&&0>n(ne,Y)?(D[te]=ne,D[K]=V,te=K):(D[te]=Y,D[z]=V,te=z);else if(K<I&&0>n(ne,V))D[te]=ne,D[K]=V,te=K;else break e}}return F}function n(D,F){var V=D.sortIndex-F.sortIndex;return V!==0?V:D.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,p=null,f=3,g=!1,x=!1,h=!1,m=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(D){for(var F=r(d);F!==null;){if(F.callback===null)a(d);else if(F.startTime<=D)a(d),F.sortIndex=F.expirationTime,s(c,F);else break;F=r(d)}}function S(D){if(h=!1,N(D),!x)if(r(c)!==null)x=!0,W(A);else{var F=r(d);F!==null&&Q(S,F.startTime-D)}}function A(D,F){x=!1,h&&(h=!1,j(_),_=-1),g=!0;var V=f;try{for(N(F),p=r(c);p!==null&&(!(p.expirationTime>F)||D&&!R());){var te=p.callback;if(typeof te=="function"){p.callback=null,f=p.priorityLevel;var I=te(p.expirationTime<=F);F=t.unstable_now(),typeof I=="function"?p.callback=I:p===r(c)&&a(c),N(F)}else a(c);p=r(c)}if(p!==null)var U=!0;else{var z=r(d);z!==null&&Q(S,z.startTime-F),U=!1}return U}finally{p=null,f=V,g=!1}}var T=!1,k=null,_=-1,y=5,w=-1;function R(){return!(t.unstable_now()-w<y)}function P(){if(k!==null){var D=t.unstable_now();w=D;var F=!0;try{F=k(!0,D)}finally{F?H():(T=!1,k=null)}}else T=!1}var H;if(typeof v=="function")H=function(){v(P)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,O=L.port2;L.port1.onmessage=P,H=function(){O.postMessage(null)}}else H=function(){m(P,0)};function W(D){k=D,T||(T=!0,H())}function Q(D,F){_=m(function(){D(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,W(A))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var V=f;f=F;try{return D()}finally{f=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,F){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var V=f;f=D;try{return F()}finally{f=V}},t.unstable_scheduleCallback=function(D,F,V){var te=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?te+V:te):V=te,D){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=V+I,D={id:u++,callback:F,priorityLevel:D,startTime:V,expirationTime:I,sortIndex:-1},V>te?(D.sortIndex=V,s(d,D),r(c)===null&&D===r(d)&&(h?(j(_),_=-1):h=!0,Q(S,V-te))):(D.sortIndex=I,s(c,D),x||g||(x=!0,W(A))),D},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(D){var F=f;return function(){var V=f;f=F;try{return D.apply(this,arguments)}finally{f=V}}}})(ng);ag.exports=ng;var e1=ag.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t1=b,wr=e1;function ke(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ig=new Set,eo={};function ci(t,s){Gi(t,s),Gi(t+"Capture",s)}function Gi(t,s){for(eo[t]=s,t=0;t<s.length;t++)ig.add(s[t])}var Ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),G0=Object.prototype.hasOwnProperty,s1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ym={},Xm={};function r1(t){return G0.call(Xm,t)?!0:G0.call(Ym,t)?!1:s1.test(t)?Xm[t]=!0:(Ym[t]=!0,!1)}function a1(t,s,r,a){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function n1(t,s,r,a){if(s===null||typeof s>"u"||a1(t,s,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function tr(t,s,r,a,n,i,l){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=i,this.removeEmptyString=l}var Fs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Fs[t]=new tr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];Fs[s]=new tr(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Fs[t]=new tr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Fs[t]=new tr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Fs[t]=new tr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Fs[t]=new tr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Fs[t]=new tr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Fs[t]=new tr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Fs[t]=new tr(t,5,!1,t.toLowerCase(),null,!1,!1)});var px=/[\-:]([a-z])/g;function gx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(px,gx);Fs[s]=new tr(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(px,gx);Fs[s]=new tr(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(px,gx);Fs[s]=new tr(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Fs[t]=new tr(t,1,!1,t.toLowerCase(),null,!1,!1)});Fs.xlinkHref=new tr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Fs[t]=new tr(t,1,!1,t.toLowerCase(),null,!0,!0)});function yx(t,s,r,a){var n=Fs.hasOwnProperty(s)?Fs[s]:null;(n!==null?n.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(n1(s,r,n,a)&&(r=null),a||n===null?r1(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):n.mustUseProperty?t[n.propertyName]=r===null?n.type===3?!1:"":r:(s=n.attributeName,a=n.attributeNamespace,r===null?t.removeAttribute(s):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,a?t.setAttributeNS(a,s,r):t.setAttribute(s,r))))}var Va=t1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qo=Symbol.for("react.element"),wi=Symbol.for("react.portal"),Ni=Symbol.for("react.fragment"),bx=Symbol.for("react.strict_mode"),q0=Symbol.for("react.profiler"),lg=Symbol.for("react.provider"),og=Symbol.for("react.context"),vx=Symbol.for("react.forward_ref"),J0=Symbol.for("react.suspense"),K0=Symbol.for("react.suspense_list"),jx=Symbol.for("react.memo"),en=Symbol.for("react.lazy"),cg=Symbol.for("react.offscreen"),Qm=Symbol.iterator;function xl(t){return t===null||typeof t!="object"?null:(t=Qm&&t[Qm]||t["@@iterator"],typeof t=="function"?t:null)}var Gt=Object.assign,Qd;function kl(t){if(Qd===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Qd=s&&s[1]||""}return`
`+Qd+t}var Zd=!1;function e0(t,s){if(!t||Zd)return"";Zd=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(d){var a=d}Reflect.construct(t,[],s)}else{try{s.call()}catch(d){a=d}t.call(s.prototype)}else{try{throw Error()}catch(d){a=d}t()}}catch(d){if(d&&a&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),i=a.stack.split(`
`),l=n.length-1,o=i.length-1;1<=l&&0<=o&&n[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(n[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||n[l]!==i[o]){var c=`
`+n[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{Zd=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?kl(t):""}function i1(t){switch(t.tag){case 5:return kl(t.type);case 16:return kl("Lazy");case 13:return kl("Suspense");case 19:return kl("SuspenseList");case 0:case 2:case 15:return t=e0(t.type,!1),t;case 11:return t=e0(t.type.render,!1),t;case 1:return t=e0(t.type,!0),t;default:return""}}function Y0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ni:return"Fragment";case wi:return"Portal";case q0:return"Profiler";case bx:return"StrictMode";case J0:return"Suspense";case K0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case og:return(t.displayName||"Context")+".Consumer";case lg:return(t._context.displayName||"Context")+".Provider";case vx:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jx:return s=t.displayName||null,s!==null?s:Y0(t.type)||"Memo";case en:s=t._payload,t=t._init;try{return Y0(t(s))}catch{}}return null}function l1(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Y0(s);case 8:return s===bx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Nn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dg(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function o1(t){var s=dg(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),a=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,i=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return n.call(this)},set:function(l){a=""+l,i.call(this,l)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(l){a=""+l},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Jo(t){t._valueTracker||(t._valueTracker=o1(t))}function ug(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),a="";return t&&(a=dg(t)?t.checked?"true":"false":t.value),t=a,t!==r?(s.setValue(t),!0):!1}function Uc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function X0(t,s){var r=s.checked;return Gt({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Zm(t,s){var r=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;r=Nn(s.value!=null?s.value:r),t._wrapperState={initialChecked:a,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function xg(t,s){s=s.checked,s!=null&&yx(t,"checked",s,!1)}function Q0(t,s){xg(t,s);var r=Nn(s.value),a=s.type;if(r!=null)a==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Z0(t,s.type,r):s.hasOwnProperty("defaultValue")&&Z0(t,s.type,Nn(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function eh(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Z0(t,s,r){(s!=="number"||Uc(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Sl=Array.isArray;function Li(t,s,r,a){if(t=t.options,s){s={};for(var n=0;n<r.length;n++)s["$"+r[n]]=!0;for(r=0;r<t.length;r++)n=s.hasOwnProperty("$"+t[r].value),t[r].selected!==n&&(t[r].selected=n),n&&a&&(t[r].defaultSelected=!0)}else{for(r=""+Nn(r),s=null,n=0;n<t.length;n++){if(t[n].value===r){t[n].selected=!0,a&&(t[n].defaultSelected=!0);return}s!==null||t[n].disabled||(s=t[n])}s!==null&&(s.selected=!0)}}function eu(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(ke(91));return Gt({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function th(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(ke(92));if(Sl(r)){if(1<r.length)throw Error(ke(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:Nn(r)}}function mg(t,s){var r=Nn(s.value),a=Nn(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),a!=null&&(t.defaultValue=""+a)}function sh(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function hg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tu(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?hg(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ko,fg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,a,n){MSApp.execUnsafeLocalFunction(function(){return t(s,r,a,n)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Ko=Ko||document.createElement("div"),Ko.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ko.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function to(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var Ll={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},c1=["Webkit","ms","Moz","O"];Object.keys(Ll).forEach(function(t){c1.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Ll[s]=Ll[t]})});function pg(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||Ll.hasOwnProperty(t)&&Ll[t]?(""+s).trim():s+"px"}function gg(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var a=r.indexOf("--")===0,n=pg(r,s[r],a);r==="float"&&(r="cssFloat"),a?t.setProperty(r,n):t[r]=n}}var d1=Gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function su(t,s){if(s){if(d1[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(ke(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(ke(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(ke(61))}if(s.style!=null&&typeof s.style!="object")throw Error(ke(62))}}function ru(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var au=null;function wx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var nu=null,Oi=null,Ii=null;function rh(t){if(t=Io(t)){if(typeof nu!="function")throw Error(ke(280));var s=t.stateNode;s&&(s=Ad(s),nu(t.stateNode,t.type,s))}}function yg(t){Oi?Ii?Ii.push(t):Ii=[t]:Oi=t}function bg(){if(Oi){var t=Oi,s=Ii;if(Ii=Oi=null,rh(t),s)for(t=0;t<s.length;t++)rh(s[t])}}function vg(t,s){return t(s)}function jg(){}var t0=!1;function wg(t,s,r){if(t0)return t(s,r);t0=!0;try{return vg(t,s,r)}finally{t0=!1,(Oi!==null||Ii!==null)&&(jg(),bg())}}function so(t,s){var r=t.stateNode;if(r===null)return null;var a=Ad(r);if(a===null)return null;r=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ke(231,s,typeof r));return r}var iu=!1;if(Ia)try{var ml={};Object.defineProperty(ml,"passive",{get:function(){iu=!0}}),window.addEventListener("test",ml,ml),window.removeEventListener("test",ml,ml)}catch{iu=!1}function u1(t,s,r,a,n,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{s.apply(r,d)}catch(u){this.onError(u)}}var Ol=!1,zc=null,Wc=!1,lu=null,x1={onError:function(t){Ol=!0,zc=t}};function m1(t,s,r,a,n,i,l,o,c){Ol=!1,zc=null,u1.apply(x1,arguments)}function h1(t,s,r,a,n,i,l,o,c){if(m1.apply(this,arguments),Ol){if(Ol){var d=zc;Ol=!1,zc=null}else throw Error(ke(198));Wc||(Wc=!0,lu=d)}}function di(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function Ng(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function ah(t){if(di(t)!==t)throw Error(ke(188))}function f1(t){var s=t.alternate;if(!s){if(s=di(t),s===null)throw Error(ke(188));return s!==t?null:t}for(var r=t,a=s;;){var n=r.return;if(n===null)break;var i=n.alternate;if(i===null){if(a=n.return,a!==null){r=a;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return ah(n),t;if(i===a)return ah(n),s;i=i.sibling}throw Error(ke(188))}if(r.return!==a.return)r=n,a=i;else{for(var l=!1,o=n.child;o;){if(o===r){l=!0,r=n,a=i;break}if(o===a){l=!0,a=n,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,a=n;break}if(o===a){l=!0,a=i,r=n;break}o=o.sibling}if(!l)throw Error(ke(189))}}if(r.alternate!==a)throw Error(ke(190))}if(r.tag!==3)throw Error(ke(188));return r.stateNode.current===r?t:s}function kg(t){return t=f1(t),t!==null?Sg(t):null}function Sg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Sg(t);if(s!==null)return s;t=t.sibling}return null}var Cg=wr.unstable_scheduleCallback,nh=wr.unstable_cancelCallback,p1=wr.unstable_shouldYield,g1=wr.unstable_requestPaint,es=wr.unstable_now,y1=wr.unstable_getCurrentPriorityLevel,Nx=wr.unstable_ImmediatePriority,_g=wr.unstable_UserBlockingPriority,Vc=wr.unstable_NormalPriority,b1=wr.unstable_LowPriority,Tg=wr.unstable_IdlePriority,Cd=null,ma=null;function v1(t){if(ma&&typeof ma.onCommitFiberRoot=="function")try{ma.onCommitFiberRoot(Cd,t,void 0,(t.current.flags&128)===128)}catch{}}var ta=Math.clz32?Math.clz32:N1,j1=Math.log,w1=Math.LN2;function N1(t){return t>>>=0,t===0?32:31-(j1(t)/w1|0)|0}var Yo=64,Xo=4194304;function Cl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hc(t,s){var r=t.pendingLanes;if(r===0)return 0;var a=0,n=t.suspendedLanes,i=t.pingedLanes,l=r&268435455;if(l!==0){var o=l&~n;o!==0?a=Cl(o):(i&=l,i!==0&&(a=Cl(i)))}else l=r&~n,l!==0?a=Cl(l):i!==0&&(a=Cl(i));if(a===0)return 0;if(s!==0&&s!==a&&!(s&n)&&(n=a&-a,i=s&-s,n>=i||n===16&&(i&4194240)!==0))return s;if(a&4&&(a|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=a;0<s;)r=31-ta(s),n=1<<r,a|=t[r],s&=~n;return a}function k1(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function S1(t,s){for(var r=t.suspendedLanes,a=t.pingedLanes,n=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-ta(i),o=1<<l,c=n[l];c===-1?(!(o&r)||o&a)&&(n[l]=k1(o,s)):c<=s&&(t.expiredLanes|=o),i&=~o}}function ou(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Eg(){var t=Yo;return Yo<<=1,!(Yo&4194240)&&(Yo=64),t}function s0(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function Lo(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-ta(s),t[s]=r}function C1(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<r;){var n=31-ta(r),i=1<<n;s[n]=0,a[n]=-1,t[n]=-1,r&=~i}}function kx(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var a=31-ta(r),n=1<<a;n&s|t[a]&s&&(t[a]|=s),r&=~n}}var Ft=0;function Ag(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Fg,Sx,Pg,Dg,Rg,cu=!1,Qo=[],un=null,xn=null,mn=null,ro=new Map,ao=new Map,sn=[],_1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ih(t,s){switch(t){case"focusin":case"focusout":un=null;break;case"dragenter":case"dragleave":xn=null;break;case"mouseover":case"mouseout":mn=null;break;case"pointerover":case"pointerout":ro.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ao.delete(s.pointerId)}}function hl(t,s,r,a,n,i){return t===null||t.nativeEvent!==i?(t={blockedOn:s,domEventName:r,eventSystemFlags:a,nativeEvent:i,targetContainers:[n]},s!==null&&(s=Io(s),s!==null&&Sx(s)),t):(t.eventSystemFlags|=a,s=t.targetContainers,n!==null&&s.indexOf(n)===-1&&s.push(n),t)}function T1(t,s,r,a,n){switch(s){case"focusin":return un=hl(un,t,s,r,a,n),!0;case"dragenter":return xn=hl(xn,t,s,r,a,n),!0;case"mouseover":return mn=hl(mn,t,s,r,a,n),!0;case"pointerover":var i=n.pointerId;return ro.set(i,hl(ro.get(i)||null,t,s,r,a,n)),!0;case"gotpointercapture":return i=n.pointerId,ao.set(i,hl(ao.get(i)||null,t,s,r,a,n)),!0}return!1}function Lg(t){var s=Un(t.target);if(s!==null){var r=di(s);if(r!==null){if(s=r.tag,s===13){if(s=Ng(r),s!==null){t.blockedOn=s,Rg(t.priority,function(){Pg(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sc(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=du(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var a=new r.constructor(r.type,r);au=a,r.target.dispatchEvent(a),au=null}else return s=Io(r),s!==null&&Sx(s),t.blockedOn=r,!1;s.shift()}return!0}function lh(t,s,r){Sc(t)&&r.delete(s)}function E1(){cu=!1,un!==null&&Sc(un)&&(un=null),xn!==null&&Sc(xn)&&(xn=null),mn!==null&&Sc(mn)&&(mn=null),ro.forEach(lh),ao.forEach(lh)}function fl(t,s){t.blockedOn===s&&(t.blockedOn=null,cu||(cu=!0,wr.unstable_scheduleCallback(wr.unstable_NormalPriority,E1)))}function no(t){function s(n){return fl(n,t)}if(0<Qo.length){fl(Qo[0],t);for(var r=1;r<Qo.length;r++){var a=Qo[r];a.blockedOn===t&&(a.blockedOn=null)}}for(un!==null&&fl(un,t),xn!==null&&fl(xn,t),mn!==null&&fl(mn,t),ro.forEach(s),ao.forEach(s),r=0;r<sn.length;r++)a=sn[r],a.blockedOn===t&&(a.blockedOn=null);for(;0<sn.length&&(r=sn[0],r.blockedOn===null);)Lg(r),r.blockedOn===null&&sn.shift()}var Mi=Va.ReactCurrentBatchConfig,Gc=!0;function A1(t,s,r,a){var n=Ft,i=Mi.transition;Mi.transition=null;try{Ft=1,Cx(t,s,r,a)}finally{Ft=n,Mi.transition=i}}function F1(t,s,r,a){var n=Ft,i=Mi.transition;Mi.transition=null;try{Ft=4,Cx(t,s,r,a)}finally{Ft=n,Mi.transition=i}}function Cx(t,s,r,a){if(Gc){var n=du(t,s,r,a);if(n===null)x0(t,s,a,qc,r),ih(t,a);else if(T1(n,t,s,r,a))a.stopPropagation();else if(ih(t,a),s&4&&-1<_1.indexOf(t)){for(;n!==null;){var i=Io(n);if(i!==null&&Fg(i),i=du(t,s,r,a),i===null&&x0(t,s,a,qc,r),i===n)break;n=i}n!==null&&a.stopPropagation()}else x0(t,s,a,null,r)}}var qc=null;function du(t,s,r,a){if(qc=null,t=wx(a),t=Un(t),t!==null)if(s=di(t),s===null)t=null;else if(r=s.tag,r===13){if(t=Ng(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return qc=t,null}function Og(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(y1()){case Nx:return 1;case _g:return 4;case Vc:case b1:return 16;case Tg:return 536870912;default:return 16}default:return 16}}var nn=null,_x=null,Cc=null;function Ig(){if(Cc)return Cc;var t,s=_x,r=s.length,a,n="value"in nn?nn.value:nn.textContent,i=n.length;for(t=0;t<r&&s[t]===n[t];t++);var l=r-t;for(a=1;a<=l&&s[r-a]===n[i-a];a++);return Cc=n.slice(t,1<a?1-a:void 0)}function _c(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Zo(){return!0}function oh(){return!1}function Sr(t){function s(r,a,n,i,l){this._reactName=r,this._targetInst=n,this.type=a,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zo:oh,this.isPropagationStopped=oh,this}return Gt(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zo)},persist:function(){},isPersistent:Zo}),s}var rl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tx=Sr(rl),Oo=Gt({},rl,{view:0,detail:0}),P1=Sr(Oo),r0,a0,pl,_d=Gt({},Oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ex,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pl&&(pl&&t.type==="mousemove"?(r0=t.screenX-pl.screenX,a0=t.screenY-pl.screenY):a0=r0=0,pl=t),r0)},movementY:function(t){return"movementY"in t?t.movementY:a0}}),ch=Sr(_d),D1=Gt({},_d,{dataTransfer:0}),R1=Sr(D1),L1=Gt({},Oo,{relatedTarget:0}),n0=Sr(L1),O1=Gt({},rl,{animationName:0,elapsedTime:0,pseudoElement:0}),I1=Sr(O1),M1=Gt({},rl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),B1=Sr(M1),$1=Gt({},rl,{data:0}),dh=Sr($1),U1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function V1(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=W1[t])?!!s[t]:!1}function Ex(){return V1}var H1=Gt({},Oo,{key:function(t){if(t.key){var s=U1[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=_c(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?z1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ex,charCode:function(t){return t.type==="keypress"?_c(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_c(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),G1=Sr(H1),q1=Gt({},_d,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uh=Sr(q1),J1=Gt({},Oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ex}),K1=Sr(J1),Y1=Gt({},rl,{propertyName:0,elapsedTime:0,pseudoElement:0}),X1=Sr(Y1),Q1=Gt({},_d,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Z1=Sr(Q1),ew=[9,13,27,32],Ax=Ia&&"CompositionEvent"in window,Il=null;Ia&&"documentMode"in document&&(Il=document.documentMode);var tw=Ia&&"TextEvent"in window&&!Il,Mg=Ia&&(!Ax||Il&&8<Il&&11>=Il),xh=" ",mh=!1;function Bg(t,s){switch(t){case"keyup":return ew.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $g(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ki=!1;function sw(t,s){switch(t){case"compositionend":return $g(s);case"keypress":return s.which!==32?null:(mh=!0,xh);case"textInput":return t=s.data,t===xh&&mh?null:t;default:return null}}function rw(t,s){if(ki)return t==="compositionend"||!Ax&&Bg(t,s)?(t=Ig(),Cc=_x=nn=null,ki=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Mg&&s.locale!=="ko"?null:s.data;default:return null}}var aw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!aw[t.type]:s==="textarea"}function Ug(t,s,r,a){yg(a),s=Jc(s,"onChange"),0<s.length&&(r=new Tx("onChange","change",null,r,a),t.push({event:r,listeners:s}))}var Ml=null,io=null;function nw(t){Qg(t,0)}function Td(t){var s=_i(t);if(ug(s))return t}function iw(t,s){if(t==="change")return s}var zg=!1;if(Ia){var i0;if(Ia){var l0="oninput"in document;if(!l0){var fh=document.createElement("div");fh.setAttribute("oninput","return;"),l0=typeof fh.oninput=="function"}i0=l0}else i0=!1;zg=i0&&(!document.documentMode||9<document.documentMode)}function ph(){Ml&&(Ml.detachEvent("onpropertychange",Wg),io=Ml=null)}function Wg(t){if(t.propertyName==="value"&&Td(io)){var s=[];Ug(s,io,t,wx(t)),wg(nw,s)}}function lw(t,s,r){t==="focusin"?(ph(),Ml=s,io=r,Ml.attachEvent("onpropertychange",Wg)):t==="focusout"&&ph()}function ow(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Td(io)}function cw(t,s){if(t==="click")return Td(s)}function dw(t,s){if(t==="input"||t==="change")return Td(s)}function uw(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var na=typeof Object.is=="function"?Object.is:uw;function lo(t,s){if(na(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),a=Object.keys(s);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!G0.call(s,n)||!na(t[n],s[n]))return!1}return!0}function gh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yh(t,s){var r=gh(t);t=0;for(var a;r;){if(r.nodeType===3){if(a=t+r.textContent.length,t<=s&&a>=s)return{node:r,offset:s-t};t=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=gh(r)}}function Vg(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Vg(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Hg(){for(var t=window,s=Uc();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=Uc(t.document)}return s}function Fx(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function xw(t){var s=Hg(),r=t.focusedElem,a=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&Vg(r.ownerDocument.documentElement,r)){if(a!==null&&Fx(r)){if(s=a.start,t=a.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var n=r.textContent.length,i=Math.min(a.start,n);a=a.end===void 0?i:Math.min(a.end,n),!t.extend&&i>a&&(n=a,a=i,i=n),n=yh(r,i);var l=yh(r,a);n&&l&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(s=s.createRange(),s.setStart(n.node,n.offset),t.removeAllRanges(),i>a?(t.addRange(s),t.extend(l.node,l.offset)):(s.setEnd(l.node,l.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mw=Ia&&"documentMode"in document&&11>=document.documentMode,Si=null,uu=null,Bl=null,xu=!1;function bh(t,s,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;xu||Si==null||Si!==Uc(a)||(a=Si,"selectionStart"in a&&Fx(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Bl&&lo(Bl,a)||(Bl=a,a=Jc(uu,"onSelect"),0<a.length&&(s=new Tx("onSelect","select",null,s,r),t.push({event:s,listeners:a}),s.target=Si)))}function ec(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Ci={animationend:ec("Animation","AnimationEnd"),animationiteration:ec("Animation","AnimationIteration"),animationstart:ec("Animation","AnimationStart"),transitionend:ec("Transition","TransitionEnd")},o0={},Gg={};Ia&&(Gg=document.createElement("div").style,"AnimationEvent"in window||(delete Ci.animationend.animation,delete Ci.animationiteration.animation,delete Ci.animationstart.animation),"TransitionEvent"in window||delete Ci.transitionend.transition);function Ed(t){if(o0[t])return o0[t];if(!Ci[t])return t;var s=Ci[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in Gg)return o0[t]=s[r];return t}var qg=Ed("animationend"),Jg=Ed("animationiteration"),Kg=Ed("animationstart"),Yg=Ed("transitionend"),Xg=new Map,vh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tn(t,s){Xg.set(t,s),ci(s,[t])}for(var c0=0;c0<vh.length;c0++){var d0=vh[c0],hw=d0.toLowerCase(),fw=d0[0].toUpperCase()+d0.slice(1);Tn(hw,"on"+fw)}Tn(qg,"onAnimationEnd");Tn(Jg,"onAnimationIteration");Tn(Kg,"onAnimationStart");Tn("dblclick","onDoubleClick");Tn("focusin","onFocus");Tn("focusout","onBlur");Tn(Yg,"onTransitionEnd");Gi("onMouseEnter",["mouseout","mouseover"]);Gi("onMouseLeave",["mouseout","mouseover"]);Gi("onPointerEnter",["pointerout","pointerover"]);Gi("onPointerLeave",["pointerout","pointerover"]);ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ci("onBeforeInput",["compositionend","keypress","textInput","paste"]);ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pw=new Set("cancel close invalid load scroll toggle".split(" ").concat(_l));function jh(t,s,r){var a=t.type||"unknown-event";t.currentTarget=r,h1(a,s,void 0,t),t.currentTarget=null}function Qg(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var a=t[r],n=a.event;a=a.listeners;e:{var i=void 0;if(s)for(var l=a.length-1;0<=l;l--){var o=a[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&n.isPropagationStopped())break e;jh(n,o,d),i=c}else for(l=0;l<a.length;l++){if(o=a[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&n.isPropagationStopped())break e;jh(n,o,d),i=c}}}if(Wc)throw t=lu,Wc=!1,lu=null,t}function Ot(t,s){var r=s[gu];r===void 0&&(r=s[gu]=new Set);var a=t+"__bubble";r.has(a)||(Zg(s,t,2,!1),r.add(a))}function u0(t,s,r){var a=0;s&&(a|=4),Zg(r,t,a,s)}var tc="_reactListening"+Math.random().toString(36).slice(2);function oo(t){if(!t[tc]){t[tc]=!0,ig.forEach(function(r){r!=="selectionchange"&&(pw.has(r)||u0(r,!1,t),u0(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[tc]||(s[tc]=!0,u0("selectionchange",!1,s))}}function Zg(t,s,r,a){switch(Og(s)){case 1:var n=A1;break;case 4:n=F1;break;default:n=Cx}r=n.bind(null,s,r,t),n=void 0,!iu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(n=!0),a?n!==void 0?t.addEventListener(s,r,{capture:!0,passive:n}):t.addEventListener(s,r,!0):n!==void 0?t.addEventListener(s,r,{passive:n}):t.addEventListener(s,r,!1)}function x0(t,s,r,a,n){var i=a;if(!(s&1)&&!(s&2)&&a!==null)e:for(;;){if(a===null)return;var l=a.tag;if(l===3||l===4){var o=a.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(l===4)for(l=a.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;l=l.return}for(;o!==null;){if(l=Un(o),l===null)return;if(c=l.tag,c===5||c===6){a=i=l;continue e}o=o.parentNode}}a=a.return}wg(function(){var d=i,u=wx(r),p=[];e:{var f=Xg.get(t);if(f!==void 0){var g=Tx,x=t;switch(t){case"keypress":if(_c(r)===0)break e;case"keydown":case"keyup":g=G1;break;case"focusin":x="focus",g=n0;break;case"focusout":x="blur",g=n0;break;case"beforeblur":case"afterblur":g=n0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=ch;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=R1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=K1;break;case qg:case Jg:case Kg:g=I1;break;case Yg:g=X1;break;case"scroll":g=P1;break;case"wheel":g=Z1;break;case"copy":case"cut":case"paste":g=B1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=uh}var h=(s&4)!==0,m=!h&&t==="scroll",j=h?f!==null?f+"Capture":null:f;h=[];for(var v=d,N;v!==null;){N=v;var S=N.stateNode;if(N.tag===5&&S!==null&&(N=S,j!==null&&(S=so(v,j),S!=null&&h.push(co(v,S,N)))),m)break;v=v.return}0<h.length&&(f=new g(f,x,null,r,u),p.push({event:f,listeners:h}))}}if(!(s&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&r!==au&&(x=r.relatedTarget||r.fromElement)&&(Un(x)||x[Ma]))break e;if((g||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,g?(x=r.relatedTarget||r.toElement,g=d,x=x?Un(x):null,x!==null&&(m=di(x),x!==m||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=d),g!==x)){if(h=ch,S="onMouseLeave",j="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(h=uh,S="onPointerLeave",j="onPointerEnter",v="pointer"),m=g==null?f:_i(g),N=x==null?f:_i(x),f=new h(S,v+"leave",g,r,u),f.target=m,f.relatedTarget=N,S=null,Un(u)===d&&(h=new h(j,v+"enter",x,r,u),h.target=N,h.relatedTarget=m,S=h),m=S,g&&x)t:{for(h=g,j=x,v=0,N=h;N;N=yi(N))v++;for(N=0,S=j;S;S=yi(S))N++;for(;0<v-N;)h=yi(h),v--;for(;0<N-v;)j=yi(j),N--;for(;v--;){if(h===j||j!==null&&h===j.alternate)break t;h=yi(h),j=yi(j)}h=null}else h=null;g!==null&&wh(p,f,g,h,!1),x!==null&&m!==null&&wh(p,m,x,h,!0)}}e:{if(f=d?_i(d):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var A=iw;else if(hh(f))if(zg)A=dw;else{A=ow;var T=lw}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(A=cw);if(A&&(A=A(t,d))){Ug(p,A,r,u);break e}T&&T(t,f,d),t==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&Z0(f,"number",f.value)}switch(T=d?_i(d):window,t){case"focusin":(hh(T)||T.contentEditable==="true")&&(Si=T,uu=d,Bl=null);break;case"focusout":Bl=uu=Si=null;break;case"mousedown":xu=!0;break;case"contextmenu":case"mouseup":case"dragend":xu=!1,bh(p,r,u);break;case"selectionchange":if(mw)break;case"keydown":case"keyup":bh(p,r,u)}var k;if(Ax)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ki?Bg(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(Mg&&r.locale!=="ko"&&(ki||_!=="onCompositionStart"?_==="onCompositionEnd"&&ki&&(k=Ig()):(nn=u,_x="value"in nn?nn.value:nn.textContent,ki=!0)),T=Jc(d,_),0<T.length&&(_=new dh(_,t,null,r,u),p.push({event:_,listeners:T}),k?_.data=k:(k=$g(r),k!==null&&(_.data=k)))),(k=tw?sw(t,r):rw(t,r))&&(d=Jc(d,"onBeforeInput"),0<d.length&&(u=new dh("onBeforeInput","beforeinput",null,r,u),p.push({event:u,listeners:d}),u.data=k))}Qg(p,s)})}function co(t,s,r){return{instance:t,listener:s,currentTarget:r}}function Jc(t,s){for(var r=s+"Capture",a=[];t!==null;){var n=t,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=so(t,r),i!=null&&a.unshift(co(t,i,n)),i=so(t,s),i!=null&&a.push(co(t,i,n))),t=t.return}return a}function yi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function wh(t,s,r,a,n){for(var i=s._reactName,l=[];r!==null&&r!==a;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===a)break;o.tag===5&&d!==null&&(o=d,n?(c=so(r,i),c!=null&&l.unshift(co(r,c,o))):n||(c=so(r,i),c!=null&&l.push(co(r,c,o)))),r=r.return}l.length!==0&&t.push({event:s,listeners:l})}var gw=/\r\n?/g,yw=/\u0000|\uFFFD/g;function Nh(t){return(typeof t=="string"?t:""+t).replace(gw,`
`).replace(yw,"")}function sc(t,s,r){if(s=Nh(s),Nh(t)!==s&&r)throw Error(ke(425))}function Kc(){}var mu=null,hu=null;function fu(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var pu=typeof setTimeout=="function"?setTimeout:void 0,bw=typeof clearTimeout=="function"?clearTimeout:void 0,kh=typeof Promise=="function"?Promise:void 0,vw=typeof queueMicrotask=="function"?queueMicrotask:typeof kh<"u"?function(t){return kh.resolve(null).then(t).catch(jw)}:pu;function jw(t){setTimeout(function(){throw t})}function m0(t,s){var r=s,a=0;do{var n=r.nextSibling;if(t.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(a===0){t.removeChild(n),no(s);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=n}while(r);no(s)}function hn(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Sh(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var al=Math.random().toString(36).slice(2),xa="__reactFiber$"+al,uo="__reactProps$"+al,Ma="__reactContainer$"+al,gu="__reactEvents$"+al,ww="__reactListeners$"+al,Nw="__reactHandles$"+al;function Un(t){var s=t[xa];if(s)return s;for(var r=t.parentNode;r;){if(s=r[Ma]||r[xa]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=Sh(t);t!==null;){if(r=t[xa])return r;t=Sh(t)}return s}t=r,r=t.parentNode}return null}function Io(t){return t=t[xa]||t[Ma],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _i(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ke(33))}function Ad(t){return t[uo]||null}var yu=[],Ti=-1;function En(t){return{current:t}}function It(t){0>Ti||(t.current=yu[Ti],yu[Ti]=null,Ti--)}function Dt(t,s){Ti++,yu[Ti]=t.current,t.current=s}var kn={},zs=En(kn),cr=En(!1),Qn=kn;function qi(t,s){var r=t.type.contextTypes;if(!r)return kn;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in r)n[i]=s[i];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=n),n}function dr(t){return t=t.childContextTypes,t!=null}function Yc(){It(cr),It(zs)}function Ch(t,s,r){if(zs.current!==kn)throw Error(ke(168));Dt(zs,s),Dt(cr,r)}function ey(t,s,r){var a=t.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var n in a)if(!(n in s))throw Error(ke(108,l1(t)||"Unknown",n));return Gt({},r,a)}function Xc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kn,Qn=zs.current,Dt(zs,t),Dt(cr,cr.current),!0}function _h(t,s,r){var a=t.stateNode;if(!a)throw Error(ke(169));r?(t=ey(t,s,Qn),a.__reactInternalMemoizedMergedChildContext=t,It(cr),It(zs),Dt(zs,t)):It(cr),Dt(cr,r)}var Ta=null,Fd=!1,h0=!1;function ty(t){Ta===null?Ta=[t]:Ta.push(t)}function kw(t){Fd=!0,ty(t)}function An(){if(!h0&&Ta!==null){h0=!0;var t=0,s=Ft;try{var r=Ta;for(Ft=1;t<r.length;t++){var a=r[t];do a=a(!0);while(a!==null)}Ta=null,Fd=!1}catch(n){throw Ta!==null&&(Ta=Ta.slice(t+1)),Cg(Nx,An),n}finally{Ft=s,h0=!1}}return null}var Ei=[],Ai=0,Qc=null,Zc=0,Ar=[],Fr=0,Zn=null,Ea=1,Aa="";function Rn(t,s){Ei[Ai++]=Zc,Ei[Ai++]=Qc,Qc=t,Zc=s}function sy(t,s,r){Ar[Fr++]=Ea,Ar[Fr++]=Aa,Ar[Fr++]=Zn,Zn=t;var a=Ea;t=Aa;var n=32-ta(a)-1;a&=~(1<<n),r+=1;var i=32-ta(s)+n;if(30<i){var l=n-n%5;i=(a&(1<<l)-1).toString(32),a>>=l,n-=l,Ea=1<<32-ta(s)+n|r<<n|a,Aa=i+t}else Ea=1<<i|r<<n|a,Aa=t}function Px(t){t.return!==null&&(Rn(t,1),sy(t,1,0))}function Dx(t){for(;t===Qc;)Qc=Ei[--Ai],Ei[Ai]=null,Zc=Ei[--Ai],Ei[Ai]=null;for(;t===Zn;)Zn=Ar[--Fr],Ar[Fr]=null,Aa=Ar[--Fr],Ar[Fr]=null,Ea=Ar[--Fr],Ar[Fr]=null}var jr=null,br=null,Ut=!1,Xr=null;function ry(t,s){var r=Rr(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function Th(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,jr=t,br=hn(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,jr=t,br=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=Zn!==null?{id:Ea,overflow:Aa}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=Rr(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,jr=t,br=null,!0):!1;default:return!1}}function bu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vu(t){if(Ut){var s=br;if(s){var r=s;if(!Th(t,s)){if(bu(t))throw Error(ke(418));s=hn(r.nextSibling);var a=jr;s&&Th(t,s)?ry(a,r):(t.flags=t.flags&-4097|2,Ut=!1,jr=t)}}else{if(bu(t))throw Error(ke(418));t.flags=t.flags&-4097|2,Ut=!1,jr=t}}}function Eh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jr=t}function rc(t){if(t!==jr)return!1;if(!Ut)return Eh(t),Ut=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!fu(t.type,t.memoizedProps)),s&&(s=br)){if(bu(t))throw ay(),Error(ke(418));for(;s;)ry(t,s),s=hn(s.nextSibling)}if(Eh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ke(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){br=hn(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}br=null}}else br=jr?hn(t.stateNode.nextSibling):null;return!0}function ay(){for(var t=br;t;)t=hn(t.nextSibling)}function Ji(){br=jr=null,Ut=!1}function Rx(t){Xr===null?Xr=[t]:Xr.push(t)}var Sw=Va.ReactCurrentBatchConfig;function gl(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ke(309));var a=r.stateNode}if(!a)throw Error(ke(147,t));var n=a,i=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===i?s.ref:(s=function(l){var o=n.refs;l===null?delete o[i]:o[i]=l},s._stringRef=i,s)}if(typeof t!="string")throw Error(ke(284));if(!r._owner)throw Error(ke(290,t))}return t}function ac(t,s){throw t=Object.prototype.toString.call(s),Error(ke(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Ah(t){var s=t._init;return s(t._payload)}function ny(t){function s(j,v){if(t){var N=j.deletions;N===null?(j.deletions=[v],j.flags|=16):N.push(v)}}function r(j,v){if(!t)return null;for(;v!==null;)s(j,v),v=v.sibling;return null}function a(j,v){for(j=new Map;v!==null;)v.key!==null?j.set(v.key,v):j.set(v.index,v),v=v.sibling;return j}function n(j,v){return j=yn(j,v),j.index=0,j.sibling=null,j}function i(j,v,N){return j.index=N,t?(N=j.alternate,N!==null?(N=N.index,N<v?(j.flags|=2,v):N):(j.flags|=2,v)):(j.flags|=1048576,v)}function l(j){return t&&j.alternate===null&&(j.flags|=2),j}function o(j,v,N,S){return v===null||v.tag!==6?(v=j0(N,j.mode,S),v.return=j,v):(v=n(v,N),v.return=j,v)}function c(j,v,N,S){var A=N.type;return A===Ni?u(j,v,N.props.children,S,N.key):v!==null&&(v.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===en&&Ah(A)===v.type)?(S=n(v,N.props),S.ref=gl(j,v,N),S.return=j,S):(S=Rc(N.type,N.key,N.props,null,j.mode,S),S.ref=gl(j,v,N),S.return=j,S)}function d(j,v,N,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==N.containerInfo||v.stateNode.implementation!==N.implementation?(v=w0(N,j.mode,S),v.return=j,v):(v=n(v,N.children||[]),v.return=j,v)}function u(j,v,N,S,A){return v===null||v.tag!==7?(v=qn(N,j.mode,S,A),v.return=j,v):(v=n(v,N),v.return=j,v)}function p(j,v,N){if(typeof v=="string"&&v!==""||typeof v=="number")return v=j0(""+v,j.mode,N),v.return=j,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case qo:return N=Rc(v.type,v.key,v.props,null,j.mode,N),N.ref=gl(j,null,v),N.return=j,N;case wi:return v=w0(v,j.mode,N),v.return=j,v;case en:var S=v._init;return p(j,S(v._payload),N)}if(Sl(v)||xl(v))return v=qn(v,j.mode,N,null),v.return=j,v;ac(j,v)}return null}function f(j,v,N,S){var A=v!==null?v.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return A!==null?null:o(j,v,""+N,S);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case qo:return N.key===A?c(j,v,N,S):null;case wi:return N.key===A?d(j,v,N,S):null;case en:return A=N._init,f(j,v,A(N._payload),S)}if(Sl(N)||xl(N))return A!==null?null:u(j,v,N,S,null);ac(j,N)}return null}function g(j,v,N,S,A){if(typeof S=="string"&&S!==""||typeof S=="number")return j=j.get(N)||null,o(v,j,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case qo:return j=j.get(S.key===null?N:S.key)||null,c(v,j,S,A);case wi:return j=j.get(S.key===null?N:S.key)||null,d(v,j,S,A);case en:var T=S._init;return g(j,v,N,T(S._payload),A)}if(Sl(S)||xl(S))return j=j.get(N)||null,u(v,j,S,A,null);ac(v,S)}return null}function x(j,v,N,S){for(var A=null,T=null,k=v,_=v=0,y=null;k!==null&&_<N.length;_++){k.index>_?(y=k,k=null):y=k.sibling;var w=f(j,k,N[_],S);if(w===null){k===null&&(k=y);break}t&&k&&w.alternate===null&&s(j,k),v=i(w,v,_),T===null?A=w:T.sibling=w,T=w,k=y}if(_===N.length)return r(j,k),Ut&&Rn(j,_),A;if(k===null){for(;_<N.length;_++)k=p(j,N[_],S),k!==null&&(v=i(k,v,_),T===null?A=k:T.sibling=k,T=k);return Ut&&Rn(j,_),A}for(k=a(j,k);_<N.length;_++)y=g(k,j,_,N[_],S),y!==null&&(t&&y.alternate!==null&&k.delete(y.key===null?_:y.key),v=i(y,v,_),T===null?A=y:T.sibling=y,T=y);return t&&k.forEach(function(R){return s(j,R)}),Ut&&Rn(j,_),A}function h(j,v,N,S){var A=xl(N);if(typeof A!="function")throw Error(ke(150));if(N=A.call(N),N==null)throw Error(ke(151));for(var T=A=null,k=v,_=v=0,y=null,w=N.next();k!==null&&!w.done;_++,w=N.next()){k.index>_?(y=k,k=null):y=k.sibling;var R=f(j,k,w.value,S);if(R===null){k===null&&(k=y);break}t&&k&&R.alternate===null&&s(j,k),v=i(R,v,_),T===null?A=R:T.sibling=R,T=R,k=y}if(w.done)return r(j,k),Ut&&Rn(j,_),A;if(k===null){for(;!w.done;_++,w=N.next())w=p(j,w.value,S),w!==null&&(v=i(w,v,_),T===null?A=w:T.sibling=w,T=w);return Ut&&Rn(j,_),A}for(k=a(j,k);!w.done;_++,w=N.next())w=g(k,j,_,w.value,S),w!==null&&(t&&w.alternate!==null&&k.delete(w.key===null?_:w.key),v=i(w,v,_),T===null?A=w:T.sibling=w,T=w);return t&&k.forEach(function(P){return s(j,P)}),Ut&&Rn(j,_),A}function m(j,v,N,S){if(typeof N=="object"&&N!==null&&N.type===Ni&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case qo:e:{for(var A=N.key,T=v;T!==null;){if(T.key===A){if(A=N.type,A===Ni){if(T.tag===7){r(j,T.sibling),v=n(T,N.props.children),v.return=j,j=v;break e}}else if(T.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===en&&Ah(A)===T.type){r(j,T.sibling),v=n(T,N.props),v.ref=gl(j,T,N),v.return=j,j=v;break e}r(j,T);break}else s(j,T);T=T.sibling}N.type===Ni?(v=qn(N.props.children,j.mode,S,N.key),v.return=j,j=v):(S=Rc(N.type,N.key,N.props,null,j.mode,S),S.ref=gl(j,v,N),S.return=j,j=S)}return l(j);case wi:e:{for(T=N.key;v!==null;){if(v.key===T)if(v.tag===4&&v.stateNode.containerInfo===N.containerInfo&&v.stateNode.implementation===N.implementation){r(j,v.sibling),v=n(v,N.children||[]),v.return=j,j=v;break e}else{r(j,v);break}else s(j,v);v=v.sibling}v=w0(N,j.mode,S),v.return=j,j=v}return l(j);case en:return T=N._init,m(j,v,T(N._payload),S)}if(Sl(N))return x(j,v,N,S);if(xl(N))return h(j,v,N,S);ac(j,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,v!==null&&v.tag===6?(r(j,v.sibling),v=n(v,N),v.return=j,j=v):(r(j,v),v=j0(N,j.mode,S),v.return=j,j=v),l(j)):r(j,v)}return m}var Ki=ny(!0),iy=ny(!1),ed=En(null),td=null,Fi=null,Lx=null;function Ox(){Lx=Fi=td=null}function Ix(t){var s=ed.current;It(ed),t._currentValue=s}function ju(t,s,r){for(;t!==null;){var a=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),t===r)break;t=t.return}}function Bi(t,s){td=t,Lx=Fi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(or=!0),t.firstContext=null)}function Or(t){var s=t._currentValue;if(Lx!==t)if(t={context:t,memoizedValue:s,next:null},Fi===null){if(td===null)throw Error(ke(308));Fi=t,td.dependencies={lanes:0,firstContext:t}}else Fi=Fi.next=t;return s}var zn=null;function Mx(t){zn===null?zn=[t]:zn.push(t)}function ly(t,s,r,a){var n=s.interleaved;return n===null?(r.next=r,Mx(s)):(r.next=n.next,n.next=r),s.interleaved=r,Ba(t,a)}function Ba(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var tn=!1;function Bx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oy(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pa(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function fn(t,s,r){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,Nt&2){var n=a.pending;return n===null?s.next=s:(s.next=n.next,n.next=s),a.pending=s,Ba(t,r)}return n=a.interleaved,n===null?(s.next=s,Mx(a)):(s.next=n.next,n.next=s),a.interleaved=s,Ba(t,r)}function Tc(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,kx(t,r)}}function Fh(t,s){var r=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var n=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?n=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?n=i=s:i=i.next=s}else n=i=s;r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:a.shared,effects:a.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function sd(t,s,r,a){var n=t.updateQueue;tn=!1;var i=n.firstBaseUpdate,l=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var p=n.baseState;l=0,u=d=c=null,o=i;do{var f=o.lane,g=o.eventTime;if((a&f)===f){u!==null&&(u=u.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var x=t,h=o;switch(f=s,g=r,h.tag){case 1:if(x=h.payload,typeof x=="function"){p=x.call(g,p,f);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=h.payload,f=typeof x=="function"?x.call(g,p,f):x,f==null)break e;p=Gt({},p,f);break e;case 2:tn=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=n.effects,f===null?n.effects=[o]:f.push(o))}else g={eventTime:g,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=g,c=p):u=u.next=g,l|=f;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;f=o,o=f.next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}while(!0);if(u===null&&(c=p),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=u,s=n.shared.interleaved,s!==null){n=s;do l|=n.lane,n=n.next;while(n!==s)}else i===null&&(n.shared.lanes=0);ti|=l,t.lanes=l,t.memoizedState=p}}function Ph(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var a=t[s],n=a.callback;if(n!==null){if(a.callback=null,a=r,typeof n!="function")throw Error(ke(191,n));n.call(a)}}}var Mo={},ha=En(Mo),xo=En(Mo),mo=En(Mo);function Wn(t){if(t===Mo)throw Error(ke(174));return t}function $x(t,s){switch(Dt(mo,s),Dt(xo,t),Dt(ha,Mo),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:tu(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=tu(s,t)}It(ha),Dt(ha,s)}function Yi(){It(ha),It(xo),It(mo)}function cy(t){Wn(mo.current);var s=Wn(ha.current),r=tu(s,t.type);s!==r&&(Dt(xo,t),Dt(ha,r))}function Ux(t){xo.current===t&&(It(ha),It(xo))}var Wt=En(0);function rd(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var f0=[];function zx(){for(var t=0;t<f0.length;t++)f0[t]._workInProgressVersionPrimary=null;f0.length=0}var Ec=Va.ReactCurrentDispatcher,p0=Va.ReactCurrentBatchConfig,ei=0,Ht=null,xs=null,js=null,ad=!1,$l=!1,ho=0,Cw=0;function Ds(){throw Error(ke(321))}function Wx(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!na(t[r],s[r]))return!1;return!0}function Vx(t,s,r,a,n,i){if(ei=i,Ht=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ec.current=t===null||t.memoizedState===null?Aw:Fw,t=r(a,n),$l){i=0;do{if($l=!1,ho=0,25<=i)throw Error(ke(301));i+=1,js=xs=null,s.updateQueue=null,Ec.current=Pw,t=r(a,n)}while($l)}if(Ec.current=nd,s=xs!==null&&xs.next!==null,ei=0,js=xs=Ht=null,ad=!1,s)throw Error(ke(300));return t}function Hx(){var t=ho!==0;return ho=0,t}function ua(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return js===null?Ht.memoizedState=js=t:js=js.next=t,js}function Ir(){if(xs===null){var t=Ht.alternate;t=t!==null?t.memoizedState:null}else t=xs.next;var s=js===null?Ht.memoizedState:js.next;if(s!==null)js=s,xs=t;else{if(t===null)throw Error(ke(310));xs=t,t={memoizedState:xs.memoizedState,baseState:xs.baseState,baseQueue:xs.baseQueue,queue:xs.queue,next:null},js===null?Ht.memoizedState=js=t:js=js.next=t}return js}function fo(t,s){return typeof s=="function"?s(t):s}function g0(t){var s=Ir(),r=s.queue;if(r===null)throw Error(ke(311));r.lastRenderedReducer=t;var a=xs,n=a.baseQueue,i=r.pending;if(i!==null){if(n!==null){var l=n.next;n.next=i.next,i.next=l}a.baseQueue=n=i,r.pending=null}if(n!==null){i=n.next,a=a.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((ei&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:t(a,d.action);else{var p={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=p,l=a):c=c.next=p,Ht.lanes|=u,ti|=u}d=d.next}while(d!==null&&d!==i);c===null?l=a:c.next=o,na(a,s.memoizedState)||(or=!0),s.memoizedState=a,s.baseState=l,s.baseQueue=c,r.lastRenderedState=a}if(t=r.interleaved,t!==null){n=t;do i=n.lane,Ht.lanes|=i,ti|=i,n=n.next;while(n!==t)}else n===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function y0(t){var s=Ir(),r=s.queue;if(r===null)throw Error(ke(311));r.lastRenderedReducer=t;var a=r.dispatch,n=r.pending,i=s.memoizedState;if(n!==null){r.pending=null;var l=n=n.next;do i=t(i,l.action),l=l.next;while(l!==n);na(i,s.memoizedState)||(or=!0),s.memoizedState=i,s.baseQueue===null&&(s.baseState=i),r.lastRenderedState=i}return[i,a]}function dy(){}function uy(t,s){var r=Ht,a=Ir(),n=s(),i=!na(a.memoizedState,n);if(i&&(a.memoizedState=n,or=!0),a=a.queue,Gx(hy.bind(null,r,a,t),[t]),a.getSnapshot!==s||i||js!==null&&js.memoizedState.tag&1){if(r.flags|=2048,po(9,my.bind(null,r,a,n,s),void 0,null),Ns===null)throw Error(ke(349));ei&30||xy(r,s,n)}return n}function xy(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=Ht.updateQueue,s===null?(s={lastEffect:null,stores:null},Ht.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function my(t,s,r,a){s.value=r,s.getSnapshot=a,fy(s)&&py(t)}function hy(t,s,r){return r(function(){fy(s)&&py(t)})}function fy(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!na(t,r)}catch{return!0}}function py(t){var s=Ba(t,1);s!==null&&sa(s,t,1,-1)}function Dh(t){var s=ua();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:t},s.queue=t,t=t.dispatch=Ew.bind(null,Ht,t),[s.memoizedState,t]}function po(t,s,r,a){return t={tag:t,create:s,destroy:r,deps:a,next:null},s=Ht.updateQueue,s===null?(s={lastEffect:null,stores:null},Ht.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(a=r.next,r.next=t,t.next=a,s.lastEffect=t)),t}function gy(){return Ir().memoizedState}function Ac(t,s,r,a){var n=ua();Ht.flags|=t,n.memoizedState=po(1|s,r,void 0,a===void 0?null:a)}function Pd(t,s,r,a){var n=Ir();a=a===void 0?null:a;var i=void 0;if(xs!==null){var l=xs.memoizedState;if(i=l.destroy,a!==null&&Wx(a,l.deps)){n.memoizedState=po(s,r,i,a);return}}Ht.flags|=t,n.memoizedState=po(1|s,r,i,a)}function Rh(t,s){return Ac(8390656,8,t,s)}function Gx(t,s){return Pd(2048,8,t,s)}function yy(t,s){return Pd(4,2,t,s)}function by(t,s){return Pd(4,4,t,s)}function vy(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function jy(t,s,r){return r=r!=null?r.concat([t]):null,Pd(4,4,vy.bind(null,s,t),r)}function qx(){}function wy(t,s){var r=Ir();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&Wx(s,a[1])?a[0]:(r.memoizedState=[t,s],t)}function Ny(t,s){var r=Ir();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&Wx(s,a[1])?a[0]:(t=t(),r.memoizedState=[t,s],t)}function ky(t,s,r){return ei&21?(na(r,s)||(r=Eg(),Ht.lanes|=r,ti|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,or=!0),t.memoizedState=r)}function _w(t,s){var r=Ft;Ft=r!==0&&4>r?r:4,t(!0);var a=p0.transition;p0.transition={};try{t(!1),s()}finally{Ft=r,p0.transition=a}}function Sy(){return Ir().memoizedState}function Tw(t,s,r){var a=gn(t);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},Cy(t))_y(s,r);else if(r=ly(t,s,r,a),r!==null){var n=Ys();sa(r,t,a,n),Ty(r,s,a)}}function Ew(t,s,r){var a=gn(t),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(Cy(t))_y(s,n);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=s.lastRenderedReducer,i!==null))try{var l=s.lastRenderedState,o=i(l,r);if(n.hasEagerState=!0,n.eagerState=o,na(o,l)){var c=s.interleaved;c===null?(n.next=n,Mx(s)):(n.next=c.next,c.next=n),s.interleaved=n;return}}catch{}finally{}r=ly(t,s,n,a),r!==null&&(n=Ys(),sa(r,t,a,n),Ty(r,s,a))}}function Cy(t){var s=t.alternate;return t===Ht||s!==null&&s===Ht}function _y(t,s){$l=ad=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function Ty(t,s,r){if(r&4194240){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,kx(t,r)}}var nd={readContext:Or,useCallback:Ds,useContext:Ds,useEffect:Ds,useImperativeHandle:Ds,useInsertionEffect:Ds,useLayoutEffect:Ds,useMemo:Ds,useReducer:Ds,useRef:Ds,useState:Ds,useDebugValue:Ds,useDeferredValue:Ds,useTransition:Ds,useMutableSource:Ds,useSyncExternalStore:Ds,useId:Ds,unstable_isNewReconciler:!1},Aw={readContext:Or,useCallback:function(t,s){return ua().memoizedState=[t,s===void 0?null:s],t},useContext:Or,useEffect:Rh,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,Ac(4194308,4,vy.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Ac(4194308,4,t,s)},useInsertionEffect:function(t,s){return Ac(4,2,t,s)},useMemo:function(t,s){var r=ua();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var a=ua();return s=r!==void 0?r(s):s,a.memoizedState=a.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=Tw.bind(null,Ht,t),[a.memoizedState,t]},useRef:function(t){var s=ua();return t={current:t},s.memoizedState=t},useState:Dh,useDebugValue:qx,useDeferredValue:function(t){return ua().memoizedState=t},useTransition:function(){var t=Dh(!1),s=t[0];return t=_w.bind(null,t[1]),ua().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var a=Ht,n=ua();if(Ut){if(r===void 0)throw Error(ke(407));r=r()}else{if(r=s(),Ns===null)throw Error(ke(349));ei&30||xy(a,s,r)}n.memoizedState=r;var i={value:r,getSnapshot:s};return n.queue=i,Rh(hy.bind(null,a,i,t),[t]),a.flags|=2048,po(9,my.bind(null,a,i,r,s),void 0,null),r},useId:function(){var t=ua(),s=Ns.identifierPrefix;if(Ut){var r=Aa,a=Ea;r=(a&~(1<<32-ta(a)-1)).toString(32)+r,s=":"+s+"R"+r,r=ho++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=Cw++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},Fw={readContext:Or,useCallback:wy,useContext:Or,useEffect:Gx,useImperativeHandle:jy,useInsertionEffect:yy,useLayoutEffect:by,useMemo:Ny,useReducer:g0,useRef:gy,useState:function(){return g0(fo)},useDebugValue:qx,useDeferredValue:function(t){var s=Ir();return ky(s,xs.memoizedState,t)},useTransition:function(){var t=g0(fo)[0],s=Ir().memoizedState;return[t,s]},useMutableSource:dy,useSyncExternalStore:uy,useId:Sy,unstable_isNewReconciler:!1},Pw={readContext:Or,useCallback:wy,useContext:Or,useEffect:Gx,useImperativeHandle:jy,useInsertionEffect:yy,useLayoutEffect:by,useMemo:Ny,useReducer:y0,useRef:gy,useState:function(){return y0(fo)},useDebugValue:qx,useDeferredValue:function(t){var s=Ir();return xs===null?s.memoizedState=t:ky(s,xs.memoizedState,t)},useTransition:function(){var t=y0(fo)[0],s=Ir().memoizedState;return[t,s]},useMutableSource:dy,useSyncExternalStore:uy,useId:Sy,unstable_isNewReconciler:!1};function qr(t,s){if(t&&t.defaultProps){s=Gt({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function wu(t,s,r,a){s=t.memoizedState,r=r(a,s),r=r==null?s:Gt({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Dd={isMounted:function(t){return(t=t._reactInternals)?di(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var a=Ys(),n=gn(t),i=Pa(a,n);i.payload=s,r!=null&&(i.callback=r),s=fn(t,i,n),s!==null&&(sa(s,t,n,a),Tc(s,t,n))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var a=Ys(),n=gn(t),i=Pa(a,n);i.tag=1,i.payload=s,r!=null&&(i.callback=r),s=fn(t,i,n),s!==null&&(sa(s,t,n,a),Tc(s,t,n))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=Ys(),a=gn(t),n=Pa(r,a);n.tag=2,s!=null&&(n.callback=s),s=fn(t,n,a),s!==null&&(sa(s,t,a,r),Tc(s,t,a))}};function Lh(t,s,r,a,n,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,i,l):s.prototype&&s.prototype.isPureReactComponent?!lo(r,a)||!lo(n,i):!0}function Ey(t,s,r){var a=!1,n=kn,i=s.contextType;return typeof i=="object"&&i!==null?i=Or(i):(n=dr(s)?Qn:zs.current,a=s.contextTypes,i=(a=a!=null)?qi(t,n):kn),s=new s(r,i),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Dd,t.stateNode=s,s._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=i),s}function Oh(t,s,r,a){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,a),s.state!==t&&Dd.enqueueReplaceState(s,s.state,null)}function Nu(t,s,r,a){var n=t.stateNode;n.props=r,n.state=t.memoizedState,n.refs={},Bx(t);var i=s.contextType;typeof i=="object"&&i!==null?n.context=Or(i):(i=dr(s)?Qn:zs.current,n.context=qi(t,i)),n.state=t.memoizedState,i=s.getDerivedStateFromProps,typeof i=="function"&&(wu(t,s,i,r),n.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(s=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),s!==n.state&&Dd.enqueueReplaceState(n,n.state,null),sd(t,r,n,a),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function Xi(t,s){try{var r="",a=s;do r+=i1(a),a=a.return;while(a);var n=r}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:s,stack:n,digest:null}}function b0(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function ku(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var Dw=typeof WeakMap=="function"?WeakMap:Map;function Ay(t,s,r){r=Pa(-1,r),r.tag=3,r.payload={element:null};var a=s.value;return r.callback=function(){ld||(ld=!0,Ru=a),ku(t,s)},r}function Fy(t,s,r){r=Pa(-1,r),r.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var n=s.value;r.payload=function(){return a(n)},r.callback=function(){ku(t,s)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){ku(t,s),typeof a!="function"&&(pn===null?pn=new Set([this]):pn.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})}),r}function Ih(t,s,r){var a=t.pingCache;if(a===null){a=t.pingCache=new Dw;var n=new Set;a.set(s,n)}else n=a.get(s),n===void 0&&(n=new Set,a.set(s,n));n.has(r)||(n.add(r),t=qw.bind(null,t,s,r),s.then(t,t))}function Mh(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Bh(t,s,r,a,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=Pa(-1,1),s.tag=2,fn(r,s,1))),r.lanes|=1),t)}var Rw=Va.ReactCurrentOwner,or=!1;function Gs(t,s,r,a){s.child=t===null?iy(s,null,r,a):Ki(s,t.child,r,a)}function $h(t,s,r,a,n){r=r.render;var i=s.ref;return Bi(s,n),a=Vx(t,s,r,a,i,n),r=Hx(),t!==null&&!or?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,$a(t,s,n)):(Ut&&r&&Px(s),s.flags|=1,Gs(t,s,a,n),s.child)}function Uh(t,s,r,a,n){if(t===null){var i=r.type;return typeof i=="function"&&!tm(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=i,Py(t,s,i,a,n)):(t=Rc(r.type,null,a,s,s.mode,n),t.ref=s.ref,t.return=s,s.child=t)}if(i=t.child,!(t.lanes&n)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:lo,r(l,a)&&t.ref===s.ref)return $a(t,s,n)}return s.flags|=1,t=yn(i,a),t.ref=s.ref,t.return=s,s.child=t}function Py(t,s,r,a,n){if(t!==null){var i=t.memoizedProps;if(lo(i,a)&&t.ref===s.ref)if(or=!1,s.pendingProps=a=i,(t.lanes&n)!==0)t.flags&131072&&(or=!0);else return s.lanes=t.lanes,$a(t,s,n)}return Su(t,s,r,a,n)}function Dy(t,s,r){var a=s.pendingProps,n=a.children,i=t!==null?t.memoizedState:null;if(a.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(Di,fr),fr|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Dt(Di,fr),fr|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:r,Dt(Di,fr),fr|=a}else i!==null?(a=i.baseLanes|r,s.memoizedState=null):a=r,Dt(Di,fr),fr|=a;return Gs(t,s,n,r),s.child}function Ry(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function Su(t,s,r,a,n){var i=dr(r)?Qn:zs.current;return i=qi(s,i),Bi(s,n),r=Vx(t,s,r,a,i,n),a=Hx(),t!==null&&!or?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,$a(t,s,n)):(Ut&&a&&Px(s),s.flags|=1,Gs(t,s,r,n),s.child)}function zh(t,s,r,a,n){if(dr(r)){var i=!0;Xc(s)}else i=!1;if(Bi(s,n),s.stateNode===null)Fc(t,s),Ey(s,r,a),Nu(s,r,a,n),a=!0;else if(t===null){var l=s.stateNode,o=s.memoizedProps;l.props=o;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=Or(d):(d=dr(r)?Qn:zs.current,d=qi(s,d));var u=r.getDerivedStateFromProps,p=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";p||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==a||c!==d)&&Oh(s,l,a,d),tn=!1;var f=s.memoizedState;l.state=f,sd(s,a,l,n),c=s.memoizedState,o!==a||f!==c||cr.current||tn?(typeof u=="function"&&(wu(s,r,u,a),c=s.memoizedState),(o=tn||Lh(s,r,o,a,f,c,d))?(p||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(s.flags|=4194308)):(typeof l.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=c),l.props=a,l.state=c,l.context=d,a=o):(typeof l.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{l=s.stateNode,oy(t,s),o=s.memoizedProps,d=s.type===s.elementType?o:qr(s.type,o),l.props=d,p=s.pendingProps,f=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=Or(c):(c=dr(r)?Qn:zs.current,c=qi(s,c));var g=r.getDerivedStateFromProps;(u=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==p||f!==c)&&Oh(s,l,a,c),tn=!1,f=s.memoizedState,l.state=f,sd(s,a,l,n);var x=s.memoizedState;o!==p||f!==x||cr.current||tn?(typeof g=="function"&&(wu(s,r,g,a),x=s.memoizedState),(d=tn||Lh(s,r,d,a,f,x,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(a,x,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(a,x,c)),typeof l.componentDidUpdate=="function"&&(s.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(s.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=x),l.props=a,l.state=x,l.context=c,a=d):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(s.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(s.flags|=1024),a=!1)}return Cu(t,s,r,a,i,n)}function Cu(t,s,r,a,n,i){Ry(t,s);var l=(s.flags&128)!==0;if(!a&&!l)return n&&_h(s,r,!1),$a(t,s,i);a=s.stateNode,Rw.current=s;var o=l&&typeof r.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,t!==null&&l?(s.child=Ki(s,t.child,null,i),s.child=Ki(s,null,o,i)):Gs(t,s,o,i),s.memoizedState=a.state,n&&_h(s,r,!0),s.child}function Ly(t){var s=t.stateNode;s.pendingContext?Ch(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Ch(t,s.context,!1),$x(t,s.containerInfo)}function Wh(t,s,r,a,n){return Ji(),Rx(n),s.flags|=256,Gs(t,s,r,a),s.child}var _u={dehydrated:null,treeContext:null,retryLane:0};function Tu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Oy(t,s,r){var a=s.pendingProps,n=Wt.current,i=!1,l=(s.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(n&2)!==0),o?(i=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),Dt(Wt,n&1),t===null)return vu(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(l=a.children,t=a.fallback,i?(a=s.mode,i=s.child,l={mode:"hidden",children:l},!(a&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Od(l,a,0,null),t=qn(t,a,r,null),i.return=s,t.return=s,i.sibling=t,s.child=i,s.child.memoizedState=Tu(r),s.memoizedState=_u,t):Jx(s,l));if(n=t.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return Lw(t,s,l,a,o,n,r);if(i){i=a.fallback,l=s.mode,n=t.child,o=n.sibling;var c={mode:"hidden",children:a.children};return!(l&1)&&s.child!==n?(a=s.child,a.childLanes=0,a.pendingProps=c,s.deletions=null):(a=yn(n,c),a.subtreeFlags=n.subtreeFlags&14680064),o!==null?i=yn(o,i):(i=qn(i,l,r,null),i.flags|=2),i.return=s,a.return=s,a.sibling=i,s.child=a,a=i,i=s.child,l=t.child.memoizedState,l=l===null?Tu(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~r,s.memoizedState=_u,a}return i=t.child,t=i.sibling,a=yn(i,{mode:"visible",children:a.children}),!(s.mode&1)&&(a.lanes=r),a.return=s,a.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=a,s.memoizedState=null,a}function Jx(t,s){return s=Od({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function nc(t,s,r,a){return a!==null&&Rx(a),Ki(s,t.child,null,r),t=Jx(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Lw(t,s,r,a,n,i,l){if(r)return s.flags&256?(s.flags&=-257,a=b0(Error(ke(422))),nc(t,s,l,a)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(i=a.fallback,n=s.mode,a=Od({mode:"visible",children:a.children},n,0,null),i=qn(i,n,l,null),i.flags|=2,a.return=s,i.return=s,a.sibling=i,s.child=a,s.mode&1&&Ki(s,t.child,null,l),s.child.memoizedState=Tu(l),s.memoizedState=_u,i);if(!(s.mode&1))return nc(t,s,l,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var o=a.dgst;return a=o,i=Error(ke(419)),a=b0(i,a,void 0),nc(t,s,l,a)}if(o=(l&t.childLanes)!==0,or||o){if(a=Ns,a!==null){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|l)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,Ba(t,n),sa(a,t,n,-1))}return em(),a=b0(Error(ke(421))),nc(t,s,l,a)}return n.data==="$?"?(s.flags|=128,s.child=t.child,s=Jw.bind(null,t),n._reactRetry=s,null):(t=i.treeContext,br=hn(n.nextSibling),jr=s,Ut=!0,Xr=null,t!==null&&(Ar[Fr++]=Ea,Ar[Fr++]=Aa,Ar[Fr++]=Zn,Ea=t.id,Aa=t.overflow,Zn=s),s=Jx(s,a.children),s.flags|=4096,s)}function Vh(t,s,r){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s),ju(t.return,s,r)}function v0(t,s,r,a,n){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(i.isBackwards=s,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=r,i.tailMode=n)}function Iy(t,s,r){var a=s.pendingProps,n=a.revealOrder,i=a.tail;if(Gs(t,s,a.children,r),a=Wt.current,a&2)a=a&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vh(t,r,s);else if(t.tag===19)Vh(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(Dt(Wt,a),!(s.mode&1))s.memoizedState=null;else switch(n){case"forwards":for(r=s.child,n=null;r!==null;)t=r.alternate,t!==null&&rd(t)===null&&(n=r),r=r.sibling;r=n,r===null?(n=s.child,s.child=null):(n=r.sibling,r.sibling=null),v0(s,!1,n,r,i);break;case"backwards":for(r=null,n=s.child,s.child=null;n!==null;){if(t=n.alternate,t!==null&&rd(t)===null){s.child=n;break}t=n.sibling,n.sibling=r,r=n,n=t}v0(s,!0,r,null,i);break;case"together":v0(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Fc(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function $a(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),ti|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(ke(153));if(s.child!==null){for(t=s.child,r=yn(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=yn(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function Ow(t,s,r){switch(s.tag){case 3:Ly(s),Ji();break;case 5:cy(s);break;case 1:dr(s.type)&&Xc(s);break;case 4:$x(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,n=s.memoizedProps.value;Dt(ed,a._currentValue),a._currentValue=n;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(Dt(Wt,Wt.current&1),s.flags|=128,null):r&s.child.childLanes?Oy(t,s,r):(Dt(Wt,Wt.current&1),t=$a(t,s,r),t!==null?t.sibling:null);Dt(Wt,Wt.current&1);break;case 19:if(a=(r&s.childLanes)!==0,t.flags&128){if(a)return Iy(t,s,r);s.flags|=128}if(n=s.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Dt(Wt,Wt.current),a)break;return null;case 22:case 23:return s.lanes=0,Dy(t,s,r)}return $a(t,s,r)}var My,Eu,By,$y;My=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Eu=function(){};By=function(t,s,r,a){var n=t.memoizedProps;if(n!==a){t=s.stateNode,Wn(ha.current);var i=null;switch(r){case"input":n=X0(t,n),a=X0(t,a),i=[];break;case"select":n=Gt({},n,{value:void 0}),a=Gt({},a,{value:void 0}),i=[];break;case"textarea":n=eu(t,n),a=eu(t,a),i=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=Kc)}su(r,a);var l;r=null;for(d in n)if(!a.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var o=n[d];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(eo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in a){var c=a[d];if(o=n!=null?n[d]:void 0,a.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(eo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ot("scroll",t),i||o===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(s.updateQueue=d)&&(s.flags|=4)}};$y=function(t,s,r,a){r!==a&&(s.flags|=4)};function yl(t,s){if(!Ut)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function Rs(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,a=0;if(s)for(var n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=a,t.childLanes=r,s}function Iw(t,s,r){var a=s.pendingProps;switch(Dx(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rs(s),null;case 1:return dr(s.type)&&Yc(),Rs(s),null;case 3:return a=s.stateNode,Yi(),It(cr),It(zs),zx(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(rc(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Xr!==null&&(Iu(Xr),Xr=null))),Eu(t,s),Rs(s),null;case 5:Ux(s);var n=Wn(mo.current);if(r=s.type,t!==null&&s.stateNode!=null)By(t,s,r,a,n),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(ke(166));return Rs(s),null}if(t=Wn(ha.current),rc(s)){a=s.stateNode,r=s.type;var i=s.memoizedProps;switch(a[xa]=s,a[uo]=i,t=(s.mode&1)!==0,r){case"dialog":Ot("cancel",a),Ot("close",a);break;case"iframe":case"object":case"embed":Ot("load",a);break;case"video":case"audio":for(n=0;n<_l.length;n++)Ot(_l[n],a);break;case"source":Ot("error",a);break;case"img":case"image":case"link":Ot("error",a),Ot("load",a);break;case"details":Ot("toggle",a);break;case"input":Zm(a,i),Ot("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},Ot("invalid",a);break;case"textarea":th(a,i),Ot("invalid",a)}su(r,i),n=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?a.textContent!==o&&(i.suppressHydrationWarning!==!0&&sc(a.textContent,o,t),n=["children",o]):typeof o=="number"&&a.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&sc(a.textContent,o,t),n=["children",""+o]):eo.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Ot("scroll",a)}switch(r){case"input":Jo(a),eh(a,i,!0);break;case"textarea":Jo(a),sh(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=Kc)}a=n,s.updateQueue=a,a!==null&&(s.flags|=4)}else{l=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=hg(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=l.createElement(r,{is:a.is}):(t=l.createElement(r),r==="select"&&(l=t,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):t=l.createElementNS(t,r),t[xa]=s,t[uo]=a,My(t,s,!1,!1),s.stateNode=t;e:{switch(l=ru(r,a),r){case"dialog":Ot("cancel",t),Ot("close",t),n=a;break;case"iframe":case"object":case"embed":Ot("load",t),n=a;break;case"video":case"audio":for(n=0;n<_l.length;n++)Ot(_l[n],t);n=a;break;case"source":Ot("error",t),n=a;break;case"img":case"image":case"link":Ot("error",t),Ot("load",t),n=a;break;case"details":Ot("toggle",t),n=a;break;case"input":Zm(t,a),n=X0(t,a),Ot("invalid",t);break;case"option":n=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},n=Gt({},a,{value:void 0}),Ot("invalid",t);break;case"textarea":th(t,a),n=eu(t,a),Ot("invalid",t);break;default:n=a}su(r,n),o=n;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?gg(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&fg(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&to(t,c):typeof c=="number"&&to(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(eo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ot("scroll",t):c!=null&&yx(t,i,c,l))}switch(r){case"input":Jo(t),eh(t,a,!1);break;case"textarea":Jo(t),sh(t);break;case"option":a.value!=null&&t.setAttribute("value",""+Nn(a.value));break;case"select":t.multiple=!!a.multiple,i=a.value,i!=null?Li(t,!!a.multiple,i,!1):a.defaultValue!=null&&Li(t,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=Kc)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Rs(s),null;case 6:if(t&&s.stateNode!=null)$y(t,s,t.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(ke(166));if(r=Wn(mo.current),Wn(ha.current),rc(s)){if(a=s.stateNode,r=s.memoizedProps,a[xa]=s,(i=a.nodeValue!==r)&&(t=jr,t!==null))switch(t.tag){case 3:sc(a.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sc(a.nodeValue,r,(t.mode&1)!==0)}i&&(s.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[xa]=s,s.stateNode=a}return Rs(s),null;case 13:if(It(Wt),a=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ut&&br!==null&&s.mode&1&&!(s.flags&128))ay(),Ji(),s.flags|=98560,i=!1;else if(i=rc(s),a!==null&&a.dehydrated!==null){if(t===null){if(!i)throw Error(ke(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ke(317));i[xa]=s}else Ji(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Rs(s),i=!1}else Xr!==null&&(Iu(Xr),Xr=null),i=!0;if(!i)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(s.child.flags|=8192,s.mode&1&&(t===null||Wt.current&1?hs===0&&(hs=3):em())),s.updateQueue!==null&&(s.flags|=4),Rs(s),null);case 4:return Yi(),Eu(t,s),t===null&&oo(s.stateNode.containerInfo),Rs(s),null;case 10:return Ix(s.type._context),Rs(s),null;case 17:return dr(s.type)&&Yc(),Rs(s),null;case 19:if(It(Wt),i=s.memoizedState,i===null)return Rs(s),null;if(a=(s.flags&128)!==0,l=i.rendering,l===null)if(a)yl(i,!1);else{if(hs!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(l=rd(t),l!==null){for(s.flags|=128,yl(i,!1),a=l.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=r,r=s.child;r!==null;)i=r,t=a,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Dt(Wt,Wt.current&1|2),s.child}t=t.sibling}i.tail!==null&&es()>Qi&&(s.flags|=128,a=!0,yl(i,!1),s.lanes=4194304)}else{if(!a)if(t=rd(l),t!==null){if(s.flags|=128,a=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),yl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Ut)return Rs(s),null}else 2*es()-i.renderingStartTime>Qi&&r!==1073741824&&(s.flags|=128,a=!0,yl(i,!1),s.lanes=4194304);i.isBackwards?(l.sibling=s.child,s.child=l):(r=i.last,r!==null?r.sibling=l:s.child=l,i.last=l)}return i.tail!==null?(s=i.tail,i.rendering=s,i.tail=s.sibling,i.renderingStartTime=es(),s.sibling=null,r=Wt.current,Dt(Wt,a?r&1|2:r&1),s):(Rs(s),null);case 22:case 23:return Zx(),a=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(s.flags|=8192),a&&s.mode&1?fr&1073741824&&(Rs(s),s.subtreeFlags&6&&(s.flags|=8192)):Rs(s),null;case 24:return null;case 25:return null}throw Error(ke(156,s.tag))}function Mw(t,s){switch(Dx(s),s.tag){case 1:return dr(s.type)&&Yc(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Yi(),It(cr),It(zs),zx(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return Ux(s),null;case 13:if(It(Wt),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(ke(340));Ji()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return It(Wt),null;case 4:return Yi(),null;case 10:return Ix(s.type._context),null;case 22:case 23:return Zx(),null;case 24:return null;default:return null}}var ic=!1,Is=!1,Bw=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Pi(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){qt(t,s,a)}else r.current=null}function Au(t,s,r){try{r()}catch(a){qt(t,s,a)}}var Hh=!1;function $w(t,s){if(mu=Gc,t=Hg(),Fx(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var n=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,d=0,u=0,p=t,f=null;t:for(;;){for(var g;p!==r||n!==0&&p.nodeType!==3||(o=l+n),p!==i||a!==0&&p.nodeType!==3||(c=l+a),p.nodeType===3&&(l+=p.nodeValue.length),(g=p.firstChild)!==null;)f=p,p=g;for(;;){if(p===t)break t;if(f===r&&++d===n&&(o=l),f===i&&++u===a&&(c=l),(g=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=g}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(hu={focusedElem:t,selectionRange:r},Gc=!1,Oe=s;Oe!==null;)if(s=Oe,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Oe=t;else for(;Oe!==null;){s=Oe;try{var x=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var h=x.memoizedProps,m=x.memoizedState,j=s.stateNode,v=j.getSnapshotBeforeUpdate(s.elementType===s.type?h:qr(s.type,h),m);j.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var N=s.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(S){qt(s,s.return,S)}if(t=s.sibling,t!==null){t.return=s.return,Oe=t;break}Oe=s.return}return x=Hh,Hh=!1,x}function Ul(t,s,r){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&t)===t){var i=n.destroy;n.destroy=void 0,i!==void 0&&Au(s,r,i)}n=n.next}while(n!==a)}}function Rd(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var a=r.create;r.destroy=a()}r=r.next}while(r!==s)}}function Fu(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function Uy(t){var s=t.alternate;s!==null&&(t.alternate=null,Uy(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[xa],delete s[uo],delete s[gu],delete s[ww],delete s[Nw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zy(t){return t.tag===5||t.tag===3||t.tag===4}function Gh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pu(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Kc));else if(a!==4&&(t=t.child,t!==null))for(Pu(t,s,r),t=t.sibling;t!==null;)Pu(t,s,r),t=t.sibling}function Du(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(Du(t,s,r),t=t.sibling;t!==null;)Du(t,s,r),t=t.sibling}var Cs=null,Jr=!1;function Ka(t,s,r){for(r=r.child;r!==null;)Wy(t,s,r),r=r.sibling}function Wy(t,s,r){if(ma&&typeof ma.onCommitFiberUnmount=="function")try{ma.onCommitFiberUnmount(Cd,r)}catch{}switch(r.tag){case 5:Is||Pi(r,s);case 6:var a=Cs,n=Jr;Cs=null,Ka(t,s,r),Cs=a,Jr=n,Cs!==null&&(Jr?(t=Cs,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Cs.removeChild(r.stateNode));break;case 18:Cs!==null&&(Jr?(t=Cs,r=r.stateNode,t.nodeType===8?m0(t.parentNode,r):t.nodeType===1&&m0(t,r),no(t)):m0(Cs,r.stateNode));break;case 4:a=Cs,n=Jr,Cs=r.stateNode.containerInfo,Jr=!0,Ka(t,s,r),Cs=a,Jr=n;break;case 0:case 11:case 14:case 15:if(!Is&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var i=n,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Au(r,s,l),n=n.next}while(n!==a)}Ka(t,s,r);break;case 1:if(!Is&&(Pi(r,s),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(o){qt(r,s,o)}Ka(t,s,r);break;case 21:Ka(t,s,r);break;case 22:r.mode&1?(Is=(a=Is)||r.memoizedState!==null,Ka(t,s,r),Is=a):Ka(t,s,r);break;default:Ka(t,s,r)}}function qh(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Bw),s.forEach(function(a){var n=Kw.bind(null,t,a);r.has(a)||(r.add(a),a.then(n,n))})}}function Wr(t,s){var r=s.deletions;if(r!==null)for(var a=0;a<r.length;a++){var n=r[a];try{var i=t,l=s,o=l;e:for(;o!==null;){switch(o.tag){case 5:Cs=o.stateNode,Jr=!1;break e;case 3:Cs=o.stateNode.containerInfo,Jr=!0;break e;case 4:Cs=o.stateNode.containerInfo,Jr=!0;break e}o=o.return}if(Cs===null)throw Error(ke(160));Wy(i,l,n),Cs=null,Jr=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){qt(n,s,d)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Vy(s,t),s=s.sibling}function Vy(t,s){var r=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wr(s,t),la(t),a&4){try{Ul(3,t,t.return),Rd(3,t)}catch(h){qt(t,t.return,h)}try{Ul(5,t,t.return)}catch(h){qt(t,t.return,h)}}break;case 1:Wr(s,t),la(t),a&512&&r!==null&&Pi(r,r.return);break;case 5:if(Wr(s,t),la(t),a&512&&r!==null&&Pi(r,r.return),t.flags&32){var n=t.stateNode;try{to(n,"")}catch(h){qt(t,t.return,h)}}if(a&4&&(n=t.stateNode,n!=null)){var i=t.memoizedProps,l=r!==null?r.memoizedProps:i,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&xg(n,i),ru(o,l);var d=ru(o,i);for(l=0;l<c.length;l+=2){var u=c[l],p=c[l+1];u==="style"?gg(n,p):u==="dangerouslySetInnerHTML"?fg(n,p):u==="children"?to(n,p):yx(n,u,p,d)}switch(o){case"input":Q0(n,i);break;case"textarea":mg(n,i);break;case"select":var f=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Li(n,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?Li(n,!!i.multiple,i.defaultValue,!0):Li(n,!!i.multiple,i.multiple?[]:"",!1))}n[uo]=i}catch(h){qt(t,t.return,h)}}break;case 6:if(Wr(s,t),la(t),a&4){if(t.stateNode===null)throw Error(ke(162));n=t.stateNode,i=t.memoizedProps;try{n.nodeValue=i}catch(h){qt(t,t.return,h)}}break;case 3:if(Wr(s,t),la(t),a&4&&r!==null&&r.memoizedState.isDehydrated)try{no(s.containerInfo)}catch(h){qt(t,t.return,h)}break;case 4:Wr(s,t),la(t);break;case 13:Wr(s,t),la(t),n=t.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(Xx=es())),a&4&&qh(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(Is=(d=Is)||u,Wr(s,t),Is=d):Wr(s,t),la(t),a&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(Oe=t,u=t.child;u!==null;){for(p=Oe=u;Oe!==null;){switch(f=Oe,g=f.child,f.tag){case 0:case 11:case 14:case 15:Ul(4,f,f.return);break;case 1:Pi(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){a=f,r=f.return;try{s=a,x.props=s.memoizedProps,x.state=s.memoizedState,x.componentWillUnmount()}catch(h){qt(a,r,h)}}break;case 5:Pi(f,f.return);break;case 22:if(f.memoizedState!==null){Kh(p);continue}}g!==null?(g.return=f,Oe=g):Kh(p)}u=u.sibling}e:for(u=null,p=t;;){if(p.tag===5){if(u===null){u=p;try{n=p.stateNode,d?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=p.stateNode,c=p.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=pg("display",l))}catch(h){qt(t,t.return,h)}}}else if(p.tag===6){if(u===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(h){qt(t,t.return,h)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Wr(s,t),la(t),a&4&&qh(t);break;case 21:break;default:Wr(s,t),la(t)}}function la(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(zy(r)){var a=r;break e}r=r.return}throw Error(ke(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(to(n,""),a.flags&=-33);var i=Gh(t);Du(t,i,n);break;case 3:case 4:var l=a.stateNode.containerInfo,o=Gh(t);Pu(t,o,l);break;default:throw Error(ke(161))}}catch(c){qt(t,t.return,c)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Uw(t,s,r){Oe=t,Hy(t)}function Hy(t,s,r){for(var a=(t.mode&1)!==0;Oe!==null;){var n=Oe,i=n.child;if(n.tag===22&&a){var l=n.memoizedState!==null||ic;if(!l){var o=n.alternate,c=o!==null&&o.memoizedState!==null||Is;o=ic;var d=Is;if(ic=l,(Is=c)&&!d)for(Oe=n;Oe!==null;)l=Oe,c=l.child,l.tag===22&&l.memoizedState!==null?Yh(n):c!==null?(c.return=l,Oe=c):Yh(n);for(;i!==null;)Oe=i,Hy(i),i=i.sibling;Oe=n,ic=o,Is=d}Jh(t)}else n.subtreeFlags&8772&&i!==null?(i.return=n,Oe=i):Jh(t)}}function Jh(t){for(;Oe!==null;){var s=Oe;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Is||Rd(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!Is)if(r===null)a.componentDidMount();else{var n=s.elementType===s.type?r.memoizedProps:qr(s.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=s.updateQueue;i!==null&&Ph(s,i,a);break;case 3:var l=s.updateQueue;if(l!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}Ph(s,l,r)}break;case 5:var o=s.stateNode;if(r===null&&s.flags&4){r=o;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var d=s.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var p=u.dehydrated;p!==null&&no(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}Is||s.flags&512&&Fu(s)}catch(f){qt(s,s.return,f)}}if(s===t){Oe=null;break}if(r=s.sibling,r!==null){r.return=s.return,Oe=r;break}Oe=s.return}}function Kh(t){for(;Oe!==null;){var s=Oe;if(s===t){Oe=null;break}var r=s.sibling;if(r!==null){r.return=s.return,Oe=r;break}Oe=s.return}}function Yh(t){for(;Oe!==null;){var s=Oe;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{Rd(4,s)}catch(c){qt(s,r,c)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var n=s.return;try{a.componentDidMount()}catch(c){qt(s,n,c)}}var i=s.return;try{Fu(s)}catch(c){qt(s,i,c)}break;case 5:var l=s.return;try{Fu(s)}catch(c){qt(s,l,c)}}}catch(c){qt(s,s.return,c)}if(s===t){Oe=null;break}var o=s.sibling;if(o!==null){o.return=s.return,Oe=o;break}Oe=s.return}}var zw=Math.ceil,id=Va.ReactCurrentDispatcher,Kx=Va.ReactCurrentOwner,Lr=Va.ReactCurrentBatchConfig,Nt=0,Ns=null,ls=null,Ts=0,fr=0,Di=En(0),hs=0,go=null,ti=0,Ld=0,Yx=0,zl=null,lr=null,Xx=0,Qi=1/0,_a=null,ld=!1,Ru=null,pn=null,lc=!1,ln=null,od=0,Wl=0,Lu=null,Pc=-1,Dc=0;function Ys(){return Nt&6?es():Pc!==-1?Pc:Pc=es()}function gn(t){return t.mode&1?Nt&2&&Ts!==0?Ts&-Ts:Sw.transition!==null?(Dc===0&&(Dc=Eg()),Dc):(t=Ft,t!==0||(t=window.event,t=t===void 0?16:Og(t.type)),t):1}function sa(t,s,r,a){if(50<Wl)throw Wl=0,Lu=null,Error(ke(185));Lo(t,r,a),(!(Nt&2)||t!==Ns)&&(t===Ns&&(!(Nt&2)&&(Ld|=r),hs===4&&rn(t,Ts)),ur(t,a),r===1&&Nt===0&&!(s.mode&1)&&(Qi=es()+500,Fd&&An()))}function ur(t,s){var r=t.callbackNode;S1(t,s);var a=Hc(t,t===Ns?Ts:0);if(a===0)r!==null&&nh(r),t.callbackNode=null,t.callbackPriority=0;else if(s=a&-a,t.callbackPriority!==s){if(r!=null&&nh(r),s===1)t.tag===0?kw(Xh.bind(null,t)):ty(Xh.bind(null,t)),vw(function(){!(Nt&6)&&An()}),r=null;else{switch(Ag(a)){case 1:r=Nx;break;case 4:r=_g;break;case 16:r=Vc;break;case 536870912:r=Tg;break;default:r=Vc}r=Zy(r,Gy.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function Gy(t,s){if(Pc=-1,Dc=0,Nt&6)throw Error(ke(327));var r=t.callbackNode;if($i()&&t.callbackNode!==r)return null;var a=Hc(t,t===Ns?Ts:0);if(a===0)return null;if(a&30||a&t.expiredLanes||s)s=cd(t,a);else{s=a;var n=Nt;Nt|=2;var i=Jy();(Ns!==t||Ts!==s)&&(_a=null,Qi=es()+500,Gn(t,s));do try{Hw();break}catch(o){qy(t,o)}while(!0);Ox(),id.current=i,Nt=n,ls!==null?s=0:(Ns=null,Ts=0,s=hs)}if(s!==0){if(s===2&&(n=ou(t),n!==0&&(a=n,s=Ou(t,n))),s===1)throw r=go,Gn(t,0),rn(t,a),ur(t,es()),r;if(s===6)rn(t,a);else{if(n=t.current.alternate,!(a&30)&&!Ww(n)&&(s=cd(t,a),s===2&&(i=ou(t),i!==0&&(a=i,s=Ou(t,i))),s===1))throw r=go,Gn(t,0),rn(t,a),ur(t,es()),r;switch(t.finishedWork=n,t.finishedLanes=a,s){case 0:case 1:throw Error(ke(345));case 2:Ln(t,lr,_a);break;case 3:if(rn(t,a),(a&130023424)===a&&(s=Xx+500-es(),10<s)){if(Hc(t,0)!==0)break;if(n=t.suspendedLanes,(n&a)!==a){Ys(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=pu(Ln.bind(null,t,lr,_a),s);break}Ln(t,lr,_a);break;case 4:if(rn(t,a),(a&4194240)===a)break;for(s=t.eventTimes,n=-1;0<a;){var l=31-ta(a);i=1<<l,l=s[l],l>n&&(n=l),a&=~i}if(a=n,a=es()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*zw(a/1960))-a,10<a){t.timeoutHandle=pu(Ln.bind(null,t,lr,_a),a);break}Ln(t,lr,_a);break;case 5:Ln(t,lr,_a);break;default:throw Error(ke(329))}}}return ur(t,es()),t.callbackNode===r?Gy.bind(null,t):null}function Ou(t,s){var r=zl;return t.current.memoizedState.isDehydrated&&(Gn(t,s).flags|=256),t=cd(t,s),t!==2&&(s=lr,lr=r,s!==null&&Iu(s)),t}function Iu(t){lr===null?lr=t:lr.push.apply(lr,t)}function Ww(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var n=r[a],i=n.getSnapshot;n=n.value;try{if(!na(i(),n))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function rn(t,s){for(s&=~Yx,s&=~Ld,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-ta(s),a=1<<r;t[r]=-1,s&=~a}}function Xh(t){if(Nt&6)throw Error(ke(327));$i();var s=Hc(t,0);if(!(s&1))return ur(t,es()),null;var r=cd(t,s);if(t.tag!==0&&r===2){var a=ou(t);a!==0&&(s=a,r=Ou(t,a))}if(r===1)throw r=go,Gn(t,0),rn(t,s),ur(t,es()),r;if(r===6)throw Error(ke(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Ln(t,lr,_a),ur(t,es()),null}function Qx(t,s){var r=Nt;Nt|=1;try{return t(s)}finally{Nt=r,Nt===0&&(Qi=es()+500,Fd&&An())}}function si(t){ln!==null&&ln.tag===0&&!(Nt&6)&&$i();var s=Nt;Nt|=1;var r=Lr.transition,a=Ft;try{if(Lr.transition=null,Ft=1,t)return t()}finally{Ft=a,Lr.transition=r,Nt=s,!(Nt&6)&&An()}}function Zx(){fr=Di.current,It(Di)}function Gn(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,bw(r)),ls!==null)for(r=ls.return;r!==null;){var a=r;switch(Dx(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Yc();break;case 3:Yi(),It(cr),It(zs),zx();break;case 5:Ux(a);break;case 4:Yi();break;case 13:It(Wt);break;case 19:It(Wt);break;case 10:Ix(a.type._context);break;case 22:case 23:Zx()}r=r.return}if(Ns=t,ls=t=yn(t.current,null),Ts=fr=s,hs=0,go=null,Yx=Ld=ti=0,lr=zl=null,zn!==null){for(s=0;s<zn.length;s++)if(r=zn[s],a=r.interleaved,a!==null){r.interleaved=null;var n=a.next,i=r.pending;if(i!==null){var l=i.next;i.next=n,a.next=l}r.pending=a}zn=null}return t}function qy(t,s){do{var r=ls;try{if(Ox(),Ec.current=nd,ad){for(var a=Ht.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}ad=!1}if(ei=0,js=xs=Ht=null,$l=!1,ho=0,Kx.current=null,r===null||r.return===null){hs=1,go=s,ls=null;break}e:{var i=t,l=r.return,o=r,c=s;if(s=Ts,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,p=u.tag;if(!(u.mode&1)&&(p===0||p===11||p===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=Mh(l);if(g!==null){g.flags&=-257,Bh(g,l,o,i,s),g.mode&1&&Ih(i,d,s),s=g,c=d;var x=s.updateQueue;if(x===null){var h=new Set;h.add(c),s.updateQueue=h}else x.add(c);break e}else{if(!(s&1)){Ih(i,d,s),em();break e}c=Error(ke(426))}}else if(Ut&&o.mode&1){var m=Mh(l);if(m!==null){!(m.flags&65536)&&(m.flags|=256),Bh(m,l,o,i,s),Rx(Xi(c,o));break e}}i=c=Xi(c,o),hs!==4&&(hs=2),zl===null?zl=[i]:zl.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,s&=-s,i.lanes|=s;var j=Ay(i,c,s);Fh(i,j);break e;case 1:o=c;var v=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(pn===null||!pn.has(N)))){i.flags|=65536,s&=-s,i.lanes|=s;var S=Fy(i,o,s);Fh(i,S);break e}}i=i.return}while(i!==null)}Yy(r)}catch(A){s=A,ls===r&&r!==null&&(ls=r=r.return);continue}break}while(!0)}function Jy(){var t=id.current;return id.current=nd,t===null?nd:t}function em(){(hs===0||hs===3||hs===2)&&(hs=4),Ns===null||!(ti&268435455)&&!(Ld&268435455)||rn(Ns,Ts)}function cd(t,s){var r=Nt;Nt|=2;var a=Jy();(Ns!==t||Ts!==s)&&(_a=null,Gn(t,s));do try{Vw();break}catch(n){qy(t,n)}while(!0);if(Ox(),Nt=r,id.current=a,ls!==null)throw Error(ke(261));return Ns=null,Ts=0,hs}function Vw(){for(;ls!==null;)Ky(ls)}function Hw(){for(;ls!==null&&!p1();)Ky(ls)}function Ky(t){var s=Qy(t.alternate,t,fr);t.memoizedProps=t.pendingProps,s===null?Yy(t):ls=s,Kx.current=null}function Yy(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=Mw(r,s),r!==null){r.flags&=32767,ls=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{hs=6,ls=null;return}}else if(r=Iw(r,s,fr),r!==null){ls=r;return}if(s=s.sibling,s!==null){ls=s;return}ls=s=t}while(s!==null);hs===0&&(hs=5)}function Ln(t,s,r){var a=Ft,n=Lr.transition;try{Lr.transition=null,Ft=1,Gw(t,s,r,a)}finally{Lr.transition=n,Ft=a}return null}function Gw(t,s,r,a){do $i();while(ln!==null);if(Nt&6)throw Error(ke(327));r=t.finishedWork;var n=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ke(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(C1(t,i),t===Ns&&(ls=Ns=null,Ts=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||lc||(lc=!0,Zy(Vc,function(){return $i(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Lr.transition,Lr.transition=null;var l=Ft;Ft=1;var o=Nt;Nt|=4,Kx.current=null,$w(t,r),Vy(r,t),xw(hu),Gc=!!mu,hu=mu=null,t.current=r,Uw(r),g1(),Nt=o,Ft=l,Lr.transition=i}else t.current=r;if(lc&&(lc=!1,ln=t,od=n),i=t.pendingLanes,i===0&&(pn=null),v1(r.stateNode),ur(t,es()),s!==null)for(a=t.onRecoverableError,r=0;r<s.length;r++)n=s[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(ld)throw ld=!1,t=Ru,Ru=null,t;return od&1&&t.tag!==0&&$i(),i=t.pendingLanes,i&1?t===Lu?Wl++:(Wl=0,Lu=t):Wl=0,An(),null}function $i(){if(ln!==null){var t=Ag(od),s=Lr.transition,r=Ft;try{if(Lr.transition=null,Ft=16>t?16:t,ln===null)var a=!1;else{if(t=ln,ln=null,od=0,Nt&6)throw Error(ke(331));var n=Nt;for(Nt|=4,Oe=t.current;Oe!==null;){var i=Oe,l=i.child;if(Oe.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(Oe=d;Oe!==null;){var u=Oe;switch(u.tag){case 0:case 11:case 15:Ul(8,u,i)}var p=u.child;if(p!==null)p.return=u,Oe=p;else for(;Oe!==null;){u=Oe;var f=u.sibling,g=u.return;if(Uy(u),u===d){Oe=null;break}if(f!==null){f.return=g,Oe=f;break}Oe=g}}}var x=i.alternate;if(x!==null){var h=x.child;if(h!==null){x.child=null;do{var m=h.sibling;h.sibling=null,h=m}while(h!==null)}}Oe=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Oe=l;else e:for(;Oe!==null;){if(i=Oe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ul(9,i,i.return)}var j=i.sibling;if(j!==null){j.return=i.return,Oe=j;break e}Oe=i.return}}var v=t.current;for(Oe=v;Oe!==null;){l=Oe;var N=l.child;if(l.subtreeFlags&2064&&N!==null)N.return=l,Oe=N;else e:for(l=v;Oe!==null;){if(o=Oe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Rd(9,o)}}catch(A){qt(o,o.return,A)}if(o===l){Oe=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,Oe=S;break e}Oe=o.return}}if(Nt=n,An(),ma&&typeof ma.onPostCommitFiberRoot=="function")try{ma.onPostCommitFiberRoot(Cd,t)}catch{}a=!0}return a}finally{Ft=r,Lr.transition=s}}return!1}function Qh(t,s,r){s=Xi(r,s),s=Ay(t,s,1),t=fn(t,s,1),s=Ys(),t!==null&&(Lo(t,1,s),ur(t,s))}function qt(t,s,r){if(t.tag===3)Qh(t,t,r);else for(;s!==null;){if(s.tag===3){Qh(s,t,r);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(pn===null||!pn.has(a))){t=Xi(r,t),t=Fy(s,t,1),s=fn(s,t,1),t=Ys(),s!==null&&(Lo(s,1,t),ur(s,t));break}}s=s.return}}function qw(t,s,r){var a=t.pingCache;a!==null&&a.delete(s),s=Ys(),t.pingedLanes|=t.suspendedLanes&r,Ns===t&&(Ts&r)===r&&(hs===4||hs===3&&(Ts&130023424)===Ts&&500>es()-Xx?Gn(t,0):Yx|=r),ur(t,s)}function Xy(t,s){s===0&&(t.mode&1?(s=Xo,Xo<<=1,!(Xo&130023424)&&(Xo=4194304)):s=1);var r=Ys();t=Ba(t,s),t!==null&&(Lo(t,s,r),ur(t,r))}function Jw(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),Xy(t,r)}function Kw(t,s){var r=0;switch(t.tag){case 13:var a=t.stateNode,n=t.memoizedState;n!==null&&(r=n.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(ke(314))}a!==null&&a.delete(s),Xy(t,r)}var Qy;Qy=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||cr.current)or=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return or=!1,Ow(t,s,r);or=!!(t.flags&131072)}else or=!1,Ut&&s.flags&1048576&&sy(s,Zc,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;Fc(t,s),t=s.pendingProps;var n=qi(s,zs.current);Bi(s,r),n=Vx(null,s,a,t,n,r);var i=Hx();return s.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,dr(a)?(i=!0,Xc(s)):i=!1,s.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Bx(s),n.updater=Dd,s.stateNode=n,n._reactInternals=s,Nu(s,a,t,r),s=Cu(null,s,a,!0,i,r)):(s.tag=0,Ut&&i&&Px(s),Gs(null,s,n,r),s=s.child),s;case 16:a=s.elementType;e:{switch(Fc(t,s),t=s.pendingProps,n=a._init,a=n(a._payload),s.type=a,n=s.tag=Xw(a),t=qr(a,t),n){case 0:s=Su(null,s,a,t,r);break e;case 1:s=zh(null,s,a,t,r);break e;case 11:s=$h(null,s,a,t,r);break e;case 14:s=Uh(null,s,a,qr(a.type,t),r);break e}throw Error(ke(306,a,""))}return s;case 0:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:qr(a,n),Su(t,s,a,n,r);case 1:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:qr(a,n),zh(t,s,a,n,r);case 3:e:{if(Ly(s),t===null)throw Error(ke(387));a=s.pendingProps,i=s.memoizedState,n=i.element,oy(t,s),sd(s,a,null,r);var l=s.memoizedState;if(a=l.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},s.updateQueue.baseState=i,s.memoizedState=i,s.flags&256){n=Xi(Error(ke(423)),s),s=Wh(t,s,a,r,n);break e}else if(a!==n){n=Xi(Error(ke(424)),s),s=Wh(t,s,a,r,n);break e}else for(br=hn(s.stateNode.containerInfo.firstChild),jr=s,Ut=!0,Xr=null,r=iy(s,null,a,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ji(),a===n){s=$a(t,s,r);break e}Gs(t,s,a,r)}s=s.child}return s;case 5:return cy(s),t===null&&vu(s),a=s.type,n=s.pendingProps,i=t!==null?t.memoizedProps:null,l=n.children,fu(a,n)?l=null:i!==null&&fu(a,i)&&(s.flags|=32),Ry(t,s),Gs(t,s,l,r),s.child;case 6:return t===null&&vu(s),null;case 13:return Oy(t,s,r);case 4:return $x(s,s.stateNode.containerInfo),a=s.pendingProps,t===null?s.child=Ki(s,null,a,r):Gs(t,s,a,r),s.child;case 11:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:qr(a,n),$h(t,s,a,n,r);case 7:return Gs(t,s,s.pendingProps,r),s.child;case 8:return Gs(t,s,s.pendingProps.children,r),s.child;case 12:return Gs(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(a=s.type._context,n=s.pendingProps,i=s.memoizedProps,l=n.value,Dt(ed,a._currentValue),a._currentValue=l,i!==null)if(na(i.value,l)){if(i.children===n.children&&!cr.current){s=$a(t,s,r);break e}}else for(i=s.child,i!==null&&(i.return=s);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===a){if(i.tag===1){c=Pa(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),ju(i.return,r,s),o.lanes|=r;break}c=c.next}}else if(i.tag===10)l=i.type===s.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(ke(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),ju(l,r,s),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===s){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Gs(t,s,n.children,r),s=s.child}return s;case 9:return n=s.type,a=s.pendingProps.children,Bi(s,r),n=Or(n),a=a(n),s.flags|=1,Gs(t,s,a,r),s.child;case 14:return a=s.type,n=qr(a,s.pendingProps),n=qr(a.type,n),Uh(t,s,a,n,r);case 15:return Py(t,s,s.type,s.pendingProps,r);case 17:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:qr(a,n),Fc(t,s),s.tag=1,dr(a)?(t=!0,Xc(s)):t=!1,Bi(s,r),Ey(s,a,n),Nu(s,a,n,r),Cu(null,s,a,!0,t,r);case 19:return Iy(t,s,r);case 22:return Dy(t,s,r)}throw Error(ke(156,s.tag))};function Zy(t,s){return Cg(t,s)}function Yw(t,s,r,a){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(t,s,r,a){return new Yw(t,s,r,a)}function tm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Xw(t){if(typeof t=="function")return tm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vx)return 11;if(t===jx)return 14}return 2}function yn(t,s){var r=t.alternate;return r===null?(r=Rr(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Rc(t,s,r,a,n,i){var l=2;if(a=t,typeof t=="function")tm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Ni:return qn(r.children,n,i,s);case bx:l=8,n|=8;break;case q0:return t=Rr(12,r,s,n|2),t.elementType=q0,t.lanes=i,t;case J0:return t=Rr(13,r,s,n),t.elementType=J0,t.lanes=i,t;case K0:return t=Rr(19,r,s,n),t.elementType=K0,t.lanes=i,t;case cg:return Od(r,n,i,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lg:l=10;break e;case og:l=9;break e;case vx:l=11;break e;case jx:l=14;break e;case en:l=16,a=null;break e}throw Error(ke(130,t==null?t:typeof t,""))}return s=Rr(l,r,s,n),s.elementType=t,s.type=a,s.lanes=i,s}function qn(t,s,r,a){return t=Rr(7,t,a,s),t.lanes=r,t}function Od(t,s,r,a){return t=Rr(22,t,a,s),t.elementType=cg,t.lanes=r,t.stateNode={isHidden:!1},t}function j0(t,s,r){return t=Rr(6,t,null,s),t.lanes=r,t}function w0(t,s,r){return s=Rr(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function Qw(t,s,r,a,n){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=s0(0),this.expirationTimes=s0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=s0(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function sm(t,s,r,a,n,i,l,o,c){return t=new Qw(t,s,r,o,c),s===1?(s=1,i===!0&&(s|=8)):s=0,i=Rr(3,null,null,s),t.current=i,i.stateNode=t,i.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bx(i),t}function Zw(t,s,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wi,key:a==null?null:""+a,children:t,containerInfo:s,implementation:r}}function eb(t){if(!t)return kn;t=t._reactInternals;e:{if(di(t)!==t||t.tag!==1)throw Error(ke(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(dr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(ke(171))}if(t.tag===1){var r=t.type;if(dr(r))return ey(t,r,s)}return s}function tb(t,s,r,a,n,i,l,o,c){return t=sm(r,a,!0,t,n,i,l,o,c),t.context=eb(null),r=t.current,a=Ys(),n=gn(r),i=Pa(a,n),i.callback=s??null,fn(r,i,n),t.current.lanes=n,Lo(t,n,a),ur(t,a),t}function Id(t,s,r,a){var n=s.current,i=Ys(),l=gn(n);return r=eb(r),s.context===null?s.context=r:s.pendingContext=r,s=Pa(i,l),s.payload={element:t},a=a===void 0?null:a,a!==null&&(s.callback=a),t=fn(n,s,l),t!==null&&(sa(t,n,l,i),Tc(t,n,l)),l}function dd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zh(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function rm(t,s){Zh(t,s),(t=t.alternate)&&Zh(t,s)}function eN(){return null}var sb=typeof reportError=="function"?reportError:function(t){console.error(t)};function am(t){this._internalRoot=t}Md.prototype.render=am.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(ke(409));Id(t,s,null,null)};Md.prototype.unmount=am.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;si(function(){Id(null,t,null,null)}),s[Ma]=null}};function Md(t){this._internalRoot=t}Md.prototype.unstable_scheduleHydration=function(t){if(t){var s=Dg();t={blockedOn:null,target:t,priority:s};for(var r=0;r<sn.length&&s!==0&&s<sn[r].priority;r++);sn.splice(r,0,t),r===0&&Lg(t)}};function nm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ef(){}function tN(t,s,r,a,n){if(n){if(typeof a=="function"){var i=a;a=function(){var d=dd(l);i.call(d)}}var l=tb(s,a,t,0,null,!1,!1,"",ef);return t._reactRootContainer=l,t[Ma]=l.current,oo(t.nodeType===8?t.parentNode:t),si(),l}for(;n=t.lastChild;)t.removeChild(n);if(typeof a=="function"){var o=a;a=function(){var d=dd(c);o.call(d)}}var c=sm(t,0,!1,null,null,!1,!1,"",ef);return t._reactRootContainer=c,t[Ma]=c.current,oo(t.nodeType===8?t.parentNode:t),si(function(){Id(s,c,r,a)}),c}function $d(t,s,r,a,n){var i=r._reactRootContainer;if(i){var l=i;if(typeof n=="function"){var o=n;n=function(){var c=dd(l);o.call(c)}}Id(s,l,t,n)}else l=tN(r,s,t,n,a);return dd(l)}Fg=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=Cl(s.pendingLanes);r!==0&&(kx(s,r|1),ur(s,es()),!(Nt&6)&&(Qi=es()+500,An()))}break;case 13:si(function(){var a=Ba(t,1);if(a!==null){var n=Ys();sa(a,t,1,n)}}),rm(t,1)}};Sx=function(t){if(t.tag===13){var s=Ba(t,134217728);if(s!==null){var r=Ys();sa(s,t,134217728,r)}rm(t,134217728)}};Pg=function(t){if(t.tag===13){var s=gn(t),r=Ba(t,s);if(r!==null){var a=Ys();sa(r,t,s,a)}rm(t,s)}};Dg=function(){return Ft};Rg=function(t,s){var r=Ft;try{return Ft=t,s()}finally{Ft=r}};nu=function(t,s,r){switch(s){case"input":if(Q0(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var a=r[s];if(a!==t&&a.form===t.form){var n=Ad(a);if(!n)throw Error(ke(90));ug(a),Q0(a,n)}}}break;case"textarea":mg(t,r);break;case"select":s=r.value,s!=null&&Li(t,!!r.multiple,s,!1)}};vg=Qx;jg=si;var sN={usingClientEntryPoint:!1,Events:[Io,_i,Ad,yg,bg,Qx]},bl={findFiberByHostInstance:Un,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rN={bundleType:bl.bundleType,version:bl.version,rendererPackageName:bl.rendererPackageName,rendererConfig:bl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Va.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=kg(t),t===null?null:t.stateNode},findFiberByHostInstance:bl.findFiberByHostInstance||eN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{Cd=oc.inject(rN),ma=oc}catch{}}kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sN;kr.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nm(s))throw Error(ke(200));return Zw(t,s,null,r)};kr.createRoot=function(t,s){if(!nm(t))throw Error(ke(299));var r=!1,a="",n=sb;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(n=s.onRecoverableError)),s=sm(t,1,!1,null,null,r,!1,a,n),t[Ma]=s.current,oo(t.nodeType===8?t.parentNode:t),new am(s)};kr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(ke(188)):(t=Object.keys(t).join(","),Error(ke(268,t)));return t=kg(s),t=t===null?null:t.stateNode,t};kr.flushSync=function(t){return si(t)};kr.hydrate=function(t,s,r){if(!Bd(s))throw Error(ke(200));return $d(null,t,s,!0,r)};kr.hydrateRoot=function(t,s,r){if(!nm(t))throw Error(ke(405));var a=r!=null&&r.hydratedSources||null,n=!1,i="",l=sb;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),s=tb(s,null,t,1,r??null,n,!1,i,l),t[Ma]=s.current,oo(t),a)for(t=0;t<a.length;t++)r=a[t],n=r._getVersion,n=n(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,n]:s.mutableSourceEagerHydrationData.push(r,n);return new Md(s)};kr.render=function(t,s,r){if(!Bd(s))throw Error(ke(200));return $d(null,t,s,!1,r)};kr.unmountComponentAtNode=function(t){if(!Bd(t))throw Error(ke(40));return t._reactRootContainer?(si(function(){$d(null,null,t,!1,function(){t._reactRootContainer=null,t[Ma]=null})}),!0):!1};kr.unstable_batchedUpdates=Qx;kr.unstable_renderSubtreeIntoContainer=function(t,s,r,a){if(!Bd(r))throw Error(ke(200));if(t==null||t._reactInternals===void 0)throw Error(ke(38));return $d(t,s,r,!1,a)};kr.version="18.3.1-next-f1338f8080-20240426";function rb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rb)}catch(t){console.error(t)}}rb(),rg.exports=kr;var im=rg.exports;const aN=Hp(im),nN=Vp({__proto__:null,default:aN},[im]);var tf=im;H0.createRoot=tf.createRoot,H0.hydrateRoot=tf.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bt(){return Bt=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Bt.apply(this,arguments)}var Qt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qt||(Qt={}));const sf="popstate";function iN(t){t===void 0&&(t={});function s(a,n){let{pathname:i,search:l,hash:o}=a.location;return yo("",{pathname:i,search:l,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:ai(n)}return oN(s,r,null,t)}function rt(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function ri(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function lN(){return Math.random().toString(36).substr(2,8)}function rf(t,s){return{usr:t.state,key:t.key,idx:s}}function yo(t,s,r,a){return r===void 0&&(r=null),Bt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?Ha(s):s,{state:r,key:s&&s.key||a||lN()})}function ai(t){let{pathname:s="/",search:r="",hash:a=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(s+=a.charAt(0)==="#"?a:"#"+a),s}function Ha(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let a=t.indexOf("?");a>=0&&(s.search=t.substr(a),t=t.substr(0,a)),t&&(s.pathname=t)}return s}function oN(t,s,r,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:i=!1}=a,l=n.history,o=Qt.Pop,c=null,d=u();d==null&&(d=0,l.replaceState(Bt({},l.state,{idx:d}),""));function u(){return(l.state||{idx:null}).idx}function p(){o=Qt.Pop;let m=u(),j=m==null?null:m-d;d=m,c&&c({action:o,location:h.location,delta:j})}function f(m,j){o=Qt.Push;let v=yo(h.location,m,j);d=u()+1;let N=rf(v,d),S=h.createHref(v);try{l.pushState(N,"",S)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;n.location.assign(S)}i&&c&&c({action:o,location:h.location,delta:1})}function g(m,j){o=Qt.Replace;let v=yo(h.location,m,j);d=u();let N=rf(v,d),S=h.createHref(v);l.replaceState(N,"",S),i&&c&&c({action:o,location:h.location,delta:0})}function x(m){let j=n.location.origin!=="null"?n.location.origin:n.location.href,v=typeof m=="string"?m:ai(m);return v=v.replace(/ $/,"%20"),rt(j,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,j)}let h={get action(){return o},get location(){return t(n,l)},listen(m){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(sf,p),c=m,()=>{n.removeEventListener(sf,p),c=null}},createHref(m){return s(n,m)},createURL:x,encodeLocation(m){let j=x(m);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:f,replace:g,go(m){return l.go(m)}};return h}var At;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(At||(At={}));const cN=new Set(["lazy","caseSensitive","path","id","index","children"]);function dN(t){return t.index===!0}function ud(t,s,r,a){return r===void 0&&(r=[]),a===void 0&&(a={}),t.map((n,i)=>{let l=[...r,String(i)],o=typeof n.id=="string"?n.id:l.join("-");if(rt(n.index!==!0||!n.children,"Cannot specify children on an index route"),rt(!a[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),dN(n)){let c=Bt({},n,s(n),{id:o});return a[o]=c,c}else{let c=Bt({},n,s(n),{id:o,children:void 0});return a[o]=c,n.children&&(c.children=ud(n.children,s,l,a)),c}})}function In(t,s,r){return r===void 0&&(r="/"),Lc(t,s,r,!1)}function Lc(t,s,r,a){let n=typeof s=="string"?Ha(s):s,i=nl(n.pathname||"/",r);if(i==null)return null;let l=ab(t);xN(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=NN(i);o=jN(l[c],d,a)}return o}function uN(t,s){let{route:r,pathname:a,params:n}=t;return{id:r.id,pathname:a,params:n,data:s[r.id],handle:r.handle}}function ab(t,s,r,a){s===void 0&&(s=[]),r===void 0&&(r=[]),a===void 0&&(a="");let n=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(rt(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let d=Da([a,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(rt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),ab(i.children,s,u,d)),!(i.path==null&&!i.index)&&s.push({path:d,score:bN(d,i.index),routesMeta:u})};return t.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))n(i,l);else for(let c of nb(i.path))n(i,l,c)}),s}function nb(t){let s=t.split("/");if(s.length===0)return[];let[r,...a]=s,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let l=nb(a.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),n&&o.push(...l),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function xN(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:vN(s.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const mN=/^:[\w-]+$/,hN=3,fN=2,pN=1,gN=10,yN=-2,af=t=>t==="*";function bN(t,s){let r=t.split("/"),a=r.length;return r.some(af)&&(a+=yN),s&&(a+=fN),r.filter(n=>!af(n)).reduce((n,i)=>n+(mN.test(i)?hN:i===""?pN:gN),a)}function vN(t,s){return t.length===s.length&&t.slice(0,-1).every((a,n)=>a===s[n])?t[t.length-1]-s[s.length-1]:0}function jN(t,s,r){r===void 0&&(r=!1);let{routesMeta:a}=t,n={},i="/",l=[];for(let o=0;o<a.length;++o){let c=a[o],d=o===a.length-1,u=i==="/"?s:s.slice(i.length)||"/",p=nf({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!p&&d&&r&&!a[a.length-1].route.index&&(p=nf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!p)return null;Object.assign(n,p.params),l.push({params:n,pathname:Da([i,p.pathname]),pathnameBase:_N(Da([i,p.pathnameBase])),route:f}),p.pathnameBase!=="/"&&(i=Da([i,p.pathnameBase]))}return l}function nf(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,a]=wN(t.path,t.caseSensitive,t.end),n=s.match(r);if(!n)return null;let i=n[0],l=i.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:a.reduce((d,u,p)=>{let{paramName:f,isOptional:g}=u;if(f==="*"){let h=o[p]||"";l=i.slice(0,i.length-h.length).replace(/(.)\/+$/,"$1")}const x=o[p];return g&&!x?d[f]=void 0:d[f]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:t}}function wN(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),ri(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(a.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,s?void 0:"i"),a]}function NN(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return ri(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function nl(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,a=t.charAt(r);return a&&a!=="/"?null:t.slice(r)||"/"}const kN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SN=t=>kN.test(t);function CN(t,s){s===void 0&&(s="/");let{pathname:r,search:a="",hash:n=""}=typeof t=="string"?Ha(t):t,i;if(r)if(SN(r))i=r;else{if(r.includes("//")){let l=r;r=r.replace(/\/\/+/g,"/"),ri(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+r))}r.startsWith("/")?i=lf(r.substring(1),"/"):i=lf(r,s)}else i=s;return{pathname:i,search:TN(a),hash:EN(n)}}function lf(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function N0(t,s,r,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ib(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function Ud(t,s){let r=ib(t);return s?r.map((a,n)=>n===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function zd(t,s,r,a){a===void 0&&(a=!1);let n;typeof t=="string"?n=Ha(t):(n=Bt({},t),rt(!n.pathname||!n.pathname.includes("?"),N0("?","pathname","search",n)),rt(!n.pathname||!n.pathname.includes("#"),N0("#","pathname","hash",n)),rt(!n.search||!n.search.includes("#"),N0("#","search","hash",n)));let i=t===""||n.pathname==="",l=i?"/":n.pathname,o;if(l==null)o=r;else{let p=s.length-1;if(!a&&l.startsWith("..")){let f=l.split("/");for(;f[0]==="..";)f.shift(),p-=1;n.pathname=f.join("/")}o=p>=0?s[p]:"/"}let c=CN(n,o),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Da=t=>t.join("/").replace(/\/\/+/g,"/"),_N=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),TN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,EN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class xd{constructor(s,r,a,n){n===void 0&&(n=!1),this.status=s,this.statusText=r||"",this.internal=n,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}}function bo(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const lb=["post","put","patch","delete"],AN=new Set(lb),FN=["get",...lb],PN=new Set(FN),DN=new Set([301,302,303,307,308]),RN=new Set([307,308]),k0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},LN={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},vl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},lm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ON=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),ob="remix-router-transitions";function IN(t){const s=t.window?t.window:typeof window<"u"?window:void 0,r=typeof s<"u"&&typeof s.document<"u"&&typeof s.document.createElement<"u",a=!r;rt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let n;if(t.mapRouteProperties)n=t.mapRouteProperties;else if(t.detectErrorBoundary){let ee=t.detectErrorBoundary;n=le=>({hasErrorBoundary:ee(le)})}else n=ON;let i={},l=ud(t.routes,n,void 0,i),o,c=t.basename||"/",d=t.dataStrategy||UN,u=t.patchRoutesOnNavigation,p=Bt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),f=null,g=new Set,x=null,h=null,m=null,j=t.hydrationData!=null,v=In(l,t.history.location,c),N=!1,S=null;if(v==null&&!u){let ee=nr(404,{pathname:t.history.location.pathname}),{matches:le,route:de}=yf(l);v=le,S={[de.id]:ee}}v&&!t.hydrationData&&Ne(v,l,t.history.location.pathname).active&&(v=null);let A;if(v)if(v.some(ee=>ee.route.lazy))A=!1;else if(!v.some(ee=>ee.route.loader))A=!0;else if(p.v7_partialHydration){let ee=t.hydrationData?t.hydrationData.loaderData:null,le=t.hydrationData?t.hydrationData.errors:null;if(le){let de=v.findIndex(ge=>le[ge.route.id]!==void 0);A=v.slice(0,de+1).every(ge=>!Bu(ge.route,ee,le))}else A=v.every(de=>!Bu(de.route,ee,le))}else A=t.hydrationData!=null;else if(A=!1,v=[],p.v7_partialHydration){let ee=Ne(null,l,t.history.location.pathname);ee.active&&ee.matches&&(N=!0,v=ee.matches)}let T,k={historyAction:t.history.action,location:t.history.location,matches:v,initialized:A,navigation:k0,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||S,fetchers:new Map,blockers:new Map},_=Qt.Pop,y=!1,w,R=!1,P=new Map,H=null,L=!1,O=!1,W=[],Q=new Set,D=new Map,F=0,V=-1,te=new Map,I=new Set,U=new Map,z=new Map,Y=new Set,K=new Map,ne=new Map,q;function re(){if(f=t.history.listen(ee=>{let{action:le,location:de,delta:ge}=ee;if(q){q(),q=void 0;return}ri(ne.size===0||ge!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ee=me({currentLocation:k.location,nextLocation:de,historyAction:le});if(Ee&&ge!=null){let M=new Promise(J=>{q=J});t.history.go(ge*-1),he(Ee,{state:"blocked",location:de,proceed(){he(Ee,{state:"proceeding",proceed:void 0,reset:void 0,location:de}),M.then(()=>t.history.go(ge))},reset(){let J=new Map(k.blockers);J.set(Ee,vl),X({blockers:J})}});return}return Le(le,de)}),r){tk(s,P);let ee=()=>sk(s,P);s.addEventListener("pagehide",ee),H=()=>s.removeEventListener("pagehide",ee)}return k.initialized||Le(Qt.Pop,k.location,{initialHydration:!0}),T}function xe(){f&&f(),H&&H(),g.clear(),w&&w.abort(),k.fetchers.forEach((ee,le)=>Je(le)),k.blockers.forEach((ee,le)=>Ur(le))}function _e(ee){return g.add(ee),()=>g.delete(ee)}function X(ee,le){le===void 0&&(le={}),k=Bt({},k,ee);let de=[],ge=[];p.v7_fetcherPersist&&k.fetchers.forEach((Ee,M)=>{Ee.state==="idle"&&(Y.has(M)?ge.push(M):de.push(M))}),Y.forEach(Ee=>{!k.fetchers.has(Ee)&&!D.has(Ee)&&ge.push(Ee)}),[...g].forEach(Ee=>Ee(k,{deletedFetchers:ge,viewTransitionOpts:le.viewTransitionOpts,flushSync:le.flushSync===!0})),p.v7_fetcherPersist?(de.forEach(Ee=>k.fetchers.delete(Ee)),ge.forEach(Ee=>Je(Ee))):ge.forEach(Ee=>Y.delete(Ee))}function Ae(ee,le,de){var ge,Ee;let{flushSync:M}=de===void 0?{}:de,J=k.actionData!=null&&k.navigation.formMethod!=null&&Kr(k.navigation.formMethod)&&k.navigation.state==="loading"&&((ge=ee.state)==null?void 0:ge._isRedirect)!==!0,E;le.actionData?Object.keys(le.actionData).length>0?E=le.actionData:E=null:J?E=k.actionData:E=null;let C=le.loaderData?pf(k.loaderData,le.loaderData,le.matches||[],le.errors):k.loaderData,B=k.blockers;B.size>0&&(B=new Map(B),B.forEach((se,oe)=>B.set(oe,vl)));let G=y===!0||k.navigation.formMethod!=null&&Kr(k.navigation.formMethod)&&((Ee=ee.state)==null?void 0:Ee._isRedirect)!==!0;o&&(l=o,o=void 0),L||_===Qt.Pop||(_===Qt.Push?t.history.push(ee,ee.state):_===Qt.Replace&&t.history.replace(ee,ee.state));let Z;if(_===Qt.Pop){let se=P.get(k.location.pathname);se&&se.has(ee.pathname)?Z={currentLocation:k.location,nextLocation:ee}:P.has(ee.pathname)&&(Z={currentLocation:ee,nextLocation:k.location})}else if(R){let se=P.get(k.location.pathname);se?se.add(ee.pathname):(se=new Set([ee.pathname]),P.set(k.location.pathname,se)),Z={currentLocation:k.location,nextLocation:ee}}X(Bt({},le,{actionData:E,loaderData:C,historyAction:_,location:ee,initialized:!0,navigation:k0,revalidation:"idle",restoreScrollPosition:Te(ee,le.matches||k.matches),preventScrollReset:G,blockers:B}),{viewTransitionOpts:Z,flushSync:M===!0}),_=Qt.Pop,y=!1,R=!1,L=!1,O=!1,W=[]}async function Ie(ee,le){if(typeof ee=="number"){t.history.go(ee);return}let de=Mu(k.location,k.matches,c,p.v7_prependBasename,ee,p.v7_relativeSplatPath,le==null?void 0:le.fromRouteId,le==null?void 0:le.relative),{path:ge,submission:Ee,error:M}=of(p.v7_normalizeFormMethod,!1,de,le),J=k.location,E=yo(k.location,ge,le&&le.state);E=Bt({},E,t.history.encodeLocation(E));let C=le&&le.replace!=null?le.replace:void 0,B=Qt.Push;C===!0?B=Qt.Replace:C===!1||Ee!=null&&Kr(Ee.formMethod)&&Ee.formAction===k.location.pathname+k.location.search&&(B=Qt.Replace);let G=le&&"preventScrollReset"in le?le.preventScrollReset===!0:void 0,Z=(le&&le.flushSync)===!0,se=me({currentLocation:J,nextLocation:E,historyAction:B});if(se){he(se,{state:"blocked",location:E,proceed(){he(se,{state:"proceeding",proceed:void 0,reset:void 0,location:E}),Ie(ee,le)},reset(){let oe=new Map(k.blockers);oe.set(se,vl),X({blockers:oe})}});return}return await Le(B,E,{submission:Ee,pendingError:M,preventScrollReset:G,replace:le&&le.replace,enableViewTransition:le&&le.viewTransition,flushSync:Z})}function He(){if(dt(),X({revalidation:"loading"}),k.navigation.state!=="submitting"){if(k.navigation.state==="idle"){Le(k.historyAction,k.location,{startUninterruptedRevalidation:!0});return}Le(_||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:R===!0})}}async function Le(ee,le,de){w&&w.abort(),w=null,_=ee,L=(de&&de.startUninterruptedRevalidation)===!0,$e(k.location,k.matches),y=(de&&de.preventScrollReset)===!0,R=(de&&de.enableViewTransition)===!0;let ge=o||l,Ee=de&&de.overrideNavigation,M=de!=null&&de.initialHydration&&k.matches&&k.matches.length>0&&!N?k.matches:In(ge,le,c),J=(de&&de.flushSync)===!0;if(M&&k.initialized&&!O&&qN(k.location,le)&&!(de&&de.submission&&Kr(de.submission.formMethod))){Ae(le,{matches:M},{flushSync:J});return}let E=Ne(M,ge,le.pathname);if(E.active&&E.matches&&(M=E.matches),!M){let{error:ce,notFoundMatches:ie,route:ue}=be(le.pathname);Ae(le,{matches:ie,loaderData:{},errors:{[ue.id]:ce}},{flushSync:J});return}w=new AbortController;let C=bi(t.history,le,w.signal,de&&de.submission),B;if(de&&de.pendingError)B=[Mn(M).route.id,{type:At.error,error:de.pendingError}];else if(de&&de.submission&&Kr(de.submission.formMethod)){let ce=await ve(C,le,de.submission,M,E.active,{replace:de.replace,flushSync:J});if(ce.shortCircuited)return;if(ce.pendingActionResult){let[ie,ue]=ce.pendingActionResult;if(pr(ue)&&bo(ue.error)&&ue.error.status===404){w=null,Ae(le,{matches:ce.matches,loaderData:{},errors:{[ie]:ue.error}});return}}M=ce.matches||M,B=ce.pendingActionResult,Ee=S0(le,de.submission),J=!1,E.active=!1,C=bi(t.history,C.url,C.signal)}let{shortCircuited:G,matches:Z,loaderData:se,errors:oe}=await st(C,le,M,E.active,Ee,de&&de.submission,de&&de.fetcherSubmission,de&&de.replace,de&&de.initialHydration===!0,J,B);G||(w=null,Ae(le,Bt({matches:Z||M},gf(B),{loaderData:se,errors:oe})))}async function ve(ee,le,de,ge,Ee,M){M===void 0&&(M={}),dt();let J=ZN(le,de);if(X({navigation:J},{flushSync:M.flushSync===!0}),Ee){let B=await Ge(ge,le.pathname,ee.signal);if(B.type==="aborted")return{shortCircuited:!0};if(B.type==="error"){let G=Mn(B.partialMatches).route.id;return{matches:B.partialMatches,pendingActionResult:[G,{type:At.error,error:B.error}]}}else if(B.matches)ge=B.matches;else{let{notFoundMatches:G,error:Z,route:se}=be(le.pathname);return{matches:G,pendingActionResult:[se.id,{type:At.error,error:Z}]}}}let E,C=Tl(ge,le);if(!C.route.action&&!C.route.lazy)E={type:At.error,error:nr(405,{method:ee.method,pathname:le.pathname,routeId:C.route.id})};else if(E=(await Tt("action",k,ee,[C],ge,null))[C.route.id],ee.signal.aborted)return{shortCircuited:!0};if(Vn(E)){let B;return M&&M.replace!=null?B=M.replace:B=mf(E.response.headers.get("Location"),new URL(ee.url),c)===k.location.pathname+k.location.search,await ct(ee,E,!0,{submission:de,replace:B}),{shortCircuited:!0}}if(on(E))throw nr(400,{type:"defer-action"});if(pr(E)){let B=Mn(ge,C.route.id);return(M&&M.replace)!==!0&&(_=Qt.Push),{matches:ge,pendingActionResult:[B.route.id,E]}}return{matches:ge,pendingActionResult:[C.route.id,E]}}async function st(ee,le,de,ge,Ee,M,J,E,C,B,G){let Z=Ee||S0(le,M),se=M||J||vf(Z),oe=!L&&(!p.v7_partialHydration||!C);if(ge){if(oe){let yt=St(G);X(Bt({navigation:Z},yt!==void 0?{actionData:yt}:{}),{flushSync:B})}let Xe=await Ge(de,le.pathname,ee.signal);if(Xe.type==="aborted")return{shortCircuited:!0};if(Xe.type==="error"){let yt=Mn(Xe.partialMatches).route.id;return{matches:Xe.partialMatches,loaderData:{},errors:{[yt]:Xe.error}}}else if(Xe.matches)de=Xe.matches;else{let{error:yt,notFoundMatches:wt,route:Lt}=be(le.pathname);return{matches:wt,loaderData:{},errors:{[Lt.id]:yt}}}}let ce=o||l,[ie,ue]=df(t.history,k,de,se,le,p.v7_partialHydration&&C===!0,p.v7_skipActionErrorRevalidation,O,W,Q,Y,U,I,ce,c,G);if(ye(Xe=>!(de&&de.some(yt=>yt.route.id===Xe))||ie&&ie.some(yt=>yt.route.id===Xe)),V=++F,ie.length===0&&ue.length===0){let Xe=ia();return Ae(le,Bt({matches:de,loaderData:{},errors:G&&pr(G[1])?{[G[0]]:G[1].error}:null},gf(G),Xe?{fetchers:new Map(k.fetchers)}:{}),{flushSync:B}),{shortCircuited:!0}}if(oe){let Xe={};if(!ge){Xe.navigation=Z;let yt=St(G);yt!==void 0&&(Xe.actionData=yt)}ue.length>0&&(Xe.fetchers=fe(ue)),X(Xe,{flushSync:B})}ue.forEach(Xe=>{at(Xe.key),Xe.controller&&D.set(Xe.key,Xe.controller)});let we=()=>ue.forEach(Xe=>at(Xe.key));w&&w.signal.addEventListener("abort",we);let{loaderResults:Fe,fetcherResults:je}=await _t(k,de,ie,ue,ee);if(ee.signal.aborted)return{shortCircuited:!0};w&&w.signal.removeEventListener("abort",we),ue.forEach(Xe=>D.delete(Xe.key));let Ce=cc(Fe);if(Ce)return await ct(ee,Ce.result,!0,{replace:E}),{shortCircuited:!0};if(Ce=cc(je),Ce)return I.add(Ce.key),await ct(ee,Ce.result,!0,{replace:E}),{shortCircuited:!0};let{loaderData:Ue,errors:mt}=ff(k,de,Fe,G,ue,je,K);K.forEach((Xe,yt)=>{Xe.subscribe(wt=>{(wt||Xe.done)&&K.delete(yt)})}),p.v7_partialHydration&&C&&k.errors&&(mt=Bt({},k.errors,mt));let it=ia(),Et=Sa(V),Ps=it||Et||ue.length>0;return Bt({matches:de,loaderData:Ue,errors:mt},Ps?{fetchers:new Map(k.fetchers)}:{})}function St(ee){if(ee&&!pr(ee[1]))return{[ee[0]]:ee[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function fe(ee){return ee.forEach(le=>{let de=k.fetchers.get(le.key),ge=jl(void 0,de?de.data:void 0);k.fetchers.set(le.key,ge)}),new Map(k.fetchers)}function ae(ee,le,de,ge){if(a)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");at(ee);let Ee=(ge&&ge.flushSync)===!0,M=o||l,J=Mu(k.location,k.matches,c,p.v7_prependBasename,de,p.v7_relativeSplatPath,le,ge==null?void 0:ge.relative),E=In(M,J,c),C=Ne(E,M,J);if(C.active&&C.matches&&(E=C.matches),!E){pe(ee,le,nr(404,{pathname:J}),{flushSync:Ee});return}let{path:B,submission:G,error:Z}=of(p.v7_normalizeFormMethod,!0,J,ge);if(Z){pe(ee,le,Z,{flushSync:Ee});return}let se=Tl(E,B),oe=(ge&&ge.preventScrollReset)===!0;if(G&&Kr(G.formMethod)){Be(ee,le,B,se,E,C.active,Ee,oe,G);return}U.set(ee,{routeId:le,path:B}),Ct(ee,le,B,se,E,C.active,Ee,oe,G)}async function Be(ee,le,de,ge,Ee,M,J,E,C){dt(),U.delete(ee);function B(Ke){if(!Ke.route.action&&!Ke.route.lazy){let sr=nr(405,{method:C.formMethod,pathname:de,routeId:le});return pe(ee,le,sr,{flushSync:J}),!0}return!1}if(!M&&B(ge))return;let G=k.fetchers.get(ee);ut(ee,ek(C,G),{flushSync:J});let Z=new AbortController,se=bi(t.history,de,Z.signal,C);if(M){let Ke=await Ge(Ee,new URL(se.url).pathname,se.signal,ee);if(Ke.type==="aborted")return;if(Ke.type==="error"){pe(ee,le,Ke.error,{flushSync:J});return}else if(Ke.matches){if(Ee=Ke.matches,ge=Tl(Ee,de),B(ge))return}else{pe(ee,le,nr(404,{pathname:de}),{flushSync:J});return}}D.set(ee,Z);let oe=F,ie=(await Tt("action",k,se,[ge],Ee,ee))[ge.route.id];if(se.signal.aborted){D.get(ee)===Z&&D.delete(ee);return}if(p.v7_fetcherPersist&&Y.has(ee)){if(Vn(ie)||pr(ie)){ut(ee,Qa(void 0));return}}else{if(Vn(ie))if(D.delete(ee),V>oe){ut(ee,Qa(void 0));return}else return I.add(ee),ut(ee,jl(C)),ct(se,ie,!1,{fetcherSubmission:C,preventScrollReset:E});if(pr(ie)){pe(ee,le,ie.error);return}}if(on(ie))throw nr(400,{type:"defer-action"});let ue=k.navigation.location||k.location,we=bi(t.history,ue,Z.signal),Fe=o||l,je=k.navigation.state!=="idle"?In(Fe,k.navigation.location,c):k.matches;rt(je,"Didn't find any matches after fetcher action");let Ce=++F;te.set(ee,Ce);let Ue=jl(C,ie.data);k.fetchers.set(ee,Ue);let[mt,it]=df(t.history,k,je,C,ue,!1,p.v7_skipActionErrorRevalidation,O,W,Q,Y,U,I,Fe,c,[ge.route.id,ie]);it.filter(Ke=>Ke.key!==ee).forEach(Ke=>{let sr=Ke.key,Ja=k.fetchers.get(sr),Hs=jl(void 0,Ja?Ja.data:void 0);k.fetchers.set(sr,Hs),at(sr),Ke.controller&&D.set(sr,Ke.controller)}),X({fetchers:new Map(k.fetchers)});let Et=()=>it.forEach(Ke=>at(Ke.key));Z.signal.addEventListener("abort",Et);let{loaderResults:Ps,fetcherResults:Xe}=await _t(k,je,mt,it,we);if(Z.signal.aborted)return;Z.signal.removeEventListener("abort",Et),te.delete(ee),D.delete(ee),it.forEach(Ke=>D.delete(Ke.key));let yt=cc(Ps);if(yt)return ct(we,yt.result,!1,{preventScrollReset:E});if(yt=cc(Xe),yt)return I.add(yt.key),ct(we,yt.result,!1,{preventScrollReset:E});let{loaderData:wt,errors:Lt}=ff(k,je,Ps,void 0,it,Xe,K);if(k.fetchers.has(ee)){let Ke=Qa(ie.data);k.fetchers.set(ee,Ke)}Sa(Ce),k.navigation.state==="loading"&&Ce>V?(rt(_,"Expected pending action"),w&&w.abort(),Ae(k.navigation.location,{matches:je,loaderData:wt,errors:Lt,fetchers:new Map(k.fetchers)})):(X({errors:Lt,loaderData:pf(k.loaderData,wt,je,Lt),fetchers:new Map(k.fetchers)}),O=!1)}async function Ct(ee,le,de,ge,Ee,M,J,E,C){let B=k.fetchers.get(ee);ut(ee,jl(C,B?B.data:void 0),{flushSync:J});let G=new AbortController,Z=bi(t.history,de,G.signal);if(M){let ie=await Ge(Ee,new URL(Z.url).pathname,Z.signal,ee);if(ie.type==="aborted")return;if(ie.type==="error"){pe(ee,le,ie.error,{flushSync:J});return}else if(ie.matches)Ee=ie.matches,ge=Tl(Ee,de);else{pe(ee,le,nr(404,{pathname:de}),{flushSync:J});return}}D.set(ee,G);let se=F,ce=(await Tt("loader",k,Z,[ge],Ee,ee))[ge.route.id];if(on(ce)&&(ce=await om(ce,Z.signal,!0)||ce),D.get(ee)===G&&D.delete(ee),!Z.signal.aborted){if(Y.has(ee)){ut(ee,Qa(void 0));return}if(Vn(ce))if(V>se){ut(ee,Qa(void 0));return}else{I.add(ee),await ct(Z,ce,!1,{preventScrollReset:E});return}if(pr(ce)){pe(ee,le,ce.error);return}rt(!on(ce),"Unhandled fetcher deferred data"),ut(ee,Qa(ce.data))}}async function ct(ee,le,de,ge){let{submission:Ee,fetcherSubmission:M,preventScrollReset:J,replace:E}=ge===void 0?{}:ge;le.response.headers.has("X-Remix-Revalidate")&&(O=!0);let C=le.response.headers.get("Location");rt(C,"Expected a Location header on the redirect Response"),C=mf(C,new URL(ee.url),c);let B=yo(k.location,C,{_isRedirect:!0});if(r){let ie=!1;if(le.response.headers.has("X-Remix-Reload-Document"))ie=!0;else if(lm.test(C)){const ue=t.history.createURL(C);ie=ue.origin!==s.location.origin||nl(ue.pathname,c)==null}if(ie){E?s.location.replace(C):s.location.assign(C);return}}w=null;let G=E===!0||le.response.headers.has("X-Remix-Replace")?Qt.Replace:Qt.Push,{formMethod:Z,formAction:se,formEncType:oe}=k.navigation;!Ee&&!M&&Z&&se&&oe&&(Ee=vf(k.navigation));let ce=Ee||M;if(RN.has(le.response.status)&&ce&&Kr(ce.formMethod))await Le(G,B,{submission:Bt({},ce,{formAction:C}),preventScrollReset:J||y,enableViewTransition:de?R:void 0});else{let ie=S0(B,Ee);await Le(G,B,{overrideNavigation:ie,fetcherSubmission:M,preventScrollReset:J||y,enableViewTransition:de?R:void 0})}}async function Tt(ee,le,de,ge,Ee,M){let J,E={};try{J=await zN(d,ee,le,de,ge,Ee,M,i,n)}catch(C){return ge.forEach(B=>{E[B.route.id]={type:At.error,error:C}}),E}for(let[C,B]of Object.entries(J))if(JN(B)){let G=B.result;E[C]={type:At.redirect,response:HN(G,de,C,Ee,c,p.v7_relativeSplatPath)}}else E[C]=await VN(B);return E}async function _t(ee,le,de,ge,Ee){let M=ee.matches,J=Tt("loader",ee,Ee,de,le,null),E=Promise.all(ge.map(async G=>{if(G.matches&&G.match&&G.controller){let se=(await Tt("loader",ee,bi(t.history,G.path,G.controller.signal),[G.match],G.matches,G.key))[G.match.route.id];return{[G.key]:se}}else return Promise.resolve({[G.key]:{type:At.error,error:nr(404,{pathname:G.path})}})})),C=await J,B=(await E).reduce((G,Z)=>Object.assign(G,Z),{});return await Promise.all([XN(le,C,Ee.signal,M,ee.loaderData),QN(le,B,ge)]),{loaderResults:C,fetcherResults:B}}function dt(){O=!0,W.push(...ye()),U.forEach((ee,le)=>{D.has(le)&&Q.add(le),at(le)})}function ut(ee,le,de){de===void 0&&(de={}),k.fetchers.set(ee,le),X({fetchers:new Map(k.fetchers)},{flushSync:(de&&de.flushSync)===!0})}function pe(ee,le,de,ge){ge===void 0&&(ge={});let Ee=Mn(k.matches,le);Je(ee),X({errors:{[Ee.route.id]:de},fetchers:new Map(k.fetchers)},{flushSync:(ge&&ge.flushSync)===!0})}function Me(ee){return z.set(ee,(z.get(ee)||0)+1),Y.has(ee)&&Y.delete(ee),k.fetchers.get(ee)||LN}function Je(ee){let le=k.fetchers.get(ee);D.has(ee)&&!(le&&le.state==="loading"&&te.has(ee))&&at(ee),U.delete(ee),te.delete(ee),I.delete(ee),p.v7_fetcherPersist&&Y.delete(ee),Q.delete(ee),k.fetchers.delete(ee)}function jt(ee){let le=(z.get(ee)||0)-1;le<=0?(z.delete(ee),Y.add(ee),p.v7_fetcherPersist||Je(ee)):z.set(ee,le),X({fetchers:new Map(k.fetchers)})}function at(ee){let le=D.get(ee);le&&(le.abort(),D.delete(ee))}function Yt(ee){for(let le of ee){let de=Me(le),ge=Qa(de.data);k.fetchers.set(le,ge)}}function ia(){let ee=[],le=!1;for(let de of I){let ge=k.fetchers.get(de);rt(ge,"Expected fetcher: "+de),ge.state==="loading"&&(I.delete(de),ee.push(de),le=!0)}return Yt(ee),le}function Sa(ee){let le=[];for(let[de,ge]of te)if(ge<ee){let Ee=k.fetchers.get(de);rt(Ee,"Expected fetcher: "+de),Ee.state==="loading"&&(at(de),te.delete(de),le.push(de))}return Yt(le),le.length>0}function qa(ee,le){let de=k.blockers.get(ee)||vl;return ne.get(ee)!==le&&ne.set(ee,le),de}function Ur(ee){k.blockers.delete(ee),ne.delete(ee)}function he(ee,le){let de=k.blockers.get(ee)||vl;rt(de.state==="unblocked"&&le.state==="blocked"||de.state==="blocked"&&le.state==="blocked"||de.state==="blocked"&&le.state==="proceeding"||de.state==="blocked"&&le.state==="unblocked"||de.state==="proceeding"&&le.state==="unblocked","Invalid blocker state transition: "+de.state+" -> "+le.state);let ge=new Map(k.blockers);ge.set(ee,le),X({blockers:ge})}function me(ee){let{currentLocation:le,nextLocation:de,historyAction:ge}=ee;if(ne.size===0)return;ne.size>1&&ri(!1,"A router only supports one blocker at a time");let Ee=Array.from(ne.entries()),[M,J]=Ee[Ee.length-1],E=k.blockers.get(M);if(!(E&&E.state==="proceeding")&&J({currentLocation:le,nextLocation:de,historyAction:ge}))return M}function be(ee){let le=nr(404,{pathname:ee}),de=o||l,{matches:ge,route:Ee}=yf(de);return ye(),{notFoundMatches:ge,route:Ee,error:le}}function ye(ee){let le=[];return K.forEach((de,ge)=>{(!ee||ee(ge))&&(de.cancel(),le.push(ge),K.delete(ge))}),le}function Pe(ee,le,de){if(x=ee,m=le,h=de||null,!j&&k.navigation===k0){j=!0;let ge=Te(k.location,k.matches);ge!=null&&X({restoreScrollPosition:ge})}return()=>{x=null,m=null,h=null}}function Re(ee,le){return h&&h(ee,le.map(ge=>uN(ge,k.loaderData)))||ee.key}function $e(ee,le){if(x&&m){let de=Re(ee,le);x[de]=m()}}function Te(ee,le){if(x){let de=Re(ee,le),ge=x[de];if(typeof ge=="number")return ge}return null}function Ne(ee,le,de){if(u)if(ee){if(Object.keys(ee[0].params).length>0)return{active:!0,matches:Lc(le,de,c,!0)}}else return{active:!0,matches:Lc(le,de,c,!0)||[]};return{active:!1,matches:null}}async function Ge(ee,le,de,ge){if(!u)return{type:"success",matches:ee};let Ee=ee;for(;;){let M=o==null,J=o||l,E=i;try{await u({signal:de,path:le,matches:Ee,fetcherKey:ge,patch:(G,Z)=>{de.aborted||xf(G,Z,J,E,n)}})}catch(G){return{type:"error",error:G,partialMatches:Ee}}finally{M&&!de.aborted&&(l=[...l])}if(de.aborted)return{type:"aborted"};let C=In(J,le,c);if(C)return{type:"success",matches:C};let B=Lc(J,le,c,!0);if(!B||Ee.length===B.length&&Ee.every((G,Z)=>G.route.id===B[Z].route.id))return{type:"success",matches:null};Ee=B}}function nt(ee){i={},o=ud(ee,n,void 0,i)}function ht(ee,le){let de=o==null;xf(ee,le,o||l,i,n),de&&(l=[...l],X({}))}return T={get basename(){return c},get future(){return p},get state(){return k},get routes(){return l},get window(){return s},initialize:re,subscribe:_e,enableScrollRestoration:Pe,navigate:Ie,fetch:ae,revalidate:He,createHref:ee=>t.history.createHref(ee),encodeLocation:ee=>t.history.encodeLocation(ee),getFetcher:Me,deleteFetcher:jt,dispose:xe,getBlocker:qa,deleteBlocker:Ur,patchRoutes:ht,_internalFetchControllers:D,_internalActiveDeferreds:K,_internalSetRoutes:nt},T}function MN(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Mu(t,s,r,a,n,i,l,o){let c,d;if(l){c=[];for(let p of s)if(c.push(p),p.route.id===l){d=p;break}}else c=s,d=s[s.length-1];let u=zd(n||".",Ud(c,i),nl(t.pathname,r)||t.pathname,o==="path");if(n==null&&(u.search=t.search,u.hash=t.hash),(n==null||n===""||n===".")&&d){let p=cm(u.search);if(d.route.index&&!p)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&p){let f=new URLSearchParams(u.search),g=f.getAll("index");f.delete("index"),g.filter(h=>h).forEach(h=>f.append("index",h));let x=f.toString();u.search=x?"?"+x:""}}return a&&r!=="/"&&(u.pathname=u.pathname==="/"?r:Da([r,u.pathname])),ai(u)}function of(t,s,r,a){if(!a||!MN(a))return{path:r};if(a.formMethod&&!YN(a.formMethod))return{path:r,error:nr(405,{method:a.formMethod})};let n=()=>({path:r,error:nr(400,{type:"invalid-body"})}),i=a.formMethod||"get",l=t?i.toUpperCase():i.toLowerCase(),o=ub(r);if(a.body!==void 0){if(a.formEncType==="text/plain"){if(!Kr(l))return n();let f=typeof a.body=="string"?a.body:a.body instanceof FormData||a.body instanceof URLSearchParams?Array.from(a.body.entries()).reduce((g,x)=>{let[h,m]=x;return""+g+h+"="+m+`
`},""):String(a.body);return{path:r,submission:{formMethod:l,formAction:o,formEncType:a.formEncType,formData:void 0,json:void 0,text:f}}}else if(a.formEncType==="application/json"){if(!Kr(l))return n();try{let f=typeof a.body=="string"?JSON.parse(a.body):a.body;return{path:r,submission:{formMethod:l,formAction:o,formEncType:a.formEncType,formData:void 0,json:f,text:void 0}}}catch{return n()}}}rt(typeof FormData=="function","FormData is not available in this environment");let c,d;if(a.formData)c=$u(a.formData),d=a.formData;else if(a.body instanceof FormData)c=$u(a.body),d=a.body;else if(a.body instanceof URLSearchParams)c=a.body,d=hf(c);else if(a.body==null)c=new URLSearchParams,d=new FormData;else try{c=new URLSearchParams(a.body),d=hf(c)}catch{return n()}let u={formMethod:l,formAction:o,formEncType:a&&a.formEncType||"application/x-www-form-urlencoded",formData:d,json:void 0,text:void 0};if(Kr(u.formMethod))return{path:r,submission:u};let p=Ha(r);return s&&p.search&&cm(p.search)&&c.append("index",""),p.search="?"+c,{path:ai(p),submission:u}}function cf(t,s,r){r===void 0&&(r=!1);let a=t.findIndex(n=>n.route.id===s);return a>=0?t.slice(0,r?a+1:a):t}function df(t,s,r,a,n,i,l,o,c,d,u,p,f,g,x,h){let m=h?pr(h[1])?h[1].error:h[1].data:void 0,j=t.createURL(s.location),v=t.createURL(n),N=r;i&&s.errors?N=cf(r,Object.keys(s.errors)[0],!0):h&&pr(h[1])&&(N=cf(r,h[0]));let S=h?h[1].statusCode:void 0,A=l&&S&&S>=400,T=N.filter((_,y)=>{let{route:w}=_;if(w.lazy)return!0;if(w.loader==null)return!1;if(i)return Bu(w,s.loaderData,s.errors);if(BN(s.loaderData,s.matches[y],_)||c.some(H=>H===_.route.id))return!0;let R=s.matches[y],P=_;return uf(_,Bt({currentUrl:j,currentParams:R.params,nextUrl:v,nextParams:P.params},a,{actionResult:m,actionStatus:S,defaultShouldRevalidate:A?!1:o||j.pathname+j.search===v.pathname+v.search||j.search!==v.search||cb(R,P)}))}),k=[];return p.forEach((_,y)=>{if(i||!r.some(L=>L.route.id===_.routeId)||u.has(y))return;let w=In(g,_.path,x);if(!w){k.push({key:y,routeId:_.routeId,path:_.path,matches:null,match:null,controller:null});return}let R=s.fetchers.get(y),P=Tl(w,_.path),H=!1;f.has(y)?H=!1:d.has(y)?(d.delete(y),H=!0):R&&R.state!=="idle"&&R.data===void 0?H=o:H=uf(P,Bt({currentUrl:j,currentParams:s.matches[s.matches.length-1].params,nextUrl:v,nextParams:r[r.length-1].params},a,{actionResult:m,actionStatus:S,defaultShouldRevalidate:A?!1:o})),H&&k.push({key:y,routeId:_.routeId,path:_.path,matches:w,match:P,controller:new AbortController})}),[T,k]}function Bu(t,s,r){if(t.lazy)return!0;if(!t.loader)return!1;let a=s!=null&&s[t.id]!==void 0,n=r!=null&&r[t.id]!==void 0;return!a&&n?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!a&&!n}function BN(t,s,r){let a=!s||r.route.id!==s.route.id,n=t[r.route.id]===void 0;return a||n}function cb(t,s){let r=t.route.path;return t.pathname!==s.pathname||r!=null&&r.endsWith("*")&&t.params["*"]!==s.params["*"]}function uf(t,s){if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate(s);if(typeof r=="boolean")return r}return s.defaultShouldRevalidate}function xf(t,s,r,a,n){var i;let l;if(t){let d=a[t];rt(d,"No route found to patch children into: routeId = "+t),d.children||(d.children=[]),l=d.children}else l=r;let o=s.filter(d=>!l.some(u=>db(d,u))),c=ud(o,n,[t||"_","patch",String(((i=l)==null?void 0:i.length)||"0")],a);l.push(...c)}function db(t,s){return"id"in t&&"id"in s&&t.id===s.id?!0:t.index===s.index&&t.path===s.path&&t.caseSensitive===s.caseSensitive?(!t.children||t.children.length===0)&&(!s.children||s.children.length===0)?!0:t.children.every((r,a)=>{var n;return(n=s.children)==null?void 0:n.some(i=>db(r,i))}):!1}async function $N(t,s,r){if(!t.lazy)return;let a=await t.lazy();if(!t.lazy)return;let n=r[t.id];rt(n,"No route found in manifest");let i={};for(let l in a){let c=n[l]!==void 0&&l!=="hasErrorBoundary";ri(!c,'Route "'+n.id+'" has a static property "'+l+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+l+'" will be ignored.')),!c&&!cN.has(l)&&(i[l]=a[l])}Object.assign(n,i),Object.assign(n,Bt({},s(n),{lazy:void 0}))}async function UN(t){let{matches:s}=t,r=s.filter(n=>n.shouldLoad);return(await Promise.all(r.map(n=>n.resolve()))).reduce((n,i,l)=>Object.assign(n,{[r[l].route.id]:i}),{})}async function zN(t,s,r,a,n,i,l,o,c,d){let u=i.map(g=>g.route.lazy?$N(g.route,c,o):void 0),p=i.map((g,x)=>{let h=u[x],m=n.some(v=>v.route.id===g.route.id);return Bt({},g,{shouldLoad:m,resolve:async v=>(v&&a.method==="GET"&&(g.route.lazy||g.route.loader)&&(m=!0),m?WN(s,a,g,h,v,d):Promise.resolve({type:At.data,result:void 0}))})}),f=await t({matches:p,request:a,params:i[0].params,fetcherKey:l,context:d});try{await Promise.all(u)}catch{}return f}async function WN(t,s,r,a,n,i){let l,o,c=d=>{let u,p=new Promise((x,h)=>u=h);o=()=>u(),s.signal.addEventListener("abort",o);let f=x=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+r.route.id+"]"))):d({request:s,params:r.params,context:i},...x!==void 0?[x]:[]),g=(async()=>{try{return{type:"data",result:await(n?n(h=>f(h)):f())}}catch(x){return{type:"error",result:x}}})();return Promise.race([g,p])};try{let d=r.route[t];if(a)if(d){let u,[p]=await Promise.all([c(d).catch(f=>{u=f}),a]);if(u!==void 0)throw u;l=p}else if(await a,d=r.route[t],d)l=await c(d);else if(t==="action"){let u=new URL(s.url),p=u.pathname+u.search;throw nr(405,{method:s.method,pathname:p,routeId:r.route.id})}else return{type:At.data,result:void 0};else if(d)l=await c(d);else{let u=new URL(s.url),p=u.pathname+u.search;throw nr(404,{pathname:p})}rt(l.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:At.error,result:d}}finally{o&&s.signal.removeEventListener("abort",o)}return l}async function VN(t){let{result:s,type:r}=t;if(xb(s)){let p;try{let f=s.headers.get("Content-Type");f&&/\bapplication\/json\b/.test(f)?s.body==null?p=null:p=await s.json():p=await s.text()}catch(f){return{type:At.error,error:f}}return r===At.error?{type:At.error,error:new xd(s.status,s.statusText,p),statusCode:s.status,headers:s.headers}:{type:At.data,data:p,statusCode:s.status,headers:s.headers}}if(r===At.error){if(bf(s)){var a,n;if(s.data instanceof Error){var i,l;return{type:At.error,error:s.data,statusCode:(i=s.init)==null?void 0:i.status,headers:(l=s.init)!=null&&l.headers?new Headers(s.init.headers):void 0}}return{type:At.error,error:new xd(((a=s.init)==null?void 0:a.status)||500,void 0,s.data),statusCode:bo(s)?s.status:void 0,headers:(n=s.init)!=null&&n.headers?new Headers(s.init.headers):void 0}}return{type:At.error,error:s,statusCode:bo(s)?s.status:void 0}}if(KN(s)){var o,c;return{type:At.deferred,deferredData:s,statusCode:(o=s.init)==null?void 0:o.status,headers:((c=s.init)==null?void 0:c.headers)&&new Headers(s.init.headers)}}if(bf(s)){var d,u;return{type:At.data,data:s.data,statusCode:(d=s.init)==null?void 0:d.status,headers:(u=s.init)!=null&&u.headers?new Headers(s.init.headers):void 0}}return{type:At.data,data:s}}function HN(t,s,r,a,n,i){let l=t.headers.get("Location");if(rt(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!lm.test(l)){let o=a.slice(0,a.findIndex(c=>c.route.id===r)+1);l=Mu(new URL(s.url),o,n,!0,l,i),t.headers.set("Location",l)}return t}function mf(t,s,r){if(lm.test(t)){let a=t,n=a.startsWith("//")?new URL(s.protocol+a):new URL(a),i=nl(n.pathname,r)!=null;if(n.origin===s.origin&&i)return n.pathname+n.search+n.hash}return t}function bi(t,s,r,a){let n=t.createURL(ub(s)).toString(),i={signal:r};if(a&&Kr(a.formMethod)){let{formMethod:l,formEncType:o}=a;i.method=l.toUpperCase(),o==="application/json"?(i.headers=new Headers({"Content-Type":o}),i.body=JSON.stringify(a.json)):o==="text/plain"?i.body=a.text:o==="application/x-www-form-urlencoded"&&a.formData?i.body=$u(a.formData):i.body=a.formData}return new Request(n,i)}function $u(t){let s=new URLSearchParams;for(let[r,a]of t.entries())s.append(r,typeof a=="string"?a:a.name);return s}function hf(t){let s=new FormData;for(let[r,a]of t.entries())s.append(r,a);return s}function GN(t,s,r,a,n){let i={},l=null,o,c=!1,d={},u=r&&pr(r[1])?r[1].error:void 0;return t.forEach(p=>{if(!(p.route.id in s))return;let f=p.route.id,g=s[f];if(rt(!Vn(g),"Cannot handle redirect results in processLoaderData"),pr(g)){let x=g.error;u!==void 0&&(x=u,u=void 0),l=l||{};{let h=Mn(t,f);l[h.route.id]==null&&(l[h.route.id]=x)}i[f]=void 0,c||(c=!0,o=bo(g.error)?g.error.status:500),g.headers&&(d[f]=g.headers)}else on(g)?(a.set(f,g.deferredData),i[f]=g.deferredData.data,g.statusCode!=null&&g.statusCode!==200&&!c&&(o=g.statusCode),g.headers&&(d[f]=g.headers)):(i[f]=g.data,g.statusCode&&g.statusCode!==200&&!c&&(o=g.statusCode),g.headers&&(d[f]=g.headers))}),u!==void 0&&r&&(l={[r[0]]:u},i[r[0]]=void 0),{loaderData:i,errors:l,statusCode:o||200,loaderHeaders:d}}function ff(t,s,r,a,n,i,l){let{loaderData:o,errors:c}=GN(s,r,a,l);return n.forEach(d=>{let{key:u,match:p,controller:f}=d,g=i[u];if(rt(g,"Did not find corresponding fetcher result"),!(f&&f.signal.aborted))if(pr(g)){let x=Mn(t.matches,p==null?void 0:p.route.id);c&&c[x.route.id]||(c=Bt({},c,{[x.route.id]:g.error})),t.fetchers.delete(u)}else if(Vn(g))rt(!1,"Unhandled fetcher revalidation redirect");else if(on(g))rt(!1,"Unhandled fetcher deferred data");else{let x=Qa(g.data);t.fetchers.set(u,x)}}),{loaderData:o,errors:c}}function pf(t,s,r,a){let n=Bt({},s);for(let i of r){let l=i.route.id;if(s.hasOwnProperty(l)?s[l]!==void 0&&(n[l]=s[l]):t[l]!==void 0&&i.route.loader&&(n[l]=t[l]),a&&a.hasOwnProperty(l))break}return n}function gf(t){return t?pr(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Mn(t,s){return(s?t.slice(0,t.findIndex(a=>a.route.id===s)+1):[...t]).reverse().find(a=>a.route.hasErrorBoundary===!0)||t[0]}function yf(t){let s=t.length===1?t[0]:t.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:s}],route:s}}function nr(t,s){let{pathname:r,routeId:a,method:n,type:i,message:l}=s===void 0?{}:s,o="Unknown Server Error",c="Unknown @remix-run/router error";return t===400?(o="Bad Request",n&&r&&a?c="You made a "+n+' request to "'+r+'" but '+('did not provide a `loader` for route "'+a+'", ')+"so there is no way to handle the request.":i==="defer-action"?c="defer() is not supported in actions":i==="invalid-body"&&(c="Unable to encode submission body")):t===403?(o="Forbidden",c='Route "'+a+'" does not match URL "'+r+'"'):t===404?(o="Not Found",c='No route matches URL "'+r+'"'):t===405&&(o="Method Not Allowed",n&&r&&a?c="You made a "+n.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+a+'", ')+"so there is no way to handle the request.":n&&(c='Invalid request method "'+n.toUpperCase()+'"')),new xd(t||500,o,new Error(c),!0)}function cc(t){let s=Object.entries(t);for(let r=s.length-1;r>=0;r--){let[a,n]=s[r];if(Vn(n))return{key:a,result:n}}}function ub(t){let s=typeof t=="string"?Ha(t):t;return ai(Bt({},s,{hash:""}))}function qN(t,s){return t.pathname!==s.pathname||t.search!==s.search?!1:t.hash===""?s.hash!=="":t.hash===s.hash?!0:s.hash!==""}function JN(t){return xb(t.result)&&DN.has(t.result.status)}function on(t){return t.type===At.deferred}function pr(t){return t.type===At.error}function Vn(t){return(t&&t.type)===At.redirect}function bf(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function KN(t){let s=t;return s&&typeof s=="object"&&typeof s.data=="object"&&typeof s.subscribe=="function"&&typeof s.cancel=="function"&&typeof s.resolveData=="function"}function xb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function YN(t){return PN.has(t.toLowerCase())}function Kr(t){return AN.has(t.toLowerCase())}async function XN(t,s,r,a,n){let i=Object.entries(s);for(let l=0;l<i.length;l++){let[o,c]=i[l],d=t.find(f=>(f==null?void 0:f.route.id)===o);if(!d)continue;let u=a.find(f=>f.route.id===d.route.id),p=u!=null&&!cb(u,d)&&(n&&n[d.route.id])!==void 0;on(c)&&p&&await om(c,r,!1).then(f=>{f&&(s[o]=f)})}}async function QN(t,s,r){for(let a=0;a<r.length;a++){let{key:n,routeId:i,controller:l}=r[a],o=s[n];t.find(d=>(d==null?void 0:d.route.id)===i)&&on(o)&&(rt(l,"Expected an AbortController for revalidating fetcher deferred result"),await om(o,l.signal,!0).then(d=>{d&&(s[n]=d)}))}}async function om(t,s,r){if(r===void 0&&(r=!1),!await t.deferredData.resolveData(s)){if(r)try{return{type:At.data,data:t.deferredData.unwrappedData}}catch(n){return{type:At.error,error:n}}return{type:At.data,data:t.deferredData.data}}}function cm(t){return new URLSearchParams(t).getAll("index").some(s=>s==="")}function Tl(t,s){let r=typeof s=="string"?Ha(s).search:s.search;if(t[t.length-1].route.index&&cm(r||""))return t[t.length-1];let a=ib(t);return a[a.length-1]}function vf(t){let{formMethod:s,formAction:r,formEncType:a,text:n,formData:i,json:l}=t;if(!(!s||!r||!a)){if(n!=null)return{formMethod:s,formAction:r,formEncType:a,formData:void 0,json:void 0,text:n};if(i!=null)return{formMethod:s,formAction:r,formEncType:a,formData:i,json:void 0,text:void 0};if(l!==void 0)return{formMethod:s,formAction:r,formEncType:a,formData:void 0,json:l,text:void 0}}}function S0(t,s){return s?{state:"loading",location:t,formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function ZN(t,s){return{state:"submitting",location:t,formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text}}function jl(t,s){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:s}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:s}}function ek(t,s){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:s?s.data:void 0}}function Qa(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function tk(t,s){try{let r=t.sessionStorage.getItem(ob);if(r){let a=JSON.parse(r);for(let[n,i]of Object.entries(a||{}))i&&Array.isArray(i)&&s.set(n,new Set(i||[]))}}catch{}}function sk(t,s){if(s.size>0){let r={};for(let[a,n]of s)r[a]=[...n];try{t.sessionStorage.setItem(ob,JSON.stringify(r))}catch(a){ri(!1,"Failed to save applied view transitions in sessionStorage ("+a+").")}}}/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vo(){return vo=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},vo.apply(this,arguments)}const Wd=b.createContext(null),mb=b.createContext(null),Fn=b.createContext(null),Vd=b.createContext(null),va=b.createContext({outlet:null,matches:[],isDataRoute:!1}),hb=b.createContext(null);function rk(t,s){let{relative:r}=s===void 0?{}:s;il()||rt(!1);let{basename:a,navigator:n}=b.useContext(Fn),{hash:i,pathname:l,search:o}=gb(t,{relative:r}),c=l;return a!=="/"&&(c=l==="/"?a:Da([a,l])),n.createHref({pathname:c,search:o,hash:i})}function il(){return b.useContext(Vd)!=null}function ui(){return il()||rt(!1),b.useContext(Vd).location}function fb(t){b.useContext(Fn).static||b.useLayoutEffect(t)}function ja(){let{isDataRoute:t}=b.useContext(va);return t?gk():ak()}function ak(){il()||rt(!1);let t=b.useContext(Wd),{basename:s,future:r,navigator:a}=b.useContext(Fn),{matches:n}=b.useContext(va),{pathname:i}=ui(),l=JSON.stringify(Ud(n,r.v7_relativeSplatPath)),o=b.useRef(!1);return fb(()=>{o.current=!0}),b.useCallback(function(d,u){if(u===void 0&&(u={}),!o.current)return;if(typeof d=="number"){a.go(d);return}let p=zd(d,JSON.parse(l),i,u.relative==="path");t==null&&s!=="/"&&(p.pathname=p.pathname==="/"?s:Da([s,p.pathname])),(u.replace?a.replace:a.push)(p,u.state,u)},[s,a,l,i,t])}const nk=b.createContext(null);function ik(t){let s=b.useContext(va).outlet;return s&&b.createElement(nk.Provider,{value:t},s)}function pb(){let{matches:t}=b.useContext(va),s=t[t.length-1];return s?s.params:{}}function gb(t,s){let{relative:r}=s===void 0?{}:s,{future:a}=b.useContext(Fn),{matches:n}=b.useContext(va),{pathname:i}=ui(),l=JSON.stringify(Ud(n,a.v7_relativeSplatPath));return b.useMemo(()=>zd(t,JSON.parse(l),i,r==="path"),[t,l,i,r])}function lk(t,s){return yb(t,s)}function yb(t,s,r,a){il()||rt(!1);let{navigator:n}=b.useContext(Fn),{matches:i}=b.useContext(va),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=ui(),u;if(s){var p;let m=typeof s=="string"?Ha(s):s;c==="/"||(p=m.pathname)!=null&&p.startsWith(c)||rt(!1),u=m}else u=d;let f=u.pathname||"/",g=f;if(c!=="/"){let m=c.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(m.length).join("/")}let x=In(t,{pathname:g}),h=xk(x&&x.map(m=>Object.assign({},m,{params:Object.assign({},o,m.params),pathname:Da([c,n.encodeLocation?n.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?c:Da([c,n.encodeLocation?n.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,r,a);return s&&h?b.createElement(Vd.Provider,{value:{location:vo({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Qt.Pop}},h):h}function ok(){let t=pk(),s=bo(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},s),r?b.createElement("pre",{style:n},r):null,null)}const ck=b.createElement(ok,null);class dk extends b.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?b.createElement(va.Provider,{value:this.props.routeContext},b.createElement(hb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uk(t){let{routeContext:s,match:r,children:a}=t,n=b.useContext(Wd);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(va.Provider,{value:s},a)}function xk(t,s,r,a){var n;if(s===void 0&&(s=[]),r===void 0&&(r=null),a===void 0&&(a=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=a)!=null&&i.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,o=(n=r)==null?void 0:n.errors;if(o!=null){let u=l.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);u>=0||rt(!1),l=l.slice(0,Math.min(l.length,u+1))}let c=!1,d=-1;if(r&&a&&a.v7_partialHydration)for(let u=0;u<l.length;u++){let p=l[u];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=u),p.route.id){let{loaderData:f,errors:g}=r,x=p.route.loader&&f[p.route.id]===void 0&&(!g||g[p.route.id]===void 0);if(p.route.lazy||x){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((u,p,f)=>{let g,x=!1,h=null,m=null;r&&(g=o&&p.route.id?o[p.route.id]:void 0,h=p.route.errorElement||ck,c&&(d<0&&f===0?(yk("route-fallback"),x=!0,m=null):d===f&&(x=!0,m=p.route.hydrateFallbackElement||null)));let j=s.concat(l.slice(0,f+1)),v=()=>{let N;return g?N=h:x?N=m:p.route.Component?N=b.createElement(p.route.Component,null):p.route.element?N=p.route.element:N=u,b.createElement(uk,{match:p,routeContext:{outlet:u,matches:j,isDataRoute:r!=null},children:N})};return r&&(p.route.ErrorBoundary||p.route.errorElement||f===0)?b.createElement(dk,{location:r.location,revalidation:r.revalidation,component:h,error:g,children:v(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):v()},null)}var bb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(bb||{}),vb=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(vb||{});function mk(t){let s=b.useContext(Wd);return s||rt(!1),s}function hk(t){let s=b.useContext(mb);return s||rt(!1),s}function fk(t){let s=b.useContext(va);return s||rt(!1),s}function jb(t){let s=fk(),r=s.matches[s.matches.length-1];return r.route.id||rt(!1),r.route.id}function pk(){var t;let s=b.useContext(hb),r=hk(vb.UseRouteError),a=jb();return s!==void 0?s:(t=r.errors)==null?void 0:t[a]}function gk(){let{router:t}=mk(bb.UseNavigateStable),s=jb(),r=b.useRef(!1);return fb(()=>{r.current=!0}),b.useCallback(function(n,i){i===void 0&&(i={}),r.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,vo({fromRouteId:s},i)))},[t,s])}const jf={};function yk(t,s,r){jf[t]||(jf[t]=!0)}function bk(t,s){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!s||s.v7_relativeSplatPath),s&&(s.v7_fetcherPersist,s.v7_normalizeFormMethod,s.v7_partialHydration,s.v7_skipActionErrorRevalidation)}function jo(t){let{to:s,replace:r,state:a,relative:n}=t;il()||rt(!1);let{future:i,static:l}=b.useContext(Fn),{matches:o}=b.useContext(va),{pathname:c}=ui(),d=ja(),u=zd(s,Ud(o,i.v7_relativeSplatPath),c,n==="path"),p=JSON.stringify(u);return b.useEffect(()=>d(JSON.parse(p),{replace:r,state:a,relative:n}),[d,p,n,r,a]),null}function wb(t){return ik(t.context)}function De(t){rt(!1)}function vk(t){let{basename:s="/",children:r=null,location:a,navigationType:n=Qt.Pop,navigator:i,static:l=!1,future:o}=t;il()&&rt(!1);let c=s.replace(/^\/*/,"/"),d=b.useMemo(()=>({basename:c,navigator:i,static:l,future:vo({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof a=="string"&&(a=Ha(a));let{pathname:u="/",search:p="",hash:f="",state:g=null,key:x="default"}=a,h=b.useMemo(()=>{let m=nl(u,c);return m==null?null:{location:{pathname:m,search:p,hash:f,state:g,key:x},navigationType:n}},[c,u,p,f,g,x,n]);return h==null?null:b.createElement(Fn.Provider,{value:d},b.createElement(Vd.Provider,{children:r,value:h}))}function jk(t){let{children:s,location:r}=t;return lk(Uu(s),r)}new Promise(()=>{});function Uu(t,s){s===void 0&&(s=[]);let r=[];return b.Children.forEach(t,(a,n)=>{if(!b.isValidElement(a))return;let i=[...s,n];if(a.type===b.Fragment){r.push.apply(r,Uu(a.props.children,i));return}a.type!==De&&rt(!1),!a.props.index||!a.props.children||rt(!1);let l={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=Uu(a.props.children,i)),r.push(l)}),r}function wk(t){let s={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(s,{element:b.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(s,{hydrateFallbackElement:b.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(s,{errorElement:b.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),s}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wo(){return wo=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},wo.apply(this,arguments)}function Nk(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,i;for(i=0;i<a.length;i++)n=a[i],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function kk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Sk(t,s){return t.button===0&&(!s||s==="_self")&&!kk(t)}const Ck=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_k="6";try{window.__reactRouterVersion=_k}catch{}function Tk(t,s){return IN({basename:void 0,future:wo({},void 0,{v7_prependBasename:!0}),history:iN({window:void 0}),hydrationData:Ek(),routes:t,mapRouteProperties:wk,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function Ek(){var t;let s=(t=window)==null?void 0:t.__staticRouterHydrationData;return s&&s.errors&&(s=wo({},s,{errors:Ak(s.errors)})),s}function Ak(t){if(!t)return null;let s=Object.entries(t),r={};for(let[a,n]of s)if(n&&n.__type==="RouteErrorResponse")r[a]=new xd(n.status,n.statusText,n.data,n.internal===!0);else if(n&&n.__type==="Error"){if(n.__subType){let i=window[n.__subType];if(typeof i=="function")try{let l=new i(n.message);l.stack="",r[a]=l}catch{}}if(r[a]==null){let i=new Error(n.message);i.stack="",r[a]=i}}else r[a]=n;return r}const Fk=b.createContext({isTransitioning:!1}),Pk=b.createContext(new Map),Dk="startTransition",wf=qj[Dk],Rk="flushSync",Nf=nN[Rk];function Lk(t){wf?wf(t):t()}function wl(t){Nf?Nf(t):t()}class Ok{constructor(){this.status="pending",this.promise=new Promise((s,r)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",s(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",r(a))}})}}function Ik(t){let{fallbackElement:s,router:r,future:a}=t,[n,i]=b.useState(r.state),[l,o]=b.useState(),[c,d]=b.useState({isTransitioning:!1}),[u,p]=b.useState(),[f,g]=b.useState(),[x,h]=b.useState(),m=b.useRef(new Map),{v7_startTransition:j}=a||{},v=b.useCallback(_=>{j?Lk(_):_()},[j]),N=b.useCallback((_,y)=>{let{deletedFetchers:w,flushSync:R,viewTransitionOpts:P}=y;_.fetchers.forEach((L,O)=>{L.data!==void 0&&m.current.set(O,L.data)}),w.forEach(L=>m.current.delete(L));let H=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!P||H){R?wl(()=>i(_)):v(()=>i(_));return}if(R){wl(()=>{f&&(u&&u.resolve(),f.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:P.currentLocation,nextLocation:P.nextLocation})});let L=r.window.document.startViewTransition(()=>{wl(()=>i(_))});L.finished.finally(()=>{wl(()=>{p(void 0),g(void 0),o(void 0),d({isTransitioning:!1})})}),wl(()=>g(L));return}f?(u&&u.resolve(),f.skipTransition(),h({state:_,currentLocation:P.currentLocation,nextLocation:P.nextLocation})):(o(_),d({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}))},[r.window,f,u,m,v]);b.useLayoutEffect(()=>r.subscribe(N),[r,N]),b.useEffect(()=>{c.isTransitioning&&!c.flushSync&&p(new Ok)},[c]),b.useEffect(()=>{if(u&&l&&r.window){let _=l,y=u.promise,w=r.window.document.startViewTransition(async()=>{v(()=>i(_)),await y});w.finished.finally(()=>{p(void 0),g(void 0),o(void 0),d({isTransitioning:!1})}),g(w)}},[v,l,u,r.window]),b.useEffect(()=>{u&&l&&n.location.key===l.location.key&&u.resolve()},[u,f,n.location,l]),b.useEffect(()=>{!c.isTransitioning&&x&&(o(x.state),d({isTransitioning:!0,flushSync:!1,currentLocation:x.currentLocation,nextLocation:x.nextLocation}),h(void 0))},[c.isTransitioning,x]),b.useEffect(()=>{},[]);let S=b.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:_=>r.navigate(_),push:(_,y,w)=>r.navigate(_,{state:y,preventScrollReset:w==null?void 0:w.preventScrollReset}),replace:(_,y,w)=>r.navigate(_,{replace:!0,state:y,preventScrollReset:w==null?void 0:w.preventScrollReset})}),[r]),A=r.basename||"/",T=b.useMemo(()=>({router:r,navigator:S,static:!1,basename:A}),[r,S,A]),k=b.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return b.useEffect(()=>bk(a,r.future),[a,r.future]),b.createElement(b.Fragment,null,b.createElement(Wd.Provider,{value:T},b.createElement(mb.Provider,{value:n},b.createElement(Pk.Provider,{value:m.current},b.createElement(Fk.Provider,{value:c},b.createElement(vk,{basename:A,location:n.location,navigationType:n.historyAction,navigator:S,future:k},n.initialized||r.future.v7_partialHydration?b.createElement(Mk,{routes:r.routes,future:r.future,state:n}):s))))),null)}const Mk=b.memo(Bk);function Bk(t){let{routes:s,future:r,state:a}=t;return yb(s,void 0,a,r)}const $k=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Uk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bn=b.forwardRef(function(s,r){let{onClick:a,relative:n,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:p}=s,f=Nk(s,Ck),{basename:g}=b.useContext(Fn),x,h=!1;if(typeof d=="string"&&Uk.test(d)&&(x=d,$k))try{let N=new URL(window.location.href),S=d.startsWith("//")?new URL(N.protocol+d):new URL(d),A=nl(S.pathname,g);S.origin===N.origin&&A!=null?d=A+S.search+S.hash:h=!0}catch{}let m=rk(d,{relative:n}),j=zk(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:n,viewTransition:p});function v(N){a&&a(N),N.defaultPrevented||j(N)}return b.createElement("a",wo({},f,{href:x||m,onClick:h||i?a:v,ref:r,target:c}))});var kf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(kf||(kf={}));var Sf;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Sf||(Sf={}));function zk(t,s){let{target:r,replace:a,state:n,preventScrollReset:i,relative:l,viewTransition:o}=s===void 0?{}:s,c=ja(),d=ui(),u=gb(t,{relative:l});return b.useCallback(p=>{if(Sk(p,r)){p.preventDefault();let f=a!==void 0?a:ai(d)===ai(u);c(t,{replace:f,state:n,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,a,n,r,t,i,l,o])}const Wk=()=>{if(typeof window<"u"){const t=window.location.hostname;return t==="thenefol.com"||t==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}/api`:"https://thenefol.com/api"}return"https://thenefol.com/api"},dc=()=>Wk();class Vk{constructor(){Ca(this,"authState",{user:null,isAuthenticated:!1,isLoading:!0,error:null});Ca(this,"listeners",new Set);this.initializeFromStorage()}getToken(){return localStorage.getItem("auth_token")}normalizeUser(s){if(!s)throw new Error("Invalid user payload");const r=Array.isArray(s.permissions)?s.permissions:typeof s.permissions=="string"?s.permissions.split(",").map(n=>n.trim()).filter(Boolean):[],a=Array.isArray(s.roles)?s.roles:typeof s.roles=="string"?s.roles.split(",").map(n=>n.trim()).filter(Boolean):[];return{id:s.id,email:s.email,name:s.name||s.email,role:s.role||a[0]||"admin",permissions:r}}initializeFromStorage(){try{const s=this.getToken(),r=localStorage.getItem("user");if(s&&r){const a=JSON.parse(r),n=this.normalizeUser(a);this.authState={user:n,isAuthenticated:!0,isLoading:!1,error:null}}else this.initializeEmptyState()}catch(s){console.error("Failed to initialize auth from storage:",s),this.authState={user:null,isAuthenticated:!1,isLoading:!1,error:"Failed to restore authentication"}}}initializeEmptyState(){this.authState={user:null,isAuthenticated:!1,isLoading:!1,error:null}}subscribe(s){return this.listeners.add(s),()=>{this.listeners.delete(s)}}notifyListeners(){this.listeners.forEach(s=>s({...this.authState}))}areStatesEqual(s,r){if(s.isAuthenticated!==r.isAuthenticated||s.isLoading!==r.isLoading||s.error!==r.error)return!1;const a=s.user,n=r.user;if(a===null&&n===null)return!0;if(a===null||n===null)return!1;const i=a.permissions?[...a.permissions].sort():[],l=n.permissions?[...n.permissions].sort():[];return a.id===n.id&&a.email===n.email&&a.role===n.role&&a.name===n.name&&JSON.stringify(i)===JSON.stringify(l)}setAuthState(s){const r={...this.authState,...s};this.areStatesEqual(this.authState,r)||(this.authState=r,this.notifyListeners())}getAuthState(){return{...this.authState}}async login(s){try{this.setAuthState({isLoading:!0,error:null});const r=dc(),a=await fetch(`${r}/staff/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(a.ok){const n=await a.json(),{user:i,token:l}=n,o=this.normalizeUser(i);return localStorage.setItem("auth_token",l),localStorage.setItem("user",JSON.stringify(o)),this.setAuthState({user:o,isAuthenticated:!0,isLoading:!1,error:null}),!0}else{const n=await a.json().catch(()=>({}));return this.setAuthState({isLoading:!1,error:n.error||n.message||"Login failed. Please check your credentials."}),!1}}catch{return this.setAuthState({isLoading:!1,error:"Login failed. Please check your credentials."}),!1}}async logout(){try{const s=this.getToken(),r=dc();s&&await fetch(`${r}/staff/auth/logout`,{method:"POST",headers:{Authorization:`Bearer ${s}`}}).catch(()=>{}),localStorage.removeItem("auth_token"),localStorage.removeItem("user"),this.setAuthState({user:null,isAuthenticated:!1,isLoading:!1,error:null})}catch(s){console.error("Logout error:",s)}}async checkAuth(){try{this.setAuthState({isLoading:!0});const s=this.getToken(),r=localStorage.getItem("user");if(!s||!r)return this.setAuthState({user:null,isAuthenticated:!1,isLoading:!1,error:null}),!1;const a=JSON.parse(r),n=dc(),i=await fetch(`${n}/staff/auth/me`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(i.ok){const l=await i.json(),o=this.normalizeUser(l.user||a);return localStorage.setItem("user",JSON.stringify(o)),this.setAuthState({user:o,isAuthenticated:!0,isLoading:!1,error:null}),!0}else return localStorage.removeItem("auth_token"),localStorage.removeItem("user"),this.setAuthState({user:null,isAuthenticated:!1,isLoading:!1,error:null}),!1}catch(s){return console.error("Auth check error:",s),localStorage.removeItem("auth_token"),localStorage.removeItem("user"),this.setAuthState({user:null,isAuthenticated:!1,isLoading:!1,error:"Authentication check failed"}),!1}}getCurrentUser(){return this.authState.user}hasPermission(s){const r=this.authState.user;return r?(Array.isArray(r.permissions)?r.permissions:typeof r.permissions=="string"?r.permissions.split(",").map(n=>n.trim()).filter(Boolean):[]).includes(s):!1}hasRole(s){return this.authState.user?this.authState.user.role===s:!1}async updateProfile(s){try{if(!this.authState.user)return!1;const r={...this.authState.user,...s};return localStorage.setItem("user",JSON.stringify(r)),this.setAuthState({user:r}),!0}catch(r){return console.error("Profile update error:",r),!1}}async changePassword(s,r,a){try{const n=this.getToken();if(!n)throw new Error("Not authenticated");const i=dc(),l=await fetch(`${i}/staff/auth/change-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({currentPassword:s,newPassword:r,confirmNewPassword:a})});if(l.ok)return!0;const o=await l.json().catch(()=>({}));throw new Error(o.error||o.message||"Failed to update password")}catch(n){throw console.error("Password change error:",n),n}}}const Za=new Vk,Nb=b.createContext(void 0);function Hk({children:t}){var x,h,m,j,v;const[s,r]=b.useState(Za.getAuthState());b.useEffect(()=>{const N=Za.subscribe(r);return Za.checkAuth(),N},[]);const a=b.useCallback(async(N,S)=>await Za.login({email:N,password:S}),[]),n=b.useCallback(async()=>{await Za.logout()},[]),i=b.useCallback(N=>Za.hasPermission(N),[]),l=b.useCallback(N=>Za.hasRole(N),[]),o=(x=s.user)==null?void 0:x.id,c=(h=s.user)==null?void 0:h.email,d=(m=s.user)==null?void 0:m.role,u=(j=s.user)==null?void 0:j.name,p=(v=s.user)==null?void 0:v.permissions,f=b.useMemo(()=>{if(!s.user)return null;const N=(p==null?void 0:p.slice().sort().join(","))||"";return`${o}-${c}-${d}-${u}-${N}`},[o,c,d,u,p]),g=b.useMemo(()=>{var N;return{isAuthenticated:s.isAuthenticated,user:s.user,role:((N=s.user)==null?void 0:N.role)||"viewer",isLoading:s.isLoading,error:s.error,login:a,logout:n,hasPermission:i,hasRole:l}},[s.isAuthenticated,s.isLoading,s.error,f,a,n,i,l]);return e.jsx(Nb.Provider,{value:g,children:t})}function Bo(){const t=b.useContext(Nb);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function Gk({allow:t}){const{isAuthenticated:s,role:r,isLoading:a}=Bo();return a?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s?t&&!t.includes(r)?e.jsx(jo,{to:"/admin/dashboard",replace:!0},"redirect-to-home"):e.jsx(wb,{}):e.jsx(jo,{to:"/admin/login",replace:!0},"redirect-to-login")}function ms({permission:t,anyOf:s,role:r,children:a,fallback:n=null}){const{hasPermission:i,hasRole:l}=Bo();let o=!0;return r&&(o=o&&l(r)),t&&(o=o&&i(t)),Array.isArray(s)&&s.length>0&&(o=o&&s.some(c=>i(c))),o?e.jsx(e.Fragment,{children:a}):e.jsx(e.Fragment,{children:n})}/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Jk=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,r,a)=>a?a.toUpperCase():r.toLowerCase()),Cf=t=>{const s=Jk(t);return s.charAt(0).toUpperCase()+s.slice(1)},kb=(...t)=>t.filter((s,r,a)=>!!s&&s.trim()!==""&&a.indexOf(s)===r).join(" ").trim(),Kk=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=b.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:l,...o},c)=>b.createElement("svg",{ref:c,...Yk,width:s,height:s,stroke:t,strokeWidth:a?Number(r)*24/Number(s):r,className:kb("lucide",n),...!i&&!Kk(o)&&{"aria-hidden":"true"},...o},[...l.map(([d,u])=>b.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(t,s)=>{const r=b.forwardRef(({className:a,...n},i)=>b.createElement(Xk,{ref:i,iconNode:s,className:kb(`lucide-${qk(Cf(t))}`,`lucide-${t}`,a),...n}));return r.displayName=Cf(t),r};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],On=Se("activity",Qk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],e2=Se("arrow-left",Zk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],s2=Se("arrow-right",t2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],_f=Se("award",r2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Tf=Se("ban",a2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ra=Se("bell",n2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Ef=Se("bot",i2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],o2=Se("brain",l2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Sb=Se("building-2",c2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Mr=Se("calendar",d2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ss=Se("chart-column",u2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],md=Se("check",x2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],dm=Se("chevron-down",m2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],um=Se("chevron-up",h2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],No=Se("circle-alert",f2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],g2=Se("circle-check",p2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Vt=Se("circle-check-big",y2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ts=Se("circle-x",b2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],cs=Se("clock",v2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Af=Se("code",j2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Zi=Se("copy",w2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],ni=Se("credit-card",N2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]],zu=Se("crop",k2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],C2=Se("database",S2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ko=Se("dollar-sign",_2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],wa=Se("download",T2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],A2=Se("external-link",E2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Wu=Se("eye-off",F2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ot=Se("eye",P2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],Cb=Se("facebook",D2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],gs=Se("file-text",R2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],O2=Se("flag",L2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ll=Se("funnel",I2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],C0=Se("gift",M2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Jn=Se("globe",B2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],U2=Se("grip-vertical",$2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],W2=Se("hash",z2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Ui=Se("heart",V2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Kn=Se("image",H2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],q2=Se("info",G2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],_b=Se("instagram",J2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Vu=Se("key",K2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],X2=Se("loader-circle",Y2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ss=Se("mail",Q2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],xm=Se("map-pin",Z2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],vn=Se("message-circle",e4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],fs=Se("message-square",t4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],r4=Se("mic",s4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],n4=Se("monitor",a4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],l4=Se("mouse-pointer-click",i4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Hu=Se("mouse-pointer",o4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],fa=Se("package",c4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Gu=Se("palette",d4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],x4=Se("paperclip",u4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Sn=Se("pause",m4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],qu=Se("pen",h4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],p4=Se("percent",f4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],pa=Se("phone",g4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Ua=Se("play",y4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],rs=Se("plus",b4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],j4=Se("receipt",v4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],vr=Se("refresh-cw",w4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Tb=Se("rotate-ccw",N4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ms=Se("save",k4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],bs=Se("search",S4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ra=Se("send",C4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ws=Se("settings",_4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Eb=Se("shield",T4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],A4=Se("shopping-bag",E4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Xs=Se("shopping-cart",F4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],mm=Se("smartphone",P4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Ab=Se("smile",D4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],El=Se("sparkles",R4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Fb=Se("square-check-big",L4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],mr=Se("square-pen",O4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],M4=Se("square-x",I4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],xr=Se("star",B4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Pb=Se("tag",$4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ds=Se("target",U4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Mt=Se("trash-2",z4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],zt=Se("trending-up",W4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],_0=Se("type",V4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Bn=Se("upload",H4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Pt=Se("users",G4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ga=Se("user",q4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],K4=Se("video",J4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Db=Se("wallet",Y4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Q4=Se("wifi-off",X4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],e3=Se("wifi",Z4);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],s3=Se("workflow",t3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Zt=Se("x",r3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],Rb=Se("youtube",a3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Vl=Se("zap",n3),i3=()=>{if(typeof window<"u"){const t=window.location.hostname;return t==="thenefol.com"||t==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}/api`:"https://thenefol.com/api"}return"https://thenefol.com/api"},l3=()=>i3();class o3{constructor(){Ca(this,"baseURL");this.baseURL=l3()}async request(s,r={}){let a=s;this.baseURL.endsWith("/api")&&s.startsWith("/api")&&(s.startsWith("/api/")?a=s.substring(5):s==="/api"?a="/":a=s.substring(4)),a.startsWith("/")||(a="/"+a);const i=`${this.baseURL}${a}`,l=localStorage.getItem("auth_token");let o="admin",c="orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update";try{const u=localStorage.getItem("user");if(u){const p=JSON.parse(u);p!=null&&p.role&&(o=p.role),Array.isArray(p==null?void 0:p.permissions)&&p.permissions.length>0&&(c=p.permissions.join(","))}}catch{}const d={headers:{"Content-Type":"application/json",...l&&{Authorization:`Bearer ${l}`},"x-user-role":o,"x-user-permissions":c,...r.headers},...r};try{const u=await fetch(i,d);if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);return await u.json()}catch(u){throw console.error(`API request failed for ${s}:`,u),u}}async getLoyaltyPrograms(){return this.request("/api/loyalty-program")}async createLoyaltyProgram(s){return this.request("/api/loyalty-program",{method:"POST",body:JSON.stringify(s)})}async updateLoyaltyProgram(s,r){return this.request(`/api/loyalty-program/${s}`,{method:"PUT",body:JSON.stringify(r)})}async getAffiliatePrograms(){return this.request("/api/affiliate-program")}async createAffiliateProgram(s){return this.request("/api/affiliate-program",{method:"POST",body:JSON.stringify(s)})}async getCashbackSystems(){return this.request("/api/cashback-system")}async createCashbackSystem(s){return this.request("/api/cashback-system",{method:"POST",body:JSON.stringify(s)})}async getCashbackWallet(){return this.request("/api/cashback/wallet")}async getCashbackOffers(){return this.request("/api/cashback/offers")}async getCashbackTransactions(){return this.request("/api/cashback/transactions")}async redeemCashback(s){return this.request("/api/cashback/redeem",{method:"POST",body:JSON.stringify(s)})}async getEmailCampaigns(){return this.request("/api/email-marketing/campaigns")}async createEmailCampaign(s){return this.request("/api/email-marketing/campaigns",{method:"POST",body:JSON.stringify(s)})}async updateEmailCampaign(s,r){return this.request(`/api/email-marketing/campaigns/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteEmailCampaign(s){return this.request(`/api/email-marketing/campaigns/${s}`,{method:"DELETE"})}async getEmailTemplates(){return this.request("/api/email-marketing/templates")}async createEmailTemplate(s){return this.request("/api/email-marketing/templates",{method:"POST",body:JSON.stringify(s)})}async updateEmailTemplate(s,r){return this.request(`/api/email-marketing/templates/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteEmailTemplate(s){return this.request(`/api/email-marketing/templates/${s}`,{method:"DELETE"})}async sendEmailCampaign(s){return this.request("/api/email-marketing/campaigns/send",{method:"POST",body:JSON.stringify(s)})}async getEmailLists(){return this.request("/api/email-marketing/lists")}async createEmailList(s){return this.request("/api/email-marketing/lists",{method:"POST",body:JSON.stringify(s)})}async addEmailSubscribers(s){return this.request("/api/email-marketing/lists/subscribers",{method:"POST",body:JSON.stringify(s)})}async getEmailSendingLogs(s){const r=s?`?campaign_id=${s}`:"";return this.request(`/api/email-marketing/logs${r}`)}async getEmailAutomations(){return this.request("/api/email-marketing/automations")}async createEmailAutomation(s){return this.request("/api/email-marketing/automations",{method:"POST",body:JSON.stringify(s)})}async updateEmailAutomation(s,r){return this.request(`/api/email-marketing/automations/${s}`,{method:"PUT",body:JSON.stringify(r)})}async getSMSCampaigns(){return this.request("/api/sms-marketing/campaigns")}async createSMSCampaign(s){return this.request("/api/sms-marketing/campaigns",{method:"POST",body:JSON.stringify(s)})}async updateSMSCampaign(s,r){return this.request(`/api/sms-marketing/campaigns/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteSMSCampaign(s){return this.request(`/api/sms-marketing/campaigns/${s}`,{method:"DELETE"})}async getSMSTemplates(){return this.request("/api/sms-marketing/templates")}async getSMSAutomations(){return this.request("/api/sms-marketing/automations")}async createSMSAutomation(s){return this.request("/api/sms-marketing/automations",{method:"POST",body:JSON.stringify(s)})}async updateSMSAutomation(s,r){return this.request(`/api/sms-marketing/automations/${s}`,{method:"PUT",body:JSON.stringify(r)})}async getPushNotifications(){return this.request("/api/push-notifications")}async createPushNotification(s){return this.request("/api/push-notifications",{method:"POST",body:JSON.stringify(s)})}async getPushTemplates(){return this.request("/api/push-notifications/templates")}async getPushAutomations(){return this.request("/api/push-notifications/automations")}async getWhatsAppChats(){return this.request("/api/whatsapp-chat/sessions")}async getWhatsAppTemplates(){return this.request("/api/whatsapp-chat/templates")}async getWhatsAppAutomations(){return this.request("/api/whatsapp-chat/automations")}async getLiveChatSessions(){return this.request("/api/live-chat/sessions")}async getLiveChatAgents(){return this.request("/api/live-chat/agents")}async getLiveChatWidgets(){return this.request("/api/live-chat/widgets")}async getLiveChatMessages(s){const r=new URLSearchParams({sessionId:String(s)}).toString();return this.request(`/api/live-chat/messages?${r}`)}async sendLiveChatMessage(s){return this.request("/api/live-chat/messages",{method:"POST",body:JSON.stringify(s)})}async getAnalyticsData(){return this.request("/api/advanced-analytics")}async getForms(){return this.request("/api/form-builder")}async createForm(s){return this.request("/api/form-builder",{method:"POST",body:JSON.stringify(s)})}async getCustomerJourneys(s,r){const a=new URLSearchParams;s&&a.append("timeRange",s),r&&a.append("eventFilter",r);const n=a.toString();return this.request(`/api/journey-tracking${n?`?${n}`:""}`)}async getActionableInsights(){return this.request("/api/actionable_insights")}async getAIFeatures(){return this.request("/api/ai/features")}async getAITasks(){return this.request("/api/ai/tasks")}async getJourneyFunnels(){return this.request("/api/journey_funnels")}async getPersonalizationRules(){return this.request("/api/personalization_rules")}async getCustomerSegments(){return this.request("/api/customer_segments")}async createCustomerSegment(s){return this.request("/api/customer_segments",{method:"POST",body:JSON.stringify(s)})}async getCustomerSegmentAggregates(){return this.request("/api/customer_segments/aggregate")}async updateCustomerSegment(s,r){return this.request(`/api/customer_segments/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteCustomerSegment(s){return this.request(`/api/customer_segments/${s}`,{method:"DELETE"})}async getCustomAudiences(){return this.request("/api/custom_audiences")}async createCustomAudience(s){return this.request("/api/custom_audiences",{method:"POST",body:JSON.stringify(s)})}async getWorkflows(){return this.request("/api/workflows")}async createWorkflow(s){return this.request("/api/workflows",{method:"POST",body:JSON.stringify(s)})}async updateWorkflow(s,r){return this.request(`/api/workflows/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteWorkflow(s){return this.request(`/api/workflows/${s}`,{method:"DELETE"})}async getOmniChannelCampaigns(){return this.request("/api/omni_channel_campaigns")}async getAPIConfigurations(){return this.request("/api/api-manager")}async getAPIConfiguration(s){return this.request(`/api/api-manager/${s}`)}async createAPIConfiguration(s){return this.request("/api/api-manager",{method:"POST",body:JSON.stringify(s)})}async updateAPIConfiguration(s,r){return this.request(`/api/api-manager/${s}`,{method:"PUT",body:JSON.stringify(r)})}async patchAPIConfiguration(s,r){return this.request(`/api/api-manager/${s}`,{method:"PATCH",body:JSON.stringify(r)})}async deleteAPIConfiguration(s){return this.request(`/api/api-manager/${s}`,{method:"DELETE"})}async testAPIConfiguration(s,r="connection"){return this.request(`/api/api-manager/${s}/test`,{method:"POST",body:JSON.stringify({testType:r})})}async getProducts(){return this.request("/api/products")}async createProduct(s){return this.request("/api/products",{method:"POST",body:JSON.stringify(s)})}async getCustomers(){return this.request("/api/customers")}async getUsers(){return this.request("/api/users")}async getAnalytics(){return this.request("/api/analytics")}async getPaymentGateways(){return this.request("/api/payment-gateways")}async createPaymentGateway(s){return this.request("/api/payment-gateways",{method:"POST",body:JSON.stringify(s)})}async updatePaymentGateway(s,r){return this.request(`/api/payment-gateways/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deletePaymentGateway(s){return this.request(`/api/payment-gateways/${s}`,{method:"DELETE"})}async getOrderDelivery(s){return this.request(`/api/order-delivery/${s}`)}async updateOrderDelivery(s){return this.request("/api/order-delivery",{method:"POST",body:JSON.stringify(s)})}async getProductReviews(s){return this.request(`/api/product-reviews/${s}`)}async createProductReview(s){return this.request("/api/product-reviews",{method:"POST",body:JSON.stringify(s)})}async updateProductReview(s,r){return this.request(`/api/product-reviews/${s}`,{method:"PUT",body:JSON.stringify(r)})}async getShiprocketConfig(){return this.request("/api/shiprocket/config")}async updateShiprocketConfig(s){return this.request("/api/shiprocket/config",{method:"POST",body:JSON.stringify(s)})}async createShiprocketShipment(s){return this.request(`/api/shiprocket/orders/${s}/shipment`,{method:"POST"})}async createShiprocketAwb(s){return this.request(`/api/shiprocket/orders/${s}/awb`,{method:"POST"})}async getShiprocketTracking(s){return this.request(`/api/shiprocket/orders/${s}/track`)}async checkShiprocketServiceability(s){const r=new URLSearchParams({pickup_postcode:s.pickup_postcode,delivery_postcode:s.delivery_postcode,cod:s.cod??"0",weight:s.weight??"0.5"}).toString();return this.request(`/api/shiprocket/serviceability?${r}`)}async getDiscounts(){return this.request("/api/discounts")}async createDiscount(s){return this.request("/api/discounts",{method:"POST",body:JSON.stringify(s)})}async getDiscountUsage(){return this.request("/api/discounts/usage")}async getOrders(){return this.request("/api/orders")}async createOrder(s){return this.request("/api/orders",{method:"POST",body:JSON.stringify(s)})}async updateOrder(s,r){return this.request(`/api/orders/${s}`,{method:"PUT",body:JSON.stringify(r)})}async getContactMessages(){return this.request("/api/contact/messages")}async updateContactMessageStatus(s,r){return this.request(`/api/contact/messages/${s}`,{method:"PUT",body:JSON.stringify({status:r})})}async getAdminNotifications(s="all",r=50){return this.request(`/api/admin/notifications?status=${s}&limit=${r}`)}async getAdminNotificationUnreadCount(){return this.request("/api/admin/notifications/unread-count")}async markNotificationAsRead(s){return this.request(`/api/admin/notifications/${s}/read`,{method:"PUT"})}async markAllNotificationsAsRead(){return this.request("/api/admin/notifications/read-all",{method:"PUT"})}async deleteNotification(s){return this.request(`/api/admin/notifications/${s}`,{method:"DELETE"})}}const et=new o3,ya=Object.create(null);ya.open="0";ya.close="1";ya.ping="2";ya.pong="3";ya.message="4";ya.upgrade="5";ya.noop="6";const Oc=Object.create(null);Object.keys(ya).forEach(t=>{Oc[ya[t]]=t});const Ju={type:"error",data:"parser error"},Lb=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ob=typeof ArrayBuffer=="function",Ib=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,hm=({type:t,data:s},r,a)=>Lb&&s instanceof Blob?r?a(s):Ff(s,a):Ob&&(s instanceof ArrayBuffer||Ib(s))?r?a(s):Ff(new Blob([s]),a):a(ya[t]+(s||"")),Ff=(t,s)=>{const r=new FileReader;return r.onload=function(){const a=r.result.split(",")[1];s("b"+(a||""))},r.readAsDataURL(t)};function Pf(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let T0;function c3(t,s){if(Lb&&t.data instanceof Blob)return t.data.arrayBuffer().then(Pf).then(s);if(Ob&&(t.data instanceof ArrayBuffer||Ib(t.data)))return s(Pf(t.data));hm(t,!1,r=>{T0||(T0=new TextEncoder),s(T0.encode(r))})}const Df="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Al=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Df.length;t++)Al[Df.charCodeAt(t)]=t;const d3=t=>{let s=t.length*.75,r=t.length,a,n=0,i,l,o,c;t[t.length-1]==="="&&(s--,t[t.length-2]==="="&&s--);const d=new ArrayBuffer(s),u=new Uint8Array(d);for(a=0;a<r;a+=4)i=Al[t.charCodeAt(a)],l=Al[t.charCodeAt(a+1)],o=Al[t.charCodeAt(a+2)],c=Al[t.charCodeAt(a+3)],u[n++]=i<<2|l>>4,u[n++]=(l&15)<<4|o>>2,u[n++]=(o&3)<<6|c&63;return d},u3=typeof ArrayBuffer=="function",fm=(t,s)=>{if(typeof t!="string")return{type:"message",data:Mb(t,s)};const r=t.charAt(0);return r==="b"?{type:"message",data:x3(t.substring(1),s)}:Oc[r]?t.length>1?{type:Oc[r],data:t.substring(1)}:{type:Oc[r]}:Ju},x3=(t,s)=>{if(u3){const r=d3(t);return Mb(r,s)}else return{base64:!0,data:t}},Mb=(t,s)=>{switch(s){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Bb="",m3=(t,s)=>{const r=t.length,a=new Array(r);let n=0;t.forEach((i,l)=>{hm(i,!1,o=>{a[l]=o,++n===r&&s(a.join(Bb))})})},h3=(t,s)=>{const r=t.split(Bb),a=[];for(let n=0;n<r.length;n++){const i=fm(r[n],s);if(a.push(i),i.type==="error")break}return a};function f3(){return new TransformStream({transform(t,s){c3(t,r=>{const a=r.length;let n;if(a<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,a);else if(a<65536){n=new Uint8Array(3);const i=new DataView(n.buffer);i.setUint8(0,126),i.setUint16(1,a)}else{n=new Uint8Array(9);const i=new DataView(n.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(a))}t.data&&typeof t.data!="string"&&(n[0]|=128),s.enqueue(n),s.enqueue(r)})}})}let E0;function uc(t){return t.reduce((s,r)=>s+r.length,0)}function xc(t,s){if(t[0].length===s)return t.shift();const r=new Uint8Array(s);let a=0;for(let n=0;n<s;n++)r[n]=t[0][a++],a===t[0].length&&(t.shift(),a=0);return t.length&&a<t[0].length&&(t[0]=t[0].slice(a)),r}function p3(t,s){E0||(E0=new TextDecoder);const r=[];let a=0,n=-1,i=!1;return new TransformStream({transform(l,o){for(r.push(l);;){if(a===0){if(uc(r)<1)break;const c=xc(r,1);i=(c[0]&128)===128,n=c[0]&127,n<126?a=3:n===126?a=1:a=2}else if(a===1){if(uc(r)<2)break;const c=xc(r,2);n=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),a=3}else if(a===2){if(uc(r)<8)break;const c=xc(r,8),d=new DataView(c.buffer,c.byteOffset,c.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){o.enqueue(Ju);break}n=u*Math.pow(2,32)+d.getUint32(4),a=3}else{if(uc(r)<n)break;const c=xc(r,n);o.enqueue(fm(i?c:E0.decode(c),s)),a=0}if(n===0||n>t){o.enqueue(Ju);break}}}})}const $b=4;function os(t){if(t)return g3(t)}function g3(t){for(var s in os.prototype)t[s]=os.prototype[s];return t}os.prototype.on=os.prototype.addEventListener=function(t,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(s),this};os.prototype.once=function(t,s){function r(){this.off(t,r),s.apply(this,arguments)}return r.fn=s,this.on(t,r),this};os.prototype.off=os.prototype.removeListener=os.prototype.removeAllListeners=os.prototype.removeEventListener=function(t,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var a,n=0;n<r.length;n++)if(a=r[n],a===s||a.fn===s){r.splice(n,1);break}return r.length===0&&delete this._callbacks["$"+t],this};os.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),r=this._callbacks["$"+t],a=1;a<arguments.length;a++)s[a-1]=arguments[a];if(r){r=r.slice(0);for(var a=0,n=r.length;a<n;++a)r[a].apply(this,s)}return this};os.prototype.emitReserved=os.prototype.emit;os.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};os.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Hd=typeof Promise=="function"&&typeof Promise.resolve=="function"?s=>Promise.resolve().then(s):(s,r)=>r(s,0),Pr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),y3="arraybuffer";function Ub(t,...s){return s.reduce((r,a)=>(t.hasOwnProperty(a)&&(r[a]=t[a]),r),{})}const b3=Pr.setTimeout,v3=Pr.clearTimeout;function Gd(t,s){s.useNativeTimers?(t.setTimeoutFn=b3.bind(Pr),t.clearTimeoutFn=v3.bind(Pr)):(t.setTimeoutFn=Pr.setTimeout.bind(Pr),t.clearTimeoutFn=Pr.clearTimeout.bind(Pr))}const j3=1.33;function w3(t){return typeof t=="string"?N3(t):Math.ceil((t.byteLength||t.size)*j3)}function N3(t){let s=0,r=0;for(let a=0,n=t.length;a<n;a++)s=t.charCodeAt(a),s<128?r+=1:s<2048?r+=2:s<55296||s>=57344?r+=3:(a++,r+=4);return r}function zb(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function k3(t){let s="";for(let r in t)t.hasOwnProperty(r)&&(s.length&&(s+="&"),s+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return s}function S3(t){let s={},r=t.split("&");for(let a=0,n=r.length;a<n;a++){let i=r[a].split("=");s[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return s}class C3 extends Error{constructor(s,r,a){super(s),this.description=r,this.context=a,this.type="TransportError"}}class pm extends os{constructor(s){super(),this.writable=!1,Gd(this,s),this.opts=s,this.query=s.query,this.socket=s.socket,this.supportsBinary=!s.forceBase64}onError(s,r,a){return super.emitReserved("error",new C3(s,r,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(s){this.readyState==="open"&&this.write(s)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(s){const r=fm(s,this.socket.binaryType);this.onPacket(r)}onPacket(s){super.emitReserved("packet",s)}onClose(s){this.readyState="closed",super.emitReserved("close",s)}pause(s){}createUri(s,r={}){return s+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const s=this.opts.hostname;return s.indexOf(":")===-1?s:"["+s+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(s){const r=k3(s);return r.length?"?"+r:""}}class _3 extends pm{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(s){this.readyState="pausing";const r=()=>{this.readyState="paused",s()};if(this._polling||!this.writable){let a=0;this._polling&&(a++,this.once("pollComplete",function(){--a||r()})),this.writable||(a++,this.once("drain",function(){--a||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(s){const r=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};h3(s,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const s=()=>{this.write([{type:"close"}])};this.readyState==="open"?s():this.once("open",s)}write(s){this.writable=!1,m3(s,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const s=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=zb()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(s,r)}}let Wb=!1;try{Wb=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const T3=Wb;function E3(){}class A3 extends _3{constructor(s){if(super(s),typeof location<"u"){const r=location.protocol==="https:";let a=location.port;a||(a=r?"443":"80"),this.xd=typeof location<"u"&&s.hostname!==location.hostname||a!==s.port}}doWrite(s,r){const a=this.request({method:"POST",data:s});a.on("success",r),a.on("error",(n,i)=>{this.onError("xhr post error",n,i)})}doPoll(){const s=this.request();s.on("data",this.onData.bind(this)),s.on("error",(r,a)=>{this.onError("xhr poll error",r,a)}),this.pollXhr=s}}let zi=class Ic extends os{constructor(s,r,a){super(),this.createRequest=s,Gd(this,a),this._opts=a,this._method=a.method||"GET",this._uri=r,this._data=a.data!==void 0?a.data:null,this._create()}_create(){var s;const r=Ub(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const a=this._xhr=this.createRequest(r);try{a.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){a.setDisableHeaderCheck&&a.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&a.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{a.setRequestHeader("Accept","*/*")}catch{}(s=this._opts.cookieJar)===null||s===void 0||s.addCookies(a),"withCredentials"in a&&(a.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(a.timeout=this._opts.requestTimeout),a.onreadystatechange=()=>{var n;a.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(a.getResponseHeader("set-cookie"))),a.readyState===4&&(a.status===200||a.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof a.status=="number"?a.status:0)},0))},a.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=Ic.requestsCount++,Ic.requests[this._index]=this)}_onError(s){this.emitReserved("error",s,this._xhr),this._cleanup(!0)}_cleanup(s){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=E3,s)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ic.requests[this._index],this._xhr=null}}_onLoad(){const s=this._xhr.responseText;s!==null&&(this.emitReserved("data",s),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};zi.requestsCount=0;zi.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Rf);else if(typeof addEventListener=="function"){const t="onpagehide"in Pr?"pagehide":"unload";addEventListener(t,Rf,!1)}}function Rf(){for(let t in zi.requests)zi.requests.hasOwnProperty(t)&&zi.requests[t].abort()}const F3=function(){const t=Vb({xdomain:!1});return t&&t.responseType!==null}();class P3 extends A3{constructor(s){super(s);const r=s&&s.forceBase64;this.supportsBinary=F3&&!r}request(s={}){return Object.assign(s,{xd:this.xd},this.opts),new zi(Vb,this.uri(),s)}}function Vb(t){const s=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!s||T3))return new XMLHttpRequest}catch{}if(!s)try{return new Pr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Hb=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class D3 extends pm{get name(){return"websocket"}doOpen(){const s=this.uri(),r=this.opts.protocols,a=Hb?{}:Ub(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(s,r,a)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=s=>this.onClose({description:"websocket connection closed",context:s}),this.ws.onmessage=s=>this.onData(s.data),this.ws.onerror=s=>this.onError("websocket error",s)}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const a=s[r],n=r===s.length-1;hm(a,this.supportsBinary,i=>{try{this.doWrite(a,i)}catch{}n&&Hd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const s=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=zb()),this.supportsBinary||(r.b64=1),this.createUri(s,r)}}const A0=Pr.WebSocket||Pr.MozWebSocket;class R3 extends D3{createSocket(s,r,a){return Hb?new A0(s,r,a):r?new A0(s,r):new A0(s)}doWrite(s,r){this.ws.send(r)}}class L3 extends pm{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(s){return this.emitReserved("error",s)}this._transport.closed.then(()=>{this.onClose()}).catch(s=>{this.onError("webtransport error",s)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(s=>{const r=p3(Number.MAX_SAFE_INTEGER,this.socket.binaryType),a=s.readable.pipeThrough(r).getReader(),n=f3();n.readable.pipeTo(s.writable),this._writer=n.writable.getWriter();const i=()=>{a.read().then(({done:o,value:c})=>{o||(this.onPacket(c),i())}).catch(o=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const a=s[r],n=r===s.length-1;this._writer.write(a).then(()=>{n&&Hd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var s;(s=this._transport)===null||s===void 0||s.close()}}const O3={websocket:R3,webtransport:L3,polling:P3},I3=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,M3=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ku(t){if(t.length>8e3)throw"URI too long";const s=t,r=t.indexOf("["),a=t.indexOf("]");r!=-1&&a!=-1&&(t=t.substring(0,r)+t.substring(r,a).replace(/:/g,";")+t.substring(a,t.length));let n=I3.exec(t||""),i={},l=14;for(;l--;)i[M3[l]]=n[l]||"";return r!=-1&&a!=-1&&(i.source=s,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=B3(i,i.path),i.queryKey=$3(i,i.query),i}function B3(t,s){const r=/\/{2,9}/g,a=s.replace(r,"/").split("/");return(s.slice(0,1)=="/"||s.length===0)&&a.splice(0,1),s.slice(-1)=="/"&&a.splice(a.length-1,1),a}function $3(t,s){const r={};return s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,n,i){n&&(r[n]=i)}),r}const Yu=typeof addEventListener=="function"&&typeof removeEventListener=="function",Mc=[];Yu&&addEventListener("offline",()=>{Mc.forEach(t=>t())},!1);class jn extends os{constructor(s,r){if(super(),this.binaryType=y3,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,s&&typeof s=="object"&&(r=s,s=null),s){const a=Ku(s);r.hostname=a.host,r.secure=a.protocol==="https"||a.protocol==="wss",r.port=a.port,a.query&&(r.query=a.query)}else r.host&&(r.hostname=Ku(r.host).host);Gd(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(a=>{const n=a.prototype.name;this.transports.push(n),this._transportsByName[n]=a}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=S3(this.opts.query)),Yu&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Mc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(s){const r=Object.assign({},this.opts.query);r.EIO=$b,r.transport=s,this.id&&(r.sid=this.id);const a=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[s]);return new this._transportsByName[s](a)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const s=this.opts.rememberUpgrade&&jn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(s);r.open(),this.setTransport(r)}setTransport(s){this.transport&&this.transport.removeAllListeners(),this.transport=s,s.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",jn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",s),this.emitReserved("heartbeat"),s.type){case"open":this.onHandshake(JSON.parse(s.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=s.data,this._onError(r);break;case"message":this.emitReserved("data",s.data),this.emitReserved("message",s.data);break}}onHandshake(s){this.emitReserved("handshake",s),this.id=s.sid,this.transport.query.sid=s.sid,this._pingInterval=s.pingInterval,this._pingTimeout=s.pingTimeout,this._maxPayload=s.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const s=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+s,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},s),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const s=this._getWritablePackets();this.transport.send(s),this._prevBufferLen=s.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let a=0;a<this.writeBuffer.length;a++){const n=this.writeBuffer[a].data;if(n&&(r+=w3(n)),a>0&&r>this._maxPayload)return this.writeBuffer.slice(0,a);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const s=Date.now()>this._pingTimeoutTime;return s&&(this._pingTimeoutTime=0,Hd(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),s}write(s,r,a){return this._sendPacket("message",s,r,a),this}send(s,r,a){return this._sendPacket("message",s,r,a),this}_sendPacket(s,r,a,n){if(typeof r=="function"&&(n=r,r=void 0),typeof a=="function"&&(n=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const i={type:s,data:r,options:a};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const s=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),s()},a=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():s()}):this.upgrading?a():s()),this}_onError(s){if(jn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",s),this._onClose("transport error",s)}_onClose(s,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Yu&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const a=Mc.indexOf(this._offlineEventListener);a!==-1&&Mc.splice(a,1)}this.readyState="closed",this.id=null,this.emitReserved("close",s,r),this.writeBuffer=[],this._prevBufferLen=0}}}jn.protocol=$b;class U3 extends jn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let s=0;s<this._upgrades.length;s++)this._probe(this._upgrades[s])}_probe(s){let r=this.createTransport(s),a=!1;jn.priorWebsocketSuccess=!1;const n=()=>{a||(r.send([{type:"ping",data:"probe"}]),r.once("packet",p=>{if(!a)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;jn.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=r.name,this.emitReserved("upgradeError",f)}}))};function i(){a||(a=!0,u(),r.close(),r=null)}const l=p=>{const f=new Error("probe error: "+p);f.transport=r.name,i(),this.emitReserved("upgradeError",f)};function o(){l("transport closed")}function c(){l("socket closed")}function d(p){r&&p.name!==r.name&&i()}const u=()=>{r.removeListener("open",n),r.removeListener("error",l),r.removeListener("close",o),this.off("close",c),this.off("upgrading",d)};r.once("open",n),r.once("error",l),r.once("close",o),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&s!=="webtransport"?this.setTimeoutFn(()=>{a||r.open()},200):r.open()}onHandshake(s){this._upgrades=this._filterUpgrades(s.upgrades),super.onHandshake(s)}_filterUpgrades(s){const r=[];for(let a=0;a<s.length;a++)~this.transports.indexOf(s[a])&&r.push(s[a]);return r}}let z3=class extends U3{constructor(s,r={}){const a=typeof s=="object"?s:r;(!a.transports||a.transports&&typeof a.transports[0]=="string")&&(a.transports=(a.transports||["polling","websocket","webtransport"]).map(n=>O3[n]).filter(n=>!!n)),super(s,a)}};function W3(t,s="",r){let a=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),a=Ku(t)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const i=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+i+":"+a.port+s,a.href=a.protocol+"://"+i+(r&&r.port===a.port?"":":"+a.port),a}const V3=typeof ArrayBuffer=="function",H3=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Gb=Object.prototype.toString,G3=typeof Blob=="function"||typeof Blob<"u"&&Gb.call(Blob)==="[object BlobConstructor]",q3=typeof File=="function"||typeof File<"u"&&Gb.call(File)==="[object FileConstructor]";function gm(t){return V3&&(t instanceof ArrayBuffer||H3(t))||G3&&t instanceof Blob||q3&&t instanceof File}function Bc(t,s){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,a=t.length;r<a;r++)if(Bc(t[r]))return!0;return!1}if(gm(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Bc(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&Bc(t[r]))return!0;return!1}function J3(t){const s=[],r=t.data,a=t;return a.data=Xu(r,s),a.attachments=s.length,{packet:a,buffers:s}}function Xu(t,s){if(!t)return t;if(gm(t)){const r={_placeholder:!0,num:s.length};return s.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let a=0;a<t.length;a++)r[a]=Xu(t[a],s);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=Xu(t[a],s));return r}return t}function K3(t,s){return t.data=Qu(t.data,s),delete t.attachments,t}function Qu(t,s){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<s.length)return s[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=Qu(t[r],s);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=Qu(t[r],s));return t}const Y3=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],X3=5;var pt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(pt||(pt={}));class Q3{constructor(s){this.replacer=s}encode(s){return(s.type===pt.EVENT||s.type===pt.ACK)&&Bc(s)?this.encodeAsBinary({type:s.type===pt.EVENT?pt.BINARY_EVENT:pt.BINARY_ACK,nsp:s.nsp,data:s.data,id:s.id}):[this.encodeAsString(s)]}encodeAsString(s){let r=""+s.type;return(s.type===pt.BINARY_EVENT||s.type===pt.BINARY_ACK)&&(r+=s.attachments+"-"),s.nsp&&s.nsp!=="/"&&(r+=s.nsp+","),s.id!=null&&(r+=s.id),s.data!=null&&(r+=JSON.stringify(s.data,this.replacer)),r}encodeAsBinary(s){const r=J3(s),a=this.encodeAsString(r.packet),n=r.buffers;return n.unshift(a),n}}function Lf(t){return Object.prototype.toString.call(t)==="[object Object]"}class ym extends os{constructor(s){super(),this.reviver=s}add(s){let r;if(typeof s=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(s);const a=r.type===pt.BINARY_EVENT;a||r.type===pt.BINARY_ACK?(r.type=a?pt.EVENT:pt.ACK,this.reconstructor=new Z3(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(gm(s)||s.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(s),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+s)}decodeString(s){let r=0;const a={type:Number(s.charAt(0))};if(pt[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===pt.BINARY_EVENT||a.type===pt.BINARY_ACK){const i=r+1;for(;s.charAt(++r)!=="-"&&r!=s.length;);const l=s.substring(i,r);if(l!=Number(l)||s.charAt(r)!=="-")throw new Error("Illegal attachments");a.attachments=Number(l)}if(s.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(s.charAt(r)===","||r===s.length););a.nsp=s.substring(i,r)}else a.nsp="/";const n=s.charAt(r+1);if(n!==""&&Number(n)==n){const i=r+1;for(;++r;){const l=s.charAt(r);if(l==null||Number(l)!=l){--r;break}if(r===s.length)break}a.id=Number(s.substring(i,r+1))}if(s.charAt(++r)){const i=this.tryParse(s.substr(r));if(ym.isPayloadValid(a.type,i))a.data=i;else throw new Error("invalid payload")}return a}tryParse(s){try{return JSON.parse(s,this.reviver)}catch{return!1}}static isPayloadValid(s,r){switch(s){case pt.CONNECT:return Lf(r);case pt.DISCONNECT:return r===void 0;case pt.CONNECT_ERROR:return typeof r=="string"||Lf(r);case pt.EVENT:case pt.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&Y3.indexOf(r[0])===-1);case pt.ACK:case pt.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Z3{constructor(s){this.packet=s,this.buffers=[],this.reconPack=s}takeBinaryData(s){if(this.buffers.push(s),this.buffers.length===this.reconPack.attachments){const r=K3(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const eS=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ym,Encoder:Q3,get PacketType(){return pt},protocol:X3},Symbol.toStringTag,{value:"Module"}));function Yr(t,s,r){return t.on(s,r),function(){t.off(s,r)}}const tS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class qb extends os{constructor(s,r,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=s,this.nsp=r,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const s=this.io;this.subs=[Yr(s,"open",this.onopen.bind(this)),Yr(s,"packet",this.onpacket.bind(this)),Yr(s,"error",this.onerror.bind(this)),Yr(s,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...s){return s.unshift("message"),this.emit.apply(this,s),this}emit(s,...r){var a,n,i;if(tS.hasOwnProperty(s))throw new Error('"'+s.toString()+'" is a reserved event name');if(r.unshift(s),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const l={type:pt.EVENT,data:r};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const u=this.ids++,p=r.pop();this._registerAckCallback(u,p),l.id=u}const o=(n=(a=this.io.engine)===null||a===void 0?void 0:a.transport)===null||n===void 0?void 0:n.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(s,r){var a;const n=(a=this.flags.timeout)!==null&&a!==void 0?a:this._opts.ackTimeout;if(n===void 0){this.acks[s]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[s];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===s&&this.sendBuffer.splice(o,1);r.call(this,new Error("operation has timed out"))},n),l=(...o)=>{this.io.clearTimeoutFn(i),r.apply(this,o)};l.withError=!0,this.acks[s]=l}emitWithAck(s,...r){return new Promise((a,n)=>{const i=(l,o)=>l?n(l):a(o);i.withError=!0,r.push(i),this.emit(s,...r)})}_addToQueue(s){let r;typeof s[s.length-1]=="function"&&(r=s.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:s,flags:Object.assign({fromQueue:!0},this.flags)};s.push((n,...i)=>a!==this._queue[0]?void 0:(n!==null?a.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(n)):(this._queue.shift(),r&&r(null,...i)),a.pending=!1,this._drainQueue())),this._queue.push(a),this._drainQueue()}_drainQueue(s=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!s||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(s){s.nsp=this.nsp,this.io._packet(s)}onopen(){typeof this.auth=="function"?this.auth(s=>{this._sendConnectPacket(s)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(s){this.packet({type:pt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},s):s})}onerror(s){this.connected||this.emitReserved("connect_error",s)}onclose(s,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",s,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(s=>{if(!this.sendBuffer.some(a=>String(a.id)===s)){const a=this.acks[s];delete this.acks[s],a.withError&&a.call(this,new Error("socket has been disconnected"))}})}onpacket(s){if(s.nsp===this.nsp)switch(s.type){case pt.CONNECT:s.data&&s.data.sid?this.onconnect(s.data.sid,s.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case pt.EVENT:case pt.BINARY_EVENT:this.onevent(s);break;case pt.ACK:case pt.BINARY_ACK:this.onack(s);break;case pt.DISCONNECT:this.ondisconnect();break;case pt.CONNECT_ERROR:this.destroy();const a=new Error(s.data.message);a.data=s.data.data,this.emitReserved("connect_error",a);break}}onevent(s){const r=s.data||[];s.id!=null&&r.push(this.ack(s.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(s){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const a of r)a.apply(this,s)}super.emit.apply(this,s),this._pid&&s.length&&typeof s[s.length-1]=="string"&&(this._lastOffset=s[s.length-1])}ack(s){const r=this;let a=!1;return function(...n){a||(a=!0,r.packet({type:pt.ACK,id:s,data:n}))}}onack(s){const r=this.acks[s.id];typeof r=="function"&&(delete this.acks[s.id],r.withError&&s.data.unshift(null),r.apply(this,s.data))}onconnect(s,r){this.id=s,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(s=>this.emitEvent(s)),this.receiveBuffer=[],this.sendBuffer.forEach(s=>{this.notifyOutgoingListeners(s),this.packet(s)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(s=>s()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:pt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(s){return this.flags.compress=s,this}get volatile(){return this.flags.volatile=!0,this}timeout(s){return this.flags.timeout=s,this}onAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(s),this}prependAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(s),this}offAny(s){if(!this._anyListeners)return this;if(s){const r=this._anyListeners;for(let a=0;a<r.length;a++)if(s===r[a])return r.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(s),this}prependAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(s),this}offAnyOutgoing(s){if(!this._anyOutgoingListeners)return this;if(s){const r=this._anyOutgoingListeners;for(let a=0;a<r.length;a++)if(s===r[a])return r.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(s){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const a of r)a.apply(this,s.data)}}}function ol(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}ol.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var s=Math.random(),r=Math.floor(s*this.jitter*t);t=Math.floor(s*10)&1?t+r:t-r}return Math.min(t,this.max)|0};ol.prototype.reset=function(){this.attempts=0};ol.prototype.setMin=function(t){this.ms=t};ol.prototype.setMax=function(t){this.max=t};ol.prototype.setJitter=function(t){this.jitter=t};class Zu extends os{constructor(s,r){var a;super(),this.nsps={},this.subs=[],s&&typeof s=="object"&&(r=s,s=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Gd(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((a=r.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new ol({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=s;const n=r.parser||eS;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(s){return arguments.length?(this._reconnection=!!s,s||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(s){return s===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=s,this)}reconnectionDelay(s){var r;return s===void 0?this._reconnectionDelay:(this._reconnectionDelay=s,(r=this.backoff)===null||r===void 0||r.setMin(s),this)}randomizationFactor(s){var r;return s===void 0?this._randomizationFactor:(this._randomizationFactor=s,(r=this.backoff)===null||r===void 0||r.setJitter(s),this)}reconnectionDelayMax(s){var r;return s===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=s,(r=this.backoff)===null||r===void 0||r.setMax(s),this)}timeout(s){return arguments.length?(this._timeout=s,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(s){if(~this._readyState.indexOf("open"))return this;this.engine=new z3(this.uri,this.opts);const r=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const n=Yr(r,"open",function(){a.onopen(),s&&s()}),i=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),s?s(o):this.maybeReconnectOnOpen()},l=Yr(r,"error",i);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{n(),i(new Error("timeout")),r.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(n),this.subs.push(l),this}connect(s){return this.open(s)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const s=this.engine;this.subs.push(Yr(s,"ping",this.onping.bind(this)),Yr(s,"data",this.ondata.bind(this)),Yr(s,"error",this.onerror.bind(this)),Yr(s,"close",this.onclose.bind(this)),Yr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(s){try{this.decoder.add(s)}catch(r){this.onclose("parse error",r)}}ondecoded(s){Hd(()=>{this.emitReserved("packet",s)},this.setTimeoutFn)}onerror(s){this.emitReserved("error",s)}socket(s,r){let a=this.nsps[s];return a?this._autoConnect&&!a.active&&a.connect():(a=new qb(this,s,r),this.nsps[s]=a),a}_destroy(s){const r=Object.keys(this.nsps);for(const a of r)if(this.nsps[a].active)return;this._close()}_packet(s){const r=this.encoder.encode(s);for(let a=0;a<r.length;a++)this.engine.write(r[a],s.options)}cleanup(){this.subs.forEach(s=>s()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(s,r){var a;this.cleanup(),(a=this.engine)===null||a===void 0||a.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",s,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const s=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{s.skipReconnect||(this.emitReserved("reconnect_attempt",s.backoff.attempts),!s.skipReconnect&&s.open(n=>{n?(s._reconnecting=!1,s.reconnect(),this.emitReserved("reconnect_error",n)):s.onreconnect()}))},r);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}}onreconnect(){const s=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",s)}}const Nl={};function $c(t,s){typeof t=="object"&&(s=t,t=void 0),s=s||{};const r=W3(t,s.path||"/socket.io"),a=r.source,n=r.id,i=r.path,l=Nl[n]&&i in Nl[n].nsps,o=s.forceNew||s["force new connection"]||s.multiplex===!1||l;let c;return o?c=new Zu(a,s):(Nl[n]||(Nl[n]=new Zu(a,s)),c=Nl[n]),r.query&&!s.query&&(s.query=r.queryKey),c.socket(r.path,s)}Object.assign($c,{Manager:Zu,Socket:qb,io:$c,connect:$c});class sS{constructor(){Ca(this,"socket",null);Ca(this,"listeners",new Map);Ca(this,"isConnecting",!1)}connect(){var r;if((r=this.socket)!=null&&r.connected||this.isConnecting)return;this.isConnecting=!0;let s;if(typeof window<"u"){const a=window.location.hostname,n=window.location.protocol;a==="thenefol.com"||a==="www.thenefol.com"?(s=`https://${window.location.host}`,console.log(" [Socket] Production detected, using:",s)):n==="https:"?(s=`https://${window.location.host}`,console.log(" [Socket] HTTPS detected, using WSS:",s)):(s="https://thenefol.com",console.log(" [Socket] Non-production HTTP detected, using production WSS:",s))}else s="https://thenefol.com";this.socket&&!this.socket.connected&&(this.socket.removeAllListeners(),this.socket.disconnect(),this.socket=null),this.socket=$c(s,{transports:["websocket","polling"],timeout:2e4,forceNew:!1,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3,randomizationFactor:.5}),this.socket.on("connect",()=>{var a;console.log("Connected to server"),this.isConnecting=!1,(a=this.socket)==null||a.emit("join-admin")}),this.socket.on("disconnect",a=>{console.log("Disconnected from server:",a)}),this.socket.on("connect_error",a=>{console.error("Socket connection error:",a),this.isConnecting=!1}),this.socket.on("update",a=>{console.log("Received update:",a),this.notifyListeners("update",a),a.type&&this.notifyListeners(a.type,a.data||a)}),this.socket.on("live-chat:message",a=>{this.notifyListeners("live-chat:message",a)}),this.socket.on("live-chat:typing",a=>{this.notifyListeners("live-chat:typing",a)}),this.socket.on("error",a=>{console.error("Socket error:",a)})}disconnect(){if(this.socket){const s=this.socket.connected;this.socket.removeAllListeners(),this.socket.disconnect(),this.socket=null,this.isConnecting=!1,s&&console.log("Socket disconnected")}}subscribe(s,r){var a;return this.listeners.has(s)||this.listeners.set(s,[]),(a=this.listeners.get(s))==null||a.push(r),()=>{const n=this.listeners.get(s);if(n){const i=n.indexOf(r);i>-1&&n.splice(i,1)}}}notifyListeners(s,r){const a=this.listeners.get(s);a&&a.forEach(n=>n(r))}emit(s,r){var a;(a=this.socket)!=null&&a.connected&&this.socket.emit(s,r)}isConnected(){var s;return((s=this.socket)==null?void 0:s.connected)||!1}}const Ye=new sS;function rS(){const[t,s]=b.useState([]),[r,a]=b.useState(0),[n,i]=b.useState(!1),l=ja(),o=async()=>{try{const g=await et.getAdminNotifications("all",20);if(g.data){s(g.data);const x=g.data.filter(h=>h.status==="unread");a(x.length)}}catch(g){console.error("Error fetching notifications:",g)}},c=async()=>{try{const g=await et.getAdminNotificationUnreadCount();g.data&&a(g.data.count)}catch(g){console.error("Error fetching unread count:",g)}},d=async g=>{try{await et.markNotificationAsRead(g),s(x=>x.map(h=>h.id===g?{...h,status:"read"}:h)),c()}catch(x){console.error("Error marking notification as read:",x)}},u=async()=>{try{await et.markAllNotificationsAsRead(),s(g=>g.map(x=>({...x,status:"read"}))),a(0)}catch(g){console.error("Error marking all as read:",g)}},p=g=>{d(g.id),g.link&&l(g.link),i(!1)};b.useEffect(()=>{o(),c();const g=Ye.subscribe("new-notification",x=>{s(h=>[x,...h]),x.status==="unread"&&a(h=>h+1)});return()=>{g&&g()}},[]);const f=g=>{switch(g){case"urgent":return"border-l-4 border-red-500 bg-red-50";case"high":return"border-l-4 border-orange-500 bg-orange-50";case"medium":return"border-l-4 border-yellow-500 bg-yellow-50";default:return"border-l-4 border-blue-500 bg-blue-50"}};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>i(!n),className:"relative p-2 text-gray-600 hover:text-gray-900 focus:outline-none",children:[e.jsx(Ra,{className:"w-6 h-6"}),r>0&&e.jsx("span",{className:"absolute top-0 right-0 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:r>9?"9+":r})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl z-50 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ra,{className:"w-5 h-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),r>0&&e.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-600 text-xs font-semibold rounded-full",children:[r," new"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[r>0&&e.jsx("button",{onClick:u,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Mark all read"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Zt,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:t.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Ra,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No notifications"})]}):t.map(g=>e.jsx("button",{onClick:()=>p(g),className:`w-full text-left p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors ${f(g.priority)} ${g.status==="read"?"opacity-70":""}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[g.icon&&e.jsx("span",{className:"text-2xl flex-shrink-0",children:g.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm font-semibold ${g.status==="unread"?"text-gray-900":"text-gray-600"}`,children:g.title}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:g.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:new Date(g.created_at).toLocaleString()})]}),g.status==="unread"&&e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-1"})]})},g.id))}),t.length>0&&e.jsx("div",{className:"p-3 border-t border-gray-200",children:e.jsx("button",{onClick:()=>l("/admin/notifications"),className:"w-full py-2 text-sm text-center text-blue-600 hover:text-blue-700 font-medium",children:"View all notifications"})})]})]})]})}const aS=()=>{const t=ui(),s=ja(),[r,a]=b.useState(!0),[n,i]=b.useState(""),[l,o]=b.useState(!1),[c,d]=b.useState([]),[u,p]=b.useState(!1),f=b.useRef(null),{user:g,logout:x}=Bo(),h=g!=null&&g.name?g.name.split(" ").map(_=>_[0]).slice(0,2).join("").toUpperCase():"NA",m=async()=>{await x(),s("/admin/login",{replace:!0})},j=[{title:"Overview",icon:"",defaultOpen:!0,items:[{name:"Dashboard",href:"/admin/dashboard",icon:"",current:t.pathname==="/admin/dashboard"}]},{title:"Sales & Orders",icon:"",defaultOpen:!0,items:[{name:"Orders",href:"/admin/orders",icon:"",badge:"4",current:t.pathname==="/admin/orders"},{name:"Shipments",href:"/admin/shipments",icon:"",current:t.pathname==="/admin/shipments"},{name:"Returns",href:"/admin/returns",icon:"",current:t.pathname==="/admin/returns"}]},{title:"Catalog Management",icon:"",items:[{name:"Products",href:"/admin/products",icon:"",current:t.pathname==="/admin/products"},{name:"Categories",href:"/admin/categories",icon:"",current:t.pathname==="/admin/categories"},{name:"Inventory",href:"/admin/inventory",icon:"",badge:"NEW",current:t.pathname==="/admin/inventory"}]},{title:"Customers & CRM",icon:"",items:[{name:"Customers",href:"/admin/customers",icon:"",current:t.pathname==="/admin/customers"},{name:"Customer Segmentation",href:"/admin/customer-segmentation",icon:"",current:t.pathname==="/admin/customer-segmentation"},{name:"Journey Tracking",href:"/admin/journey-tracking",icon:"",current:t.pathname==="/admin/journey-tracking"},{name:"Journey Funnel",href:"/admin/journey-funnel",icon:"",current:t.pathname==="/admin/journey-funnel"}]},{title:"Customer Engagement",icon:"",items:[{name:"Live Chat",href:"/admin/live-chat",icon:"",current:t.pathname==="/admin/live-chat"},{name:"WhatsApp Chat",href:"/admin/whatsapp-chat",icon:"",current:t.pathname==="/admin/whatsapp-chat"},{name:"Contact Messages",href:"/admin/contact-messages",icon:"",current:t.pathname==="/admin/contact-messages"},{name:"Loyalty Program",href:"/admin/loyalty-program",icon:"",current:t.pathname==="/admin/loyalty-program"},{name:"Affiliate Program",href:"/admin/affiliate-program",icon:"",current:t.pathname==="/admin/affiliate-program"},{name:"Affiliate Requests",href:"/admin/affiliate-requests",icon:"",badge:"3",current:t.pathname==="/admin/affiliate-requests"},{name:"Cashback System",href:"/admin/cashback",icon:"",current:t.pathname==="/admin/cashback"}]},{title:"Marketing",icon:"",items:[{name:"Marketing",href:"/admin/marketing",icon:"",current:t.pathname==="/admin/marketing"},{name:"Meta Ads",href:"/admin/meta-ads",icon:"",badge:"NEW",current:t.pathname==="/admin/meta-ads"},{name:"WhatsApp Subscriptions",href:"/admin/whatsapp-subscriptions",icon:"",current:t.pathname==="/admin/whatsapp-subscriptions"},{name:"Discounts",href:"/admin/discounts",icon:"",current:t.pathname==="/admin/discounts"},{name:"Custom Audience",href:"/admin/custom-audience",icon:"",current:t.pathname==="/admin/custom-audience"},{name:"Omni Channel",href:"/admin/omni-channel",icon:"",current:t.pathname==="/admin/omni-channel"}]},{title:"AI Features",icon:"",items:[{name:"AI Box",href:"/admin/ai-box",icon:"",current:t.pathname==="/admin/ai-box"},{name:"AI Personalization",href:"/admin/ai-personalization",icon:"",current:t.pathname==="/admin/ai-personalization"}]},{title:"Analytics",icon:"",items:[{name:"Analytics",href:"/admin/analytics",icon:"",current:t.pathname==="/admin/analytics"},{name:"Actionable Analytics",href:"/admin/actionable-analytics",icon:"",current:t.pathname==="/admin/actionable-analytics"}]},{title:"Finance",icon:"",items:[{name:"Invoices",href:"/admin/invoices",icon:"",current:t.pathname==="/admin/invoices"},{name:"Tax",href:"/admin/tax",icon:"",current:t.pathname==="/admin/tax"},{name:"Payment Options",href:"/admin/payment-options",icon:"",current:t.pathname==="/admin/payment-options"},{name:"Coin Withdrawals",href:"/admin/coin-withdrawals",icon:"",current:t.pathname==="/admin/coin-withdrawals"}]},{title:"Content",icon:"",items:[{name:"CMS",href:"/admin/cms",icon:"",current:t.pathname==="/admin/cms"},{name:"Homepage Layout",href:"/admin/homepage-layout",icon:"",badge:"NEW",current:t.pathname==="/admin/homepage-layout"},{name:"Product Collections",href:"/admin/product-collections",icon:"",badge:"NEW",current:t.pathname==="/admin/product-collections"},{name:"Video Manager",href:"/admin/video-manager",icon:"",current:t.pathname==="/admin/video-manager"},{name:"Blog Requests",href:"/admin/blog-requests",icon:"",current:t.pathname==="/admin/blog-requests"}]},{title:"Notifications",icon:"",items:[{name:"WhatsApp Management",href:"/admin/whatsapp-management",icon:"",current:t.pathname==="/admin/whatsapp-management"},{name:"WhatsApp Notifications",href:"/admin/whatsapp-notifications",icon:"",current:t.pathname==="/admin/whatsapp-notifications"}]},{title:"Automation",icon:"",items:[{name:"Workflow Automation",href:"/admin/workflow-automation",icon:"",current:t.pathname==="/admin/workflow-automation"},{name:"Form Builder",href:"/admin/form-builder",icon:"",current:t.pathname==="/admin/form-builder"},{name:"Form Submissions",href:"/admin/form-submissions",icon:"",current:t.pathname==="/admin/form-submissions"}]},{title:"System",icon:"",items:[{name:"Users",href:"/admin/users",icon:"",current:t.pathname==="/admin/users"},{name:"API Manager",href:"/admin/api-manager",icon:"",current:t.pathname==="/admin/api-manager"},{name:"Alert Settings",href:"/admin/system/alerts",icon:"",current:t.pathname==="/admin/system/alerts"},{name:"Staff Accounts",href:"/admin/system/staff",icon:"",current:t.pathname==="/admin/system/staff"},{name:"Roles & Permissions",href:"/admin/system/roles",icon:"",current:t.pathname==="/admin/system/roles"},{name:"Audit Logs",href:"/admin/system/audit-logs",icon:"",current:t.pathname==="/admin/system/audit-logs"},{name:"Account Security",href:"/admin/account-security",icon:"",current:t.pathname==="/admin/account-security"}]},{title:"Sales Channels",icon:"",items:[{name:"Facebook & Instagram",href:"/admin/facebook",icon:"",current:t.pathname==="/admin/facebook"},{name:"FB Shop Integration",href:"/admin/fb-shop",icon:"",badge:"NEW",current:t.pathname==="/admin/fb-shop"},{name:"Online Store",href:"/admin/store",icon:"",current:t.pathname==="/admin/store"},{name:"Google & YouTube",href:"/admin/google",icon:"",current:t.pathname==="/admin/google"},{name:"Marketplaces",href:"/admin/marketplaces",icon:"",badge:"NEW",current:t.pathname==="/admin/marketplaces"}]},{title:"Operations",icon:"",items:[{name:"Warehouses",href:"/admin/warehouses",icon:"",badge:"NEW",current:t.pathname==="/admin/warehouses"},{name:"POS System",href:"/admin/pos",icon:"",badge:"NEW",current:t.pathname==="/admin/pos"}]}],v=j.flatMap(_=>_.items.map(y=>({...y,category:_.title,description:`${_.title} - ${y.name}`}))),N=j.flatMap(_=>_.items.map(y=>({...y,category:_.title}))).sort((_,y)=>_.name.localeCompare(y.name)),S={"/admin/orders":{permission:"orders:read"},"/admin/shipments":{permission:"shipping:read"},"/admin/returns":{permission:"returns:read"},"/admin/products":{permission:"products:read"},"/admin/categories":{permission:"products:read"},"/admin/inventory":{permission:"inventory:read"},"/admin/analytics":{permission:"analytics:read"},"/admin/marketing":{permission:"marketing:read"},"/admin/discounts":{permission:"discounts:read"},"/admin/users":{permission:"users:read"},"/admin/settings":{role:"admin"},"/admin/warehouses":{permission:"inventory:read"},"/admin/pos":{anyOf:["pos:read","pos:update"]},"/admin/marketplaces":{role:"admin"},"/admin/fb-shop":{role:"admin"},"/admin/payment-options":{permission:"payments:read"},"/admin/cms":{permission:"cms:read"},"/admin/blog-requests":{permission:"cms:read"},"/admin/video-manager":{permission:"cms:read"},"/admin/whatsapp-management":{permission:"notifications:read"},"/admin/whatsapp-notifications":{permission:"notifications:read"}},A=_=>{if(i(_),_.length<2){d([]),o(!1);return}const y=v.filter(w=>w.name.toLowerCase().includes(_.toLowerCase())||w.description.toLowerCase().includes(_.toLowerCase())||w.category.toLowerCase().includes(_.toLowerCase()));d(y),o(!0)},T=_=>{s(_.href),i(""),o(!1)},k=()=>{i(""),d([]),o(!1)};return b.useEffect(()=>{const _=w=>{w.target.closest(".search-container")||o(!1)},y=w=>{if((w.ctrlKey||w.metaKey)&&w.key==="k"){w.preventDefault();const R=document.querySelector(".search-input");R&&R.focus()}w.key==="Escape"&&(o(!1),i(""))};return document.addEventListener("mousedown",_),document.addEventListener("keydown",y),()=>{document.removeEventListener("mousedown",_),document.removeEventListener("keydown",y)}},[]),b.useEffect(()=>{const _=y=>{f.current&&!f.current.contains(y.target)&&p(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),e.jsxs("div",{className:"flex h-screen bg-[var(--brand-background)] text-[var(--text-primary)]",children:[r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>a(!1)}),e.jsx("div",{className:`sidebar w-72 h-screen fixed left-0 top-0 z-50 overflow-y-auto border-r border-[var(--brand-border)] ${r?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[var(--brand-border)]",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-brand-secondary rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"N"})}),e.jsx("span",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Nefol Admin"})]}),e.jsx("button",{onClick:()=>a(!r),className:"text-[var(--text-muted)] hover:text-[var(--text-primary)]",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("nav",{className:"flex-1 px-4 py-4 space-y-1 overflow-y-auto",children:e.jsx("div",{className:"space-y-1",children:N.map(_=>{const y=S[_.href]||{};return e.jsx(ms,{permission:y.permission,anyOf:y.anyOf,role:y.role,children:e.jsxs(bn,{to:_.href,className:`nav-item ${_.current?"active":""}`,children:[e.jsx("span",{className:"text-lg",children:_.icon}),e.jsx("span",{className:"font-medium",children:_.name}),_.badge&&e.jsx("span",{className:"badge ml-auto",children:_.badge})]})},_.name)})})}),e.jsx("div",{className:"p-4 border-t border-[var(--brand-border)]",children:e.jsxs(bn,{to:"/admin/settings",className:"nav-item",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsx("span",{className:"font-medium",children:"Settings"})]})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden ml-72 lg:ml-72 md:ml-0",children:[e.jsx("header",{className:"bg-[var(--brand-surface)] border-b border-[var(--brand-border)] px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>a(!r),className:"text-[var(--text-muted)] hover:text-[var(--text-primary)]",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsxs("div",{className:"search-container relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[var(--text-muted)] w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search admin options... (e.g., CMS, Blog, Products)",value:n,onChange:_=>A(_.target.value),className:"search-input w-96 pl-10 pr-20 py-2 border border-[var(--brand-border)] bg-[var(--brand-surface)] text-[var(--text-secondary)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--brand-accent)]"}),n&&e.jsx("button",{onClick:k,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-[var(--text-muted)] hover:text-[var(--text-secondary)]",children:e.jsx(Zt,{className:"w-5 h-5"})}),!n&&e.jsx("div",{className:"absolute right-3 top-2.5 text-xs text-[var(--text-muted)]",children:e.jsx("kbd",{className:"px-2 py-1 bg-[var(--brand-highlight)] rounded text-xs",children:"Ctrl+K"})})]}),l&&c.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-[var(--brand-surface)] border border-[var(--brand-border)] rounded-lg shadow-xl z-50 max-h-96 overflow-y-auto",children:c.map((_,y)=>e.jsxs("button",{onClick:()=>T(_),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-[var(--brand-highlight)] text-left border-b border-[var(--brand-border)] last:border-b-0",children:[e.jsx("span",{className:"text-lg",children:_.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-[var(--text-primary)] font-medium",children:_.name}),e.jsx("div",{className:"text-sm text-[var(--text-muted)] truncate",children:_.description}),e.jsx("div",{className:"text-xs text-[var(--brand-accent)]",children:_.category})]}),e.jsx(s2,{className:"w-4 h-4 text-[var(--text-muted)] flex-shrink-0"})]},y))}),l&&c.length===0&&n.length>=2&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-[var(--brand-surface)] border border-[var(--brand-border)] rounded-lg shadow-xl z-50 p-4",children:e.jsxs("div",{className:"text-[var(--text-muted)] text-center",children:[e.jsx(bs,{className:"w-8 h-8 mx-auto mb-2 opacity-50 text-[var(--text-muted)]"}),e.jsxs("p",{children:['No options found for "',n,'"']}),e.jsx("p",{className:"text-sm mt-1",children:"Try searching for:"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2 justify-center",children:["products","orders","analytics","marketing","customers","cms","blog"].map(_=>e.jsx("button",{onClick:()=>A(_),className:"px-2 py-1 bg-[var(--brand-highlight)] hover:bg-[var(--brand-accent-soft)] rounded text-xs text-[var(--text-secondary)]",children:_},_))})]})})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-[var(--text-muted)]",children:"2 live visitors"})]}),e.jsx(rS,{}),e.jsxs("div",{className:"relative",ref:f,children:[e.jsxs("button",{onClick:()=>p(_=>!_),className:"flex items-center space-x-2 px-3 py-1 rounded-lg hover:bg-[var(--brand-highlight)] focus:outline-none",children:[e.jsx("div",{className:"w-8 h-8 bg-brand-secondary rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:h})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-semibold text-[var(--text-primary)]",children:(g==null?void 0:g.name)||"Admin"}),e.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:(g==null?void 0:g.role)||"admin"})]})]}),u&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 rounded-lg shadow-lg z-50",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 dark:border-gray-800",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:g==null?void 0:g.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:g==null?void 0:g.email})]}),e.jsx("div",{className:"py-2",children:e.jsx(bn,{to:"/admin/account-security",className:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>p(!1),children:"Account Security"})}),e.jsx("div",{className:"border-t border-gray-100 dark:border-gray-800",children:e.jsx("button",{onClick:m,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-gray-800",children:"Logout"})})]})]})]})]})}),e.jsx("main",{className:"flex-1 overflow-auto bg-[var(--brand-background)]",children:e.jsx("div",{className:"page-container",children:e.jsx(wb,{})})})]})]})},Jb=b.createContext(null);function hr(){const t=b.useContext(Jb);if(!t)throw new Error("useToast must be used within ToastProvider");return t}function nS({children:t}){const[s,r]=b.useState([]),a=b.useCallback((i,l)=>{const o=Date.now()+Math.floor(Math.random()*1e3);r(c=>[...c,{id:o,type:i,message:l}]),setTimeout(()=>r(c=>c.filter(d=>d.id!==o)),3500)},[]),n=b.useMemo(()=>({notify:a}),[a]);return e.jsxs(Jb.Provider,{value:n,children:[t,e.jsx("div",{className:"fixed top-4 right-4 z-[1000] space-y-2",children:s.map(i=>e.jsx("div",{className:`px-4 py-2 rounded shadow text-sm ${i.type==="success"?"bg-green-600 text-white":i.type==="error"?"bg-red-600 text-white":"bg-slate-800 text-white"}`,children:i.message},i.id))})]})}function iS(){const[t,s]=b.useState(0),[r,a]=b.useState([]),[n,i]=b.useState({}),[l,o]=b.useState(0),[c,d]=b.useState([]);b.useEffect(()=>{Ye.isConnected()||Ye.connect();const x=Ye.subscribe("live-users-count",v=>{console.log(" Live users count:",v.count),s(v.count||0)}),h=Ye.subscribe("page-view-update",v=>{console.log(" Page view:",v),i(N=>({...N,[v.page]:(N[v.page]||0)+1})),u({type:"page-view",data:v,timestamp:new Date().toISOString()})}),m=Ye.subscribe("cart-update",v=>{console.log(" Cart update:",v),o(N=>N+1),u({type:"cart-update",data:v,timestamp:new Date().toISOString()})}),j=Ye.subscribe("user-action-update",v=>{var N;console.log(" User action:",v),v.action==="search"&&((N=v.data)!=null&&N.query)&&d(S=>[v.data.query,...S.slice(0,9)]),u({type:"user-action",data:v,timestamp:new Date().toISOString()})});return()=>{x(),h(),m(),j()}},[]);const u=x=>{a(h=>[x,...h.slice(0,19)])},p=x=>{switch(x){case"page-view":return e.jsx(ot,{className:"h-4 w-4 text-blue-500"});case"cart-update":return e.jsx(Xs,{className:"h-4 w-4 text-green-500"});case"user-action":return e.jsx(On,{className:"h-4 w-4 text-purple-500"});default:return e.jsx(On,{className:"h-4 w-4 text-gray-500"})}},f=x=>{var h;switch(x.type){case"page-view":return`User viewed ${x.data.page}`;case"cart-update":return`Cart ${x.data.action}: ${((h=x.data.data)==null?void 0:h.productName)||"item"}`;case"user-action":return`${x.data.action}: ${JSON.stringify(x.data.data).substring(0,50)}`;default:return"Unknown activity"}},g=Object.entries(n).sort(([,x],[,h])=>h-x).slice(0,5);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"metric-card bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900 dark:to-blue-800 border-blue-200 dark:border-blue-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-300 mb-2",children:"Live Users"}),e.jsx("p",{className:"text-4xl font-bold text-blue-900 dark:text-blue-100",children:t})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Pt,{className:"h-12 w-12 text-blue-500 dark:text-blue-400"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-pulse"})]})]}),e.jsxs("div",{className:"mt-3 flex items-center text-sm text-blue-600 dark:text-blue-300",children:[e.jsx(On,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Active now"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Total Page Views"}),e.jsx("p",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100",children:Object.values(n).reduce((x,h)=>x+h,0)})]}),e.jsx(ot,{className:"h-12 w-12 text-gray-400 dark:text-gray-600"})]}),e.jsxs("div",{className:"mt-3 flex items-center text-sm text-green-600 dark:text-green-400",children:[e.jsx(zt,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Since session start"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Cart Events"}),e.jsx("p",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100",children:l})]}),e.jsx(Xs,{className:"h-12 w-12 text-gray-400 dark:text-gray-600"})]}),e.jsxs("div",{className:"mt-3 flex items-center text-sm text-blue-600 dark:text-blue-400",children:[e.jsx(On,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Add, remove, update"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center",children:[e.jsx(On,{className:"h-5 w-5 mr-2 text-purple-500"}),"Live Activity Feed"]}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:r.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(On,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Waiting for user activity..."})]}):r.map((x,h)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("div",{className:"mt-1",children:p(x.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 truncate",children:f(x)}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center mt-1",children:[e.jsx(cs,{className:"h-3 w-3 mr-1"}),new Date(x.timestamp).toLocaleTimeString()]})]})]},h))})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[e.jsx(zt,{className:"h-5 w-5 mr-2 text-green-500"}),"Top Pages (This Session)"]}),e.jsx("div",{className:"space-y-3",children:g.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(ot,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No page views yet..."})]}):g.map(([x,h],m)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 text-white rounded-full font-bold text-sm",children:m+1}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:x||"/"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[h," ",h===1?"view":"views"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:h})})]},x))})]})]}),c.length>0&&e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Recent Search Queries"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((x,h)=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm",children:x},h))})]})]})}const lS=()=>{const t=ja(),[s,r]=b.useState(!0),[a,n]=b.useState(null),[i,l]=b.useState([]),[o,c]=b.useState(0),[d,u]=b.useState(!0),[p,f]=b.useState(""),x=(()=>{if(typeof window<"u"){const S=window.location.hostname;return S==="thenefol.com"||S==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}/api`:"https://thenefol.com/api"}return"https://thenefol.com/api"})();b.useEffect(()=>{Ye.isConnected()||Ye.connect(),h();const S=setInterval(()=>{h()},3e4);return()=>clearInterval(S)},[]);const h=async()=>{var S,A;try{u(!0),f("");const[T,k,_]=await Promise.all([fetch(`${x}/dashboard/metrics`),fetch(`${x}/dashboard/action-items`),fetch(`${x}/dashboard/live-visitors`)]);if(T.ok){const y=await T.json(),w=y.data||y;n(w)}else n({sessions:0,sessionsChange:0,totalSales:0,salesChange:0,orders:0,ordersChange:0,conversionRate:0,conversionChange:0});if(k.ok){const y=await k.json(),w=((S=y.data)==null?void 0:S.items)||y.items||[];l(w)}if(_.ok){const y=await _.json(),w=((A=y.data)==null?void 0:A.count)||y.count||0;c(w)}}catch(T){console.error("Failed to load dashboard data:",T),f("Failed to load dashboard data"),n({sessions:0,sessionsChange:0,totalSales:0,salesChange:0,orders:0,ordersChange:0,conversionRate:0,conversionChange:0})}finally{u(!1)}},m=(S,A)=>{if(S==null)return"0";switch(A){case"sessions":return S.toLocaleString();case"totalSales":return`${S.toLocaleString()}`;case"orders":return S.toString();case"conversionRate":return`${S.toFixed(2)}%`;default:return S.toString()}},j=S=>S==null?"+0.0%":`${S>=0?"+":""}${S.toFixed(1)}%`,v=S=>S==null?"neutral":S>=0?"up":"down",N=a?[{title:"Sessions",value:m(a.sessions,"sessions"),change:j(a.sessionsChange),trend:v(a.sessionsChange),icon:""},{title:"Total sales",value:m(a.totalSales,"totalSales"),change:j(a.salesChange),trend:v(a.salesChange),icon:""},{title:"Orders",value:m(a.orders,"orders"),change:j(a.ordersChange),trend:v(a.ordersChange),icon:""},{title:"Conversion rate",value:m(a.conversionRate,"conversionRate"),change:j(a.conversionChange),trend:v(a.conversionChange),icon:""}]:[];return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsx(iS,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>t("/admin/analytics"),className:"flex items-center space-x-2 px-4 py-2 border rounded-xl hover:bg-[var(--arctic-blue-lighter)] transition-all duration-300",style:{borderColor:"var(--arctic-blue-light)",color:"var(--arctic-blue-primary-dark)"},title:"View analytics for last 30 days",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{children:"Last 30 days"})]}),e.jsxs("button",{onClick:()=>t("/admin/analytics"),className:"flex items-center space-x-2 px-4 py-2 border rounded-xl hover:bg-[var(--arctic-blue-lighter)] transition-all duration-300",style:{borderColor:"var(--arctic-blue-light)",color:"var(--arctic-blue-primary-dark)"},title:"View analytics for all channels",children:[e.jsx("span",{children:"All channels"}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsxs("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:[o," live visitors"]})]})]}),p&&e.jsx("div",{className:"metric-card",style:{backgroundColor:"#FEF2F2",borderColor:"#FECACA"},children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-red-600",children:p}),e.jsx("button",{onClick:h,className:"ml-auto text-red-600 hover:text-red-800 underline transition-colors",children:"Retry"})]})}),d&&!p&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((S,A)=>e.jsxs("div",{className:"metric-card animate-pulse",children:[e.jsx("div",{className:"h-4 rounded mb-4",style:{backgroundColor:"var(--arctic-blue-light)"}}),e.jsx("div",{className:"h-8 rounded",style:{backgroundColor:"var(--arctic-blue-light)"}})]},A))}),!d&&!p&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:N.map((S,A)=>e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:S.icon}),e.jsx("h3",{className:"text-sm font-medium",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:S.title})]}),e.jsx("button",{onClick:()=>t("/admin/analytics"),className:"transition-colors hover:opacity-70",style:{color:"var(--arctic-blue-primary)"},title:"View detailed analytics",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]}),e.jsxs("div",{className:"flex items-baseline space-x-3",children:[e.jsx("span",{className:"text-3xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:S.value}),e.jsxs("div",{className:`flex items-center space-x-1 text-sm font-medium ${S.trend==="up"?"text-green-600":"text-red-600"}`,children:[S.trend==="up"?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 17l9.2-9.2M17 17V7H7"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 7l-9.2 9.2M7 7v10h10"})}),e.jsx("span",{children:S.change})]})]})]},A))}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Sessions"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"var(--arctic-blue-primary)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Current Period"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"var(--arctic-blue-light)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Previous Period"})]})]})]}),e.jsx("div",{className:"h-64 rounded-xl flex items-center justify-center border-2 border-dashed",style:{backgroundColor:"var(--arctic-blue-lighter)",borderColor:"var(--arctic-blue-light)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",style:{color:"var(--arctic-blue-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--text-muted)"},children:"Performance chart will be displayed here"}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Chart integration coming soon"})]})})]}),!d&&!p&&i.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map((S,A)=>e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:S.icon}),e.jsx("span",{className:`font-medium ${S.color}`,children:S.title})]})},A))}),s&&a&&a.orders>=10&&e.jsxs("div",{className:"metric-card relative",style:{background:"linear-gradient(135deg, var(--arctic-blue-lighter) 0%, var(--arctic-blue-light) 100%)",borderColor:"var(--arctic-blue-primary)"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-xl font-light mb-3",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:["Congratulations on reaching ",a.orders||0," orders!"]}),e.jsx("p",{className:"mb-6",style:{color:"var(--text-muted)",letterSpacing:"0.02em"},children:"This is just the beginning of your journey. Keep pushing forward and watch your business grow with each new customer."}),e.jsx("button",{onClick:()=>t("/admin/orders"),className:"btn-primary",children:"View orders report"})]}),e.jsx("div",{className:"ml-8",children:e.jsx("div",{className:"w-24 h-24 rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg, var(--arctic-blue-primary) 0%, var(--arctic-blue-primary-dark) 100%)"},children:e.jsx("span",{className:"text-4xl",children:""})})})]}),e.jsx("button",{onClick:()=>r(!1),className:"absolute top-4 right-4 transition-colors hover:opacity-70",style:{color:"var(--text-muted)"},children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})};function za({open:t,title:s="Are you sure?",description:r,confirmText:a="Confirm",cancelText:n="Cancel",onConfirm:i,onClose:l}){return t?e.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-5",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:s}),r&&e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:r}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:l,className:"px-3 py-2 text-sm border rounded",children:n}),e.jsx("button",{onClick:()=>{i(),l()},className:"px-3 py-2 text-sm rounded bg-red-600 text-white",children:a})]})]})}):null}function oS(){const t=ja(),{notify:s}=hr(),[r,a]=b.useState([]),[n,i]=b.useState(!1),[l,o]=b.useState(""),[c,d]=b.useState(""),[u,p]=b.useState(""),[f,g]=b.useState(""),[x,h]=b.useState(""),[m,j]=b.useState(""),[v,N]=b.useState(""),[S,A]=b.useState([]),k=(()=>{if(typeof window<"u"){const W=window.location.hostname;if(W==="thenefol.com"||W==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),_=b.useMemo(()=>{const W=localStorage.getItem("auth_token");return{"Content-Type":"application/json",...W?{Authorization:`Bearer ${W}`}:{},"x-user-permissions":"orders:read,orders:update,shipping:update,invoices:read","x-user-role":"admin"}},[]),y=async()=>{try{i(!0),o("");const W=new URLSearchParams;c&&W.set("status",c),u&&W.set("q",u),f&&W.set("from",f),x&&W.set("to",x),m&&W.set("payment_status",m),v&&W.set("cod",v);const Q=await fetch(`${k}/api/orders?${W.toString()}`,{headers:_});if(!Q.ok){Q.status===403?o("Access denied. You do not have permission to view orders."):o(`Failed to load orders: ${Q.status} ${Q.statusText}`),a([]);return}const D=await Q.json();let F=Array.isArray(D)?D:D&&Array.isArray(D.data)?D.data:[];const V=F.map(te=>({...te,customer:te.customer_name||te.customer||"",createdAt:te.created_at||te.createdAt||new Date().toISOString()}));a(V),V.length===0&&F.length===0&&o("Invalid response format from server"),A([])}catch(W){console.error("Error loading orders:",W),o("Failed to load orders"),a([])}finally{i(!1)}};b.useEffect(()=>{y();const W=Ye.subscribe("order_created",D=>{console.log("New order received:",D);const F={...D,customer:D.customer_name||D.customer||"",createdAt:D.created_at||D.createdAt||new Date().toISOString()};a(V=>[F,...V])}),Q=Ye.subscribe("order_updated",D=>{console.log("Order updated:",D);const F={...D,customer:D.customer_name||D.customer||"",createdAt:D.created_at||D.createdAt||new Date().toISOString()};a(V=>V.map(te=>te.id===F.id?F:te))});return()=>{W(),Q()}},[]);const w=async(W,Q)=>{try{const D=await fetch(`${k}/api/orders/${W}`,{method:"PUT",headers:_,body:JSON.stringify({status:Q})});if(!D.ok){const F=await D.json();throw new Error(F.error||"Status update failed")}await y(),s("success",`Order ${W} updated to ${Q}`)}catch(D){console.error("Update failed:",D),s("error",`Update failed: ${D.message}`)}},R=(W,Q)=>{A(D=>Q?Array.from(new Set([...D,W])):D.filter(F=>F!==W))},P=async W=>{if(S.length===0)return alert("Select orders first");if(!(await fetch(`${k}/api/bulk/orders/status`,{method:"POST",headers:_,body:JSON.stringify({orderIds:S,status:W})})).ok){s("error","Bulk status failed");return}await y(),s("success",`Bulk marked ${W}`)},H=async()=>{if(S.length===0)return alert("Select orders first");if(!(await fetch(`${k}/api/bulk/shipping/labels`,{method:"POST",headers:_,body:JSON.stringify({orderIds:S})})).ok){s("error","Bulk labels failed");return}s("success","Labels queued")},L=async()=>{if(S.length===0)return alert("Select orders first");const W=await fetch(`${k}/api/bulk/invoices/download`,{method:"POST",headers:_,body:JSON.stringify({orderIds:S})});if(!W.ok){s("error","Bulk invoices failed");return}const Q=await W.json();console.log("Invoice links:",Q==null?void 0:Q.links),s("success","Invoice links generated (check console)")},O=async W=>{try{const Q=await fetch(`${k}/api/shiprocket/orders/${W}/awb`,{method:"POST",headers:_}),D=await Q.json();if(!Q.ok||!(D!=null&&D.success))throw new Error((D==null?void 0:D.error)||"Failed to create AWB");alert("AWB created successfully")}catch(Q){alert((Q==null?void 0:Q.message)||"Failed to create AWB")}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
          :root {
            --arctic-blue-primary: #7DD3D3;
            --arctic-blue-primary-hover: #5EC4C4;
            --arctic-blue-primary-dark: #4A9FAF;
            --arctic-blue-light: #E0F5F5;
            --arctic-blue-lighter: #F0F9F9;
            --arctic-blue-background: #F4F9F9;
          }
        `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Orders"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage and track all customer orders"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:y,className:"btn-secondary",children:"Refresh"}),e.jsx("button",{onClick:()=>{const W=new URLSearchParams;c&&W.set("status",c),u&&W.set("q",u),f&&W.set("from",f),x&&W.set("to",x),window.open(`${k}/api/orders/export?${W.toString()}`,"_blank")},className:"btn-secondary",children:"Export CSV"}),e.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[e.jsx(ms,{permission:"orders:update",children:e.jsx("button",{onClick:()=>P("paid"),className:"btn-secondary",children:"Bulk Mark Paid"})}),e.jsx(ms,{permission:"orders:update",children:e.jsx("button",{onClick:()=>P("shipped"),className:"btn-secondary",children:"Bulk Mark Shipped"})}),e.jsx(ms,{permission:"shipping:update",children:e.jsx("button",{onClick:H,className:"btn-secondary",children:"Bulk Labels"})}),e.jsx(ms,{permission:"invoices:read",children:e.jsx("button",{onClick:L,className:"btn-secondary",children:"Bulk Invoices"})})]})]})]}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("input",{value:u,onChange:W=>p(W.target.value),placeholder:"Search order #",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsxs("select",{value:c,onChange:W=>d(W.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsxs("select",{value:m,onChange:W=>j(W.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"},children:[e.jsx("option",{value:"",children:"Any Payment"}),e.jsx("option",{value:"unpaid",children:"Unpaid"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"refunded",children:"Refunded"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsxs("select",{value:v,onChange:W=>N(W.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"},children:[e.jsx("option",{value:"",children:"COD/Prepaid"}),e.jsx("option",{value:"true",children:"COD"}),e.jsx("option",{value:"false",children:"Prepaid"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 md:col-span-5",children:[e.jsx("input",{type:"date",value:f,onChange:W=>g(W.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("input",{type:"date",value:x,onChange:W=>h(W.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("button",{onClick:y,className:"btn-primary md:col-span-2",children:"Apply Filters"})]})]})}),e.jsx("div",{className:"metric-card",children:n?e.jsx("p",{children:"Loading..."}):l?e.jsx("p",{className:"text-red-600",children:l}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"border-b text-xs uppercase",style:{borderColor:"var(--arctic-blue-light)",color:"var(--text-muted)"},children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-4 pr-4",children:e.jsx("input",{type:"checkbox",onChange:W=>{W.target.checked&&Array.isArray(r)?A(r.map(Q=>Q.id)):A([])},checked:S.length>0&&Array.isArray(r)&&S.length===r.length})}),e.jsx("th",{className:"py-4 pr-4 font-medium",children:"ID"}),e.jsx("th",{className:"py-4 pr-4 font-medium",children:"Customer"}),e.jsx("th",{className:"py-4 pr-4 font-medium",children:"Total"}),e.jsx("th",{className:"py-4 pr-4 font-medium",children:"Status"}),e.jsx("th",{className:"py-4 pr-4 font-medium",children:"Placed"}),e.jsx("th",{className:"py-4 pr-4 font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:Array.isArray(r)&&r.length>0?r.map(W=>e.jsxs("tr",{className:"border-b transition-colors hover:bg-[var(--arctic-blue-lighter)]",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsx("td",{className:"py-4 pr-4",children:e.jsx("input",{type:"checkbox",checked:S.includes(W.id),onChange:Q=>R(W.id,Q.target.checked)})}),e.jsx("td",{className:"py-4 pr-4 font-medium",style:{color:"var(--text-primary)"},children:W.id}),e.jsx("td",{className:"py-4 pr-4",style:{color:"var(--text-secondary)"},children:W.customer}),e.jsxs("td",{className:"py-4 pr-4 font-semibold",style:{color:"var(--arctic-blue-primary-dark)"},children:["",Number(W.total).toFixed(2)]}),e.jsx("td",{className:"py-4 pr-4",children:e.jsx("span",{className:`px-3 py-1 text-xs rounded-full font-medium ${W.status==="paid"?"bg-green-100 text-green-800":W.status==="shipped"?"bg-blue-100 text-blue-800":W.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:W.status})}),e.jsx("td",{className:"py-4 pr-4",style:{color:"var(--text-muted)"},children:W.createdAt?(()=>{try{const Q=new Date(W.createdAt);return isNaN(Q.getTime())?"Invalid Date":Q.toLocaleString()}catch{return"Invalid Date"}})():"Invalid Date"}),e.jsx("td",{className:"py-4 pr-4",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>t(`/admin/orders/${W.id}`),className:"btn-secondary text-xs px-3 py-1.5",children:"Details"}),e.jsx(ms,{permission:"orders:update",children:e.jsx("button",{onClick:()=>w(W.id,"paid"),className:"btn-secondary text-xs px-3 py-1.5",children:"Mark Paid"})}),e.jsx(ms,{permission:"orders:update",children:e.jsx("button",{onClick:()=>w(W.id,"shipped"),className:"btn-secondary text-xs px-3 py-1.5",children:"Mark Shipped"})}),e.jsx(ms,{permission:"shipping:update",children:e.jsx("button",{onClick:()=>O(W.id),className:"btn-secondary text-xs px-3 py-1.5",children:"Create AWB"})}),e.jsx(ms,{permission:"orders:update",children:e.jsx(cS,{onConfirm:()=>w(W.id,"cancelled")})})]})})]},W.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"py-12 text-center",style:{color:"var(--text-muted)"},children:l||"No orders found"})})})]})})})]})})}function cS({onConfirm:t}){const[s,r]=b.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>r(!0),className:"bg-red-600 text-white px-2 py-1 text-xs rounded hover:bg-red-700",children:"Cancel"}),e.jsx(za,{open:s,onClose:()=>r(!1),onConfirm:t,title:"Cancel this order?",description:"This action cannot be undone.",confirmText:"Cancel Order"})]})}function dS(){const t=ja(),[s,r]=b.useState([]),[a,n]=b.useState(!0),[i,l]=b.useState(null),[o,c]=b.useState(""),[d,u]=b.useState("with_orders"),[p,f]=b.useState("total_spent"),[g,x]=b.useState("desc"),m=(()=>{if(typeof window<"u"){const A=window.location.hostname;if(A==="thenefol.com"||A==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();b.useEffect(()=>{j()},[]);const j=async()=>{try{n(!0),l(null);const A=await fetch(`${m}/users`);if(A.ok){const k=(await A.json()).filter(_=>(parseInt(String(_.total_orders||0),10)||0)>0).map(_=>({..._,total_orders:parseInt(String(_.total_orders||0),10)||0,total_spent:parseFloat(String(_.total_spent||0))||0,loyalty_points:parseInt(String(_.loyalty_points||0),10)||0}));r(k)}else l("Failed to fetch customers")}catch(A){console.error("Error fetching customers:",A),l("Failed to fetch customers")}finally{n(!1)}},v=s.filter(A=>{var w,R,P;const T=((w=A.name)==null?void 0:w.toLowerCase().includes(o.toLowerCase()))||((R=A.email)==null?void 0:R.toLowerCase().includes(o.toLowerCase()))||((P=A.phone)==null?void 0:P.toLowerCase().includes(o.toLowerCase())),k=parseInt(String(A.total_orders||0),10)||0,_=parseFloat(String(A.total_spent||0))||0,y=d==="all"||d==="with_orders"&&k>0||d==="high_value"&&_>=5e3;return T&&y}).sort((A,T)=>{let k,_;switch(p){case"total_spent":k=parseFloat(String(A.total_spent||0))||0,_=parseFloat(String(T.total_spent||0))||0;break;case"total_orders":k=parseInt(String(A.total_orders||0),10)||0,_=parseInt(String(T.total_orders||0),10)||0;break;case"member_since":k=new Date(A.member_since).getTime(),_=new Date(T.member_since).getTime();break;default:return 0}return g==="asc"?k>_?1:-1:k<_?1:-1}),N=A=>{const T=parseFloat(String(A||0))||0;return T>=1e4?{level:"Platinum",color:"text-purple-600 bg-purple-100 dark:bg-purple-900/20 dark:text-purple-300"}:T>=5e3?{level:"Gold",color:"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20 dark:text-yellow-300"}:T>=2e3?{level:"Silver",color:"text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300"}:{level:"Bronze",color:"text-orange-600 bg-orange-100 dark:bg-orange-900/20 dark:text-orange-300"}},S={totalCustomers:s.length,totalRevenue:s.reduce((A,T)=>{const k=parseFloat(String(T.total_spent||0))||0;return A+k},0),totalOrders:s.reduce((A,T)=>{const k=parseInt(String(T.total_orders||0),10)||0;return A+k},0),averageOrderValue:(()=>{const A=s.reduce((k,_)=>{const y=parseFloat(String(_.total_spent||0))||0;return k+y},0),T=s.reduce((k,_)=>{const y=parseInt(String(_.total_orders||0),10)||0;return k+y},0);return T>0?A/T:0})(),highValueCustomers:s.filter(A=>(parseFloat(String(A.total_spent||0))||0)>=5e3).length};return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Customers"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage your customers and their order history"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pt,{className:"h-8 w-8",style:{color:"var(--arctic-blue-primary)"}}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:S.totalCustomers})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ko,{className:"h-8 w-8",style:{color:"var(--arctic-blue-primary)"}}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:["",S.totalRevenue.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(fa,{className:"h-8 w-8",style:{color:"var(--arctic-blue-primary)"}}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:S.totalOrders})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(zt,{className:"h-8 w-8 text-orange-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Avg Order Value"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:isNaN(S.averageOrderValue)||S.averageOrderValue===0?"0":`${Math.round(S.averageOrderValue).toLocaleString("en-IN")}`})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xr,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"High Value"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:S.highValueCustomers})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[e.jsx("div",{className:"flex-1 w-full",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search customers by name, email, or phone...",value:o,onChange:A=>c(A.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ll,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:d,onChange:A=>u(A.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Customers"}),e.jsx("option",{value:"with_orders",children:"With Orders"}),e.jsx("option",{value:"high_value",children:"High Value (5000+)"})]}),e.jsxs("select",{value:`${p}-${g}`,onChange:A=>{const[T,k]=A.target.value.split("-");f(T),x(k)},className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"total_spent-desc",children:"Highest Revenue"}),e.jsx("option",{value:"total_spent-asc",children:"Lowest Revenue"}),e.jsx("option",{value:"total_orders-desc",children:"Most Orders"}),e.jsx("option",{value:"total_orders-asc",children:"Least Orders"}),e.jsx("option",{value:"member_since-desc",children:"Newest"}),e.jsx("option",{value:"member_since-asc",children:"Oldest"})]})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[i&&e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400",children:[e.jsx("p",{className:"text-red-700 dark:text-red-300",children:i}),e.jsx("button",{onClick:j,className:"mt-2 text-red-600 dark:text-red-400 hover:underline",children:"Retry"})]}),v.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Pt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No customers found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:o?"Try adjusting your search terms":"No customers have placed orders yet"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Orders"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Tier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Member Since"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:v.map(A=>{const T=N(A.total_spent||0);return e.jsxs("tr",{onClick:()=>t(`/admin/users/${A.id}`),className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900/20 flex items-center justify-center",children:e.jsx(Pt,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:A.name||"N/A"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",A.id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ss,{className:"h-4 w-4 text-gray-400"}),A.email||"N/A"]}),A.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pa,{className:"h-4 w-4 text-gray-400"}),A.phone]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ko,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["",(parseFloat(String(A.total_spent||0))||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fa,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:parseInt(String(A.total_orders||0),10)||0})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${T.color}`,children:T.level})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mr,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:new Date(A.member_since).toLocaleDateString()})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${A.is_verified?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300"}`,children:A.is_verified?"Verified":"Unverified"})})]},A.id)})})]})}),v.length>0&&e.jsx("div",{className:"px-6 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",v.length," of ",s.length," customers"]})})]})]})}const Pn=()=>{if(typeof window<"u"){const t=window.location.hostname;return t==="thenefol.com"||t==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}/api`:"https://thenefol.com/api"}return"https://thenefol.com/api"},Of=Pn();function uS(){const t=ja(),[s,r]=b.useState([]),[a,n]=b.useState([]),[i,l]=b.useState(!0),[o,c]=b.useState(null),[d,u]=b.useState(""),[p,f]=b.useState("all"),[g,x]=b.useState(!1);b.useEffect(()=>{j(),h()},[]);const h=async()=>{try{const S=await fetch(`${Of}/forms/submissions`);if(S.ok){const A=await S.json();n(A.submissions||A||[])}}catch(S){console.error("Error fetching form submissions:",S)}},m=S=>a.filter(A=>{const T=A.data||{};return T.email===S||T.Email===S}),j=async()=>{try{l(!0);const S=await fetch(`${Of}/users`);if(S.ok){const A=await S.json();r(A)}else c("Failed to fetch users")}catch{c("Failed to fetch users")}finally{l(!1)}},v=s.filter(S=>{const A=S.name.toLowerCase().includes(d.toLowerCase())||S.email.toLowerCase().includes(d.toLowerCase()),T=p==="all"||p==="verified"&&S.is_verified||p==="unverified"&&!S.is_verified;return A&&T}),N=S=>S>=5e3?{level:"Gold",color:"text-yellow-600 bg-yellow-100"}:S>=2e3?{level:"Silver",color:"text-gray-600 bg-gray-100"}:{level:"Bronze",color:"text-orange-600 bg-orange-100"};return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Users"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage your customer base"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>x(!g),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[e.jsx(gs,{className:"h-4 w-4"}),e.jsxs("span",{children:["Form Submissions (",a.length,")"]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 px-4 py-2 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Total Users"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:s.length})]})]})]}),g&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Form Submissions"}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),a.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No form submissions yet"}):e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:a.map(S=>{const A=S.data||{},T=A.email||A.Email||"N/A",k=A.name||A.Name||"Anonymous",_=s.find(y=>y.email===T);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:S.form_name||`Form #${S.form_id}`}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Submitted by: ",k," (",T,")",_&&e.jsxs("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:["(User ID: ",_.id,")"]})]})]}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(S.created_at).toLocaleString()})]}),e.jsx("div",{className:"space-y-1 mt-2",children:Object.entries(A).map(([y,w])=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:[y,":"]})," ",e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:String(w)})]},y))})]},S.id)})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search users by name or email...",value:d,onChange:S=>u(S.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsxs("select",{value:p,onChange:S=>f(S.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Users"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"unverified",children:"Unverified"})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[o&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400",children:e.jsx("p",{className:"text-red-700 dark:text-red-300",children:o})}),v.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Pt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No users found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:d?"Try adjusting your search terms":"No users have signed up yet"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Loyalty"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Orders"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Member Since"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Form Submissions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:v.map(S=>{const A=N(S.loyalty_points),T=m(S.email);return e.jsxs("tr",{onClick:()=>t(`/admin/users/${S.id}`),className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900/20 flex items-center justify-center",children:e.jsx(Pt,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:S.name}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",S.id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ss,{className:"h-4 w-4 text-gray-400"}),S.email]}),S.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pa,{className:"h-4 w-4 text-gray-400"}),S.phone]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(xr,{className:"h-4 w-4 text-yellow-500"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[S.loyalty_points.toLocaleString()," pts"]})]}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${A.color}`,children:A.level})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fa,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:S.total_orders})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${S.is_verified?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300"}`,children:S.is_verified?"Verified":"Unverified"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mr,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:new Date(S.member_since).toLocaleDateString()})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:T.length})]}),T.length>0&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Latest: ",new Date(T[0].created_at).toLocaleDateString()]})]})]},S.id)})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pt,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xr,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Verified Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.filter(S=>S.is_verified).length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(fa,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.reduce((S,A)=>S+A.total_orders,0)})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xr,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Points"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.reduce((S,A)=>S+A.loyalty_points,0).toLocaleString()})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(gs,{className:"h-8 w-8 text-indigo-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Form Submissions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.length})]})]})})]})]})}function xS(){return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Categories"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Organize your products into categories"})]}),e.jsx("button",{className:"btn-primary",children:"Add Category"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"mb-4 text-xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Category Management"}),e.jsx("p",{style:{color:"var(--text-muted)",letterSpacing:"0.02em"},children:"Category management features coming soon. This will include creating, editing, and organizing product categories."})]})]})}function mS(){const[t,s]=b.useState("Nefol Store"),[r,a]=b.useState("support@nefol.com"),[n,i]=b.useState("Light"),[l,o]=b.useState("INR ()"),c=()=>{alert("Settings saved successfully!"),console.log("Settings:",{storeName:t,supportEmail:r,theme:n,currency:l})};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Settings"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Configure your store settings and preferences"})]}),e.jsx("button",{onClick:c,className:"btn-primary",children:"Save Changes"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"mb-4 text-xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Store Settings"}),e.jsx("p",{className:"mb-6",style:{color:"var(--text-muted)",letterSpacing:"0.02em"},children:"Configure your store settings and preferences."}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 font-semibold text-gray-900",children:"General"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Name"}),e.jsx("input",{value:t,onChange:d=>s(d.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"Nefol Store"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Support Email"}),e.jsx("input",{value:r,onChange:d=>a(d.target.value),type:"email",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"support@nefol.com"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 font-semibold text-gray-900",children:"Appearance"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Theme"}),e.jsxs("select",{value:n,onChange:d=>i(d.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",children:[e.jsx("option",{children:"Light"}),e.jsx("option",{children:"Dark"}),e.jsx("option",{children:"Auto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsxs("select",{value:l,onChange:d=>o(d.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",children:[e.jsx("option",{children:"INR ()"}),e.jsx("option",{children:"USD ($)"}),e.jsx("option",{children:"EUR ()"})]})]})]})]})]})]})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Kb=1252,hS=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],bm={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},vm=function(t){hS.indexOf(t)!=-1&&(Kb=bm[0]=t)};function fS(){vm(1252)}var Zr=function(t){vm(t)};function Yb(){Zr(1200),fS()}function If(t){for(var s=[],r=0,a=t.length;r<a;++r)s[r]=t.charCodeAt(r);return s}function pS(t){for(var s=[],r=0;r<t.length>>1;++r)s[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return s.join("")}function Xb(t){for(var s=[],r=0;r<t.length>>1;++r)s[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return s.join("")}var Fl=function(t){var s=t.charCodeAt(0),r=t.charCodeAt(1);return s==255&&r==254?pS(t.slice(2)):s==254&&r==255?Xb(t.slice(2)):s==65279?t.slice(1):t},mc=function(s){return String.fromCharCode(s)},Mf=function(s){return String.fromCharCode(s)},So,cn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Bf(t){for(var s="",r=0,a=0,n=0,i=0,l=0,o=0,c=0,d=0;d<t.length;)r=t.charCodeAt(d++),i=r>>2,a=t.charCodeAt(d++),l=(r&3)<<4|a>>4,n=t.charCodeAt(d++),o=(a&15)<<2|n>>6,c=n&63,isNaN(a)?o=c=64:isNaN(n)&&(c=64),s+=cn.charAt(i)+cn.charAt(l)+cn.charAt(o)+cn.charAt(c);return s}function Nr(t){var s="",r=0,a=0,n=0,i=0,l=0,o=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<t.length;)i=cn.indexOf(t.charAt(d++)),l=cn.indexOf(t.charAt(d++)),r=i<<2|l>>4,s+=String.fromCharCode(r),o=cn.indexOf(t.charAt(d++)),a=(l&15)<<4|o>>2,o!==64&&(s+=String.fromCharCode(a)),c=cn.indexOf(t.charAt(d++)),n=(o&3)<<6|c,c!==64&&(s+=String.fromCharCode(n));return s}var gt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),xi=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(s,r){return r?new Buffer(s,r):new Buffer(s)}:Buffer.from.bind(Buffer)}return function(){}}();function Cn(t){return gt?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function $f(t){return gt?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Qr=function(s){return gt?xi(s,"binary"):s.split("").map(function(r){return r.charCodeAt(0)&255})};function mi(t){if(Array.isArray(t))return t.map(function(a){return String.fromCharCode(a)}).join("");for(var s=[],r=0;r<t.length;++r)s[r]=String.fromCharCode(t[r]);return s.join("")}function jm(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return jm(new Uint8Array(t));for(var s=new Array(t.length),r=0;r<t.length;++r)s[r]=t[r];return s}var an=gt?function(t){return Buffer.concat(t.map(function(s){return Buffer.isBuffer(s)?s:xi(s)}))}:function(t){if(typeof Uint8Array<"u"){var s=0,r=0;for(s=0;s<t.length;++s)r+=t[s].length;var a=new Uint8Array(r),n=0;for(s=0,r=0;s<t.length;r+=n,++s)if(n=t[s].length,t[s]instanceof Uint8Array)a.set(t[s],r);else{if(typeof t[s]=="string")throw"wtf";a.set(new Uint8Array(t[s]),r)}return a}return[].concat.apply([],t.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function gS(t){for(var s=[],r=0,a=t.length+250,n=Cn(t.length+255),i=0;i<t.length;++i){var l=t.charCodeAt(i);if(l<128)n[r++]=l;else if(l<2048)n[r++]=192|l>>6&31,n[r++]=128|l&63;else if(l>=55296&&l<57344){l=(l&1023)+64;var o=t.charCodeAt(++i)&1023;n[r++]=240|l>>8&7,n[r++]=128|l>>2&63,n[r++]=128|o>>6&15|(l&3)<<4,n[r++]=128|o&63}else n[r++]=224|l>>12&15,n[r++]=128|l>>6&63,n[r++]=128|l&63;r>a&&(s.push(n.slice(0,r)),r=0,n=Cn(65535),a=65530)}return s.push(n.slice(0,r)),an(s)}var Qs=/\u0000/g,Pl=/[\u0001-\u0006]/g;function Wi(t){for(var s="",r=t.length-1;r>=0;)s+=t.charAt(r--);return s}function ea(t,s){var r=""+t;return r.length>=s?r:Jt("0",s-r.length)+r}function wm(t,s){var r=""+t;return r.length>=s?r:Jt(" ",s-r.length)+r}function hd(t,s){var r=""+t;return r.length>=s?r:r+Jt(" ",s-r.length)}function yS(t,s){var r=""+Math.round(t);return r.length>=s?r:Jt("0",s-r.length)+r}function bS(t,s){var r=""+t;return r.length>=s?r:Jt("0",s-r.length)+r}var Uf=Math.pow(2,32);function vi(t,s){if(t>Uf||t<-Uf)return yS(t,s);var r=Math.round(t);return bS(r,s)}function fd(t,s){return s=s||0,t.length>=7+s&&(t.charCodeAt(s)|32)===103&&(t.charCodeAt(s+1)|32)===101&&(t.charCodeAt(s+2)|32)===110&&(t.charCodeAt(s+3)|32)===101&&(t.charCodeAt(s+4)|32)===114&&(t.charCodeAt(s+5)|32)===97&&(t.charCodeAt(s+6)|32)===108}var zf=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],F0=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function vS(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var tt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Wf={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},jS={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function pd(t,s,r){for(var a=t<0?-1:1,n=t*a,i=0,l=1,o=0,c=1,d=0,u=0,p=Math.floor(n);d<s&&(p=Math.floor(n),o=p*l+i,u=p*d+c,!(n-p<5e-8));)n=1/(n-p),i=l,l=o,c=d,d=u;if(u>s&&(d>s?(u=c,o=i):(u=d,o=l)),!r)return[0,a*o,u];var f=Math.floor(a*o/u);return[f,a*o-f*u,u]}function Hn(t,s,r){if(t>2958465||t<0)return null;var a=t|0,n=Math.floor(86400*(t-a)),i=0,l=[],o={D:a,T:n,u:86400*(t-a)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),s&&s.date1904&&(a+=1462),o.u>.9999&&(o.u=0,++n==86400&&(o.T=n=0,++a,++o.D)),a===60)l=r?[1317,10,29]:[1900,2,29],i=3;else if(a===0)l=r?[1317,8,29]:[1900,1,0],i=6;else{a>60&&--a;var c=new Date(1900,0,1);c.setDate(c.getDate()+a-1),l=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),a<60&&(i=(i+6)%7),r&&(i=_S(c,l))}return o.y=l[0],o.m=l[1],o.d=l[2],o.S=n%60,n=Math.floor(n/60),o.M=n%60,n=Math.floor(n/60),o.H=n,o.q=i,o}var Qb=new Date(1899,11,31,0,0,0),wS=Qb.getTime(),NS=new Date(1900,2,1,0,0,0);function Zb(t,s){var r=t.getTime();return s?r-=1461*24*60*60*1e3:t>=NS&&(r+=24*60*60*1e3),(r-(wS+(t.getTimezoneOffset()-Qb.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function Nm(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function kS(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function SS(t){var s=t<0?12:11,r=Nm(t.toFixed(12));return r.length<=s||(r=t.toPrecision(10),r.length<=s)?r:t.toExponential(5)}function CS(t){var s=Nm(t.toFixed(11));return s.length>(t<0?12:11)||s==="0"||s==="-0"?t.toPrecision(6):s}function Co(t){var s=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return s>=-4&&s<=-1?r=t.toPrecision(10+s):Math.abs(s)<=9?r=SS(t):s===10?r=t.toFixed(10).substr(0,12):r=CS(t),Nm(kS(r.toUpperCase()))}function ii(t,s){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):Co(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Br(14,Zb(t,s&&s.date1904),s)}throw new Error("unsupported value in General format: "+t)}function _S(t,s){s[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function TS(t,s,r,a){var n="",i=0,l=0,o=r.y,c,d=0;switch(t){case 98:o=r.y+543;case 121:switch(s.length){case 1:case 2:c=o%100,d=2;break;default:c=o%1e4,d=4;break}break;case 109:switch(s.length){case 1:case 2:c=r.m,d=s.length;break;case 3:return F0[r.m-1][1];case 5:return F0[r.m-1][0];default:return F0[r.m-1][2]}break;case 100:switch(s.length){case 1:case 2:c=r.d,d=s.length;break;case 3:return zf[r.q][0];default:return zf[r.q][1]}break;case 104:switch(s.length){case 1:case 2:c=1+(r.H+11)%12,d=s.length;break;default:throw"bad hour format: "+s}break;case 72:switch(s.length){case 1:case 2:c=r.H,d=s.length;break;default:throw"bad hour format: "+s}break;case 77:switch(s.length){case 1:case 2:c=r.M,d=s.length;break;default:throw"bad minute format: "+s}break;case 115:if(s!="s"&&s!="ss"&&s!=".0"&&s!=".00"&&s!=".000")throw"bad second format: "+s;return r.u===0&&(s=="s"||s=="ss")?ea(r.S,s.length):(a>=2?l=a===3?1e3:100:l=a===1?10:1,i=Math.round(l*(r.S+r.u)),i>=60*l&&(i=0),s==="s"?i===0?"0":""+i/l:(n=ea(i,2+a),s==="ss"?n.substr(0,2):"."+n.substr(2,s.length-1)));case 90:switch(s){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+s}d=s.length===3?1:2;break;case 101:c=o,d=1;break}var u=d>0?ea(c,d):"";return u}function dn(t){var s=3;if(t.length<=s)return t;for(var r=t.length%s,a=t.substr(0,r);r!=t.length;r+=s)a+=(a.length>0?",":"")+t.substr(r,s);return a}var ev=/%/g;function ES(t,s,r){var a=s.replace(ev,""),n=s.length-a.length;return La(t,a,r*Math.pow(10,2*n))+Jt("%",n)}function AS(t,s,r){for(var a=s.length-1;s.charCodeAt(a-1)===44;)--a;return La(t,s.substr(0,a),r/Math.pow(10,3*(s.length-a)))}function tv(t,s){var r,a=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+tv(t,-s);var n=t.indexOf(".");n===-1&&(n=t.indexOf("E"));var i=Math.floor(Math.log(s)*Math.LOG10E)%n;if(i<0&&(i+=n),r=(s/Math.pow(10,i)).toPrecision(a+1+(n+i)%n),r.indexOf("e")===-1){var l=Math.floor(Math.log(s)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+i):r+="E+"+(l-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,n)+"."+r.substr(2+n),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,d,u){return c+d+u.substr(0,(n+i)%n)+"."+u.substr(i)+"E"})}else r=s.toExponential(a);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var sv=/# (\?+)( ?)\/( ?)(\d+)/;function FS(t,s,r){var a=parseInt(t[4],10),n=Math.round(s*a),i=Math.floor(n/a),l=n-i*a,o=a;return r+(i===0?"":""+i)+" "+(l===0?Jt(" ",t[1].length+1+t[4].length):wm(l,t[1].length)+t[2]+"/"+t[3]+ea(o,t[4].length))}function PS(t,s,r){return r+(s===0?"":""+s)+Jt(" ",t[1].length+2+t[4].length)}var rv=/^#*0*\.([0#]+)/,av=/\).*[0#]/,nv=/\(###\) ###\\?-####/;function qs(t){for(var s="",r,a=0;a!=t.length;++a)switch(r=t.charCodeAt(a)){case 35:break;case 63:s+=" ";break;case 48:s+="0";break;default:s+=String.fromCharCode(r)}return s}function Vf(t,s){var r=Math.pow(10,s);return""+Math.round(t*r)/r}function Hf(t,s){var r=t-Math.floor(t),a=Math.pow(10,s);return s<(""+Math.round(r*a)).length?0:Math.round(r*a)}function DS(t,s){return s<(""+Math.round((t-Math.floor(t))*Math.pow(10,s))).length?1:0}function RS(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Tr(t,s,r){if(t.charCodeAt(0)===40&&!s.match(av)){var a=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Tr("n",a,r):"("+Tr("n",a,-r)+")"}if(s.charCodeAt(s.length-1)===44)return AS(t,s,r);if(s.indexOf("%")!==-1)return ES(t,s,r);if(s.indexOf("E")!==-1)return tv(s,r);if(s.charCodeAt(0)===36)return"$"+Tr(t,s.substr(s.charAt(1)==" "?2:1),r);var n,i,l,o,c=Math.abs(r),d=r<0?"-":"";if(s.match(/^00+$/))return d+vi(c,s.length);if(s.match(/^[#?]+$/))return n=vi(r,0),n==="0"&&(n=""),n.length>s.length?n:qs(s.substr(0,s.length-n.length))+n;if(i=s.match(sv))return FS(i,c,d);if(s.match(/^#+0+$/))return d+vi(c,s.length-s.indexOf("0"));if(i=s.match(rv))return n=Vf(r,i[1].length).replace(/^([^\.]+)$/,"$1."+qs(i[1])).replace(/\.$/,"."+qs(i[1])).replace(/\.(\d*)$/,function(x,h){return"."+h+Jt("0",qs(i[1]).length-h.length)}),s.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),i=s.match(/^(0*)\.(#*)$/))return d+Vf(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=s.match(/^#{1,3},##0(\.?)$/))return d+dn(vi(c,0));if(i=s.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Tr(t,s,-r):dn(""+(Math.floor(r)+DS(r,i[1].length)))+"."+ea(Hf(r,i[1].length),i[1].length);if(i=s.match(/^#,#*,#0/))return Tr(t,s.replace(/^#,#*,/,""),r);if(i=s.match(/^([0#]+)(\\?-([0#]+))+$/))return n=Wi(Tr(t,s.replace(/[\\-]/g,""),r)),l=0,Wi(Wi(s.replace(/\\/g,"")).replace(/[0#]/g,function(x){return l<n.length?n.charAt(l++):x==="0"?"0":""}));if(s.match(nv))return n=Tr(t,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var u="";if(i=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=pd(c,Math.pow(10,l)-1,!1),n=""+d,u=La("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),n+=u+i[2]+"/"+i[3],u=hd(o[2],l),u.length<i[4].length&&(u=qs(i[4].substr(i[4].length-u.length))+u),n+=u,n;if(i=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=pd(c,Math.pow(10,l)-1,!0),d+(o[0]||(o[1]?"":"0"))+" "+(o[1]?wm(o[1],l)+i[2]+"/"+i[3]+hd(o[2],l):Jt(" ",2*l+1+i[2].length+i[3].length));if(i=s.match(/^[#0?]+$/))return n=vi(r,0),s.length<=n.length?n:qs(s.substr(0,s.length-n.length))+n;if(i=s.match(/^([#0?]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=n.indexOf(".");var p=s.indexOf(".")-l,f=s.length-n.length-p;return qs(s.substr(0,p)+n+s.substr(s.length-f))}if(i=s.match(/^00,000\.([#0]*0)$/))return l=Hf(r,i[1].length),r<0?"-"+Tr(t,s,-r):dn(RS(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?ea(0,3-x.length):"")+x})+"."+ea(l,i[1].length);switch(s){case"###,##0.00":return Tr(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=dn(vi(c,0));return g!=="0"?d+g:"";case"###,###.00":return Tr(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Tr(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+s+"|")}function LS(t,s,r){for(var a=s.length-1;s.charCodeAt(a-1)===44;)--a;return La(t,s.substr(0,a),r/Math.pow(10,3*(s.length-a)))}function OS(t,s,r){var a=s.replace(ev,""),n=s.length-a.length;return La(t,a,r*Math.pow(10,2*n))+Jt("%",n)}function iv(t,s){var r,a=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+iv(t,-s);var n=t.indexOf(".");n===-1&&(n=t.indexOf("E"));var i=Math.floor(Math.log(s)*Math.LOG10E)%n;if(i<0&&(i+=n),r=(s/Math.pow(10,i)).toPrecision(a+1+(n+i)%n),!r.match(/[Ee]/)){var l=Math.floor(Math.log(s)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+i):r+="E+"+(l-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,d,u){return c+d+u.substr(0,(n+i)%n)+"."+u.substr(i)+"E"})}else r=s.toExponential(a);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function da(t,s,r){if(t.charCodeAt(0)===40&&!s.match(av)){var a=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?da("n",a,r):"("+da("n",a,-r)+")"}if(s.charCodeAt(s.length-1)===44)return LS(t,s,r);if(s.indexOf("%")!==-1)return OS(t,s,r);if(s.indexOf("E")!==-1)return iv(s,r);if(s.charCodeAt(0)===36)return"$"+da(t,s.substr(s.charAt(1)==" "?2:1),r);var n,i,l,o,c=Math.abs(r),d=r<0?"-":"";if(s.match(/^00+$/))return d+ea(c,s.length);if(s.match(/^[#?]+$/))return n=""+r,r===0&&(n=""),n.length>s.length?n:qs(s.substr(0,s.length-n.length))+n;if(i=s.match(sv))return PS(i,c,d);if(s.match(/^#+0+$/))return d+ea(c,s.length-s.indexOf("0"));if(i=s.match(rv))return n=(""+r).replace(/^([^\.]+)$/,"$1."+qs(i[1])).replace(/\.$/,"."+qs(i[1])),n=n.replace(/\.(\d*)$/,function(x,h){return"."+h+Jt("0",qs(i[1]).length-h.length)}),s.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),i=s.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=s.match(/^#{1,3},##0(\.?)$/))return d+dn(""+c);if(i=s.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+da(t,s,-r):dn(""+r)+"."+Jt("0",i[1].length);if(i=s.match(/^#,#*,#0/))return da(t,s.replace(/^#,#*,/,""),r);if(i=s.match(/^([0#]+)(\\?-([0#]+))+$/))return n=Wi(da(t,s.replace(/[\\-]/g,""),r)),l=0,Wi(Wi(s.replace(/\\/g,"")).replace(/[0#]/g,function(x){return l<n.length?n.charAt(l++):x==="0"?"0":""}));if(s.match(nv))return n=da(t,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var u="";if(i=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=pd(c,Math.pow(10,l)-1,!1),n=""+d,u=La("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),n+=u+i[2]+"/"+i[3],u=hd(o[2],l),u.length<i[4].length&&(u=qs(i[4].substr(i[4].length-u.length))+u),n+=u,n;if(i=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=pd(c,Math.pow(10,l)-1,!0),d+(o[0]||(o[1]?"":"0"))+" "+(o[1]?wm(o[1],l)+i[2]+"/"+i[3]+hd(o[2],l):Jt(" ",2*l+1+i[2].length+i[3].length));if(i=s.match(/^[#0?]+$/))return n=""+r,s.length<=n.length?n:qs(s.substr(0,s.length-n.length))+n;if(i=s.match(/^([#0]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=n.indexOf(".");var p=s.indexOf(".")-l,f=s.length-n.length-p;return qs(s.substr(0,p)+n+s.substr(s.length-f))}if(i=s.match(/^00,000\.([#0]*0)$/))return r<0?"-"+da(t,s,-r):dn(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?ea(0,3-x.length):"")+x})+"."+ea(0,i[1].length);switch(s){case"###,###":case"##,###":case"#,###":var g=dn(""+c);return g!=="0"?d+g:"";default:if(s.match(/\.[0#?]*$/))return da(t,s.slice(0,s.lastIndexOf(".")),r)+qs(s.slice(s.lastIndexOf(".")))}throw new Error("unsupported format |"+s+"|")}function La(t,s,r){return(r|0)===r?da(t,s,r):Tr(t,s,r)}function IS(t){for(var s=[],r=!1,a=0,n=0;a<t.length;++a)switch(t.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:s[s.length]=t.substr(n,a-n),n=a+1}if(s[s.length]=t.substr(n),r===!0)throw new Error("Format |"+t+"| unterminated string ");return s}var lv=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function cl(t){for(var s=0,r="",a="";s<t.length;)switch(r=t.charAt(s)){case"G":fd(t,s)&&(s+=6),s++;break;case'"':for(;t.charCodeAt(++s)!==34&&s<t.length;);++s;break;case"\\":s+=2;break;case"_":s+=2;break;case"@":++s;break;case"B":case"b":if(t.charAt(s+1)==="1"||t.charAt(s+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(s,3).toUpperCase()==="A/P"||t.substr(s,5).toUpperCase()==="AM/PM"||t.substr(s,5).toUpperCase()==="/")return!0;++s;break;case"[":for(a=r;t.charAt(s++)!=="]"&&s<t.length;)a+=t.charAt(s);if(a.match(lv))return!0;break;case".":case"0":case"#":for(;s<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++s))>-1||r=="\\"&&t.charAt(s+1)=="-"&&"0#".indexOf(t.charAt(s+2))>-1););break;case"?":for(;t.charAt(++s)===r;);break;case"*":++s,(t.charAt(s)==" "||t.charAt(s)=="*")&&++s;break;case"(":case")":++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;s<t.length&&"0123456789".indexOf(t.charAt(++s))>-1;);break;case" ":++s;break;default:++s;break}return!1}function MS(t,s,r,a){for(var n=[],i="",l=0,o="",c="t",d,u,p,f="H";l<t.length;)switch(o=t.charAt(l)){case"G":if(!fd(t,l))throw new Error("unrecognized character "+o+" in "+t);n[n.length]={t:"G",v:"General"},l+=7;break;case'"':for(i="";(p=t.charCodeAt(++l))!==34&&l<t.length;)i+=String.fromCharCode(p);n[n.length]={t:"t",v:i},++l;break;case"\\":var g=t.charAt(++l),x=g==="("||g===")"?g:"t";n[n.length]={t:x,v:g},++l;break;case"_":n[n.length]={t:"t",v:" "},l+=2;break;case"@":n[n.length]={t:"T",v:s},++l;break;case"B":case"b":if(t.charAt(l+1)==="1"||t.charAt(l+1)==="2"){if(d==null&&(d=Hn(s,r,t.charAt(l+1)==="2"),d==null))return"";n[n.length]={t:"X",v:t.substr(l,2)},c=o,l+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(s<0||d==null&&(d=Hn(s,r),d==null))return"";for(i=o;++l<t.length&&t.charAt(l).toLowerCase()===o;)i+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=f),n[n.length]={t:o,v:i},c=o;break;case"A":case"a":case"":var h={t:o,v:o};if(d==null&&(d=Hn(s,r)),t.substr(l,3).toUpperCase()==="A/P"?(d!=null&&(h.v=d.H>=12?"P":"A"),h.t="T",f="h",l+=3):t.substr(l,5).toUpperCase()==="AM/PM"?(d!=null&&(h.v=d.H>=12?"PM":"AM"),h.t="T",l+=5,f="h"):t.substr(l,5).toUpperCase()==="/"?(d!=null&&(h.v=d.H>=12?"":""),h.t="T",l+=5,f="h"):(h.t="t",++l),d==null&&h.t==="T")return"";n[n.length]=h,c=o;break;case"[":for(i=o;t.charAt(l++)!=="]"&&l<t.length;)i+=t.charAt(l);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(lv)){if(d==null&&(d=Hn(s,r),d==null))return"";n[n.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",cl(t)||(n[n.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=o;++l<t.length&&(o=t.charAt(l))==="0";)i+=o;n[n.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++l<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(l))>-1;)i+=o;n[n.length]={t:"n",v:i};break;case"?":for(i=o;t.charAt(++l)===o;)i+=o;n[n.length]={t:o,v:i},c=o;break;case"*":++l,(t.charAt(l)==" "||t.charAt(l)=="*")&&++l;break;case"(":case")":n[n.length]={t:a===1?"t":o,v:o},++l;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;l<t.length&&"0123456789".indexOf(t.charAt(++l))>-1;)i+=t.charAt(l);n[n.length]={t:"D",v:i};break;case" ":n[n.length]={t:o,v:o},++l;break;case"$":n[n.length]={t:"t",v:"$"},++l;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);n[n.length]={t:"t",v:o},++l;break}var m=0,j=0,v;for(l=n.length-1,c="t";l>=0;--l)switch(n[l].t){case"h":case"H":n[l].t=f,c="h",m<1&&(m=1);break;case"s":(v=n[l].v.match(/\.0+$/))&&(j=Math.max(j,v[0].length-1)),m<3&&(m=3);case"d":case"y":case"M":case"e":c=n[l].t;break;case"m":c==="s"&&(n[l].t="M",m<2&&(m=2));break;case"X":break;case"Z":m<1&&n[l].v.match(/[Hh]/)&&(m=1),m<2&&n[l].v.match(/[Mm]/)&&(m=2),m<3&&n[l].v.match(/[Ss]/)&&(m=3)}switch(m){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var N="",S;for(l=0;l<n.length;++l)switch(n[l].t){case"t":case"T":case" ":case"D":break;case"X":n[l].v="",n[l].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[l].v=TS(n[l].t.charCodeAt(0),n[l].v,d,j),n[l].t="t";break;case"n":case"?":for(S=l+1;n[S]!=null&&((o=n[S].t)==="?"||o==="D"||(o===" "||o==="t")&&n[S+1]!=null&&(n[S+1].t==="?"||n[S+1].t==="t"&&n[S+1].v==="/")||n[l].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(n[S].v==="/"||n[S].v===" "&&n[S+1]!=null&&n[S+1].t=="?"));)n[l].v+=n[S].v,n[S]={v:"",t:";"},++S;N+=n[l].v,l=S-1;break;case"G":n[l].t="t",n[l].v=ii(s,r);break}var A="",T,k;if(N.length>0){N.charCodeAt(0)==40?(T=s<0&&N.charCodeAt(0)===45?-s:s,k=La("n",N,T)):(T=s<0&&a>1?-s:s,k=La("n",N,T),T<0&&n[0]&&n[0].t=="t"&&(k=k.substr(1),n[0].v="-"+n[0].v)),S=k.length-1;var _=n.length;for(l=0;l<n.length;++l)if(n[l]!=null&&n[l].t!="t"&&n[l].v.indexOf(".")>-1){_=l;break}var y=n.length;if(_===n.length&&k.indexOf("E")===-1){for(l=n.length-1;l>=0;--l)n[l]==null||"n?".indexOf(n[l].t)===-1||(S>=n[l].v.length-1?(S-=n[l].v.length,n[l].v=k.substr(S+1,n[l].v.length)):S<0?n[l].v="":(n[l].v=k.substr(0,S+1),S=-1),n[l].t="t",y=l);S>=0&&y<n.length&&(n[y].v=k.substr(0,S+1)+n[y].v)}else if(_!==n.length&&k.indexOf("E")===-1){for(S=k.indexOf(".")-1,l=_;l>=0;--l)if(!(n[l]==null||"n?".indexOf(n[l].t)===-1)){for(u=n[l].v.indexOf(".")>-1&&l===_?n[l].v.indexOf(".")-1:n[l].v.length-1,A=n[l].v.substr(u+1);u>=0;--u)S>=0&&(n[l].v.charAt(u)==="0"||n[l].v.charAt(u)==="#")&&(A=k.charAt(S--)+A);n[l].v=A,n[l].t="t",y=l}for(S>=0&&y<n.length&&(n[y].v=k.substr(0,S+1)+n[y].v),S=k.indexOf(".")+1,l=_;l<n.length;++l)if(!(n[l]==null||"n?(".indexOf(n[l].t)===-1&&l!==_)){for(u=n[l].v.indexOf(".")>-1&&l===_?n[l].v.indexOf(".")+1:0,A=n[l].v.substr(0,u);u<n[l].v.length;++u)S<k.length&&(A+=k.charAt(S++));n[l].v=A,n[l].t="t",y=l}}}for(l=0;l<n.length;++l)n[l]!=null&&"n?".indexOf(n[l].t)>-1&&(T=a>1&&s<0&&l>0&&n[l-1].v==="-"?-s:s,n[l].v=La(n[l].t,n[l].v,T),n[l].t="t");var w="";for(l=0;l!==n.length;++l)n[l]!=null&&(w+=n[l].v);return w}var Gf=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function qf(t,s){if(s==null)return!1;var r=parseFloat(s[2]);switch(s[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function BS(t,s){var r=IS(t),a=r.length,n=r[a-1].indexOf("@");if(a<4&&n>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof s!="number")return[4,r.length===4||n>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=n>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=n>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=n>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=s>0?r[0]:s<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var l=r[0].match(Gf),o=r[1].match(Gf);return qf(s,l)?[a,r[0]]:qf(s,o)?[a,r[1]]:[a,r[l!=null&&o!=null?2:1]]}return[a,i]}function Br(t,s,r){r==null&&(r={});var a="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?a=r.dateNF:a=t;break;case"number":t==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:tt)[t],a==null&&(a=r.table&&r.table[Wf[t]]||tt[Wf[t]]),a==null&&(a=jS[t]||"General");break}if(fd(a,0))return ii(s,r);s instanceof Date&&(s=Zb(s,r.date1904));var n=BS(a,s);if(fd(n[1]))return ii(s,r);if(s===!0)s="TRUE";else if(s===!1)s="FALSE";else if(s===""||s==null)return"";return MS(n[1],s,r,n[0])}function Yn(t,s){if(typeof s!="number"){s=+s||-1;for(var r=0;r<392;++r){if(tt[r]==null){s<0&&(s=r);continue}if(tt[r]==t){s=r;break}}s<0&&(s=391)}return tt[s]=t,s}function ov(){tt=vS()}var $S={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},cv=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function US(t){var s=typeof t=="number"?tt[t]:t;return s=s.replace(cv,"(\\d+)"),new RegExp("^"+s+"$")}function zS(t,s,r){var a=-1,n=-1,i=-1,l=-1,o=-1,c=-1;(s.match(cv)||[]).forEach(function(p,f){var g=parseInt(r[f+1],10);switch(p.toLowerCase().charAt(0)){case"y":a=g;break;case"d":i=g;break;case"h":l=g;break;case"s":c=g;break;case"m":l>=0?o=g:n=g;break}}),c>=0&&o==-1&&n>=0&&(o=n,n=-1);var d=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return l==-1&&o==-1&&c==-1?d:a==-1&&n==-1&&i==-1?u:d+"T"+u}var WS=function(){var t={};t.version="1.2.0";function s(){for(var k=0,_=new Array(256),y=0;y!=256;++y)k=y,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,_[y]=k;return typeof Int32Array<"u"?new Int32Array(_):_}var r=s();function a(k){var _=0,y=0,w=0,R=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(w=0;w!=256;++w)R[w]=k[w];for(w=0;w!=256;++w)for(y=k[w],_=256+w;_<4096;_+=256)y=R[_]=y>>>8^k[y&255];var P=[];for(w=1;w!=16;++w)P[w-1]=typeof Int32Array<"u"?R.subarray(w*256,w*256+256):R.slice(w*256,w*256+256);return P}var n=a(r),i=n[0],l=n[1],o=n[2],c=n[3],d=n[4],u=n[5],p=n[6],f=n[7],g=n[8],x=n[9],h=n[10],m=n[11],j=n[12],v=n[13],N=n[14];function S(k,_){for(var y=_^-1,w=0,R=k.length;w<R;)y=y>>>8^r[(y^k.charCodeAt(w++))&255];return~y}function A(k,_){for(var y=_^-1,w=k.length-15,R=0;R<w;)y=N[k[R++]^y&255]^v[k[R++]^y>>8&255]^j[k[R++]^y>>16&255]^m[k[R++]^y>>>24]^h[k[R++]]^x[k[R++]]^g[k[R++]]^f[k[R++]]^p[k[R++]]^u[k[R++]]^d[k[R++]]^c[k[R++]]^o[k[R++]]^l[k[R++]]^i[k[R++]]^r[k[R++]];for(w+=15;R<w;)y=y>>>8^r[(y^k[R++])&255];return~y}function T(k,_){for(var y=_^-1,w=0,R=k.length,P=0,H=0;w<R;)P=k.charCodeAt(w++),P<128?y=y>>>8^r[(y^P)&255]:P<2048?(y=y>>>8^r[(y^(192|P>>6&31))&255],y=y>>>8^r[(y^(128|P&63))&255]):P>=55296&&P<57344?(P=(P&1023)+64,H=k.charCodeAt(w++)&1023,y=y>>>8^r[(y^(240|P>>8&7))&255],y=y>>>8^r[(y^(128|P>>2&63))&255],y=y>>>8^r[(y^(128|H>>6&15|(P&3)<<4))&255],y=y>>>8^r[(y^(128|H&63))&255]):(y=y>>>8^r[(y^(224|P>>12&15))&255],y=y>>>8^r[(y^(128|P>>6&63))&255],y=y>>>8^r[(y^(128|P&63))&255]);return~y}return t.table=r,t.bstr=S,t.buf=A,t.str=T,t}(),bt=function(){var s={};s.version="1.2.1";function r(M,J){for(var E=M.split("/"),C=J.split("/"),B=0,G=0,Z=Math.min(E.length,C.length);B<Z;++B){if(G=E[B].length-C[B].length)return G;if(E[B]!=C[B])return E[B]<C[B]?-1:1}return E.length-C.length}function a(M){if(M.charAt(M.length-1)=="/")return M.slice(0,-1).indexOf("/")===-1?M:a(M.slice(0,-1));var J=M.lastIndexOf("/");return J===-1?M:M.slice(0,J+1)}function n(M){if(M.charAt(M.length-1)=="/")return n(M.slice(0,-1));var J=M.lastIndexOf("/");return J===-1?M:M.slice(J+1)}function i(M,J){typeof J=="string"&&(J=new Date(J));var E=J.getHours();E=E<<6|J.getMinutes(),E=E<<5|J.getSeconds()>>>1,M.write_shift(2,E);var C=J.getFullYear()-1980;C=C<<4|J.getMonth()+1,C=C<<5|J.getDate(),M.write_shift(2,C)}function l(M){var J=M.read_shift(2)&65535,E=M.read_shift(2)&65535,C=new Date,B=E&31;E>>>=5;var G=E&15;E>>>=4,C.setMilliseconds(0),C.setFullYear(E+1980),C.setMonth(G-1),C.setDate(B);var Z=J&31;J>>>=5;var se=J&63;return J>>>=6,C.setHours(J),C.setMinutes(se),C.setSeconds(Z<<1),C}function o(M){_s(M,0);for(var J={},E=0;M.l<=M.length-4;){var C=M.read_shift(2),B=M.read_shift(2),G=M.l+B,Z={};switch(C){case 21589:E=M.read_shift(1),E&1&&(Z.mtime=M.read_shift(4)),B>5&&(E&2&&(Z.atime=M.read_shift(4)),E&4&&(Z.ctime=M.read_shift(4))),Z.mtime&&(Z.mt=new Date(Z.mtime*1e3));break}M.l=G,J[C]=Z}return J}var c;function d(){return c||(c={})}function u(M,J){if(M[0]==80&&M[1]==75)return me(M,J);if((M[0]|32)==109&&(M[1]|32)==105)return nt(M,J);if(M.length<512)throw new Error("CFB file size "+M.length+" < 512");var E=3,C=512,B=0,G=0,Z=0,se=0,oe=0,ce=[],ie=M.slice(0,512);_s(ie,0);var ue=p(ie);switch(E=ue[0],E){case 3:C=512;break;case 4:C=4096;break;case 0:if(ue[1]==0)return me(M,J);default:throw new Error("Major Version: Expected 3 or 4 saw "+E)}C!==512&&(ie=M.slice(0,C),_s(ie,28));var we=M.slice(0,C);f(ie,E);var Fe=ie.read_shift(4,"i");if(E===3&&Fe!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Fe);ie.l+=4,Z=ie.read_shift(4,"i"),ie.l+=4,ie.chk("00100000","Mini Stream Cutoff Size: "),se=ie.read_shift(4,"i"),B=ie.read_shift(4,"i"),oe=ie.read_shift(4,"i"),G=ie.read_shift(4,"i");for(var je=-1,Ce=0;Ce<109&&(je=ie.read_shift(4,"i"),!(je<0));++Ce)ce[Ce]=je;var Ue=g(M,C);m(oe,G,Ue,C,ce);var mt=v(Ue,Z,ce,C);mt[Z].name="!Directory",B>0&&se!==H&&(mt[se].name="!MiniFAT"),mt[ce[0]].name="!FAT",mt.fat_addrs=ce,mt.ssz=C;var it={},Et=[],Ps=[],Xe=[];N(Z,mt,Ue,Et,B,it,Ps,se),x(Ps,Xe,Et),Et.shift();var yt={FileIndex:Ps,FullPaths:Xe};return J&&J.raw&&(yt.raw={header:we,sectors:Ue}),yt}function p(M){if(M[M.l]==80&&M[M.l+1]==75)return[0,0];M.chk(L,"Header Signature: "),M.l+=16;var J=M.read_shift(2,"u");return[M.read_shift(2,"u"),J]}function f(M,J){var E=9;switch(M.l+=2,E=M.read_shift(2)){case 9:if(J!=3)throw new Error("Sector Shift: Expected 9 saw "+E);break;case 12:if(J!=4)throw new Error("Sector Shift: Expected 12 saw "+E);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+E)}M.chk("0600","Mini Sector Shift: "),M.chk("000000000000","Reserved: ")}function g(M,J){for(var E=Math.ceil(M.length/J)-1,C=[],B=1;B<E;++B)C[B-1]=M.slice(B*J,(B+1)*J);return C[E-1]=M.slice(E*J),C}function x(M,J,E){for(var C=0,B=0,G=0,Z=0,se=0,oe=E.length,ce=[],ie=[];C<oe;++C)ce[C]=ie[C]=C,J[C]=E[C];for(;se<ie.length;++se)C=ie[se],B=M[C].L,G=M[C].R,Z=M[C].C,ce[C]===C&&(B!==-1&&ce[B]!==B&&(ce[C]=ce[B]),G!==-1&&ce[G]!==G&&(ce[C]=ce[G])),Z!==-1&&(ce[Z]=C),B!==-1&&C!=ce[C]&&(ce[B]=ce[C],ie.lastIndexOf(B)<se&&ie.push(B)),G!==-1&&C!=ce[C]&&(ce[G]=ce[C],ie.lastIndexOf(G)<se&&ie.push(G));for(C=1;C<oe;++C)ce[C]===C&&(G!==-1&&ce[G]!==G?ce[C]=ce[G]:B!==-1&&ce[B]!==B&&(ce[C]=ce[B]));for(C=1;C<oe;++C)if(M[C].type!==0){if(se=C,se!=ce[se])do se=ce[se],J[C]=J[se]+"/"+J[C];while(se!==0&&ce[se]!==-1&&se!=ce[se]);ce[C]=-1}for(J[0]+="/",C=1;C<oe;++C)M[C].type!==2&&(J[C]+="/")}function h(M,J,E){for(var C=M.start,B=M.size,G=[],Z=C;E&&B>0&&Z>=0;)G.push(J.slice(Z*P,Z*P+P)),B-=P,Z=$n(E,Z*4);return G.length===0?us(0):an(G).slice(0,M.size)}function m(M,J,E,C,B){var G=H;if(M===H){if(J!==0)throw new Error("DIFAT chain shorter than expected")}else if(M!==-1){var Z=E[M],se=(C>>>2)-1;if(!Z)return;for(var oe=0;oe<se&&(G=$n(Z,oe*4))!==H;++oe)B.push(G);m($n(Z,C-4),J-1,E,C,B)}}function j(M,J,E,C,B){var G=[],Z=[];B||(B=[]);var se=C-1,oe=0,ce=0;for(oe=J;oe>=0;){B[oe]=!0,G[G.length]=oe,Z.push(M[oe]);var ie=E[Math.floor(oe*4/C)];if(ce=oe*4&se,C<4+ce)throw new Error("FAT boundary crossed: "+oe+" 4 "+C);if(!M[ie])break;oe=$n(M[ie],ce)}return{nodes:G,data:rp([Z])}}function v(M,J,E,C){var B=M.length,G=[],Z=[],se=[],oe=[],ce=C-1,ie=0,ue=0,we=0,Fe=0;for(ie=0;ie<B;++ie)if(se=[],we=ie+J,we>=B&&(we-=B),!Z[we]){oe=[];var je=[];for(ue=we;ue>=0;){je[ue]=!0,Z[ue]=!0,se[se.length]=ue,oe.push(M[ue]);var Ce=E[Math.floor(ue*4/C)];if(Fe=ue*4&ce,C<4+Fe)throw new Error("FAT boundary crossed: "+ue+" 4 "+C);if(!M[Ce]||(ue=$n(M[Ce],Fe),je[ue]))break}G[we]={nodes:se,data:rp([oe])}}return G}function N(M,J,E,C,B,G,Z,se){for(var oe=0,ce=C.length?2:0,ie=J[M].data,ue=0,we=0,Fe;ue<ie.length;ue+=128){var je=ie.slice(ue,ue+128);_s(je,64),we=je.read_shift(2),Fe=Tm(je,0,we-ce),C.push(Fe);var Ce={name:Fe,type:je.read_shift(1),color:je.read_shift(1),L:je.read_shift(4,"i"),R:je.read_shift(4,"i"),C:je.read_shift(4,"i"),clsid:je.read_shift(16),state:je.read_shift(4,"i"),start:0,size:0},Ue=je.read_shift(2)+je.read_shift(2)+je.read_shift(2)+je.read_shift(2);Ue!==0&&(Ce.ct=S(je,je.l-8));var mt=je.read_shift(2)+je.read_shift(2)+je.read_shift(2)+je.read_shift(2);mt!==0&&(Ce.mt=S(je,je.l-8)),Ce.start=je.read_shift(4,"i"),Ce.size=je.read_shift(4,"i"),Ce.size<0&&Ce.start<0&&(Ce.size=Ce.type=0,Ce.start=H,Ce.name=""),Ce.type===5?(oe=Ce.start,B>0&&oe!==H&&(J[oe].name="!StreamData")):Ce.size>=4096?(Ce.storage="fat",J[Ce.start]===void 0&&(J[Ce.start]=j(E,Ce.start,J.fat_addrs,J.ssz)),J[Ce.start].name=Ce.name,Ce.content=J[Ce.start].data.slice(0,Ce.size)):(Ce.storage="minifat",Ce.size<0?Ce.size=0:oe!==H&&Ce.start!==H&&J[oe]&&(Ce.content=h(Ce,J[oe].data,(J[se]||{}).data))),Ce.content&&_s(Ce.content,0),G[Fe]=Ce,Z.push(Ce)}}function S(M,J){return new Date((gr(M,J+4)/1e7*Math.pow(2,32)+gr(M,J)/1e7-11644473600)*1e3)}function A(M,J){return d(),u(c.readFileSync(M),J)}function T(M,J){var E=J&&J.type;switch(E||gt&&Buffer.isBuffer(M)&&(E="buffer"),E||"base64"){case"file":return A(M,J);case"base64":return u(Qr(Nr(M)),J);case"binary":return u(Qr(M),J)}return u(M,J)}function k(M,J){var E=J||{},C=E.root||"Root Entry";if(M.FullPaths||(M.FullPaths=[]),M.FileIndex||(M.FileIndex=[]),M.FullPaths.length!==M.FileIndex.length)throw new Error("inconsistent CFB structure");M.FullPaths.length===0&&(M.FullPaths[0]=C+"/",M.FileIndex[0]={name:C,type:5}),E.CLSID&&(M.FileIndex[0].clsid=E.CLSID),_(M)}function _(M){var J="Sh33tJ5";if(!bt.find(M,"/"+J)){var E=us(4);E[0]=55,E[1]=E[3]=50,E[2]=54,M.FileIndex.push({name:J,type:2,content:E,size:4,L:69,R:69,C:69}),M.FullPaths.push(M.FullPaths[0]+J),y(M)}}function y(M,J){k(M);for(var E=!1,C=!1,B=M.FullPaths.length-1;B>=0;--B){var G=M.FileIndex[B];switch(G.type){case 0:C?E=!0:(M.FileIndex.pop(),M.FullPaths.pop());break;case 1:case 2:case 5:C=!0,isNaN(G.R*G.L*G.C)&&(E=!0),G.R>-1&&G.L>-1&&G.R==G.L&&(E=!0);break;default:E=!0;break}}if(!(!E&&!J)){var Z=new Date(1987,1,19),se=0,oe=Object.create?Object.create(null):{},ce=[];for(B=0;B<M.FullPaths.length;++B)oe[M.FullPaths[B]]=!0,M.FileIndex[B].type!==0&&ce.push([M.FullPaths[B],M.FileIndex[B]]);for(B=0;B<ce.length;++B){var ie=a(ce[B][0]);C=oe[ie],C||(ce.push([ie,{name:n(ie).replace("/",""),type:1,clsid:W,ct:Z,mt:Z,content:null}]),oe[ie]=!0)}for(ce.sort(function(Fe,je){return r(Fe[0],je[0])}),M.FullPaths=[],M.FileIndex=[],B=0;B<ce.length;++B)M.FullPaths[B]=ce[B][0],M.FileIndex[B]=ce[B][1];for(B=0;B<ce.length;++B){var ue=M.FileIndex[B],we=M.FullPaths[B];if(ue.name=n(we).replace("/",""),ue.L=ue.R=ue.C=-(ue.color=1),ue.size=ue.content?ue.content.length:0,ue.start=0,ue.clsid=ue.clsid||W,B===0)ue.C=ce.length>1?1:-1,ue.size=0,ue.type=5;else if(we.slice(-1)=="/"){for(se=B+1;se<ce.length&&a(M.FullPaths[se])!=we;++se);for(ue.C=se>=ce.length?-1:se,se=B+1;se<ce.length&&a(M.FullPaths[se])!=a(we);++se);ue.R=se>=ce.length?-1:se,ue.type=1}else a(M.FullPaths[B+1]||"")==a(we)&&(ue.R=B+1),ue.type=2}}}function w(M,J){var E=J||{};if(E.fileType=="mad")return ht(M,E);switch(y(M),E.fileType){case"zip":return ye(M,E)}var C=function(Fe){for(var je=0,Ce=0,Ue=0;Ue<Fe.FileIndex.length;++Ue){var mt=Fe.FileIndex[Ue];if(mt.content){var it=mt.content.length;it>0&&(it<4096?je+=it+63>>6:Ce+=it+511>>9)}}for(var Et=Fe.FullPaths.length+3>>2,Ps=je+7>>3,Xe=je+127>>7,yt=Ps+Ce+Et+Xe,wt=yt+127>>7,Lt=wt<=109?0:Math.ceil((wt-109)/127);yt+wt+Lt+127>>7>wt;)Lt=++wt<=109?0:Math.ceil((wt-109)/127);var Ke=[1,Lt,wt,Xe,Et,Ce,je,0];return Fe.FileIndex[0].size=je<<6,Ke[7]=(Fe.FileIndex[0].start=Ke[0]+Ke[1]+Ke[2]+Ke[3]+Ke[4]+Ke[5])+(Ke[6]+7>>3),Ke}(M),B=us(C[7]<<9),G=0,Z=0;{for(G=0;G<8;++G)B.write_shift(1,O[G]);for(G=0;G<8;++G)B.write_shift(2,0);for(B.write_shift(2,62),B.write_shift(2,3),B.write_shift(2,65534),B.write_shift(2,9),B.write_shift(2,6),G=0;G<3;++G)B.write_shift(2,0);for(B.write_shift(4,0),B.write_shift(4,C[2]),B.write_shift(4,C[0]+C[1]+C[2]+C[3]-1),B.write_shift(4,0),B.write_shift(4,4096),B.write_shift(4,C[3]?C[0]+C[1]+C[2]-1:H),B.write_shift(4,C[3]),B.write_shift(-4,C[1]?C[0]-1:H),B.write_shift(4,C[1]),G=0;G<109;++G)B.write_shift(-4,G<C[2]?C[1]+G:-1)}if(C[1])for(Z=0;Z<C[1];++Z){for(;G<236+Z*127;++G)B.write_shift(-4,G<C[2]?C[1]+G:-1);B.write_shift(-4,Z===C[1]-1?H:Z+1)}var se=function(Fe){for(Z+=Fe;G<Z-1;++G)B.write_shift(-4,G+1);Fe&&(++G,B.write_shift(-4,H))};for(Z=G=0,Z+=C[1];G<Z;++G)B.write_shift(-4,Q.DIFSECT);for(Z+=C[2];G<Z;++G)B.write_shift(-4,Q.FATSECT);se(C[3]),se(C[4]);for(var oe=0,ce=0,ie=M.FileIndex[0];oe<M.FileIndex.length;++oe)ie=M.FileIndex[oe],ie.content&&(ce=ie.content.length,!(ce<4096)&&(ie.start=Z,se(ce+511>>9)));for(se(C[6]+7>>3);B.l&511;)B.write_shift(-4,Q.ENDOFCHAIN);for(Z=G=0,oe=0;oe<M.FileIndex.length;++oe)ie=M.FileIndex[oe],ie.content&&(ce=ie.content.length,!(!ce||ce>=4096)&&(ie.start=Z,se(ce+63>>6)));for(;B.l&511;)B.write_shift(-4,Q.ENDOFCHAIN);for(G=0;G<C[4]<<2;++G){var ue=M.FullPaths[G];if(!ue||ue.length===0){for(oe=0;oe<17;++oe)B.write_shift(4,0);for(oe=0;oe<3;++oe)B.write_shift(4,-1);for(oe=0;oe<12;++oe)B.write_shift(4,0);continue}ie=M.FileIndex[G],G===0&&(ie.start=ie.size?ie.start-1:H);var we=G===0&&E.root||ie.name;if(ce=2*(we.length+1),B.write_shift(64,we,"utf16le"),B.write_shift(2,ce),B.write_shift(1,ie.type),B.write_shift(1,ie.color),B.write_shift(-4,ie.L),B.write_shift(-4,ie.R),B.write_shift(-4,ie.C),ie.clsid)B.write_shift(16,ie.clsid,"hex");else for(oe=0;oe<4;++oe)B.write_shift(4,0);B.write_shift(4,ie.state||0),B.write_shift(4,0),B.write_shift(4,0),B.write_shift(4,0),B.write_shift(4,0),B.write_shift(4,ie.start),B.write_shift(4,ie.size),B.write_shift(4,0)}for(G=1;G<M.FileIndex.length;++G)if(ie=M.FileIndex[G],ie.size>=4096)if(B.l=ie.start+1<<9,gt&&Buffer.isBuffer(ie.content))ie.content.copy(B,B.l,0,ie.size),B.l+=ie.size+511&-512;else{for(oe=0;oe<ie.size;++oe)B.write_shift(1,ie.content[oe]);for(;oe&511;++oe)B.write_shift(1,0)}for(G=1;G<M.FileIndex.length;++G)if(ie=M.FileIndex[G],ie.size>0&&ie.size<4096)if(gt&&Buffer.isBuffer(ie.content))ie.content.copy(B,B.l,0,ie.size),B.l+=ie.size+63&-64;else{for(oe=0;oe<ie.size;++oe)B.write_shift(1,ie.content[oe]);for(;oe&63;++oe)B.write_shift(1,0)}if(gt)B.l=B.length;else for(;B.l<B.length;)B.write_shift(1,0);return B}function R(M,J){var E=M.FullPaths.map(function(oe){return oe.toUpperCase()}),C=E.map(function(oe){var ce=oe.split("/");return ce[ce.length-(oe.slice(-1)=="/"?2:1)]}),B=!1;J.charCodeAt(0)===47?(B=!0,J=E[0].slice(0,-1)+J):B=J.indexOf("/")!==-1;var G=J.toUpperCase(),Z=B===!0?E.indexOf(G):C.indexOf(G);if(Z!==-1)return M.FileIndex[Z];var se=!G.match(Pl);for(G=G.replace(Qs,""),se&&(G=G.replace(Pl,"!")),Z=0;Z<E.length;++Z)if((se?E[Z].replace(Pl,"!"):E[Z]).replace(Qs,"")==G||(se?C[Z].replace(Pl,"!"):C[Z]).replace(Qs,"")==G)return M.FileIndex[Z];return null}var P=64,H=-2,L="d0cf11e0a1b11ae1",O=[208,207,17,224,161,177,26,225],W="00000000000000000000000000000000",Q={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:H,FREESECT:-1,HEADER_SIGNATURE:L,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:W,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function D(M,J,E){d();var C=w(M,E);c.writeFileSync(J,C)}function F(M){for(var J=new Array(M.length),E=0;E<M.length;++E)J[E]=String.fromCharCode(M[E]);return J.join("")}function V(M,J){var E=w(M,J);switch(J&&J.type||"buffer"){case"file":return d(),c.writeFileSync(J.filename,E),E;case"binary":return typeof E=="string"?E:F(E);case"base64":return Bf(typeof E=="string"?E:F(E));case"buffer":if(gt)return Buffer.isBuffer(E)?E:xi(E);case"array":return typeof E=="string"?Qr(E):E}return E}var te;function I(M){try{var J=M.InflateRaw,E=new J;if(E._processChunk(new Uint8Array([3,0]),E._finishFlushFlag),E.bytesRead)te=M;else throw new Error("zlib does not expose bytesRead")}catch(C){console.error("cannot use native zlib: "+(C.message||C))}}function U(M,J){if(!te)return Ur(M,J);var E=te.InflateRaw,C=new E,B=C._processChunk(M.slice(M.l),C._finishFlushFlag);return M.l+=C.bytesRead,B}function z(M){return te?te.deflateRawSync(M):Me(M)}var Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ne=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function q(M){var J=(M<<1|M<<11)&139536|(M<<5|M<<15)&558144;return(J>>16|J>>8|J)&255}for(var re=typeof Uint8Array<"u",xe=re?new Uint8Array(256):[],_e=0;_e<256;++_e)xe[_e]=q(_e);function X(M,J){var E=xe[M&255];return J<=8?E>>>8-J:(E=E<<8|xe[M>>8&255],J<=16?E>>>16-J:(E=E<<8|xe[M>>16&255],E>>>24-J))}function Ae(M,J){var E=J&7,C=J>>>3;return(M[C]|(E<=6?0:M[C+1]<<8))>>>E&3}function Ie(M,J){var E=J&7,C=J>>>3;return(M[C]|(E<=5?0:M[C+1]<<8))>>>E&7}function He(M,J){var E=J&7,C=J>>>3;return(M[C]|(E<=4?0:M[C+1]<<8))>>>E&15}function Le(M,J){var E=J&7,C=J>>>3;return(M[C]|(E<=3?0:M[C+1]<<8))>>>E&31}function ve(M,J){var E=J&7,C=J>>>3;return(M[C]|(E<=1?0:M[C+1]<<8))>>>E&127}function st(M,J,E){var C=J&7,B=J>>>3,G=(1<<E)-1,Z=M[B]>>>C;return E<8-C||(Z|=M[B+1]<<8-C,E<16-C)||(Z|=M[B+2]<<16-C,E<24-C)||(Z|=M[B+3]<<24-C),Z&G}function St(M,J,E){var C=J&7,B=J>>>3;return C<=5?M[B]|=(E&7)<<C:(M[B]|=E<<C&255,M[B+1]=(E&7)>>8-C),J+3}function fe(M,J,E){var C=J&7,B=J>>>3;return E=(E&1)<<C,M[B]|=E,J+1}function ae(M,J,E){var C=J&7,B=J>>>3;return E<<=C,M[B]|=E&255,E>>>=8,M[B+1]=E,J+8}function Be(M,J,E){var C=J&7,B=J>>>3;return E<<=C,M[B]|=E&255,E>>>=8,M[B+1]=E&255,M[B+2]=E>>>8,J+16}function Ct(M,J){var E=M.length,C=2*E>J?2*E:J+5,B=0;if(E>=J)return M;if(gt){var G=$f(C);if(M.copy)M.copy(G);else for(;B<M.length;++B)G[B]=M[B];return G}else if(re){var Z=new Uint8Array(C);if(Z.set)Z.set(M);else for(;B<E;++B)Z[B]=M[B];return Z}return M.length=C,M}function ct(M){for(var J=new Array(M),E=0;E<M;++E)J[E]=0;return J}function Tt(M,J,E){var C=1,B=0,G=0,Z=0,se=0,oe=M.length,ce=re?new Uint16Array(32):ct(32);for(G=0;G<32;++G)ce[G]=0;for(G=oe;G<E;++G)M[G]=0;oe=M.length;var ie=re?new Uint16Array(oe):ct(oe);for(G=0;G<oe;++G)ce[B=M[G]]++,C<B&&(C=B),ie[G]=0;for(ce[0]=0,G=1;G<=C;++G)ce[G+16]=se=se+ce[G-1]<<1;for(G=0;G<oe;++G)se=M[G],se!=0&&(ie[G]=ce[se+16]++);var ue=0;for(G=0;G<oe;++G)if(ue=M[G],ue!=0)for(se=X(ie[G],C)>>C-ue,Z=(1<<C+4-ue)-1;Z>=0;--Z)J[se|Z<<ue]=ue&15|G<<4;return C}var _t=re?new Uint16Array(512):ct(512),dt=re?new Uint16Array(32):ct(32);if(!re){for(var ut=0;ut<512;++ut)_t[ut]=0;for(ut=0;ut<32;++ut)dt[ut]=0}(function(){for(var M=[],J=0;J<32;J++)M.push(5);Tt(M,dt,32);var E=[];for(J=0;J<=143;J++)E.push(8);for(;J<=255;J++)E.push(9);for(;J<=279;J++)E.push(7);for(;J<=287;J++)E.push(8);Tt(E,_t,288)})();var pe=function(){for(var J=re?new Uint8Array(32768):[],E=0,C=0;E<ne.length-1;++E)for(;C<ne[E+1];++C)J[C]=E;for(;C<32768;++C)J[C]=29;var B=re?new Uint8Array(259):[];for(E=0,C=0;E<K.length-1;++E)for(;C<K[E+1];++C)B[C]=E;function G(se,oe){for(var ce=0;ce<se.length;){var ie=Math.min(65535,se.length-ce),ue=ce+ie==se.length;for(oe.write_shift(1,+ue),oe.write_shift(2,ie),oe.write_shift(2,~ie&65535);ie-- >0;)oe[oe.l++]=se[ce++]}return oe.l}function Z(se,oe){for(var ce=0,ie=0,ue=re?new Uint16Array(32768):[];ie<se.length;){var we=Math.min(65535,se.length-ie);if(we<10){for(ce=St(oe,ce,+(ie+we==se.length)),ce&7&&(ce+=8-(ce&7)),oe.l=ce/8|0,oe.write_shift(2,we),oe.write_shift(2,~we&65535);we-- >0;)oe[oe.l++]=se[ie++];ce=oe.l*8;continue}ce=St(oe,ce,+(ie+we==se.length)+2);for(var Fe=0;we-- >0;){var je=se[ie];Fe=(Fe<<5^je)&32767;var Ce=-1,Ue=0;if((Ce=ue[Fe])&&(Ce|=ie&-32768,Ce>ie&&(Ce-=32768),Ce<ie))for(;se[Ce+Ue]==se[ie+Ue]&&Ue<250;)++Ue;if(Ue>2){je=B[Ue],je<=22?ce=ae(oe,ce,xe[je+1]>>1)-1:(ae(oe,ce,3),ce+=5,ae(oe,ce,xe[je-23]>>5),ce+=3);var mt=je<8?0:je-4>>2;mt>0&&(Be(oe,ce,Ue-K[je]),ce+=mt),je=J[ie-Ce],ce=ae(oe,ce,xe[je]>>3),ce-=3;var it=je<4?0:je-2>>1;it>0&&(Be(oe,ce,ie-Ce-ne[je]),ce+=it);for(var Et=0;Et<Ue;++Et)ue[Fe]=ie&32767,Fe=(Fe<<5^se[ie])&32767,++ie;we-=Ue-1}else je<=143?je=je+48:ce=fe(oe,ce,1),ce=ae(oe,ce,xe[je]),ue[Fe]=ie&32767,++ie}ce=ae(oe,ce,0)-1}return oe.l=(ce+7)/8|0,oe.l}return function(oe,ce){return oe.length<8?G(oe,ce):Z(oe,ce)}}();function Me(M){var J=us(50+Math.floor(M.length*1.1)),E=pe(M,J);return J.slice(0,E)}var Je=re?new Uint16Array(32768):ct(32768),jt=re?new Uint16Array(32768):ct(32768),at=re?new Uint16Array(128):ct(128),Yt=1,ia=1;function Sa(M,J){var E=Le(M,J)+257;J+=5;var C=Le(M,J)+1;J+=5;var B=He(M,J)+4;J+=4;for(var G=0,Z=re?new Uint8Array(19):ct(19),se=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],oe=1,ce=re?new Uint8Array(8):ct(8),ie=re?new Uint8Array(8):ct(8),ue=Z.length,we=0;we<B;++we)Z[Y[we]]=G=Ie(M,J),oe<G&&(oe=G),ce[G]++,J+=3;var Fe=0;for(ce[0]=0,we=1;we<=oe;++we)ie[we]=Fe=Fe+ce[we-1]<<1;for(we=0;we<ue;++we)(Fe=Z[we])!=0&&(se[we]=ie[Fe]++);var je=0;for(we=0;we<ue;++we)if(je=Z[we],je!=0){Fe=xe[se[we]]>>8-je;for(var Ce=(1<<7-je)-1;Ce>=0;--Ce)at[Fe|Ce<<je]=je&7|we<<3}var Ue=[];for(oe=1;Ue.length<E+C;)switch(Fe=at[ve(M,J)],J+=Fe&7,Fe>>>=3){case 16:for(G=3+Ae(M,J),J+=2,Fe=Ue[Ue.length-1];G-- >0;)Ue.push(Fe);break;case 17:for(G=3+Ie(M,J),J+=3;G-- >0;)Ue.push(0);break;case 18:for(G=11+ve(M,J),J+=7;G-- >0;)Ue.push(0);break;default:Ue.push(Fe),oe<Fe&&(oe=Fe);break}var mt=Ue.slice(0,E),it=Ue.slice(E);for(we=E;we<286;++we)mt[we]=0;for(we=C;we<30;++we)it[we]=0;return Yt=Tt(mt,Je,286),ia=Tt(it,jt,30),J}function qa(M,J){if(M[0]==3&&!(M[1]&3))return[Cn(J),2];for(var E=0,C=0,B=$f(J||1<<18),G=0,Z=B.length>>>0,se=0,oe=0;!(C&1);){if(C=Ie(M,E),E+=3,C>>>1)C>>1==1?(se=9,oe=5):(E=Sa(M,E),se=Yt,oe=ia);else{E&7&&(E+=8-(E&7));var ce=M[E>>>3]|M[(E>>>3)+1]<<8;if(E+=32,ce>0)for(!J&&Z<G+ce&&(B=Ct(B,G+ce),Z=B.length);ce-- >0;)B[G++]=M[E>>>3],E+=8;continue}for(;;){!J&&Z<G+32767&&(B=Ct(B,G+32767),Z=B.length);var ie=st(M,E,se),ue=C>>>1==1?_t[ie]:Je[ie];if(E+=ue&15,ue>>>=4,!(ue>>>8&255))B[G++]=ue;else{if(ue==256)break;ue-=257;var we=ue<8?0:ue-4>>2;we>5&&(we=0);var Fe=G+K[ue];we>0&&(Fe+=st(M,E,we),E+=we),ie=st(M,E,oe),ue=C>>>1==1?dt[ie]:jt[ie],E+=ue&15,ue>>>=4;var je=ue<4?0:ue-2>>1,Ce=ne[ue];for(je>0&&(Ce+=st(M,E,je),E+=je),!J&&Z<Fe&&(B=Ct(B,Fe+100),Z=B.length);G<Fe;)B[G]=B[G-Ce],++G}}}return J?[B,E+7>>>3]:[B.slice(0,G),E+7>>>3]}function Ur(M,J){var E=M.slice(M.l||0),C=qa(E,J);return M.l+=C[1],C[0]}function he(M,J){if(M)typeof console<"u"&&console.error(J);else throw new Error(J)}function me(M,J){var E=M;_s(E,0);var C=[],B=[],G={FileIndex:C,FullPaths:B};k(G,{root:J.root});for(var Z=E.length-4;(E[Z]!=80||E[Z+1]!=75||E[Z+2]!=5||E[Z+3]!=6)&&Z>=0;)--Z;E.l=Z+4,E.l+=4;var se=E.read_shift(2);E.l+=6;var oe=E.read_shift(4);for(E.l=oe,Z=0;Z<se;++Z){E.l+=20;var ce=E.read_shift(4),ie=E.read_shift(4),ue=E.read_shift(2),we=E.read_shift(2),Fe=E.read_shift(2);E.l+=8;var je=E.read_shift(4),Ce=o(E.slice(E.l+ue,E.l+ue+we));E.l+=ue+we+Fe;var Ue=E.l;E.l=je+4,be(E,ce,ie,G,Ce),E.l=Ue}return G}function be(M,J,E,C,B){M.l+=2;var G=M.read_shift(2),Z=M.read_shift(2),se=l(M);if(G&8257)throw new Error("Unsupported ZIP encryption");for(var oe=M.read_shift(4),ce=M.read_shift(4),ie=M.read_shift(4),ue=M.read_shift(2),we=M.read_shift(2),Fe="",je=0;je<ue;++je)Fe+=String.fromCharCode(M[M.l++]);if(we){var Ce=o(M.slice(M.l,M.l+we));(Ce[21589]||{}).mt&&(se=Ce[21589].mt),((B||{})[21589]||{}).mt&&(se=B[21589].mt)}M.l+=we;var Ue=M.slice(M.l,M.l+ce);switch(Z){case 8:Ue=U(M,ie);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Z)}var mt=!1;G&8&&(oe=M.read_shift(4),oe==134695760&&(oe=M.read_shift(4),mt=!0),ce=M.read_shift(4),ie=M.read_shift(4)),ce!=J&&he(mt,"Bad compressed size: "+J+" != "+ce),ie!=E&&he(mt,"Bad uncompressed size: "+E+" != "+ie),le(C,Fe,Ue,{unsafe:!0,mt:se})}function ye(M,J){var E=J||{},C=[],B=[],G=us(1),Z=E.compression?8:0,se=0,oe=0,ce=0,ie=0,ue=0,we=M.FullPaths[0],Fe=we,je=M.FileIndex[0],Ce=[],Ue=0;for(oe=1;oe<M.FullPaths.length;++oe)if(Fe=M.FullPaths[oe].slice(we.length),je=M.FileIndex[oe],!(!je.size||!je.content||Fe=="Sh33tJ5")){var mt=ie,it=us(Fe.length);for(ce=0;ce<Fe.length;++ce)it.write_shift(1,Fe.charCodeAt(ce)&127);it=it.slice(0,it.l),Ce[ue]=WS.buf(je.content,0);var Et=je.content;Z==8&&(Et=z(Et)),G=us(30),G.write_shift(4,67324752),G.write_shift(2,20),G.write_shift(2,se),G.write_shift(2,Z),je.mt?i(G,je.mt):G.write_shift(4,0),G.write_shift(-4,Ce[ue]),G.write_shift(4,Et.length),G.write_shift(4,je.content.length),G.write_shift(2,it.length),G.write_shift(2,0),ie+=G.length,C.push(G),ie+=it.length,C.push(it),ie+=Et.length,C.push(Et),G=us(46),G.write_shift(4,33639248),G.write_shift(2,0),G.write_shift(2,20),G.write_shift(2,se),G.write_shift(2,Z),G.write_shift(4,0),G.write_shift(-4,Ce[ue]),G.write_shift(4,Et.length),G.write_shift(4,je.content.length),G.write_shift(2,it.length),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(4,0),G.write_shift(4,mt),Ue+=G.l,B.push(G),Ue+=it.length,B.push(it),++ue}return G=us(22),G.write_shift(4,101010256),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(2,ue),G.write_shift(2,ue),G.write_shift(4,Ue),G.write_shift(4,ie),G.write_shift(2,0),an([an(C),an(B),G])}var Pe={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Re(M,J){if(M.ctype)return M.ctype;var E=M.name||"",C=E.match(/\.([^\.]+)$/);return C&&Pe[C[1]]||J&&(C=(E=J).match(/[\.\\]([^\.\\])+$/),C&&Pe[C[1]])?Pe[C[1]]:"application/octet-stream"}function $e(M){for(var J=Bf(M),E=[],C=0;C<J.length;C+=76)E.push(J.slice(C,C+76));return E.join(`\r
`)+`\r
`}function Te(M){var J=M.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ce){var ie=ce.charCodeAt(0).toString(16).toUpperCase();return"="+(ie.length==1?"0"+ie:ie)});J=J.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),J.charAt(0)==`
`&&(J="=0D"+J.slice(1)),J=J.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var E=[],C=J.split(`\r
`),B=0;B<C.length;++B){var G=C[B];if(G.length==0){E.push("");continue}for(var Z=0;Z<G.length;){var se=76,oe=G.slice(Z,Z+se);oe.charAt(se-1)=="="?se--:oe.charAt(se-2)=="="?se-=2:oe.charAt(se-3)=="="&&(se-=3),oe=G.slice(Z,Z+se),Z+=se,Z<G.length&&(oe+="="),E.push(oe)}}return E.join(`\r
`)}function Ne(M){for(var J=[],E=0;E<M.length;++E){for(var C=M[E];E<=M.length&&C.charAt(C.length-1)=="=";)C=C.slice(0,C.length-1)+M[++E];J.push(C)}for(var B=0;B<J.length;++B)J[B]=J[B].replace(/[=][0-9A-Fa-f]{2}/g,function(G){return String.fromCharCode(parseInt(G.slice(1),16))});return Qr(J.join(`\r
`))}function Ge(M,J,E){for(var C="",B="",G="",Z,se=0;se<10;++se){var oe=J[se];if(!oe||oe.match(/^\s*$/))break;var ce=oe.match(/^(.*?):\s*([^\s].*)$/);if(ce)switch(ce[1].toLowerCase()){case"content-location":C=ce[2].trim();break;case"content-type":G=ce[2].trim();break;case"content-transfer-encoding":B=ce[2].trim();break}}switch(++se,B.toLowerCase()){case"base64":Z=Qr(Nr(J.slice(se).join("")));break;case"quoted-printable":Z=Ne(J.slice(se));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+B)}var ie=le(M,C.slice(E.length),Z,{unsafe:!0});G&&(ie.ctype=G)}function nt(M,J){if(F(M.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var E=J&&J.root||"",C=(gt&&Buffer.isBuffer(M)?M.toString("binary"):F(M)).split(`\r
`),B=0,G="";for(B=0;B<C.length;++B)if(G=C[B],!!/^Content-Location:/i.test(G)&&(G=G.slice(G.indexOf("file")),E||(E=G.slice(0,G.lastIndexOf("/")+1)),G.slice(0,E.length)!=E))for(;E.length>0&&(E=E.slice(0,E.length-1),E=E.slice(0,E.lastIndexOf("/")+1),G.slice(0,E.length)!=E););var Z=(C[1]||"").match(/boundary="(.*?)"/);if(!Z)throw new Error("MAD cannot find boundary");var se="--"+(Z[1]||""),oe=[],ce=[],ie={FileIndex:oe,FullPaths:ce};k(ie);var ue,we=0;for(B=0;B<C.length;++B){var Fe=C[B];Fe!==se&&Fe!==se+"--"||(we++&&Ge(ie,C.slice(ue,B),E),ue=B)}return ie}function ht(M,J){var E=J||{},C=E.boundary||"SheetJS";C="------="+C;for(var B=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+C.slice(2)+'"',"","",""],G=M.FullPaths[0],Z=G,se=M.FileIndex[0],oe=1;oe<M.FullPaths.length;++oe)if(Z=M.FullPaths[oe].slice(G.length),se=M.FileIndex[oe],!(!se.size||!se.content||Z=="Sh33tJ5")){Z=Z.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ue){return"_x"+Ue.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ue){return"_u"+Ue.charCodeAt(0).toString(16)+"_"});for(var ce=se.content,ie=gt&&Buffer.isBuffer(ce)?ce.toString("binary"):F(ce),ue=0,we=Math.min(1024,ie.length),Fe=0,je=0;je<=we;++je)(Fe=ie.charCodeAt(je))>=32&&Fe<128&&++ue;var Ce=ue>=we*4/5;B.push(C),B.push("Content-Location: "+(E.root||"file:///C:/SheetJS/")+Z),B.push("Content-Transfer-Encoding: "+(Ce?"quoted-printable":"base64")),B.push("Content-Type: "+Re(se,Z)),B.push(""),B.push(Ce?Te(ie):$e(ie))}return B.push(C+`--\r
`),B.join(`\r
`)}function ee(M){var J={};return k(J,M),J}function le(M,J,E,C){var B=C&&C.unsafe;B||k(M);var G=!B&&bt.find(M,J);if(!G){var Z=M.FullPaths[0];J.slice(0,Z.length)==Z?Z=J:(Z.slice(-1)!="/"&&(Z+="/"),Z=(Z+J).replace("//","/")),G={name:n(J),type:2},M.FileIndex.push(G),M.FullPaths.push(Z),B||bt.utils.cfb_gc(M)}return G.content=E,G.size=E?E.length:0,C&&(C.CLSID&&(G.clsid=C.CLSID),C.mt&&(G.mt=C.mt),C.ct&&(G.ct=C.ct)),G}function de(M,J){k(M);var E=bt.find(M,J);if(E){for(var C=0;C<M.FileIndex.length;++C)if(M.FileIndex[C]==E)return M.FileIndex.splice(C,1),M.FullPaths.splice(C,1),!0}return!1}function ge(M,J,E){k(M);var C=bt.find(M,J);if(C){for(var B=0;B<M.FileIndex.length;++B)if(M.FileIndex[B]==C)return M.FileIndex[B].name=n(E),M.FullPaths[B]=E,!0}return!1}function Ee(M){y(M,!0)}return s.find=R,s.read=T,s.parse=u,s.write=V,s.writeFile=D,s.utils={cfb_new:ee,cfb_add:le,cfb_del:de,cfb_mov:ge,cfb_gc:Ee,ReadShift:Hl,CheckField:Fv,prep_blob:_s,bconcat:an,use_zlib:I,_deflateRaw:Me,_inflateRaw:Ur,consts:Q},s}();function VS(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var s=File(t);s.open("r"),s.encoding="binary";var r=s.read();return s.close(),r}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+t)}function ba(t){for(var s=Object.keys(t),r=[],a=0;a<s.length;++a)Object.prototype.hasOwnProperty.call(t,s[a])&&r.push(s[a]);return r}function km(t){for(var s=[],r=ba(t),a=0;a!==r.length;++a)s[t[r[a]]]=r[a];return s}var gd=new Date(1899,11,30,0,0,0);function Zs(t,s){var r=t.getTime(),a=gd.getTime()+(t.getTimezoneOffset()-gd.getTimezoneOffset())*6e4;return(r-a)/(24*60*60*1e3)}var dv=new Date,HS=gd.getTime()+(dv.getTimezoneOffset()-gd.getTimezoneOffset())*6e4,Jf=dv.getTimezoneOffset();function qd(t){var s=new Date;return s.setTime(t*24*60*60*1e3+HS),s.getTimezoneOffset()!==Jf&&s.setTime(s.getTime()+(s.getTimezoneOffset()-Jf)*6e4),s}function GS(t){var s=0,r=0,a=!1,n=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!n)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var i=1;i!=n.length;++i)if(n[i]){switch(r=1,i>3&&(a=!0),n[i].slice(n[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+n[i].slice(n[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(a)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}s+=r*parseInt(n[i],10)}return s}var Kf=new Date("2017-02-19T19:06:09.000Z"),uv=isNaN(Kf.getFullYear())?new Date("2/19/17"):Kf,qS=uv.getFullYear()==2017;function ks(t,s){var r=new Date(t);if(qS)return s>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):s<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(uv.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return t.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var n=t.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);return t.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function li(t,s){if(gt&&Buffer.isBuffer(t)){if(s){if(t[0]==255&&t[1]==254)return Rl(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Rl(Xb(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(s){if(t[0]==255&&t[1]==254)return Rl(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Rl(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var a=[],n=0;n!=t.length;++n)a.push(String.fromCharCode(t[n]));return a.join("")}function Es(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=Es(t[r]));return s}function Jt(t,s){for(var r="";r.length<s;)r+=t;return r}function aa(t){var s=Number(t);if(!isNaN(s))return isFinite(s)?s:NaN;if(!/\d/.test(t))return s;var r=1,a=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(s=Number(a))||(a=a.replace(/[(](.*)[)]/,function(n,i){return r=-r,i}),!isNaN(s=Number(a)))?s/r:s}var JS=["january","february","march","april","may","june","july","august","september","october","november","december"];function el(t){var s=new Date(t),r=new Date(NaN),a=s.getYear(),n=s.getMonth(),i=s.getDate();if(isNaN(i))return r;var l=t.toLowerCase();if(l.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(l=l.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),l.length>3&&JS.indexOf(l)==-1)return r}else if(l.match(/[a-z]/))return r;return a<0||a>8099?r:(n>0||i>1)&&a!=101?s:t.match(/[^-0-9:,\/\\]/)?r:s}var KS=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,a,n){if(t||typeof a=="string")return r.split(a);for(var i=r.split(a),l=[i[0]],o=1;o<i.length;++o)l.push(n),l.push(i[o]);return l}}();function xv(t){return t?t.content&&t.type?li(t.content,!0):t.data?Fl(t.data):t.asNodeBuffer&&gt?Fl(t.asNodeBuffer().toString("binary")):t.asBinary?Fl(t.asBinary()):t._data&&t._data.getContent?Fl(li(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function mv(t){if(!t)return null;if(t.data)return If(t.data);if(t.asNodeBuffer&&gt)return t.asNodeBuffer();if(t._data&&t._data.getContent){var s=t._data.getContent();return typeof s=="string"?If(s):Array.prototype.slice.call(s)}return t.content&&t.type?t.content:null}function YS(t){return t&&t.name.slice(-4)===".bin"?mv(t):xv(t)}function Er(t,s){for(var r=t.FullPaths||ba(t.files),a=s.toLowerCase().replace(/[\/]/g,"\\"),n=a.replace(/\\/g,"/"),i=0;i<r.length;++i){var l=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==l||n==l)return t.files?t.files[r[i]]:t.FileIndex[i]}return null}function Sm(t,s){var r=Er(t,s);if(r==null)throw new Error("Cannot find file "+s+" in zip");return r}function ns(t,s,r){if(!r)return YS(Sm(t,s));if(!s)return null;try{return ns(t,s)}catch{return null}}function yr(t,s,r){if(!r)return xv(Sm(t,s));if(!s)return null;try{return yr(t,s)}catch{return null}}function XS(t,s,r){return mv(Sm(t,s))}function Yf(t){for(var s=t.FullPaths||ba(t.files),r=[],a=0;a<s.length;++a)s[a].slice(-1)!="/"&&r.push(s[a].replace(/^Root Entry[\/]/,""));return r.sort()}function QS(t,s,r){if(t.FullPaths){if(typeof r=="string"){var a;return gt?a=xi(r):a=gS(r),bt.utils.cfb_add(t,s,a)}bt.utils.cfb_add(t,s,r)}else t.file(s,r)}function hv(t,s){switch(s.type){case"base64":return bt.read(t,{type:"base64"});case"binary":return bt.read(t,{type:"binary"});case"buffer":case"array":return bt.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+s.type)}function Dl(t,s){if(t.charAt(0)=="/")return t.slice(1);var r=s.split("/");s.slice(-1)!="/"&&r.pop();for(var a=t.split("/");a.length!==0;){var n=a.shift();n===".."?r.pop():n!=="."&&r.push(n)}return r.join("/")}var fv=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,ZS=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,Xf=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,eC=/<[^>]*>/g,Vs=fv.match(Xf)?Xf:eC,tC=/<\w*:/,sC=/<(\/?)\w+:/;function qe(t,s,r){for(var a={},n=0,i=0;n!==t.length&&!((i=t.charCodeAt(n))===32||i===10||i===13);++n);if(s||(a[0]=t.slice(0,n)),n===t.length)return a;var l=t.match(ZS),o=0,c="",d=0,u="",p="",f=1;if(l)for(d=0;d!=l.length;++d){for(p=l[d],i=0;i!=p.length&&p.charCodeAt(i)!==61;++i);for(u=p.slice(0,i).trim();p.charCodeAt(i+1)==32;)++i;for(f=(n=p.charCodeAt(i+1))==34||n==39?1:0,c=p.slice(i+1+f,p.length-f),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),a[u]=c,a[u.toLowerCase()]=c;else{var g=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(a[g]&&u.slice(o-3,o)=="ext")continue;a[g]=c,a[g.toLowerCase()]=c}}return a}function Na(t){return t.replace(sC,"<$1")}var pv={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},rC=km(pv),kt=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,s=/_x([\da-fA-F]{4})_/ig;return function r(a){var n=a+"",i=n.indexOf("<![CDATA[");if(i==-1)return n.replace(t,function(o,c){return pv[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(s,function(o,c){return String.fromCharCode(parseInt(c,16))});var l=n.indexOf("]]>");return r(n.slice(0,i))+n.slice(i+9,l)+r(n.slice(l+3))}}(),aC=/[&<>'"]/g,nC=/[\u0000-\u001f]/g;function Cm(t){var s=t+"";return s.replace(aC,function(r){return rC[r]}).replace(/\n/g,"<br/>").replace(nC,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var Qf=function(){var t=/&#(\d+);/g;function s(r,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(t,s)}}();function $t(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function P0(t){for(var s="",r=0,a=0,n=0,i=0,l=0,o=0;r<t.length;){if(a=t.charCodeAt(r++),a<128){s+=String.fromCharCode(a);continue}if(n=t.charCodeAt(r++),a>191&&a<224){l=(a&31)<<6,l|=n&63,s+=String.fromCharCode(l);continue}if(i=t.charCodeAt(r++),a<240){s+=String.fromCharCode((a&15)<<12|(n&63)<<6|i&63);continue}l=t.charCodeAt(r++),o=((a&7)<<18|(n&63)<<12|(i&63)<<6|l&63)-65536,s+=String.fromCharCode(55296+(o>>>10&1023)),s+=String.fromCharCode(56320+(o&1023))}return s}function Zf(t){var s=Cn(2*t.length),r,a,n=1,i=0,l=0,o;for(a=0;a<t.length;a+=n)n=1,(o=t.charCodeAt(a))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(a+1)&63),n=2):o<240?(r=(o&15)*4096+(t.charCodeAt(a+1)&63)*64+(t.charCodeAt(a+2)&63),n=3):(n=4,r=(o&7)*262144+(t.charCodeAt(a+1)&63)*4096+(t.charCodeAt(a+2)&63)*64+(t.charCodeAt(a+3)&63),r-=65536,l=55296+(r>>>10&1023),r=56320+(r&1023)),l!==0&&(s[i++]=l&255,s[i++]=l>>>8,l=0),s[i++]=r%256,s[i++]=r>>>8;return s.slice(0,i).toString("ucs2")}function ep(t){return xi(t,"binary").toString("utf8")}var hc="foo bar baz",Rt=gt&&(ep(hc)==P0(hc)&&ep||Zf(hc)==P0(hc)&&Zf)||P0,Rl=gt?function(t){return xi(t,"utf8").toString("binary")}:function(t){for(var s=[],r=0,a=0,n=0;r<t.length;)switch(a=t.charCodeAt(r++),!0){case a<128:s.push(String.fromCharCode(a));break;case a<2048:s.push(String.fromCharCode(192+(a>>6))),s.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,n=t.charCodeAt(r++)-56320+(a<<10),s.push(String.fromCharCode(240+(n>>18&7))),s.push(String.fromCharCode(144+(n>>12&63))),s.push(String.fromCharCode(128+(n>>6&63))),s.push(String.fromCharCode(128+(n&63)));break;default:s.push(String.fromCharCode(224+(a>>12))),s.push(String.fromCharCode(128+(a>>6&63))),s.push(String.fromCharCode(128+(a&63)))}return s.join("")},_o=function(){var t={};return function(r,a){var n=r+"|"+(a||"");return t[n]?t[n]:t[n]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",a||"")}}(),gv=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(s){return[new RegExp("&"+s[0]+";","ig"),s[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),n=0;n<t.length;++n)a=a.replace(t[n][0],t[n][1]);return a}}(),iC=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),lC=/<\/?(?:vt:)?variant>/g,oC=/<(?:vt:)([^>]*)>([\s\S]*)</;function tp(t,s){var r=qe(t),a=t.match(iC(r.baseType))||[],n=[];if(a.length!=r.size){if(s.WTF)throw new Error("unexpected vector length "+a.length+" != "+r.size);return n}return a.forEach(function(i){var l=i.replace(lC,"").match(oC);l&&n.push({v:Rt(l[2]),t:l[1]})}),n}var cC=/(^\s|\s$|\n)/;function dC(t){return ba(t).map(function(s){return" "+s+'="'+t[s]+'"'}).join("")}function uC(t,s,r){return"<"+t+(r!=null?dC(r):"")+(s!=null?(s.match(cC)?' xml:space="preserve"':"")+">"+s+"</"+t:"/")+">"}function _m(t){if(gt&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Rt(mi(jm(t)));throw new Error("Bad input format: expected Buffer or string")}var To=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,xC={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},mC=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function hC(t,s){for(var r=1-2*(t[s+7]>>>7),a=((t[s+7]&127)<<4)+(t[s+6]>>>4&15),n=t[s+6]&15,i=5;i>=0;--i)n=n*256+t[s+i];return a==2047?n==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,n+=Math.pow(2,52)),r*Math.pow(2,a-52)*n)}function fC(t,s,r){var a=(s<0||1/s==-1/0?1:0)<<7,n=0,i=0,l=a?-s:s;isFinite(l)?l==0?n=i=0:(n=Math.floor(Math.log(l)/Math.LN2),i=l*Math.pow(2,52-n),n<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?n=-1022:(i-=Math.pow(2,52),n+=1023)):(n=2047,i=isNaN(s)?26985:0);for(var o=0;o<=5;++o,i/=256)t[r+o]=i&255;t[r+6]=(n&15)<<4|i&15,t[r+7]=n>>4|a}var sp=function(t){for(var s=[],r=10240,a=0;a<t[0].length;++a)if(t[0][a])for(var n=0,i=t[0][a].length;n<i;n+=r)s.push.apply(s,t[0][a].slice(n,n+r));return s},rp=gt?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(s){return Buffer.isBuffer(s)?s:xi(s)})):sp(t)}:sp,ap=function(t,s,r){for(var a=[],n=s;n<r;n+=2)a.push(String.fromCharCode(Fa(t,n)));return a.join("").replace(Qs,"")},Tm=gt?function(t,s,r){return Buffer.isBuffer(t)?t.toString("utf16le",s,r).replace(Qs,""):ap(t,s,r)}:ap,np=function(t,s,r){for(var a=[],n=s;n<s+r;++n)a.push(("0"+t[n].toString(16)).slice(-2));return a.join("")},yv=gt?function(t,s,r){return Buffer.isBuffer(t)?t.toString("hex",s,s+r):np(t,s,r)}:np,ip=function(t,s,r){for(var a=[],n=s;n<r;n++)a.push(String.fromCharCode(ji(t,n)));return a.join("")},$o=gt?function(s,r,a){return Buffer.isBuffer(s)?s.toString("utf8",r,a):ip(s,r,a)}:ip,bv=function(t,s){var r=gr(t,s);return r>0?$o(t,s+4,s+4+r-1):""},vv=bv,jv=function(t,s){var r=gr(t,s);return r>0?$o(t,s+4,s+4+r-1):""},wv=jv,Nv=function(t,s){var r=2*gr(t,s);return r>0?$o(t,s+4,s+4+r-1):""},kv=Nv,Sv=function(s,r){var a=gr(s,r);return a>0?Tm(s,r+4,r+4+a):""},Cv=Sv,_v=function(t,s){var r=gr(t,s);return r>0?$o(t,s+4,s+4+r):""},Tv=_v,Ev=function(t,s){return hC(t,s)},yd=Ev,Av=function(s){return Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array};gt&&(vv=function(s,r){if(!Buffer.isBuffer(s))return bv(s,r);var a=s.readUInt32LE(r);return a>0?s.toString("utf8",r+4,r+4+a-1):""},wv=function(s,r){if(!Buffer.isBuffer(s))return jv(s,r);var a=s.readUInt32LE(r);return a>0?s.toString("utf8",r+4,r+4+a-1):""},kv=function(s,r){if(!Buffer.isBuffer(s))return Nv(s,r);var a=2*s.readUInt32LE(r);return s.toString("utf16le",r+4,r+4+a-1)},Cv=function(s,r){if(!Buffer.isBuffer(s))return Sv(s,r);var a=s.readUInt32LE(r);return s.toString("utf16le",r+4,r+4+a)},Tv=function(s,r){if(!Buffer.isBuffer(s))return _v(s,r);var a=s.readUInt32LE(r);return s.toString("utf8",r+4,r+4+a)},yd=function(s,r){return Buffer.isBuffer(s)?s.readDoubleLE(r):Ev(s,r)},Av=function(s){return Buffer.isBuffer(s)||Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array});var ji=function(t,s){return t[s]},Fa=function(t,s){return t[s+1]*256+t[s]},pC=function(t,s){var r=t[s+1]*256+t[s];return r<32768?r:(65535-r+1)*-1},gr=function(t,s){return t[s+3]*(1<<24)+(t[s+2]<<16)+(t[s+1]<<8)+t[s]},$n=function(t,s){return t[s+3]<<24|t[s+2]<<16|t[s+1]<<8|t[s]},gC=function(t,s){return t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3]};function Hl(t,s){var r="",a,n,i=[],l,o,c,d;switch(s){case"dbcs":if(d=this.l,gt&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(Fa(this,d)),d+=2;t*=2;break;case"utf8":r=$o(this,this.l,this.l+t);break;case"utf16le":t*=2,r=Tm(this,this.l,this.l+t);break;case"wstr":return Hl.call(this,t,"dbcs");case"lpstr-ansi":r=vv(this,this.l),t=4+gr(this,this.l);break;case"lpstr-cp":r=wv(this,this.l),t=4+gr(this,this.l);break;case"lpwstr":r=kv(this,this.l),t=4+2*gr(this,this.l);break;case"lpp4":t=4+gr(this,this.l),r=Cv(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+gr(this,this.l),r=Tv(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(l=ji(this,this.l+t++))!==0;)i.push(mc(l));r=i.join("");break;case"_wstr":for(t=0,r="";(l=Fa(this,this.l+t))!==0;)i.push(mc(l)),t+=2;t+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return l=ji(this,d),this.l=d+1,o=Hl.call(this,t-c,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(mc(Fa(this,d))),d+=2}r=i.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return l=ji(this,d),this.l=d+1,o=Hl.call(this,t-c,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(mc(ji(this,d))),d+=1}r=i.join("");break;default:switch(t){case 1:return a=ji(this,this.l),this.l++,a;case 2:return a=(s==="i"?pC:Fa)(this,this.l),this.l+=2,a;case 4:case-4:return s==="i"||!(this[this.l+3]&128)?(a=(t>0?$n:gC)(this,this.l),this.l+=4,a):(n=gr(this,this.l),this.l+=4,n);case 8:case-8:if(s==="f")return t==8?n=yd(this,this.l):n=yd([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;t=8;case 16:r=yv(this,this.l,t);break}}return this.l+=t,r}var yC=function(t,s,r){t[r]=s&255,t[r+1]=s>>>8&255,t[r+2]=s>>>16&255,t[r+3]=s>>>24&255},bC=function(t,s,r){t[r]=s&255,t[r+1]=s>>8&255,t[r+2]=s>>16&255,t[r+3]=s>>24&255},vC=function(t,s,r){t[r]=s&255,t[r+1]=s>>>8&255};function jC(t,s,r){var a=0,n=0;if(r==="dbcs"){for(n=0;n!=s.length;++n)vC(this,s.charCodeAt(n),this.l+2*n);a=2*s.length}else if(r==="sbcs"){for(s=s.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=s.length;++n)this[this.l+n]=s.charCodeAt(n)&255;a=s.length}else if(r==="hex"){for(;n<t;++n)this[this.l++]=parseInt(s.slice(2*n,2*n+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+t,this.length);for(n=0;n<Math.min(s.length,t);++n){var l=s.charCodeAt(n);this[this.l++]=l&255,this[this.l++]=l>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(t){case 1:a=1,this[this.l]=s&255;break;case 2:a=2,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255;break;case 3:a=3,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255,s>>>=8,this[this.l+2]=s&255;break;case 4:a=4,yC(this,s,this.l);break;case 8:if(a=8,r==="f"){fC(this,s,this.l);break}case 16:break;case-4:a=4,bC(this,s,this.l);break}return this.l+=a,this}function Fv(t,s){var r=yv(this,this.l,t.length>>1);if(r!==t)throw new Error(s+"Expected "+t+" saw "+r);this.l+=t.length>>1}function _s(t,s){t.l=s,t.read_shift=Hl,t.chk=Fv,t.write_shift=jC}function Ws(t,s){t.l+=s}function us(t){var s=Cn(t);return _s(s,0),s}function Ga(t,s,r){if(t){var a,n,i;_s(t,t.l||0);for(var l=t.length,o=0,c=0;t.l<l;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var d=kd[o]||kd[65535];for(a=t.read_shift(1),i=a&127,n=1;n<4&&a&128;++n)i+=((a=t.read_shift(1))&127)<<7*n;c=t.l+i;var u=d.f&&d.f(t,i,r);if(t.l=c,s(u,d,o))return}}}function ex(){var t=[],s=gt?256:2048,r=function(d){var u=us(d);return _s(u,0),u},a=r(s),n=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&t.push(a),a=null)},i=function(d){return a&&d<a.length-a.l?a:(n(),a=r(Math.max(d+1,s)))},l=function(){return n(),an(t)},o=function(d){n(),a=d,a.l==null&&(a.l=a.length),i(s)};return{next:i,push:o,end:l,_bufs:t}}function Gl(t,s,r){var a=Es(t);if(s.s?(a.cRel&&(a.c+=s.s.c),a.rRel&&(a.r+=s.s.r)):(a.cRel&&(a.c+=s.c),a.rRel&&(a.r+=s.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function lp(t,s,r){var a=Es(t);return a.s=Gl(a.s,s.s,r),a.e=Gl(a.e,s.s,r),a}function ql(t,s){if(t.cRel&&t.c<0)for(t=Es(t);t.c<0;)t.c+=s>8?16384:256;if(t.rRel&&t.r<0)for(t=Es(t);t.r<0;)t.r+=s>8?1048576:s>5?65536:16384;var r=Qe(t);return!t.cRel&&t.cRel!=null&&(r=kC(r)),!t.rRel&&t.rRel!=null&&(r=wC(r)),r}function D0(t,s){return t.s.r==0&&!t.s.rRel&&t.e.r==(s.biff>=12?1048575:s.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+ps(t.s.c)+":"+(t.e.cRel?"":"$")+ps(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(s.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+As(t.s.r)+":"+(t.e.rRel?"":"$")+As(t.e.r):ql(t.s,s.biff)+":"+ql(t.e,s.biff)}function Em(t){return parseInt(NC(t),10)-1}function As(t){return""+(t+1)}function wC(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function NC(t){return t.replace(/\$(\d+)$/,"$1")}function Am(t){for(var s=SC(t),r=0,a=0;a!==s.length;++a)r=26*r+s.charCodeAt(a)-64;return r-1}function ps(t){if(t<0)throw new Error("invalid column "+t);var s="";for(++t;t;t=Math.floor((t-1)/26))s=String.fromCharCode((t-1)%26+65)+s;return s}function kC(t){return t.replace(/^([A-Z])/,"$$$1")}function SC(t){return t.replace(/^\$([A-Z])/,"$1")}function CC(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ks(t){for(var s=0,r=0,a=0;a<t.length;++a){var n=t.charCodeAt(a);n>=48&&n<=57?s=10*s+(n-48):n>=65&&n<=90&&(r=26*r+(n-64))}return{c:r-1,r:s-1}}function Qe(t){for(var s=t.c+1,r="";s;s=(s-1)/26|0)r=String.fromCharCode((s-1)%26+65)+r;return r+(t.r+1)}function dl(t){var s=t.indexOf(":");return s==-1?{s:Ks(t),e:Ks(t)}:{s:Ks(t.slice(0,s)),e:Ks(t.slice(s+1))}}function vt(t,s){return typeof s>"u"||typeof s=="number"?vt(t.s,t.e):(typeof t!="string"&&(t=Qe(t)),typeof s!="string"&&(s=Qe(s)),t==s?t:t+":"+s)}function Kt(t){var s={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,n=0,i=t.length;for(r=0;a<i&&!((n=t.charCodeAt(a)-64)<1||n>26);++a)r=26*r+n;for(s.s.c=--r,r=0;a<i&&!((n=t.charCodeAt(a)-48)<0||n>9);++a)r=10*r+n;if(s.s.r=--r,a===i||n!=10)return s.e.c=s.s.c,s.e.r=s.s.r,s;for(++a,r=0;a!=i&&!((n=t.charCodeAt(a)-64)<1||n>26);++a)r=26*r+n;for(s.e.c=--r,r=0;a!=i&&!((n=t.charCodeAt(a)-48)<0||n>9);++a)r=10*r+n;return s.e.r=--r,s}function op(t,s){var r=t.t=="d"&&s instanceof Date;if(t.z!=null)try{return t.w=Br(t.z,r?Zs(s):s)}catch{}try{return t.w=Br((t.XF||{}).numFmtId||(r?14:0),r?Zs(s):s)}catch{return""+s}}function Wa(t,s,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?pi[t.v]||t.v:s==null?op(t,t.v):op(t,s))}function Dn(t,s){var r=s&&s.sheet?s.sheet:"Sheet1",a={};return a[r]=t,{SheetNames:[r],Sheets:a}}function Pv(t,s,r){var a=r||{},n=t?Array.isArray(t):a.dense,i=t||(n?[]:{}),l=0,o=0;if(i&&a.origin!=null){if(typeof a.origin=="number")l=a.origin;else{var c=typeof a.origin=="string"?Ks(a.origin):a.origin;l=c.r,o=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=Kt(i["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),l==-1&&(d.e.r=l=u.e.r+1)}for(var p=0;p!=s.length;++p)if(s[p]){if(!Array.isArray(s[p]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=s[p].length;++f)if(!(typeof s[p][f]>"u")){var g={v:s[p][f]},x=l+p,h=o+f;if(d.s.r>x&&(d.s.r=x),d.s.c>h&&(d.s.c=h),d.e.r<x&&(d.e.r=x),d.e.c<h&&(d.e.c=h),s[p][f]&&typeof s[p][f]=="object"&&!Array.isArray(s[p][f])&&!(s[p][f]instanceof Date))g=s[p][f];else if(Array.isArray(g.v)&&(g.f=s[p][f][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(a.nullError)g.t="e",g.v=0;else if(a.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=a.dateNF||tt[14],a.cellDates?(g.t="d",g.w=Br(g.z,Zs(g.v))):(g.t="n",g.v=Zs(g.v),g.w=Br(g.z,g.v))):g.t="s";if(n)i[x]||(i[x]=[]),i[x][h]&&i[x][h].z&&(g.z=i[x][h].z),i[x][h]=g;else{var m=Qe({c:h,r:x});i[m]&&i[m].z&&(g.z=i[m].z),i[m]=g}}}return d.s.c<1e7&&(i["!ref"]=vt(d)),i}function ul(t,s){return Pv(null,t,s)}function _C(t){return t.read_shift(4,"i")}function Us(t){var s=t.read_shift(4);return s===0?"":t.read_shift(s,"dbcs")}function TC(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function Fm(t,s){var r=t.l,a=t.read_shift(1),n=Us(t),i=[],l={t:n,h:n};if(a&1){for(var o=t.read_shift(4),c=0;c!=o;++c)i.push(TC(t));l.r=i}else l.r=[{ich:0,ifnt:0}];return t.l=r+s,l}var EC=Fm;function $r(t){var s=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:s,iStyleRef:r}}function hi(t){var s=t.read_shift(2);return s+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:s}}var AC=Us;function Pm(t){var s=t.read_shift(4);return s===0||s===4294967295?"":t.read_shift(s,"dbcs")}var FC=Us,tx=Pm;function Dm(t){var s=t.slice(t.l,t.l+4),r=s[0]&1,a=s[0]&2;t.l+=4;var n=a===0?yd([0,0,0,0,s[0]&252,s[1],s[2],s[3]],0):$n(s,0)>>2;return r?n/100:n}function Dv(t){var s={s:{},e:{}};return s.s.r=t.read_shift(4),s.e.r=t.read_shift(4),s.s.c=t.read_shift(4),s.e.c=t.read_shift(4),s}var fi=Dv;function Bs(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function PC(t){var s={},r=t.read_shift(1),a=r>>>1,n=t.read_shift(1),i=t.read_shift(2,"i"),l=t.read_shift(1),o=t.read_shift(1),c=t.read_shift(1);switch(t.l++,a){case 0:s.auto=1;break;case 1:s.index=n;var d=Xn[n];d&&(s.rgb=Ao(d));break;case 2:s.rgb=Ao([l,o,c]);break;case 3:s.theme=n;break}return i!=0&&(s.tint=i>0?i/32767:i/32768),s}function DC(t){var s=t.read_shift(1);t.l++;var r={fBold:s&1,fItalic:s&2,fUnderline:s&4,fStrikeout:s&8,fOutline:s&16,fShadow:s&32,fCondense:s&64,fExtend:s&128};return r}function Rv(t,s){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=t.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return t.l-=4,t.read_shift(0,s==1?"lpstr":"lpwstr")}function RC(t){return Rv(t,1)}function LC(t){return Rv(t,2)}var Rm=2,ir=3,fc=11,cp=12,bd=19,pc=64,OC=65,IC=71,MC=4108,BC=4126,vs=80,Lv=81,$C=[vs,Lv],UC={1:{n:"CodePage",t:Rm},2:{n:"Category",t:vs},3:{n:"PresentationFormat",t:vs},4:{n:"ByteCount",t:ir},5:{n:"LineCount",t:ir},6:{n:"ParagraphCount",t:ir},7:{n:"SlideCount",t:ir},8:{n:"NoteCount",t:ir},9:{n:"HiddenCount",t:ir},10:{n:"MultimediaClipCount",t:ir},11:{n:"ScaleCrop",t:fc},12:{n:"HeadingPairs",t:MC},13:{n:"TitlesOfParts",t:BC},14:{n:"Manager",t:vs},15:{n:"Company",t:vs},16:{n:"LinksUpToDate",t:fc},17:{n:"CharacterCount",t:ir},19:{n:"SharedDoc",t:fc},22:{n:"HyperlinksChanged",t:fc},23:{n:"AppVersion",t:ir,p:"version"},24:{n:"DigSig",t:OC},26:{n:"ContentType",t:vs},27:{n:"ContentStatus",t:vs},28:{n:"Language",t:vs},29:{n:"Version",t:vs},255:{},2147483648:{n:"Locale",t:bd},2147483651:{n:"Behavior",t:bd},1919054434:{}},zC={1:{n:"CodePage",t:Rm},2:{n:"Title",t:vs},3:{n:"Subject",t:vs},4:{n:"Author",t:vs},5:{n:"Keywords",t:vs},6:{n:"Comments",t:vs},7:{n:"Template",t:vs},8:{n:"LastAuthor",t:vs},9:{n:"RevNumber",t:vs},10:{n:"EditTime",t:pc},11:{n:"LastPrinted",t:pc},12:{n:"CreatedDate",t:pc},13:{n:"ModifiedDate",t:pc},14:{n:"PageCount",t:ir},15:{n:"WordCount",t:ir},16:{n:"CharCount",t:ir},17:{n:"Thumbnail",t:IC},18:{n:"Application",t:vs},19:{n:"DocSecurity",t:ir},255:{},2147483648:{n:"Locale",t:bd},2147483651:{n:"Behavior",t:bd},1919054434:{}},dp={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},WC=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function VC(t){return t.map(function(s){return[s>>16&255,s>>8&255,s&255]})}var HC=VC([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Xn=Es(HC),pi={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Ov={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},up={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function GC(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function qC(t){var s=GC();if(!t||!t.match)return s;var r={};if((t.match(Vs)||[]).forEach(function(a){var n=qe(a);switch(n[0].replace(tC,"<")){case"<?xml":break;case"<Types":s.xmlns=n["xmlns"+(n[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[n.Extension]=n.ContentType;break;case"<Override":s[up[n.ContentType]]!==void 0&&s[up[n.ContentType]].push(n.PartName);break}}),s.xmlns!==xC.CT)throw new Error("Unknown Namespace: "+s.xmlns);return s.calcchain=s.calcchains.length>0?s.calcchains[0]:"",s.sst=s.strs.length>0?s.strs[0]:"",s.style=s.styles.length>0?s.styles[0]:"",s.defaults=r,delete s.calcchains,s}var Ri={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function sx(t){var s=t.lastIndexOf("/");return t.slice(0,s+1)+"_rels/"+t.slice(s+1)+".rels"}function Jl(t,s){var r={"!id":{}};if(!t)return r;s.charAt(0)!=="/"&&(s="/"+s);var a={};return(t.match(Vs)||[]).forEach(function(n){var i=qe(n);if(i[0]==="<Relationship"){var l={};l.Type=i.Type,l.Target=i.Target,l.Id=i.Id,i.TargetMode&&(l.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:Dl(i.Target,s);r[o]=l,a[i.Id]=l}}),r["!id"]=a,r}var JC="application/vnd.oasis.opendocument.spreadsheet";function KC(t,s){for(var r=_m(t),a,n;a=To.exec(r);)switch(a[3]){case"manifest":break;case"file-entry":if(n=qe(a[0],!1),n.path=="/"&&n.type!==JC)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(s&&s.WTF)throw a}}var Kl=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],YC=function(){for(var t=new Array(Kl.length),s=0;s<Kl.length;++s){var r=Kl[s],a="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[s]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return t}();function Iv(t){var s={};t=Rt(t);for(var r=0;r<Kl.length;++r){var a=Kl[r],n=t.match(YC[r]);n!=null&&n.length>0&&(s[a[1]]=kt(n[1])),a[2]==="date"&&s[a[1]]&&(s[a[1]]=ks(s[a[1]]))}return s}var XC=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function Mv(t,s,r,a){var n=[];if(typeof t=="string")n=tp(t,a);else for(var i=0;i<t.length;++i)n=n.concat(t[i].map(function(u){return{v:u}}));var l=typeof s=="string"?tp(s,a).map(function(u){return u.v}):s,o=0,c=0;if(l.length>0)for(var d=0;d!==n.length;d+=2){switch(c=+n[d+1].v,n[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=l.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=l.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=l.slice(o,o+c);break}o+=c}}function QC(t,s,r){var a={};return s||(s={}),t=Rt(t),XC.forEach(function(n){var i=(t.match(_o(n[0]))||[])[1];switch(n[2]){case"string":i&&(s[n[1]]=kt(i));break;case"bool":s[n[1]]=i==="true";break;case"raw":var l=t.match(new RegExp("<"+n[0]+"[^>]*>([\\s\\S]*?)</"+n[0]+">"));l&&l.length>0&&(a[n[1]]=l[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&Mv(a.HeadingPairs,a.TitlesOfParts,s,r),s}var ZC=/<[^>]+>[^<]*/g;function e6(t,s){var r={},a="",n=t.match(ZC);if(n)for(var i=0;i!=n.length;++i){var l=n[i],o=qe(l);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":a=kt(o.name);break;case"</property>":a=null;break;default:if(l.indexOf("<vt:")===0){var c=l.split(">"),d=c[0].slice(4),u=c[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[a]=kt(u);break;case"bool":r[a]=$t(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[a]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[a]=parseFloat(u);break;case"filetime":case"date":r[a]=ks(u);break;case"cy":case"error":r[a]=kt(u);break;default:if(d.slice(-1)=="/")break;s.WTF&&typeof console<"u"&&console.warn("Unexpected",l,d,c)}}else if(l.slice(0,2)!=="</"){if(s.WTF)throw new Error(l)}}}return r}var t6={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},R0;function s6(t,s,r){R0||(R0=km(t6)),s=R0[s]||s,t[s]=r}function Lm(t){var s=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+s/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Bv(t,s,r){var a=t.l,n=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-a&3;)++t.l;return n}function $v(t,s,r){var a=t.read_shift(0,"lpwstr");return a}function Uv(t,s,r){return s===31?$v(t):Bv(t,s,r)}function rx(t,s,r){return Uv(t,s,r===!1?0:4)}function r6(t,s){if(!s)throw new Error("VtUnalignedString must have positive length");return Uv(t,s,0)}function a6(t){for(var s=t.read_shift(4),r=[],a=0;a!=s;++a){var n=t.l;r[a]=t.read_shift(0,"lpwstr").replace(Qs,""),t.l-n&2&&(t.l+=2)}return r}function n6(t){for(var s=t.read_shift(4),r=[],a=0;a!=s;++a)r[a]=t.read_shift(0,"lpstr-cp").replace(Qs,"");return r}function i6(t){var s=t.l,r=vd(t,Lv);t[t.l]==0&&t[t.l+1]==0&&t.l-s&2&&(t.l+=2);var a=vd(t,ir);return[r,a]}function l6(t){for(var s=t.read_shift(4),r=[],a=0;a<s/2;++a)r.push(i6(t));return r}function xp(t,s){for(var r=t.read_shift(4),a={},n=0;n!=r;++n){var i=t.read_shift(4),l=t.read_shift(4);a[i]=t.read_shift(l,s===1200?"utf16le":"utf8").replace(Qs,"").replace(Pl,"!"),s===1200&&l%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),a}function zv(t){var s=t.read_shift(4),r=t.slice(t.l,t.l+s);return t.l+=s,(s&3)>0&&(t.l+=4-(s&3)&3),r}function o6(t){var s={};return s.Size=t.read_shift(4),t.l+=s.Size+3-(s.Size-1)%4,s}function vd(t,s,r){var a=t.read_shift(2),n,i=r||{};if(t.l+=2,s!==cp&&a!==s&&$C.indexOf(s)===-1&&!((s&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+s+" saw "+a);switch(s===cp?a:s){case 2:return n=t.read_shift(2,"i"),i.raw||(t.l+=2),n;case 3:return n=t.read_shift(4,"i"),n;case 11:return t.read_shift(4)!==0;case 19:return n=t.read_shift(4),n;case 30:return Bv(t,a,4).replace(Qs,"");case 31:return $v(t);case 64:return Lm(t);case 65:return zv(t);case 71:return o6(t);case 80:return rx(t,a,!i.raw).replace(Qs,"");case 81:return r6(t,a).replace(Qs,"");case 4108:return l6(t);case 4126:case 4127:return a==4127?a6(t):n6(t);default:throw new Error("TypedPropertyValue unrecognized type "+s+" "+a)}}function mp(t,s){var r=t.l,a=t.read_shift(4),n=t.read_shift(4),i=[],l=0,o=0,c=-1,d={};for(l=0;l!=n;++l){var u=t.read_shift(4),p=t.read_shift(4);i[l]=[u,p+r]}i.sort(function(v,N){return v[1]-N[1]});var f={};for(l=0;l!=n;++l){if(t.l!==i[l][1]){var g=!0;if(l>0&&s)switch(s[i[l-1][0]].t){case 2:t.l+2===i[l][1]&&(t.l+=2,g=!1);break;case 80:t.l<=i[l][1]&&(t.l=i[l][1],g=!1);break;case 4108:t.l<=i[l][1]&&(t.l=i[l][1],g=!1);break}if((!s||l==0)&&t.l<=i[l][1]&&(g=!1,t.l=i[l][1]),g)throw new Error("Read Error: Expected address "+i[l][1]+" at "+t.l+" :"+l)}if(s){var x=s[i[l][0]];if(f[x.n]=vd(t,x.t,{raw:!0}),x.p==="version"&&(f[x.n]=String(f[x.n]>>16)+"."+("0000"+String(f[x.n]&65535)).slice(-4)),x.n=="CodePage")switch(f[x.n]){case 0:f[x.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Zr(o=f[x.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+f[x.n])}}else if(i[l][0]===1){if(o=f.CodePage=vd(t,Rm),Zr(o),c!==-1){var h=t.l;t.l=i[c][1],d=xp(t,o),t.l=h}}else if(i[l][0]===0){if(o===0){c=l,t.l=i[l+1][1];continue}d=xp(t,o)}else{var m=d[i[l][0]],j;switch(t[t.l]){case 65:t.l+=4,j=zv(t);break;case 30:t.l+=4,j=rx(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,j=rx(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,j=t.read_shift(4,"i");break;case 19:t.l+=4,j=t.read_shift(4);break;case 5:t.l+=4,j=t.read_shift(8,"f");break;case 11:t.l+=4,j=Xt(t,4);break;case 64:t.l+=4,j=ks(Lm(t));break;default:throw new Error("unparsed value: "+t[t.l])}f[m]=j}}return t.l=r+a,f}function hp(t,s,r){var a=t.content;if(!a)return{};_s(a,0);var n,i,l,o,c=0;a.chk("feff","Byte Order: "),a.read_shift(2);var d=a.read_shift(4),u=a.read_shift(16);if(u!==bt.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(n=a.read_shift(4),n!==1&&n!==2)throw new Error("Unrecognized #Sets: "+n);if(i=a.read_shift(16),o=a.read_shift(4),n===1&&o!==a.l)throw new Error("Length mismatch: "+o+" !== "+a.l);n===2&&(l=a.read_shift(16),c=a.read_shift(4));var p=mp(a,s),f={SystemIdentifier:d};for(var g in p)f[g]=p[g];if(f.FMTID=i,n===1)return f;if(c-a.l==2&&(a.l+=2),a.l!==c)throw new Error("Length mismatch 2: "+a.l+" !== "+c);var x;try{x=mp(a,null)}catch{}for(g in x)f[g]=x[g];return f.FMTID=[i,l],f}function Ya(t,s){return t.read_shift(s),null}function c6(t,s,r){for(var a=[],n=t.l+s;t.l<n;)a.push(r(t,n-t.l));if(n!==t.l)throw new Error("Slurp error");return a}function Xt(t,s){return t.read_shift(s)===1}function is(t){return t.read_shift(2,"u")}function Wv(t,s){return c6(t,s,is)}function d6(t){var s=t.read_shift(1),r=t.read_shift(1);return r===1?s:s===1}function Uo(t,s,r){var a=t.read_shift(r&&r.biff>=12?2:1),n="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=t.read_shift(1);i&&(n="dbcs-cont")}else r.biff==12&&(n="wstr");r.biff>=2&&r.biff<=5&&(n="cpstr");var l=a?t.read_shift(a,n):"";return l}function u6(t){var s=t.read_shift(2),r=t.read_shift(1),a=r&4,n=r&8,i=1+(r&1),l=0,o,c={};n&&(l=t.read_shift(2)),a&&(o=t.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",u=s===0?"":t.read_shift(s,d);return n&&(t.l+=4*l),a&&(t.l+=o),c.t=u,n||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function oi(t,s,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(s,"cpstr");if(r.biff>=12)return t.read_shift(s,"dbcs-cont")}var n=t.read_shift(1);return n===0?a=t.read_shift(s,"sbcs-cont"):a=t.read_shift(s,"dbcs-cont"),a}function zo(t,s,r){var a=t.read_shift(r&&r.biff==2?1:2);return a===0?(t.l++,""):oi(t,a,r)}function gi(t,s,r){if(r.biff>5)return zo(t,s,r);var a=t.read_shift(1);return a===0?(t.l++,""):t.read_shift(a,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function x6(t){var s=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[s,r]}function m6(t){var s=t.read_shift(4),r=t.l,a=!1;s>24&&(t.l+=s-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),t.l=r);var n=t.read_shift((a?s-24:s)>>1,"utf16le").replace(Qs,"");return a&&(t.l+=24),n}function h6(t){for(var s=t.read_shift(2),r="";s-- >0;)r+="../";var a=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var n=t.read_shift(4);if(n===0)return r+a.replace(/\\/g,"/");var i=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var l=t.read_shift(i>>1,"utf16le").replace(Qs,"");return r+l}function f6(t,s){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return m6(t);case"0303000000000000c000000000000046":return h6(t);default:throw new Error("Unsupported Moniker "+r)}}function gc(t){var s=t.read_shift(4),r=s>0?t.read_shift(s,"utf16le").replace(Qs,""):"";return r}function p6(t,s){var r=t.l+s,a=t.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var n=t.read_shift(2);t.l+=2;var i,l,o,c,d="",u,p;n&16&&(i=gc(t,r-t.l)),n&128&&(l=gc(t,r-t.l)),(n&257)===257&&(o=gc(t,r-t.l)),(n&257)===1&&(c=f6(t,r-t.l)),n&8&&(d=gc(t,r-t.l)),n&32&&(u=t.read_shift(16)),n&64&&(p=Lm(t)),t.l=r;var f=l||o||c||"";f&&d&&(f+="#"+d),f||(f="#"+d),n&2&&f.charAt(0)=="/"&&f.charAt(1)!="/"&&(f="file://"+f);var g={Target:f};return u&&(g.guid=u),p&&(g.time=p),i&&(g.Tooltip=i),g}function Vv(t){var s=t.read_shift(1),r=t.read_shift(1),a=t.read_shift(1),n=t.read_shift(1);return[s,r,a,n]}function Hv(t,s){var r=Vv(t);return r[3]=0,r}function ka(t){var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(2);return{r:s,c:r,ixfe:a}}function g6(t){var s=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:s,flags:r}}function y6(t,s,r){return s===0?"":gi(t,s,r)}function b6(t,s,r){var a=r.biff>8?4:2,n=t.read_shift(a),i=t.read_shift(a,"i"),l=t.read_shift(a,"i");return[n,i,l]}function Gv(t){var s=t.read_shift(2),r=Dm(t);return[s,r]}function v6(t,s,r){t.l+=4,s-=4;var a=t.l+s,n=Uo(t,s,r),i=t.read_shift(2);if(a-=t.l,i!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+i);return t.l+=i,n}function Jd(t){var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(2),n=t.read_shift(2);return{s:{c:a,r:s},e:{c:n,r}}}function qv(t){var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(1),n=t.read_shift(1);return{s:{c:a,r:s},e:{c:n,r}}}var j6=qv;function Jv(t){t.l+=4;var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(2);return t.l+=12,[r,s,a]}function w6(t){var s={};return t.l+=4,t.l+=16,s.fSharedNote=t.read_shift(2),t.l+=4,s}function N6(t){var s={};return t.l+=4,t.cf=t.read_shift(2),s}function Ls(t){t.l+=2,t.l+=t.read_shift(2)}var k6={0:Ls,4:Ls,5:Ls,6:Ls,7:N6,8:Ls,9:Ls,10:Ls,11:Ls,12:Ls,13:w6,14:Ls,15:Ls,16:Ls,17:Ls,18:Ls,19:Ls,20:Ls,21:Jv};function S6(t,s){for(var r=t.l+s,a=[];t.l<r;){var n=t.read_shift(2);t.l-=2;try{a.push(k6[n](t,r-t.l))}catch{return t.l=r,a}}return t.l!=r&&(t.l=r),a}function yc(t,s){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),s-=2,s>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(s>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(s),r}function C6(t,s){return s===0||t.read_shift(2),1200}function _6(t,s,r){if(r.enc)return t.l+=s,"";var a=t.l,n=gi(t,0,r);return t.read_shift(s+a-t.l),n}function T6(t,s,r){var a=r&&r.biff==8||s==2?t.read_shift(2):(t.l+=s,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function E6(t,s,r){var a=t.read_shift(4),n=t.read_shift(1)&3,i=t.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var l=Uo(t,0,r);return l.length===0&&(l="Sheet1"),{pos:a,hs:n,dt:i,name:l}}function A6(t,s){for(var r=t.l+s,a=t.read_shift(4),n=t.read_shift(4),i=[],l=0;l!=n&&t.l<r;++l)i.push(u6(t));return i.Count=a,i.Unique=n,i}function F6(t,s){var r={};return r.dsst=t.read_shift(2),t.l+=s-2,r}function P6(t){var s={};s.r=t.read_shift(2),s.c=t.read_shift(2),s.cnt=t.read_shift(2)-s.c;var r=t.read_shift(2);t.l+=4;var a=t.read_shift(1);return t.l+=3,a&7&&(s.level=a&7),a&32&&(s.hidden=!0),a&64&&(s.hpt=r/20),s}function D6(t){var s=g6(t);if(s.type!=2211)throw new Error("Invalid Future Record "+s.type);var r=t.read_shift(4);return r!==0}function R6(t){return t.read_shift(2),t.read_shift(4)}function fp(t,s,r){var a=0;r&&r.biff==2||(a=t.read_shift(2));var n=t.read_shift(2);r&&r.biff==2&&(a=1-(n>>15),n&=32767);var i={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[i,n]}function L6(t){var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2),o=t.read_shift(2),c=t.read_shift(2),d=t.read_shift(2);return{Pos:[s,r],Dim:[a,n],Flags:i,CurTab:l,FirstTab:o,Selected:c,TabRatio:d}}function O6(t,s,r){if(r&&r.biff>=2&&r.biff<5)return{};var a=t.read_shift(2);return{RTL:a&64}}function I6(){}function M6(t,s,r){var a={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return a.name=Uo(t,0,r),a}function B6(t){var s=ka(t);return s.isst=t.read_shift(4),s}function $6(t,s,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=t.l+s,n=ka(t);r.biff==2&&t.l++;var i=zo(t,a-t.l,r);return n.val=i,n}function U6(t,s,r){var a=t.read_shift(2),n=gi(t,0,r);return[a,n]}var z6=gi;function pp(t,s,r){var a=t.l+s,n=r.biff==8||!r.biff?4:2,i=t.read_shift(n),l=t.read_shift(n),o=t.read_shift(2),c=t.read_shift(2);return t.l=a,{s:{r:i,c:o},e:{r:l,c}}}function W6(t){var s=t.read_shift(2),r=t.read_shift(2),a=Gv(t);return{r:s,c:r,ixfe:a[0],rknum:a[1]}}function V6(t,s){for(var r=t.l+s-2,a=t.read_shift(2),n=t.read_shift(2),i=[];t.l<r;)i.push(Gv(t));if(t.l!==r)throw new Error("MulRK read error");var l=t.read_shift(2);if(i.length!=l-n+1)throw new Error("MulRK length mismatch");return{r:a,c:n,C:l,rkrec:i}}function H6(t,s){for(var r=t.l+s-2,a=t.read_shift(2),n=t.read_shift(2),i=[];t.l<r;)i.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var l=t.read_shift(2);if(i.length!=l-n+1)throw new Error("MulBlank length mismatch");return{r:a,c:n,C:l,ixfe:i}}function G6(t,s,r,a){var n={},i=t.read_shift(4),l=t.read_shift(4),o=t.read_shift(4),c=t.read_shift(2);return n.patternType=WC[o>>26],a.cellStyles&&(n.alc=i&7,n.fWrap=i>>3&1,n.alcV=i>>4&7,n.fJustLast=i>>7&1,n.trot=i>>8&255,n.cIndent=i>>16&15,n.fShrinkToFit=i>>20&1,n.iReadOrder=i>>22&2,n.fAtrNum=i>>26&1,n.fAtrFnt=i>>27&1,n.fAtrAlc=i>>28&1,n.fAtrBdr=i>>29&1,n.fAtrPat=i>>30&1,n.fAtrProt=i>>31&1,n.dgLeft=l&15,n.dgRight=l>>4&15,n.dgTop=l>>8&15,n.dgBottom=l>>12&15,n.icvLeft=l>>16&127,n.icvRight=l>>23&127,n.grbitDiag=l>>30&3,n.icvTop=o&127,n.icvBottom=o>>7&127,n.icvDiag=o>>14&127,n.dgDiag=o>>21&15,n.icvFore=c&127,n.icvBack=c>>7&127,n.fsxButton=c>>14&1),n}function q6(t,s,r){var a={};return a.ifnt=t.read_shift(2),a.numFmtId=t.read_shift(2),a.flags=t.read_shift(2),a.fStyle=a.flags>>2&1,s-=6,a.data=G6(t,s,a.fStyle,r),a}function J6(t){t.l+=4;var s=[t.read_shift(2),t.read_shift(2)];if(s[0]!==0&&s[0]--,s[1]!==0&&s[1]--,s[0]>7||s[1]>7)throw new Error("Bad Gutters: "+s.join("|"));return s}function gp(t,s,r){var a=ka(t);(r.biff==2||s==9)&&++t.l;var n=d6(t);return a.val=n,a.t=n===!0||n===!1?"b":"e",a}function K6(t,s,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=ka(t),n=Bs(t);return a.val=n,a}var yp=y6;function Y6(t,s,r){var a=t.l+s,n=t.read_shift(2),i=t.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,n];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var l=oi(t,i),o=[];a>t.l;)o.push(zo(t));return[i,n,l,o]}function bp(t,s,r){var a=t.read_shift(2),n,i={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return r.sbcch===14849&&(n=v6(t,s-2,r)),i.body=n||t.read_shift(s-2),typeof n=="string"&&(i.Name=n),i}var X6=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function vp(t,s,r){var a=t.l+s,n=t.read_shift(2),i=t.read_shift(1),l=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),c=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var d=oi(t,l,r);n&32&&(d=X6[d.charCodeAt(0)]);var u=a-t.l;r&&r.biff==2&&--u;var p=a==t.l||o===0||!(u>0)?[]:PE(t,u,r,o);return{chKey:i,Name:d,itab:c,rgce:p}}function Kv(t,s,r){if(r.biff<8)return Q6(t,s,r);for(var a=[],n=t.l+s,i=t.read_shift(r.biff>8?4:2);i--!==0;)a.push(b6(t,r.biff>8?12:6,r));if(t.l!=n)throw new Error("Bad ExternSheet: "+t.l+" != "+n);return a}function Q6(t,s,r){t[t.l+1]==3&&t[t.l]++;var a=Uo(t,s,r);return a.charCodeAt(0)==3?a.slice(1):a}function Z6(t,s,r){if(r.biff<8){t.l+=s;return}var a=t.read_shift(2),n=t.read_shift(2),i=oi(t,a,r),l=oi(t,n,r);return[i,l]}function e_(t,s,r){var a=qv(t);t.l++;var n=t.read_shift(1);return s-=8,[DE(t,s,r),n,a]}function jp(t,s,r){var a=j6(t);switch(r.biff){case 2:t.l++,s-=7;break;case 3:case 4:t.l+=2,s-=8;break;default:t.l+=6,s-=12}return[a,AE(t,s,r)]}function t_(t){var s=t.read_shift(4)!==0,r=t.read_shift(4)!==0,a=t.read_shift(4);return[s,r,a]}function s_(t,s,r){if(!(r.biff<8)){var a=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2),o=gi(t,0,r);return r.biff<8&&t.read_shift(1),[{r:a,c:n},o,l,i]}}function r_(t,s,r){return s_(t,s,r)}function a_(t,s){for(var r=[],a=t.read_shift(2);a--;)r.push(Jd(t));return r}function n_(t,s,r){if(r&&r.biff<8)return l_(t,s,r);var a=Jv(t),n=S6(t,s-22,a[1]);return{cmo:a,ft:n}}var i_={8:function(t,s){var r=t.l+s;t.l+=10;var a=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var n=t.read_shift(1);return t.l+=n,t.l=r,{fmt:a}}};function l_(t,s,r){t.l+=4;var a=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,s-=36;var l=[];return l.push((i_[a]||Ws)(t,s,r)),{cmo:[n,a,i],ft:l}}function o_(t,s,r){var a=t.l,n="";try{t.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],l;[0,5,7,11,12,14].indexOf(i)==-1?t.l+=6:l=x6(t,6,r);var o=t.read_shift(2);t.read_shift(2),is(t,2);var c=t.read_shift(2);t.l+=c;for(var d=1;d<t.lens.length-1;++d){if(t.l-a!=t.lens[d])throw new Error("TxO: bad continue record");var u=t[t.l],p=oi(t,t.lens[d+1]-t.lens[d]-1);if(n+=p,n.length>=(u?o:2*o))break}if(n.length!==o&&n.length!==o*2)throw new Error("cchText: "+o+" != "+n.length);return t.l=a+s,{t:n}}catch{return t.l=a+s,{t:n}}}function c_(t,s){var r=Jd(t);t.l+=16;var a=p6(t,s-24);return[r,a]}function d_(t,s){t.read_shift(2);var r=Jd(t),a=t.read_shift((s-10)/2,"dbcs-cont");return a=a.replace(Qs,""),[r,a]}function u_(t){var s=[0,0],r;return r=t.read_shift(2),s[0]=dp[r]||r,r=t.read_shift(2),s[1]=dp[r]||r,s}function x_(t){for(var s=t.read_shift(2),r=[];s-- >0;)r.push(Hv(t));return r}function m_(t){for(var s=t.read_shift(2),r=[];s-- >0;)r.push(Hv(t));return r}function h_(t){t.l+=2;var s={cxfs:0,crc:0};return s.cxfs=t.read_shift(2),s.crc=t.read_shift(4),s}function Yv(t,s,r){if(!r.cellStyles)return Ws(t,s);var a=r&&r.biff>=12?4:2,n=t.read_shift(a),i=t.read_shift(a),l=t.read_shift(a),o=t.read_shift(a),c=t.read_shift(2);a==2&&(t.l+=2);var d={s:n,e:i,w:l,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function f_(t,s){var r={};return s<32||(t.l+=16,r.header=Bs(t),r.footer=Bs(t),t.l+=2),r}function p_(t,s,r){var a={area:!1};if(r.biff!=5)return t.l+=s,a;var n=t.read_shift(1);return t.l+=3,n&16&&(a.area=!0),a}var g_=ka,y_=Wv,b_=zo;function v_(t){var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(4),n={fmt:s,env:r,len:a,data:t.slice(t.l,t.l+a)};return t.l+=a,n}function j_(t,s,r){r.biffguess&&r.biff==5&&(r.biff=2);var a=ka(t);++t.l;var n=gi(t,s-7,r);return a.t="str",a.val=n,a}function w_(t){var s=ka(t);++t.l;var r=Bs(t);return s.t="n",s.val=r,s}function N_(t){var s=ka(t);++t.l;var r=t.read_shift(2);return s.t="n",s.val=r,s}function k_(t){var s=t.read_shift(1);return s===0?(t.l++,""):t.read_shift(s,"sbcs-cont")}function S_(t,s){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=s-13}function C_(t,s,r){var a=t.l+s,n=ka(t),i=t.read_shift(2),l=oi(t,i,r);return t.l=a,n.t="str",n.val=l,n}var __=[2,3,48,49,131,139,140,245],wp=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},s=km({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var d=[],u=Cn(1);switch(c.type){case"base64":u=Qr(Nr(o));break;case"binary":u=Qr(o);break;case"buffer":case"array":u=o;break}_s(u,0);var p=u.read_shift(1),f=!!(p&136),g=!1,x=!1;switch(p){case 2:break;case 3:break;case 48:g=!0,f=!0;break;case 49:g=!0,f=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+p.toString(16))}var h=0,m=521;p==2&&(h=u.read_shift(2)),u.l+=3,p!=2&&(h=u.read_shift(4)),h>1048576&&(h=1e6),p!=2&&(m=u.read_shift(2));var j=u.read_shift(2),v=c.codepage||1252;p!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(v=t[u[u.l]]),u.l+=1,u.l+=2),x&&(u.l+=36);for(var N=[],S={},A=Math.min(u.length,p==2?521:m-10-(g?264:0)),T=x?32:11;u.l<A&&u[u.l]!=13;)switch(S={},S.name=So.utils.decode(v,u.slice(u.l,u.l+T)).replace(/[\u0000\r\n].*$/g,""),u.l+=T,S.type=String.fromCharCode(u.read_shift(1)),p!=2&&!x&&(S.offset=u.read_shift(4)),S.len=u.read_shift(1),p==2&&(S.offset=u.read_shift(2)),S.dec=u.read_shift(1),S.name.length&&N.push(S),p!=2&&(u.l+=x?13:14),S.type){case"B":(!g||S.len!=8)&&c.WTF&&console.log("Skipping "+S.name+":"+S.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+S.name+":"+S.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+S.type)}if(u[u.l]!==13&&(u.l=m-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=m;var k=0,_=0;for(d[0]=[],_=0;_!=N.length;++_)d[0][_]=N[_].name;for(;h-- >0;){if(u[u.l]===42){u.l+=j;continue}for(++u.l,d[++k]=[],_=0,_=0;_!=N.length;++_){var y=u.slice(u.l,u.l+N[_].len);u.l+=N[_].len,_s(y,0);var w=So.utils.decode(v,y);switch(N[_].type){case"C":w.trim().length&&(d[k][_]=w.replace(/\s+$/,""));break;case"D":w.length===8?d[k][_]=new Date(+w.slice(0,4),+w.slice(4,6)-1,+w.slice(6,8)):d[k][_]=w;break;case"F":d[k][_]=parseFloat(w.trim());break;case"+":case"I":d[k][_]=x?y.read_shift(-4,"i")^2147483648:y.read_shift(4,"i");break;case"L":switch(w.trim().toUpperCase()){case"Y":case"T":d[k][_]=!0;break;case"N":case"F":d[k][_]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+w+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+p.toString(16));d[k][_]="##MEMO##"+(x?parseInt(w.trim(),10):y.read_shift(4));break;case"N":w=w.replace(/\u0000/g,"").trim(),w&&w!="."&&(d[k][_]=+w||0);break;case"@":d[k][_]=new Date(y.read_shift(-8,"f")-621356832e5);break;case"T":d[k][_]=new Date((y.read_shift(4)-2440588)*864e5+y.read_shift(4));break;case"Y":d[k][_]=y.read_shift(4,"i")/1e4+y.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[k][_]=-y.read_shift(-8,"f");break;case"B":if(g&&N[_].len==8){d[k][_]=y.read_shift(8,"f");break}case"G":case"P":y.l+=N[_].len;break;case"0":if(N[_].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+N[_].type)}}}if(p!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=N,d}function a(o,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=ul(r(o,d),d);return u["!cols"]=d.DBF.map(function(p){return{wch:p.len,DBF:p}}),delete d.DBF,u}function n(o,c){try{return Dn(a(o,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function l(o,c){var d=c||{};if(+d.codepage>=0&&Zr(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=ex(),p=dx(o,{header:1,raw:!0,cellDates:!0}),f=p[0],g=p.slice(1),x=o["!cols"]||[],h=0,m=0,j=0,v=1;for(h=0;h<f.length;++h){if(((x[h]||{}).DBF||{}).name){f[h]=x[h].DBF.name,++j;continue}if(f[h]!=null){if(++j,typeof f[h]=="number"&&(f[h]=f[h].toString(10)),typeof f[h]!="string")throw new Error("DBF Invalid column name "+f[h]+" |"+typeof f[h]+"|");if(f.indexOf(f[h])!==h){for(m=0;m<1024;++m)if(f.indexOf(f[h]+"_"+m)==-1){f[h]+="_"+m;break}}}}var N=Kt(o["!ref"]),S=[],A=[],T=[];for(h=0;h<=N.e.c-N.s.c;++h){var k="",_="",y=0,w=[];for(m=0;m<g.length;++m)g[m][h]!=null&&w.push(g[m][h]);if(w.length==0||f[h]==null){S[h]="?";continue}for(m=0;m<w.length;++m){switch(typeof w[m]){case"number":_="B";break;case"string":_="C";break;case"boolean":_="L";break;case"object":_=w[m]instanceof Date?"D":"C";break;default:_="C"}y=Math.max(y,String(w[m]).length),k=k&&k!=_?"C":_}y>250&&(y=250),_=((x[h]||{}).DBF||{}).type,_=="C"&&x[h].DBF.len>y&&(y=x[h].DBF.len),k=="B"&&_=="N"&&(k="N",T[h]=x[h].DBF.dec,y=x[h].DBF.len),A[h]=k=="C"||_=="N"?y:i[k]||0,v+=A[h],S[h]=k}var R=u.next(32);for(R.write_shift(4,318902576),R.write_shift(4,g.length),R.write_shift(2,296+32*j),R.write_shift(2,v),h=0;h<4;++h)R.write_shift(4,0);for(R.write_shift(4,0|(+s[Kb]||3)<<8),h=0,m=0;h<f.length;++h)if(f[h]!=null){var P=u.next(32),H=(f[h].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);P.write_shift(1,H,"sbcs"),P.write_shift(1,S[h]=="?"?"C":S[h],"sbcs"),P.write_shift(4,m),P.write_shift(1,A[h]||i[S[h]]||0),P.write_shift(1,T[h]||0),P.write_shift(1,2),P.write_shift(4,0),P.write_shift(1,0),P.write_shift(4,0),P.write_shift(4,0),m+=A[h]||i[S[h]]||0}var L=u.next(264);for(L.write_shift(4,13),h=0;h<65;++h)L.write_shift(4,0);for(h=0;h<g.length;++h){var O=u.next(v);for(O.write_shift(1,0),m=0;m<f.length;++m)if(f[m]!=null)switch(S[m]){case"L":O.write_shift(1,g[h][m]==null?63:g[h][m]?84:70);break;case"B":O.write_shift(8,g[h][m]||0,"f");break;case"N":var W="0";for(typeof g[h][m]=="number"&&(W=g[h][m].toFixed(T[m]||0)),j=0;j<A[m]-W.length;++j)O.write_shift(1,32);O.write_shift(1,W,"sbcs");break;case"D":g[h][m]?(O.write_shift(4,("0000"+g[h][m].getFullYear()).slice(-4),"sbcs"),O.write_shift(2,("00"+(g[h][m].getMonth()+1)).slice(-2),"sbcs"),O.write_shift(2,("00"+g[h][m].getDate()).slice(-2),"sbcs")):O.write_shift(8,"00000000","sbcs");break;case"C":var Q=String(g[h][m]!=null?g[h][m]:"").slice(0,A[m]);for(O.write_shift(1,Q,"sbcs"),j=0;j<A[m]-Q.length;++j)O.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:n,to_sheet:a,from_sheet:l}}(),T_=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},s=new RegExp("\x1BN("+ba(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(f,g){var x=t[g];return typeof x=="number"?Mf(x):x},a=function(f,g,x){var h=g.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return h==59?f:Mf(h)};t["|"]=254;function n(f,g){switch(g.type){case"base64":return i(Nr(f),g);case"binary":return i(f,g);case"buffer":return i(gt&&Buffer.isBuffer(f)?f.toString("binary"):mi(f),g);case"array":return i(li(f),g)}throw new Error("Unrecognized type "+g.type)}function i(f,g){var x=f.split(/[\n\r]+/),h=-1,m=-1,j=0,v=0,N=[],S=[],A=null,T={},k=[],_=[],y=[],w=0,R;for(+g.codepage>=0&&Zr(+g.codepage);j!==x.length;++j){w=0;var P=x[j].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(s,r),H=P.replace(/;;/g,"\0").split(";").map(function(Y){return Y.replace(/\u0000/g,";")}),L=H[0],O;if(P.length>0)switch(L){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":H[1].charAt(0)=="P"&&S.push(P.slice(3).replace(/;;/g,";"));break;case"C":var W=!1,Q=!1,D=!1,F=!1,V=-1,te=-1;for(v=1;v<H.length;++v)switch(H[v].charAt(0)){case"A":break;case"X":m=parseInt(H[v].slice(1))-1,Q=!0;break;case"Y":for(h=parseInt(H[v].slice(1))-1,Q||(m=0),R=N.length;R<=h;++R)N[R]=[];break;case"K":O=H[v].slice(1),O.charAt(0)==='"'?O=O.slice(1,O.length-1):O==="TRUE"?O=!0:O==="FALSE"?O=!1:isNaN(aa(O))?isNaN(el(O).getDate())||(O=ks(O)):(O=aa(O),A!==null&&cl(A)&&(O=qd(O))),W=!0;break;case"E":F=!0;var I=Vi(H[v].slice(1),{r:h,c:m});N[h][m]=[N[h][m],I];break;case"S":D=!0,N[h][m]=[N[h][m],"S5S"];break;case"G":break;case"R":V=parseInt(H[v].slice(1))-1;break;case"C":te=parseInt(H[v].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+P)}if(W&&(N[h][m]&&N[h][m].length==2?N[h][m][0]=O:N[h][m]=O,A=null),D){if(F)throw new Error("SYLK shared formula cannot have own formula");var U=V>-1&&N[V][te];if(!U||!U[1])throw new Error("SYLK shared formula cannot find base");N[h][m][1]=ij(U[1],{r:h-V,c:m-te})}break;case"F":var z=0;for(v=1;v<H.length;++v)switch(H[v].charAt(0)){case"X":m=parseInt(H[v].slice(1))-1,++z;break;case"Y":for(h=parseInt(H[v].slice(1))-1,R=N.length;R<=h;++R)N[R]=[];break;case"M":w=parseInt(H[v].slice(1))/20;break;case"F":break;case"G":break;case"P":A=S[parseInt(H[v].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(y=H[v].slice(1).split(" "),R=parseInt(y[0],10);R<=parseInt(y[1],10);++R)w=parseInt(y[2],10),_[R-1]=w===0?{hidden:!0}:{wch:w},tl(_[R-1]);break;case"C":m=parseInt(H[v].slice(1))-1,_[m]||(_[m]={});break;case"R":h=parseInt(H[v].slice(1))-1,k[h]||(k[h]={}),w>0?(k[h].hpt=w,k[h].hpx=Fo(w)):w===0&&(k[h].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+P)}z<1&&(A=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+P)}}return k.length>0&&(T["!rows"]=k),_.length>0&&(T["!cols"]=_),g&&g.sheetRows&&(N=N.slice(0,g.sheetRows)),[N,T]}function l(f,g){var x=n(f,g),h=x[0],m=x[1],j=ul(h,g);return ba(m).forEach(function(v){j[v]=m[v]}),j}function o(f,g){return Dn(l(f,g),g)}function c(f,g,x,h){var m="C;Y"+(x+1)+";X"+(h+1)+";K";switch(f.t){case"n":m+=f.v||0,f.f&&!f.F&&(m+=";E"+hT(f.f,{r:x,c:h}));break;case"b":m+=f.v?"TRUE":"FALSE";break;case"e":m+=f.w||f.v;break;case"d":m+='"'+(f.w||f.v)+'"';break;case"s":m+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return m}function d(f,g){g.forEach(function(x,h){var m="F;W"+(h+1)+" "+(h+1)+" ";x.hidden?m+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=wd(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=Nd(x.wpx)),typeof x.wch=="number"&&(m+=Math.round(x.wch))),m.charAt(m.length-1)!=" "&&f.push(m)})}function u(f,g){g.forEach(function(x,h){var m="F;";x.hidden?m+="M0;":x.hpt?m+="M"+20*x.hpt+";":x.hpx&&(m+="M"+20*rj(x.hpx)+";"),m.length>2&&f.push(m+"R"+(h+1))})}function p(f,g){var x=["ID;PWXL;N;E"],h=[],m=Kt(f["!ref"]),j,v=Array.isArray(f),N=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),f["!cols"]&&d(x,f["!cols"]),f["!rows"]&&u(x,f["!rows"]),x.push("B;Y"+(m.e.r-m.s.r+1)+";X"+(m.e.c-m.s.c+1)+";D"+[m.s.c,m.s.r,m.e.c,m.e.r].join(" "));for(var S=m.s.r;S<=m.e.r;++S)for(var A=m.s.c;A<=m.e.c;++A){var T=Qe({r:S,c:A});j=v?(f[S]||[])[A]:f[T],!(!j||j.v==null&&(!j.f||j.F))&&h.push(c(j,f,S,A))}return x.join(N)+N+h.join(N)+N+"E"+N}return{to_workbook:o,to_sheet:l,from_sheet:p}}(),E_=function(){function t(i,l){switch(l.type){case"base64":return s(Nr(i),l);case"binary":return s(i,l);case"buffer":return s(gt&&Buffer.isBuffer(i)?i.toString("binary"):mi(i),l);case"array":return s(li(i),l)}throw new Error("Unrecognized type "+l.type)}function s(i,l){for(var o=i.split(`
`),c=-1,d=-1,u=0,p=[];u!==o.length;++u){if(o[u].trim()==="BOT"){p[++c]=[],d=0;continue}if(!(c<0)){var f=o[u].trim().split(","),g=f[0],x=f[1];++u;for(var h=o[u]||"";(h.match(/["]/g)||[]).length&1&&u<o.length-1;)h+=`
`+o[++u];switch(h=h.trim(),+g){case-1:if(h==="BOT"){p[++c]=[],d=0;continue}else if(h!=="EOD")throw new Error("Unrecognized DIF special command "+h);break;case 0:h==="TRUE"?p[c][d]=!0:h==="FALSE"?p[c][d]=!1:isNaN(aa(x))?isNaN(el(x).getDate())?p[c][d]=x:p[c][d]=ks(x):p[c][d]=aa(x),++d;break;case 1:h=h.slice(1,h.length-1),h=h.replace(/""/g,'"'),h&&h.match(/^=".*"$/)&&(h=h.slice(2,-1)),p[c][d++]=h!==""?h:null;break}if(h==="EOD")break}}return l&&l.sheetRows&&(p=p.slice(0,l.sheetRows)),p}function r(i,l){return ul(t(i,l),l)}function a(i,l){return Dn(r(i,l),l)}var n=function(){var i=function(c,d,u,p,f){c.push(d),c.push(u+","+p),c.push('"'+f.replace(/"/g,'""')+'"')},l=function(c,d,u,p){c.push(d+","+u),c.push(d==1?'"'+p.replace(/"/g,'""')+'"':p)};return function(c){var d=[],u=Kt(c["!ref"]),p,f=Array.isArray(c);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,u.e.r-u.s.r+1,""),i(d,"TUPLES",0,u.e.c-u.s.c+1,""),i(d,"DATA",0,0,"");for(var g=u.s.r;g<=u.e.r;++g){l(d,-1,0,"BOT");for(var x=u.s.c;x<=u.e.c;++x){var h=Qe({r:g,c:x});if(p=f?(c[g]||[])[x]:c[h],!p){l(d,1,0,"");continue}switch(p.t){case"n":var m=p.w;!m&&p.v!=null&&(m=p.v),m==null?p.f&&!p.F?l(d,1,0,"="+p.f):l(d,1,0,""):l(d,0,m,"V");break;case"b":l(d,0,p.v?1:0,p.v?"TRUE":"FALSE");break;case"s":l(d,1,0,isNaN(p.v)?p.v:'="'+p.v+'"');break;case"d":p.w||(p.w=Br(p.z||tt[14],Zs(ks(p.v)))),l(d,0,p.w,"V");break;default:l(d,1,0,"")}}}l(d,-1,0,"EOD");var j=`\r
`,v=d.join(j);return v}}();return{to_workbook:a,to_sheet:r,from_sheet:n}}(),A_=function(){function t(p){return p.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function s(p){return p.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(p,f){for(var g=p.split(`
`),x=-1,h=-1,m=0,j=[];m!==g.length;++m){var v=g[m].trim().split(":");if(v[0]==="cell"){var N=Ks(v[1]);if(j.length<=N.r)for(x=j.length;x<=N.r;++x)j[x]||(j[x]=[]);switch(x=N.r,h=N.c,v[2]){case"t":j[x][h]=t(v[3]);break;case"v":j[x][h]=+v[3];break;case"vtf":var S=v[v.length-1];case"vtc":switch(v[3]){case"nl":j[x][h]=!!+v[4];break;default:j[x][h]=+v[4];break}v[2]=="vtf"&&(j[x][h]=[j[x][h],S])}}}return f&&f.sheetRows&&(j=j.slice(0,f.sheetRows)),j}function a(p,f){return ul(r(p,f),f)}function n(p,f){return Dn(a(p,f),f)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),l=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(p){if(!p||!p["!ref"])return"";for(var f=[],g=[],x,h="",m=dl(p["!ref"]),j=Array.isArray(p),v=m.s.r;v<=m.e.r;++v)for(var N=m.s.c;N<=m.e.c;++N)if(h=Qe({r:v,c:N}),x=j?(p[v]||[])[N]:p[h],!(!x||x.v==null||x.t==="z")){switch(g=["cell",h,"t"],x.t){case"s":case"str":g.push(s(x.v));break;case"n":x.f?(g[2]="vtf",g[3]="n",g[4]=x.v,g[5]=s(x.f)):(g[2]="v",g[3]=x.v);break;case"b":g[2]="vt"+(x.f?"f":"c"),g[3]="nl",g[4]=x.v?"1":"0",g[5]=s(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var S=Zs(ks(x.v));g[2]="vtc",g[3]="nd",g[4]=""+S,g[5]=x.w||Br(x.z||tt[14],S);break;case"e":continue}f.push(g.join(":"))}return f.push("sheet:c:"+(m.e.c-m.s.c+1)+":r:"+(m.e.r-m.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function u(p){return[i,l,o,l,d(p),c].join(`
`)}return{to_workbook:n,to_sheet:a,from_sheet:u}}(),Eo=function(){function t(u,p,f,g,x){x.raw?p[f][g]=u:u===""||(u==="TRUE"?p[f][g]=!0:u==="FALSE"?p[f][g]=!1:isNaN(aa(u))?isNaN(el(u).getDate())?p[f][g]=u:p[f][g]=ks(u):p[f][g]=aa(u))}function s(u,p){var f=p||{},g=[];if(!u||u.length===0)return g;for(var x=u.split(/[\r\n]/),h=x.length-1;h>=0&&x[h].length===0;)--h;for(var m=10,j=0,v=0;v<=h;++v)j=x[v].indexOf(" "),j==-1?j=x[v].length:j++,m=Math.max(m,j);for(v=0;v<=h;++v){g[v]=[];var N=0;for(t(x[v].slice(0,m).trim(),g,v,N,f),N=1;N<=(x[v].length-m)/10+1;++N)t(x[v].slice(m+(N-1)*10,m+N*10).trim(),g,v,N,f)}return f.sheetRows&&(g=g.slice(0,f.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function n(u){for(var p={},f=!1,g=0,x=0;g<u.length;++g)(x=u.charCodeAt(g))==34?f=!f:!f&&x in r&&(p[x]=(p[x]||0)+1);x=[];for(g in p)Object.prototype.hasOwnProperty.call(p,g)&&x.push([p[g],g]);if(!x.length){p=a;for(g in p)Object.prototype.hasOwnProperty.call(p,g)&&x.push([p[g],g])}return x.sort(function(h,m){return h[0]-m[0]||a[h[1]]-a[m[1]]}),r[x.pop()[1]]||44}function i(u,p){var f=p||{},g="",x=f.dense?[]:{},h={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(g=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(g=u.charAt(4),u=u.slice(6)):g=n(u.slice(0,1024)):f&&f.FS?g=f.FS:g=n(u.slice(0,1024));var m=0,j=0,v=0,N=0,S=0,A=g.charCodeAt(0),T=!1,k=0,_=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var y=f.dateNF!=null?US(f.dateNF):null;function w(){var R=u.slice(N,S),P={};if(R.charAt(0)=='"'&&R.charAt(R.length-1)=='"'&&(R=R.slice(1,-1).replace(/""/g,'"')),R.length===0)P.t="z";else if(f.raw)P.t="s",P.v=R;else if(R.trim().length===0)P.t="s",P.v=R;else if(R.charCodeAt(0)==61)R.charCodeAt(1)==34&&R.charCodeAt(R.length-1)==34?(P.t="s",P.v=R.slice(2,-1).replace(/""/g,'"')):pT(R)?(P.t="n",P.f=R.slice(1)):(P.t="s",P.v=R);else if(R=="TRUE")P.t="b",P.v=!0;else if(R=="FALSE")P.t="b",P.v=!1;else if(!isNaN(v=aa(R)))P.t="n",f.cellText!==!1&&(P.w=R),P.v=v;else if(!isNaN(el(R).getDate())||y&&R.match(y)){P.z=f.dateNF||tt[14];var H=0;y&&R.match(y)&&(R=zS(R,f.dateNF,R.match(y)||[]),H=1),f.cellDates?(P.t="d",P.v=ks(R,H)):(P.t="n",P.v=Zs(ks(R,H))),f.cellText!==!1&&(P.w=Br(P.z,P.v instanceof Date?Zs(P.v):P.v)),f.cellNF||delete P.z}else P.t="s",P.v=R;if(P.t=="z"||(f.dense?(x[m]||(x[m]=[]),x[m][j]=P):x[Qe({c:j,r:m})]=P),N=S+1,_=u.charCodeAt(N),h.e.c<j&&(h.e.c=j),h.e.r<m&&(h.e.r=m),k==A)++j;else if(j=0,++m,f.sheetRows&&f.sheetRows<=m)return!0}e:for(;S<u.length;++S)switch(k=u.charCodeAt(S)){case 34:_===34&&(T=!T);break;case A:case 10:case 13:if(!T&&w())break e;break}return S-N>0&&w(),x["!ref"]=vt(h),x}function l(u,p){return!(p&&p.PRN)||p.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,p):ul(s(u,p),p)}function o(u,p){var f="",g=p.type=="string"?[0,0,0,0]:Wm(u,p);switch(p.type){case"base64":f=Nr(u);break;case"binary":f=u;break;case"buffer":p.codepage==65001?f=u.toString("utf8"):p.codepage&&typeof So<"u"||(f=gt&&Buffer.isBuffer(u)?u.toString("binary"):mi(u));break;case"array":f=li(u);break;case"string":f=u;break;default:throw new Error("Unrecognized type "+p.type)}return g[0]==239&&g[1]==187&&g[2]==191?f=Rt(f.slice(3)):p.type!="string"&&p.type!="buffer"&&p.codepage==65001?f=Rt(f):p.type=="binary"&&typeof So<"u",f.slice(0,19)=="socialcalc:version:"?A_.to_sheet(p.type=="string"?f:Rt(f),p):l(f,p)}function c(u,p){return Dn(o(u,p),p)}function d(u){for(var p=[],f=Kt(u["!ref"]),g,x=Array.isArray(u),h=f.s.r;h<=f.e.r;++h){for(var m=[],j=f.s.c;j<=f.e.c;++j){var v=Qe({r:h,c:j});if(g=x?(u[h]||[])[j]:u[v],!g||g.v==null){m.push("          ");continue}for(var N=(g.w||(Wa(g),g.w)||"").slice(0,10);N.length<10;)N+=" ";m.push(N+(j===0?" ":""))}p.push(m.join(""))}return p.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:d}}();function F_(t,s){var r=s||{},a=!!r.WTF;r.WTF=!0;try{var n=T_.to_workbook(t,r);return r.WTF=a,n}catch(i){if(r.WTF=a,!i.message.match(/SYLK bad record ID/)&&a)throw i;return Eo.to_workbook(t,s)}}var Yl=function(){function t(I,U,z){if(I){_s(I,I.l||0);for(var Y=z.Enum||V;I.l<I.length;){var K=I.read_shift(2),ne=Y[K]||Y[65535],q=I.read_shift(2),re=I.l+q,xe=ne.f&&ne.f(I,q,z);if(I.l=re,U(xe,ne,K))return}}}function s(I,U){switch(U.type){case"base64":return r(Qr(Nr(I)),U);case"binary":return r(Qr(I),U);case"buffer":case"array":return r(I,U)}throw"Unsupported type "+U.type}function r(I,U){if(!I)return I;var z=U||{},Y=z.dense?[]:{},K="Sheet1",ne="",q=0,re={},xe=[],_e=[],X={s:{r:0,c:0},e:{r:0,c:0}},Ae=z.sheetRows||0;if(I[2]==0&&(I[3]==8||I[3]==9)&&I.length>=16&&I[14]==5&&I[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(I[2]==2)z.Enum=V,t(I,function(ve,st,St){switch(St){case 0:z.vers=ve,ve>=4096&&(z.qpro=!0);break;case 6:X=ve;break;case 204:ve&&(ne=ve);break;case 222:ne=ve;break;case 15:case 51:z.qpro||(ve[1].v=ve[1].v.slice(1));case 13:case 14:case 16:St==14&&(ve[2]&112)==112&&(ve[2]&15)>1&&(ve[2]&15)<15&&(ve[1].z=z.dateNF||tt[14],z.cellDates&&(ve[1].t="d",ve[1].v=qd(ve[1].v))),z.qpro&&ve[3]>q&&(Y["!ref"]=vt(X),re[K]=Y,xe.push(K),Y=z.dense?[]:{},X={s:{r:0,c:0},e:{r:0,c:0}},q=ve[3],K=ne||"Sheet"+(q+1),ne="");var fe=z.dense?(Y[ve[0].r]||[])[ve[0].c]:Y[Qe(ve[0])];if(fe){fe.t=ve[1].t,fe.v=ve[1].v,ve[1].z!=null&&(fe.z=ve[1].z),ve[1].f!=null&&(fe.f=ve[1].f);break}z.dense?(Y[ve[0].r]||(Y[ve[0].r]=[]),Y[ve[0].r][ve[0].c]=ve[1]):Y[Qe(ve[0])]=ve[1];break}},z);else if(I[2]==26||I[2]==14)z.Enum=te,I[2]==14&&(z.qpro=!0,I.l=0),t(I,function(ve,st,St){switch(St){case 204:K=ve;break;case 22:ve[1].v=ve[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ve[3]>q&&(Y["!ref"]=vt(X),re[K]=Y,xe.push(K),Y=z.dense?[]:{},X={s:{r:0,c:0},e:{r:0,c:0}},q=ve[3],K="Sheet"+(q+1)),Ae>0&&ve[0].r>=Ae)break;z.dense?(Y[ve[0].r]||(Y[ve[0].r]=[]),Y[ve[0].r][ve[0].c]=ve[1]):Y[Qe(ve[0])]=ve[1],X.e.c<ve[0].c&&(X.e.c=ve[0].c),X.e.r<ve[0].r&&(X.e.r=ve[0].r);break;case 27:ve[14e3]&&(_e[ve[14e3][0]]=ve[14e3][1]);break;case 1537:_e[ve[0]]=ve[1],ve[0]==q&&(K=ve[1]);break}},z);else throw new Error("Unrecognized LOTUS BOF "+I[2]);if(Y["!ref"]=vt(X),re[ne||K]=Y,xe.push(ne||K),!_e.length)return{SheetNames:xe,Sheets:re};for(var Ie={},He=[],Le=0;Le<_e.length;++Le)re[xe[Le]]?(He.push(_e[Le]||xe[Le]),Ie[_e[Le]]=re[_e[Le]]||re[xe[Le]]):(He.push(_e[Le]),Ie[_e[Le]]={"!ref":"A1"});return{SheetNames:He,Sheets:Ie}}function a(I,U){var z=U||{};if(+z.codepage>=0&&Zr(+z.codepage),z.type=="string")throw new Error("Cannot write WK1 to JS string");var Y=ex(),K=Kt(I["!ref"]),ne=Array.isArray(I),q=[];Hr(Y,0,i(1030)),Hr(Y,6,c(K));for(var re=Math.min(K.e.r,8191),xe=K.s.r;xe<=re;++xe)for(var _e=As(xe),X=K.s.c;X<=K.e.c;++X){xe===K.s.r&&(q[X]=ps(X));var Ae=q[X]+_e,Ie=ne?(I[xe]||[])[X]:I[Ae];if(!(!Ie||Ie.t=="z"))if(Ie.t=="n")(Ie.v|0)==Ie.v&&Ie.v>=-32768&&Ie.v<=32767?Hr(Y,13,g(xe,X,Ie.v)):Hr(Y,14,h(xe,X,Ie.v));else{var He=Wa(Ie);Hr(Y,15,p(xe,X,He.slice(0,239)))}}return Hr(Y,1),Y.end()}function n(I,U){var z=U||{};if(+z.codepage>=0&&Zr(+z.codepage),z.type=="string")throw new Error("Cannot write WK3 to JS string");var Y=ex();Hr(Y,0,l(I));for(var K=0,ne=0;K<I.SheetNames.length;++K)(I.Sheets[I.SheetNames[K]]||{})["!ref"]&&Hr(Y,27,F(I.SheetNames[K],ne++));var q=0;for(K=0;K<I.SheetNames.length;++K){var re=I.Sheets[I.SheetNames[K]];if(!(!re||!re["!ref"])){for(var xe=Kt(re["!ref"]),_e=Array.isArray(re),X=[],Ae=Math.min(xe.e.r,8191),Ie=xe.s.r;Ie<=Ae;++Ie)for(var He=As(Ie),Le=xe.s.c;Le<=xe.e.c;++Le){Ie===xe.s.r&&(X[Le]=ps(Le));var ve=X[Le]+He,st=_e?(re[Ie]||[])[Le]:re[ve];if(!(!st||st.t=="z"))if(st.t=="n")Hr(Y,23,w(Ie,Le,q,st.v));else{var St=Wa(st);Hr(Y,22,k(Ie,Le,q,St.slice(0,239)))}}++q}}return Hr(Y,1),Y.end()}function i(I){var U=us(2);return U.write_shift(2,I),U}function l(I){var U=us(26);U.write_shift(2,4096),U.write_shift(2,4),U.write_shift(4,0);for(var z=0,Y=0,K=0,ne=0;ne<I.SheetNames.length;++ne){var q=I.SheetNames[ne],re=I.Sheets[q];if(!(!re||!re["!ref"])){++K;var xe=dl(re["!ref"]);z<xe.e.r&&(z=xe.e.r),Y<xe.e.c&&(Y=xe.e.c)}}return z>8191&&(z=8191),U.write_shift(2,z),U.write_shift(1,K),U.write_shift(1,Y),U.write_shift(2,0),U.write_shift(2,0),U.write_shift(1,1),U.write_shift(1,2),U.write_shift(4,0),U.write_shift(4,0),U}function o(I,U,z){var Y={s:{c:0,r:0},e:{c:0,r:0}};return U==8&&z.qpro?(Y.s.c=I.read_shift(1),I.l++,Y.s.r=I.read_shift(2),Y.e.c=I.read_shift(1),I.l++,Y.e.r=I.read_shift(2),Y):(Y.s.c=I.read_shift(2),Y.s.r=I.read_shift(2),U==12&&z.qpro&&(I.l+=2),Y.e.c=I.read_shift(2),Y.e.r=I.read_shift(2),U==12&&z.qpro&&(I.l+=2),Y.s.c==65535&&(Y.s.c=Y.e.c=Y.s.r=Y.e.r=0),Y)}function c(I){var U=us(8);return U.write_shift(2,I.s.c),U.write_shift(2,I.s.r),U.write_shift(2,I.e.c),U.write_shift(2,I.e.r),U}function d(I,U,z){var Y=[{c:0,r:0},{t:"n",v:0},0,0];return z.qpro&&z.vers!=20768?(Y[0].c=I.read_shift(1),Y[3]=I.read_shift(1),Y[0].r=I.read_shift(2),I.l+=2):(Y[2]=I.read_shift(1),Y[0].c=I.read_shift(2),Y[0].r=I.read_shift(2)),Y}function u(I,U,z){var Y=I.l+U,K=d(I,U,z);if(K[1].t="s",z.vers==20768){I.l++;var ne=I.read_shift(1);return K[1].v=I.read_shift(ne,"utf8"),K}return z.qpro&&I.l++,K[1].v=I.read_shift(Y-I.l,"cstr"),K}function p(I,U,z){var Y=us(7+z.length);Y.write_shift(1,255),Y.write_shift(2,U),Y.write_shift(2,I),Y.write_shift(1,39);for(var K=0;K<Y.length;++K){var ne=z.charCodeAt(K);Y.write_shift(1,ne>=128?95:ne)}return Y.write_shift(1,0),Y}function f(I,U,z){var Y=d(I,U,z);return Y[1].v=I.read_shift(2,"i"),Y}function g(I,U,z){var Y=us(7);return Y.write_shift(1,255),Y.write_shift(2,U),Y.write_shift(2,I),Y.write_shift(2,z,"i"),Y}function x(I,U,z){var Y=d(I,U,z);return Y[1].v=I.read_shift(8,"f"),Y}function h(I,U,z){var Y=us(13);return Y.write_shift(1,255),Y.write_shift(2,U),Y.write_shift(2,I),Y.write_shift(8,z,"f"),Y}function m(I,U,z){var Y=I.l+U,K=d(I,U,z);if(K[1].v=I.read_shift(8,"f"),z.qpro)I.l=Y;else{var ne=I.read_shift(2);S(I.slice(I.l,I.l+ne),K),I.l+=ne}return K}function j(I,U,z){var Y=U&32768;return U&=-32769,U=(Y?I:0)+(U>=8192?U-16384:U),(Y?"":"$")+(z?ps(U):As(U))}var v={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},N=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function S(I,U){_s(I,0);for(var z=[],Y=0,K="",ne="",q="",re="";I.l<I.length;){var xe=I[I.l++];switch(xe){case 0:z.push(I.read_shift(8,"f"));break;case 1:ne=j(U[0].c,I.read_shift(2),!0),K=j(U[0].r,I.read_shift(2),!1),z.push(ne+K);break;case 2:{var _e=j(U[0].c,I.read_shift(2),!0),X=j(U[0].r,I.read_shift(2),!1);ne=j(U[0].c,I.read_shift(2),!0),K=j(U[0].r,I.read_shift(2),!1),z.push(_e+X+":"+ne+K)}break;case 3:if(I.l<I.length){console.error("WK1 premature formula end");return}break;case 4:z.push("("+z.pop()+")");break;case 5:z.push(I.read_shift(2));break;case 6:{for(var Ae="";xe=I[I.l++];)Ae+=String.fromCharCode(xe);z.push('"'+Ae.replace(/"/g,'""')+'"')}break;case 8:z.push("-"+z.pop());break;case 23:z.push("+"+z.pop());break;case 22:z.push("NOT("+z.pop()+")");break;case 20:case 21:re=z.pop(),q=z.pop(),z.push(["AND","OR"][xe-20]+"("+q+","+re+")");break;default:if(xe<32&&N[xe])re=z.pop(),q=z.pop(),z.push(q+N[xe]+re);else if(v[xe]){if(Y=v[xe][1],Y==69&&(Y=I[I.l++]),Y>z.length){console.error("WK1 bad formula parse 0x"+xe.toString(16)+":|"+z.join("|")+"|");return}var Ie=z.slice(-Y);z.length-=Y,z.push(v[xe][0]+"("+Ie.join(",")+")")}else return xe<=7?console.error("WK1 invalid opcode "+xe.toString(16)):xe<=24?console.error("WK1 unsupported op "+xe.toString(16)):xe<=30?console.error("WK1 invalid opcode "+xe.toString(16)):xe<=115?console.error("WK1 unsupported function opcode "+xe.toString(16)):console.error("WK1 unrecognized opcode "+xe.toString(16))}}z.length==1?U[1].f=""+z[0]:console.error("WK1 bad formula parse |"+z.join("|")+"|")}function A(I){var U=[{c:0,r:0},{t:"n",v:0},0];return U[0].r=I.read_shift(2),U[3]=I[I.l++],U[0].c=I[I.l++],U}function T(I,U){var z=A(I);return z[1].t="s",z[1].v=I.read_shift(U-4,"cstr"),z}function k(I,U,z,Y){var K=us(6+Y.length);K.write_shift(2,I),K.write_shift(1,z),K.write_shift(1,U),K.write_shift(1,39);for(var ne=0;ne<Y.length;++ne){var q=Y.charCodeAt(ne);K.write_shift(1,q>=128?95:q)}return K.write_shift(1,0),K}function _(I,U){var z=A(I);z[1].v=I.read_shift(2);var Y=z[1].v>>1;if(z[1].v&1)switch(Y&7){case 0:Y=(Y>>3)*5e3;break;case 1:Y=(Y>>3)*500;break;case 2:Y=(Y>>3)/20;break;case 3:Y=(Y>>3)/200;break;case 4:Y=(Y>>3)/2e3;break;case 5:Y=(Y>>3)/2e4;break;case 6:Y=(Y>>3)/16;break;case 7:Y=(Y>>3)/64;break}return z[1].v=Y,z}function y(I,U){var z=A(I),Y=I.read_shift(4),K=I.read_shift(4),ne=I.read_shift(2);if(ne==65535)return Y===0&&K===3221225472?(z[1].t="e",z[1].v=15):Y===0&&K===3489660928?(z[1].t="e",z[1].v=42):z[1].v=0,z;var q=ne&32768;return ne=(ne&32767)-16446,z[1].v=(1-q*2)*(K*Math.pow(2,ne+32)+Y*Math.pow(2,ne)),z}function w(I,U,z,Y){var K=us(14);if(K.write_shift(2,I),K.write_shift(1,z),K.write_shift(1,U),Y==0)return K.write_shift(4,0),K.write_shift(4,0),K.write_shift(2,65535),K;var ne=0,q=0,re=0,xe=0;return Y<0&&(ne=1,Y=-Y),q=Math.log2(Y)|0,Y/=Math.pow(2,q-31),xe=Y>>>0,xe&2147483648||(Y/=2,++q,xe=Y>>>0),Y-=xe,xe|=2147483648,xe>>>=0,Y*=Math.pow(2,32),re=Y>>>0,K.write_shift(4,re),K.write_shift(4,xe),q+=16383+(ne?32768:0),K.write_shift(2,q),K}function R(I,U){var z=y(I);return I.l+=U-14,z}function P(I,U){var z=A(I),Y=I.read_shift(4);return z[1].v=Y>>6,z}function H(I,U){var z=A(I),Y=I.read_shift(8,"f");return z[1].v=Y,z}function L(I,U){var z=H(I);return I.l+=U-10,z}function O(I,U){return I[I.l+U-1]==0?I.read_shift(U,"cstr"):""}function W(I,U){var z=I[I.l++];z>U-1&&(z=U-1);for(var Y="";Y.length<z;)Y+=String.fromCharCode(I[I.l++]);return Y}function Q(I,U,z){if(!(!z.qpro||U<21)){var Y=I.read_shift(1);I.l+=17,I.l+=1,I.l+=2;var K=I.read_shift(U-21,"cstr");return[Y,K]}}function D(I,U){for(var z={},Y=I.l+U;I.l<Y;){var K=I.read_shift(2);if(K==14e3){for(z[K]=[0,""],z[K][0]=I.read_shift(2);I[I.l];)z[K][1]+=String.fromCharCode(I[I.l]),I.l++;I.l++}}return z}function F(I,U){var z=us(5+I.length);z.write_shift(2,14e3),z.write_shift(2,U);for(var Y=0;Y<I.length;++Y){var K=I.charCodeAt(Y);z[z.l++]=K>127?95:K}return z[z.l++]=0,z}var V={0:{n:"BOF",f:is},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:m},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:O},222:{n:"SHEETNAMELP",f:W},65535:{n:""}},te={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:T},23:{n:"NUMBER17",f:y},24:{n:"NUMBER18",f:_},25:{n:"FORMULA19",f:R},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:D},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:P},38:{n:"??"},39:{n:"NUMBER27",f:H},40:{n:"FORMULA28",f:L},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:O},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Q},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:n,to_workbook:s}}();function P_(t){var s={},r=t.match(Vs),a=0,n=!1;if(r)for(;a!=r.length;++a){var i=qe(r[a]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":s.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;s.cp=bm[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":s.outline=1;break;case"</outline>":break;case"<rFont":s.name=i.val;break;case"<sz":s.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":s.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":s.uval="double";break;case"singleAccounting":s.uval="single-accounting";break;case"doubleAccounting":s.uval="double-accounting";break}case"<u>":case"<u/>":s.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":s.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":s.i=1;break;case"</i>":break;case"<color":i.rgb&&(s.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":s.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":s.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(i[0].charCodeAt(1)!==47&&!n)throw new Error("Unrecognized rich format "+i[0])}}return s}var D_=function(){var t=_o("t"),s=_o("rPr");function r(i){var l=i.match(t);if(!l)return{t:"s",v:""};var o={t:"s",v:kt(l[1])},c=i.match(s);return c&&(o.s=P_(c[1])),o}var a=/<(?:\w+:)?r>/g,n=/<\/(?:\w+:)?r>/;return function(l){return l.replace(a,"").split(n).map(r).filter(function(o){return o.v})}}(),R_=function(){var s=/(\r\n|\n)/g;function r(n,i,l){var o=[];n.u&&o.push("text-decoration: underline;"),n.uval&&o.push("text-underline-style:"+n.uval+";"),n.sz&&o.push("font-size:"+n.sz+"pt;"),n.outline&&o.push("text-effect: outline;"),n.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),n.b&&(i.push("<b>"),l.push("</b>")),n.i&&(i.push("<i>"),l.push("</i>")),n.strike&&(i.push("<s>"),l.push("</s>"));var c=n.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),l.push("</"+c+">")),l.push("</span>"),n}function a(n){var i=[[],n.v,[]];return n.v?(n.s&&r(n.s,i[0],i[2]),i[0].join("")+i[1].replace(s,"<br/>")+i[2].join("")):""}return function(i){return i.map(a).join("")}}(),L_=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,O_=/<(?:\w+:)?r>/,I_=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function Om(t,s){var r=s?s.cellHTML:!0,a={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=kt(Rt(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=Rt(t),r&&(a.h=Cm(a.t))):t.match(O_)&&(a.r=Rt(t),a.t=kt(Rt((t.replace(I_,"").match(L_)||[]).join("").replace(Vs,""))),r&&(a.h=R_(D_(a.r)))),a):{t:""}}var M_=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,B_=/<(?:\w+:)?(?:si|sstItem)>/g,$_=/<\/(?:\w+:)?(?:si|sstItem)>/;function U_(t,s){var r=[],a="";if(!t)return r;var n=t.match(M_);if(n){a=n[2].replace(B_,"").split($_);for(var i=0;i!=a.length;++i){var l=Om(a[i].trim(),s);l!=null&&(r[r.length]=l)}n=qe(n[1]),r.Count=n.count,r.Unique=n.uniqueCount}return r}function z_(t){return[t.read_shift(4),t.read_shift(4)]}function W_(t,s){var r=[],a=!1;return Ga(t,function(i,l,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(l.T,!a||s.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Xv(t){for(var s=[],r=t.split(""),a=0;a<r.length;++a)s[a]=r[a].charCodeAt(0);return s}function Oa(t,s){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),s>=4&&(t.l+=s-4),r}function V_(t){var s={};return s.id=t.read_shift(0,"lpp4"),s.R=Oa(t,4),s.U=Oa(t,4),s.W=Oa(t,4),s}function H_(t){for(var s=t.read_shift(4),r=t.l+s-4,a={},n=t.read_shift(4),i=[];n-- >0;)i.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(a.name=t.read_shift(0,"lpp4"),a.comps=i,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return a}function G_(t){var s=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)s.push(H_(t));return s}function q_(t){var s=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)s.push(t.read_shift(0,"lpp4"));return s}function J_(t){var s={};return t.read_shift(4),t.l+=4,s.id=t.read_shift(0,"lpp4"),s.name=t.read_shift(0,"lpp4"),s.R=Oa(t,4),s.U=Oa(t,4),s.W=Oa(t,4),s}function K_(t){var s=J_(t);if(s.ename=t.read_shift(0,"8lpp4"),s.blksz=t.read_shift(4),s.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return s}function Qv(t,s){var r=t.l+s,a={};a.Flags=t.read_shift(4)&63,t.l+=4,a.AlgID=t.read_shift(4);var n=!1;switch(a.AlgID){case 26126:case 26127:case 26128:n=a.Flags==36;break;case 26625:n=a.Flags==4;break;case 0:n=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!n)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=t.read_shift(4),a.KeySize=t.read_shift(4),a.ProviderType=t.read_shift(4),t.l+=8,a.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,a}function Zv(t,s){var r={},a=t.l+s;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,a),t.l=a,r}function Y_(t){var s=Oa(t);switch(s.Minor){case 2:return[s.Minor,X_(t)];case 3:return[s.Minor,Q_()];case 4:return[s.Minor,Z_(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+s.Minor)}function X_(t){var s=t.read_shift(4);if((s&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),a=Qv(t,r),n=Zv(t,t.length-t.l);return{t:"Std",h:a,v:n}}function Q_(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Z_(t){var s=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),a={};return r.replace(Vs,function(i){var l=qe(i);switch(Na(l[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":s.forEach(function(o){a[o]=l[o]});break;case"<dataIntegrity":a.encryptedHmacKey=l.encryptedHmacKey,a.encryptedHmacValue=l.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=l.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(l);break;default:throw l[0]}}),a}function e5(t,s){var r={},a=r.EncryptionVersionInfo=Oa(t,4);if(s-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);r.Flags=t.read_shift(4),s-=4;var n=t.read_shift(4);return s-=4,r.EncryptionHeader=Qv(t,n),s-=n,r.EncryptionVerifier=Zv(t,s),r}function t5(t){var s={},r=s.EncryptionVersionInfo=Oa(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return s.Salt=t.read_shift(16),s.EncryptedVerifier=t.read_shift(16),s.EncryptedVerifierHash=t.read_shift(16),s}function s5(t){var s=0,r,a=Xv(t),n=a.length+1,i,l,o,c,d;for(r=Cn(n),r[0]=a.length,i=1;i!=n;++i)r[i]=a[i-1];for(i=n-1;i>=0;--i)l=r[i],o=s&16384?1:0,c=s<<1&32767,d=o|c,s=d^l;return s^52811}var ej=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],s=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(l){return(l/2|l*128)&255},n=function(l,o){return a(l^o)},i=function(l){for(var o=s[l.length-1],c=104,d=l.length-1;d>=0;--d)for(var u=l[d],p=0;p!=7;++p)u&64&&(o^=r[c]),u*=2,--c;return o};return function(l){for(var o=Xv(l),c=i(o),d=o.length,u=Cn(16),p=0;p!=16;++p)u[p]=0;var f,g,x;for((d&1)===1&&(f=c>>8,u[d]=n(t[0],f),--d,f=c&255,g=o[o.length-1],u[d]=n(g,f));d>0;)--d,f=c>>8,u[d]=n(o[d],f),--d,f=c&255,u[d]=n(o[d],f);for(d=15,x=15-o.length;x>0;)f=c>>8,u[d]=n(t[x],f),--d,--x,f=c&255,u[d]=n(o[d],f),--d,--x;return u}}(),r5=function(t,s,r,a,n){n||(n=s),a||(a=ej(t));var i,l;for(i=0;i!=s.length;++i)l=s[i],l^=a[r],l=(l>>5|l<<3)&255,n[i]=l,++r;return[n,r,a]},a5=function(t){var s=0,r=ej(t);return function(a){var n=r5("",a,s,r);return s=n[1],n[0]}};function n5(t,s,r,a){var n={key:is(t),verificationBytes:is(t)};return r.password&&(n.verifier=s5(r.password)),a.valid=n.verificationBytes===n.verifier,a.valid&&(a.insitu=a5(r.password)),n}function i5(t,s,r){var a=r||{};return a.Info=t.read_shift(2),t.l-=2,a.Info===1?a.Data=t5(t):a.Data=e5(t,s),a}function l5(t,s,r){var a={Type:r.biff>=8?t.read_shift(2):0};return a.Type?i5(t,s-2,a):n5(t,r.biff>=8?s:s-2,r,a),a}var o5=function(){function t(n,i){switch(i.type){case"base64":return s(Nr(n),i);case"binary":return s(n,i);case"buffer":return s(gt&&Buffer.isBuffer(n)?n.toString("binary"):mi(n),i);case"array":return s(li(n),i)}throw new Error("Unrecognized type "+i.type)}function s(n,i){var l=i||{},o=l.dense?[]:{},c=n.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,p){Array.isArray(o)&&(o[p]=[]);for(var f=/\\\w+\b/g,g=0,x,h=-1;x=f.exec(u);){switch(x[0]){case"\\cell":var m=u.slice(g,f.lastIndex-x[0].length);if(m[0]==" "&&(m=m.slice(1)),++h,m.length){var j={v:m,t:"s"};Array.isArray(o)?o[p][h]=j:o[Qe({r:p,c:h})]=j}break}g=f.lastIndex}h>d.e.c&&(d.e.c=h)}),o["!ref"]=vt(d),o}function r(n,i){return Dn(t(n,i),i)}function a(n){for(var i=["{\\rtf1\\ansi"],l=Kt(n["!ref"]),o,c=Array.isArray(n),d=l.s.r;d<=l.e.r;++d){i.push("\\trowd\\trautofit1");for(var u=l.s.c;u<=l.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=l.s.c;u<=l.e.c;++u){var p=Qe({r:d,c:u});o=c?(n[d]||[])[u]:n[p],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(Wa(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:a}}();function c5(t){var s=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(s.slice(0,2),16),parseInt(s.slice(2,4),16),parseInt(s.slice(4,6),16)]}function Ao(t){for(var s=0,r=1;s!=3;++s)r=r*256+(t[s]>255?255:t[s]<0?0:t[s]);return r.toString(16).toUpperCase().slice(1)}function d5(t){var s=t[0]/255,r=t[1]/255,a=t[2]/255,n=Math.max(s,r,a),i=Math.min(s,r,a),l=n-i;if(l===0)return[0,0,s];var o=0,c=0,d=n+i;switch(c=l/(d>1?2-d:d),n){case s:o=((r-a)/l+6)%6;break;case r:o=(a-s)/l+2;break;case a:o=(s-r)/l+4;break}return[o/6,c,d/2]}function u5(t){var s=t[0],r=t[1],a=t[2],n=r*2*(a<.5?a:1-a),i=a-n/2,l=[i,i,i],o=6*s,c;if(r!==0)switch(o|0){case 0:case 6:c=n*o,l[0]+=n,l[1]+=c;break;case 1:c=n*(2-o),l[0]+=c,l[1]+=n;break;case 2:c=n*(o-2),l[1]+=n,l[2]+=c;break;case 3:c=n*(4-o),l[1]+=c,l[2]+=n;break;case 4:c=n*(o-4),l[2]+=n,l[0]+=c;break;case 5:c=n*(6-o),l[2]+=c,l[0]+=n;break}for(var d=0;d!=3;++d)l[d]=Math.round(l[d]*255);return l}function jd(t,s){if(s===0)return t;var r=d5(c5(t));return s<0?r[2]=r[2]*(1+s):r[2]=1-(1-r[2])*(1-s),Ao(u5(r))}var tj=6,x5=15,m5=1,Js=tj;function wd(t){return Math.floor((t+Math.round(128/Js)/256)*Js)}function Nd(t){return Math.floor((t-5)/Js*100+.5)/100}function ax(t){return Math.round((t*Js+5)/Js*256)/256}function L0(t){return ax(Nd(wd(t)))}function Im(t){var s=Math.abs(t-L0(t)),r=Js;if(s>.005)for(Js=m5;Js<x5;++Js)Math.abs(t-L0(t))<=s&&(s=Math.abs(t-L0(t)),r=Js);Js=r}function tl(t){t.width?(t.wpx=wd(t.width),t.wch=Nd(t.wpx),t.MDW=Js):t.wpx?(t.wch=Nd(t.wpx),t.width=ax(t.wch),t.MDW=Js):typeof t.wch=="number"&&(t.width=ax(t.wch),t.wpx=wd(t.width),t.MDW=Js),t.customWidth&&delete t.customWidth}var h5=96,sj=h5;function rj(t){return t*96/sj}function Fo(t){return t*sj/96}var f5={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function p5(t,s,r,a){s.Borders=[];var n={},i=!1;(t[0].match(Vs)||[]).forEach(function(l){var o=qe(l);switch(Na(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":n={},o.diagonalUp&&(n.diagonalUp=$t(o.diagonalUp)),o.diagonalDown&&(n.diagonalDown=$t(o.diagonalDown)),s.Borders.push(n);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function g5(t,s,r,a){s.Fills=[];var n={},i=!1;(t[0].match(Vs)||[]).forEach(function(l){var o=qe(l);switch(Na(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":n={},s.Fills.push(n);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":s.Fills.push(n),n={};break;case"<patternFill":case"<patternFill>":o.patternType&&(n.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":n.bgColor||(n.bgColor={}),o.indexed&&(n.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(n.bgColor.theme=parseInt(o.theme,10)),o.tint&&(n.bgColor.tint=parseFloat(o.tint)),o.rgb&&(n.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":n.fgColor||(n.fgColor={}),o.theme&&(n.fgColor.theme=parseInt(o.theme,10)),o.tint&&(n.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(n.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function y5(t,s,r,a){s.Fonts=[];var n={},i=!1;(t[0].match(Vs)||[]).forEach(function(l){var o=qe(l);switch(Na(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":s.Fonts.push(n),n={};break;case"<name":o.val&&(n.name=Rt(o.val));break;case"<name/>":case"</name>":break;case"<b":n.bold=o.val?$t(o.val):1;break;case"<b/>":n.bold=1;break;case"<i":n.italic=o.val?$t(o.val):1;break;case"<i/>":n.italic=1;break;case"<u":switch(o.val){case"none":n.underline=0;break;case"single":n.underline=1;break;case"double":n.underline=2;break;case"singleAccounting":n.underline=33;break;case"doubleAccounting":n.underline=34;break}break;case"<u/>":n.underline=1;break;case"<strike":n.strike=o.val?$t(o.val):1;break;case"<strike/>":n.strike=1;break;case"<outline":n.outline=o.val?$t(o.val):1;break;case"<outline/>":n.outline=1;break;case"<shadow":n.shadow=o.val?$t(o.val):1;break;case"<shadow/>":n.shadow=1;break;case"<condense":n.condense=o.val?$t(o.val):1;break;case"<condense/>":n.condense=1;break;case"<extend":n.extend=o.val?$t(o.val):1;break;case"<extend/>":n.extend=1;break;case"<sz":o.val&&(n.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(n.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(n.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(n.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=bm[parseInt(o.val,10)];break;case"<color":if(n.color||(n.color={}),o.auto&&(n.color.auto=$t(o.auto)),o.rgb)n.color.rgb=o.rgb.slice(-6);else if(o.indexed){n.color.index=parseInt(o.indexed,10);var c=Xn[n.color.index];n.color.index==81&&(c=Xn[1]),c||(c=Xn[1]),n.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(n.color.theme=parseInt(o.theme,10),o.tint&&(n.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(n.color.rgb=jd(r.themeElements.clrScheme[n.color.theme].rgb,n.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function b5(t,s,r){s.NumberFmt=[];for(var a=ba(tt),n=0;n<a.length;++n)s.NumberFmt[a[n]]=tt[a[n]];var i=t[0].match(Vs);if(i)for(n=0;n<i.length;++n){var l=qe(i[n]);switch(Na(l[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=kt(Rt(l.formatCode)),c=parseInt(l.numFmtId,10);if(s.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&s.NumberFmt[c]!=null;--c);s.NumberFmt[c]=o}Yn(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+l[0]+" in numFmts")}}}var bc=["numFmtId","fillId","fontId","borderId","xfId"],vc=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function v5(t,s,r){s.CellXf=[];var a,n=!1;(t[0].match(Vs)||[]).forEach(function(i){var l=qe(i),o=0;switch(Na(l[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=l,delete a[0],o=0;o<bc.length;++o)a[bc[o]]&&(a[bc[o]]=parseInt(a[bc[o]],10));for(o=0;o<vc.length;++o)a[vc[o]]&&(a[vc[o]]=$t(a[vc[o]]));if(s.NumberFmt&&a.numFmtId>392){for(o=392;o>60;--o)if(s.NumberFmt[a.numFmtId]==s.NumberFmt[o]){a.numFmtId=o;break}}s.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};l.vertical&&(c.vertical=l.vertical),l.horizontal&&(c.horizontal=l.horizontal),l.textRotation!=null&&(c.textRotation=l.textRotation),l.indent&&(c.indent=l.indent),l.wrapText&&(c.wrapText=$t(l.wrapText)),a.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":n=!0;break;case"</AlternateContent>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(r&&r.WTF&&!n)throw new Error("unrecognized "+l[0]+" in cellXfs")}})}var j5=function(){var s=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,n=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,d){var u={};if(!o)return u;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var p;return(p=o.match(s))&&b5(p,u,d),(p=o.match(n))&&y5(p,u,c,d),(p=o.match(a))&&g5(p,u,c,d),(p=o.match(i))&&p5(p,u,c,d),(p=o.match(r))&&v5(p,u,d),u}}();function w5(t,s){var r=t.read_shift(2),a=Us(t);return[r,a]}function N5(t,s,r){var a={};a.sz=t.read_shift(2)/20;var n=DC(t);n.fItalic&&(a.italic=1),n.fCondense&&(a.condense=1),n.fExtend&&(a.extend=1),n.fShadow&&(a.shadow=1),n.fOutline&&(a.outline=1),n.fStrikeout&&(a.strike=1);var i=t.read_shift(2);switch(i===700&&(a.bold=1),t.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var l=t.read_shift(1);l!=0&&(a.underline=l);var o=t.read_shift(1);o>0&&(a.family=o);var c=t.read_shift(1);switch(c>0&&(a.charset=c),t.l++,a.color=PC(t),t.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=Us(t),a}var k5=Ws;function S5(t,s){var r=t.l+s,a=t.read_shift(2),n=t.read_shift(2);return t.l=r,{ixfe:a,numFmtId:n}}var C5=Ws;function _5(t,s,r){var a={};a.NumberFmt=[];for(var n in tt)a.NumberFmt[n]=tt[n];a.CellXf=[],a.Fonts=[];var i=[],l=!1;return Ga(t,function(c,d,u){switch(u){case 44:a.NumberFmt[c[0]]=c[1],Yn(c[1],c[0]);break;case 43:a.Fonts.push(c),c.color.theme!=null&&s&&s.themeElements&&s.themeElements.clrScheme&&(c.color.rgb=jd(s.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&a.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:i.push(u),l=!0;break;case 38:i.pop(),l=!1;break;default:if(d.T>0)i.push(u);else if(d.T<0)i.pop();else if(!l||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),a}var T5=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function E5(t,s,r){s.themeElements.clrScheme=[];var a={};(t[0].match(Vs)||[]).forEach(function(n){var i=qe(n);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=i.val;break;case"<a:sysClr":a.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(s.themeElements.clrScheme[T5.indexOf(i[0])]=a,a={}):a.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function A5(){}function F5(){}var P5=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,D5=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,R5=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function L5(t,s,r){s.themeElements={};var a;[["clrScheme",P5,E5],["fontScheme",D5,A5],["fmtScheme",R5,F5]].forEach(function(n){if(!(a=t.match(n[1])))throw new Error(n[0]+" not found in themeElements");n[2](a,s,r)})}var O5=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function aj(t,s){(!t||t.length===0)&&(t=I5());var r,a={};if(!(r=t.match(O5)))throw new Error("themeElements not found in theme");return L5(r[0],a,s),a.raw=t,a}function I5(t,s){var r=[fv];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function M5(t,s,r){var a=t.l+s,n=t.read_shift(4);if(n!==124226){if(!r.cellStyles){t.l=a;return}var i=t.slice(t.l);t.l=a;var l;try{l=hv(i,{type:"array"})}catch{return}var o=yr(l,"theme/theme/theme1.xml",!0);if(o)return aj(o,r)}}function B5(t){return t.read_shift(4)}function $5(t){var s={};switch(s.xclrType=t.read_shift(2),s.nTintShade=t.read_shift(2),s.xclrType){case 0:t.l+=4;break;case 1:s.xclrValue=U5(t,4);break;case 2:s.xclrValue=Vv(t);break;case 3:s.xclrValue=B5(t);break;case 4:t.l+=4;break}return t.l+=8,s}function U5(t,s){return Ws(t,s)}function z5(t,s){return Ws(t,s)}function W5(t){var s=t.read_shift(2),r=t.read_shift(2)-4,a=[s];switch(s){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=$5(t);break;case 6:a[1]=z5(t,r);break;case 14:case 15:a[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+s+" "+r)}return a}function V5(t,s){var r=t.l+s;t.l+=2;var a=t.read_shift(2);t.l+=2;for(var n=t.read_shift(2),i=[];n-- >0;)i.push(W5(t,r-t.l));return{ixfe:a,ext:i}}function H5(t,s){s.forEach(function(r){switch(r[0]){}})}function G5(t,s){return{flags:t.read_shift(4),version:t.read_shift(4),name:Us(t)}}function q5(t){for(var s=[],r=t.read_shift(4);r-- >0;)s.push([t.read_shift(4),t.read_shift(4)]);return s}function J5(t){return t.l+=4,t.read_shift(4)!=0}function K5(t,s,r){var a={Types:[],Cell:[],Value:[]},n=r||{},i=[],l=!1,o=2;return Ga(t,function(c,d,u){switch(u){case 335:a.Types.push({name:c.name});break;case 51:c.forEach(function(p){o==1?a.Cell.push({type:a.Types[p[0]-1].name,index:p[1]}):o==0&&a.Value.push({type:a.Types[p[0]-1].name,index:p[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:i.push(u),l=!0;break;case 36:i.pop(),l=!1;break;default:if(!d.T){if(!l||n.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),a}function Y5(t,s,r){var a={Types:[],Cell:[],Value:[]};if(!t)return a;var n=!1,i=2,l;return t.replace(Vs,function(o){var c=qe(o);switch(Na(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<a.Types.length;++d)a.Types[d].name==c.name&&(l=a.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?a.Cell.push({type:a.Types[c.t-1].name,index:+c.v}):i==0&&a.Value.push({type:a.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<rvb":if(!l)break;l.offsets||(l.offsets=[]),l.offsets.push(+c.i);break;default:if(!n&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),a}function X5(t){var s=[];if(!t)return s;var r=1;return(t.match(Vs)||[]).forEach(function(a){var n=qe(a);switch(n[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete n[0],n.i?r=n.i:n.i=r,s.push(n);break}}),s}function Q5(t){var s={};s.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),s.r=Qe(r);var a=t.read_shift(1);return a&2&&(s.l="1"),a&8&&(s.a="1"),s}function Z5(t,s,r){var a=[];return Ga(t,function(i,l,o){switch(o){case 63:a.push(i);break;default:if(!l.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),a}function eT(t,s,r,a){if(!t)return t;var n=a||{},i=!1;Ga(t,function(o,c,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||n.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},n)}function tT(t,s){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return s["!id"][r].Target}function Np(t,s,r,a){var n=Array.isArray(t),i;s.forEach(function(l){var o=Ks(l.ref);if(n?(t[o.r]||(t[o.r]=[]),i=t[o.r][o.c]):i=t[l.ref],!i){i={t:"z"},n?t[o.r][o.c]=i:t[l.ref]=i;var c=Kt(t["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var d=vt(c);d!==t["!ref"]&&(t["!ref"]=d)}i.c||(i.c=[]);var u={a:l.author,t:l.t,r:l.r,T:r};l.h&&(u.h=l.h);for(var p=i.c.length-1;p>=0;--p){if(!r&&i.c[p].T)return;r&&!i.c[p].T&&i.c.splice(p,1)}if(r&&a){for(p=0;p<a.length;++p)if(u.a==a[p].id){u.a=a[p].name||u.a;break}}i.c.push(u)})}function sT(t,s){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],a=[],n=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);n&&n[1]&&n[1].split(/<\/\w*:?author>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=qe(o[0]),d={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},u=Ks(c.ref);if(!(s.sheetRows&&s.sheetRows<=u.r)){var p=l.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),f=!!p&&!!p[1]&&Om(p[1])||{r:"",t:"",h:""};d.r=f.r,f.r=="<t></t>"&&(f.t=f.h=""),d.t=(f.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),s.cellHTML&&(d.h=f.h),a.push(d)}}}}),a}function rT(t,s){var r=[],a=!1,n={},i=0;return t.replace(Vs,function(o,c){var d=qe(o);switch(Na(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":n={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":n.t!=null&&r.push(n);break;case"<text>":case"<text":i=c+o.length;break;case"</text>":n.t=t.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&s.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return o}),r}function aT(t,s){var r=[],a=!1;return t.replace(Vs,function(i){var l=qe(i);switch(Na(l[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:l.displayname,id:l.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&s.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return i}),r}function nT(t){var s={};s.iauthor=t.read_shift(4);var r=fi(t);return s.rfx=r.s,s.ref=Qe(r.s),t.l+=16,s}var iT=Us;function lT(t,s){var r=[],a=[],n={},i=!1;return Ga(t,function(o,c,d){switch(d){case 632:a.push(o);break;case 635:n=o;break;case 637:n.t=o.t,n.h=o.h,n.r=o.r;break;case 636:if(n.author=a[n.iauthor],delete n.iauthor,s.sheetRows&&n.rfx&&s.sheetRows<=n.rfx.r)break;n.t||(n.t=""),delete n.rfx,r.push(n);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}var oT="application/vnd.ms-office.vbaProject";function cT(t){var s=bt.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,a){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var n=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");bt.utils.cfb_add(s,n,t.FileIndex[a].content)}}),bt.write(s)}function dT(){return{"!type":"dialog"}}function uT(){return{"!type":"dialog"}}function xT(){return{"!type":"macro"}}function mT(){return{"!type":"macro"}}var Vi=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,s={r:0,c:0};function r(a,n,i,l){var o=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),l.length==0?o=!0:l.charAt(0)=="["&&(o=!0,l=l.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,u=l.length>0?parseInt(l,10)|0:0;return o?u+=s.c:--u,c?d+=s.r:--d,n+(o?"":"$")+ps(u)+(c?"":"$")+As(d)}return function(n,i){return s=i,n.replace(t,r)}}(),nj=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,hT=function(){return function(s,r){return s.replace(nj,function(a,n,i,l,o,c){var d=Am(l)-(i?0:r.c),u=Em(c)-(o?0:r.r),p=u==0?"":o?u+1:"["+u+"]",f=d==0?"":i?d+1:"["+d+"]";return n+"R"+p+"C"+f})}}();function ij(t,s){return t.replace(nj,function(r,a,n,i,l,o){return a+(n=="$"?n+i:ps(Am(i)+s.c))+(l=="$"?l+o:As(Em(o)+s.r))})}function fT(t,s,r){var a=dl(s),n=a.s,i=Ks(r),l={r:i.r-n.r,c:i.c-n.c};return ij(t,l)}function pT(t){return t.length!=1}function kp(t){return t.replace(/_xlfn\./g,"")}function as(t){t.l+=1}function _n(t,s){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function lj(t,s,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return oj(t);r.biff==12&&(a=4)}var n=t.read_shift(a),i=t.read_shift(a),l=_n(t),o=_n(t);return{s:{r:n,c:l[0],cRel:l[1],rRel:l[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function oj(t){var s=_n(t),r=_n(t),a=t.read_shift(1),n=t.read_shift(1);return{s:{r:s[0],c:a,cRel:s[1],rRel:s[2]},e:{r:r[0],c:n,cRel:r[1],rRel:r[2]}}}function gT(t,s,r){if(r.biff<8)return oj(t);var a=t.read_shift(r.biff==12?4:2),n=t.read_shift(r.biff==12?4:2),i=_n(t),l=_n(t);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:n,c:l[0],cRel:l[1],rRel:l[2]}}}function cj(t,s,r){if(r&&r.biff>=2&&r.biff<=5)return yT(t);var a=t.read_shift(r&&r.biff==12?4:2),n=_n(t);return{r:a,c:n[0],cRel:n[1],rRel:n[2]}}function yT(t){var s=_n(t),r=t.read_shift(1);return{r:s[0],c:r,cRel:s[1],rRel:s[2]}}function bT(t){var s=t.read_shift(2),r=t.read_shift(2);return{r:s,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function vT(t,s,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return jT(t);var n=t.read_shift(a>=12?4:2),i=t.read_shift(2),l=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;n>524287;)n-=1048576;if(l==1)for(;i>8191;)i=i-16384;return{r:n,c:i,cRel:l,rRel:o}}function jT(t){var s=t.read_shift(2),r=t.read_shift(1),a=(s&32768)>>15,n=(s&16384)>>14;return s&=16383,a==1&&s>=8192&&(s=s-16384),n==1&&r>=128&&(r=r-256),{r:s,c:r,cRel:n,rRel:a}}function wT(t,s,r){var a=(t[t.l++]&96)>>5,n=lj(t,r.biff>=2&&r.biff<=5?6:8,r);return[a,n]}function NT(t,s,r){var a=(t[t.l++]&96)>>5,n=t.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}var l=lj(t,i,r);return[a,n,l]}function kT(t,s,r){var a=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function ST(t,s,r){var a=(t[t.l++]&96)>>5,n=t.read_shift(2),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}return t.l+=i,[a,n]}function CT(t,s,r){var a=(t[t.l++]&96)>>5,n=gT(t,s-1,r);return[a,n]}function _T(t,s,r){var a=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[a]}function Sp(t){var s=t[t.l+1]&1,r=1;return t.l+=4,[s,r]}function TT(t,s,r){t.l+=2;for(var a=t.read_shift(r&&r.biff==2?1:2),n=[],i=0;i<=a;++i)n.push(t.read_shift(r&&r.biff==2?1:2));return n}function ET(t,s,r){var a=t[t.l+1]&255?1:0;return t.l+=2,[a,t.read_shift(r&&r.biff==2?1:2)]}function AT(t,s,r){var a=t[t.l+1]&255?1:0;return t.l+=2,[a,t.read_shift(r&&r.biff==2?1:2)]}function FT(t){var s=t[t.l+1]&255?1:0;return t.l+=2,[s,t.read_shift(2)]}function PT(t,s,r){var a=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[a]}function dj(t){var s=t.read_shift(1),r=t.read_shift(1);return[s,r]}function DT(t){return t.read_shift(2),dj(t)}function RT(t){return t.read_shift(2),dj(t)}function LT(t,s,r){var a=(t[t.l]&96)>>5;t.l+=1;var n=cj(t,0,r);return[a,n]}function OT(t,s,r){var a=(t[t.l]&96)>>5;t.l+=1;var n=vT(t,0,r);return[a,n]}function IT(t,s,r){var a=(t[t.l]&96)>>5;t.l+=1;var n=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var i=cj(t,0,r);return[a,n,i]}function MT(t,s,r){var a=(t[t.l]&96)>>5;t.l+=1;var n=t.read_shift(r&&r.biff<=3?1:2);return[BE[n],mj[n],a]}function BT(t,s,r){var a=t[t.l++],n=t.read_shift(1),i=r&&r.biff<=3?[a==88?-1:0,t.read_shift(1)]:$T(t);return[n,(i[0]===0?mj:ME)[i[1]]]}function $T(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function UT(t,s,r){t.l+=r&&r.biff==2?3:4}function zT(t,s,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var a=t.read_shift(2),n=t.read_shift(r&&r.biff==2?1:2);return[a,n]}function WT(t){return t.l++,pi[t.read_shift(1)]}function VT(t){return t.l++,t.read_shift(2)}function HT(t){return t.l++,t.read_shift(1)!==0}function GT(t){return t.l++,Bs(t)}function qT(t,s,r){return t.l++,Uo(t,s-1,r)}function JT(t,s){var r=[t.read_shift(1)];if(s==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Xt(t,1)?"TRUE":"FALSE",s!=12&&(t.l+=7);break;case 37:case 16:r[1]=pi[t[t.l]],t.l+=s==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Bs(t);break;case 2:r[1]=gi(t,0,{biff:s>0&&s<8?2:s});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function KT(t,s,r){for(var a=t.read_shift(r.biff==12?4:2),n=[],i=0;i!=a;++i)n.push((r.biff==12?fi:Jd)(t));return n}function YT(t,s,r){var a=0,n=0;r.biff==12?(a=t.read_shift(4),n=t.read_shift(4)):(n=1+t.read_shift(1),a=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--n==0&&(n=256));for(var i=0,l=[];i!=a&&(l[i]=[]);++i)for(var o=0;o!=n;++o)l[i][o]=JT(t,r.biff);return l}function XT(t,s,r){var a=t.read_shift(1)>>>5&3,n=!r||r.biff>=8?4:2,i=t.read_shift(n);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[a,0,i]}function QT(t,s,r){if(r.biff==5)return ZT(t);var a=t.read_shift(1)>>>5&3,n=t.read_shift(2),i=t.read_shift(4);return[a,n,i]}function ZT(t){var s=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var a=t.read_shift(2);return t.l+=12,[s,r,a]}function eE(t,s,r){var a=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var n=t.read_shift(r&&r.biff==2?1:2);return[a,n]}function tE(t,s,r){var a=t.read_shift(1)>>>5&3,n=t.read_shift(r&&r.biff==2?1:2);return[a,n]}function sE(t,s,r){var a=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[a]}function rE(t,s,r){var a=(t[t.l++]&96)>>5,n=t.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return t.l+=i,[a,n]}var aE=Ws,nE=Ws,iE=Ws;function Wo(t,s,r){return t.l+=2,[bT(t)]}function Mm(t){return t.l+=6,[]}var lE=Wo,oE=Mm,cE=Mm,dE=Wo;function uj(t){return t.l+=2,[is(t),t.read_shift(2)&1]}var uE=Wo,xE=uj,mE=Mm,hE=Wo,fE=Wo,pE=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function gE(t){t.l+=2;var s=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(4),n=t.read_shift(2),i=t.read_shift(2),l=pE[r>>2&31];return{ixti:s,coltype:r&3,rt:l,idx:a,c:n,C:i}}function yE(t){return t.l+=2,[t.read_shift(4)]}function bE(t,s,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function vE(t,s,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function jE(t){var s=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[s,r]}function wE(t){var s=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[s,r]}function NE(t){return t.l+=4,[0,0]}var Cp={1:{n:"PtgExp",f:zT},2:{n:"PtgTbl",f:iE},3:{n:"PtgAdd",f:as},4:{n:"PtgSub",f:as},5:{n:"PtgMul",f:as},6:{n:"PtgDiv",f:as},7:{n:"PtgPower",f:as},8:{n:"PtgConcat",f:as},9:{n:"PtgLt",f:as},10:{n:"PtgLe",f:as},11:{n:"PtgEq",f:as},12:{n:"PtgGe",f:as},13:{n:"PtgGt",f:as},14:{n:"PtgNe",f:as},15:{n:"PtgIsect",f:as},16:{n:"PtgUnion",f:as},17:{n:"PtgRange",f:as},18:{n:"PtgUplus",f:as},19:{n:"PtgUminus",f:as},20:{n:"PtgPercent",f:as},21:{n:"PtgParen",f:as},22:{n:"PtgMissArg",f:as},23:{n:"PtgStr",f:qT},26:{n:"PtgSheet",f:bE},27:{n:"PtgEndSheet",f:vE},28:{n:"PtgErr",f:WT},29:{n:"PtgBool",f:HT},30:{n:"PtgInt",f:VT},31:{n:"PtgNum",f:GT},32:{n:"PtgArray",f:_T},33:{n:"PtgFunc",f:MT},34:{n:"PtgFuncVar",f:BT},35:{n:"PtgName",f:XT},36:{n:"PtgRef",f:LT},37:{n:"PtgArea",f:wT},38:{n:"PtgMemArea",f:eE},39:{n:"PtgMemErr",f:aE},40:{n:"PtgMemNoMem",f:nE},41:{n:"PtgMemFunc",f:tE},42:{n:"PtgRefErr",f:sE},43:{n:"PtgAreaErr",f:kT},44:{n:"PtgRefN",f:OT},45:{n:"PtgAreaN",f:CT},46:{n:"PtgMemAreaN",f:jE},47:{n:"PtgMemNoMemN",f:wE},57:{n:"PtgNameX",f:QT},58:{n:"PtgRef3d",f:IT},59:{n:"PtgArea3d",f:NT},60:{n:"PtgRefErr3d",f:rE},61:{n:"PtgAreaErr3d",f:ST},255:{}},kE={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},SE={1:{n:"PtgElfLel",f:uj},2:{n:"PtgElfRw",f:hE},3:{n:"PtgElfCol",f:lE},6:{n:"PtgElfRwV",f:fE},7:{n:"PtgElfColV",f:dE},10:{n:"PtgElfRadical",f:uE},11:{n:"PtgElfRadicalS",f:mE},13:{n:"PtgElfColS",f:oE},15:{n:"PtgElfColSV",f:cE},16:{n:"PtgElfRadicalLel",f:xE},25:{n:"PtgList",f:gE},29:{n:"PtgSxName",f:yE},255:{}},CE={0:{n:"PtgAttrNoop",f:NE},1:{n:"PtgAttrSemi",f:PT},2:{n:"PtgAttrIf",f:AT},4:{n:"PtgAttrChoose",f:TT},8:{n:"PtgAttrGoto",f:ET},16:{n:"PtgAttrSum",f:UT},32:{n:"PtgAttrBaxcel",f:Sp},33:{n:"PtgAttrBaxcel",f:Sp},64:{n:"PtgAttrSpace",f:DT},65:{n:"PtgAttrSpaceSemi",f:RT},128:{n:"PtgAttrIfError",f:FT},255:{}};function Vo(t,s,r,a){if(a.biff<8)return Ws(t,s);for(var n=t.l+s,i=[],l=0;l!==r.length;++l)switch(r[l][0]){case"PtgArray":r[l][1]=YT(t,0,a),i.push(r[l][1]);break;case"PtgMemArea":r[l][2]=KT(t,r[l][1],a),i.push(r[l][2]);break;case"PtgExp":a&&a.biff==12&&(r[l][1][1]=t.read_shift(4),i.push(r[l][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[l][0]}return s=n-t.l,s!==0&&i.push(Ws(t,s)),i}function Ho(t,s,r){for(var a=t.l+s,n,i,l=[];a!=t.l;)s=a-t.l,i=t[t.l],n=Cp[i]||Cp[kE[i]],(i===24||i===25)&&(n=(i===24?SE:CE)[t[t.l+1]]),!n||!n.f?Ws(t,s):l.push([n.n,n.f(t,s,r)]);return l}function _E(t){for(var s=[],r=0;r<t.length;++r){for(var a=t[r],n=[],i=0;i<a.length;++i){var l=a[i];if(l)switch(l[0]){case 2:n.push('"'+l[1].replace(/"/g,'""')+'"');break;default:n.push(l[1])}else n.push("")}s.push(n.join(","))}return s.join(";")}var TE={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function EE(t,s){if(!t&&!(s&&s.biff<=5&&s.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function xj(t,s,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[s]))return t.SheetNames[s];if(!t.XTI)return"SH33TJSERR6";var a=t.XTI[s];if(r.biff<8)return s>1e4&&(s-=65536),s<0&&(s=-s),s==0?"":t.XTI[s-1];if(!a)return"SH33TJSERR1";var n="";if(r.biff>8)switch(t[a[0]][0]){case 357:return n=a[1]==-1?"#REF":t.SheetNames[a[1]],a[1]==a[2]?n:n+":"+t.SheetNames[a[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[a[0]][0];case 355:default:return"SH33TJSSRC"+t[a[0]][0]}switch(t[a[0]][0][0]){case 1025:return n=a[1]==-1?"#REF":t.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?n:n+":"+t.SheetNames[a[2]];case 14849:return t[a[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return t[a[0]][0][3]?(n=a[1]==-1?"#REF":t[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?n:n+":"+t[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function _p(t,s,r){var a=xj(t,s,r);return a=="#REF"?a:EE(a,r)}function Os(t,s,r,a,n){var i=n&&n.biff||8,l={s:{c:0,r:0}},o=[],c,d,u,p=0,f=0,g,x="";if(!t[0]||!t[0][0])return"";for(var h=-1,m="",j=0,v=t[0].length;j<v;++j){var N=t[0][j];switch(N[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),d=o.pop(),h>=0){switch(t[0][h][1][0]){case 0:m=Jt(" ",t[0][h][1][1]);break;case 1:m=Jt("\r",t[0][h][1][1]);break;default:if(m="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][h][1][0])}d=d+m,h=-1}o.push(d+TE[N[0]]+c);break;case"PtgIsect":c=o.pop(),d=o.pop(),o.push(d+" "+c);break;case"PtgUnion":c=o.pop(),d=o.pop(),o.push(d+","+c);break;case"PtgRange":c=o.pop(),d=o.pop(),o.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Gl(N[1][1],l,n),o.push(ql(u,i));break;case"PtgRefN":u=r?Gl(N[1][1],r,n):N[1][1],o.push(ql(u,i));break;case"PtgRef3d":p=N[1][1],u=Gl(N[1][2],l,n),x=_p(a,p,n),o.push(x+"!"+ql(u,i));break;case"PtgFunc":case"PtgFuncVar":var S=N[1][0],A=N[1][1];S||(S=0),S&=127;var T=S==0?[]:o.slice(-S);o.length-=S,A==="User"&&(A=T.shift()),o.push(A+"("+T.join(",")+")");break;case"PtgBool":o.push(N[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(N[1]);break;case"PtgNum":o.push(String(N[1]));break;case"PtgStr":o.push('"'+N[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(N[1]);break;case"PtgAreaN":g=lp(N[1][1],r?{s:r}:l,n),o.push(D0(g,n));break;case"PtgArea":g=lp(N[1][1],l,n),o.push(D0(g,n));break;case"PtgArea3d":p=N[1][1],g=N[1][2],x=_p(a,p,n),o.push(x+"!"+D0(g,n));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=N[1][2];var k=(a.names||[])[f-1]||(a[0]||[])[f],_=k?k.Name:"SH33TJSNAME"+String(f);_&&_.slice(0,6)=="_xlfn."&&!n.xlfn&&(_=_.slice(6)),o.push(_);break;case"PtgNameX":var y=N[1][1];f=N[1][2];var w;if(n.biff<=5)y<0&&(y=-y),a[y]&&(w=a[y][f]);else{var R="";if(((a[y]||[])[0]||[])[0]==14849||(((a[y]||[])[0]||[])[0]==1025?a[y][f]&&a[y][f].itab>0&&(R=a.SheetNames[a[y][f].itab-1]+"!"):R=a.SheetNames[f-1]+"!"),a[y]&&a[y][f])R+=a[y][f].Name;else if(a[0]&&a[0][f])R+=a[0][f].Name;else{var P=(xj(a,y,n)||"").split(";;");P[f-1]?R=P[f-1]:R+="SH33TJSERRX"}o.push(R);break}w||(w={Name:"SH33TJSERRY"}),o.push(w.Name);break;case"PtgParen":var H="(",L=")";if(h>=0){switch(m="",t[0][h][1][0]){case 2:H=Jt(" ",t[0][h][1][1])+H;break;case 3:H=Jt("\r",t[0][h][1][1])+H;break;case 4:L=Jt(" ",t[0][h][1][1])+L;break;case 5:L=Jt("\r",t[0][h][1][1])+L;break;default:if(n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][h][1][0])}h=-1}o.push(H+o.pop()+L);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:N[1][1],r:N[1][0]};var O={c:r.c,r:r.r};if(a.sharedf[Qe(u)]){var W=a.sharedf[Qe(u)];o.push(Os(W,l,O,a,n))}else{var Q=!1;for(c=0;c!=a.arrayf.length;++c)if(d=a.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){o.push(Os(d[1],l,O,a,n)),Q=!0;break}Q||o.push(N[1])}break;case"PtgArray":o.push("{"+_E(N[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":h=j;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+N[1].idx+"[#"+N[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(N));default:throw new Error("Unrecognized Formula Token: "+String(N))}var D=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(n.biff!=3&&h>=0&&D.indexOf(t[0][j][0])==-1){N=t[0][h];var F=!0;switch(N[1][0]){case 4:F=!1;case 0:m=Jt(" ",N[1][1]);break;case 5:F=!1;case 1:m=Jt("\r",N[1][1]);break;default:if(m="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+N[1][0])}o.push((F?m:"")+o.pop()+(F?"":m)),h=-1}}if(o.length>1&&n.WTF)throw new Error("bad formula stack");return o[0]}function AE(t,s,r){var a=t.l+s,n=r.biff==2?1:2,i,l=t.read_shift(n);if(l==65535)return[[],Ws(t,s-2)];var o=Ho(t,l,r);return s!==l+n&&(i=Vo(t,s-l-n,o,r)),t.l=a,[o,i]}function FE(t,s,r){var a=t.l+s,n=r.biff==2?1:2,i,l=t.read_shift(n);if(l==65535)return[[],Ws(t,s-2)];var o=Ho(t,l,r);return s!==l+n&&(i=Vo(t,s-l-n,o,r)),t.l=a,[o,i]}function PE(t,s,r,a){var n=t.l+s,i=Ho(t,a,r),l;return n!==t.l&&(l=Vo(t,n-t.l,i,r)),[i,l]}function DE(t,s,r){var a=t.l+s,n,i=t.read_shift(2),l=Ho(t,i,r);return i==65535?[[],Ws(t,s-2)]:(s!==i+2&&(n=Vo(t,a-i-2,l,r)),[l,n])}function RE(t){var s;if(Fa(t,t.l+6)!==65535)return[Bs(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return s=t[t.l+2]===1,t.l+=8,[s,"b"];case 2:return s=t[t.l+2],t.l+=8,[s,"e"];case 3:return t.l+=8,["","s"]}return[]}function O0(t,s,r){var a=t.l+s,n=ka(t);r.biff==2&&++t.l;var i=RE(t),l=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=FE(t,a-t.l,r);return{cell:n,val:i[0],formula:o,shared:l>>3&1,tt:i[1]}}function Kd(t,s,r){var a=t.read_shift(4),n=Ho(t,a,r),i=t.read_shift(4),l=i>0?Vo(t,i,n,r):null;return[n,l]}var LE=Kd,Yd=Kd,OE=Kd,IE=Kd,ME={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},mj={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},BE={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Tp(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(s,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function I0(t){var s=t.split(":"),r=s[0].split(".")[0];return[r,s[0].split(".")[1]+(s.length>1?":"+(s[1].split(".")[1]||s[1].split(".")[0]):"")]}var Xl={},Hi={};function Ql(t,s){if(t){var r=[.7,.7,.75,.75,.3,.3];s=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function hj(t,s,r,a,n,i){try{a.cellNF&&(t.z=tt[s])}catch(o){if(a.WTF)throw o}if(!(t.t==="z"&&!a.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=ks(t.v)),(!a||a.cellText!==!1)&&t.t!=="z")try{if(tt[s]==null&&Yn($S[s]||"General",s),t.t==="e")t.w=t.w||pi[t.v];else if(s===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Co(t.v);else if(t.t==="d"){var l=Zs(t.v);(l|0)===l?t.w=l.toString(10):t.w=Co(l)}else{if(t.v===void 0)return"";t.w=ii(t.v,Hi)}else t.t==="d"?t.w=Br(s,Zs(t.v),Hi):t.w=Br(s,t.v,Hi)}catch(o){if(a.WTF)throw o}if(a.cellStyles&&r!=null)try{t.s=i.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=jd(n.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),a.WTF&&(t.s.fgColor.raw_rgb=n.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=jd(n.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),a.WTF&&(t.s.bgColor.raw_rgb=n.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(a.WTF&&i.Fills)throw o}}}function $E(t,s){var r=Kt(s);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=vt(r))}var UE=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,zE=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,WE=/<(?:\w:)?hyperlink [^>]*>/mg,VE=/"(\w*:\w*)"/,HE=/<(?:\w:)?col\b[^>]*[\/]?>/g,GE=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,qE=/<(?:\w:)?pageMargins[^>]*\/>/g,fj=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,JE=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,KE=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function YE(t,s,r,a,n,i,l){if(!t)return t;a||(a={"!id":{}});var o=s.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",u="",p=t.match(zE);p?(d=t.slice(0,p.index),u=t.slice(p.index+p[0].length)):d=u=t;var f=d.match(fj);f?Bm(f[0],o,n,r):(f=d.match(JE))&&XE(f[0],f[1]||"",o,n,r);var g=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var x=d.slice(g,g+50).match(VE);x&&$E(o,x[1])}var h=d.match(KE);h&&h[1]&&rA(h[1],n);var m=[];if(s.cellStyles){var j=d.match(HE);j&&eA(m,j)}p&&aA(p[1],o,s,c,i,l);var v=u.match(GE);v&&(o["!autofilter"]=tA(v[0]));var N=[],S=u.match(UE);if(S)for(g=0;g!=S.length;++g)N[g]=Kt(S[g].slice(S[g].indexOf('"')+1));var A=u.match(WE);A&&QE(o,A,a);var T=u.match(qE);if(T&&(o["!margins"]=ZE(qe(T[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=vt(c)),s.sheetRows>0&&o["!ref"]){var k=Kt(o["!ref"]);s.sheetRows<=+k.e.r&&(k.e.r=s.sheetRows-1,k.e.r>c.e.r&&(k.e.r=c.e.r),k.e.r<k.s.r&&(k.s.r=k.e.r),k.e.c>c.e.c&&(k.e.c=c.e.c),k.e.c<k.s.c&&(k.s.c=k.e.c),o["!fullref"]=o["!ref"],o["!ref"]=vt(k))}return m.length>0&&(o["!cols"]=m),N.length>0&&(o["!merges"]=N),o}function Bm(t,s,r,a){var n=qe(t);r.Sheets[a]||(r.Sheets[a]={}),n.codeName&&(r.Sheets[a].CodeName=kt(Rt(n.codeName)))}function XE(t,s,r,a,n){Bm(t.slice(0,t.indexOf(">")),r,a,n)}function QE(t,s,r){for(var a=Array.isArray(t),n=0;n!=s.length;++n){var i=qe(Rt(s[n]),!0);if(!i.ref)return;var l=((r||{})["!id"]||[])[i.id];l?(i.Target=l.Target,i.location&&(i.Target+="#"+kt(i.location))):(i.Target="#"+kt(i.location),l={Target:i.Target,TargetMode:"Internal"}),i.Rel=l,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=Kt(i.ref),c=o.s.r;c<=o.e.r;++c)for(var d=o.s.c;d<=o.e.c;++d){var u=Qe({c:d,r:c});a?(t[c]||(t[c]=[]),t[c][d]||(t[c][d]={t:"z",v:void 0}),t[c][d].l=i):(t[u]||(t[u]={t:"z",v:void 0}),t[u].l=i)}}}function ZE(t){var s={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(s[r]=parseFloat(t[r]))}),s}function eA(t,s){for(var r=!1,a=0;a!=s.length;++a){var n=qe(s[a],!0);n.hidden&&(n.hidden=$t(n.hidden));var i=parseInt(n.min,10)-1,l=parseInt(n.max,10)-1;for(n.outlineLevel&&(n.level=+n.outlineLevel||0),delete n.min,delete n.max,n.width=+n.width,!r&&n.width&&(r=!0,Im(n.width)),tl(n);i<=l;)t[i++]=Es(n)}}function tA(t){var s={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return s}var sA=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function rA(t,s){s.Views||(s.Views=[{}]),(t.match(sA)||[]).forEach(function(r,a){var n=qe(r);s.Views[a]||(s.Views[a]={}),+n.zoomScale&&(s.Views[a].zoom=+n.zoomScale),$t(n.rightToLeft)&&(s.Views[a].RTL=!0)})}var aA=function(){var t=/<(?:\w+:)?c[ \/>]/,s=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,n=/ref=["']([^"']*)["']/,i=_o("v"),l=_o("f");return function(c,d,u,p,f,g){for(var x=0,h="",m=[],j=[],v=0,N=0,S=0,A="",T,k,_=0,y=0,w,R,P=0,H=0,L=Array.isArray(g.CellXf),O,W=[],Q=[],D=Array.isArray(d),F=[],V={},te=!1,I=!!u.sheetStubs,U=c.split(s),z=0,Y=U.length;z!=Y;++z){h=U[z].trim();var K=h.length;if(K!==0){var ne=0;e:for(x=0;x<K;++x)switch(h[x]){case">":if(h[x-1]!="/"){++x;break e}if(u&&u.cellStyles){if(k=qe(h.slice(ne,x),!0),_=k.r!=null?parseInt(k.r,10):_+1,y=-1,u.sheetRows&&u.sheetRows<_)continue;V={},te=!1,k.ht&&(te=!0,V.hpt=parseFloat(k.ht),V.hpx=Fo(V.hpt)),k.hidden=="1"&&(te=!0,V.hidden=!0),k.outlineLevel!=null&&(te=!0,V.level=+k.outlineLevel),te&&(F[_-1]=V)}break;case"<":ne=x;break}if(ne>=x)break;if(k=qe(h.slice(ne,x),!0),_=k.r!=null?parseInt(k.r,10):_+1,y=-1,!(u.sheetRows&&u.sheetRows<_)){p.s.r>_-1&&(p.s.r=_-1),p.e.r<_-1&&(p.e.r=_-1),u&&u.cellStyles&&(V={},te=!1,k.ht&&(te=!0,V.hpt=parseFloat(k.ht),V.hpx=Fo(V.hpt)),k.hidden=="1"&&(te=!0,V.hidden=!0),k.outlineLevel!=null&&(te=!0,V.level=+k.outlineLevel),te&&(F[_-1]=V)),m=h.slice(x).split(t);for(var q=0;q!=m.length&&m[q].trim().charAt(0)=="<";++q);for(m=m.slice(q),x=0;x!=m.length;++x)if(h=m[x].trim(),h.length!==0){if(j=h.match(r),v=x,N=0,S=0,h="<c "+(h.slice(0,1)=="<"?">":"")+h,j!=null&&j.length===2){for(v=0,A=j[1],N=0;N!=A.length&&!((S=A.charCodeAt(N)-64)<1||S>26);++N)v=26*v+S;--v,y=v}else++y;for(N=0;N!=h.length&&h.charCodeAt(N)!==62;++N);if(++N,k=qe(h.slice(0,N),!0),k.r||(k.r=Qe({r:_-1,c:y})),A=h.slice(N),T={t:""},(j=A.match(i))!=null&&j[1]!==""&&(T.v=kt(j[1])),u.cellFormula){if((j=A.match(l))!=null&&j[1]!==""){if(T.f=kt(Rt(j[1])).replace(/\r\n/g,`
`),u.xlfn||(T.f=kp(T.f)),j[0].indexOf('t="array"')>-1)T.F=(A.match(n)||[])[1],T.F.indexOf(":")>-1&&W.push([Kt(T.F),T.F]);else if(j[0].indexOf('t="shared"')>-1){R=qe(j[0]);var re=kt(Rt(j[1]));u.xlfn||(re=kp(re)),Q[parseInt(R.si,10)]=[R,re,k.r]}}else(j=A.match(/<f[^>]*\/>/))&&(R=qe(j[0]),Q[R.si]&&(T.f=fT(Q[R.si][1],Q[R.si][2],k.r)));var xe=Ks(k.r);for(N=0;N<W.length;++N)xe.r>=W[N][0].s.r&&xe.r<=W[N][0].e.r&&xe.c>=W[N][0].s.c&&xe.c<=W[N][0].e.c&&(T.F=W[N][1])}if(k.t==null&&T.v===void 0)if(T.f||T.F)T.v=0,T.t="n";else if(I)T.t="z";else continue;else T.t=k.t||"n";switch(p.s.c>y&&(p.s.c=y),p.e.c<y&&(p.e.c=y),T.t){case"n":if(T.v==""||T.v==null){if(!I)continue;T.t="z"}else T.v=parseFloat(T.v);break;case"s":if(typeof T.v>"u"){if(!I)continue;T.t="z"}else w=Xl[parseInt(T.v,10)],T.v=w.t,T.r=w.r,u.cellHTML&&(T.h=w.h);break;case"str":T.t="s",T.v=T.v!=null?Rt(T.v):"",u.cellHTML&&(T.h=Cm(T.v));break;case"inlineStr":j=A.match(a),T.t="s",j!=null&&(w=Om(j[1]))?(T.v=w.t,u.cellHTML&&(T.h=w.h)):T.v="";break;case"b":T.v=$t(T.v);break;case"d":u.cellDates?T.v=ks(T.v,1):(T.v=Zs(ks(T.v,1)),T.t="n");break;case"e":(!u||u.cellText!==!1)&&(T.w=T.v),T.v=Ov[T.v];break}if(P=H=0,O=null,L&&k.s!==void 0&&(O=g.CellXf[k.s],O!=null&&(O.numFmtId!=null&&(P=O.numFmtId),u.cellStyles&&O.fillId!=null&&(H=O.fillId))),hj(T,P,H,u,f,g),u.cellDates&&L&&T.t=="n"&&cl(tt[P])&&(T.t="d",T.v=qd(T.v)),k.cm&&u.xlmeta){var _e=(u.xlmeta.Cell||[])[+k.cm-1];_e&&_e.type=="XLDAPR"&&(T.D=!0)}if(D){var X=Ks(k.r);d[X.r]||(d[X.r]=[]),d[X.r][X.c]=T}else d[k.r]=T}}}}F.length>0&&(d["!rows"]=F)}}();function nA(t,s){var r={},a=t.l+s;r.r=t.read_shift(4),t.l+=4;var n=t.read_shift(2);t.l+=1;var i=t.read_shift(1);return t.l=a,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=n/20),r}var iA=fi;function lA(){}function oA(t,s){var r={},a=t[t.l];return++t.l,r.above=!(a&64),r.left=!(a&128),t.l+=18,r.name=AC(t),r}function cA(t){var s=$r(t);return[s]}function dA(t){var s=hi(t);return[s]}function uA(t){var s=$r(t),r=t.read_shift(1);return[s,r,"b"]}function xA(t){var s=hi(t),r=t.read_shift(1);return[s,r,"b"]}function mA(t){var s=$r(t),r=t.read_shift(1);return[s,r,"e"]}function hA(t){var s=hi(t),r=t.read_shift(1);return[s,r,"e"]}function fA(t){var s=$r(t),r=t.read_shift(4);return[s,r,"s"]}function pA(t){var s=hi(t),r=t.read_shift(4);return[s,r,"s"]}function gA(t){var s=$r(t),r=Bs(t);return[s,r,"n"]}function pj(t){var s=hi(t),r=Bs(t);return[s,r,"n"]}function yA(t){var s=$r(t),r=Dm(t);return[s,r,"n"]}function bA(t){var s=hi(t),r=Dm(t);return[s,r,"n"]}function vA(t){var s=$r(t),r=Fm(t);return[s,r,"is"]}function jA(t){var s=$r(t),r=Us(t);return[s,r,"str"]}function wA(t){var s=hi(t),r=Us(t);return[s,r,"str"]}function NA(t,s,r){var a=t.l+s,n=$r(t);n.r=r["!row"];var i=t.read_shift(1),l=[n,i,"b"];if(r.cellFormula){t.l+=2;var o=Yd(t,a-t.l,r);l[3]=Os(o,null,n,r.supbooks,r)}else t.l=a;return l}function kA(t,s,r){var a=t.l+s,n=$r(t);n.r=r["!row"];var i=t.read_shift(1),l=[n,i,"e"];if(r.cellFormula){t.l+=2;var o=Yd(t,a-t.l,r);l[3]=Os(o,null,n,r.supbooks,r)}else t.l=a;return l}function SA(t,s,r){var a=t.l+s,n=$r(t);n.r=r["!row"];var i=Bs(t),l=[n,i,"n"];if(r.cellFormula){t.l+=2;var o=Yd(t,a-t.l,r);l[3]=Os(o,null,n,r.supbooks,r)}else t.l=a;return l}function CA(t,s,r){var a=t.l+s,n=$r(t);n.r=r["!row"];var i=Us(t),l=[n,i,"str"];if(r.cellFormula){t.l+=2;var o=Yd(t,a-t.l,r);l[3]=Os(o,null,n,r.supbooks,r)}else t.l=a;return l}var _A=fi;function TA(t,s){var r=t.l+s,a=fi(t),n=Pm(t),i=Us(t),l=Us(t),o=Us(t);t.l=r;var c={rfx:a,relId:n,loc:i,display:o};return l&&(c.Tooltip=l),c}function EA(){}function AA(t,s,r){var a=t.l+s,n=Dv(t),i=t.read_shift(1),l=[n];if(l[2]=i,r.cellFormula){var o=LE(t,a-t.l,r);l[1]=o}else t.l=a;return l}function FA(t,s,r){var a=t.l+s,n=fi(t),i=[n];if(r.cellFormula){var l=IE(t,a-t.l,r);i[1]=l,t.l=a}else t.l=a;return i}var PA=["left","right","top","bottom","header","footer"];function DA(t){var s={};return PA.forEach(function(r){s[r]=Bs(t)}),s}function RA(t){var s=t.read_shift(2);return t.l+=28,{RTL:s&32}}function LA(){}function OA(){}function IA(t,s,r,a,n,i,l){if(!t)return t;var o=s||{};a||(a={"!id":{}});var c=o.dense?[]:{},d,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},p=!1,f=!1,g,x,h,m,j,v,N,S,A,T=[];o.biff=12,o["!row"]=0;var k=0,_=!1,y=[],w={},R=o.supbooks||n.supbooks||[[]];if(R.sharedf=w,R.arrayf=y,R.SheetNames=n.SheetNames||n.Sheets.map(function(D){return D.name}),!o.supbooks&&(o.supbooks=R,n.Names))for(var P=0;P<n.Names.length;++P)R[0][P+1]=n.Names[P];var H=[],L=[],O=!1;kd[16]={n:"BrtShortReal",f:pj};var W;if(Ga(t,function(F,V,te){if(!f)switch(te){case 148:d=F;break;case 0:g=F,o.sheetRows&&o.sheetRows<=g.r&&(f=!0),S=As(m=g.r),o["!row"]=g.r,(F.hidden||F.hpt||F.level!=null)&&(F.hpt&&(F.hpx=Fo(F.hpt)),L[F.r]=F);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(x={t:F[2]},F[2]){case"n":x.v=F[1];break;case"s":N=Xl[F[1]],x.v=N.t,x.r=N.r;break;case"b":x.v=!!F[1];break;case"e":x.v=F[1],o.cellText!==!1&&(x.w=pi[x.v]);break;case"str":x.t="s",x.v=F[1];break;case"is":x.t="s",x.v=F[1].t;break}if((h=l.CellXf[F[0].iStyleRef])&&hj(x,h.numFmtId,null,o,i,l),j=F[0].c==-1?j+1:F[0].c,o.dense?(c[m]||(c[m]=[]),c[m][j]=x):c[ps(j)+S]=x,o.cellFormula){for(_=!1,k=0;k<y.length;++k){var I=y[k];g.r>=I[0].s.r&&g.r<=I[0].e.r&&j>=I[0].s.c&&j<=I[0].e.c&&(x.F=vt(I[0]),_=!0)}!_&&F.length>3&&(x.f=F[3])}if(u.s.r>g.r&&(u.s.r=g.r),u.s.c>j&&(u.s.c=j),u.e.r<g.r&&(u.e.r=g.r),u.e.c<j&&(u.e.c=j),o.cellDates&&h&&x.t=="n"&&cl(tt[h.numFmtId])){var U=Hn(x.v);U&&(x.t="d",x.v=new Date(U.y,U.m-1,U.d,U.H,U.M,U.S,U.u))}W&&(W.type=="XLDAPR"&&(x.D=!0),W=void 0);break;case 1:case 12:if(!o.sheetStubs||p)break;x={t:"z",v:void 0},j=F[0].c==-1?j+1:F[0].c,o.dense?(c[m]||(c[m]=[]),c[m][j]=x):c[ps(j)+S]=x,u.s.r>g.r&&(u.s.r=g.r),u.s.c>j&&(u.s.c=j),u.e.r<g.r&&(u.e.r=g.r),u.e.c<j&&(u.e.c=j),W&&(W.type=="XLDAPR"&&(x.D=!0),W=void 0);break;case 176:T.push(F);break;case 49:W=((o.xlmeta||{}).Cell||[])[F-1];break;case 494:var z=a["!id"][F.relId];for(z?(F.Target=z.Target,F.loc&&(F.Target+="#"+F.loc),F.Rel=z):F.relId==""&&(F.Target="#"+F.loc),m=F.rfx.s.r;m<=F.rfx.e.r;++m)for(j=F.rfx.s.c;j<=F.rfx.e.c;++j)o.dense?(c[m]||(c[m]=[]),c[m][j]||(c[m][j]={t:"z",v:void 0}),c[m][j].l=F):(v=Qe({c:j,r:m}),c[v]||(c[v]={t:"z",v:void 0}),c[v].l=F);break;case 426:if(!o.cellFormula)break;y.push(F),A=o.dense?c[m][j]:c[ps(j)+S],A.f=Os(F[1],u,{r:g.r,c:j},R,o),A.F=vt(F[0]);break;case 427:if(!o.cellFormula)break;w[Qe(F[0].s)]=F[1],A=o.dense?c[m][j]:c[ps(j)+S],A.f=Os(F[1],u,{r:g.r,c:j},R,o);break;case 60:if(!o.cellStyles)break;for(;F.e>=F.s;)H[F.e--]={width:F.w/256,hidden:!!(F.flags&1),level:F.level},O||(O=!0,Im(F.w/256)),tl(H[F.e+1]);break;case 161:c["!autofilter"]={ref:vt(F)};break;case 476:c["!margins"]=F;break;case 147:n.Sheets[r]||(n.Sheets[r]={}),F.name&&(n.Sheets[r].CodeName=F.name),(F.above||F.left)&&(c["!outline"]={above:F.above,left:F.left});break;case 137:n.Views||(n.Views=[{}]),n.Views[0]||(n.Views[0]={}),F.RTL&&(n.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:p=!0;break;case 36:p=!1;break;case 37:p=!0;break;case 38:p=!1;break;default:if(!V.T){if(!p||o.WTF)throw new Error("Unexpected record 0x"+te.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(u.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(c["!ref"]=vt(d||u)),o.sheetRows&&c["!ref"]){var Q=Kt(c["!ref"]);o.sheetRows<=+Q.e.r&&(Q.e.r=o.sheetRows-1,Q.e.r>u.e.r&&(Q.e.r=u.e.r),Q.e.r<Q.s.r&&(Q.s.r=Q.e.r),Q.e.c>u.e.c&&(Q.e.c=u.e.c),Q.e.c<Q.s.c&&(Q.s.c=Q.e.c),c["!fullref"]=c["!ref"],c["!ref"]=vt(Q))}return T.length>0&&(c["!merges"]=T),H.length>0&&(c["!cols"]=H),L.length>0&&(c["!rows"]=L),c}function MA(t){var s=[],r=t.match(/^<c:numCache>/),a;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var l=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);l&&(s[+l[1]]=r?+l[2]:l[2])});var n=kt((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){a=i.replace(/<.*?>/g,"")}),[s,n,a]}function BA(t,s,r,a,n,i){var l=i||{"!type":"chart"};if(!t)return i;var o=0,c=0,d="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(p){var f=MA(p);u.s.r=u.s.c=0,u.e.c=o,d=ps(o),f[0].forEach(function(g,x){l[d+As(x)]={t:"n",v:g,z:f[1]},c=x}),u.e.r<c&&(u.e.r=c),++o}),o>0&&(l["!ref"]=vt(u)),l}function $A(t,s,r,a,n){if(!t)return t;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l,o=t.match(fj);return o&&Bm(o[0],i,n,r),(l=t.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=l[1]),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}function UA(t,s){t.l+=10;var r=Us(t);return{name:r}}function zA(t,s,r,a,n){if(!t)return t;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l=!1;return Ga(t,function(c,d,u){switch(u){case 550:i["!rel"]=c;break;case 651:n.Sheets[r]||(n.Sheets[r]={}),c.name&&(n.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!l||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},s),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}var gj=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],WA=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],VA=[],HA=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function Ep(t,s){for(var r=0;r!=t.length;++r)for(var a=t[r],n=0;n!=s.length;++n){var i=s[n];if(a[i[0]]==null)a[i[0]]=i[1];else switch(i[2]){case"bool":typeof a[i[0]]=="string"&&(a[i[0]]=$t(a[i[0]]));break;case"int":typeof a[i[0]]=="string"&&(a[i[0]]=parseInt(a[i[0]],10));break}}}function Ap(t,s){for(var r=0;r!=s.length;++r){var a=s[r];if(t[a[0]]==null)t[a[0]]=a[1];else switch(a[2]){case"bool":typeof t[a[0]]=="string"&&(t[a[0]]=$t(t[a[0]]));break;case"int":typeof t[a[0]]=="string"&&(t[a[0]]=parseInt(t[a[0]],10));break}}}function yj(t){Ap(t.WBProps,gj),Ap(t.CalcPr,HA),Ep(t.WBView,WA),Ep(t.Sheets,VA),Hi.date1904=$t(t.WBProps.date1904)}var GA="][*?/\\".split("");function qA(t,s){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return GA.forEach(function(a){if(t.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var JA=/<\w+:workbook/;function KA(t,s){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,n="xmlns",i={},l=0;if(t.replace(Vs,function(c,d){var u=qe(c);switch(Na(u[0])){case"<?xml":break;case"<workbook":c.match(JA)&&(n="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=u[n];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":gj.forEach(function(p){if(u[p[0]]!=null)switch(p[2]){case"bool":r.WBProps[p[0]]=$t(u[p[0]]);break;case"int":r.WBProps[p[0]]=parseInt(u[p[0]],10);break;default:r.WBProps[p[0]]=u[p[0]]}}),u.codeName&&(r.WBProps.CodeName=Rt(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=kt(Rt(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":i={},i.Name=Rt(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),$t(u.hidden||"0")&&(i.Hidden=!0),l=d+c.length;break;case"</definedName>":i.Ref=kt(Rt(t.slice(l,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&s.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return c}),mC.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return yj(r),r}function YA(t,s){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=tx(t),r.name=Us(t),r}function XA(t,s){var r={},a=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var n=s>8?Us(t):"";return n.length>0&&(r.CodeName=n),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function QA(t,s){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=s-8,r}function ZA(t,s,r){var a=t.l+s;t.l+=4,t.l+=1;var n=t.read_shift(4),i=FC(t),l=OE(t,0,r),o=Pm(t);t.l=a;var c={Name:i,Ptg:l};return n<268435455&&(c.Sheet=n),o&&(c.Comment=o),c}function eF(t,s){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],n=!1;s||(s={}),s.biff=12;var i=[],l=[[]];return l.SheetNames=[],l.XTI=[],kd[16]={n:"BrtFRTArchID$",f:QA},Ga(t,function(c,d,u){switch(u){case 156:l.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(s.SID=c.Sheet),c.Ref=Os(c.Ptg,null,null,l,s),delete s.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:l[0].length?l.push([u,c]):l[0]=[u,c],l[l.length-1].XTI=[];break;case 362:l.length===0&&(l[0]=[],l[0].XTI=[]),l[l.length-1].XTI=l[l.length-1].XTI.concat(c),l.XTI=l.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(u),n=!0;break;case 36:a.pop(),n=!1;break;case 37:a.push(u),n=!0;break;case 38:a.pop(),n=!1;break;case 16:break;default:if(!d.T){if(!n||s.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},s),yj(r),r.Names=i,r.supbooks=l,r}function tF(t,s,r){return s.slice(-4)===".bin"?eF(t,r):KA(t,r)}function sF(t,s,r,a,n,i,l,o){return s.slice(-4)===".bin"?IA(t,a,r,n,i,l,o):YE(t,a,r,n,i,l,o)}function rF(t,s,r,a,n,i,l,o){return s.slice(-4)===".bin"?zA(t,a,r,n,i):$A(t,a,r,n,i)}function aF(t,s,r,a,n,i,l,o){return s.slice(-4)===".bin"?xT():mT()}function nF(t,s,r,a,n,i,l,o){return s.slice(-4)===".bin"?dT():uT()}function iF(t,s,r,a){return s.slice(-4)===".bin"?_5(t,r,a):j5(t,r,a)}function lF(t,s,r){return aj(t,r)}function oF(t,s,r){return s.slice(-4)===".bin"?W_(t,r):U_(t,r)}function cF(t,s,r){return s.slice(-4)===".bin"?lT(t,r):sT(t,r)}function dF(t,s,r){return s.slice(-4)===".bin"?Z5(t):X5(t)}function uF(t,s,r,a){return r.slice(-4)===".bin"?eT(t,s,r,a):void 0}function xF(t,s,r){return s.slice(-4)===".bin"?K5(t,s,r):Y5(t,s,r)}var bj=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,vj=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Vr(t,s){var r=t.split(/\s+/),a=[];if(a[0]=r[0],r.length===1)return a;var n=t.match(bj),i,l,o,c;if(n)for(c=0;c!=n.length;++c)i=n[c].match(vj),(l=i[1].indexOf(":"))===-1?a[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(l+1),a[o]=i[2].slice(1,i[2].length-1));return a}function mF(t){var s=t.split(/\s+/),r={};if(s.length===1)return r;var a=t.match(bj),n,i,l,o;if(a)for(o=0;o!=a.length;++o)n=a[o].match(vj),(i=n[1].indexOf(":"))===-1?r[n[1]]=n[2].slice(1,n[2].length-1):(n[1].slice(0,6)==="xmlns:"?l="xmlns"+n[1].slice(6):l=n[1].slice(i+1),r[l]=n[2].slice(1,n[2].length-1));return r}var Zl;function hF(t,s){var r=Zl[t]||kt(t);return r==="General"?ii(s):Br(r,s)}function fF(t,s,r,a){var n=a;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":n=$t(a);break;case"i2":case"int":n=parseInt(a,10);break;case"r4":case"float":n=parseFloat(a);break;case"date":case"dateTime.tz":n=ks(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[kt(s)]=n}function pF(t,s,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||pi[t.v]:s==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Co(t.v):t.w=ii(t.v):t.w=hF(s||"General",t.v)}catch(i){if(r.WTF)throw i}try{var a=Zl[s]||s||"General";if(r.cellNF&&(t.z=a),r.cellDates&&t.t=="n"&&cl(a)){var n=Hn(t.v);n&&(t.t="d",t.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}catch(i){if(r.WTF)throw i}}}function gF(t,s,r){if(r.cellStyles&&s.Interior){var a=s.Interior;a.Pattern&&(a.patternType=f5[a.Pattern]||a.Pattern)}t[s.ID]=s}function yF(t,s,r,a,n,i,l,o,c,d){var u="General",p=a.StyleID,f={};d=d||{};var g=[],x=0;for(p===void 0&&o&&(p=o.StyleID),p===void 0&&l&&(p=l.StyleID);i[p]!==void 0&&(i[p].nf&&(u=i[p].nf),i[p].Interior&&g.push(i[p].Interior),!!i[p].Parent);)p=i[p].Parent;switch(r.Type){case"Boolean":a.t="b",a.v=$t(t);break;case"String":a.t="s",a.r=Qf(kt(t)),a.v=t.indexOf("<")>-1?kt(s||t).replace(/<.*?>/g,""):a.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),a.v=(ks(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),a.v!==a.v?a.v=kt(t):a.v<60&&(a.v=a.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+t),a.t||(a.t="n");break;case"Error":a.t="e",a.v=Ov[t],d.cellText!==!1&&(a.w=t);break;default:t==""&&s==""?a.t="z":(a.t="s",a.v=Qf(s||t));break}if(pF(a,u,d),d.cellFormula!==!1)if(a.Formula){var h=kt(a.Formula);h.charCodeAt(0)==61&&(h=h.slice(1)),a.f=Vi(h,n),delete a.Formula,a.ArrayRange=="RC"?a.F=Vi("RC:RC",n):a.ArrayRange&&(a.F=Vi(a.ArrayRange,n),c.push([Kt(a.F),a.F]))}else for(x=0;x<c.length;++x)n.r>=c[x][0].s.r&&n.r<=c[x][0].e.r&&n.c>=c[x][0].s.c&&n.c<=c[x][0].e.c&&(a.F=c[x][1]);d.cellStyles&&(g.forEach(function(m){!f.patternType&&m.patternType&&(f.patternType=m.patternType)}),a.s=f),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function bF(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function M0(t,s){var r=s||{};ov();var a=Fl(_m(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(a=Rt(a));var n=a.slice(0,1024).toLowerCase(),i=!1;if(n=n.replace(/".*?"/g,""),(n.indexOf(">")&1023)>Math.min(n.indexOf(",")&1023,n.indexOf(";")&1023)){var l=Es(r);return l.type="string",Eo.to_workbook(a,l)}if(n.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(st){n.indexOf("<"+st)>=0&&(i=!0)}),i)return TF(a,r);Zl={"General Number":"General","General Date":tt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":tt[15],"Short Date":tt[14],"Long Time":tt[19],"Medium Time":tt[18],"Short Time":tt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:tt[2],Standard:tt[4],Percent:tt[10],Scientific:tt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],d,u={},p=[],f=r.dense?[]:{},g="",x={},h={},m=Vr('<Data ss:Type="String">'),j=0,v=0,N=0,S={s:{r:2e6,c:2e6},e:{r:0,c:0}},A={},T={},k="",_=0,y=[],w={},R={},P=0,H=[],L=[],O={},W=[],Q,D=!1,F=[],V=[],te={},I=0,U=0,z={Sheets:[],WBProps:{date1904:!1}},Y={};To.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var K="";o=To.exec(a);)switch(o[3]=(K=o[3]).toLowerCase()){case"data":if(K=="data"){if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?yF(a.slice(j,o.index),k,m,c[c.length-1][0]=="comment"?O:x,{c:v,r:N},A,W[v],h,F,r):(k="",m=Vr(o[0]),j=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(L.length>0&&(x.c=L),(!r.sheetRows||r.sheetRows>N)&&x.v!==void 0&&(r.dense?(f[N]||(f[N]=[]),f[N][v]=x):f[ps(v)+As(N)]=x),x.HRef&&(x.l={Target:kt(x.HRef)},x.HRefScreenTip&&(x.l.Tooltip=x.HRefScreenTip),delete x.HRef,delete x.HRefScreenTip),(x.MergeAcross||x.MergeDown)&&(I=v+(parseInt(x.MergeAcross,10)|0),U=N+(parseInt(x.MergeDown,10)|0),y.push({s:{c:v,r:N},e:{c:I,r:U}})),!r.sheetStubs)x.MergeAcross?v=I+1:++v;else if(x.MergeAcross||x.MergeDown){for(var ne=v;ne<=I;++ne)for(var q=N;q<=U;++q)(ne>v||q>N)&&(r.dense?(f[q]||(f[q]=[]),f[q][ne]={t:"z"}):f[ps(ne)+As(q)]={t:"z"});v=I+1}else++v;else x=mF(o[0]),x.Index&&(v=+x.Index-1),v<S.s.c&&(S.s.c=v),v>S.e.c&&(S.e.c=v),o[0].slice(-2)==="/>"&&++v,L=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(N<S.s.r&&(S.s.r=N),N>S.e.r&&(S.e.r=N),o[0].slice(-2)==="/>"&&(h=Vr(o[0]),h.Index&&(N=+h.Index-1)),v=0,++N):(h=Vr(o[0]),h.Index&&(N=+h.Index-1),te={},(h.AutoFitHeight=="0"||h.Height)&&(te.hpx=parseInt(h.Height,10),te.hpt=rj(te.hpx),V[N]=te),h.Hidden=="1"&&(te.hidden=!0,V[N]=te));break;case"worksheet":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"));p.push(g),S.s.r<=S.e.r&&S.s.c<=S.e.c&&(f["!ref"]=vt(S),r.sheetRows&&r.sheetRows<=S.e.r&&(f["!fullref"]=f["!ref"],S.e.r=r.sheetRows-1,f["!ref"]=vt(S))),y.length&&(f["!merges"]=y),W.length>0&&(f["!cols"]=W),V.length>0&&(f["!rows"]=V),u[g]=f}else S={s:{r:2e6,c:2e6},e:{r:0,c:0}},N=v=0,c.push([o[3],!1]),d=Vr(o[0]),g=kt(d.Name),f=r.dense?[]:{},y=[],F=[],V=[],Y={name:g,Hidden:0},z.Sheets.push(Y);break;case"table":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),W=[],D=!1}break;case"style":o[1]==="/"?gF(A,T,r):T=Vr(o[0]);break;case"numberformat":T.nf=kt(Vr(o[0]).Format||"General"),Zl[T.nf]&&(T.nf=Zl[T.nf]);for(var re=0;re!=392&&tt[re]!=T.nf;++re);if(re==392){for(re=57;re!=392;++re)if(tt[re]==null){Yn(T.nf,re);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(Q=Vr(o[0]),Q.Hidden&&(Q.hidden=!0,delete Q.Hidden),Q.Width&&(Q.wpx=parseInt(Q.Width,10)),!D&&Q.wpx>10){D=!0,Js=tj;for(var xe=0;xe<W.length;++xe)W[xe]&&tl(W[xe])}D&&tl(Q),W[Q.Index-1||W.length]=Q;for(var _e=0;_e<+Q.Span;++_e)W[W.length]=Es(Q);break;case"namedrange":if(o[1]==="/")break;z.Names||(z.Names=[]);var X=qe(o[0]),Ae={Name:X.Name,Ref:Vi(X.RefersTo.slice(1),{r:0,c:0})};z.Sheets.length>0&&(Ae.Sheet=z.Sheets.length-1),z.Names.push(Ae);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?k+=a.slice(_,o.index):_=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;T.Interior=Vr(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?s6(w,K,a.slice(P,o.index)):P=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"));bF(O),L.push(O)}else c.push([o[3],!1]),d=Vr(o[0]),O={a:d.Author};break;case"autofilter":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Ie=Vr(o[0]);f["!autofilter"]={ref:Vi(Ie.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return Op(a,r);var He=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:He=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:He=!1}break;case"excelworkbook":switch(o[3]){case"date1904":z.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:He=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:He=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(a.slice(P,o.index)){case"SheetHidden":Y.Hidden=1;break;case"SheetVeryHidden":Y.Hidden=2;break}else P=o.index+o[0].length;break;case"header":f["!margins"]||Ql(f["!margins"]={},"xlml"),isNaN(+qe(o[0]).Margin)||(f["!margins"].header=+qe(o[0]).Margin);break;case"footer":f["!margins"]||Ql(f["!margins"]={},"xlml"),isNaN(+qe(o[0]).Margin)||(f["!margins"].footer=+qe(o[0]).Margin);break;case"pagemargins":var Le=qe(o[0]);f["!margins"]||Ql(f["!margins"]={},"xlml"),isNaN(+Le.Top)||(f["!margins"].top=+Le.Top),isNaN(+Le.Left)||(f["!margins"].left=+Le.Left),isNaN(+Le.Right)||(f["!margins"].right=+Le.Right),isNaN(+Le.Bottom)||(f["!margins"].bottom=+Le.Bottom);break;case"displayrighttoleft":z.Views||(z.Views=[]),z.Views[0]||(z.Views[0]={}),z.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:He=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:He=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:He=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:He=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:He=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:He=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:He=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:He=!1}break;case"smarttags":break;default:He=!1;break}if(He||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?fF(R,K,H,a.slice(P,o.index)):(H=o,P=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var ve={};return!r.bookSheets&&!r.bookProps&&(ve.Sheets=u),ve.SheetNames=p,ve.Workbook=z,ve.SSF=Es(tt),ve.Props=w,ve.Custprops=R,ve}function nx(t,s){switch(zm(s=s||{}),s.type||"base64"){case"base64":return M0(Nr(t),s);case"binary":case"buffer":case"file":return M0(t,s);case"array":return M0(mi(t),s)}}function vF(t){var s={},r=t.content;if(r.l=28,s.AnsiUserType=r.read_shift(0,"lpstr-ansi"),s.AnsiClipboardFormat=RC(r),r.length-r.l<=4)return s;var a=r.read_shift(4);if(a==0||a>40||(r.l-=4,s.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(a=r.read_shift(4),a!==1907505652)||(s.UnicodeClipboardFormat=LC(r),a=r.read_shift(4),a==0||a>40))return s;r.l-=4,s.Reserved2=r.read_shift(0,"lpwstr")}var jF=[60,1084,2066,2165,2175];function wF(t,s,r,a,n){var i=a,l=[],o=r.slice(r.l,r.l+i);if(n&&n.enc&&n.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:n.enc.insitu(o)}l.push(o),r.l+=i;for(var c=Fa(r,r.l),d=ix[c],u=0;d!=null&&jF.indexOf(c)>-1;)i=Fa(r,r.l+2),u=r.l+4,c==2066?u+=4:(c==2165||c==2175)&&(u+=12),o=r.slice(u,r.l+4+i),l.push(o),r.l+=4+i,d=ix[c=Fa(r,r.l)];var p=an(l);_s(p,0);var f=0;p.lens=[];for(var g=0;g<l.length;++g)p.lens.push(f),f+=l[g].length;if(p.length<a)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+p.length+" < "+a;return s.f(p,p.length,n)}function oa(t,s,r){if(t.t!=="z"&&t.XF){var a=0;try{a=t.z||t.XF.numFmtId||0,s.cellNF&&(t.z=tt[a])}catch(i){if(s.WTF)throw i}if(!s||s.cellText!==!1)try{t.t==="e"?t.w=t.w||pi[t.v]:a===0||a=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Co(t.v):t.w=ii(t.v):t.w=Br(a,t.v,{date1904:!!r,dateNF:s&&s.dateNF})}catch(i){if(s.WTF)throw i}if(s.cellDates&&a&&t.t=="n"&&cl(tt[a]||String(a))){var n=Hn(t.v);n&&(t.t="d",t.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}}function jc(t,s,r){return{v:t,ixfe:s,t:r}}function NF(t,s){var r={opts:{}},a={},n=s.dense?[]:{},i={},l={},o=null,c=[],d="",u={},p,f="",g,x,h,m,j={},v=[],N,S,A=[],T=[],k={Sheets:[],WBProps:{date1904:!1},Views:[{}]},_={},y=function(Me){return Me<8?Xn[Me]:Me<64&&T[Me-8]||Xn[Me]},w=function(Me,Je,jt){var at=Je.XF.data;if(!(!at||!at.patternType||!jt||!jt.cellStyles)){Je.s={},Je.s.patternType=at.patternType;var Yt;(Yt=Ao(y(at.icvFore)))&&(Je.s.fgColor={rgb:Yt}),(Yt=Ao(y(at.icvBack)))&&(Je.s.bgColor={rgb:Yt})}},R=function(Me,Je,jt){if(!(te>1)&&!(jt.sheetRows&&Me.r>=jt.sheetRows)){if(jt.cellStyles&&Je.XF&&Je.XF.data&&w(Me,Je,jt),delete Je.ixfe,delete Je.XF,p=Me,f=Qe(Me),(!l||!l.s||!l.e)&&(l={s:{r:0,c:0},e:{r:0,c:0}}),Me.r<l.s.r&&(l.s.r=Me.r),Me.c<l.s.c&&(l.s.c=Me.c),Me.r+1>l.e.r&&(l.e.r=Me.r+1),Me.c+1>l.e.c&&(l.e.c=Me.c+1),jt.cellFormula&&Je.f){for(var at=0;at<v.length;++at)if(!(v[at][0].s.c>Me.c||v[at][0].s.r>Me.r)&&!(v[at][0].e.c<Me.c||v[at][0].e.r<Me.r)){Je.F=vt(v[at][0]),(v[at][0].s.c!=Me.c||v[at][0].s.r!=Me.r)&&delete Je.f,Je.f&&(Je.f=""+Os(v[at][1],l,Me,F,P));break}}jt.dense?(n[Me.r]||(n[Me.r]=[]),n[Me.r][Me.c]=Je):n[f]=Je}},P={enc:!1,sbcch:0,snames:[],sharedf:j,arrayf:v,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!s&&!!s.cellStyles,WTF:!!s&&!!s.wtf};s.password&&(P.password=s.password);var H,L=[],O=[],W=[],Q=[],D=!1,F=[];F.SheetNames=P.snames,F.sharedf=P.sharedf,F.arrayf=P.arrayf,F.names=[],F.XTI=[];var V=0,te=0,I=0,U=[],z=[],Y;P.codepage=1200,Zr(1200);for(var K=!1;t.l<t.length-1;){var ne=t.l,q=t.read_shift(2);if(q===0&&V===10)break;var re=t.l===t.length?0:t.read_shift(2),xe=ix[q];if(xe&&xe.f){if(s.bookSheets&&V===133&&q!==133)break;if(V=q,xe.r===2||xe.r==12){var _e=t.read_shift(2);if(re-=2,!P.enc&&_e!==q&&((_e&255)<<8|_e>>8)!==q)throw new Error("rt mismatch: "+_e+"!="+q);xe.r==12&&(t.l+=10,re-=10)}var X={};if(q===10?X=xe.f(t,re,P):X=wF(q,xe,t,re,P),te==0&&[9,521,1033,2057].indexOf(V)===-1)continue;switch(q){case 34:r.opts.Date1904=k.WBProps.date1904=X;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(P.enc||(t.l=0),P.enc=X,!s.password)throw new Error("File is password-protected");if(X.valid==null)throw new Error("Encryption scheme unsupported");if(!X.valid)throw new Error("Password is incorrect");break;case 92:P.lastuser=X;break;case 66:var Ae=Number(X);switch(Ae){case 21010:Ae=1200;break;case 32768:Ae=1e4;break;case 32769:Ae=1252;break}Zr(P.codepage=Ae),K=!0;break;case 317:P.rrtabid=X;break;case 25:P.winlocked=X;break;case 439:r.opts.RefreshAll=X;break;case 12:r.opts.CalcCount=X;break;case 16:r.opts.CalcDelta=X;break;case 17:r.opts.CalcIter=X;break;case 13:r.opts.CalcMode=X;break;case 14:r.opts.CalcPrecision=X;break;case 95:r.opts.CalcSaveRecalc=X;break;case 15:P.CalcRefMode=X;break;case 2211:r.opts.FullCalc=X;break;case 129:X.fDialog&&(n["!type"]="dialog"),X.fBelow||((n["!outline"]||(n["!outline"]={})).above=!0),X.fRight||((n["!outline"]||(n["!outline"]={})).left=!0);break;case 224:A.push(X);break;case 430:F.push([X]),F[F.length-1].XTI=[];break;case 35:case 547:F[F.length-1].push(X);break;case 24:case 536:Y={Name:X.Name,Ref:Os(X.rgce,l,null,F,P)},X.itab>0&&(Y.Sheet=X.itab-1),F.names.push(Y),F[0]||(F[0]=[],F[0].XTI=[]),F[F.length-1].push(X),X.Name=="_xlnm._FilterDatabase"&&X.itab>0&&X.rgce&&X.rgce[0]&&X.rgce[0][0]&&X.rgce[0][0][0]=="PtgArea3d"&&(z[X.itab-1]={ref:vt(X.rgce[0][0][1][2])});break;case 22:P.ExternCount=X;break;case 23:F.length==0&&(F[0]=[],F[0].XTI=[]),F[F.length-1].XTI=F[F.length-1].XTI.concat(X),F.XTI=F.XTI.concat(X);break;case 2196:if(P.biff<8)break;Y!=null&&(Y.Comment=X[1]);break;case 18:n["!protect"]=X;break;case 19:X!==0&&P.WTF&&console.error("Password verifier: "+X);break;case 133:i[X.pos]=X,P.snames.push(X.name);break;case 10:{if(--te)break;if(l.e){if(l.e.r>0&&l.e.c>0){if(l.e.r--,l.e.c--,n["!ref"]=vt(l),s.sheetRows&&s.sheetRows<=l.e.r){var Ie=l.e.r;l.e.r=s.sheetRows-1,n["!fullref"]=n["!ref"],n["!ref"]=vt(l),l.e.r=Ie}l.e.r++,l.e.c++}L.length>0&&(n["!merges"]=L),O.length>0&&(n["!objects"]=O),W.length>0&&(n["!cols"]=W),Q.length>0&&(n["!rows"]=Q),k.Sheets.push(_)}d===""?u=n:a[d]=n,n=s.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(P.biff===8&&(P.biff={9:2,521:3,1033:4}[q]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[X.BIFFVer]||8),P.biffguess=X.BIFFVer==0,X.BIFFVer==0&&X.dt==4096&&(P.biff=5,K=!0,Zr(P.codepage=28591)),P.biff==8&&X.BIFFVer==0&&X.dt==16&&(P.biff=2),te++)break;if(n=s.dense?[]:{},P.biff<8&&!K&&(K=!0,Zr(P.codepage=s.codepage||1252)),P.biff<5||X.BIFFVer==0&&X.dt==4096){d===""&&(d="Sheet1"),l={s:{r:0,c:0},e:{r:0,c:0}};var He={pos:t.l-re,name:d};i[He.pos]=He,P.snames.push(d)}else d=(i[ne]||{name:""}).name;X.dt==32&&(n["!type"]="chart"),X.dt==64&&(n["!type"]="macro"),L=[],O=[],P.arrayf=v=[],W=[],Q=[],D=!1,_={Hidden:(i[ne]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:n["!type"]=="chart"&&(s.dense?(n[X.r]||[])[X.c]:n[Qe({c:X.c,r:X.r})])&&++X.c,N={ixfe:X.ixfe,XF:A[X.ixfe]||{},v:X.val,t:"n"},I>0&&(N.z=U[N.ixfe>>8&63]),oa(N,s,r.opts.Date1904),R({c:X.c,r:X.r},N,s);break;case 5:case 517:N={ixfe:X.ixfe,XF:A[X.ixfe],v:X.val,t:X.t},I>0&&(N.z=U[N.ixfe>>8&63]),oa(N,s,r.opts.Date1904),R({c:X.c,r:X.r},N,s);break;case 638:N={ixfe:X.ixfe,XF:A[X.ixfe],v:X.rknum,t:"n"},I>0&&(N.z=U[N.ixfe>>8&63]),oa(N,s,r.opts.Date1904),R({c:X.c,r:X.r},N,s);break;case 189:for(var Le=X.c;Le<=X.C;++Le){var ve=X.rkrec[Le-X.c][0];N={ixfe:ve,XF:A[ve],v:X.rkrec[Le-X.c][1],t:"n"},I>0&&(N.z=U[N.ixfe>>8&63]),oa(N,s,r.opts.Date1904),R({c:Le,r:X.r},N,s)}break;case 6:case 518:case 1030:{if(X.val=="String"){o=X;break}if(N=jc(X.val,X.cell.ixfe,X.tt),N.XF=A[N.ixfe],s.cellFormula){var st=X.formula;if(st&&st[0]&&st[0][0]&&st[0][0][0]=="PtgExp"){var St=st[0][0][1][0],fe=st[0][0][1][1],ae=Qe({r:St,c:fe});j[ae]?N.f=""+Os(X.formula,l,X.cell,F,P):N.F=((s.dense?(n[St]||[])[fe]:n[ae])||{}).F}else N.f=""+Os(X.formula,l,X.cell,F,P)}I>0&&(N.z=U[N.ixfe>>8&63]),oa(N,s,r.opts.Date1904),R(X.cell,N,s),o=X}break;case 7:case 519:if(o)o.val=X,N=jc(X,o.cell.ixfe,"s"),N.XF=A[N.ixfe],s.cellFormula&&(N.f=""+Os(o.formula,l,o.cell,F,P)),I>0&&(N.z=U[N.ixfe>>8&63]),oa(N,s,r.opts.Date1904),R(o.cell,N,s),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{v.push(X);var Be=Qe(X[0].s);if(g=s.dense?(n[X[0].s.r]||[])[X[0].s.c]:n[Be],s.cellFormula&&g){if(!o||!Be||!g)break;g.f=""+Os(X[1],l,X[0],F,P),g.F=vt(X[0])}}break;case 1212:{if(!s.cellFormula)break;if(f){if(!o)break;j[Qe(o.cell)]=X[0],g=s.dense?(n[o.cell.r]||[])[o.cell.c]:n[Qe(o.cell)],(g||{}).f=""+Os(X[0],l,p,F,P)}}break;case 253:N=jc(c[X.isst].t,X.ixfe,"s"),c[X.isst].h&&(N.h=c[X.isst].h),N.XF=A[N.ixfe],I>0&&(N.z=U[N.ixfe>>8&63]),oa(N,s,r.opts.Date1904),R({c:X.c,r:X.r},N,s);break;case 513:s.sheetStubs&&(N={ixfe:X.ixfe,XF:A[X.ixfe],t:"z"},I>0&&(N.z=U[N.ixfe>>8&63]),oa(N,s,r.opts.Date1904),R({c:X.c,r:X.r},N,s));break;case 190:if(s.sheetStubs)for(var Ct=X.c;Ct<=X.C;++Ct){var ct=X.ixfe[Ct-X.c];N={ixfe:ct,XF:A[ct],t:"z"},I>0&&(N.z=U[N.ixfe>>8&63]),oa(N,s,r.opts.Date1904),R({c:Ct,r:X.r},N,s)}break;case 214:case 516:case 4:N=jc(X.val,X.ixfe,"s"),N.XF=A[N.ixfe],I>0&&(N.z=U[N.ixfe>>8&63]),oa(N,s,r.opts.Date1904),R({c:X.c,r:X.r},N,s);break;case 0:case 512:te===1&&(l=X);break;case 252:c=X;break;case 1054:if(P.biff==4){U[I++]=X[1];for(var Tt=0;Tt<I+163&&tt[Tt]!=X[1];++Tt);Tt>=163&&Yn(X[1],I+163)}else Yn(X[1],X[0]);break;case 30:{U[I++]=X;for(var _t=0;_t<I+163&&tt[_t]!=X;++_t);_t>=163&&Yn(X,I+163)}break;case 229:L=L.concat(X);break;case 93:O[X.cmo[0]]=P.lastobj=X;break;case 438:P.lastobj.TxO=X;break;case 127:P.lastobj.ImData=X;break;case 440:for(m=X[0].s.r;m<=X[0].e.r;++m)for(h=X[0].s.c;h<=X[0].e.c;++h)g=s.dense?(n[m]||[])[h]:n[Qe({c:h,r:m})],g&&(g.l=X[1]);break;case 2048:for(m=X[0].s.r;m<=X[0].e.r;++m)for(h=X[0].s.c;h<=X[0].e.c;++h)g=s.dense?(n[m]||[])[h]:n[Qe({c:h,r:m})],g&&g.l&&(g.l.Tooltip=X[1]);break;case 28:{if(P.biff<=5&&P.biff>=2)break;g=s.dense?(n[X[0].r]||[])[X[0].c]:n[Qe(X[0])];var dt=O[X[2]];g||(s.dense?(n[X[0].r]||(n[X[0].r]=[]),g=n[X[0].r][X[0].c]={t:"z"}):g=n[Qe(X[0])]={t:"z"},l.e.r=Math.max(l.e.r,X[0].r),l.s.r=Math.min(l.s.r,X[0].r),l.e.c=Math.max(l.e.c,X[0].c),l.s.c=Math.min(l.s.c,X[0].c)),g.c||(g.c=[]),x={a:X[1],t:dt.TxO.t},g.c.push(x)}break;case 2173:H5(A[X.ixfe],X.ext);break;case 125:{if(!P.cellStyles)break;for(;X.e>=X.s;)W[X.e--]={width:X.w/256,level:X.level||0,hidden:!!(X.flags&1)},D||(D=!0,Im(X.w/256)),tl(W[X.e+1])}break;case 520:{var ut={};X.level!=null&&(Q[X.r]=ut,ut.level=X.level),X.hidden&&(Q[X.r]=ut,ut.hidden=!0),X.hpt&&(Q[X.r]=ut,ut.hpt=X.hpt,ut.hpx=Fo(X.hpt))}break;case 38:case 39:case 40:case 41:n["!margins"]||Ql(n["!margins"]={}),n["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[q]]=X;break;case 161:n["!margins"]||Ql(n["!margins"]={}),n["!margins"].header=X.header,n["!margins"].footer=X.footer;break;case 574:X.RTL&&(k.Views[0].RTL=!0);break;case 146:T=X;break;case 2198:H=X;break;case 140:S=X;break;case 442:d?_.CodeName=X||_.name:k.WBProps.CodeName=X||"ThisWorkbook";break}}else xe||console.error("Missing Info for XLS Record 0x"+q.toString(16)),t.l+=re}return r.SheetNames=ba(i).sort(function(pe,Me){return Number(pe)-Number(Me)}).map(function(pe){return i[pe].name}),s.bookSheets||(r.Sheets=a),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&z.forEach(function(pe,Me){r.Sheets[r.SheetNames[Me]]["!autofilter"]=pe}),r.Strings=c,r.SSF=Es(tt),P.enc&&(r.Encryption=P.enc),H&&(r.Themes=H),r.Metadata={},S!==void 0&&(r.Metadata.Country=S),F.names.length>0&&(k.Names=F.names),r.Workbook=k,r}var Fp={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function kF(t,s,r){var a=bt.find(t,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var n=hp(a,UC,Fp.DSI);for(var i in n)s[i]=n[i]}catch(d){if(r.WTF)throw d}var l=bt.find(t,"/!SummaryInformation");if(l&&l.size>0)try{var o=hp(l,zC,Fp.SI);for(var c in o)s[c]==null&&(s[c]=o[c])}catch(d){if(r.WTF)throw d}s.HeadingPairs&&s.TitlesOfParts&&(Mv(s.HeadingPairs,s.TitlesOfParts,s,r),delete s.HeadingPairs,delete s.TitlesOfParts)}function jj(t,s){s||(s={}),zm(s),Yb(),s.codepage&&vm(s.codepage);var r,a;if(t.FullPaths){if(bt.find(t,"/encryption"))throw new Error("File is password-protected");r=bt.find(t,"!CompObj"),a=bt.find(t,"/Workbook")||bt.find(t,"/Book")}else{switch(s.type){case"base64":t=Qr(Nr(t));break;case"binary":t=Qr(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}_s(t,0),a={content:t}}var n,i;if(r&&vF(r),s.bookProps&&!s.bookSheets)n={};else{var l=gt?"buffer":"array";if(a&&a.content)n=NF(a.content,s);else if((i=bt.find(t,"PerfectOffice_MAIN"))&&i.content)n=Yl.to_workbook(i.content,(s.type=l,s));else if((i=bt.find(t,"NativeContent_MAIN"))&&i.content)n=Yl.to_workbook(i.content,(s.type=l,s));else throw(i=bt.find(t,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");s.bookVBA&&t.FullPaths&&bt.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(n.vbaraw=cT(t))}var o={};return t.FullPaths&&kF(t,o,s),n.Props=n.Custprops=o,s.bookFiles&&(n.cfb=t),n}var kd={0:{f:nA},1:{f:cA},2:{f:yA},3:{f:mA},4:{f:uA},5:{f:gA},6:{f:jA},7:{f:fA},8:{f:CA},9:{f:SA},10:{f:NA},11:{f:kA},12:{f:dA},13:{f:bA},14:{f:hA},15:{f:xA},16:{f:pj},17:{f:wA},18:{f:pA},19:{f:Fm},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:ZA},40:{},42:{},43:{f:N5},44:{f:w5},45:{f:k5},46:{f:C5},47:{f:S5},48:{},49:{f:_C},50:{},51:{f:q5},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Yv},62:{f:vA},63:{f:Q5},64:{f:LA},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ws,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:RA},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:oA},148:{f:iA,p:16},151:{f:EA},152:{},153:{f:XA},154:{},155:{},156:{f:YA},157:{},158:{},159:{T:1,f:z_},160:{T:-1},161:{T:1,f:fi},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:_A},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:G5},336:{T:-1},337:{f:J5,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:tx},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Kv},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:AA},427:{f:FA},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:DA},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:lA},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:TA},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:tx},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:iT},633:{T:1},634:{T:-1},635:{T:1,f:nT},636:{T:-1},637:{f:EC},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:UA},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:OA},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},ix={6:{f:O0},10:{f:Ya},12:{f:is},13:{f:is},14:{f:Xt},15:{f:Xt},16:{f:Bs},17:{f:Xt},18:{f:Xt},19:{f:is},20:{f:yp},21:{f:yp},23:{f:Kv},24:{f:vp},25:{f:Xt},26:{},27:{},28:{f:r_},29:{},34:{f:Xt},35:{f:bp},38:{f:Bs},39:{f:Bs},40:{f:Bs},41:{f:Bs},42:{f:Xt},43:{f:Xt},47:{f:l5},49:{f:M6},51:{f:is},60:{},61:{f:L6},64:{f:Xt},65:{f:I6},66:{f:is},77:{},80:{},81:{},82:{},85:{f:is},89:{},90:{},91:{},92:{f:_6},93:{f:n_},94:{},95:{f:Xt},96:{},97:{},99:{f:Xt},125:{f:Yv},128:{f:J6},129:{f:T6},130:{f:is},131:{f:Xt},132:{f:Xt},133:{f:E6},134:{},140:{f:u_},141:{f:is},144:{},146:{f:m_},151:{},152:{},153:{},154:{},155:{},156:{f:is},157:{},158:{},160:{f:y_},161:{f:f_},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:V6},190:{f:H6},193:{f:Ya},197:{},198:{},199:{},200:{},201:{},202:{f:Xt},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:is},220:{},221:{f:Xt},222:{},224:{f:q6},225:{f:C6},226:{f:Ya},227:{},229:{f:a_},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:A6},253:{f:B6},255:{f:F6},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Wv},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Xt},353:{f:Ya},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Y6},431:{f:Xt},432:{},433:{},434:{},437:{},438:{f:o_},439:{f:Xt},440:{f:c_},441:{},442:{f:zo},443:{},444:{f:is},445:{},446:{},448:{f:Ya},449:{f:R6,r:2},450:{f:Ya},512:{f:pp},513:{f:g_},515:{f:K6},516:{f:$6},517:{f:gp},519:{f:b_},520:{f:P6},523:{},545:{f:jp},549:{f:fp},566:{},574:{f:O6},638:{f:W6},659:{},1048:{},1054:{f:U6},1084:{},1212:{f:e_},2048:{f:d_},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:yc},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Ya},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:h_,r:12},2173:{f:V5,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Xt,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Z6,r:12},2197:{},2198:{f:M5,r:12},2199:{},2200:{},2201:{},2202:{f:t_,r:12},2203:{f:Ya},2204:{},2205:{},2206:{},2207:{},2211:{f:D6},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:is},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:p_},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:x_},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:pp},1:{},2:{f:N_},3:{f:w_},4:{f:j_},5:{f:gp},7:{f:k_},8:{},9:{f:yc},11:{},22:{f:is},30:{f:z6},31:{},32:{},33:{f:jp},36:{},37:{f:fp},50:{f:S_},62:{},52:{},67:{},68:{f:is},69:{},86:{},126:{},127:{f:v_},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:C_},223:{},234:{},354:{},421:{},518:{f:O0},521:{f:yc},536:{f:vp},547:{f:bp},561:{},579:{},1030:{f:O0},1033:{f:yc},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Hr(t,s,r,a){var n=s;if(!isNaN(n)){var i=(r||[]).length||0,l=t.next(4);l.write_shift(2,n),l.write_shift(2,i),i>0&&Av(r)&&t.push(r)}}function Pp(t,s){var r=s||{},a=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var n=t.match(/<table/i);if(!n)throw new Error("Invalid HTML: could not find <table>");var i=t.match(/<\/table/i),l=n.index,o=i&&i.index||t.length,c=KS(t.slice(l,o),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,u=0,p=0,f=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},x=[];for(l=0;l<c.length;++l){var h=c[l].trim(),m=h.slice(0,3).toLowerCase();if(m=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}u=0;continue}if(!(m!="<td"&&m!="<th")){var j=h.split(/<\/t[dh]>/i);for(o=0;o<j.length;++o){var v=j[o].trim();if(v.match(/<t[dh]/i)){for(var N=v,S=0;N.charAt(0)=="<"&&(S=N.indexOf(">"))>-1;)N=N.slice(S+1);for(var A=0;A<x.length;++A){var T=x[A];T.s.c==u&&T.s.r<d&&d<=T.e.r&&(u=T.e.c+1,A=-1)}var k=qe(v.slice(0,v.indexOf(">")));f=k.colspan?+k.colspan:1,((p=+k.rowspan)>1||f>1)&&x.push({s:{r:d,c:u},e:{r:d+(p||1)-1,c:u+f-1}});var _=k.t||k["data-t"]||"";if(!N.length){u+=f;continue}if(N=gv(N),g.s.r>d&&(g.s.r=d),g.e.r<d&&(g.e.r=d),g.s.c>u&&(g.s.c=u),g.e.c<u&&(g.e.c=u),!N.length){u+=f;continue}var y={t:"s",v:N};r.raw||!N.trim().length||_=="s"||(N==="TRUE"?y={t:"b",v:!0}:N==="FALSE"?y={t:"b",v:!1}:isNaN(aa(N))?isNaN(el(N).getDate())||(y={t:"d",v:ks(N)},r.cellDates||(y={t:"n",v:Zs(y.v)}),y.z=r.dateNF||tt[14]):y={t:"n",v:aa(N)}),r.dense?(a[d]||(a[d]=[]),a[d][u]=y):a[Qe({r:d,c:u})]=y,u+=f}}}}return a["!ref"]=vt(g),x.length&&(a["!merges"]=x),a}function SF(t,s,r,a){for(var n=t["!merges"]||[],i=[],l=s.s.c;l<=s.e.c;++l){for(var o=0,c=0,d=0;d<n.length;++d)if(!(n[d].s.r>r||n[d].s.c>l)&&!(n[d].e.r<r||n[d].e.c<l)){if(n[d].s.r<r||n[d].s.c<l){o=-1;break}o=n[d].e.r-n[d].s.r+1,c=n[d].e.c-n[d].s.c+1;break}if(!(o<0)){var u=Qe({r,c:l}),p=a.dense?(t[r]||[])[l]:t[u],f=p&&p.v!=null&&(p.h||Cm(p.w||(Wa(p),p.w)||""))||"",g={};o>1&&(g.rowspan=o),c>1&&(g.colspan=c),a.editable?f='<span contenteditable="true">'+f+"</span>":p&&(g["data-t"]=p&&p.t||"z",p.v!=null&&(g["data-v"]=p.v),p.z!=null&&(g["data-z"]=p.z),p.l&&(p.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+p.l.Target+'">'+f+"</a>")),g.id=(a.id||"sjs")+"-"+u,i.push(uC("td",f,g))}}var x="<tr>";return x+i.join("")+"</tr>"}var CF='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',_F="</body></html>";function TF(t,s){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Dn(Pp(r[0],s),s);var a=Vm();return r.forEach(function(n,i){Hm(a,Pp(n,s),"Sheet"+(i+1))}),a}function EF(t,s,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function AF(t,s){var r=s||{},a=r.header!=null?r.header:CF,n=r.footer!=null?r.footer:_F,i=[a],l=dl(t["!ref"]);r.dense=Array.isArray(t),i.push(EF(t,l,r));for(var o=l.s.r;o<=l.e.r;++o)i.push(SF(t,l,o,r));return i.push("</table>"+n),i.join("")}function wj(t,s,r){var a=r||{},n=0,i=0;if(a.origin!=null)if(typeof a.origin=="number")n=a.origin;else{var l=typeof a.origin=="string"?Ks(a.origin):a.origin;n=l.r,i=l.c}var o=s.getElementsByTagName("tr"),c=Math.min(a.sheetRows||1e7,o.length),d={s:{r:0,c:0},e:{r:n,c:i}};if(t["!ref"]){var u=dl(t["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),n==-1&&(d.e.r=n=u.e.r+1)}var p=[],f=0,g=t["!rows"]||(t["!rows"]=[]),x=0,h=0,m=0,j=0,v=0,N=0;for(t["!cols"]||(t["!cols"]=[]);x<o.length&&h<c;++x){var S=o[x];if(Dp(S)){if(a.display)continue;g[h]={hidden:!0}}var A=S.children;for(m=j=0;m<A.length;++m){var T=A[m];if(!(a.display&&Dp(T))){var k=T.hasAttribute("data-v")?T.getAttribute("data-v"):T.hasAttribute("v")?T.getAttribute("v"):gv(T.innerHTML),_=T.getAttribute("data-z")||T.getAttribute("z");for(f=0;f<p.length;++f){var y=p[f];y.s.c==j+i&&y.s.r<h+n&&h+n<=y.e.r&&(j=y.e.c+1-i,f=-1)}N=+T.getAttribute("colspan")||1,((v=+T.getAttribute("rowspan")||1)>1||N>1)&&p.push({s:{r:h+n,c:j+i},e:{r:h+n+(v||1)-1,c:j+i+(N||1)-1}});var w={t:"s",v:k},R=T.getAttribute("data-t")||T.getAttribute("t")||"";k!=null&&(k.length==0?w.t=R||"z":a.raw||k.trim().length==0||R=="s"||(k==="TRUE"?w={t:"b",v:!0}:k==="FALSE"?w={t:"b",v:!1}:isNaN(aa(k))?isNaN(el(k).getDate())||(w={t:"d",v:ks(k)},a.cellDates||(w={t:"n",v:Zs(w.v)}),w.z=a.dateNF||tt[14]):w={t:"n",v:aa(k)})),w.z===void 0&&_!=null&&(w.z=_);var P="",H=T.getElementsByTagName("A");if(H&&H.length)for(var L=0;L<H.length&&!(H[L].hasAttribute("href")&&(P=H[L].getAttribute("href"),P.charAt(0)!="#"));++L);P&&P.charAt(0)!="#"&&(w.l={Target:P}),a.dense?(t[h+n]||(t[h+n]=[]),t[h+n][j+i]=w):t[Qe({c:j+i,r:h+n})]=w,d.e.c<j+i&&(d.e.c=j+i),j+=N}}++h}return p.length&&(t["!merges"]=(t["!merges"]||[]).concat(p)),d.e.r=Math.max(d.e.r,h-1+n),t["!ref"]=vt(d),h>=c&&(t["!fullref"]=vt((d.e.r=o.length-x+h-1+n,d))),t}function Nj(t,s){var r=s||{},a=r.dense?[]:{};return wj(a,t,s)}function FF(t,s){return Dn(Nj(t,s),s)}function Dp(t){var s="",r=PF(t);return r&&(s=r(t).getPropertyValue("display")),s||(s=t.style&&t.style.display),s==="none"}function PF(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function DF(t){var s=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,n){return Array(parseInt(n,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=kt(s.replace(/<[^>]*>/g,""));return[r]}var Rp={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function kj(t,s){var r=s||{},a=_m(t),n=[],i,l,o={name:""},c="",d=0,u,p,f={},g=[],x=r.dense?[]:{},h,m,j={value:""},v="",N=0,S=[],A=-1,T=-1,k={s:{r:1e6,c:1e7},e:{r:0,c:0}},_=0,y={},w=[],R={},P=0,H=0,L=[],O=1,W=1,Q=[],D={Names:[]},F={},V=["",""],te=[],I={},U="",z=0,Y=!1,K=!1,ne=0;for(To.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");h=To.exec(a);)switch(h[3]=h[3].replace(/_.*$/,"")){case"table":case"":h[1]==="/"?(k.e.c>=k.s.c&&k.e.r>=k.s.r?x["!ref"]=vt(k):x["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=k.e.r&&(x["!fullref"]=x["!ref"],k.e.r=r.sheetRows-1,x["!ref"]=vt(k)),w.length&&(x["!merges"]=w),L.length&&(x["!rows"]=L),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),g.push(u.name),f[u.name]=x,K=!1):h[0].charAt(h[0].length-2)!=="/"&&(u=qe(h[0],!1),A=T=-1,k.s.r=k.s.c=1e7,k.e.r=k.e.c=0,x=r.dense?[]:{},w=[],L=[],K=!0);break;case"table-row-group":h[1]==="/"?--_:++_;break;case"table-row":case"":if(h[1]==="/"){A+=O,O=1;break}if(p=qe(h[0],!1),p.?A=p.-1:A==-1&&(A=0),O=+p["number-rows-repeated"]||1,O<10)for(ne=0;ne<O;++ne)_>0&&(L[A+ne]={level:_});T=-1;break;case"covered-table-cell":h[1]!=="/"&&++T,r.sheetStubs&&(r.dense?(x[A]||(x[A]=[]),x[A][T]={t:"z"}):x[Qe({r:A,c:T})]={t:"z"}),v="",S=[];break;case"table-cell":case"":if(h[0].charAt(h[0].length-2)==="/")++T,j=qe(h[0],!1),W=parseInt(j["number-columns-repeated"]||"1",10),m={t:"z",v:null},j.formula&&r.cellFormula!=!1&&(m.f=Tp(kt(j.formula))),(j.||j["value-type"])=="string"&&(m.t="s",m.v=kt(j["string-value"]||""),r.dense?(x[A]||(x[A]=[]),x[A][T]=m):x[Qe({r:A,c:T})]=m),T+=W-1;else if(h[1]!=="/"){++T,v="",N=0,S=[],W=1;var q=O?A+O-1:A;if(T>k.e.c&&(k.e.c=T),T<k.s.c&&(k.s.c=T),A<k.s.r&&(k.s.r=A),q>k.e.r&&(k.e.r=q),j=qe(h[0],!1),te=[],I={},m={t:j.||j["value-type"],v:null},r.cellFormula)if(j.formula&&(j.formula=kt(j.formula)),j["number-matrix-columns-spanned"]&&j["number-matrix-rows-spanned"]&&(P=parseInt(j["number-matrix-rows-spanned"],10)||0,H=parseInt(j["number-matrix-columns-spanned"],10)||0,R={s:{r:A,c:T},e:{r:A+P-1,c:T+H-1}},m.F=vt(R),Q.push([R,m.F])),j.formula)m.f=Tp(j.formula);else for(ne=0;ne<Q.length;++ne)A>=Q[ne][0].s.r&&A<=Q[ne][0].e.r&&T>=Q[ne][0].s.c&&T<=Q[ne][0].e.c&&(m.F=Q[ne][1]);switch((j["number-columns-spanned"]||j["number-rows-spanned"])&&(P=parseInt(j["number-rows-spanned"],10)||0,H=parseInt(j["number-columns-spanned"],10)||0,R={s:{r:A,c:T},e:{r:A+P-1,c:T+H-1}},w.push(R)),j["number-columns-repeated"]&&(W=parseInt(j["number-columns-repeated"],10)),m.t){case"boolean":m.t="b",m.v=$t(j["boolean-value"]);break;case"float":m.t="n",m.v=parseFloat(j.value);break;case"percentage":m.t="n",m.v=parseFloat(j.value);break;case"currency":m.t="n",m.v=parseFloat(j.value);break;case"date":m.t="d",m.v=ks(j["date-value"]),r.cellDates||(m.t="n",m.v=Zs(m.v)),m.z="m/d/yy";break;case"time":m.t="n",m.v=GS(j["time-value"])/86400,r.cellDates&&(m.t="d",m.v=qd(m.v)),m.z="HH:MM:SS";break;case"number":m.t="n",m.v=parseFloat(j.);break;default:if(m.t==="string"||m.t==="text"||!m.t)m.t="s",j["string-value"]!=null&&(v=kt(j["string-value"]),S=[]);else throw new Error("Unsupported value type "+m.t)}}else{if(Y=!1,m.t==="s"&&(m.v=v||"",S.length&&(m.R=S),Y=N==0),F.Target&&(m.l=F),te.length>0&&(m.c=te,te=[]),v&&r.cellText!==!1&&(m.w=v),Y&&(m.t="z",delete m.v),(!Y||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=A))for(var re=0;re<O;++re){if(W=parseInt(j["number-columns-repeated"]||"1",10),r.dense)for(x[A+re]||(x[A+re]=[]),x[A+re][T]=re==0?m:Es(m);--W>0;)x[A+re][T+W]=Es(m);else for(x[Qe({r:A+re,c:T})]=m;--W>0;)x[Qe({r:A+re,c:T+W})]=Es(m);k.e.c<=T&&(k.e.c=T)}W=parseInt(j["number-columns-repeated"]||"1",10),T+=W-1,W=0,m={},v="",S=[]}F={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(h[1]==="/"){if((i=n.pop())[0]!==h[3])throw"Bad state: "+i}else h[0].charAt(h[0].length-2)!=="/"&&n.push([h[3],!0]);break;case"annotation":if(h[1]==="/"){if((i=n.pop())[0]!==h[3])throw"Bad state: "+i;I.t=v,S.length&&(I.R=S),I.a=U,te.push(I)}else h[0].charAt(h[0].length-2)!=="/"&&n.push([h[3],!1]);U="",z=0,v="",N=0,S=[];break;case"creator":h[1]==="/"?U=a.slice(z,h.index):z=h.index+h[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(h[1]==="/"){if((i=n.pop())[0]!==h[3])throw"Bad state: "+i}else h[0].charAt(h[0].length-2)!=="/"&&n.push([h[3],!1]);v="",N=0,S=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(h[1]==="/"){if(y[o.name]=c,(i=n.pop())[0]!==h[3])throw"Bad state: "+i}else h[0].charAt(h[0].length-2)!=="/"&&(c="",o=qe(h[0],!1),n.push([h[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(n[n.length-1][0]){case"time-style":case"date-style":l=qe(h[0],!1),c+=Rp[h[3]][l.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(n[n.length-1][0]){case"time-style":case"date-style":l=qe(h[0],!1),c+=Rp[h[3]][l.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(h[0].slice(-2)==="/>")break;if(h[1]==="/")switch(n[n.length-1][0]){case"number-style":case"date-style":case"time-style":c+=a.slice(d,h.index);break}else d=h.index+h[0].length;break;case"named-range":l=qe(h[0],!1),V=I0(l["cell-range-address"]);var xe={Name:l.name,Ref:V[0]+"!"+V[1]};K&&(xe.Sheet=g.length),D.Names.push(xe);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(n[n.length-1][0])>-1)break;if(h[1]==="/"&&(!j||!j["string-value"])){var _e=DF(a.slice(N,h.index));v=(v.length>0?v+`
`:"")+_e[0]}else qe(h[0],!1),N=h.index+h[0].length;break;case"s":break;case"database-range":if(h[1]==="/")break;try{V=I0(qe(h[0])["target-range-address"]),f[V[0]]["!autofilter"]={ref:V[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(h[1]!=="/"){if(F=qe(h[0],!1),!F.href)break;F.Target=kt(F.href),delete F.href,F.Target.charAt(0)=="#"&&F.Target.indexOf(".")>-1?(V=I0(F.Target.slice(1)),F.Target="#"+V[0]+"!"+V[1]):F.Target.match(/^\.\.[\\\/]/)&&(F.Target=F.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(h[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(h)}}var X={Sheets:f,SheetNames:g,Workbook:D};return r.bookSheets&&delete X.Sheets,X}function Lp(t,s){s=s||{},Er(t,"META-INF/manifest.xml")&&KC(ns(t,"META-INF/manifest.xml"),s);var r=yr(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var a=kj(Rt(r),s);return Er(t,"meta.xml")&&(a.Props=Iv(ns(t,"meta.xml"))),a}function Op(t,s){return kj(t,s)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function $m(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function lx(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Rt(mi(t))}function ox(t){var s=t.reduce(function(n,i){return n+i.length},0),r=new Uint8Array(s),a=0;return t.forEach(function(n){r.set(n,a),a+=n.length}),r}function Ip(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function RF(t,s){for(var r=(t[s+15]&127)<<7|t[s+14]>>1,a=t[s+14]&1,n=s+13;n>=s;--n)a=a*256+t[n];return(t[s+15]&128?-a:a)*Math.pow(10,r-6176)}function Po(t,s){var r=s?s[0]:0,a=t[r]&127;e:if(t[r++]>=128&&(a|=(t[r]&127)<<7,t[r++]<128||(a|=(t[r]&127)<<14,t[r++]<128)||(a|=(t[r]&127)<<21,t[r++]<128)||(a+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(a+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(a+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return s&&(s[0]=r),a}function ys(t){var s=0,r=t[s]&127;e:if(t[s++]>=128){if(r|=(t[s]&127)<<7,t[s++]<128||(r|=(t[s]&127)<<14,t[s++]<128)||(r|=(t[s]&127)<<21,t[s++]<128))break e;r|=(t[s]&127)<<28}return r}function $s(t){for(var s=[],r=[0];r[0]<t.length;){var a=r[0],n=Po(t,r),i=n&7;n=Math.floor(n/8);var l=0,o;if(n==0)break;switch(i){case 0:{for(var c=r[0];t[r[0]++]>=128;);o=t.slice(c,r[0])}break;case 5:l=4,o=t.slice(r[0],r[0]+l),r[0]+=l;break;case 1:l=8,o=t.slice(r[0],r[0]+l),r[0]+=l;break;case 2:l=Po(t,r),o=t.slice(r[0],r[0]+l),r[0]+=l;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(n," at offset ").concat(a))}var d={data:o,type:i};s[n]==null?s[n]=[d]:s[n].push(d)}return s}function Um(t,s){return(t==null?void 0:t.map(function(r){return s(r.data)}))||[]}function LF(t){for(var s,r=[],a=[0];a[0]<t.length;){var n=Po(t,a),i=$s(t.slice(a[0],a[0]+n));a[0]+=n;var l={id:ys(i[1][0].data),messages:[]};i[2].forEach(function(o){var c=$s(o.data),d=ys(c[3][0].data);l.messages.push({meta:c,data:t.slice(a[0],a[0]+d)}),a[0]+=d}),(s=i[3])!=null&&s[0]&&(l.merge=ys(i[3][0].data)>>>0>0),r.push(l)}return r}function OF(t,s){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],a=Po(s,r),n=[];r[0]<s.length;){var i=s[r[0]]&3;if(i==0){var l=s[r[0]++]>>2;if(l<60)++l;else{var o=l-59;l=s[r[0]],o>1&&(l|=s[r[0]+1]<<8),o>2&&(l|=s[r[0]+2]<<16),o>3&&(l|=s[r[0]+3]<<24),l>>>=0,l++,r[0]+=o}n.push(s.slice(r[0],r[0]+l)),r[0]+=l;continue}else{var c=0,d=0;if(i==1?(d=(s[r[0]]>>2&7)+4,c=(s[r[0]++]&224)<<3,c|=s[r[0]++]):(d=(s[r[0]++]>>2)+1,i==2?(c=s[r[0]]|s[r[0]+1]<<8,r[0]+=2):(c=(s[r[0]]|s[r[0]+1]<<8|s[r[0]+2]<<16|s[r[0]+3]<<24)>>>0,r[0]+=4)),n=[ox(n)],c==0)throw new Error("Invalid offset 0");if(c>n[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(n.push(n[0].slice(-c)),d-=c;d>=n[n.length-1].length;)n.push(n[n.length-1]),d-=n[n.length-1].length;n.push(n[0].slice(-c,-c+d))}}var u=ox(n);if(u.length!=a)throw new Error("Unexpected length: ".concat(u.length," != ").concat(a));return u}function IF(t){for(var s=[],r=0;r<t.length;){var a=t[r++],n=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,s.push(OF(a,t.slice(r,r+n))),r+=n}if(r!==t.length)throw new Error("data is not a valid framed stream!");return ox(s)}function MF(t,s,r,a){var n=$m(t),i=n.getUint32(4,!0),l=(a>1?12:8)+Ip(i&(a>1?3470:398))*4,o=-1,c=-1,d=NaN,u=new Date(2001,0,1);i&512&&(o=n.getUint32(l,!0),l+=4),l+=Ip(i&(a>1?12288:4096))*4,i&16&&(c=n.getUint32(l,!0),l+=4),i&32&&(d=n.getFloat64(l,!0),l+=8),i&64&&(u.setTime(u.getTime()+n.getFloat64(l,!0)*1e3),l+=8);var p;switch(t[2]){case 0:break;case 2:p={t:"n",v:d};break;case 3:p={t:"s",v:s[c]};break;case 5:p={t:"d",v:u};break;case 6:p={t:"b",v:d>0};break;case 7:p={t:"n",v:d/86400};break;case 8:p={t:"e",v:0};break;case 9:if(o>-1)p={t:"s",v:r[o]};else if(c>-1)p={t:"s",v:s[c]};else if(!isNaN(d))p={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return p}function BF(t,s,r){var a=$m(t),n=a.getUint32(8,!0),i=12,l=-1,o=-1,c=NaN,d=NaN,u=new Date(2001,0,1);n&1&&(c=RF(t,i),i+=16),n&2&&(d=a.getFloat64(i,!0),i+=8),n&4&&(u.setTime(u.getTime()+a.getFloat64(i,!0)*1e3),i+=8),n&8&&(o=a.getUint32(i,!0),i+=4),n&16&&(l=a.getUint32(i,!0),i+=4);var p;switch(t[1]){case 0:break;case 2:p={t:"n",v:c};break;case 3:p={t:"s",v:s[o]};break;case 5:p={t:"d",v:u};break;case 6:p={t:"b",v:d>0};break;case 7:p={t:"n",v:d/86400};break;case 8:p={t:"e",v:0};break;case 9:if(l>-1)p={t:"s",v:r[l]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(n&31," : ").concat(t.slice(0,4)));break;case 10:p={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(n&31," : ").concat(t.slice(0,4)))}return p}function $F(t,s,r){switch(t[0]){case 0:case 1:case 2:case 3:return MF(t,s,r,t[0]);case 5:return BF(t,s,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function wn(t){var s=$s(t);return Po(s[1][0].data)}function Mp(t,s){var r=$s(s.data),a=ys(r[1][0].data),n=r[3],i=[];return(n||[]).forEach(function(l){var o=$s(l.data),c=ys(o[1][0].data)>>>0;switch(a){case 1:i[c]=lx(o[3][0].data);break;case 8:{var d=t[wn(o[9][0].data)][0],u=$s(d.data),p=t[wn(u[1][0].data)][0],f=ys(p.meta[1][0].data);if(f!=2001)throw new Error("2000 unexpected reference to ".concat(f));var g=$s(p.data);i[c]=g[3].map(function(x){return lx(x.data)}).join("")}break}}),i}function UF(t,s){var r,a,n,i,l,o,c,d,u,p,f,g,x,h,m=$s(t),j=ys(m[1][0].data)>>>0,v=ys(m[2][0].data)>>>0,N=((a=(r=m[8])==null?void 0:r[0])==null?void 0:a.data)&&ys(m[8][0].data)>0||!1,S,A;if((i=(n=m[7])==null?void 0:n[0])!=null&&i.data&&s!=0)S=(o=(l=m[7])==null?void 0:l[0])==null?void 0:o.data,A=(d=(c=m[6])==null?void 0:c[0])==null?void 0:d.data;else if((p=(u=m[4])==null?void 0:u[0])!=null&&p.data&&s!=1)S=(g=(f=m[4])==null?void 0:f[0])==null?void 0:g.data,A=(h=(x=m[3])==null?void 0:x[0])==null?void 0:h.data;else throw"NUMBERS Tile missing ".concat(s," cell storage");for(var T=N?4:1,k=$m(S),_=[],y=0;y<S.length/2;++y){var w=k.getUint16(y*2,!0);w<65535&&_.push([y,w])}if(_.length!=v)throw"Expected ".concat(v," cells, found ").concat(_.length);var R=[];for(y=0;y<_.length-1;++y)R[_[y][0]]=A.subarray(_[y][1]*T,_[y+1][1]*T);return _.length>=1&&(R[_[_.length-1][0]]=A.subarray(_[_.length-1][1]*T)),{R:j,cells:R}}function zF(t,s){var r,a=$s(s.data),n=(r=a==null?void 0:a[7])!=null&&r[0]?ys(a[7][0].data)>>>0>0?1:0:-1,i=Um(a[5],function(l){return UF(l,n)});return{nrows:ys(a[4][0].data)>>>0,data:i.reduce(function(l,o){return l[o.R]||(l[o.R]=[]),o.cells.forEach(function(c,d){if(l[o.R][d])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(d));l[o.R][d]=c}),l},[])}}function WF(t,s,r){var a,n=$s(s.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(ys(n[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(n[6][0].data));if(i.e.c=(ys(n[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(n[7][0].data));r["!ref"]=vt(i);var l=$s(n[4][0].data),o=Mp(t,t[wn(l[4][0].data)][0]),c=(a=l[17])!=null&&a[0]?Mp(t,t[wn(l[17][0].data)][0]):[],d=$s(l[3][0].data),u=0;d[1].forEach(function(p){var f=$s(p.data),g=t[wn(f[2][0].data)][0],x=ys(g.meta[1][0].data);if(x!=6002)throw new Error("6001 unexpected reference to ".concat(x));var h=zF(t,g);h.data.forEach(function(m,j){m.forEach(function(v,N){var S=Qe({r:u+j,c:N}),A=$F(v,o,c);A&&(r[S]=A)})}),u+=h.nrows})}function VF(t,s){var r=$s(s.data),a={"!ref":"A1"},n=t[wn(r[2][0].data)],i=ys(n[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return WF(t,n[0],a),a}function HF(t,s){var r,a=$s(s.data),n={name:(r=a[1])!=null&&r[0]?lx(a[1][0].data):"",sheets:[]},i=Um(a[2],wn);return i.forEach(function(l){t[l].forEach(function(o){var c=ys(o.meta[1][0].data);c==6e3&&n.sheets.push(VF(t,o))})}),n}function GF(t,s){var r=Vm(),a=$s(s.data),n=Um(a[1],wn);if(n.forEach(function(i){t[i].forEach(function(l){var o=ys(l.meta[1][0].data);if(o==2){var c=HF(t,l);c.sheets.forEach(function(d,u){Hm(r,d,u==0?c.name:c.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function B0(t){var s,r,a,n,i={},l=[];if(t.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var d;try{d=IF(c.content)}catch(p){return console.log("?? "+c.content.length+" "+(p.message||p))}var u;try{u=LF(d)}catch(p){return console.log("## "+(p.message||p))}u.forEach(function(p){i[p.id]=p.messages,l.push(p.id)})}}),!l.length)throw new Error("File has no messages");var o=((n=(a=(r=(s=i==null?void 0:i[1])==null?void 0:s[0])==null?void 0:r.meta)==null?void 0:a[1])==null?void 0:n[0].data)&&ys(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||l.forEach(function(c){i[c].forEach(function(d){var u=ys(d.meta[1][0].data)>>>0;if(u==1)if(!o)o=d;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return GF(i,o)}function qF(t){return function(r){for(var a=0;a!=t.length;++a){var n=t[a];r[n[0]]===void 0&&(r[n[0]]=n[1]),n[2]==="n"&&(r[n[0]]=Number(r[n[0]]))}}}function zm(t){qF([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function JF(t){return Ri.WS.indexOf(t)>-1?"sheet":t==Ri.CS?"chart":t==Ri.DS?"dialog":t==Ri.MS?"macro":t&&t.length?t:"sheet"}function KF(t,s){if(!t)return 0;try{t=s.map(function(a){return a.id||(a.id=a.strRelID),[a.name,t["!id"][a.id].Target,JF(t["!id"][a.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function YF(t,s,r,a,n,i,l,o,c,d,u,p){try{i[a]=Jl(yr(t,r,!0),s);var f=ns(t,s),g;switch(o){case"sheet":g=sF(f,s,n,c,i[a],d,u,p);break;case"chart":if(g=rF(f,s,n,c,i[a],d,u,p),!g||!g["!drawel"])break;var x=Dl(g["!drawel"].Target,s),h=sx(x),m=tT(yr(t,x,!0),Jl(yr(t,h,!0),x)),j=Dl(m,x),v=sx(j);g=BA(yr(t,j,!0),j,c,Jl(yr(t,v,!0),j),d,g);break;case"macro":g=aF(f,s,n,c,i[a],d,u,p);break;case"dialog":g=nF(f,s,n,c,i[a],d,u,p);break;default:throw new Error("Unrecognized sheet type "+o)}l[a]=g;var N=[];i&&i[a]&&ba(i[a]).forEach(function(S){var A="";if(i[a][S].Type==Ri.CMNT){A=Dl(i[a][S].Target,s);var T=cF(ns(t,A,!0),A,c);if(!T||!T.length)return;Np(g,T,!1)}i[a][S].Type==Ri.TCMNT&&(A=Dl(i[a][S].Target,s),N=N.concat(rT(ns(t,A,!0),c)))}),N&&N.length&&Np(g,N,!0,c.people||[])}catch(S){if(c.WTF)throw S}}function _r(t){return t.charAt(0)=="/"?t.slice(1):t}function XF(t,s){if(ov(),s=s||{},zm(s),Er(t,"META-INF/manifest.xml")||Er(t,"objectdata.xml"))return Lp(t,s);if(Er(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof B0<"u"){if(t.FileIndex)return B0(t);var r=bt.utils.cfb_new();return Yf(t).forEach(function(L){QS(r,L,XS(t,L))}),B0(r)}throw new Error("Unsupported NUMBERS file")}if(!Er(t,"[Content_Types].xml"))throw Er(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Er(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=Yf(t),n=qC(yr(t,"[Content_Types].xml")),i=!1,l,o;if(n.workbooks.length===0&&(o="xl/workbook.xml",ns(t,o,!0)&&n.workbooks.push(o)),n.workbooks.length===0){if(o="xl/workbook.bin",!ns(t,o,!0))throw new Error("Could not find workbook");n.workbooks.push(o),i=!0}n.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},d={};if(!s.bookSheets&&!s.bookProps){if(Xl=[],n.sst)try{Xl=oF(ns(t,_r(n.sst)),n.sst,s)}catch(L){if(s.WTF)throw L}s.cellStyles&&n.themes.length&&(c=lF(yr(t,n.themes[0].replace(/^\//,""),!0)||"",n.themes[0],s)),n.style&&(d=iF(ns(t,_r(n.style)),n.style,c,s))}n.links.map(function(L){try{var O=Jl(yr(t,sx(_r(L))),L);return uF(ns(t,_r(L)),O,L,s)}catch{}});var u=tF(ns(t,_r(n.workbooks[0])),n.workbooks[0],s),p={},f="";n.coreprops.length&&(f=ns(t,_r(n.coreprops[0]),!0),f&&(p=Iv(f)),n.extprops.length!==0&&(f=ns(t,_r(n.extprops[0]),!0),f&&QC(f,p,s)));var g={};(!s.bookSheets||s.bookProps)&&n.custprops.length!==0&&(f=yr(t,_r(n.custprops[0]),!0),f&&(g=e6(f,s)));var x={};if((s.bookSheets||s.bookProps)&&(u.Sheets?l=u.Sheets.map(function(O){return O.name}):p.Worksheets&&p.SheetNames.length>0&&(l=p.SheetNames),s.bookProps&&(x.Props=p,x.Custprops=g),s.bookSheets&&typeof l<"u"&&(x.SheetNames=l),s.bookSheets?x.SheetNames:s.bookProps))return x;l={};var h={};s.bookDeps&&n.calcchain&&(h=dF(ns(t,_r(n.calcchain)),n.calcchain));var m=0,j={},v,N;{var S=u.Sheets;p.Worksheets=S.length,p.SheetNames=[];for(var A=0;A!=S.length;++A)p.SheetNames[A]=S[A].name}var T=i?"bin":"xml",k=n.workbooks[0].lastIndexOf("/"),_=(n.workbooks[0].slice(0,k+1)+"_rels/"+n.workbooks[0].slice(k+1)+".rels").replace(/^\//,"");Er(t,_)||(_="xl/_rels/workbook."+T+".rels");var y=Jl(yr(t,_,!0),_.replace(/_rels.*/,"s5s"));(n.metadata||[]).length>=1&&(s.xlmeta=xF(ns(t,_r(n.metadata[0])),n.metadata[0],s)),(n.people||[]).length>=1&&(s.people=aT(ns(t,_r(n.people[0])),s)),y&&(y=KF(y,u.Sheets));var w=ns(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(m=0;m!=p.Worksheets;++m){var R="sheet";if(y&&y[m]?(v="xl/"+y[m][1].replace(/[\/]?xl\//,""),Er(t,v)||(v=y[m][1]),Er(t,v)||(v=_.replace(/_rels\/.*$/,"")+y[m][1]),R=y[m][2]):(v="xl/worksheets/sheet"+(m+1-w)+"."+T,v=v.replace(/sheet0\./,"sheet.")),N=v.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),s&&s.sheets!=null)switch(typeof s.sheets){case"number":if(m!=s.sheets)continue e;break;case"string":if(p.SheetNames[m].toLowerCase()!=s.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(s.sheets)){for(var P=!1,H=0;H!=s.sheets.length;++H)typeof s.sheets[H]=="number"&&s.sheets[H]==m&&(P=1),typeof s.sheets[H]=="string"&&s.sheets[H].toLowerCase()==p.SheetNames[m].toLowerCase()&&(P=1);if(!P)continue e}}YF(t,v,N,p.SheetNames[m],m,j,l,R,s,u,c,d)}return x={Directory:n,Workbook:u,Props:p,Custprops:g,Deps:h,Sheets:l,SheetNames:p.SheetNames,Strings:Xl,Styles:d,Themes:c,SSF:Es(tt)},s&&s.bookFiles&&(t.files?(x.keys=a,x.files=t.files):(x.keys=[],x.files={},t.FullPaths.forEach(function(L,O){L=L.replace(/^Root Entry[\/]/,""),x.keys.push(L),x.files[L]=t.FileIndex[O]}))),s&&s.bookVBA&&(n.vba.length>0?x.vbaraw=ns(t,_r(n.vba[0]),!0):n.defaults&&n.defaults.bin===oT&&(x.vbaraw=ns(t,"xl/vbaProject.bin",!0))),x}function QF(t,s){var r=s||{},a="Workbook",n=bt.find(t,a);try{if(a="/!DataSpaces/Version",n=bt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(V_(n.content),a="/!DataSpaces/DataSpaceMap",n=bt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=G_(n.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",n=bt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=q_(n.content);if(l.length!=1||l[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",n=bt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);K_(n.content)}catch{}if(a="/EncryptionInfo",n=bt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=Y_(n.content);if(a="/EncryptedPackage",n=bt.find(t,a),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],n.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],n.content,r.password||"",r);throw new Error("File is password-protected")}function Wm(t,s){var r="";switch((s||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Nr(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(s&&s.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function ZF(t,s){return bt.find(t,"EncryptedPackage")?QF(t,s):jj(t,s)}function e8(t,s){var r,a=t,n=s||{};return n.type||(n.type=gt&&Buffer.isBuffer(t)?"buffer":"base64"),r=hv(a,n),XF(r,n)}function Sj(t,s){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return nx(t.slice(r),s);default:break e}return Eo.to_workbook(t,s)}function t8(t,s){var r="",a=Wm(t,s);switch(s.type){case"base64":r=Nr(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=li(t);break;default:throw new Error("Unrecognized type "+s.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(r=Rt(r)),s.type="binary",Sj(r,s)}function s8(t,s){var r=t;return s.type=="base64"&&(r=Nr(r)),r=So.utils.decode(1200,r.slice(2),"str"),s.type="binary",Sj(r,s)}function r8(t){return t.match(/[^\x00-\x7F]/)?Rl(t):t}function $0(t,s,r,a){return a?(r.type="string",Eo.to_workbook(t,r)):Eo.to_workbook(s,r)}function cx(t,s){Yb();var r=s||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return cx(new Uint8Array(t),(r=Es(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var a=t,n=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Hi={},r.dateNF&&(Hi.dateNF=r.dateNF),r.type||(r.type=gt&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=gt?"buffer":"binary",a=VS(t),typeof Uint8Array<"u"&&!gt&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,a=r8(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var l=new ArrayBuffer(3),o=new Uint8Array(l);if(o.foo="bar",!o.foo)return r=Es(r),r.type="array",cx(jm(a),r)}switch((n=Wm(a,r))[0]){case 208:if(n[1]===207&&n[2]===17&&n[3]===224&&n[4]===161&&n[5]===177&&n[6]===26&&n[7]===225)return ZF(bt.read(a,r),r);break;case 9:if(n[1]<=8)return jj(a,r);break;case 60:return nx(a,r);case 73:if(n[1]===73&&n[2]===42&&n[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(n[1]===68)return F_(a,r);break;case 84:if(n[1]===65&&n[2]===66&&n[3]===76)return E_.to_workbook(a,r);break;case 80:return n[1]===75&&n[2]<9&&n[3]<9?e8(a,r):$0(t,a,r,i);case 239:return n[3]===60?nx(a,r):$0(t,a,r,i);case 255:if(n[1]===254)return s8(a,r);if(n[1]===0&&n[2]===2&&n[3]===0)return Yl.to_workbook(a,r);break;case 0:if(n[1]===0&&(n[2]>=2&&n[3]===0||n[2]===0&&(n[3]===8||n[3]===9)))return Yl.to_workbook(a,r);break;case 3:case 131:case 139:case 140:return wp.to_workbook(a,r);case 123:if(n[1]===92&&n[2]===114&&n[3]===116)return o5.to_workbook(a,r);break;case 10:case 13:case 32:return t8(a,r);case 137:if(n[1]===80&&n[2]===78&&n[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return __.indexOf(n[0])>-1&&n[2]<=12&&n[3]<=31?wp.to_workbook(a,r):$0(t,a,r,i)}function a8(t,s,r,a,n,i,l,o){var c=As(r),d=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),p=!0,f=n===1?[]:{};if(n!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:r,enumerable:!1})}catch{f.__rowNum__=r}else f.__rowNum__=r;if(!l||t[r])for(var g=s.s.c;g<=s.e.c;++g){var x=l?t[r][g]:t[a[g]+c];if(x===void 0||x.t===void 0){if(d===void 0)continue;i[g]!=null&&(f[i[g]]=d);continue}var h=x.v;switch(x.t){case"z":if(h==null)break;continue;case"e":h=h==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(i[g]!=null){if(h==null)if(x.t=="e"&&h===null)f[i[g]]=null;else if(d!==void 0)f[i[g]]=d;else if(u&&h===null)f[i[g]]=null;else continue;else f[i[g]]=u&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?h:Wa(x,h,o);h!=null&&(p=!1)}}return{row:f,isempty:p}}function dx(t,s){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},a=0,n=1,i=[],l=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},d=s||{},u=d.range!=null?d.range:t["!ref"];switch(d.header===1?a=1:d.header==="A"?a=2:Array.isArray(d.header)?a=3:d.header==null&&(a=0),typeof u){case"string":c=Kt(u);break;case"number":c=Kt(t["!ref"]),c.s.r=u;break;default:c=u}a>0&&(n=0);var p=As(c.s.r),f=[],g=[],x=0,h=0,m=Array.isArray(t),j=c.s.r,v=0,N={};m&&!t[j]&&(t[j]=[]);var S=d.skipHidden&&t["!cols"]||[],A=d.skipHidden&&t["!rows"]||[];for(v=c.s.c;v<=c.e.c;++v)if(!(S[v]||{}).hidden)switch(f[v]=ps(v),r=m?t[j][v]:t[f[v]+p],a){case 1:i[v]=v-c.s.c;break;case 2:i[v]=f[v];break;case 3:i[v]=d.header[v-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=l=Wa(r,null,d),h=N[l]||0,!h)N[l]=1;else{do o=l+"_"+h++;while(N[o]);N[l]=h,N[o]=1}i[v]=o}for(j=c.s.r+n;j<=c.e.r;++j)if(!(A[j]||{}).hidden){var T=a8(t,c,j,f,a,i,m,d);(T.isempty===!1||(a===1?d.blankrows!==!1:d.blankrows))&&(g[x++]=T.row)}return g.length=x,g}var Bp=/"/g;function n8(t,s,r,a,n,i,l,o){for(var c=!0,d=[],u="",p=As(r),f=s.s.c;f<=s.e.c;++f)if(a[f]){var g=o.dense?(t[r]||[])[f]:t[a[f]+p];if(g==null)u="";else if(g.v!=null){c=!1,u=""+(o.rawNumbers&&g.t=="n"?g.v:Wa(g,null,o));for(var x=0,h=0;x!==u.length;++x)if((h=u.charCodeAt(x))===n||h===i||h===34||o.forceQuotes){u='"'+u.replace(Bp,'""')+'"';break}u=="ID"&&(u='"ID"')}else g.f!=null&&!g.F?(c=!1,u="="+g.f,u.indexOf(",")>=0&&(u='"'+u.replace(Bp,'""')+'"')):u="";d.push(u)}return o.blankrows===!1&&c?null:d.join(l)}function Cj(t,s){var r=[],a=s??{};if(t==null||t["!ref"]==null)return"";var n=Kt(t["!ref"]),i=a.FS!==void 0?a.FS:",",l=i.charCodeAt(0),o=a.RS!==void 0?a.RS:`
`,c=o.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),u="",p=[];a.dense=Array.isArray(t);for(var f=a.skipHidden&&t["!cols"]||[],g=a.skipHidden&&t["!rows"]||[],x=n.s.c;x<=n.e.c;++x)(f[x]||{}).hidden||(p[x]=ps(x));for(var h=0,m=n.s.r;m<=n.e.r;++m)(g[m]||{}).hidden||(u=n8(t,n,m,p,l,c,i,a),u!=null&&(a.strip&&(u=u.replace(d,"")),(u||a.blankrows!==!1)&&r.push((h++?o:"")+u)));return delete a.dense,r.join("")}function i8(t,s){s||(s={}),s.FS="	",s.RS=`
`;var r=Cj(t,s);return r}function l8(t){var s="",r,a="";if(t==null||t["!ref"]==null)return[];var n=Kt(t["!ref"]),i="",l=[],o,c=[],d=Array.isArray(t);for(o=n.s.c;o<=n.e.c;++o)l[o]=ps(o);for(var u=n.s.r;u<=n.e.r;++u)for(i=As(u),o=n.s.c;o<=n.e.c;++o)if(s=l[o]+i,r=d?(t[u]||[])[o]:t[s],a="",r!==void 0){if(r.F!=null){if(s=r.F,!r.f)continue;a=r.f,s.indexOf(":")==-1&&(s=s+":"+s)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}c[c.length]=s+"="+a}return c}function _j(t,s,r){var a=r||{},n=+!a.skipHeader,i=t||{},l=0,o=0;if(i&&a.origin!=null)if(typeof a.origin=="number")l=a.origin;else{var c=typeof a.origin=="string"?Ks(a.origin):a.origin;l=c.r,o=c.c}var d,u={s:{c:0,r:0},e:{c:o,r:l+s.length-1+n}};if(i["!ref"]){var p=Kt(i["!ref"]);u.e.c=Math.max(u.e.c,p.e.c),u.e.r=Math.max(u.e.r,p.e.r),l==-1&&(l=p.e.r+1,u.e.r=l+s.length-1+n)}else l==-1&&(l=0,u.e.r=s.length-1+n);var f=a.header||[],g=0;s.forEach(function(h,m){ba(h).forEach(function(j){(g=f.indexOf(j))==-1&&(f[g=f.length]=j);var v=h[j],N="z",S="",A=Qe({c:o+g,r:l+m+n});d=Do(i,A),v&&typeof v=="object"&&!(v instanceof Date)?i[A]=v:(typeof v=="number"?N="n":typeof v=="boolean"?N="b":typeof v=="string"?N="s":v instanceof Date?(N="d",a.cellDates||(N="n",v=Zs(v)),S=a.dateNF||tt[14]):v===null&&a.nullError&&(N="e",v=0),d?(d.t=N,d.v=v,delete d.w,delete d.R,S&&(d.z=S)):i[A]=d={t:N,v},S&&(d.z=S))})}),u.e.c=Math.max(u.e.c,o+f.length-1);var x=As(l);if(n)for(g=0;g<f.length;++g)i[ps(g+o)+x]={t:"s",v:f[g]};return i["!ref"]=vt(u),i}function o8(t,s){return _j(null,t,s)}function Do(t,s,r){if(typeof s=="string"){if(Array.isArray(t)){var a=Ks(s);return t[a.r]||(t[a.r]=[]),t[a.r][a.c]||(t[a.r][a.c]={t:"z"})}return t[s]||(t[s]={t:"z"})}return typeof s!="number"?Do(t,Qe(s)):Do(t,Qe({r:s,c:r||0}))}function c8(t,s){if(typeof s=="number"){if(s>=0&&t.SheetNames.length>s)return s;throw new Error("Cannot find sheet # "+s)}else if(typeof s=="string"){var r=t.SheetNames.indexOf(s);if(r>-1)return r;throw new Error("Cannot find sheet name |"+s+"|")}else throw new Error("Cannot find sheet |"+s+"|")}function Vm(){return{SheetNames:[],Sheets:{}}}function Hm(t,s,r,a){var n=1;if(!r)for(;n<=65535&&t.SheetNames.indexOf(r="Sheet"+n)!=-1;++n,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&t.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);n=i&&+i[2]||0;var l=i&&i[1]||r;for(++n;n<=65535&&t.SheetNames.indexOf(r=l+n)!=-1;++n);}if(qA(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=s,r}function d8(t,s,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var a=c8(t,s);switch(t.Workbook.Sheets[a]||(t.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[a].Hidden=r}function u8(t,s){return t.z=s,t}function Tj(t,s,r){return s?(t.l={Target:s},r&&(t.l.Tooltip=r)):delete t.l,t}function x8(t,s,r){return Tj(t,"#"+s,r)}function m8(t,s,r){t.c||(t.c=[]),t.c.push({t:s,a:r||"SheetJS"})}function h8(t,s,r,a){for(var n=typeof s!="string"?s:Kt(s),i=typeof s=="string"?s:vt(s),l=n.s.r;l<=n.e.r;++l)for(var o=n.s.c;o<=n.e.c;++o){var c=Do(t,l,o);c.t="n",c.F=i,delete c.v,l==n.s.r&&o==n.s.c&&(c.f=r,a&&(c.D=!0))}return t}var f8={encode_col:ps,encode_row:As,encode_cell:Qe,encode_range:vt,decode_col:Am,decode_row:Em,split_cell:CC,decode_cell:Ks,decode_range:dl,format_cell:Wa,sheet_add_aoa:Pv,sheet_add_json:_j,sheet_add_dom:wj,aoa_to_sheet:ul,json_to_sheet:o8,table_to_sheet:Nj,table_to_book:FF,sheet_to_csv:Cj,sheet_to_txt:i8,sheet_to_json:dx,sheet_to_html:AF,sheet_to_formulae:l8,sheet_to_row_object_array:dx,sheet_get_cell:Do,book_new:Vm,book_append_sheet:Hm,book_set_sheet_visibility:d8,cell_set_number_format:u8,cell_set_hyperlink:Tj,cell_set_internal_link:x8,cell_add_comment:m8,sheet_set_array_formula:h8,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function p8(t){const s=t.split(/\r?\n/).filter(n=>n.trim().length>0);if(s.length===0)return[];const r=$p(s[0]).map(n=>n.trim()),a=[];for(let n=1;n<s.length;n++){const i=$p(s[n]);if(i.length===0)continue;const l={};r.forEach((o,c)=>{l[o]=(i[c]??"").trim()}),a.push(l)}return a}function $p(t){const s=[];let r="",a=!1;for(let n=0;n<t.length;n++){const i=t[n];if(i==='"'){if(a&&t[n+1]==='"'){r+='"',n++;continue}a=!a;continue}if(i===","&&!a){s.push(r),r="";continue}r+=i}return s.push(r),s}function Up(t){return t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}async function Dr(t,s){const r=new FormData;r.append("file",t);const a=localStorage.getItem("auth_token"),n=localStorage.getItem("role"),i=localStorage.getItem("permissions"),l={};a&&(l.Authorization=`Bearer ${a}`),n&&(l["x-user-role"]=n),i&&(l["x-user-permissions"]=i);const o=await fetch(`${s}/upload`,{method:"POST",body:r,headers:l});if(!o.ok){const f=await o.text();let g="upload failed";try{const x=JSON.parse(f);g=x.message||x.error||g}catch{g=f||g}throw new Error(g)}const d=(await o.json()).url;if(!d)throw new Error("upload failed: no URL in response");if(/^https?:\/\//i.test(d))return d;let u=s.replace(/\/$/,"");d.startsWith("/uploads/")&&u.endsWith("/api")&&(u=u.replace(/\/api$/,""));const p=d.startsWith("/")?d:`/${d}`;return`${u}${p}`}function g8(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Products"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage your product catalog"})]}),e.jsx("button",{className:"btn-primary",children:"Add Product"})]}),e.jsx(y8,{})]})})}function y8(){var He,Le,ve,st,St,fe,ae,Be,Ct,ct,Tt,_t,dt,ut,pe,Me,Je,jt,at,Yt,ia,Sa,qa,Ur,he,me,be,ye,Pe,Re,$e,Te,Ne,Ge,nt,ht,ee,le,de,ge,Ee,M,J;const{notify:t}=hr(),[s,r]=b.useState([]),[a,n]=b.useState(!1),[i,l]=b.useState(""),[o,c]=b.useState(""),[d,u]=b.useState(""),[p,f]=b.useState("title"),[g,x]=b.useState("asc"),[h,m]=b.useState(null),[j,v]=b.useState([]),[N,S]=b.useState(!1),[A,T]=b.useState(null),[k,_]=b.useState([]),[y,w]=b.useState([]),[R,P]=b.useState({slug:"",title:"",category:"",price:"",list_image:"",description:"",details:{sku:"",hsn:"",mrp:"",websitePrice:"",discountPercent:"",brand:"",subtitle:"",skinHairType:"",netQuantity:"",unitCount:"",packageContent:"",innerPackaging:"",outerPackaging:"",netWeight:"",deadWeight:"",gstPercent:"",countryOfOrigin:"",manufacturer:"",keyIngredients:"",ingredientBenefits:"",howToUse:"",longDescription:"",bulletHighlights:"",imageLinks:"",videoLinks:"",platformCategoryMapping:"",hazardous:"",badges:""}}),[H,L]=b.useState(null),[O,W]=b.useState([]),D=(()=>{if(typeof window<"u"){const E=window.location.hostname;return E==="thenefol.com"||E==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}/api`:"https://thenefol.com/api"}return"https://thenefol.com/api"})(),F=E=>{if(!E)return"";if(/^https?:\/\//i.test(E))return E;const C=D.replace(/\/$/,""),B=E.startsWith("/")?E:`/${E}`;return`${C}${B}`},V=async()=>{var E;try{n(!0),l(""),console.log(" Loading products from API:",`${D}/products`);const C=await fetch(`${D}/products?_=${Date.now()}`,{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(console.log(" API Response Status:",C.status,C.ok),!C.ok)throw new Error(`HTTP error! status: ${C.status}`);const B=await C.json();console.log(` Loaded ${(B==null?void 0:B.length)||0} products from database`),console.log(" First product:",((E=B==null?void 0:B[0])==null?void 0:E.title)||"None"),r(Array.isArray(B)?B:[])}catch(C){console.error(" Failed to load products:",C),l("Failed to load products: "+C.message)}finally{n(!1)}};b.useEffect(()=>{V();const E=Ye.subscribe("product_updated",B=>{console.log(" Product updated in Products page:",B),V()}),C=Ye.subscribe("products_updated",B=>{console.log(" Products updated in Products page:",B),V()});return()=>{E&&E(),C&&C()}},[]);const te=async E=>{E.preventDefault();try{let C=R.list_image||"";if(H)try{C=await Dr(H,D)}catch{t("error","Main image upload failed");return}const B=await fetch(`${D}/products`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:R.slug,title:R.title,category:R.category,price:R.price,listImage:C,description:R.description,details:R.details})});if(!B.ok)throw new Error("create failed");const G=await B.json();if(O.length)try{const Z=[];for(const se of O){const oe=await Dr(se,D);Z.push(oe)}await fetch(`${D}/products/${G.id}/images`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({images:Z})})}catch{}await V(),P({slug:"",title:"",category:"",price:"",list_image:"",description:"",details:{...R.details,sku:"",hsn:"",mrp:"",websitePrice:"",discountPercent:""}}),L(null),W([])}catch{t("error","Create failed")}},[I,U]=b.useState(null),[z,Y]=b.useState(new Set),[K,ne]=b.useState(!1),q=async E=>{try{if(!(await fetch(`${D}/products/${E}`,{method:"DELETE"})).ok)throw new Error("delete failed");Y(B=>{const G=new Set(B);return G.delete(E),G}),await V(),t("success","Product deleted")}catch{t("error","Delete failed")}},re=async()=>{if(z.size===0){t("error","No products selected");return}try{const E=Array.from(z),C=await fetch(`${D}/products/bulk-delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:E})});if(!C.ok){const G=await C.json().catch(()=>({}));throw new Error(G.error||G.message||"Bulk delete failed")}await V();const B=new Set(z);E.forEach(G=>B.delete(G)),Y(B),ne(!1),t("success",`Successfully deleted ${E.length} product(s)`)}catch(E){t("error",`Bulk delete failed: ${E.message}`)}},xe=E=>{Y(C=>{const B=new Set(C);return B.has(E)?B.delete(E):B.add(E),B})},_e=()=>{z.size===Ie.length?Y(new Set):Y(new Set(Ie.map(E=>E.id)))},X=E=>{m({...E,details:E.details||{sku:"",hsn:"",mrp:"",websitePrice:"",discountPercent:"",brand:"",subtitle:"",skinHairType:"",netQuantity:"",unitCount:"",packageContent:"",innerPackaging:"",outerPackaging:"",netWeight:"",deadWeight:"",gstPercent:"",countryOfOrigin:"",manufacturer:"",keyIngredients:"",ingredientBenefits:"",howToUse:"",longDescription:"",bulletHighlights:"",imageLinks:"",videoLinks:"",platformCategoryMapping:"",hazardous:"",badges:""}})},Ae=async E=>{if(E.preventDefault(),!(!h||!h.id)){if(!h.title||!h.slug){t("error","Slug and Title are required");return}try{if(!(await fetch(`${D}/products/${h.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:h.slug,title:h.title,category:h.category,price:h.price,listImage:h.list_image,description:h.description,details:h.details})})).ok)throw new Error("update failed");await V(),m(null),t("success","Product updated")}catch{t("error","Update failed")}}},Ie=b.useMemo(()=>{let E=s;if(o){const C=o.toLowerCase();E=E.filter(B=>B.title.toLowerCase().includes(C)||B.slug.toLowerCase().includes(C)||(B.category||"").toLowerCase().includes(C))}return d&&(E=E.filter(C=>(C.category||"")===d)),E=[...E].sort((C,B)=>{const G=g==="asc"?1:-1,Z=p==="price"?Number(C.price)||0:C[p]||"",se=p==="price"?Number(B.price)||0:B[p]||"";return Z<se?-1*G:Z>se?1*G:0}),E},[s,o,d,p,g]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Bulk Import"}),e.jsxs("div",{className:"mb-3 rounded bg-green-50 p-3 text-sm text-green-800",children:[e.jsx("strong",{children:" Enhanced Bulk Import:"})," CSV import will automatically map all product fields including pricing, GST, packaging, ingredients, and more. First image from Image Links will be used as list image. Remaining fields can be updated manually after import."]}),e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center",children:[e.jsx("input",{type:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",onChange:async E=>{var G;const C=(G=E.target.files)==null?void 0:G[0];if(!C)return;const B=await C.arrayBuffer();if(C.name.endsWith(".csv")){let Z=new TextDecoder().decode(new Uint8Array(B));Z.charCodeAt(0)===65279&&(Z=Z.slice(1)),v(p8(Z))}else{const Z=cx(B,{type:"array"}),se=Z.Sheets[Z.SheetNames[0]],oe=f8.sheet_to_json(se);v(oe)}}}),e.jsx("button",{disabled:!j.length||N,onClick:async()=>{S(!0);try{const E=(ie,ue)=>{const we=Object.entries(ie),Fe=ue.find(Ue=>we.some(([mt])=>mt.toLowerCase().replace(/\s+|_|\(|\)/g,"")===Ue.toLowerCase().replace(/\s+|_|\(|\)/g,"")));if(!Fe)return"";const je=we.find(([Ue])=>Ue.toLowerCase().replace(/\s+|_|\(|\)/g,"")===Fe.toLowerCase().replace(/\s+|_|\(|\)/g,""))[0],Ce=ie[je];return Ce==null||Ce===""?"":String(Ce).trim()},C=ie=>ie&&ie.split(",")[0].trim()||"",B=ie=>{if(!ie)return"";const ue=ie.toLowerCase().trim();return ue==="face care"?"Face Care":ue==="hair care"?"Hair Care":ue==="body care"?"Body Care":ue==="combo"||ue.includes("combo")||ue.includes("pack")?"Combo":ue.includes("hair")?"Hair Care":ue.includes("face")&&!ue.includes("hair")?"Face Care":ue.includes("body")?"Body Care":ie.split(" ").map(we=>we.charAt(0).toUpperCase()+we.slice(1).toLowerCase()).join(" ")};let G=0,Z=0;const se=[],oe=new Set;for(let ie=0;ie<j.length;ie++){const ue=j[ie],we=E(ue,["product name","title","producttitle","name","Product Name"]),Fe=E(ue,["slug","Slug"])||Up(we);let je=Fe,Ce=1;for(;oe.has(je);)je=`${Fe}-${Ce}`,Ce++;oe.add(je);const Ue=E(ue,["product category","category","cat","Product Category"]),mt=B(Ue),it=E(ue,["mrp","MRP","MRP "]),Et=E(ue,["website price","websiteprice","websiteprice","WEBSITE price","websitePrice"]),Ps=E(ue,["discount","discountpercent","discount %","Discount %","discountPercent"]),Xe=Et||it||E(ue,["price","amount"]),yt=E(ue,["product description (long)","longdescription","description","desc","Product Description (Long)"]),wt=Xe?String(Xe):"",Lt=E(ue,["image links","imagelinks","Image Links","imageLinks"]),Ke=C(Lt),sr={sku:E(ue,["sku","SKU"]),hsn:E(ue,["hsn code","hsncode","HSN Code","hsn"]),brand:E(ue,["brand name","brandname","Brand Name","brand"])||"NEFOL",productTitle:E(ue,["product title","producttitle","Product Title","productTitle"]),subtitle:E(ue,["subtitle / tagline","subtitle","Subtitle / Tagline","subtitle"]),subCategory:E(ue,["product sub-category","subcategory","Product Sub-Category","subCategory"]),productType:E(ue,["product type","producttype","Product Type","productType"]),skinHairType:E(ue,["skin/hair type","skinhairtype","Skin/Hair Type","skinHairType"]),mrp:it||"",websitePrice:Et||"",discountPercent:Ps||(it&&Et?String(Math.round((parseFloat(it)-parseFloat(Et))/parseFloat(it)*100)):""),discount:Ps||"",gst:E(ue,["gst %","gstpercent","GST %","gstPercent","gst"]),gstPercent:E(ue,["gst %","gstpercent","GST %","gstPercent","gst"]),netQuantity:E(ue,["net quantity (content)","netquantity","Net Quantity (Content)","netQuantity"]),unitCount:E(ue,["unit count (pack of)","unitcount","Unit Count (Pack of)","unitCount"]),netWeight:E(ue,["net weight (product only)","netweight","Net Weight (Product Only)","netWeight"]),deadWeight:E(ue,["dead weight (packaging only)","deadweight","Dead Weight (Packaging Only)","deadWeight"]),packageContent:E(ue,["package content details","packagecontent","Package Content Details","packageContent"]),innerPackaging:E(ue,["inner packaging type","innerpackaging","Inner Packaging Type","innerPackaging"]),outerPackaging:E(ue,["outer packaging type","outerpackaging","Outer Packaging Type","outerPackaging"]),countryOfOrigin:E(ue,["country of origin","countryoforigin","Country of Origin","countryOfOrigin"]),manufacturer:E(ue,["manufacturer / packer / importer","manufacturer","Manufacturer / Packer / Importer","manufacturer"]),keyIngredients:E(ue,["key ingredients","keyingredients","Key Ingredients","keyIngredients"]),ingredientBenefits:E(ue,["ingredient benefits","ingredientbenefits","Ingredient Benefits","ingredientBenefits"]),howToUse:E(ue,["how to use (steps)","howtouse","How to Use (Steps)","howToUse","how to use"]),longDescription:yt||E(ue,["product description (long)","longdescription","Product Description (Long)","longDescription"]),bulletHighlights:E(ue,["bullet highlights","bullethighlights","Bullet Highlights","bulletHighlights"]),imageLinks:Lt||"",videoLinks:E(ue,["video links","videolinks","Video Links","videoLinks"]),platformCategoryMapping:E(ue,["platform category mapping","platformcategorymapping","Platform Category Mapping","platformCategoryMapping"]),hazardous:E(ue,["hazardous / fragile (y/n)","hazardous","Hazardous / Fragile (Y/N)","hazardous"]),badges:E(ue,["special attributes (badges)","badges","Special Attributes (Badges)","badges"])};Object.keys(sr).forEach(Hs=>{(sr[Hs]===""||sr[Hs]===null||sr[Hs]===void 0)&&delete sr[Hs]});const Ja={slug:je,title:we,category:mt,price:wt,listImage:Ke,description:yt,details:sr};if(!Ja.title||!Ja.slug){Z++,se.push(`Row ${ie+1}: missing title/slug`);continue}try{const Hs=await fetch(`${D}/products`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ja)});if(Hs.ok){const lt=await Hs.json();G++,console.log(`Product created: ${lt.id} - ${lt.title}`)}else{const lt=await Hs.json().catch(()=>({}));Z++;const rr=lt.error||lt.message||`HTTP ${Hs.status}`;se.push(`Row ${ie+1}: ${rr}`),console.error("Failed to create product:",lt)}}catch(Hs){Z++,se.push(`Row ${ie+1}: Network error - ${Hs}`),console.error(`Network error for row ${ie+1}:`,Hs)}}console.log("Import finished. Waiting for database commit..."),await new Promise(ie=>setTimeout(ie,500)),console.log("Reloading products from database..."),await V(),v([]);const ce=`Import complete! Success: ${G}, Failed: ${Z}`;t(Z?"error":"success",ce)}catch(E){console.error("Import failed:",E),t("error",`Import failed: ${E}`)}finally{S(!1)}},className:"rounded bg-blue-600 px-4 py-2 text-sm font-semibold hover:bg-blue-700 disabled:opacity-50",children:N?"Importing...":`Import ${j.length||""}`})]}),!!j.length&&e.jsxs("div",{className:"mt-4 max-h-64 overflow-auto rounded border border-white/10",children:[e.jsxs("table",{className:"w-full text-left text-xs",children:[e.jsx("thead",{className:"sticky top-0 border-b border-white/10 bg-slate-900 text-white/70",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pr-3",children:"title"}),e.jsx("th",{className:"py-2 pr-3",children:"slug"}),e.jsx("th",{className:"py-2 pr-3",children:"category"}),e.jsx("th",{className:"py-2 pr-3",children:"price"}),e.jsx("th",{className:"py-2 pr-3",children:"description"})]})}),e.jsx("tbody",{children:j.slice(0,50).map((E,C)=>e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-1 pr-3",children:E.title}),e.jsx("td",{className:"py-1 pr-3",children:E.slug||Up(E.title||"")}),e.jsx("td",{className:"py-1 pr-3",children:E.category}),e.jsx("td",{className:"py-1 pr-3",children:E.price}),e.jsx("td",{className:"py-1 pr-3",children:E.description})]},C))})]}),j.length>50&&e.jsxs("div",{className:"p-2 text-center text-xs text-white/60",children:["Showing first 50 of ",j.length]})]})]}),e.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 p-6",children:[e.jsx("h2",{className:"mb-4 text-lg font-semibold",children:"Add Product"}),e.jsxs("form",{onSubmit:te,className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Slug",value:R.slug||"",onChange:E=>P(C=>({...C,slug:E.target.value})),required:!0}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Title",value:R.title||"",onChange:E=>P(C=>({...C,title:E.target.value})),required:!0}),e.jsxs("select",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:R.category||"",onChange:E=>P(C=>({...C,category:E.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"Face Care",children:"Face Care"}),e.jsx("option",{value:"Hair Care",children:"Hair Care"}),e.jsx("option",{value:"Body Care",children:"Body Care"}),e.jsx("option",{value:"Combo",children:"Combo"})]}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Price (display)",value:R.price||"",onChange:E=>P(C=>({...C,price:E.target.value}))}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"SKU",value:((He=R.details)==null?void 0:He.sku)||"",onChange:E=>P(C=>({...C,details:{...C.details||{},sku:E.target.value}}))}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"HSN Code",value:((Le=R.details)==null?void 0:Le.hsn)||"",onChange:E=>P(C=>({...C,details:{...C.details||{},hsn:E.target.value}}))}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"MRP",value:((ve=R.details)==null?void 0:ve.mrp)||"",onChange:E=>{var G;const C=E.target.value,B=(G=R.details)==null?void 0:G.discountPercent;if(C&&B){const Z=parseFloat(C)-parseFloat(C)*parseFloat(B)/100;P(se=>({...se,details:{...se.details||{},mrp:C,websitePrice:Z.toFixed(2)}}))}else P(Z=>({...Z,details:{...Z.details||{},mrp:C}}))}}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Discount %",type:"number",min:"0",max:"100",value:((st=R.details)==null?void 0:st.discountPercent)||"",onChange:E=>{var G;const C=E.target.value,B=(G=R.details)==null?void 0:G.mrp;if(C&&B){const Z=parseFloat(B)-parseFloat(B)*parseFloat(C)/100;P(se=>({...se,details:{...se.details||{},discountPercent:C,websitePrice:Z.toFixed(2)}}))}else P(Z=>({...Z,details:{...Z.details||{},discountPercent:C}}))}}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Website Price (Discounted)",value:((St=R.details)==null?void 0:St.websitePrice)||"",onChange:E=>{var G;const C=E.target.value,B=(G=R.details)==null?void 0:G.mrp;if(C&&B){const Z=((parseFloat(B)-parseFloat(C))/parseFloat(B)*100).toFixed(1);P(se=>({...se,details:{...se.details||{},websitePrice:C,discountPercent:Z}}))}else P(Z=>({...Z,details:{...Z.details||{},websitePrice:C}}))}}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"mb-1 text-xs text-white/70",children:"Main Image (upload or fallback URL)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:E=>{var C;return L(((C=E.target.files)==null?void 0:C[0])||null)},className:"rounded border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),e.jsx("span",{className:"text-xs text-white/50",children:"or"}),e.jsx("input",{className:"flex-1 rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"List Image URL (optional)",value:R.list_image||"",onChange:E=>P(C=>({...C,list_image:E.target.value}))})]}),e.jsx("div",{className:"mt-2 text-xs text-white/50",children:"Add additional video in PDP Media below."})]}),e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"Description",value:R.description||"",onChange:E=>P(C=>({...C,description:E.target.value}))}),e.jsx("textarea",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"How to Use",value:((fe=R.details)==null?void 0:fe.howToUse)||"",onChange:E=>P(C=>({...C,details:{...C.details||{},howToUse:E.target.value}}))}),e.jsx("textarea",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"Key Ingredients",value:((ae=R.details)==null?void 0:ae.keyIngredients)||"",onChange:E=>P(C=>({...C,details:{...C.details||{},keyIngredients:E.target.value}}))}),e.jsx("textarea",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"Ingredient Benefits",value:((Be=R.details)==null?void 0:Be.ingredientBenefits)||"",onChange:E=>P(C=>({...C,details:{...C.details||{},ingredientBenefits:E.target.value}}))}),e.jsx("textarea",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"Bullet Highlights",value:((Ct=R.details)==null?void 0:Ct.bulletHighlights)||"",onChange:E=>P(C=>({...C,details:{...C.details||{},bulletHighlights:E.target.value}}))}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("div",{className:"mb-1 text-xs text-white/70",children:"PDP Media (images or 1 video)"}),e.jsx("input",{multiple:!0,type:"file",accept:"image/*,video/*",onChange:E=>W(Array.from(E.target.files||[])),className:"rounded border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),e.jsx("div",{className:"mt-2 text-xs text-white/50",children:"Tip: Upload up to 7 images and 1 short video (mp4/webm)."})]}),e.jsx("div",{className:"md:col-span-3",children:e.jsx("button",{className:"rounded bg-blue-600 px-4 py-2 font-semibold hover:bg-blue-700",children:"Save"})})]})]}),e.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 p-6",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Products"}),z.size>0&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-sm text-white/70",children:[z.size," selected"]}),e.jsxs("button",{onClick:()=>ne(!0),className:"rounded bg-red-600 px-4 py-2 text-sm font-semibold hover:bg-red-700 disabled:opacity-50",disabled:z.size===0,children:["Delete Selected (",z.size,")"]})]})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-2 md:flex-row md:items-center md:justify-end",children:[e.jsx("input",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Search...",value:o,onChange:E=>c(E.target.value)}),e.jsxs("select",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:d,onChange:E=>u(E.target.value),children:[e.jsx("option",{value:"",children:"All categories"}),e.jsx("option",{value:"Face Care",children:"Face Care"}),e.jsx("option",{value:"Hair Care",children:"Hair Care"}),e.jsx("option",{value:"Body Care",children:"Body Care"}),e.jsx("option",{value:"Combo",children:"Combo"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{className:"rounded bg-white/10 px-3 py-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:p,onChange:E=>f(E.target.value),children:[e.jsx("option",{value:"title",children:"Title"}),e.jsx("option",{value:"price",children:"Price"}),e.jsx("option",{value:"category",children:"Category"})]}),e.jsx("button",{className:"rounded bg-white/10 px-3 py-2 text-sm hover:bg-white/15",onClick:()=>x(E=>E==="asc"?"desc":"asc"),children:g==="asc"?"Asc":"Desc"})]}),e.jsx("button",{onClick:V,className:"rounded bg-white/10 px-3 py-2 text-sm hover:bg-white/15",children:"Refresh"}),e.jsxs("form",{onSubmit:async E=>{var se;E.preventDefault();const B=(se=E.currentTarget.elements.namedItem("csv").files)==null?void 0:se[0];if(!B)return;const G=new FormData;G.append("file",B),(await fetch(`${D}/products-csv/upload`,{method:"POST",body:G})).ok?alert("CSV uploaded"):alert("CSV upload failed")},className:"flex items-center gap-2",children:[e.jsx("input",{name:"csv",type:"file",accept:".csv",className:"rounded border border-gray-300 bg-white px-3 py-2 text-xs text-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),e.jsx("button",{className:"rounded bg-white/10 px-3 py-2 text-sm hover:bg-white/15",children:"Upload CSV"})]})]})]}),a?e.jsx("p",{children:"Loading..."}):i?e.jsx("p",{className:"text-red-400",children:i}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"border-b border-white/10 text-xs uppercase text-white/70",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pr-4",children:e.jsx("input",{type:"checkbox",checked:z.size===Ie.length&&Ie.length>0,onChange:_e,className:"cursor-pointer"})}),e.jsx("th",{className:"py-2 pr-4",children:"ID"}),e.jsx("th",{className:"py-2 pr-4",children:"Slug"}),e.jsx("th",{className:"py-2 pr-4",children:"Title"}),e.jsx("th",{className:"py-2 pr-4",children:"Category"}),e.jsx("th",{className:"py-2 pr-4",children:"Price"}),e.jsx("th",{className:"py-2 pr-4",children:"Image"}),e.jsx("th",{className:"py-2 pr-4",children:"Actions"})]})}),e.jsx("tbody",{children:Ie.map(E=>{var C,B;return e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2 pr-4",children:e.jsx("input",{type:"checkbox",checked:z.has(E.id),onChange:()=>xe(E.id),className:"cursor-pointer"})}),e.jsx("td",{className:"py-2 pr-4",children:E.id}),e.jsx("td",{className:"py-2 pr-4",children:E.slug}),e.jsx("td",{className:"py-2 pr-4",children:E.title}),e.jsx("td",{className:"py-2 pr-4",children:E.category}),e.jsx("td",{className:"py-2 pr-4",children:e.jsx("div",{className:"text-sm",children:(C=E.details)!=null&&C.mrp&&((B=E.details)!=null&&B.websitePrice)?e.jsxs("div",{children:[e.jsxs("div",{className:"text-gray-500 line-through text-xs",children:["",E.details.mrp]}),e.jsxs("div",{className:"font-semibold text-green-600",children:["",E.details.websitePrice]}),e.jsxs("div",{className:"text-xs text-green-500",children:[((parseFloat(E.details.mrp)-parseFloat(E.details.websitePrice))/parseFloat(E.details.mrp)*100).toFixed(0),"% OFF"]})]}):e.jsxs("div",{className:"font-semibold",children:["",E.price]})})}),e.jsx("td",{className:"py-2 pr-4",children:E.list_image?e.jsx("img",{src:F(E.list_image),className:"h-10 w-10 rounded object-cover"}):e.jsx("span",{className:"opacity-50",children:""})}),e.jsx("td",{className:"py-2 pr-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:async()=>{T(E),_([]),w([]);try{const G=await fetch(`${D}/products/${E.id}/images`);if(G.ok){const Z=await G.json(),se=[...new Set(Z.filter(ce=>ce.type==="pdp"||!ce.type).map(ce=>ce.url).filter(Boolean))],oe=[...new Set(Z.filter(ce=>ce.type==="banner").map(ce=>ce.url).filter(Boolean))];_(se),w(oe)}}catch{}},className:"rounded bg-white/10 px-3 py-1 text-xs hover:bg-white/15",children:"Images"}),e.jsx("button",{onClick:()=>X(E),className:"rounded bg-white/10 px-3 py-1 text-xs hover:bg-white/15",children:"Edit"}),e.jsx("button",{onClick:()=>U(E.id),className:"rounded bg-red-600 px-3 py-1 text-xs hover:bg-red-700",children:"Delete"})]})})]},E.id)})})]})}),A&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",children:e.jsxs("div",{className:"w-full max-w-2xl rounded-lg border border-gray-300 bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Manage Images  ",A.title]}),e.jsx("button",{onClick:()=>T(null),className:"rounded bg-gray-200 px-3 py-1 text-sm text-gray-700 hover:bg-gray-300",children:"Close"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 text-sm text-gray-700",children:"Main image"}),e.jsxs("div",{className:"flex items-center gap-3",children:[A.list_image?e.jsx("img",{src:F(A.list_image),className:"h-16 w-16 rounded object-cover"}):e.jsx("div",{className:"h-16 w-16 rounded border border-gray-300 bg-gray-50"}),e.jsx("input",{type:"file",accept:"image/*",className:"rounded border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",onChange:async E=>{var B;const C=(B=E.target.files)==null?void 0:B[0];if(C)try{const G=await Dr(C,D),Z=await fetch(`${D}/products/${A.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({listImage:G})});if(!Z.ok){const se=await Z.text().catch(()=>"");throw new Error(se||"Update failed")}r(se=>se.map(oe=>oe.id===A.id?{...oe,list_image:G}:oe)),T(se=>se&&{...se,list_image:G}),await V(),t("success","Main image updated")}catch{t("error","Upload failed")}}})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 text-sm text-gray-700",children:"PDP images"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.map((E,C)=>{const B=F(E);return/\.(mp4|webm|ogg)(\?|$)/i.test(B)?e.jsx("video",{src:B,className:"h-16 w-16 rounded object-cover"},C):e.jsx("img",{src:B,className:"h-16 w-16 rounded object-cover"},C)})}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{multiple:!0,type:"file",accept:"image/*,video/*",className:"rounded border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",onChange:async E=>{const C=Array.from(E.target.files||[]);if(C.length)try{const B=[];for(const Z of C){const se=await Dr(Z,D);B.push(se)}await fetch(`${D}/products/${A.id}/images`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({images:B,type:"pdp"})});const G=await fetch(`${D}/products/${A.id}/images`);if(G.ok){const Z=await G.json(),se=[...new Set(Z.filter(oe=>oe.type==="pdp"||!oe.type).map(oe=>oe.url).filter(Boolean))];_(se)}await V(),t("success","PDP images uploaded")}catch{t("error","Upload failed")}}})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 text-sm text-gray-700",children:"Banner images"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.map((E,C)=>{const B=F(E);return/\.(mp4|webm|ogg)(\?|$)/i.test(B)?e.jsx("video",{src:B,className:"h-16 w-16 rounded object-cover"},C):e.jsx("img",{src:B,className:"h-16 w-16 rounded object-cover"},C)})}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{multiple:!0,type:"file",accept:"image/*,video/*",className:"rounded border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",onChange:async E=>{const C=Array.from(E.target.files||[]);if(C.length)try{const B=[];for(const Z of C){const se=await Dr(Z,D);B.push(se)}await fetch(`${D}/products/${A.id}/images`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({images:B,type:"banner"})});const G=await fetch(`${D}/products/${A.id}/images`);if(G.ok){const Z=await G.json(),se=[...new Set(Z.filter(oe=>oe.type==="banner").map(oe=>oe.url).filter(Boolean))];w(se)}await V(),t("success","Banner images uploaded")}catch{t("error","Upload failed")}}})})]})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-black/60 p-4 overflow-y-auto",children:e.jsxs("div",{className:"w-full max-w-4xl rounded-lg border border-gray-300 bg-white shadow-xl my-8",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 z-10 flex items-center justify-between rounded-t-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Edit Product - ",h.title]}),e.jsx("button",{onClick:()=>m(null),className:"rounded bg-gray-200 px-3 py-1 text-sm text-gray-700 hover:bg-gray-300",children:"Close"})]}),e.jsx("div",{className:"max-h-[calc(100vh-8rem)] overflow-y-auto px-6 py-6",children:e.jsxs("form",{onSubmit:Ae,className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Product Name *",value:h.title||"",onChange:E=>m(C=>({...C,title:E.target.value})),required:!0}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Slug *",value:h.slug||"",onChange:E=>m(C=>({...C,slug:E.target.value})),required:!0}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Brand Name",value:((ct=h.details)==null?void 0:ct.brand)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},brand:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"SKU",value:((Tt=h.details)==null?void 0:Tt.sku)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},sku:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"HSN Code",value:((_t=h.details)==null?void 0:_t.hsn)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},hsn:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"Product Title",value:((dt=h.details)==null?void 0:dt.productTitle)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},productTitle:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-3",placeholder:"Subtitle / Tagline",value:((ut=h.details)==null?void 0:ut.subtitle)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},subtitle:E.target.value}}))})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Category & Type"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("select",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:h.category||"",onChange:E=>m(C=>({...C,category:E.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"Face Care",children:"Face Care"}),e.jsx("option",{value:"Hair Care",children:"Hair Care"}),e.jsx("option",{value:"Body Care",children:"Body Care"}),e.jsx("option",{value:"Combo",children:"Combo"})]}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Sub-Category",value:((pe=h.details)==null?void 0:pe.subCategory)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},subCategory:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Product Type",value:((Me=h.details)==null?void 0:Me.productType)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},productType:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Skin/Hair Type",value:((Je=h.details)==null?void 0:Je.skinHairType)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},skinHairType:E.target.value}}))})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Pricing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"MRP ()"}),e.jsx("input",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"MRP",type:"number",value:((jt=h.details)==null?void 0:jt.mrp)||"",onChange:E=>{var G;const C=E.target.value,B=(G=h.details)==null?void 0:G.discountPercent;if(C&&B){const Z=parseFloat(C)-parseFloat(C)*parseFloat(B)/100;m(se=>({...se,details:{...(se==null?void 0:se.details)||{},mrp:C,websitePrice:Z.toFixed(2)}}))}else m(Z=>({...Z,details:{...(Z==null?void 0:Z.details)||{},mrp:C}}))}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Discount %"}),e.jsx("input",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Discount %",type:"number",min:"0",max:"100",value:((at=h.details)==null?void 0:at.discount)||((Yt=h.details)==null?void 0:Yt.discountPercent)||"",onChange:E=>{var G;const C=E.target.value,B=(G=h.details)==null?void 0:G.mrp;if(C&&B){const Z=parseFloat(B)-parseFloat(B)*parseFloat(C)/100;m(se=>({...se,details:{...(se==null?void 0:se.details)||{},discount:C,discountPercent:C,websitePrice:Z.toFixed(2)}}))}else m(Z=>({...Z,details:{...(Z==null?void 0:Z.details)||{},discount:C,discountPercent:C}}))}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Website Price ()"}),e.jsx("input",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Website Price",type:"number",value:((ia=h.details)==null?void 0:ia.websitePrice)||"",onChange:E=>{var G;const C=E.target.value,B=(G=h.details)==null?void 0:G.mrp;if(C&&B){const Z=((parseFloat(B)-parseFloat(C))/parseFloat(B)*100).toFixed(1);m(se=>({...se,details:{...(se==null?void 0:se.details)||{},websitePrice:C,discount:Z,discountPercent:Z}}))}else m(Z=>({...Z,details:{...(Z==null?void 0:Z.details)||{},websitePrice:C}}))}})]}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"GST %",value:((Sa=h.details)==null?void 0:Sa.gst)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},gst:E.target.value}}))})]}),((qa=h.details)==null?void 0:qa.mrp)&&((Ur=h.details)==null?void 0:Ur.websitePrice)&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mt-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Discount Amount"}),e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:["",(parseFloat(h.details.mrp)-parseFloat(h.details.websitePrice)).toFixed(2)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Discount %"}),e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:[((parseFloat(h.details.mrp)-parseFloat(h.details.websitePrice))/parseFloat(h.details.mrp)*100).toFixed(1),"%"]})]})]})})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Packaging & Quantity"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Net Quantity",value:((he=h.details)==null?void 0:he.netQuantity)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},netQuantity:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Unit Count (Pack of)",value:((me=h.details)==null?void 0:me.unitCount)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},unitCount:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Net Weight",value:((be=h.details)==null?void 0:be.netWeight)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},netWeight:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Dead Weight",value:((ye=h.details)==null?void 0:ye.deadWeight)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},deadWeight:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-2",placeholder:"Package Content Details",value:((Pe=h.details)==null?void 0:Pe.packageContent)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},packageContent:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Inner Packaging Type",value:((Re=h.details)==null?void 0:Re.innerPackaging)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},innerPackaging:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Outer Packaging Type",value:(($e=h.details)==null?void 0:$e.outerPackaging)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},outerPackaging:E.target.value}}))})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Manufacturer & Origin"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Country of Origin",value:((Te=h.details)==null?void 0:Te.countryOfOrigin)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},countryOfOrigin:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Manufacturer / Packer / Importer",value:((Ne=h.details)==null?void 0:Ne.manufacturer)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},manufacturer:E.target.value}}))})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Product Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("textarea",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Key Ingredients",rows:2,value:((Ge=h.details)==null?void 0:Ge.keyIngredients)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},keyIngredients:E.target.value}}))}),e.jsx("textarea",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Ingredient Benefits",rows:2,value:((nt=h.details)==null?void 0:nt.ingredientBenefits)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},ingredientBenefits:E.target.value}}))}),e.jsx("textarea",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"How to Use",rows:2,value:((ht=h.details)==null?void 0:ht.howToUse)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},howToUse:E.target.value}}))}),e.jsx("textarea",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Product Description (Long)",rows:4,value:((ee=h.details)==null?void 0:ee.longDescription)||h.description||"",onChange:E=>{m(C=>({...C,description:E.target.value,details:{...(C==null?void 0:C.details)||{},longDescription:E.target.value}}))}}),e.jsx("textarea",{className:"w-full rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Bullet Highlights",rows:2,value:((le=h.details)==null?void 0:le.bulletHighlights)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},bulletHighlights:E.target.value}}))})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Media & Links"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"List Image URL",value:h.list_image||"",onChange:E=>m(C=>({...C,list_image:E.target.value}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Image Links (comma separated)",value:((de=h.details)==null?void 0:de.imageLinks)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},imageLinks:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Video Links (comma separated)",value:((ge=h.details)==null?void 0:ge.videoLinks)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},videoLinks:E.target.value}}))})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-4",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Platform Category Mapping",value:((Ee=h.details)==null?void 0:Ee.platformCategoryMapping)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},platformCategoryMapping:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Hazardous / Fragile (Y/N)",value:((M=h.details)==null?void 0:M.hazardous)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},hazardous:E.target.value}}))}),e.jsx("input",{className:"rounded border border-gray-300 bg-white px-3 py-2 text-gray-900 placeholder-gray-500 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 md:col-span-2",placeholder:"Special Attributes (Badges)",value:((J=h.details)==null?void 0:J.badges)||"",onChange:E=>m(C=>({...C,details:{...(C==null?void 0:C.details)||{},badges:E.target.value}}))})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-white pt-4 pb-2 -mx-6 px-6 border-t border-gray-200",children:e.jsx("button",{type:"submit",className:"w-full rounded bg-blue-600 px-4 py-3 font-semibold text-white hover:bg-blue-700 transition-colors",children:" Save All Changes"})})]})})]})})]})]}),e.jsx(za,{open:!!I,onClose:()=>U(null),onConfirm:()=>{I!=null&&q(I)},title:"Delete this product?",description:"This action cannot be undone.",confirmText:"Delete"}),e.jsx(za,{open:K,onClose:()=>ne(!1),onConfirm:re,title:`Delete ${z.size} product(s)?`,description:`You are about to delete ${z.size} product(s). This action cannot be undone.`,confirmText:"Delete All"})]})}function b8(){const[t,s]=b.useState({sessions:0,pageViews:0,bounceRate:0,avgSessionDuration:"0:00",conversionRate:0,revenue:0,orders:0,customers:0,sessionsChange:0,pageViewsChange:0,bounceRateChange:0,avgSessionDurationChange:0,conversionRateChange:0,revenueChange:0,ordersChange:0,customersChange:0}),[r,a]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState(!0),[c,d]=b.useState("30d"),p=(()=>{if(typeof window<"u"){const m=window.location.hostname;if(m==="thenefol.com"||m==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();b.useEffect(()=>{f()},[c]);const f=async()=>{try{o(!0);const m=await fetch(`${p}/analytics?range=${c}`);if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const j=await m.json();j.overview&&s({sessions:j.overview.sessions??0,pageViews:j.overview.pageViews??0,bounceRate:j.overview.bounceRate??0,avgSessionDuration:j.overview.avgSessionDuration??"0:00",conversionRate:j.overview.conversionRate??0,revenue:j.overview.revenue??0,orders:j.overview.orders??0,customers:j.overview.customers??0,sessionsChange:j.overview.sessionsChange??0,pageViewsChange:j.overview.pageViewsChange??0,bounceRateChange:j.overview.bounceRateChange??0,avgSessionDurationChange:j.overview.avgSessionDurationChange??0,conversionRateChange:j.overview.conversionRateChange??0,revenueChange:j.overview.revenueChange??0,ordersChange:j.overview.ordersChange??0,customersChange:j.overview.customersChange??0}),a(j.chartData||[]),i(j.topPages||[])}catch(m){console.error("Failed to load analytics:",m),s({sessions:0,pageViews:0,bounceRate:0,avgSessionDuration:"0:00",conversionRate:0,revenue:0,orders:0,customers:0,sessionsChange:0,pageViewsChange:0,bounceRateChange:0,avgSessionDurationChange:0,conversionRateChange:0,revenueChange:0,ordersChange:0,customersChange:0}),a([]),i([])}finally{o(!1)}},g=m=>m==null||isNaN(m)?"0.0%":`${m>=0?"+":""}${m.toFixed(1)}%`,x=m=>m==null||isNaN(m)?"neutral":m>=0?"up":"down",h=[{title:"Sessions",value:(t.sessions||0).toLocaleString(),change:g(t.sessionsChange),trend:x(t.sessionsChange),icon:""},{title:"Page Views",value:(t.pageViews||0).toLocaleString(),change:g(t.pageViewsChange),trend:x(t.pageViewsChange),icon:""},{title:"Bounce Rate",value:`${t.bounceRate||0}%`,change:g(t.bounceRateChange),trend:x(t.bounceRateChange),icon:""},{title:"Avg. Session",value:t.avgSessionDuration||"0:00",change:g(t.avgSessionDurationChange),trend:x(t.avgSessionDurationChange),icon:""},{title:"Conversion Rate",value:`${t.conversionRate||0}%`,change:g(t.conversionRateChange),trend:x(t.conversionRateChange),icon:""},{title:"Revenue",value:`${(t.revenue||0).toLocaleString()}`,change:g(t.revenueChange),trend:x(t.revenueChange),icon:""},{title:"Orders",value:(t.orders||0).toString(),change:g(t.ordersChange),trend:x(t.ordersChange),icon:""},{title:"Customers",value:(t.customers||0).toString(),change:g(t.customersChange),trend:x(t.customersChange),icon:""}];return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Analytics"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Track your business performance and insights"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:c,onChange:m=>d(m.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"},children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]}),e.jsx("button",{onClick:f,className:"btn-secondary",children:"Refresh"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:h.map((m,j)=>e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:m.title}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:m.value})]}),e.jsx("div",{className:"text-2xl",children:m.icon})]}),e.jsxs("div",{className:"mt-4 flex items-center",children:[e.jsx("span",{className:`text-sm font-medium ${m.trend==="up"?"text-green-600":m.trend==="down"?"text-red-600":"text-gray-500"}`,children:m.change}),e.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"vs last period"})]})]},j))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sessions Over Time"}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-2",children:r.map((m,j)=>e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:"bg-brand-secondary rounded-t w-full mb-2",style:{height:`${m.sessions/Math.max(...r.map(v=>v.sessions))*200}px`}}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(m.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},j))})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Over Time"}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-2",children:r.map((m,j)=>e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:"bg-green-500 rounded-t w-full mb-2",style:{height:`${m.revenue/Math.max(...r.map(v=>v.revenue))*200}px`}}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(m.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},j))})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Pages"}),l?e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((m,j)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0 animate-pulse",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-16 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"})]})]},j))}):n.length>0?e.jsx("div",{className:"space-y-3",children:n.map((m,j)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:m.page}),e.jsxs("p",{className:"text-sm text-gray-500",children:[m.unique," unique views"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:m.views}),e.jsx("p",{className:"text-sm text-gray-500",children:"total views"})]})]},j))}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No page data available"})]})]})}function v8(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!1),[l,o]=b.useState("campaigns"),[c,d]=b.useState(!1),p=(()=>{if(typeof window<"u"){const m=window.location.hostname;if(m==="thenefol.com"||m==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();b.useEffect(()=>{f(),g()},[]);const f=async()=>{try{i(!0);const m=await fetch(`${p}/api/marketing/campaigns`);if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const j=await m.json();s(Array.isArray(j)?j:[])}catch(m){console.error("Failed to load campaigns:",m),s([])}finally{i(!1)}},g=async()=>{try{const m=await fetch(`${p}/api/marketing/templates`);if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const j=await m.json();a(Array.isArray(j)?j:[])}catch(m){console.error("Failed to load templates:",m),a([])}},x=m=>{switch(m){case"active":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"draft":return"bg-gray-100 text-gray-800";case"completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},h=m=>{switch(m){case"email":return"";case"social":return"";case"push":return"";case"sms":return"";default:return""}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Marketing"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage your marketing campaigns and templates"})]}),e.jsx("button",{onClick:()=>d(!0),className:"btn-primary",children:"Create Campaign"})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"campaigns",name:"Campaigns",count:t.length},{id:"templates",name:"Templates",count:r.length},{id:"audiences",name:"Audiences",count:0}].map(m=>e.jsxs("button",{onClick:()=>o(m.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${l===m.id?"border-brand-primary text-brand-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[m.name," (",m.count,")"]},m.id))})}),l==="campaigns"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{title:"Total Campaigns",value:t.length,icon:""},{title:"Active",value:t.filter(m=>m.status==="active").length,icon:""},{title:"Total Sent",value:t.reduce((m,j)=>m+j.sent,0).toLocaleString(),icon:""},{title:"Conversion Rate",value:"3.2%",icon:""}].map((m,j)=>e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:m.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.value})]}),e.jsx("div",{className:"text-2xl",children:m.icon})]})},j))}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"border-b border-gray-200 text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 pr-4",children:"Campaign"}),e.jsx("th",{className:"py-3 pr-4",children:"Type"}),e.jsx("th",{className:"py-3 pr-4",children:"Status"}),e.jsx("th",{className:"py-3 pr-4",children:"Audience"}),e.jsx("th",{className:"py-3 pr-4",children:"Sent"}),e.jsx("th",{className:"py-3 pr-4",children:"Opened"}),e.jsx("th",{className:"py-3 pr-4",children:"Clicked"}),e.jsx("th",{className:"py-3 pr-4",children:"Converted"}),e.jsx("th",{className:"py-3 pr-4",children:"Actions"})]})}),e.jsx("tbody",{children:t.map(m=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:m.name}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(m.createdAt).toLocaleDateString()})]})}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:h(m.type)}),e.jsx("span",{className:"capitalize",children:m.type})]})}),e.jsx("td",{className:"py-3 pr-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${x(m.status)}`,children:m.status})}),e.jsx("td",{className:"py-3 pr-4 text-gray-600",children:m.audience}),e.jsx("td",{className:"py-3 pr-4 font-medium",children:m.sent.toLocaleString()}),e.jsx("td",{className:"py-3 pr-4",children:m.opened.toLocaleString()}),e.jsx("td",{className:"py-3 pr-4",children:m.clicked.toLocaleString()}),e.jsx("td",{className:"py-3 pr-4 font-semibold text-green-600",children:m.converted}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Edit"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"View"}),e.jsx("button",{className:"bg-red-600 text-white px-2 py-1 text-xs rounded hover:bg-red-700",children:"Delete"})]})})]},m.id))})]})})})]}),l==="templates"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Email Templates"}),e.jsx("button",{className:"btn-primary",children:"Create Template"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(m=>e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:m.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:m.subject}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:m.preview}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-500",children:new Date(m.createdAt).toLocaleDateString()}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Edit"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Preview"})]})]})]},m.id))})]}),l==="audiences"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Audience Segments"}),e.jsx("button",{className:"btn-primary",children:"Create Audience"})]}),e.jsx("div",{className:"metric-card",children:e.jsx("p",{className:"text-gray-600",children:"Audience management features coming soon. This will include creating customer segments, importing lists, and managing subscriber preferences."})})]}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"w-full max-w-2xl rounded-lg bg-white p-6 m-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"mb-6 text-xl font-semibold",children:"Create New Campaign"}),e.jsxs("form",{onSubmit:m=>{m.preventDefault();const j=new FormData(m.currentTarget),v={id:t.length+1,name:j.get("name"),type:j.get("type"),status:"draft",audience:j.get("audience"),sent:0,opened:0,clicked:0,converted:0,createdAt:new Date().toISOString().split("T")[0]};s([...t,v]),d(!1)},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Campaign Name"}),e.jsx("input",{type:"text",name:"name",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Summer Sale Campaign",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Campaign Type"}),e.jsxs("select",{name:"type",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"social",children:"Social Media"}),e.jsx("option",{value:"push",children:"Push Notification"}),e.jsx("option",{value:"sms",children:"SMS"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Target Audience"}),e.jsx("input",{type:"text",name:"audience",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"All customers",required:!0})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Campaign"})]})]})]})})]})}const j8=()=>{if(typeof window<"u"){const t=window.location.hostname;if(t==="thenefol.com"||t==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"},ca=j8();function w8(){const[t,s]=b.useState("campaigns"),[r,a]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState([]),[c,d]=b.useState([]),[u,p]=b.useState(!1),[f,g]=b.useState(""),[x,h]=b.useState(!1),[m,j]=b.useState(!1),[v,N]=b.useState(null),[S,A]=b.useState({ad_account_id:"",pixel_id:"",access_token:""});b.useEffect(()=>{k(),T()},[t]);const T=async()=>{try{const W=await(await fetch(`${ca}/api/meta-ads/config`)).json();W.data&&A({ad_account_id:W.data.ad_account_id||"",pixel_id:W.data.pixel_id||"",access_token:W.data.access_token||""})}catch(O){console.error("Failed to load config:",O)}},k=async()=>{try{if(p(!0),g(""),t==="campaigns"){const W=await(await fetch(`${ca}/api/meta-ads/campaigns`)).json();a(Array.isArray(W.data)?W.data:[])}else if(t==="adsets"){const W=await(await fetch(`${ca}/api/meta-ads/adsets`)).json();i(Array.isArray(W.data)?W.data:[])}else if(t==="ads"){const W=await(await fetch(`${ca}/api/meta-ads/ads`)).json();o(Array.isArray(W.data)?W.data:[])}else if(t==="insights"){const W=await(await fetch(`${ca}/api/meta-ads/insights`)).json();d(Array.isArray(W.data)?W.data:[])}}catch(O){g(O.message||"Failed to load data")}finally{p(!1)}},_=async()=>{var O;try{p(!0);const Q=await(await fetch(`${ca}/api/meta-ads/config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)})).json();Q.success||(O=Q.data)!=null&&O.success?(alert("Configuration saved successfully!"),j(!1)):alert("Failed to save configuration")}catch{alert("Failed to save configuration")}finally{p(!1)}},y=async O=>{try{p(!0);const Q=await(await fetch(`${ca}/api/meta-ads/campaigns`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)})).json();Q.success||Q.data?(await k(),h(!1),alert("Campaign created successfully!")):alert(Q.error||"Failed to create campaign")}catch(W){alert(W.message||"Failed to create campaign")}finally{p(!1)}},w=async(O,W)=>{try{const D=await(await fetch(`${ca}/api/meta-ads/campaigns/${O}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:W})})).json();D.success||D.data?await k():alert("Failed to update campaign status")}catch{alert("Failed to update campaign status")}},R=async O=>{if(confirm("Are you sure you want to delete this campaign?"))try{const Q=await(await fetch(`${ca}/api/meta-ads/campaigns/${O}`,{method:"DELETE"})).json();Q.success||Q.data?(await k(),alert("Campaign deleted successfully!")):alert("Failed to delete campaign")}catch{alert("Failed to delete campaign")}},P=async()=>{try{p(!0);const O=r.map(D=>D.campaign_id).join(","),Q=await(await fetch(`${ca}/api/meta-ads/insights/sync?campaign_id=${O}`)).json();Q.success||Q.data?(await k(),alert("Insights synced successfully!")):alert("Failed to sync insights")}catch{alert("Failed to sync insights")}finally{p(!1)}},H=O=>{switch(O==null?void 0:O.toUpperCase()){case"ACTIVE":case"PAUSED":return O==="ACTIVE"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800";case"DELETED":case"ARCHIVED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},L=c.reduce((O,W)=>({impressions:O.impressions+(W.impressions||0),clicks:O.clicks+(W.clicks||0),spend:O.spend+(W.spend||0),reach:O.reach+(W.reach||0),conversions:O.conversions+(W.conversions||0),conversion_value:O.conversion_value+(W.conversion_value||0)}),{impressions:0,clicks:0,spend:0,reach:0,conversions:0,conversion_value:0});return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Meta Ads Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Create and manage your Facebook & Instagram ad campaigns"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>j(!0),className:"btn-secondary flex items-center space-x-2",children:[e.jsx(ws,{className:"h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),t==="campaigns"&&e.jsxs("button",{onClick:()=>h(!0),className:"btn-primary flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Campaign"})]}),t==="insights"&&e.jsxs("button",{onClick:P,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[e.jsx(vr,{className:"h-4 w-4"}),e.jsx("span",{children:"Sync Insights"})]})]})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex space-x-8",children:[{id:"campaigns",label:"Campaigns",icon:ds},{id:"adsets",label:"Ad Sets",icon:Pt},{id:"ads",label:"Ads",icon:ot},{id:"insights",label:"Performance",icon:Ss}].map(O=>{const W=O.icon;return e.jsxs("button",{onClick:()=>s(O.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${t===O.id?"":"border-transparent"}`,style:t===O.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{children:O.label})]},O.id)})})}),f&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:f}),u&&!r.length&&!n.length&&!l.length?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})}):e.jsxs(e.Fragment,{children:[t==="campaigns"&&e.jsx("div",{className:"space-y-4",children:r.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(ds,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No campaigns yet. Create your first campaign to get started."})]}):e.jsx("div",{className:"grid gap-4",children:r.map(O=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:O.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Objective: ",O.objective,"  ID: ",O.campaign_id]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${H(O.status)}`,children:O.status}),e.jsx("button",{onClick:()=>w(O.campaign_id,O.status==="ACTIVE"?"PAUSED":"ACTIVE"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:O.status==="ACTIVE"?e.jsx(Sn,{className:"h-4 w-4"}):e.jsx(Ua,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>R(O.campaign_id),className:"p-2 hover:bg-red-100 dark:hover:bg-red-900 rounded text-red-600",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Daily Budget"}),e.jsx("p",{className:"font-semibold",children:O.daily_budget?`${(O.daily_budget/100).toFixed(2)}`:"Not set"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Lifetime Budget"}),e.jsx("p",{className:"font-semibold",children:O.lifetime_budget?`${(O.lifetime_budget/100).toFixed(2)}`:"Not set"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Created"}),e.jsx("p",{className:"font-semibold",children:O.created_time?new Date(O.created_time).toLocaleDateString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Status"}),e.jsx("p",{className:"font-semibold",children:O.status})]})]})]},O.campaign_id))})}),t==="adsets"&&e.jsx("div",{className:"space-y-4",children:n.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(Pt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No ad sets yet."})]}):e.jsx("div",{className:"grid gap-4",children:n.map(O=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:O.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Campaign ID: ",O.campaign_id]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${H(O.status)}`,children:O.status})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Daily Budget"}),e.jsx("p",{className:"font-semibold",children:O.daily_budget?`${(O.daily_budget/100).toFixed(2)}`:"Not set"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Status"}),e.jsx("p",{className:"font-semibold",children:O.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Ad Set ID"}),e.jsx("p",{className:"font-semibold text-xs",children:O.adset_id})]})]})]},O.adset_id))})}),t==="ads"&&e.jsx("div",{className:"space-y-4",children:l.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(ot,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No ads yet."})]}):e.jsx("div",{className:"grid gap-4",children:l.map(O=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:O.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Ad Set: ",O.adset_id,"  Campaign: ",O.campaign_id]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${H(O.status)}`,children:O.status})]}),O.preview_url&&e.jsx("div",{className:"mt-4",children:e.jsx("a",{href:O.preview_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"View Preview "})})]},O.ad_id))})}),t==="insights"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Impressions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:L.impressions.toLocaleString()})]}),e.jsx(ot,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Clicks"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:L.clicks.toLocaleString()})]}),e.jsx(l4,{className:"h-8 w-8 text-green-500"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Spend"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["",L.spend.toFixed(2)]})]}),e.jsx(ko,{className:"h-8 w-8 text-yellow-500"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Conversions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:L.conversions})]}),e.jsx(zt,{className:"h-8 w-8 text-purple-500"})]})})]}),c.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(Ss,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No insights data yet. Sync insights to view performance metrics."})]}):e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Impressions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Clicks"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Spend"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"CPC"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"CTR"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Conversions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:c.map((O,W)=>{var Q,D,F,V,te;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:O.date_start||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:((Q=O.impressions)==null?void 0:Q.toLocaleString())||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:((D=O.clicks)==null?void 0:D.toLocaleString())||0}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:["",((F=O.spend)==null?void 0:F.toFixed(2))||"0.00"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:["",((V=O.cpc)==null?void 0:V.toFixed(2))||"0.00"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:[((te=O.ctr)==null?void 0:te.toFixed(2))||"0.00","%"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:O.conversions||0})]},W)})})]})})]})]}),x&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Create New Campaign"}),e.jsxs("form",{onSubmit:O=>{O.preventDefault();const W=new FormData(O.currentTarget);y({name:W.get("name"),objective:W.get("objective"),status:W.get("status")||"PAUSED",daily_budget:W.get("daily_budget")?parseFloat(W.get("daily_budget")):void 0,lifetime_budget:W.get("lifetime_budget")?parseFloat(W.get("lifetime_budget")):void 0,start_time:W.get("start_time")||void 0,stop_time:W.get("stop_time")||void 0})},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Campaign Name"}),e.jsx("input",{type:"text",name:"name",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100",placeholder:"Summer Sale 2024"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Objective"}),e.jsxs("select",{name:"objective",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100",children:[e.jsx("option",{value:"OUTCOME_TRAFFIC",children:"Traffic"}),e.jsx("option",{value:"OUTCOME_LEADS",children:"Leads"}),e.jsx("option",{value:"OUTCOME_ENGAGEMENT",children:"Engagement"}),e.jsx("option",{value:"OUTCOME_AWARENESS",children:"Awareness"}),e.jsx("option",{value:"OUTCOME_SALES",children:"Sales"}),e.jsx("option",{value:"OUTCOME_APP_PROMOTION",children:"App Promotion"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Daily Budget ()"}),e.jsx("input",{type:"number",name:"daily_budget",min:"0",step:"0.01",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Lifetime Budget ()"}),e.jsx("input",{type:"number",name:"lifetime_budget",min:"0",step:"0.01",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Start Date"}),e.jsx("input",{type:"datetime-local",name:"start_time",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"End Date"}),e.jsx("input",{type:"datetime-local",name:"stop_time",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Status"}),e.jsxs("select",{name:"status",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100",children:[e.jsx("option",{value:"PAUSED",children:"Paused"}),e.jsx("option",{value:"ACTIVE",children:"Active"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Campaign"})]})]})]})}),m&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Meta Ads Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Ad Account ID"}),e.jsx("input",{type:"text",value:S.ad_account_id,onChange:O=>A({...S,ad_account_id:O.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100",placeholder:"act_123456789"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Pixel ID"}),e.jsx("input",{type:"text",value:S.pixel_id,onChange:O=>A({...S,pixel_id:O.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100",placeholder:"123456789012345"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Access Token"}),e.jsx("input",{type:"password",value:S.access_token,onChange:O=>A({...S,access_token:O.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100",placeholder:"Your Meta access token"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Configuration"})]})]})]})})]})}const zp=()=>{if(typeof window<"u"){const t=window.location.hostname;return t==="thenefol.com"||t==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}/api`:"https://thenefol.com/api"}return"https://thenefol.com/api"};class N8{constructor(){Ca(this,"config",{api:{baseUrl:zp(),timeout:3e4,retries:3},features:{loyaltyProgram:!0,affiliateProgram:!0,cashbackSystem:!0,emailMarketing:!0,smsMarketing:!0,pushNotifications:!0,whatsappChat:!0,liveChat:!0,analytics:!0,formBuilder:!0,workflowAutomation:!0,customerSegmentation:!0,journeyTracking:!0,actionableAnalytics:!0,aiBox:!0,journeyFunnel:!0,aiPersonalization:!0,customAudience:!0,omniChannel:!0,apiManager:!0},ui:{theme:"auto",language:"en",timezone:"Asia/Kolkata",dateFormat:"DD/MM/YYYY",currency:"INR"},security:{sessionTimeout:36e5,maxLoginAttempts:5,passwordMinLength:8,requireTwoFactor:!1},notifications:{email:!0,sms:!0,push:!0,inApp:!0}})}getConfig(){return{...this.config}}getSection(s){return{...this.config[s]}}getValue(s,r){return this.config[s][r]}updateSection(s,r){this.config[s]={...this.config[s],...r},this.saveToStorage()}updateValue(s,r,a){this.config[s][r]=a,this.saveToStorage()}reset(){this.config={api:{baseUrl:zp(),timeout:3e4,retries:3},features:{loyaltyProgram:!0,affiliateProgram:!0,cashbackSystem:!0,emailMarketing:!0,smsMarketing:!0,pushNotifications:!0,whatsappChat:!0,liveChat:!0,analytics:!0,formBuilder:!0,workflowAutomation:!0,customerSegmentation:!0,journeyTracking:!0,actionableAnalytics:!0,aiBox:!0,journeyFunnel:!0,aiPersonalization:!0,customAudience:!0,omniChannel:!0,apiManager:!0},ui:{theme:"auto",language:"en",timezone:"Asia/Kolkata",dateFormat:"DD/MM/YYYY",currency:"INR"},security:{sessionTimeout:36e5,maxLoginAttempts:5,passwordMinLength:8,requireTwoFactor:!1},notifications:{email:!0,sms:!0,push:!0,inApp:!0}},this.saveToStorage()}loadFromStorage(){try{const s=localStorage.getItem("nefol_admin_config");if(s){const r=JSON.parse(s);this.config={...this.config,...r}}}catch(s){console.error("Failed to load config from storage:",s)}}saveToStorage(){try{localStorage.setItem("nefol_admin_config",JSON.stringify(this.config))}catch(s){console.error("Failed to save config to storage:",s)}}isFeatureEnabled(s){return this.config.features[s]}setFeatureEnabled(s,r){this.config.features[s]=r,this.saveToStorage()}getApiConfig(){return this.config.api}getUiConfig(){return this.config.ui}getSecurityConfig(){return this.config.security}getNotificationsConfig(){return this.config.notifications}}const Gm=new N8;Gm.loadFromStorage();function k8(){return Gm.getApiConfig().baseUrl}function S8(){const[t,s]=b.useState([]),[r,a]=b.useState({}),[n,i]=b.useState(!0),[l,o]=b.useState(""),[c,d]=b.useState(1),[u,p]=b.useState({total:0,totalPages:0}),[f,g]=b.useState("all"),x=k8(),h=b.useRef(c),m=b.useRef(f),j=b.useRef(l);b.useEffect(()=>{h.current=c,m.current=f,j.current=l},[c,f,l]);const v=b.useCallback(async()=>{var k;try{i(!0);const _=localStorage.getItem("auth_token")||localStorage.getItem("token"),y=localStorage.getItem("role")||"admin",w=localStorage.getItem("permissions")||"orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update",R=new URLSearchParams({page:h.current.toString(),limit:"50",...j.current&&{search:j.current}}),P=await fetch(`${x}/api/whatsapp/subscriptions?${R}`,{headers:{"Content-Type":"application/json",..._&&{Authorization:`Bearer ${_}`},"x-user-role":y,"x-user-permissions":w}});if(P.ok){const H=await P.json();console.log(" Fetched subscriptions:",((k=H.subscriptions)==null?void 0:k.length)||0,"total");let L=H.subscriptions||[];m.current==="active"?L=L.filter(O=>O.is_active):m.current==="inactive"&&(L=L.filter(O=>!O.is_active)),s(L),p(H.pagination||{})}else{const H=await P.text();console.error(`Failed to fetch subscriptions: ${P.status} ${P.statusText}`,H),P.status===401&&console.error("Authentication failed. Please check your login credentials.")}}catch(_){console.error("Failed to fetch subscriptions:",_)}finally{i(!1)}},[x]);b.useEffect(()=>{const k=setTimeout(()=>{v()},l?500:0);return()=>clearTimeout(k)},[c,f,l,v]),b.useEffect(()=>{N()},[]),b.useEffect(()=>{const k=y=>{var w,R,P;y.type==="whatsapp-subscription"&&(console.log(" Received WhatsApp subscription update, refreshing list..."),v(),N(),Notification.permission==="granted"&&new Notification("New WhatsApp Subscription!",{body:`New subscription: ${((R=(w=y.data)==null?void 0:w.subscription)==null?void 0:R.phone)||((P=y.data)==null?void 0:P.message)||"Unknown"}`,icon:"/favicon.ico"}))},_=Ye.subscribe("update",k);return()=>{_&&_()}},[v]);const N=async()=>{try{const k=localStorage.getItem("auth_token")||localStorage.getItem("token"),_=localStorage.getItem("role")||"admin",y=localStorage.getItem("permissions")||"orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update",w=await fetch(`${x}/api/whatsapp/stats`,{headers:{"Content-Type":"application/json",...k&&{Authorization:`Bearer ${k}`},"x-user-role":_,"x-user-permissions":y}});if(w.ok){const R=await w.json();a(R)}else{const R=await w.text();console.error(`Failed to fetch stats: ${w.status} ${w.statusText}`,R),w.status===401&&console.error("Authentication failed. Please check your login credentials.")}}catch(k){console.error("Failed to fetch stats:",k)}},S=k=>k.length===10?`+91 ${k.slice(0,5)} ${k.slice(5)}`:k,A=k=>new Date(k).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),T=()=>{const k=[["Phone","Name","Source","Subscribed At","Status"].join(","),...t.map(R=>[R.phone,R.name||"",R.source||"",R.subscribed_at,R.is_active?"Active":"Inactive"].join(","))].join(`
`),_=new Blob([k],{type:"text/csv"}),y=URL.createObjectURL(_),w=document.createElement("a");w.href=y,w.download=`whatsapp-subscriptions-${new Date().toISOString().split("T")[0]}.csv`,w.click(),setTimeout(()=>URL.revokeObjectURL(y),100)};return b.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[]),e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"WhatsApp Subscriptions"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage and view all WhatsApp subscriptions"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Total Subscribers"}),e.jsx("div",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:r.total_subscribers||0})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Active"}),e.jsx("div",{className:"text-2xl font-light",style:{color:"#059669",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:r.active_subscribers||0})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Last 24 Hours"}),e.jsx("div",{className:"text-2xl font-light",style:{color:"var(--arctic-blue-primary-dark)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:r.new_last_24_hours||0})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Last 7 Days"}),e.jsx("div",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:r.new_last_7_days||0})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex-1 w-full md:w-auto",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by phone or name...",value:l,onChange:k=>o(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:f,onChange:k=>{g(k.target.value),d(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Subscriptions"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]}),e.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(wa,{className:"w-4 h-4"}),"Export CSV"]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[n?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading subscriptions..."}):t.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"No subscriptions found"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscribed At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(k=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pa,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:S(k.phone)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.name||e.jsx("span",{className:"text-gray-400 italic",children:"Not provided"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:k.source||"Unknown"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mr,{className:"w-4 h-4"}),A(k.subscribed_at)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${k.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:k.is_active?"Active":"Inactive"})})]},k.id))})]})}),u.totalPages>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing page ",c," of ",u.totalPages," (",u.total," total)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>d(Math.max(1,c-1)),disabled:c===1,className:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),e.jsx("button",{onClick:()=>d(Math.min(u.totalPages,c+1)),disabled:c===u.totalPages,className:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]})]})}function C8(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!1),[l,o]=b.useState("discounts"),[c,d]=b.useState(!1),[u,p]=b.useState(null),[f,g]=b.useState({code:"",name:"",type:"percentage",value:"",min_purchase:"",max_discount:"",usage_limit:"",valid_from:"",valid_until:"",is_active:!0}),h=(()=>{if(typeof window<"u"){const w=window.location.hostname;if(w==="thenefol.com"||w==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();b.useEffect(()=>{m(),j()},[]);const m=async()=>{try{i(!0);const w=await fetch(`${h}/discounts`);if(w.ok){const R=await w.json();s(R)}else console.error("Failed to load discounts:",await w.text()),s([])}catch(w){console.error("Failed to load discounts:",w),s([])}finally{i(!1)}},j=async()=>{try{const w=await fetch(`${h}/discounts/usage`);if(w.ok){const R=await w.json();a(R)}else console.error("Failed to load usage:",await w.text()),a([])}catch(w){console.error("Failed to load usage:",w),a([])}},v=async w=>{w.preventDefault();try{i(!0);const R={code:f.code.toUpperCase(),name:f.name,type:f.type,value:parseFloat(f.value),min_purchase:f.min_purchase?parseFloat(f.min_purchase):null,max_discount:f.max_discount?parseFloat(f.max_discount):null,usage_limit:f.usage_limit?parseInt(f.usage_limit):null,valid_from:f.valid_from||null,valid_until:f.valid_until||null,is_active:f.is_active},P=u?"PUT":"POST",H=u?`${h}/discounts/${u.id}`:`${h}/discounts`,L=await fetch(H,{method:P,headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(L.ok)await m(),g({code:"",name:"",type:"percentage",value:"",min_purchase:"",max_discount:"",usage_limit:"",valid_from:"",valid_until:"",is_active:!0}),p(null),o("discounts"),alert(u?"Discount updated successfully!":"Discount created successfully!");else{const O=await L.json();alert(O.message||"Failed to save discount")}}catch(R){console.error("Error saving discount:",R),alert("Failed to save discount")}finally{i(!1)}},N=w=>{var R,P,H;p(w),g({code:w.code,name:w.name,type:w.type,value:w.value.toString(),min_purchase:((R=w.min_purchase)==null?void 0:R.toString())||"",max_discount:((P=w.max_discount)==null?void 0:P.toString())||"",usage_limit:((H=w.usage_limit)==null?void 0:H.toString())||"",valid_from:w.valid_from?w.valid_from.split("T")[0]:"",valid_until:w.valid_until?w.valid_until.split("T")[0]:"",is_active:w.is_active}),o("create")},S=async w=>{if(confirm("Are you sure you want to delete this discount?"))try{i(!0),(await fetch(`${h}/discounts/${w}`,{method:"DELETE"})).ok?(await m(),alert("Discount deleted successfully!")):alert("Failed to delete discount")}catch(R){console.error("Error deleting discount:",R),alert("Failed to delete discount")}finally{i(!1)}},A=async w=>{try{i(!0),(await fetch(`${h}/discounts/${w.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!w.is_active})})).ok?await m():alert("Failed to update discount status")}catch(R){console.error("Error updating discount status:",R),alert("Failed to update discount status")}finally{i(!1)}},T=(w,R)=>w?R&&new Date(R)<new Date?"bg-red-100 text-red-800":"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",k=w=>w.is_active?w.valid_until&&new Date(w.valid_until)<new Date?"Expired":"Active":"Inactive",_=w=>{switch(w){case"percentage":return"";case"fixed":return"";default:return""}},y=w=>{switch(w.type){case"percentage":return`${w.value}%`;case"fixed":return`${w.value}`;case"free_shipping":return"Free Shipping";default:return`${w.value}`}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Discounts"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Create and manage discount codes and promotions"})]}),e.jsx("button",{onClick:()=>d(!0),className:"btn-primary",children:"Create Discount"})]}),e.jsx("div",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"discounts",name:"Discount Codes",count:t.length},{id:"usage",name:"Usage History",count:r.length},{id:"create",name:"Create New",count:0}].map(w=>e.jsxs("button",{onClick:()=>o(w.id),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${l===w.id?"text-[var(--arctic-blue-primary-dark)]":"border-transparent hover:text-[var(--text-primary)]"}`,style:l===w.id?{borderColor:"var(--arctic-blue-primary)"}:{color:"var(--text-muted)"},children:[w.name," (",w.count,")"]},w.id))})}),l==="discounts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{title:"Total Discounts",value:t.length,icon:""},{title:"Active",value:t.filter(w=>w.is_active&&(!w.valid_until||new Date(w.valid_until)>=new Date)).length,icon:""},{title:"Total Uses",value:t.reduce((w,R)=>w+(R.usage_count||0),0),icon:""},{title:"Total Saved",value:`${(Array.isArray(r)?r.reduce((w,R)=>w+(Number(R.discount_amount)||0),0):0).toFixed(2)}`,icon:""}].map((w,R)=>e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:w.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.value})]}),e.jsx("div",{className:"text-2xl",children:w.icon})]})},R))}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"border-b border-gray-200 text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 pr-4",children:"Code"}),e.jsx("th",{className:"py-3 pr-4",children:"Name"}),e.jsx("th",{className:"py-3 pr-4",children:"Type"}),e.jsx("th",{className:"py-3 pr-4",children:"Value"}),e.jsx("th",{className:"py-3 pr-4",children:"Min Amount"}),e.jsx("th",{className:"py-3 pr-4",children:"Usage"}),e.jsx("th",{className:"py-3 pr-4",children:"Status"}),e.jsx("th",{className:"py-3 pr-4",children:"Valid Until"}),e.jsx("th",{className:"py-3 pr-4",children:"Actions"})]})}),e.jsx("tbody",{children:t.map(w=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-3 pr-4",children:e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm font-mono",children:w.code})}),e.jsx("td",{className:"py-3 pr-4 font-medium text-gray-900",children:w.name}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:_(w.type)}),e.jsx("span",{className:"capitalize",children:w.type.replace("_"," ")})]})}),e.jsx("td",{className:"py-3 pr-4 font-semibold",children:y(w)}),e.jsx("td",{className:"py-3 pr-4 text-gray-600",children:w.min_purchase?`${w.min_purchase}`:""}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:w.usage_count||0}),w.usage_limit&&e.jsxs("span",{className:"text-gray-500",children:[" / ",w.usage_limit]})]})}),e.jsx("td",{className:"py-3 pr-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${T(w.is_active,w.valid_until)}`,children:k(w)})}),e.jsx("td",{className:"py-3 pr-4 text-gray-600",children:w.valid_until?new Date(w.valid_until).toLocaleDateString():""}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>N(w),className:"btn-secondary text-xs px-2 py-1",children:"Edit"}),e.jsx("button",{onClick:async()=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(w.code),alert("Discount code copied to clipboard!");else{const R=document.createElement("textarea");R.value=w.code,R.style.position="fixed",R.style.left="-999999px",document.body.appendChild(R),R.select(),document.execCommand("copy"),document.body.removeChild(R),alert(`Discount code copied: ${w.code}`)}}catch{alert(`Discount code: ${w.code}`)}},className:"btn-secondary text-xs px-2 py-1",children:"Copy"}),e.jsx("button",{onClick:()=>A(w),className:`text-xs px-2 py-1 rounded ${w.is_active?"bg-yellow-600 text-white hover:bg-yellow-700":"bg-green-600 text-white hover:bg-green-700"}`,children:w.is_active?"Deactivate":"Activate"}),e.jsx("button",{onClick:()=>S(w.id),className:"bg-red-600 text-white px-2 py-1 text-xs rounded hover:bg-red-700",children:"Delete"})]})})]},w.id))})]})})})]}),l==="usage"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Discount Usage History"}),e.jsx("button",{className:"btn-secondary",children:"Export"})]}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"border-b border-gray-200 text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 pr-4",children:"Customer"}),e.jsx("th",{className:"py-3 pr-4",children:"Order ID"}),e.jsx("th",{className:"py-3 pr-4",children:"Discount Code"}),e.jsx("th",{className:"py-3 pr-4",children:"Amount Saved"}),e.jsx("th",{className:"py-3 pr-4",children:"Used At"})]})}),e.jsx("tbody",{children:r.map(w=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-3 pr-4 text-gray-600",children:w.customer_email}),e.jsxs("td",{className:"py-3 pr-4 font-medium",children:["#",w.order_id]}),e.jsx("td",{className:"py-3 pr-4",children:e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm font-mono",children:w.discount_code||"Unknown"})}),e.jsxs("td",{className:"py-3 pr-4 font-semibold text-green-600",children:["",(w.discount_amount||0).toFixed(2)]}),e.jsx("td",{className:"py-3 pr-4 text-gray-600",children:new Date(w.created_at).toLocaleString()})]},w.id))})]})})})]}),l==="create"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:u?"Edit Discount":"Create New Discount"}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Code *"}),e.jsx("input",{type:"text",required:!0,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"WELCOME10",value:f.code,onChange:w=>g({...f,code:w.target.value.toUpperCase()}),disabled:!!u}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Code cannot be changed after creation"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Name *"}),e.jsx("input",{type:"text",required:!0,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"Welcome Discount",value:f.name,onChange:w=>g({...f,name:w.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",value:f.type,onChange:w=>g({...f,type:w.target.value}),children:[e.jsx("option",{value:"percentage",children:"Percentage"}),e.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value *"}),e.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:f.type==="percentage"?"10":"100",value:f.value,onChange:w=>g({...f,value:w.target.value})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type==="percentage"?"Percentage (0-100)":"Amount in "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Purchase Amount"}),e.jsx("input",{type:"number",min:"0",step:"0.01",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"500",value:f.min_purchase,onChange:w=>g({...f,min_purchase:w.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Discount (for percentage)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"1000",value:f.max_discount,onChange:w=>g({...f,max_discount:w.target.value}),disabled:f.type==="fixed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum discount amount for percentage type"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usage Limit"}),e.jsx("input",{type:"number",min:"1",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"100",value:f.usage_limit,onChange:w=>g({...f,usage_limit:w.target.value})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for unlimited"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("label",{className:"flex items-center space-x-2 mt-2",children:[e.jsx("input",{type:"checkbox",checked:f.is_active,onChange:w=>g({...f,is_active:w.target.checked}),className:"rounded border-gray-300"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid From"}),e.jsx("input",{type:"date",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",value:f.valid_from,onChange:w=>g({...f,valid_from:w.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid Until"}),e.jsx("input",{type:"date",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",value:f.valid_until,onChange:w=>g({...f,valid_until:w.target.value})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>{g({code:"",name:"",type:"percentage",value:"",min_purchase:"",max_discount:"",usage_limit:"",valid_from:"",valid_until:"",is_active:!0}),p(null),o("discounts")},className:"btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"Saving...":u?"Update Discount":"Create Discount"})]})]})]})})]})}function _8(){const[t,s]=b.useState(!1),[r,a]=b.useState([]),[n,i]=b.useState({totalPosts:0,scheduled:0,engagement:"0",reach:"0"}),[l,o]=b.useState(!0),[c,d]=b.useState(""),p=(()=>{if(typeof window<"u"){const g=window.location.hostname;if(g==="thenefol.com"||g==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();b.useEffect(()=>{f()},[]);const f=async()=>{try{o(!0),d("");const[g,x,h]=await Promise.all([fetch(`${p}/api/social/connection-status`),fetch(`${p}/api/social/posts`),fetch(`${p}/api/social/stats`)]);if(g.ok){const m=await g.json();s(m.connected||!1)}if(x.ok){const m=await x.json();a(m.posts||[])}if(h.ok){const m=await h.json();i(m)}}catch(g){console.error("Failed to load social data:",g),d("Failed to load social media data")}finally{o(!1)}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Facebook & Instagram"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage your social media presence"})]}),e.jsx("button",{onClick:()=>s(!t),className:t?"btn-secondary":"btn-primary",children:t?"Disconnect":"Connect Account"})]}),t?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"f"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Facebook Page"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Nefol Skincare"})]})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:"Connected"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{title:"Total Posts",value:"24",icon:""},{title:"Scheduled",value:"3",icon:""},{title:"Engagement",value:"2.4K",icon:""},{title:"Reach",value:"8.7K",icon:""}].map((g,x)=>e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:g.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.value})]}),e.jsx("div",{className:"text-2xl",children:g.icon})]})},x))}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Posts"}),e.jsx("button",{className:"btn-primary",children:"Create Post"})]}),e.jsx("div",{className:"space-y-4",children:r.map(g=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("img",{src:g.image,alt:"Post",className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${g.platform==="facebook"?"bg-blue-100 text-blue-800":"bg-pink-100 text-pink-800"}`,children:g.platform==="facebook"?" Facebook":" Instagram"}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${g.status==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:g.status})]}),e.jsx("p",{className:"text-gray-900 mb-2",children:g.content}),e.jsxs("p",{className:"text-sm text-gray-500",children:[g.status==="scheduled"?"Scheduled for":"Published on"," ",new Date(g.scheduledFor).toLocaleString()]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Edit"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"View"})]})]})},g.id))})]})]}):e.jsxs("div",{className:"metric-card text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Connect Your Social Media"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Connect your Facebook and Instagram accounts to manage posts, stories, and ads from one place."}),e.jsx("button",{onClick:()=>s(!0),className:"btn-primary",children:"Connect Facebook & Instagram"})]})]})}function T8(){const[t,s]=b.useState({name:"Nefol Store",description:"Premium skincare products for healthy, glowing skin",currency:"INR",timezone:"Asia/Kolkata",language:"en",domain:"nefol.com",status:"live"}),[r]=b.useState([{id:1,name:"Nefol Classic",active:!0,preview:"/IMAGES/light theme logo.png"},{id:2,name:"Nefol Dark",active:!1,preview:"/IMAGES/dark theme logo.png"},{id:3,name:"Minimal",active:!1,preview:"/IMAGES/light theme logo.png"}]);return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Online Store"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Configure your online store settings"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Store is live"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Store Status"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"#059669",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:"Live"})]}),e.jsx("div",{className:"text-2xl",children:""})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Domain"}),e.jsx("p",{className:"text-lg font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:"nefol.com"})]}),e.jsx("div",{className:"text-2xl",children:""})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Theme"}),e.jsx("p",{className:"text-lg font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:"Nefol Classic"})]}),e.jsx("div",{className:"text-2xl",children:""})]})})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Store Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Name"}),e.jsx("input",{type:"text",value:t.name,onChange:a=>s({...t,name:a.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsxs("select",{value:t.currency,onChange:a=>s({...t,currency:a.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",children:[e.jsx("option",{value:"INR",children:"Indian Rupee ()"}),e.jsx("option",{value:"USD",children:"US Dollar ($)"}),e.jsx("option",{value:"EUR",children:"Euro ()"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),e.jsxs("select",{value:t.timezone,onChange:a=>s({...t,timezone:a.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",children:[e.jsx("option",{value:"Asia/Kolkata",children:"Asia/Kolkata"}),e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/New_York",children:"America/New_York"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Language"}),e.jsxs("select",{value:t.language,onChange:a=>s({...t,language:a.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"hi",children:"Hindi"}),e.jsx("option",{value:"ta",children:"Tamil"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Description"}),e.jsx("textarea",{value:t.description,onChange:a=>s({...t,description:a.target.value}),rows:3,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none"})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{className:"btn-primary",children:"Save Settings"})})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Store Themes"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:r.map(a=>e.jsxs("div",{className:`border-2 rounded-lg p-4 ${a.active?"border-brand-primary":"border-gray-200"}`,children:[e.jsx("img",{src:a.preview,alt:a.name,className:"w-full h-32 object-cover rounded mb-3"}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:a.name}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${a.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:a.active?"Active":"Inactive"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:a.active?"Customize":"Activate"})]})]},a.id))})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Domain Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Domain"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:t.domain,onChange:a=>s({...t,domain:a.target.value}),className:"flex-1 rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none"}),e.jsx("button",{className:"btn-secondary",children:"Update"})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-blue-600",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Domain Configuration"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Make sure to update your DNS settings to point to our servers."})]})]})})]})]})]})}function E8(){const[t,s]=b.useState(!1),[r,a]=b.useState({impressions:0,clicks:0,ctr:0,conversions:0}),[n,i]=b.useState([]),[l,o]=b.useState(!0),[c,d]=b.useState(""),p=(()=>{if(typeof window<"u"){const g=window.location.hostname;if(g==="thenefol.com"||g==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();b.useEffect(()=>{f()},[]);const f=async()=>{try{o(!0),d("");const[g,x,h]=await Promise.all([fetch(`${p}/api/google/connection-status`),fetch(`${p}/api/google/analytics`),fetch(`${p}/api/google/campaigns`)]);if(g.ok){const m=await g.json();s(m.connected||!1)}if(x.ok){const m=await x.json();a(m)}if(h.ok){const m=await h.json();i(m.campaigns||[])}}catch(g){console.error("Failed to load Google data:",g),d("Failed to load Google data")}finally{o(!1)}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Google & YouTube"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage Google Ads and YouTube campaigns"})]}),e.jsx("button",{onClick:()=>s(!t),className:t?"btn-secondary":"btn-primary",children:t?"Disconnect":"Connect Google"})]}),c&&e.jsx("div",{className:"metric-card bg-red-50 border-red-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-red-600",children:c}),e.jsx("button",{onClick:f,className:"ml-auto text-red-600 hover:text-red-800 underline",children:"Retry"})]})}),l&&!c&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[...Array(4)].map((g,x)=>e.jsxs("div",{className:"metric-card animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded"})]},x))}),e.jsx("div",{className:"metric-card animate-pulse",children:e.jsx("div",{className:"h-64 bg-gray-200 rounded"})})]}),t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"Y"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"YouTube Channel"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Nefol Skincare"})]})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:"Connected"})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"G"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Google Ads"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Nefol Campaigns"})]})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:"Connected"})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{title:"Impressions",value:r.impressions.toLocaleString(),icon:""},{title:"Clicks",value:r.clicks.toLocaleString(),icon:""},{title:"CTR",value:`${r.ctr}%`,icon:""},{title:"Conversions",value:r.conversions.toString(),icon:""}].map((g,x)=>e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:g.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.value})]}),e.jsx("div",{className:"text-2xl",children:g.icon})]})},x))}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Campaigns"}),e.jsx("button",{className:"btn-primary",children:"Create Campaign"})]}),e.jsx("div",{className:"space-y-4",children:n.length>0?n.map((g,x)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:g.name}),e.jsx("p",{className:"text-sm text-gray-600",children:g.platform})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${g.status==="active"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:g.status}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["",g.spent.toLocaleString()," / ",g.budget.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[g.clicks.toLocaleString()," clicks"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Edit"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"View"})]})]})]})},x)):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No campaigns available"})})]})]}):e.jsxs("div",{className:"metric-card text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Connect Google Services"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Connect your Google Ads and YouTube accounts to manage campaigns and track performance."}),e.jsx("button",{onClick:()=>s(!0),className:"btn-primary",children:"Connect Google Account"})]})]})}function A8(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState(""),d=(()=>{if(typeof window<"u"){const x=window.location.hostname;if(x==="thenefol.com"||x==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();b.useEffect(()=>{(async()=>{try{i(!0),o("");const[h,m]=await Promise.all([fetch(`${d}/api/forms`),fetch(`${d}/api/forms/submissions`)]);if(h.ok){const j=await h.json();a(j.forms||[])}else console.error("Failed to fetch forms"),a([]);if(m.ok){const j=await m.json();s(j.submissions||[])}else console.error("Failed to fetch submissions"),s([])}catch(h){console.error("Error fetching data:",h),o("Failed to load forms data"),a([]),s([])}finally{i(!1)}})()},[]);const[u,p]=b.useState("forms"),f=x=>{switch(x){case"contact":return"";case"newsletter":return"";case"feedback":return"";case"survey":return"";default:return""}},g=x=>x==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800";return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Forms"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Create and manage contact forms and surveys"})]}),e.jsx("button",{className:"btn-primary",children:"Create Form"})]}),l&&e.jsx("div",{className:"metric-card bg-red-50 border-red-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-red-600",children:l}),e.jsx("button",{onClick:()=>window.location.reload(),className:"ml-auto text-red-600 hover:text-red-800 underline",children:"Retry"})]})}),n&&!l&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[...Array(4)].map((x,h)=>e.jsxs("div",{className:"metric-card animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded"})]},h))}),e.jsx("div",{className:"metric-card animate-pulse",children:e.jsx("div",{className:"h-64 bg-gray-200 rounded"})})]}),!n&&!l&&e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"forms",name:"Forms",count:r.length},{id:"submissions",name:"Submissions",count:r.reduce((x,h)=>x+h.submissions,0)},{id:"create",name:"Create New",count:0}].map(x=>e.jsxs("button",{onClick:()=>p(x.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${u===x.id?"border-brand-primary text-brand-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[x.name," (",x.count,")"]},x.id))})}),!n&&!l&&u==="forms"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{title:"Total Forms",value:r.length,icon:""},{title:"Active",value:r.filter(x=>x.status==="active").length,icon:""},{title:"Total Submissions",value:r.reduce((x,h)=>x+h.submissions,0),icon:""},{title:"Avg. Submissions",value:r.length>0?Math.round(r.reduce((x,h)=>x+h.submissions,0)/r.length):0,icon:""}].map((x,h)=>e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:x.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.value})]}),e.jsx("div",{className:"text-2xl",children:x.icon})]})},h))}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"border-b border-gray-200 text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 pr-4",children:"Form"}),e.jsx("th",{className:"py-3 pr-4",children:"Type"}),e.jsx("th",{className:"py-3 pr-4",children:"Status"}),e.jsx("th",{className:"py-3 pr-4",children:"Submissions"}),e.jsx("th",{className:"py-3 pr-4",children:"Created"}),e.jsx("th",{className:"py-3 pr-4",children:"Actions"})]})}),e.jsx("tbody",{children:r.map(x=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:f(x.type)}),e.jsx("span",{className:"font-medium text-gray-900",children:x.name})]})}),e.jsx("td",{className:"py-3 pr-4",children:e.jsx("span",{className:"capitalize text-gray-600",children:x.type})}),e.jsx("td",{className:"py-3 pr-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${g(x.status)}`,children:x.status})}),e.jsx("td",{className:"py-3 pr-4 font-semibold",children:x.submissions}),e.jsx("td",{className:"py-3 pr-4 text-gray-600",children:new Date(x.createdAt).toLocaleDateString()}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Edit"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"View"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Submissions"})]})})]},x.id))})]})})})]}),!n&&!l&&u==="submissions"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Submissions"}),e.jsx("button",{className:"btn-secondary",children:"Export All"})]}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"space-y-4",children:t.length>0?t.map((x,h)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:x.name}),e.jsx("span",{className:"text-gray-500",children:""}),e.jsx("span",{className:"text-sm text-gray-600",children:x.email})]}),e.jsx("p",{className:"text-gray-700 mb-2",children:x.message}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Via ",x.form,"  ",new Date(x.submittedAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"Reply"}),e.jsx("button",{className:"btn-secondary text-xs px-2 py-1",children:"View"})]})]})},h)):e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No form submissions available"})})})})]}),!n&&!l&&u==="create"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create New Form"}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Form Name"}),e.jsx("input",{type:"text",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",placeholder:"Contact Form"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Form Type"}),e.jsxs("select",{className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-brand-primary focus:outline-none",children:[e.jsx("option",{value:"contact",children:"Contact"}),e.jsx("option",{value:"newsletter",children:"Newsletter"}),e.jsx("option",{value:"feedback",children:"Feedback"}),e.jsx("option",{value:"survey",children:"Survey"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Form Fields"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Name (required)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Email (required)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Message"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Phone Number"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",className:"btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Create Form"})]})]})]})})]})}const F8=()=>{const{notify:t}=hr(),[s,r]=b.useState([]),[a,n]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState(null),[d,u]=b.useState(""),[p,f]=b.useState("all"),[g,x]=b.useState(!1),[h,m]=b.useState(null);b.useEffect(()=>{j()},[]);const j=async()=>{try{x(!0);const P=(()=>{if(typeof window<"u"){const L=window.location.hostname;if(L==="thenefol.com"||L==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),H=await fetch(`${P}/invoices`);if(H.ok){const L=await H.json(),O=Array.isArray(L)?L.filter(W=>W&&typeof W=="object"&&W.invoiceNumber&&W.customerName&&W.customerEmail):[];r(O)}}catch(R){console.error("Failed to load invoices:",R),r([])}finally{x(!1)}},v=s.filter(R=>{var L,O,W;const P=((L=R.invoiceNumber)==null?void 0:L.toLowerCase().includes(d.toLowerCase()))||!1||((O=R.customerName)==null?void 0:O.toLowerCase().includes(d.toLowerCase()))||!1||((W=R.customerEmail)==null?void 0:W.toLowerCase().includes(d.toLowerCase()))||!1,H=p==="all"||R.status===p;return P&&H}),N=R=>{switch(R){case"paid":return"bg-green-100 text-green-800";case"sent":return"bg-blue-100 text-blue-800";case"overdue":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},S=async R=>{x(!0);try{const P=await fetch("/api/invoices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(P.ok){const H=await P.json();r([...s,H]),n(!1),t("success","Invoice created")}}catch(P){console.error("Error creating invoice:",P),t("error","Failed to create invoice")}finally{x(!1)}},A=async R=>{if(o){x(!0);try{const P=await fetch(`/api/invoices/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(P.ok){const H=await P.json();r(s.map(L=>L.id===o.id?H:L)),l(!1),c(null),t("success","Invoice updated")}}catch(P){console.error("Error updating invoice:",P),t("error","Failed to update invoice")}finally{x(!1)}}},T=async R=>{if(R){x(!0);try{const H=(()=>{if(typeof window<"u"){const O=window.location.hostname;if(O==="thenefol.com"||O==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();(await fetch(`${H}/invoices/${R}`,{method:"DELETE"})).ok&&(r(s.filter(O=>O.id!==R)),t("success","Invoice deleted"))}catch(P){console.error("Error deleting invoice:",P),t("error","Failed to delete invoice")}finally{x(!1)}}},k=async R=>{x(!0);try{const H=(()=>{if(typeof window<"u"){const O=window.location.hostname;if(O==="thenefol.com"||O==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();(await fetch(`${H}/invoices/${R}/send`,{method:"POST"})).ok&&(r(s.map(O=>O.id===R?{...O,status:"sent"}:O)),t("success","Invoice sent"))}catch(P){console.error("Error sending invoice:",P),t("error","Failed to send invoice")}finally{x(!1)}},_=s.reduce((R,P)=>R+P.total,0),y=s.filter(R=>R.status==="paid").reduce((R,P)=>R+P.total,0),w=s.filter(R=>R.status==="overdue").reduce((R,P)=>R+P.total,0);return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Invoices"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage customer invoices and billing"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(bn,{to:"/admin/invoice-settings",className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Invoice Settings"]}),e.jsxs("button",{onClick:()=>n(!0),className:"btn-primary",children:[e.jsx("span",{className:"text-lg mr-2",children:""}),"Create Invoice"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Invoices"}),e.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:s.length})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-brand-primary",children:["$",_.toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Paid Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",y.toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overdue Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["$",w.toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})})]}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search invoices...",value:d,onChange:R=>u(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsxs("select",{value:p,onChange:R=>f(R.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Invoice #"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Customer"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Order ID"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Amount"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Due Date"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:v.map(R=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx(bn,{to:`/admin/invoices/${R.id}`,className:"text-brand-primary hover:underline font-medium",children:R.invoiceNumber||"N/A"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:R.customerName||"N/A"}),e.jsx("p",{className:"text-sm text-gray-500",children:R.customerEmail||"N/A"})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(bn,{to:`/admin/orders/${R.orderId}`,className:"text-brand-primary hover:underline",children:R.orderId||"N/A"})}),e.jsxs("td",{className:"py-3 px-4 font-medium",children:["$",(R.total||0).toFixed(2)]}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N(R.status||"draft")}`,children:(R.status||"draft").charAt(0).toUpperCase()+(R.status||"draft").slice(1)})}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:R.dueDate||"N/A"}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{c(R),l(!0)},className:"text-brand-secondary hover:text-brand-primary",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),R.status==="draft"&&e.jsx("button",{onClick:()=>k(R.id),className:"text-blue-600 hover:text-blue-800",title:"Send Invoice",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})}),e.jsx("button",{onClick:()=>m(R.id),className:"text-red-600 hover:text-red-800",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},R.id))})]})})}),a&&e.jsx(P8,{onClose:()=>n(!1),onSubmit:S,loading:g}),i&&o&&e.jsx(D8,{invoice:o,onClose:()=>{l(!1),c(null)},onSubmit:A,loading:g}),e.jsx(za,{open:!!h,onClose:()=>m(null),onConfirm:()=>{h&&T(h)},title:"Delete this invoice?",description:"This action cannot be undone.",confirmText:"Delete"})]})},P8=({onClose:t,onSubmit:s,loading:r})=>{const[a,n]=b.useState({customerName:"",customerEmail:"",orderId:"",dueDate:"",items:[{id:`item-${Date.now()}`,productName:"",quantity:1,price:0,total:0}]}),i=l=>{l.preventDefault();const o=a.items.reduce((u,p)=>u+p.quantity*p.price,0),c=o*.1,d={...a,amount:o,tax:c,total:o+c,status:"draft",invoiceNumber:`INV-${Date.now()}`,createdAt:new Date().toISOString()};s(d)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Create Invoice"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),e.jsx("input",{type:"text",required:!0,value:a.customerName,onChange:l=>n({...a,customerName:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Email"}),e.jsx("input",{type:"email",required:!0,value:a.customerEmail,onChange:l=>n({...a,customerEmail:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order ID"}),e.jsx("input",{type:"text",required:!0,value:a.orderId,onChange:l=>n({...a,orderId:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",required:!0,value:a.dueDate,onChange:l=>n({...a,dueDate:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Items"}),a.items.map((l,o)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Product Name",value:l.productName,onChange:c=>{const d=[...a.items];d[o].productName=c.target.value,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsx("div",{children:e.jsx("input",{type:"number",placeholder:"Quantity",min:"1",value:l.quantity,onChange:c=>{const d=[...a.items];d[o].quantity=parseInt(c.target.value)||1,d[o].total=d[o].quantity*d[o].price,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsx("div",{children:e.jsx("input",{type:"number",placeholder:"Price",min:"0",step:"0.01",value:l.price,onChange:c=>{const d=[...a.items];d[o].price=parseFloat(c.target.value)||0,d[o].total=d[o].quantity*d[o].price,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})})]},o)),e.jsx("button",{type:"button",onClick:()=>n({...a,items:[...a.items,{id:`item-${Date.now()}`,productName:"",quantity:1,price:0,total:0}]}),className:"text-brand-secondary hover:text-brand-primary",children:"+ Add Item"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r,className:"btn-primary",children:r?"Creating...":"Create Invoice"})]})]})]})})},D8=({invoice:t,onClose:s,onSubmit:r,loading:a})=>{const[n,i]=b.useState({customerName:t.customerName,customerEmail:t.customerEmail,orderId:t.orderId,dueDate:t.dueDate,status:t.status,items:t.items}),l=o=>{o.preventDefault();const c=n.items.reduce((p,f)=>p+f.quantity*f.price,0),d=c*.1,u={...n,amount:c,tax:d,total:c+d};r(u)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Edit Invoice"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),e.jsx("input",{type:"text",required:!0,value:n.customerName,onChange:o=>i({...n,customerName:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Email"}),e.jsx("input",{type:"email",required:!0,value:n.customerEmail,onChange:o=>i({...n,customerEmail:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order ID"}),e.jsx("input",{type:"text",required:!0,value:n.orderId,onChange:o=>i({...n,orderId:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",required:!0,value:n.dueDate,onChange:o=>i({...n,dueDate:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:n.status,onChange:o=>i({...n,status:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"btn-primary",children:a?"Updating...":"Update Invoice"})]})]})]})})},R8=()=>{const[t,s]=b.useState({companyDetails:{companyName:"Nefol",companyAddress:"",companyPhone:"7355384939",companyEmail:"info@nefol.com",gstNumber:"",panNumber:"",bankName:"",accountNumber:"",ifscCode:""},colors:{primaryStart:"#667eea",primaryEnd:"#764ba2",accentStart:"#667eea",accentEnd:"#764ba2"},tax:{rate:18,type:"IGST"},terms:"Thank you for doing business with us.",signatureText:"Authorized Signatory",currency:""}),[r,a]=b.useState(!1),[n,i]=b.useState("idle"),[l,o]=b.useState(!1),[c,d]=b.useState("company"),[u,p]=b.useState(!1),[f,g]=b.useState(!1),[x,h]=b.useState(!1),[m,j]=b.useState(null),[v,N]=b.useState(null);b.useEffect(()=>{S()},[]);const S=async()=>{try{const O=(()=>{if(typeof window<"u"){const D=window.location.hostname;if(D==="thenefol.com"||D==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),W=await fetch(`${O}/invoice-settings/company-details`);if(W.ok){const D=await W.json();D&&Object.keys(D).length>0&&s(F=>({...F,companyDetails:{companyName:D.companyName||F.companyDetails.companyName||"",companyAddress:D.companyAddress||F.companyDetails.companyAddress||"",companyPhone:D.companyPhone||F.companyDetails.companyPhone||"",companyEmail:D.companyEmail||F.companyDetails.companyEmail||"",gstNumber:D.gstNumber||F.companyDetails.gstNumber||"",panNumber:D.panNumber||F.companyDetails.panNumber||"",bankName:D.bankName||F.companyDetails.bankName||"",accountNumber:D.accountNumber||F.companyDetails.accountNumber||"",ifscCode:D.ifscCode||F.companyDetails.ifscCode||""}}))}const Q=await fetch(`${O}/invoice-settings/all`);if(Q.ok){const D=await Q.json();if(D){if(s(F=>({...F,...D.colors&&{colors:D.colors},...D.tax&&{tax:D.tax},...D.terms!==void 0&&{terms:D.terms||""},...D.signatureText!==void 0&&{signatureText:D.signatureText||""},...D.currency!==void 0&&{currency:D.currency||""},...D.companyDetails&&{companyDetails:{companyName:D.companyDetails.companyName||F.companyDetails.companyName||"",companyAddress:D.companyDetails.companyAddress||F.companyDetails.companyAddress||"",companyPhone:D.companyDetails.companyPhone||F.companyDetails.companyPhone||"",companyEmail:D.companyDetails.companyEmail||F.companyDetails.companyEmail||"",gstNumber:D.companyDetails.gstNumber||F.companyDetails.gstNumber||"",panNumber:D.companyDetails.panNumber||F.companyDetails.panNumber||"",bankName:D.companyDetails.bankName||F.companyDetails.bankName||"",accountNumber:D.companyDetails.accountNumber||F.companyDetails.accountNumber||"",ifscCode:D.companyDetails.ifscCode||F.companyDetails.ifscCode||""}},...D.logoUrl!==void 0&&{logoUrl:D.logoUrl||void 0},...D.signatoryPhotoUrl!==void 0&&{signatoryPhotoUrl:D.signatoryPhotoUrl||void 0}})),D.logoUrl){const F=D.logoUrl.startsWith("http")?D.logoUrl:`${O}${D.logoUrl}`;j(F)}if(D.signatoryPhotoUrl){const F=D.signatoryPhotoUrl.startsWith("http")?D.signatoryPhotoUrl:`${O}${D.signatoryPhotoUrl}`;N(F)}}}}catch(L){console.error("Failed to load settings:",L)}},A=async()=>{a(!0),i("idle");try{const O=(()=>{if(typeof window<"u"){const W=window.location.hostname;if(W==="thenefol.com"||W==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();await fetch(`${O}/invoice-settings/company-details`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t.companyDetails)}),await fetch(`${O}/invoice-settings/all`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,logoUrl:t.logoUrl,signatoryPhotoUrl:t.signatoryPhotoUrl})}),i("success"),setTimeout(()=>i("idle"),3e3)}catch(L){console.error("Failed to save settings:",L),i("error"),setTimeout(()=>i("idle"),3e3)}finally{a(!1)}},T=(L,O,W)=>{s(Q=>{const D={...Q};return L==="companyDetails"||L==="colors"||L==="tax"?D[L]={...Q[L],[O]:W}:D[O]=W,D})},k=(L,O)=>{s(W=>({...W,[L]:O}))},_=()=>({background:`linear-gradient(135deg, ${t.colors.primaryStart} 0%, ${t.colors.primaryEnd} 100%)`,color:"white",padding:"20px",borderRadius:"8px",marginBottom:"20px"}),y=()=>{if(typeof window<"u"){const L=window.location.hostname;if(L==="thenefol.com"||L==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"},w=async L=>{var W;const O=(W=L.target.files)==null?void 0:W[0];if(O){if(!O.type.startsWith("image/")){alert("Please select an image file");return}if(O.size>5*1024*1024){alert("Image size must be less than 5MB");return}try{g(!0);const Q=y(),D=await Dr(O,Q),F=D.replace(/^https?:\/\/[^/]+/,"");s(V=>({...V,logoUrl:F})),j(D)}catch(Q){console.error("Failed to upload logo:",Q),alert("Failed to upload logo. Please try again.")}finally{g(!1)}}},R=async L=>{var W;const O=(W=L.target.files)==null?void 0:W[0];if(O){if(!O.type.startsWith("image/")){alert("Please select an image file");return}if(O.size>5*1024*1024){alert("Image size must be less than 5MB");return}try{h(!0);const Q=y(),D=await Dr(O,Q),F=D.replace(/^https?:\/\/[^/]+/,"");s(V=>({...V,signatoryPhotoUrl:F})),N(D)}catch(Q){console.error("Failed to upload signatory photo:",Q),alert("Failed to upload signatory photo. Please try again.")}finally{h(!1)}}},P=()=>{s(L=>({...L,logoUrl:void 0})),j(null)},H=()=>{s(L=>({...L,signatoryPhotoUrl:void 0})),N(null)};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Invoice Settings"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Customize your invoice design and details"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>p(!0),className:"btn-secondary flex items-center gap-2",children:[e.jsx(Kn,{className:"w-5 h-5"}),"Upload Images"]}),e.jsxs("button",{onClick:()=>o(!l),className:"btn-secondary flex items-center gap-2",children:[e.jsx(ot,{className:"w-5 h-5"}),l?"Hide":"Show"," Preview"]}),e.jsxs("button",{onClick:A,disabled:r,className:"btn-primary flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),r?"Saving...":"Save All Settings"]})]})]}),n==="success"&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg",children:" All settings saved successfully!"}),n==="error"&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:" Failed to save settings. Please try again."}),e.jsx("div",{className:"flex gap-2 border-b",style:{borderColor:"var(--arctic-blue-light)"},children:["Company","Design","Tax","Terms"].map((L,O)=>e.jsx("button",{onClick:()=>d(L.toLowerCase().replace("tax","tax").replace("terms","terms").replace("company","company").replace("design","design")),className:`px-6 py-3 font-medium transition-colors ${c===(L==="Company"?"company":L==="Design"?"design":L==="Tax"?"tax":"terms")?"border-b-2":""}`,style:c===(L==="Company"?"company":L==="Design"?"design":L==="Tax"?"tax":"terms")?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:L},L))}),e.jsxs("div",{className:"space-y-6",children:[c==="company"&&e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Sb,{className:"w-6 h-6 text-brand-primary"}),e.jsx("h2",{className:"text-xl font-bold text-brand-primary",children:"Company Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Company Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.companyDetails.companyName||"",onChange:L=>T("companyDetails","companyName",L.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",value:t.companyDetails.companyPhone||"",onChange:L=>T("companyDetails","companyPhone",L.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:t.companyDetails.companyEmail||"",onChange:L=>T("companyDetails","companyEmail",L.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST Number"}),e.jsx("input",{type:"text",value:t.companyDetails.gstNumber||"",onChange:L=>T("companyDetails","gstNumber",L.target.value),placeholder:"29ABCDE1234F1Z5",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PAN Number"}),e.jsx("input",{type:"text",value:t.companyDetails.panNumber||"",onChange:L=>T("companyDetails","panNumber",L.target.value),placeholder:"ABCDE1234F",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Complete Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{rows:4,value:t.companyDetails.companyAddress||"",onChange:L=>T("companyDetails","companyAddress",L.target.value),placeholder:"Enter complete company address",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Banking Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Name"}),e.jsx("input",{type:"text",value:t.companyDetails.bankName||"",onChange:L=>T("companyDetails","bankName",L.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Number"}),e.jsx("input",{type:"text",value:t.companyDetails.accountNumber||"",onChange:L=>T("companyDetails","accountNumber",L.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IFSC Code"}),e.jsx("input",{type:"text",value:t.companyDetails.ifscCode||"",onChange:L=>T("companyDetails","ifscCode",L.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]})]})]}),c==="design"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Gu,{className:"w-6 h-6 text-brand-primary"}),e.jsx("h2",{className:"text-xl font-bold text-brand-primary",children:"Color Customization"})]}),e.jsxs("div",{style:_(),className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Invoice Header Preview"}),e.jsx("p",{children:"This is how your invoice header will look"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Gradient Start"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"color",value:t.colors.primaryStart,onChange:L=>T("colors","primaryStart",L.target.value),className:"w-20 h-10 rounded border border-gray-300"}),e.jsx("input",{type:"text",value:t.colors.primaryStart,onChange:L=>T("colors","primaryStart",L.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Gradient End"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"color",value:t.colors.primaryEnd,onChange:L=>T("colors","primaryEnd",L.target.value),className:"w-20 h-10 rounded border border-gray-300"}),e.jsx("input",{type:"text",value:t.colors.primaryEnd,onChange:L=>T("colors","primaryEnd",L.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency Symbol"}),e.jsx("input",{type:"text",value:t.currency||"",onChange:L=>k("currency",L.target.value),placeholder:"",maxLength:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Quick Color Presets"}),e.jsx("div",{className:"flex gap-3 flex-wrap",children:[{name:"Arctic Blue",start:"#667eea",end:"#764ba2"},{name:"Ocean Blue",start:"#2193b0",end:"#6dd5ed"},{name:"Purple",start:"#9b59b6",end:"#e74c3c"},{name:"Green",start:"#11998e",end:"#38ef7d"},{name:"Orange",start:"#f12711",end:"#f5af19"},{name:"Pink",start:"#ec008c",end:"#fc6767"}].map(L=>e.jsx("button",{onClick:()=>{T("colors","primaryStart",L.start),T("colors","primaryEnd",L.end)},className:"px-4 py-2 rounded-lg border border-gray-300 hover:border-brand-primary transition-colors",style:{background:`linear-gradient(135deg, ${L.start} 0%, ${L.end} 100%)`,color:"white"},children:L.name},L.name))})]})]})}),c==="tax"&&e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(j4,{className:"w-6 h-6 text-brand-primary"}),e.jsx("h2",{className:"text-xl font-bold text-brand-primary",children:"Tax Settings"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Rate (%)"}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx("input",{type:"range",min:"0",max:"28",step:"0.5",value:t.tax.rate,onChange:L=>T("tax","rate",parseFloat(L.target.value)),className:"flex-1"}),e.jsxs("span",{className:"font-bold text-brand-primary text-lg w-20 text-right",children:[t.tax.rate,"%"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Type"}),e.jsxs("select",{value:t.tax.type,onChange:L=>T("tax","type",L.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"IGST",children:"IGST (Inter-State)"}),e.jsx("option",{value:"CGST+SGST",children:"CGST + SGST (Intra-State)"})]})]})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Tax Calculation:"}),e.jsx("p",{className:"text-sm text-blue-700",children:t.tax.type==="IGST"?`Your invoices will show ${t.tax.rate}% IGST (Integrated GST) for inter-state sales.`:`Your invoices will show ${t.tax.rate/2}% CGST and ${t.tax.rate/2}% SGST for intra-state sales.`})]})]}),c==="terms"&&e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(gs,{className:"w-6 h-6 text-brand-primary"}),e.jsx("h2",{className:"text-xl font-bold text-brand-primary",children:"Terms & Signature"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Terms and Conditions"}),e.jsx("textarea",{rows:6,value:t.terms||"",onChange:L=>k("terms",L.target.value),placeholder:"Enter your terms and conditions...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Signature Text"}),e.jsx("input",{type:"text",value:t.signatureText||"",onChange:L=>k("signatureText",L.target.value),placeholder:"Authorized Signatory",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Preview:"}),e.jsx("p",{className:"text-gray-700 mb-4",children:t.terms}),e.jsxs("div",{className:"text-gray-600",children:[e.jsxs("div",{children:["For: ",t.companyDetails.companyName||"Your Company"]}),e.jsx("div",{className:"mt-2",children:t.signatureText})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:A,disabled:r,className:"btn-primary px-6 py-3 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),r?"Saving...":"Save All Settings"]})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Upload Invoice Images"}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx(Zt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Company Logo"}),e.jsxs("div",{className:"space-y-4",children:[m?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:m,alt:"Logo preview",className:"max-w-full h-32 object-contain border border-gray-200 rounded-lg p-2 bg-gray-50"}),e.jsx("button",{onClick:P,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:e.jsx(Zt,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(Kn,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No logo uploaded"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"image/*",onChange:w,disabled:f,className:"hidden",id:"logo-upload"}),e.jsxs("label",{htmlFor:"logo-upload",className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg cursor-pointer transition-colors ${f?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-brand-primary text-white hover:bg-brand-secondary"}`,children:[e.jsx(Bn,{className:"w-4 h-4"}),f?"Uploading...":m?"Change Logo":"Upload Logo"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Recommended: PNG or JPG, max 5MB. Transparent background preferred."})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Authorized Signatory Photo"}),e.jsxs("div",{className:"space-y-4",children:[v?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:v,alt:"Signatory preview",className:"max-w-full h-48 object-contain border border-gray-200 rounded-lg p-2 bg-gray-50"}),e.jsx("button",{onClick:H,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:e.jsx(Zt,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(Kn,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No signatory photo uploaded"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"image/*",onChange:R,disabled:x,className:"hidden",id:"signatory-upload"}),e.jsxs("label",{htmlFor:"signatory-upload",className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg cursor-pointer transition-colors ${x?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-brand-primary text-white hover:bg-brand-secondary"}`,children:[e.jsx(Bn,{className:"w-4 h-4"}),x?"Uploading...":v?"Change Photo":"Upload Photo"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Recommended: PNG or JPG, max 5MB. Clear signature or photo preferred."})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>p(!1),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"}),e.jsxs("button",{onClick:async()=>{await A(),p(!1)},disabled:r,className:"btn-primary px-6 py-2 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),"Save Images"]})]})]})})]})},L8=()=>{const{notify:t}=hr(),[s,r]=b.useState([]),[a,n]=b.useState(!1),[i,l]=b.useState(""),[o,c]=b.useState("all"),[d,u]=b.useState("all"),[p,f]=b.useState(!1),[g,x]=b.useState(new Set),[h,m]=b.useState(""),[j,v]=b.useState(null),N=[0,5,12,18,28],A=(()=>{if(typeof window<"u"){const D=window.location.hostname;if(D==="thenefol.com"||D==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();b.useEffect(()=>{T();const D=Ye.subscribe("product_updated",V=>{console.log(" Product updated in Tax page:",V),T()}),F=Ye.subscribe("products_updated",V=>{console.log(" Products updated in Tax page:",V),T()});return()=>{D&&D(),F&&F()}},[]);const T=async()=>{try{n(!0);const D=await fetch(`${A}/api/products?_=${Date.now()}`,{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(!D.ok)throw new Error(`HTTP error! status: ${D.status}`);const V=(await D.json()).map(te=>{const I=te.details||{},U=I["GST %"]||I.gstPercent||I.gst||"0",z=parseFloat(U)||0;return{...te,currentGSTRate:z,isEditing:!1,tempGSTRate:z.toString()}});r(V)}catch(D){console.error("Failed to load products:",D),t("error","Failed to load products")}finally{n(!1)}},k=s.filter(D=>{var I;const F=D.title.toLowerCase().includes(i.toLowerCase())||D.slug.toLowerCase().includes(i.toLowerCase())||(((I=D.details)==null?void 0:I.sku)||"").toLowerCase().includes(i.toLowerCase()),V=o==="all"||D.category===o;let te=!0;if(d==="no-gst")te=D.currentGSTRate===0;else if(d!=="all"){const U=parseFloat(d);te=D.currentGSTRate===U}return F&&V&&te}),_=Array.from(new Set(s.map(D=>D.category).filter(Boolean))),y=D=>{r(s.map(F=>F.id===D?{...F,isEditing:!0,tempGSTRate:F.currentGSTRate.toString()}:{...F,isEditing:!1}))},w=D=>{r(s.map(F=>F.id===D?{...F,isEditing:!1,tempGSTRate:F.currentGSTRate.toString()}:F))},R=(D,F)=>{r(s.map(V=>V.id===D?{...V,tempGSTRate:F}:V))},P=async D=>{const F=s.find(te=>te.id===D);if(!F)return;const V=parseFloat(F.tempGSTRate);if(isNaN(V)||V<0||V>100){t("error","Invalid GST rate. Please enter a value between 0 and 100");return}try{if(v(D),!(await fetch(`${A}/api/products/${D}/gst`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({gstRate:V})})).ok)throw new Error("Failed to update GST rate");r(s.map(I=>I.id===D?{...I,currentGSTRate:V,isEditing:!1,tempGSTRate:V.toString()}:I)),t("success",`GST rate updated to ${V}% for ${F.title}`)}catch(te){console.error("Failed to save GST rate:",te),t("error","Failed to save GST rate")}finally{v(null)}},H=D=>{const F=new Set(g);F.has(D)?F.delete(D):F.add(D),x(F)},L=()=>{g.size===k.length?x(new Set):x(new Set(k.map(D=>D.id)))},O=async()=>{if(g.size===0){t("error","Please select at least one product");return}if(!h||h==="custom"){t("error","Please select or enter a valid GST rate");return}const D=parseFloat(h);if(isNaN(D)||D<0||D>100){t("error","Invalid GST rate. Please enter a value between 0 and 100");return}try{n(!0);const F=Array.from(g).map(I=>({productId:I,gstRate:D})),V=await fetch(`${A}/api/products/bulk-update-gst`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:F})});if(!V.ok)throw new Error("Failed to bulk update GST rates");const te=await V.json();r(s.map(I=>g.has(I.id)?{...I,currentGSTRate:D,tempGSTRate:D.toString()}:I)),x(new Set),f(!1),m(""),t("success",`GST rate updated to ${D}% for ${te.updated} products`)}catch(F){console.error("Failed to bulk update GST rates:",F),t("error","Failed to bulk update GST rates")}finally{n(!1)}},W=async(D,F)=>{const V=s.find(te=>te.id===D);if(V)try{if(v(D),!(await fetch(`${A}/api/products/${D}/gst`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({gstRate:F})})).ok)throw new Error("Failed to update GST rate");r(s.map(I=>I.id===D?{...I,currentGSTRate:F,isEditing:!1,tempGSTRate:F.toString()}:I)),t("success",`GST rate set to ${F}% for ${V.title}`)}catch(te){console.error("Failed to update GST rate:",te),t("error","Failed to update GST rate")}finally{v(null)}},Q={total:s.length,withGST:s.filter(D=>D.currentGSTRate>0).length,noGST:s.filter(D=>D.currentGSTRate===0).length,byRate:N.reduce((D,F)=>(D[F]=s.filter(V=>V.currentGSTRate===F).length,D),{})};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Tax Management (GST)"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage GST rates for all products according to Indian GST law"})]}),e.jsx("div",{className:"flex gap-3",children:p?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{f(!1),x(new Set),m("")},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel Bulk Edit"}),e.jsxs("button",{onClick:O,disabled:g.size===0||!h||a,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:["Save Bulk Update (",g.size," products)"]})]}):e.jsxs("button",{onClick:()=>f(!0),className:"btn-primary",children:[e.jsx("span",{className:"text-lg mr-2",children:""}),"Bulk Edit GST Rates"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Products"}),e.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:Q.total})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"0% GST"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:Q.byRate[0]||0})]})})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"5% GST"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:Q.byRate[5]||0})]})})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"12% GST"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:Q.byRate[12]||0})]})})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"18% GST"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Q.byRate[18]||0})]})})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"28% GST"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:Q.byRate[28]||0})]})})})]}),p&&e.jsxs("div",{className:"metric-card bg-yellow-50 border-2 border-yellow-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Bulk Edit Mode - ",g.size," product(s) selected"]}),e.jsx("button",{onClick:L,className:"text-sm text-brand-primary hover:underline",children:g.size===k.length?"Deselect All":"Select All"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Set GST Rate (%):"}),e.jsxs("select",{value:h,onChange:D=>m(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"",children:"Select GST Rate"}),N.map(D=>e.jsxs("option",{value:D,children:[D,"% (Standard Indian GST)"]},D)),e.jsx("option",{value:"custom",children:"Custom Rate"})]}),h==="custom"||h&&!N.includes(parseFloat(h)||0)?e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",placeholder:"Enter custom GST rate",value:h==="custom"?"":h,onChange:D=>m(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary w-48",autoFocus:!0}):null]})]}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search products by name, slug, or SKU...",value:i,onChange:D=>l(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsxs("select",{value:o,onChange:D=>c(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"all",children:"All Categories"}),_.map(D=>e.jsx("option",{value:D,children:D},D))]}),e.jsxs("select",{value:d,onChange:D=>u(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"all",children:"All GST Rates"}),e.jsx("option",{value:"no-gst",children:"No GST (0%)"}),N.filter(D=>D>0).map(D=>e.jsxs("option",{value:D.toString(),children:[D,"% GST"]},D))]})]})}),e.jsx("div",{className:"metric-card",children:a&&s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading products..."})]}):k.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"No products found"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[p&&e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 w-12",children:e.jsx("input",{type:"checkbox",checked:g.size===k.length&&k.length>0,onChange:L,className:"rounded border-gray-300"})}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Product"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"SKU"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"HSN Code"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Category"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Current GST"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:k.map(D=>{var F,V;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[p&&e.jsx("td",{className:"py-3 px-4",children:e.jsx("input",{type:"checkbox",checked:g.has(D.id),onChange:()=>H(D.id),className:"rounded border-gray-300"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[D.list_image&&e.jsx("img",{src:D.list_image.startsWith("http")?D.list_image:`${A}${D.list_image}`,alt:D.title,className:"w-12 h-12 object-cover rounded",onError:te=>{te.target.style.display="none"}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:D.title}),e.jsx("div",{className:"text-sm text-gray-500",children:D.slug})]})]})}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:((F=D.details)==null?void 0:F.sku)||"-"}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:((V=D.details)==null?void 0:V.hsn)||"-"}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:D.category||"-"}),e.jsx("td",{className:"py-3 px-4",children:D.isEditing?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:D.tempGSTRate,onChange:te=>R(D.id,te.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-brand-secondary",autoFocus:!0}),e.jsx("span",{className:"text-gray-600",children:"%"}),e.jsx("button",{onClick:()=>P(D.id),disabled:j===D.id,className:"text-green-600 hover:text-green-800 disabled:opacity-50",title:"Save",children:j===D.id?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600"}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("button",{onClick:()=>w(D.id),className:"text-red-600 hover:text-red-800",title:"Cancel",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:`font-medium px-2 py-1 rounded text-sm ${D.currentGSTRate===0?"bg-green-100 text-green-800":D.currentGSTRate===5?"bg-orange-100 text-orange-800":D.currentGSTRate===12?"bg-yellow-100 text-yellow-800":D.currentGSTRate===18?"bg-purple-100 text-purple-800":D.currentGSTRate===28?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:[D.currentGSTRate,"%"]})})}),e.jsx("td",{className:"py-3 px-4",children:D.isEditing?e.jsx("div",{className:"text-sm text-gray-500",children:"Editing..."}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>y(D.id),className:"text-brand-secondary hover:text-brand-primary",title:"Edit GST Rate",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("div",{className:"flex gap-1",children:N.map(te=>e.jsxs("button",{onClick:()=>W(D.id,te),disabled:j===D.id||D.currentGSTRate===te,className:`text-xs px-2 py-1 rounded ${D.currentGSTRate===te?"bg-brand-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"} disabled:opacity-50`,title:`Quick set to ${te}%`,children:[te,"%"]},te))})]})})]},D.id)})})]})})}),e.jsxs("div",{className:"metric-card bg-blue-50 border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:" Indian GST Law Information"}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"0% GST:"})," Essential items, unprocessed food, etc."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"5% GST:"})," Packaged food items, medicines, etc."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"12% GST:"})," Processed food, computers, mobile phones, etc."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"18% GST:"})," Most goods and services, cosmetics, etc."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"28% GST:"})," Luxury items, automobiles, etc."]}),e.jsx("p",{className:"mt-2 text-xs text-gray-600",children:"Note: You can also set custom GST rates as per your business requirements."})]})]})]})},O8=()=>{const{notify:t}=hr(),[s,r]=b.useState([]),[a,n]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState(null),[d,u]=b.useState(""),[p,f]=b.useState("all"),[g,x]=b.useState(!1),[h,m]=b.useState(null);b.useEffect(()=>{j()},[]);const j=async()=>{try{x(!0);const L=(()=>{if(typeof window<"u"){const W=window.location.hostname;if(W==="thenefol.com"||W==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),O=await fetch(`${L}/api/returns`,{headers:{"x-user-role":"admin","x-user-permissions":"returns:read"}});if(O.ok){const W=await O.json();r(Array.isArray(W)?W:(W==null?void 0:W.data)||[])}}catch(H){console.error("Failed to load returns:",H)}finally{x(!1)}},v=s.filter(H=>{const L=H.returnNumber.toLowerCase().includes(d.toLowerCase())||H.customerName.toLowerCase().includes(d.toLowerCase())||H.customerEmail.toLowerCase().includes(d.toLowerCase())||H.orderId.toLowerCase().includes(d.toLowerCase()),O=p==="all"||H.status===p;return L&&O}),N=H=>{switch(H){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"processing":return"bg-blue-100 text-blue-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},S=async H=>{x(!0);try{const O=(()=>{if(typeof window<"u"){const D=window.location.hostname;if(D==="thenefol.com"||D==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),W={order_id:H.orderId,items:H.items||[],reason:H.reason||""},Q=await fetch(`${O}/api/returns`,{method:"POST",headers:{"Content-Type":"application/json","x-user-role":"admin","x-user-permissions":"returns:create"},body:JSON.stringify(W)});if(Q.ok){const D=await Q.json();r([...s,(D==null?void 0:D.data)||D]),n(!1),t("success","Return created")}}catch(L){console.error("Error creating return:",L),t("error","Failed to create return")}finally{x(!1)}},A=async H=>{if(o){x(!0);try{const L=await fetch(`/api/returns/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(H)});if(L.ok){const O=await L.json();r(s.map(W=>W.id===o.id?O:W)),l(!1),c(null),t("success","Return updated")}}catch(L){console.error("Error updating return:",L),t("error","Failed to update return")}finally{x(!1)}}},T=async H=>{if(H){x(!0);try{const O=(()=>{if(typeof window<"u"){const Q=window.location.hostname;if(Q==="thenefol.com"||Q==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();(await fetch(`${O}/api/returns/${H}`,{method:"DELETE"})).ok&&(r(s.filter(Q=>Q.id!==H)),t("success","Return deleted"))}catch(L){console.error("Error deleting return:",L),t("error","Failed to delete return")}finally{x(!1)}}},k=async(H,L)=>{x(!0);try{const W=(()=>{if(typeof window<"u"){const D=window.location.hostname;if(D==="thenefol.com"||D==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();(await fetch(`${W}/api/returns/${H}/status`,{method:"PUT",headers:{"Content-Type":"application/json","x-user-role":"admin","x-user-permissions":"returns:update"},body:JSON.stringify({status:L})})).ok&&r(s.map(D=>D.id===H?{...D,status:L,updatedAt:new Date().toISOString()}:D))}catch(O){console.error("Error updating return status:",O)}finally{x(!1)}},_=async H=>{var L;try{const W=(()=>{if(typeof window<"u"){const F=window.location.hostname;if(F==="thenefol.com"||F==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),Q=await fetch(`${W}/api/returns/${H}/label`,{method:"POST",headers:{"x-user-role":"admin","x-user-permissions":"returns:update"}}),D=await Q.json();if(!Q.ok)throw new Error((D==null?void 0:D.error)||"Failed to generate label");alert(`Return Label: ${((L=D==null?void 0:D.data)==null?void 0:L.label_url)||(D==null?void 0:D.label_url)}`)}catch(O){alert((O==null?void 0:O.message)||"Failed to generate label")}},y=s.length,w=s.filter(H=>H.status==="pending").length,R=s.reduce((H,L)=>H+L.refundAmount,0),P=y>0?R/y:0;return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Returns Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Process customer returns and refunds"})]}),e.jsxs("button",{onClick:()=>n(!0),className:"btn-primary",children:[e.jsx("span",{className:"text-lg mr-2",children:""}),"Process Return"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Total Returns"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--arctic-blue-primary-dark)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:y})]}),e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:"var(--arctic-blue-light)"},children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Pending Returns"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"#D97706",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:w})]}),e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:"#FEF3C7"},children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Total Refunds"}),e.jsxs("p",{className:"text-2xl font-light",style:{color:"#DC2626",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:["",R.toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:"#FEE2E2"},children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Avg Refund"}),e.jsxs("p",{className:"text-2xl font-light",style:{color:"var(--arctic-blue-primary-dark)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:["",P.toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:"var(--arctic-blue-light)"},children:e.jsx("span",{className:"text-2xl",children:""})})]})})]}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search returns...",value:d,onChange:H=>u(H.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsxs("select",{value:p,onChange:H=>f(H.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Return #"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Order ID"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Customer"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Reason"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Amount"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Created"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:v.map(H=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx(bn,{to:`/admin/returns/${H.id}`,className:"text-brand-primary hover:underline font-medium",children:H.returnNumber})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(bn,{to:`/admin/orders/${H.orderId}`,className:"text-brand-primary hover:underline",children:H.orderId})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:H.customerName}),e.jsx("p",{className:"text-sm text-gray-500",children:H.customerEmail})]})}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:H.reason}),e.jsxs("td",{className:"py-3 px-4 font-medium",children:["$",H.refundAmount.toFixed(2)]}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N(H.status)}`,children:H.status.charAt(0).toUpperCase()+H.status.slice(1)})}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:H.createdAt}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{c(H),l(!0)},className:"text-brand-secondary hover:text-brand-primary",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),H.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>k(H.id,"approved"),className:"text-green-600 hover:text-green-800",title:"Approve",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("button",{onClick:()=>k(H.id,"rejected"),className:"text-red-600 hover:text-red-800",title:"Reject",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),H.status==="approved"&&e.jsx("button",{onClick:()=>k(H.id,"processing"),className:"text-blue-600 hover:text-blue-800",title:"Start Processing",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h8m-9-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),H.status==="processing"&&e.jsx("button",{onClick:()=>k(H.id,"completed"),className:"text-green-600 hover:text-green-800",title:"Mark Complete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("button",{onClick:()=>_(H.id),className:"text-indigo-600 hover:text-indigo-800",title:"Generate Return Label",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v8m4-4H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("button",{onClick:()=>m(H.id),className:"text-red-600 hover:text-red-800",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},H.id))})]})})}),e.jsx(za,{open:!!h,onClose:()=>m(null),onConfirm:()=>{h&&T(h)},title:"Delete this return?",description:"This action cannot be undone.",confirmText:"Delete"}),a&&e.jsx(I8,{onClose:()=>n(!1),onSubmit:S,loading:g}),i&&o&&e.jsx(M8,{returnItem:o,onClose:()=>{l(!1),c(null)},onSubmit:A,loading:g})]})},I8=({onClose:t,onSubmit:s,loading:r})=>{const[a,n]=b.useState({orderId:"",customerName:"",customerEmail:"",reason:"",notes:"",items:[{productName:"",quantity:1,reason:"",condition:"new",refundAmount:0}]}),i=l=>{l.preventDefault();const o=a.items.reduce((d,u)=>d+u.refundAmount,0),c={...a,returnNumber:`RET-${Date.now()}`,status:"pending",totalAmount:o,refundAmount:o,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),items:a.items.map((d,u)=>({...d,id:`item-${Date.now()}-${u}`}))};s(c)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Process Return"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order ID"}),e.jsx("input",{type:"text",required:!0,value:a.orderId,onChange:l=>n({...a,orderId:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),e.jsx("input",{type:"text",required:!0,value:a.customerName,onChange:l=>n({...a,customerName:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Email"}),e.jsx("input",{type:"email",required:!0,value:a.customerEmail,onChange:l=>n({...a,customerEmail:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason"}),e.jsxs("select",{required:!0,value:a.reason,onChange:l=>n({...a,reason:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"",children:"Select reason"}),e.jsx("option",{value:"Product defect",children:"Product defect"}),e.jsx("option",{value:"Wrong size",children:"Wrong size"}),e.jsx("option",{value:"Changed mind",children:"Changed mind"}),e.jsx("option",{value:"Not as described",children:"Not as described"}),e.jsx("option",{value:"Damaged in shipping",children:"Damaged in shipping"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:a.notes,onChange:l=>n({...a,notes:l.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Return Items"}),a.items.map((l,o)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4 p-4 border border-gray-200 rounded-lg",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Product Name",value:l.productName,onChange:c=>{const d=[...a.items];d[o].productName=c.target.value,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsx("div",{children:e.jsx("input",{type:"number",placeholder:"Quantity",min:"1",value:l.quantity,onChange:c=>{const d=[...a.items];d[o].quantity=parseInt(c.target.value)||1,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsx("div",{children:e.jsxs("select",{value:l.condition,onChange:c=>{const d=[...a.items];d[o].condition=c.target.value,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"used",children:"Used"}),e.jsx("option",{value:"damaged",children:"Damaged"})]})}),e.jsx("div",{children:e.jsx("input",{type:"number",placeholder:"Refund Amount",min:"0",step:"0.01",value:l.refundAmount,onChange:c=>{const d=[...a.items];d[o].refundAmount=parseFloat(c.target.value)||0,n({...a,items:d})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})})]},o)),e.jsx("button",{type:"button",onClick:()=>n({...a,items:[...a.items,{productName:"",quantity:1,reason:"",condition:"new",refundAmount:0}]}),className:"text-brand-secondary hover:text-brand-primary",children:"+ Add Item"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r,className:"btn-primary",children:r?"Processing...":"Process Return"})]})]})]})})},M8=({returnItem:t,onClose:s,onSubmit:r,loading:a})=>{const[n,i]=b.useState({status:t.status,notes:t.notes||""}),l=o=>{o.preventDefault();const c={...n,updatedAt:new Date().toISOString()};r(c)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Edit Return"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:n.status,onChange:o=>i({...n,status:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:n.notes,onChange:o=>i({...n,notes:o.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"btn-primary",children:a?"Updating...":"Update Return"})]})]})]})})},B8=()=>{const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!1),[l,o]=b.useState(!1),[c,d]=b.useState(null),[u,p]=b.useState(""),[f,g]=b.useState("all"),[x,h]=b.useState(!1),[m,j]=b.useState(null);b.useEffect(()=>{v()},[]);const v=async()=>{try{h(!0);const O=(()=>{if(typeof window<"u"){const F=window.location.hostname;if(F==="thenefol.com"||F==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),[W,Q,D]=await Promise.all([fetch(`${O}/api/payment-methods`),fetch(`${O}/api/payment-transactions`),fetch(`${O}/api/payment-report`)]);if(W.ok){const F=await W.json();s(F)}if(Q.ok){const F=await Q.json();a(F)}if(D.ok){const F=await D.json();j(F)}}catch(L){console.error("Failed to load payment data:",L)}finally{h(!1)}},N=r.filter(L=>{const O=(L.transactionId||"").toLowerCase().includes(u.toLowerCase())||(L.customerName||"").toLowerCase().includes(u.toLowerCase())||(L.orderId||"").toLowerCase().includes(u.toLowerCase()),W=f==="all"||L.status===f;return O&&W}),S=L=>{switch(L){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case"refunded":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},A=async L=>{h(!0);try{const O=await fetch("/api/payment-methods",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(O.ok){const W=await O.json();s([...t,W]),i(!1)}}catch(O){console.error("Error creating payment method:",O)}finally{h(!1)}},T=async L=>{if(c){h(!0);try{const O=await fetch(`/api/payment-methods/${c.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(O.ok){const W=await O.json();s(t.map(Q=>Q.id===c.id?W:Q)),o(!1),d(null)}}catch(O){console.error("Error updating payment method:",O)}finally{h(!1)}}},k=async L=>{if(confirm("Are you sure you want to delete this payment method?")){h(!0);try{(await fetch(`/api/payment-methods/${L}`,{method:"DELETE"})).ok&&s(t.filter(W=>W.id!==L))}catch(O){console.error("Error deleting payment method:",O)}finally{h(!1)}}},_=async L=>{h(!0);try{const O=t.find(Q=>Q.id===L);if(!O)return;(await fetch(`/api/payment-methods/${L}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!O.isActive})})).ok&&s(t.map(Q=>Q.id===L?{...Q,isActive:!Q.isActive}:Q))}catch(O){console.error("Error toggling payment method:",O)}finally{h(!1)}},y=t.filter(L=>L.isActive),w=r.length,R=r.filter(L=>L.status==="completed").length,P=r.reduce((L,O)=>L+O.amount,0),H=w>0?R/w*100:0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-brand-primary",children:"Payment Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure payment methods and monitor transactions"})]}),e.jsxs("button",{onClick:()=>i(!0),className:"btn-primary",children:[e.jsx("span",{className:"text-lg mr-2",children:""}),"Add Payment Method"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Methods"}),e.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:y.length})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Transactions"}),e.jsx("p",{className:"text-2xl font-bold text-brand-primary",children:w})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[H.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-brand-primary",children:["$",P.toFixed(2)]})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})]})})]}),m&&e.jsxs("div",{className:"metric-card",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Payment Report - ",m.period]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Transactions"}),e.jsx("span",{className:"font-semibold",children:m.totalTransactions})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Successful"}),e.jsx("span",{className:"font-semibold text-green-600",children:m.successfulTransactions})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Failed"}),e.jsx("span",{className:"font-semibold text-red-600",children:m.failedTransactions})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Average Amount"}),e.jsxs("span",{className:"font-semibold",children:["$",m.averageTransactionAmount.toFixed(2)]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Payment Method Breakdown"}),m.paymentMethodBreakdown.map((L,O)=>e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600",children:L.method}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-sm font-medium",children:["$",L.amount.toFixed(2)]}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",L.count,")"]})]})]},O))]})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Methods"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(L=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:L.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:L.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("p",{children:["Fee: ",L.processingFee,"%"]}),e.jsxs("p",{children:["Min: $",L.minimumAmount]}),e.jsxs("p",{children:["Max: $",L.maximumAmount]}),e.jsxs("p",{children:["Currencies: ",(L.supportedCurrencies||[]).join(", ")]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsx("button",{onClick:()=>{d(L),o(!0)},className:"text-brand-secondary hover:text-brand-primary",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>_(L.id),className:`${L.isActive?"text-orange-600 hover:text-orange-800":"text-green-600 hover:text-green-800"}`,title:L.isActive?"Deactivate":"Activate",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})}),e.jsx("button",{onClick:()=>k(L.id),className:"text-red-600 hover:text-red-800",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},L.id))})]}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search transactions...",value:u,onChange:L=>p(L.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})}),e.jsxs("select",{value:f,onChange:L=>g(L.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"refunded",children:"Refunded"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Transaction ID"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Order ID"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Customer"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Amount"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Method"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Created"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:N.map(L=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:L.transactionId}),e.jsx("td",{className:"py-3 px-4 text-brand-primary",children:L.orderId}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:L.customerName}),e.jsxs("td",{className:"py-3 px-4 font-medium",children:["$",L.amount.toFixed(2)," ",L.currency]}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:L.paymentMethod}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S(L.status)}`,children:L.status.charAt(0).toUpperCase()+L.status.slice(1)})}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:L.createdAt}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[L.status==="completed"&&e.jsx("button",{onClick:()=>{console.log("Process refund for",L.id)},className:"text-blue-600 hover:text-blue-800",title:"Process Refund",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})}),e.jsx("button",{onClick:()=>{console.log("View details for",L.id)},className:"text-brand-secondary hover:text-brand-primary",title:"View Details",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})})]},L.id))})]})})}),n&&e.jsx($8,{onClose:()=>i(!1),onSubmit:A,loading:x}),l&&c&&e.jsx(U8,{paymentMethod:c,onClose:()=>{o(!1),d(null)},onSubmit:T,loading:x})]})},$8=({onClose:t,onSubmit:s,loading:r})=>{const[a,n]=b.useState({name:"",type:"credit_card",processingFee:0,minimumAmount:1,maximumAmount:1e4,supportedCurrencies:["USD"],isActive:!0}),i=l=>{l.preventDefault();const o={...a,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};s(o)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Add Payment Method"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method Name"}),e.jsx("input",{type:"text",required:!0,value:a.name,onChange:l=>n({...a,name:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:a.type,onChange:l=>n({...a,type:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary",children:[e.jsx("option",{value:"credit_card",children:"Credit Card"}),e.jsx("option",{value:"debit_card",children:"Debit Card"}),e.jsx("option",{value:"paypal",children:"PayPal"}),e.jsx("option",{value:"stripe",children:"Stripe"}),e.jsx("option",{value:"razorpay",children:"Razorpay"}),e.jsx("option",{value:"cash_on_delivery",children:"Cash on Delivery"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Processing Fee (%)"}),e.jsx("input",{type:"number",required:!0,min:"0",step:"0.1",value:a.processingFee,onChange:l=>n({...a,processingFee:parseFloat(l.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Amount"}),e.jsx("input",{type:"number",required:!0,min:"0",value:a.minimumAmount,onChange:l=>n({...a,minimumAmount:parseFloat(l.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Amount"}),e.jsx("input",{type:"number",required:!0,min:"0",value:a.maximumAmount,onChange:l=>n({...a,maximumAmount:parseFloat(l.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:a.isActive,onChange:l=>n({...a,isActive:l.target.checked}),className:"h-4 w-4 text-brand-secondary focus:ring-brand-secondary border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r,className:"btn-primary",children:r?"Creating...":"Create Payment Method"})]})]})]})})},U8=({paymentMethod:t,onClose:s,onSubmit:r,loading:a})=>{const[n,i]=b.useState({name:t.name,processingFee:t.processingFee,minimumAmount:t.minimumAmount,maximumAmount:t.maximumAmount,isActive:t.isActive}),l=o=>{o.preventDefault();const c={...n,updatedAt:new Date().toISOString()};r(c)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-primary",children:"Edit Payment Method"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method Name"}),e.jsx("input",{type:"text",required:!0,value:n.name,onChange:o=>i({...n,name:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Processing Fee (%)"}),e.jsx("input",{type:"number",required:!0,min:"0",step:"0.1",value:n.processingFee,onChange:o=>i({...n,processingFee:parseFloat(o.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Amount"}),e.jsx("input",{type:"number",required:!0,min:"0",value:n.minimumAmount,onChange:o=>i({...n,minimumAmount:parseFloat(o.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Amount"}),e.jsx("input",{type:"number",required:!0,min:"0",value:n.maximumAmount,onChange:o=>i({...n,maximumAmount:parseFloat(o.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:n.isActive,onChange:o=>i({...n,isActive:o.target.checked}),className:"h-4 w-4 text-brand-secondary focus:ring-brand-secondary border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"btn-primary",children:a?"Updating...":"Update Payment Method"})]})]})]})})},z8=()=>{var u;const{user:t}=Bo(),{notify:s}=hr(),[r,a]=b.useState({currentPassword:"",newPassword:"",confirmNewPassword:""}),[n,i]=b.useState(!1),[l,o]=b.useState(null),c=p=>{const{name:f,value:g}=p.target;a(x=>({...x,[f]:g}))},d=async p=>{if(p.preventDefault(),o(null),r.newPassword.length<8){o("New password must be at least 8 characters long.");return}if(r.newPassword!==r.confirmNewPassword){o("New password and confirmation do not match.");return}i(!0);try{await Za.changePassword(r.currentPassword,r.newPassword,r.confirmNewPassword),s("success","Password updated successfully"),a({currentPassword:"",newPassword:"",confirmNewPassword:""})}catch(f){const g=(f==null?void 0:f.message)||"Failed to update password";o(g),s("error",g)}finally{i(!1)}};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Account Security"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Manage your admin credentials and keep your account secure."})]}),e.jsxs("div",{className:"grid gap-8 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow border border-gray-100 dark:border-gray-800 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Reset Password"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Enter your current password, then choose a strong new password. All other active sessions will be revoked automatically."}),e.jsxs("form",{className:"space-y-4",onSubmit:d,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Current Password"}),e.jsx("input",{type:"password",name:"currentPassword",value:r.currentPassword,onChange:c,required:!0,className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 px-3 py-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password"}),e.jsx("input",{type:"password",name:"newPassword",value:r.newPassword,onChange:c,required:!0,minLength:8,className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 px-3 py-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm New Password"}),e.jsx("input",{type:"password",name:"confirmNewPassword",value:r.confirmNewPassword,onChange:c,required:!0,className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 px-3 py-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),l&&e.jsx("div",{className:"rounded-lg bg-red-50 text-red-700 px-4 py-3 text-sm",children:l}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Updating...":"Update Password"})})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow border border-gray-100 dark:border-gray-800 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Account Details"}),e.jsxs("dl",{className:"mt-4 space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"Name"}),e.jsx("dd",{className:"font-medium text-gray-900 dark:text-white",children:t==null?void 0:t.name})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("dd",{className:"font-medium text-gray-900 dark:text-white",children:t==null?void 0:t.email})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"Role"}),e.jsx("dd",{className:"font-medium text-gray-900 dark:text-white",children:t==null?void 0:t.role})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"Permissions"}),e.jsx("dd",{className:"font-medium text-gray-900 dark:text-white",children:(u=t==null?void 0:t.permissions)!=null&&u.length?t.permissions.join(", "):"No permissions assigned"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 rounded-xl border border-blue-100 dark:border-blue-800 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100",children:"Security Tips"}),e.jsxs("ul",{className:"mt-4 text-sm text-blue-900/80 dark:text-blue-100/80 space-y-2",children:[e.jsx("li",{children:" Use a unique password that you dont reuse elsewhere."}),e.jsx("li",{children:" Update your password every few months."}),e.jsx("li",{children:" Log out from shared devices after use."})]})]})]})]})]})},W8=Pn();class V8{constructor(){Ca(this,"baseURL");this.baseURL=W8}async apiCall(s,r={}){try{const a=localStorage.getItem("admin_token"),n=await fetch(`${this.baseURL}${s}`,{...r,headers:{"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`},...r.headers}}),i=await n.json();return n.ok?{success:!0,data:i.data||i,message:i.message}:{success:!1,error:i.message||"API call failed"}}catch(a){return console.error("API call error:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async getUserProfiles(s=1,r=10,a=""){return this.apiCall(`/admin/users/profiles?page=${s}&limit=${r}&search=${a}`)}async getUserProfile(s){return this.apiCall(`/admin/users/profiles/${s}`)}async updateUserProfile(s,r){return this.apiCall(`/admin/users/profiles/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteUserProfile(s){return this.apiCall(`/admin/users/profiles/${s}`,{method:"DELETE"})}async getNotifications(s=1,r=10,a={}){const n=new URLSearchParams({page:s.toString(),limit:r.toString(),...a});return this.apiCall(`/admin/notifications?${n}`)}async createNotification(s){return this.apiCall("/admin/notifications",{method:"POST",body:JSON.stringify(s)})}async updateNotification(s,r){return this.apiCall(`/admin/notifications/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteNotification(s){return this.apiCall(`/admin/notifications/${s}`,{method:"DELETE"})}async sendNotification(s){return this.apiCall(`/admin/notifications/${s}/send`,{method:"POST"})}async getLoyaltyPrograms(){return this.apiCall("/admin/loyalty/programs")}async createLoyaltyProgram(s){return this.apiCall("/admin/loyalty/programs",{method:"POST",body:JSON.stringify(s)})}async updateLoyaltyProgram(s,r){return this.apiCall(`/admin/loyalty/programs/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteLoyaltyProgram(s){return this.apiCall(`/admin/loyalty/programs/${s}`,{method:"DELETE"})}async getLoyaltyTiers(){return this.apiCall("/admin/loyalty/tiers")}async getLoyaltyUsers(s=1,r=10){return this.apiCall(`/admin/loyalty/users?page=${s}&limit=${r}`)}async adjustUserPoints(s,r,a){return this.apiCall(`/admin/loyalty/users/${s}/adjust`,{method:"POST",body:JSON.stringify({points:r,reason:a})})}async getStaticPages(){return this.apiCall("/admin/static-pages")}async createStaticPage(s){return this.apiCall("/admin/static-pages",{method:"POST",body:JSON.stringify(s)})}async updateStaticPage(s,r){return this.apiCall(`/admin/static-pages/${s}`,{method:"PUT",body:JSON.stringify(r)})}async deleteStaticPage(s){return this.apiCall(`/admin/static-pages/${s}`,{method:"DELETE"})}async toggleStaticPageStatus(s,r){return this.apiCall(`/admin/static-pages/${s}/toggle`,{method:"PUT",body:JSON.stringify({is_active:r})})}async getCommunityPosts(s=1,r=10,a={}){const n=new URLSearchParams({page:s.toString(),limit:r.toString(),...a});return this.apiCall(`/admin/community/posts?${n}`)}async getCommunityComments(s=1,r=10,a={}){const n=new URLSearchParams({page:s.toString(),limit:r.toString(),...a});return this.apiCall(`/admin/community/comments?${n}`)}async updatePostStatus(s,r){return this.apiCall(`/admin/community/posts/${s}/status`,{method:"PUT",body:JSON.stringify({status:r})})}async updateCommentStatus(s,r){return this.apiCall(`/admin/community/comments/${s}/status`,{method:"PUT",body:JSON.stringify({status:r})})}async deletePost(s){return this.apiCall(`/admin/community/posts/${s}`,{method:"DELETE"})}async deleteComment(s){return this.apiCall(`/admin/community/comments/${s}`,{method:"DELETE"})}async getCartItems(s=1,r=10,a={}){const n=new URLSearchParams({page:s.toString(),limit:r.toString(),...a});return this.apiCall(`/admin/cart/items?${n}`)}async updateCartItemQuantity(s,r){return this.apiCall(`/admin/cart/items/${s}`,{method:"PUT",body:JSON.stringify({quantity:r})})}async removeCartItem(s){return this.apiCall(`/admin/cart/items/${s}`,{method:"DELETE"})}async getCheckoutSessions(s=1,r=10,a={}){const n=new URLSearchParams({page:s.toString(),limit:r.toString(),...a});return this.apiCall(`/admin/checkout/sessions?${n}`)}async updateSessionStatus(s,r){return this.apiCall(`/admin/checkout/sessions/${s}/status`,{method:"PUT",body:JSON.stringify({status:r})})}async getDashboardStats(){return this.apiCall("/admin/dashboard/stats")}async getUserAnalytics(s="30d"){return this.apiCall(`/admin/analytics/users?range=${s}`)}async getOrderAnalytics(s="30d"){return this.apiCall(`/admin/analytics/orders?range=${s}`)}async getRevenueAnalytics(s="30d"){return this.apiCall(`/admin/analytics/revenue?range=${s}`)}async subscribeToUpdates(s){console.log("Subscribing to real-time updates...")}async unsubscribeFromUpdates(){console.log("Unsubscribing from real-time updates...")}async bulkUpdateUserStatus(s,r){return this.apiCall("/admin/users/bulk-status",{method:"PUT",body:JSON.stringify({userIds:s,status:r})})}async bulkSendNotifications(s,r){return this.apiCall("/admin/notifications/bulk-send",{method:"POST",body:JSON.stringify({userIds:s,notificationData:r})})}async bulkDeletePosts(s){return this.apiCall("/admin/community/posts/bulk-delete",{method:"DELETE",body:JSON.stringify({postIds:s})})}async exportUserData(s="csv"){return this.apiCall(`/admin/users/export?format=${s}`)}async importUserData(s){const r=new FormData;return r.append("file",s),this.apiCall("/admin/users/import",{method:"POST",body:r,headers:{}})}async getSystemHealth(){return this.apiCall("/admin/system/health")}async getApiStatus(){return this.apiCall("/admin/system/api-status")}}const Wp=new V8;function H8(){const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(""),[l,o]=b.useState("all"),[c,d]=b.useState(null),[u,p]=b.useState(!1),[f,g]=b.useState(!1);b.useEffect(()=>{x()},[]);const x=async()=>{try{a(!0);const S=await Wp.getUserProfiles();S.success&&S.data?s(S.data.profiles||[]):(console.error("Failed to fetch user profiles:",S.error),s([]))}catch(S){console.error("Error fetching user profiles:",S),s([])}finally{a(!1)}},h=t.filter(S=>{const A=S.name.toLowerCase().includes(n.toLowerCase())||S.email.toLowerCase().includes(n.toLowerCase()),T=l==="all"||l==="verified"&&S.is_verified||l==="unverified"&&!S.is_verified;return A&&T}),m=S=>{d(S),p(!0)},j=S=>{d(S),g(!0)},v=async S=>{if(confirm("Are you sure you want to delete this user profile?"))try{(await fetch(`/api/admin/users/profiles/${S}`,{method:"DELETE"})).ok?s(t.filter(T=>T.id!==S)):alert("Failed to delete profile")}catch(A){console.error("Error deleting profile:",A),alert("Error deleting profile")}},N=async S=>{try{const A=await Wp.updateUserProfile(S.id,S);A.success?(s(t.map(T=>T.id===S.id?S:T)),p(!1),d(null)):alert("Failed to update profile: "+A.error)}catch(A){console.error("Error updating profile:",A),alert("Error updating profile")}};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"User Profiles Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage user profiles, preferences, and account settings"})]}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:n,onChange:S=>i(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("select",{value:l,onChange:S=>o(S.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Users"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"unverified",children:"Unverified"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(ot,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(xr,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Verified Users"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(S=>S.is_verified).length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(ni,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.reduce((S,A)=>S+A.total_orders,0)})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(xr,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Loyalty Points"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.reduce((S,A)=>S+A.loyalty_points,0)})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Orders"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Loyalty Points"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Member Since"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:h.map(S=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-full",src:S.profile_photo||"/default-avatar.png",alt:S.name})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:S.name}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",S.id]})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:S.email}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:S.phone})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${S.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:S.is_verified?"Verified":"Unverified"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:S.total_orders}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:S.loyalty_points}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(S.member_since).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>j(S),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(ot,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>m(S),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:e.jsx(mr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>v(S.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},S.id))})]})})}),u&&c&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Edit User Profile"}),e.jsxs("form",{onSubmit:S=>{S.preventDefault(),N(c)},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name"}),e.jsx("input",{type:"text",value:c.name,onChange:S=>d({...c,name:S.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),e.jsx("input",{type:"email",value:c.email,onChange:S=>d({...c,email:S.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Phone"}),e.jsx("input",{type:"tel",value:c.phone,onChange:S=>d({...c,phone:S.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Loyalty Points"}),e.jsx("input",{type:"number",value:c.loyalty_points,onChange:S=>d({...c,loyalty_points:parseInt(S.target.value)||0}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.is_verified,onChange:S=>d({...c,is_verified:S.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-900 dark:text-white",children:"Verified User"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Update Profile"})]})]})]})})}),f&&c&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"User Profile Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{className:"h-16 w-16 rounded-full",src:c.profile_photo||"/default-avatar.png",alt:c.name}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:c.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Member since ",new Date(c.member_since).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:c.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Phone"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:c.phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Orders"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:c.total_orders})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Loyalty Points"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:c.loyalty_points})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Address"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[c.address.street,", ",c.address.city,", ",c.address.state," ",c.address.zip]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Preferences"}),e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[e.jsxs("p",{children:["Theme: ",c.preferences.theme]}),e.jsxs("p",{children:["Notifications: ",c.preferences.notifications?"Enabled":"Disabled"]}),e.jsxs("p",{children:["Newsletter: ",c.preferences.newsletter?"Subscribed":"Not Subscribed"]})]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Close"})})]})})})]})}function G8(){const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(""),[l,o]=b.useState("all"),[c,d]=b.useState("all"),[u,p]=b.useState(null),[f,g]=b.useState(!1),[x,h]=b.useState(!1),[m,j]=b.useState(!1);b.useEffect(()=>{v()},[]);const v=async()=>{try{a(!0);const P=await fetch("/api/admin/notifications");if(P.ok){const H=await P.json();s(H.notifications||[])}else console.error("Failed to fetch notifications"),s([])}catch(P){console.error("Error fetching notifications:",P),s([])}finally{a(!1)}},N=t.filter(P=>{const H=P.title.toLowerCase().includes(n.toLowerCase())||P.user_name.toLowerCase().includes(n.toLowerCase())||P.message.toLowerCase().includes(n.toLowerCase()),L=l==="all"||P.type===l,O=c==="all"||P.status===c;return H&&L&&O}),S=async P=>{try{const H=await fetch("/api/admin/notifications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});if(H.ok){const L=await H.json();s([L,...t]),g(!1)}else alert("Failed to create notification")}catch(H){console.error("Error creating notification:",H),alert("Error creating notification")}},A=P=>{p(P),h(!0)},T=P=>{p(P),j(!0)},k=async P=>{if(confirm("Are you sure you want to delete this notification?"))try{(await fetch(`/api/admin/notifications/${P}`,{method:"DELETE"})).ok?s(t.filter(L=>L.id!==P)):alert("Failed to delete notification")}catch(H){console.error("Error deleting notification:",H),alert("Error deleting notification")}},_=async P=>{try{(await fetch(`/api/admin/notifications/${P}/send`,{method:"POST"})).ok?s(t.map(L=>L.id===P?{...L,status:"sent",sent_at:new Date().toISOString()}:L)):alert("Failed to send notification")}catch(H){console.error("Error sending notification:",H),alert("Error sending notification")}},y=P=>{switch(P){case"order":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"promotion":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"system":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";case"loyalty":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"affiliate":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},w=P=>{switch(P){case"sent":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"failed":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},R=P=>{switch(P){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"User Notifications Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage and send notifications to users"})]}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search notifications...",value:n,onChange:P=>i(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("select",{value:l,onChange:P=>o(P.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"order",children:"Order"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"system",children:"System"}),e.jsx("option",{value:"loyalty",children:"Loyalty"}),e.jsx("option",{value:"affiliate",children:"Affiliate"})]}),e.jsxs("select",{value:c,onChange:P=>d(P.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsxs("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500",children:[e.jsx(ra,{className:"h-4 w-4 inline mr-2"}),"Send Notification"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(Ra,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Notifications"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(ra,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Sent"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(P=>P.status==="sent").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(Mr,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(P=>P.status==="pending").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900 rounded-lg",children:e.jsx(ss,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Failed"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(P=>P.status==="failed").length})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Notification"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:N.map(P=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center",children:e.jsx(ga,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:P.user_name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:P.user_email})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:P.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:P.message})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y(P.type)}`,children:P.type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${R(P.priority)}`,children:P.priority})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(P.status)}`,children:P.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(P.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>T(P),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(ot,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>A(P),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:e.jsx(mr,{className:"h-4 w-4"})}),P.status==="pending"&&e.jsx("button",{onClick:()=>_(P.id),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:e.jsx(ra,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>k(P.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},P.id))})]})})}),f&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Send New Notification"}),e.jsxs("form",{onSubmit:P=>{P.preventDefault();const H=new FormData(P.target);S({user_id:parseInt(H.get("user_id")),title:H.get("title"),message:H.get("message"),type:H.get("type"),priority:H.get("priority"),status:"pending"})},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"User ID"}),e.jsx("input",{type:"number",name:"user_id",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Title"}),e.jsx("input",{type:"text",name:"title",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Message"}),e.jsx("textarea",{name:"message",rows:3,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Type"}),e.jsxs("select",{name:"type",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"order",children:"Order"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"system",children:"System"}),e.jsx("option",{value:"loyalty",children:"Loyalty"}),e.jsx("option",{value:"affiliate",children:"Affiliate"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Priority"}),e.jsxs("select",{name:"priority",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Send Notification"})]})]})]})})}),m&&u&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Notification Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"User"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[u.user_name," (",u.user_email,")"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Title"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:u.title})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Message"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:u.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Type"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y(u.type)}`,children:u.type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Priority"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${R(u.priority)}`,children:u.priority})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(u.status)}`,children:u.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Created"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(u.created_at).toLocaleString()})]}),u.sent_at&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Sent At"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(u.sent_at).toLocaleString()})]}),u.read_at&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Read At"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(u.read_at).toLocaleString()})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Close"})})]})})})]})}function q8(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState(!0),[c,d]=b.useState(""),[u,p]=b.useState("programs"),[f,g]=b.useState(null),[x,h]=b.useState(null),[m,j]=b.useState(!1),[v,N]=b.useState(!1);b.useEffect(()=>{S()},[]);const S=async()=>{try{o(!0);const[y,w,R]=await Promise.all([fetch("/api/admin/loyalty/programs"),fetch("/api/admin/loyalty/tiers"),fetch("/api/admin/loyalty/users")]);if(y.ok){const P=await y.json();s(P.programs||[])}if(w.ok){const P=await w.json();a(P.tiers||[])}if(R.ok){const P=await R.json();i(P.users||[])}}catch(y){console.error("Error fetching loyalty data:",y)}finally{o(!1)}},A=async y=>{try{const w=await fetch("/api/admin/loyalty/programs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(w.ok){const R=await w.json();s([R,...t]),j(!1)}else alert("Failed to create loyalty program")}catch(w){console.error("Error creating loyalty program:",w),alert("Error creating loyalty program")}},T=async y=>{if(confirm("Are you sure you want to delete this loyalty program?"))try{(await fetch(`/api/admin/loyalty/programs/${y}`,{method:"DELETE"})).ok?s(t.filter(R=>R.id!==y)):alert("Failed to delete loyalty program")}catch(w){console.error("Error deleting loyalty program:",w),alert("Error deleting loyalty program")}},k=async(y,w,R)=>{try{(await fetch(`/api/admin/loyalty/users/${y}/adjust`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({points:w,reason:R})})).ok?S():alert("Failed to adjust user points")}catch(P){console.error("Error adjusting user points:",P),alert("Error adjusting user points")}},_=n.filter(y=>y.user_name.toLowerCase().includes(c.toLowerCase())||y.user_email.toLowerCase().includes(c.toLowerCase()));return l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Loyalty Program Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage loyalty programs, tiers, and user points"})]}),e.jsx("div",{children:e.jsx("div",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"programs",label:"Loyalty Programs",icon:C0},{id:"tiers",label:"Tiers",icon:_f},{id:"users",label:"User Points",icon:Pt}].map(y=>e.jsxs("button",{onClick:()=>p(y.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm transition-colors ${u===y.id?"":"border-transparent"}`,style:u===y.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx(y.icon,{className:"h-4 w-4 mr-2"}),y.label]},y.id))})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(C0,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Programs"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(y=>y.is_active).length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(_f,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Loyalty Tiers"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(xr,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Points"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:n.reduce((y,w)=>y+w.total_points,0)})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(zt,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:n.filter(y=>y.total_points>0).length})]})]})})]}),u==="programs"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search loyalty programs...",value:c,onChange:y=>d(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("button",{onClick:()=>j(!0),className:"ml-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500",children:[e.jsx(C0,{className:"h-4 w-4 inline mr-2"}),"Create Program"]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Program"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Points Rate"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Min Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Expiry"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:y.name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:y.description})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[y.points_per_rupee," pts/"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["",y.min_order_amount]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[y.expiry_days," days"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:y.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{g(y),N(!0)},className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:e.jsx(mr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>T(y.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},y.id))})]})})})]}),u==="users"&&e.jsxs("div",{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:c,onChange:y=>d(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total Points"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Available Points"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Redeemed Points"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Tier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Next Tier"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:_.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:y.user_name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:y.user_email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:y.total_points}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:y.available_points}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:y.redeemed_points}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:y.tier})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[y.next_tier_points," pts"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:()=>{const w=prompt("Enter points to adjust (positive to add, negative to subtract):"),R=prompt("Enter reason for adjustment:");w&&R&&k(y.user_id,parseInt(w),R)},className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:e.jsx(mr,{className:"h-4 w-4"})})})]},y.user_id))})]})})})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Create Loyalty Program"}),e.jsxs("form",{onSubmit:y=>{y.preventDefault();const w=new FormData(y.target);A({name:w.get("name"),description:w.get("description"),points_per_rupee:parseFloat(w.get("points_per_rupee")),min_order_amount:parseFloat(w.get("min_order_amount")),max_points_per_order:parseFloat(w.get("max_points_per_order")),expiry_days:parseInt(w.get("expiry_days")),is_active:!0})},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Program Name"}),e.jsx("input",{type:"text",name:"name",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),e.jsx("textarea",{name:"description",rows:3,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Points per Rupee"}),e.jsx("input",{type:"number",step:"0.1",name:"points_per_rupee",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Minimum Order Amount"}),e.jsx("input",{type:"number",name:"min_order_amount",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Max Points per Order"}),e.jsx("input",{type:"number",name:"max_points_per_order",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Points Expiry (Days)"}),e.jsx("input",{type:"number",name:"expiry_days",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Create Program"})]})]})]})})})]})}function J8(){const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(""),[l,o]=b.useState("all"),[c,d]=b.useState(null),[u,p]=b.useState(!1),[f,g]=b.useState(!1),[x,h]=b.useState(!1);b.useEffect(()=>{m()},[]);const m=async()=>{try{a(!0);const T=await fetch("/api/admin/static-pages");if(T.ok){const k=await T.json();s(k.pages||[])}else console.error("Failed to fetch static pages"),s([])}catch(T){console.error("Error fetching static pages:",T),s([])}finally{a(!1)}},j=t.filter(T=>{const k=T.title.toLowerCase().includes(n.toLowerCase())||T.slug.toLowerCase().includes(n.toLowerCase())||T.content.toLowerCase().includes(n.toLowerCase()),_=l==="all"||T.page_type===l;return k&&_}),v=async(T,k)=>{try{(await fetch(`/api/admin/static-pages/${T}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)})).ok?(s(t.map(y=>y.id===T?{...y,...k}:y)),p(!1),d(null)):alert("Failed to update static page")}catch(_){console.error("Error updating static page:",_),alert("Error updating static page")}},N=async T=>{if(confirm("Are you sure you want to delete this static page?"))try{(await fetch(`/api/admin/static-pages/${T}`,{method:"DELETE"})).ok?s(t.filter(_=>_.id!==T)):alert("Failed to delete static page")}catch(k){console.error("Error deleting static page:",k),alert("Error deleting static page")}},S=async(T,k)=>{try{(await fetch(`/api/admin/static-pages/${T}/toggle`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!k})})).ok?s(t.map(y=>y.id===T?{...y,is_active:!k}:y)):alert("Failed to toggle page status")}catch(_){console.error("Error toggling page status:",_),alert("Error toggling page status")}},A=T=>{switch(T){case"about":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"faq":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"policy":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"terms":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"shipping":return"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200";case"refund":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"privacy":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";case"contact":return"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200";case"custom":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Static Pages Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage static pages like About Us, FAQ, Policies, etc."})]}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search pages...",value:n,onChange:T=>i(T.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("select",{value:l,onChange:T=>o(T.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"about",children:"About"}),e.jsx("option",{value:"faq",children:"FAQ"}),e.jsx("option",{value:"policy",children:"Policy"}),e.jsx("option",{value:"terms",children:"Terms"}),e.jsx("option",{value:"shipping",children:"Shipping"}),e.jsx("option",{value:"refund",children:"Refund"}),e.jsx("option",{value:"privacy",children:"Privacy"}),e.jsx("option",{value:"contact",children:"Contact"}),e.jsx("option",{value:"custom",children:"Custom"})]}),e.jsxs("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500",children:[e.jsx(gs,{className:"h-4 w-4 inline mr-2"}),"Create Page"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(gs,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Pages"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(Jn,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Pages"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(T=>T.is_active).length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(ws,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Policy Pages"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(T=>["policy","terms","privacy","shipping","refund"].includes(T.page_type)).length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(gs,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Custom Pages"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(T=>T.page_type==="custom").length})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Page"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Slug"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Last Updated"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:j.map(T=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:T.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:T.meta_description})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${A(T.page_type)}`,children:T.page_type})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["/",T.slug]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>S(T.id,T.is_active),className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full cursor-pointer ${T.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:T.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(T.updated_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{d(T),h(!0)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(ot,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{d(T),p(!0)},className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:e.jsx(mr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>N(T.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},T.id))})]})})}),u&&c&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-10 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Edit Static Page"}),e.jsxs("form",{onSubmit:T=>{T.preventDefault();const k=new FormData(T.target);v(c.id,{title:k.get("title"),slug:k.get("slug"),content:k.get("content"),meta_description:k.get("meta_description"),page_type:k.get("page_type"),is_active:k.get("is_active")==="on"})},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Page Title"}),e.jsx("input",{type:"text",name:"title",defaultValue:c.title,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Slug"}),e.jsx("input",{type:"text",name:"slug",defaultValue:c.slug,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Page Type"}),e.jsxs("select",{name:"page_type",defaultValue:c.page_type,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"about",children:"About"}),e.jsx("option",{value:"faq",children:"FAQ"}),e.jsx("option",{value:"policy",children:"Policy"}),e.jsx("option",{value:"terms",children:"Terms"}),e.jsx("option",{value:"shipping",children:"Shipping"}),e.jsx("option",{value:"refund",children:"Refund"}),e.jsx("option",{value:"privacy",children:"Privacy"}),e.jsx("option",{value:"contact",children:"Contact"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Meta Description"}),e.jsx("textarea",{name:"meta_description",rows:2,defaultValue:c.meta_description,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Content"}),e.jsx("textarea",{name:"content",rows:10,defaultValue:c.content,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",name:"is_active",defaultChecked:c.is_active,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-900 dark:text-white",children:"Active Page"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:[e.jsx(Ms,{className:"h-4 w-4 inline mr-2"}),"Update Page"]})]})]})]})})}),x&&c&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-10 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["Page Preview: ",c.title]}),e.jsxs("div",{className:"prose max-w-none dark:prose-invert",children:[e.jsx("h1",{children:c.title}),e.jsx("div",{dangerouslySetInnerHTML:{__html:c.content}})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Close Preview"})})]})})})]})}function K8(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState(""),[c,d]=b.useState("all"),[u,p]=b.useState("posts"),[f,g]=b.useState(null),[x,h]=b.useState(!1);b.useEffect(()=>{m()},[]);const m=async()=>{try{i(!0);const[_,y]=await Promise.all([fetch("/api/admin/community/posts"),fetch("/api/admin/community/comments")]);if(_.ok){const w=await _.json();s(w.posts||[])}if(y.ok){const w=await y.json();a(w.comments||[])}}catch(_){console.error("Error fetching community data:",_)}finally{i(!1)}},j=t.filter(_=>{const y=_.title.toLowerCase().includes(l.toLowerCase())||_.content.toLowerCase().includes(l.toLowerCase())||_.user_name.toLowerCase().includes(l.toLowerCase()),w=c==="all"||_.status===c;return y&&w}),v=r.filter(_=>{const y=_.content.toLowerCase().includes(l.toLowerCase())||_.user_name.toLowerCase().includes(l.toLowerCase()),w=c==="all"||_.status===c;return y&&w}),N=async(_,y)=>{try{(await fetch(`/api/admin/community/posts/${_}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:y})})).ok?s(t.map(R=>R.id===_?{...R,status:y}:R)):alert("Failed to update post status")}catch(w){console.error("Error updating post status:",w),alert("Error updating post status")}},S=async(_,y)=>{try{(await fetch(`/api/admin/community/comments/${_}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:y})})).ok?a(r.map(R=>R.id===_?{...R,status:y}:R)):alert("Failed to update comment status")}catch(w){console.error("Error updating comment status:",w),alert("Error updating comment status")}},A=async _=>{if(confirm("Are you sure you want to delete this post?"))try{(await fetch(`/api/admin/community/posts/${_}`,{method:"DELETE"})).ok?s(t.filter(w=>w.id!==_)):alert("Failed to delete post")}catch(y){console.error("Error deleting post:",y),alert("Error deleting post")}},T=async _=>{if(confirm("Are you sure you want to delete this comment?"))try{(await fetch(`/api/admin/community/comments/${_}`,{method:"DELETE"})).ok?a(r.filter(w=>w.id!==_)):alert("Failed to delete comment")}catch(y){console.error("Error deleting comment:",y),alert("Error deleting comment")}},k=_=>{switch(_){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"flagged":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Community Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage community posts, comments, and user interactions"})]}),e.jsx("div",{children:e.jsx("div",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"posts",label:"Posts",icon:fs},{id:"comments",label:"Comments",icon:Pt}].map(_=>e.jsxs("button",{onClick:()=>p(_.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm transition-colors ${u===_.id?"":"border-transparent"}`,style:u===_.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx(_.icon,{className:"h-4 w-4 mr-2"}),_.label]},_.id))})})}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search community content...",value:l,onChange:_=>o(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("select",{value:c,onChange:_=>d(_.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"flagged",children:"Flagged"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(fs,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Posts"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(Pt,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Comments"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(O2,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Flagged Content"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(_=>_.status==="flagged").length+r.filter(_=>_.status==="flagged").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Ui,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Likes"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.reduce((_,y)=>_+y.likes_count,0)+r.reduce((_,y)=>_+y.likes_count,0)})]})]})})]}),u==="posts"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Post"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Author"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Engagement"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:j.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:_.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:_.content}),_.tags.length>0&&e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:_.tags.slice(0,3).map((y,w)=>e.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:["#",y]},w))})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:_.user_name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:_.user_email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(Ui,{className:"h-4 w-4 mr-1"}),_.likes_count]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(fs,{className:"h-4 w-4 mr-1"}),_.comments_count]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k(_.status)}`,children:_.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(_.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{g(_),h(!0)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(ot,{className:"h-4 w-4"})}),_.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>N(_.id,"active"),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:e.jsx(Vt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>N(_.id,"rejected"),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Tf,{className:"h-4 w-4"})})]}),e.jsx("button",{onClick:()=>A(_.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},_.id))})]})})}),u==="comments"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Comment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Author"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Post ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Likes"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:v.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white truncate max-w-xs",children:_.content})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:_.user_name})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["#",_.post_id]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(Ui,{className:"h-4 w-4 mr-1"}),_.likes_count]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k(_.status)}`,children:_.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(_.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[_.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>S(_.id,"active"),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:e.jsx(Vt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>S(_.id,"rejected"),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Tf,{className:"h-4 w-4"})})]}),e.jsx("button",{onClick:()=>T(_.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},_.id))})]})})}),x&&f&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["Post Details: ",f.title]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Author"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[f.user_name," (",f.user_email,")"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k(f.status)}`,children:f.status})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Content"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 dark:bg-gray-700 rounded-md",children:e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:f.content})})]}),f.image_url&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Image"}),e.jsx("img",{src:f.image_url,alt:"Post image",className:"mt-1 max-w-xs rounded-md"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Likes"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:f.likes_count})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Comments"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:f.comments_count})]})]}),f.tags.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Tags"}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:f.tags.map((_,y)=>e.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:["#",_]},y))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Created"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(f.created_at).toLocaleString()})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Close"})})]})})})]})}function Ej({imageUrl:t,aspectRatio:s,onCrop:r,onCancel:a}){var P,H;const[n,i]=b.useState({x:0,y:0,width:0,height:0}),[l,o]=b.useState(!1),[c,d]=b.useState({x:0,y:0}),[u,p]=b.useState({width:0,height:0}),[f,g]=b.useState({width:0,height:0}),[x,h]=b.useState(null),m=b.useRef(null),j=b.useRef(null);b.useEffect(()=>{const L=new Image;L.crossOrigin="anonymous",L.onerror=O=>{console.error("Error loading image:",O);const W=new Image;W.onload=()=>{if(p({width:W.width,height:W.height}),m.current){const Q=m.current.clientWidth-40,D=m.current.clientHeight-40,F=Q/W.width,V=D/W.height,te=Math.min(F,V,1);g({width:W.width*te,height:W.height*te});const I=Math.min(W.width,W.height*s),U=I/s;i({x:(W.width-I)/2,y:(W.height-U)/2,width:I,height:U})}},W.onerror=()=>{console.error("Failed to load image even without CORS")},W.src=t},L.onload=()=>{if(p({width:L.width,height:L.height}),m.current){const O=m.current.clientWidth-40,W=m.current.clientHeight-40,Q=O/L.width,D=W/L.height,F=Math.min(Q,D,1);g({width:L.width*F,height:L.height*F});const V=Math.min(L.width,L.height*s),te=V/s;i({x:(L.width-V)/2,y:(L.height-te)/2,width:V,height:te})}},L.src=t},[t,s]);const v=()=>{if(!u.width||!f.width)return{x:0,y:0,width:0,height:0};const L=f.width/u.width;return{x:n.x*L,y:n.y*L,width:n.width*L,height:n.height*L}},N=L=>{if(!m.current)return;const O=L.target;if(O.classList.contains("resize-handle")){const V=O.getAttribute("data-handle");if(V){h(V),o(!0);const te=m.current.getBoundingClientRect(),I=f.width/u.width,U=(L.clientX-te.left-(te.width-f.width)/2)/I,z=(L.clientY-te.top-(te.height-f.height)/2)/I;d({x:U,y:z})}return}const W=m.current.getBoundingClientRect();v();const Q=f.width/u.width,D=(L.clientX-W.left-(W.width-f.width)/2)/Q,F=(L.clientY-W.top-(W.height-f.height)/2)/Q;D>=n.x&&D<=n.x+n.width&&F>=n.y&&F<=n.y+n.height&&(o(!0),d({x:D-n.x,y:F-n.y}))},S=L=>{if(!l||!m.current)return;const O=m.current.getBoundingClientRect(),W=f.width/u.width,Q=(L.clientX-O.left-(O.width-f.width)/2)/W,D=(L.clientY-O.top-(O.height-f.height)/2)/W;if(x){let F={...n};if(x==="se"){const V=Q-n.x,te=V/s;F={x:n.x,y:n.y,width:Math.min(V,u.width-n.x),height:Math.min(te,u.height-n.y)},F.y+F.height>u.height&&(F.height=u.height-F.y,F.width=F.height*s),F.x+F.width>u.width&&(F.width=u.width-F.x,F.height=F.width/s)}else if(x==="sw"){const V=n.x+n.width-Q,te=V/s;F={x:Math.max(0,Q),y:n.y,width:Math.min(V,n.x+n.width),height:Math.min(te,u.height-n.y)},F.y+F.height>u.height&&(F.height=u.height-F.y,F.width=F.height*s,F.x=n.x+n.width-F.width)}else if(x==="ne"){const V=Q-n.x,te=V/s;F={x:n.x,y:Math.max(0,n.y+n.height-te),width:Math.min(V,u.width-n.x),height:Math.min(te,n.y+n.height)},F.y<0&&(F.y=0,F.height=n.y+n.height,F.width=F.height*s)}else if(x==="nw"){const V=n.x+n.width-Q,te=V/s;F={x:Math.max(0,Q),y:Math.max(0,n.y+n.height-te),width:Math.min(V,n.x+n.width),height:Math.min(te,n.y+n.height)},F.y<0&&(F.y=0,F.height=n.y+n.height,F.width=F.height*s,F.x=n.x+n.width-F.width),F.x<0&&(F.x=0,F.width=n.x+n.width,F.height=F.width/s,F.y=n.y+n.height-F.height)}i(F)}else{const F=Math.max(0,Math.min(Q-c.x,u.width-n.width)),V=Math.max(0,Math.min(D-c.y,u.height-n.height));i(te=>({...te,x:F,y:V}))}},A=()=>{o(!1),h(null)},T=()=>{if(!n.width||!n.height||n.width<=0||n.height<=0){console.error("Invalid crop dimensions:",n),alert("Please wait for the image to load completely before cropping.");return}if(!u.width||!u.height){console.error("Image size not loaded yet"),alert("Please wait for the image to load completely before cropping.");return}const L=new Image;L.crossOrigin="anonymous",L.onerror=O=>{console.error("Error loading image for cropping:",O);const W=new Image;W.onload=()=>{try{const Q=document.createElement("canvas"),D=Q.getContext("2d");if(!D){console.error("Failed to get canvas context");return}Q.width=n.width,Q.height=n.height,D.drawImage(W,n.x,n.y,n.width,n.height,0,0,n.width,n.height),Q.toBlob(F=>{F?r(F):(console.error("Failed to create blob from canvas"),alert("Failed to crop image. Please try again."))},"image/jpeg",.95)}catch(Q){console.error("Error during crop:",Q),alert("Failed to crop image. Please try again.")}},W.onerror=()=>{console.error("Failed to load image even without CORS"),alert("Failed to load image for cropping. Please try again.")},W.src=t},L.onload=()=>{try{const O=document.createElement("canvas"),W=O.getContext("2d");if(!W){console.error("Failed to get canvas context");return}O.width=n.width,O.height=n.height,W.drawImage(L,n.x,n.y,n.width,n.height,0,0,n.width,n.height),O.toBlob(Q=>{Q?r(Q):(console.error("Failed to create blob from canvas"),alert("Failed to crop image. Please try again."))},"image/jpeg",.95)}catch(O){console.error("Error during crop:",O),alert("Failed to crop image. Please try again.")}},L.src=t},k=v(),_=((P=m.current)==null?void 0:P.clientWidth)||800,y=((H=m.current)==null?void 0:H.clientHeight)||600,w=(_-f.width)/2,R=(y-f.height)/2;return e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Crop Image (",s===1?"1:1":s===16/9?"16:9":s===4/5?"4:5":s===5/4?"5:4":s===4/3?"4:3":s.toFixed(2)+":1"," Aspect Ratio)"]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded transition-colors",children:e.jsx(Zt,{className:"w-5 h-5"})})]}),e.jsxs("div",{ref:m,className:"relative flex-1 overflow-hidden bg-gray-100 flex items-center justify-center",style:{minHeight:"400px",maxHeight:"70vh"},onMouseMove:S,onMouseUp:A,onMouseLeave:A,children:[e.jsx("img",{ref:j,src:t,alt:"Crop",className:"max-w-full max-h-full",style:{width:`${f.width}px`,height:`${f.height}px`,objectFit:"contain"},draggable:!1}),k.width>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"absolute border-2 border-blue-500 bg-blue-500/20 cursor-move",style:{left:`${w+k.x}px`,top:`${R+k.y}px`,width:`${k.width}px`,height:`${k.height}px`},onMouseDown:N,children:[e.jsx("div",{className:"absolute -top-1 -left-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-nw-resize resize-handle","data-handle":"nw"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-ne-resize resize-handle","data-handle":"ne"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-sw-resize resize-handle","data-handle":"sw"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-se-resize resize-handle","data-handle":"se"})]}),e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.jsxs("svg",{className:"w-full h-full",children:[e.jsx("defs",{children:e.jsxs("mask",{id:"crop-mask",children:[e.jsx("rect",{width:"100%",height:"100%",fill:"black"}),e.jsx("rect",{x:w+k.x,y:R+k.y,width:k.width,height:k.height,fill:"white"})]})}),e.jsx("rect",{width:"100%",height:"100%",fill:"black",fillOpacity:"0.5",mask:"url(#crop-mask)"})]})})]})]}),e.jsxs("div",{className:"p-4 border-t flex items-center justify-between relative z-10 bg-white",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Drag to move  Aspect ratio locked to ",s===1?"1:1":s===16/9?"16:9":s===4/5?"4:5":s===5/4?"5:4":s===4/3?"4:3":s.toFixed(2)+":1"]}),e.jsxs("div",{className:"flex gap-2 relative z-10",children:[e.jsx("button",{onClick:L=>{L.preventDefault(),L.stopPropagation(),a()},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",type:"button",children:"Cancel"}),e.jsxs("button",{onClick:L=>{L.preventDefault(),L.stopPropagation(),T()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 cursor-pointer",type:"button",disabled:!n.width||!n.height||n.width<=0||n.height<=0,children:[e.jsx(md,{className:"w-4 h-4"}),"Apply Crop"]})]})]})]})})}function Y8({videoUrl:t,aspectRatio:s=16/9,onCrop:r,onCancel:a}){var te,I;const[n,i]=b.useState({x:0,y:0,width:0,height:0}),[l,o]=b.useState(!1),[c,d]=b.useState({x:0,y:0}),[u,p]=b.useState({width:0,height:0}),[f,g]=b.useState({width:0,height:0}),[x,h]=b.useState(null),[m,j]=b.useState(!1),[v,N]=b.useState(0),[S,A]=b.useState(!1),T=b.useRef(null),k=b.useRef(null),_=b.useRef(null);b.useRef(null);const y=b.useRef([]);b.useEffect(()=>{const U=k.current;if(!U)return;const z=()=>{if(p({width:U.videoWidth,height:U.videoHeight}),T.current){const Y=T.current.clientWidth-40,K=T.current.clientHeight-40,ne=Y/U.videoWidth,q=K/U.videoHeight,re=Math.min(ne,q,1);g({width:U.videoWidth*re,height:U.videoHeight*re});const xe=Math.min(U.videoWidth,U.videoHeight*s),_e=xe/s;i({x:(U.videoWidth-xe)/2,y:(U.videoHeight-_e)/2,width:xe,height:_e})}};return U.addEventListener("loadedmetadata",z),U.load(),()=>{U.removeEventListener("loadedmetadata",z)}},[t,s]);const w=()=>{if(!u.width||!f.width)return{x:0,y:0,width:0,height:0};const U=f.width/u.width;return{x:n.x*U,y:n.y*U,width:n.width*U,height:n.height*U}},R=U=>{if(!T.current)return;const z=U.target;if(z.classList.contains("resize-handle")){const re=z.getAttribute("data-handle");if(re){h(re),o(!0);const xe=T.current.getBoundingClientRect(),_e=f.width/u.width,X=(U.clientX-xe.left-(xe.width-f.width)/2)/_e,Ae=(U.clientY-xe.top-(xe.height-f.height)/2)/_e;d({x:X,y:Ae})}return}const Y=T.current.getBoundingClientRect();w();const K=f.width/u.width,ne=(U.clientX-Y.left-(Y.width-f.width)/2)/K,q=(U.clientY-Y.top-(Y.height-f.height)/2)/K;ne>=n.x&&ne<=n.x+n.width&&q>=n.y&&q<=n.y+n.height&&(o(!0),d({x:ne-n.x,y:q-n.y}))},P=U=>{if(!l||!T.current)return;const z=T.current.getBoundingClientRect(),Y=f.width/u.width,K=(U.clientX-z.left-(z.width-f.width)/2)/Y,ne=(U.clientY-z.top-(z.height-f.height)/2)/Y;if(x){let q={...n};if(x==="se"){const re=K-n.x,xe=re/s;q={x:n.x,y:n.y,width:Math.min(re,u.width-n.x),height:Math.min(xe,u.height-n.y)},q.y+q.height>u.height&&(q.height=u.height-q.y,q.width=q.height*s),q.x+q.width>u.width&&(q.width=u.width-q.x,q.height=q.width/s)}else if(x==="sw"){const re=n.x+n.width-K,xe=re/s;q={x:Math.max(0,K),y:n.y,width:Math.min(re,n.x+n.width),height:Math.min(xe,u.height-n.y)},q.y+q.height>u.height&&(q.height=u.height-q.y,q.width=q.height*s,q.x=n.x+n.width-q.width)}else if(x==="ne"){const re=K-n.x,xe=re/s;q={x:n.x,y:Math.max(0,n.y+n.height-xe),width:Math.min(re,u.width-n.x),height:Math.min(xe,n.y+n.height)},q.y<0&&(q.y=0,q.height=n.y+n.height,q.width=q.height*s)}else if(x==="nw"){const re=n.x+n.width-K,xe=re/s;q={x:Math.max(0,K),y:Math.max(0,n.y+n.height-xe),width:Math.min(re,n.x+n.width),height:Math.min(xe,n.y+n.height)},q.y<0&&(q.y=0,q.height=n.y+n.height,q.width=q.height*s,q.x=n.x+n.width-q.width),q.x<0&&(q.x=0,q.width=n.x+n.width,q.height=q.width/s,q.y=n.y+n.height-q.height)}i(q)}else{const q=Math.max(0,Math.min(K-c.x,u.width-n.width)),re=Math.max(0,Math.min(ne-c.y,u.height-n.height));i(xe=>({...xe,x:q,y:re}))}},H=()=>{o(!1),h(null)},L=()=>{const U=k.current;U&&(U.paused?(U.play(),A(!0)):(U.pause(),A(!1)))},O=async()=>{const U=k.current,z=_.current;if(!(!U||!z)){if(!n.width||!n.height||n.width<=0||n.height<=0){alert("Please wait for the video to load completely before cropping.");return}j(!0),N(0);try{z.width=n.width,z.height=n.height;const Y=z.getContext("2d");if(!Y)throw new Error("Failed to get canvas context");U.currentTime=0,await new Promise(Ae=>{U.onseeked=Ae});const K=U.duration,ne=30,q=1/ne,re=z.captureStream(ne),xe=new MediaRecorder(re,{mimeType:"video/webm;codecs=vp9",videoBitsPerSecond:25e5});y.current=[],xe.ondataavailable=Ae=>{Ae.data.size>0&&y.current.push(Ae.data)},xe.onstop=()=>{const Ae=new Blob(y.current,{type:"video/webm"});r(Ae),j(!1),N(0)},xe.start();let _e=0;const X=async()=>{if(_e>=K){xe.stop();return}U.currentTime=_e,await new Promise(Ie=>{U.onseeked=Ie}),Y.drawImage(U,n.x,n.y,n.width,n.height,0,0,n.width,n.height);const Ae=_e/K*100;N(Ae),_e+=q,requestAnimationFrame(X)};await X()}catch(Y){console.error("Error during video crop:",Y),alert("Failed to crop video. Please try again."),j(!1),N(0)}}},W=w(),Q=((te=T.current)==null?void 0:te.clientWidth)||800,D=((I=T.current)==null?void 0:I.clientHeight)||600,F=(Q-f.width)/2,V=(D-f.height)/2;return e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Crop Video (",s===1?"1:1":s===16/9?"16:9":s===4/5?"4:5":s===5/4?"5:4":s===4/3?"4:3":s.toFixed(2)+":1"," Aspect Ratio)"]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded transition-colors",disabled:m,children:e.jsx(Zt,{className:"w-5 h-5"})})]}),e.jsxs("div",{ref:T,className:"relative flex-1 overflow-hidden bg-gray-100 flex items-center justify-center",style:{minHeight:"400px",maxHeight:"70vh"},onMouseMove:P,onMouseUp:H,onMouseLeave:H,onMouseDown:R,children:[e.jsx("video",{ref:k,src:t,className:"max-w-full max-h-full",style:{width:`${f.width}px`,height:`${f.height}px`,objectFit:"contain"},muted:!0,playsInline:!0}),W.width>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"absolute border-2 border-blue-500 bg-blue-500/20 cursor-move",style:{left:`${F+W.x}px`,top:`${V+W.y}px`,width:`${W.width}px`,height:`${W.height}px`},children:[e.jsx("div",{className:"absolute -top-1 -left-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-nw-resize resize-handle","data-handle":"nw"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-ne-resize resize-handle","data-handle":"ne"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-sw-resize resize-handle","data-handle":"sw"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-blue-500 border-2 border-white rounded cursor-se-resize resize-handle","data-handle":"se"})]}),e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.jsxs("svg",{className:"w-full h-full",children:[e.jsx("defs",{children:e.jsxs("mask",{id:"video-crop-mask",children:[e.jsx("rect",{width:"100%",height:"100%",fill:"black"}),e.jsx("rect",{x:F+W.x,y:V+W.y,width:W.width,height:W.height,fill:"white"})]})}),e.jsx("rect",{width:"100%",height:"100%",fill:"black",fillOpacity:"0.5",mask:"url(#video-crop-mask)"})]})})]}),e.jsx("canvas",{ref:_,className:"hidden"})]}),m&&e.jsxs("div",{className:"p-4 border-t bg-blue-50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"animate-spin",children:e.jsx(Tb,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("span",{className:"text-sm text-blue-600",children:["Processing video... ",Math.round(v),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${v}%`}})})]}),e.jsxs("div",{className:"p-4 border-t flex items-center justify-between relative z-10 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:L,className:"p-2 hover:bg-gray-100 rounded transition-colors",disabled:m,children:S?e.jsx(Sn,{className:"w-5 h-5"}):e.jsx(Ua,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Drag to move  Aspect ratio locked to ",s===1?"1:1":s===16/9?"16:9":s===4/5?"4:5":s===5/4?"5:4":s===4/3?"4:3":s.toFixed(2)+":1"]})]}),e.jsxs("div",{className:"flex gap-2 relative z-10",children:[e.jsx("button",{onClick:U=>{U.preventDefault(),U.stopPropagation(),a()},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",type:"button",disabled:m,children:"Cancel"}),e.jsxs("button",{onClick:U=>{U.preventDefault(),U.stopPropagation(),O()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 cursor-pointer",type:"button",disabled:!n.width||!n.height||n.width<=0||n.height<=0||m,children:[e.jsx(md,{className:"w-4 h-4"}),m?"Processing...":"Apply Crop"]})]})]})]})})}const ar=Gm.getApiConfig().baseUrl;function X8(){const{notify:t}=hr(),[s,r]=b.useState([]),[a,n]=b.useState(!0),[i,l]=b.useState(null),[o,c]=b.useState(null),[d,u]=b.useState({}),[p,f]=b.useState(!1),[g,x]=b.useState(!1),[h,m]=b.useState(!1),[j,v]=b.useState(!1),[N,S]=b.useState(!1),[A,T]=b.useState(!1),[k,_]=b.useState(""),[y,w]=b.useState(""),[R,P]=b.useState(""),[H,L]=b.useState(void 0),[O,W]=b.useState(1),[Q,D]=b.useState(null),[F,V]=b.useState(!1),[te,I]=b.useState(null),[U,z]=b.useState(null),[Y,K]=b.useState(null),[ne,q]=b.useState(7e3),[re,xe]=b.useState({name:"",description:"",sectionType:"",imageCount:5,type:"gallery"}),[_e,X]=b.useState({animationType:"fade",transitionDuration:1e3,autoPlay:!0,autoPlayDelay:7e3,designStyle:"modern",showDots:!0,showArrows:!0,loop:!0}),[Ae,Ie]=b.useState({animationType:"fade",transitionDuration:1e3,autoPlay:!0,autoPlayDelay:7e3,designStyle:"modern",showDots:!0,showArrows:!0,loop:!0}),[He,Le]=b.useState(""),[ve,st]=b.useState({heading:"Join The Nefol Circle",description:"Stay ahead with exclusive style drops, member-only offers, and insider fashion updates.",footer:"By subscribing, you agree to receive WhatsApp messages from Nefol.",logoName:"NEFL"}),St=b.useCallback(async()=>{const he=[{id:"scrolling_text_banner",name:"Scrolling Text Banner",type:"banner",images:[],description:"Continuous scrolling text line for offers and promotions (displays between navbar and top media carousel)",sectionType:"scrolling_text_banner",imageCount:0},{id:"top_media_carousel",name:"Top Media Carousel (Above Hero)",type:"hero",images:[],description:"Media carousel displayed above Hero Banner - Images and videos with full aspect ratio (up to 30)",sectionType:"top_media_carousel",imageCount:30,settings:{animationType:"fade",transitionDuration:1e3,autoPlay:!0,autoPlayDelay:7e3,designStyle:"modern",showDots:!0,showArrows:!0,loop:!0}},{id:"hero_banner",name:"Hero Banner (Top Slider)",type:"hero",images:[],description:"Main banner at the top - Rotating hero images and videos (up to 30)",sectionType:"hero_banner",imageCount:30,settings:{animationType:"fade",transitionDuration:1e3,autoPlay:!0,autoPlayDelay:7e3,designStyle:"modern",showDots:!0,showArrows:!0,loop:!0}},{id:"body_category",name:"Body Category",type:"category",images:[],description:"Body products category image",sectionType:"shop_categories",imageCount:1},{id:"face_category",name:"Face Category",type:"category",images:[],description:"Face products category image",sectionType:"shop_categories",imageCount:1},{id:"hair_category",name:"Hair Category",type:"category",images:[],description:"Hair products category image",sectionType:"shop_categories",imageCount:1},{id:"combos_category",name:"Combos Category",type:"category",images:[],description:"Combos products category image",sectionType:"shop_categories",imageCount:1},{id:"commitments",name:"Certifications/Commitments",type:"certification",images:[],description:"Certification badges (Cruelty-Free, Paraben-Free, etc.)",sectionType:"commitments",imageCount:10},{id:"complete_kit",name:"Complete Kit Banner",type:"banner",images:[],description:"Large banner for complete kit section",sectionType:"complete_kit",imageCount:1},{id:"marketplace_logos",name:"Marketplace Logos",type:"gallery",images:[],description:"Available on (Amazon, Flipkart, Meesho) logos",sectionType:"marketplace_logos",imageCount:10},{id:"nefol_collection",name:"Nefol Collection",type:"banner",images:[],description:"NEFOL COLLECTION section with image, title, subtitle, description, and button",sectionType:"nefol_collection",imageCount:1},{id:"forever_favorites",name:"Forever Favorites",type:"gallery",images:[],description:"FOREVER FAVORITES section with two images (Luxury Skincare and Natural Beauty)",sectionType:"forever_favorites",imageCount:2},{id:"natural_beauty",name:"Natural Beauty",type:"banner",images:[],description:"NATURAL BEAUTY section with image, title, subtitle, description, and button",sectionType:"natural_beauty",imageCount:1},{id:"whatsappsubscription",name:"WhatsApp Subscription",type:"banner",images:[],description:"WhatsApp subscription modal with image, heading, description, footer text, logo, and logo name",sectionType:"whatsappsubscription",imageCount:2}];try{const be=await(await fetch(`${ar}/cms/sections/home`)).json(),ye=he.map(Te=>Te.sectionType),Pe=be.filter(Te=>!ye.includes(Te.section_type)&&Te.section_type.startsWith("custom_")).map(Te=>{var Ne,Ge,nt,ht,ee;return{id:Te.section_type,name:Te.title||Te.section_type.replace("custom_","").replace(/_/g," "),type:"custom",images:(Ne=Te.content)!=null&&Ne.images||(Ge=Te.content)!=null&&Ge.image?[Te.content.image]:[],description:((nt=Te.content)==null?void 0:nt.description)||"",sectionType:Te.section_type,imageCount:Array.isArray((ht=Te.content)==null?void 0:ht.images)?Te.content.images.length:(ee=Te.content)!=null&&ee.image?1:5,isCustom:!0,orderIndex:Te.order_index||999}}),$e=[...he.map(Te=>{var Ge,nt;const Ne=be.find(ht=>ht.section_type===Te.sectionType);if(Ne&&Ne.content){if((Te.sectionType==="hero_banner"||Te.sectionType==="top_media_carousel")&&Ne.content.images){const ht=Array.isArray(Ne.content.images)?Ne.content.images:[];let ee;Te.sectionType==="top_media_carousel"&&(Ne.content.mediaItems&&Array.isArray(Ne.content.mediaItems)?ee=Ne.content.mediaItems:Ne.content.media&&Array.isArray(Ne.content.media)?ee=Ne.content.media.map(de=>({url:de.url||de,type:de.type||(/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(de.url||de)?"video":"image"),timing:de.timing||Ae.autoPlayDelay,thumbnail:de.thumbnail})):ee=ht.map(de=>({url:de,type:/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(de)?"video":"image",timing:Ae.autoPlayDelay})));const le={...Te,name:Te.name,images:ht,mediaItems:ee,settings:Ne.content.settings||Te.settings};return Te.sectionType==="hero_banner"&&Ne.content.settings&&X(Ne.content.settings),Te.sectionType==="top_media_carousel"&&Ne.content.settings&&Ie(Ne.content.settings),le}if(Te.sectionType==="shop_categories"&&Ne.content.categories){const ht={Body:"body_category",Face:"face_category",Hair:"hair_category",Combos:"combos_category"},ee=Ne.content.categories.find(le=>ht[le.name]===Te.id);if(ee&&ee.image)return{...Te,images:[(de=>{if(!de)return"";if(/^https?:\/\//i.test(de))return de;if(de.startsWith("/")){const ge=window.location.hostname;return ge==="thenefol.com"||ge==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}${de}`:`${window.location.protocol}//${window.location.host}${de}`}return de})(ee.image)]}}if(Te.sectionType==="scrolling_text_banner"&&Ne.content.text)return Le(Ne.content.text),{...Te,description:Ne.content.text};if(Te.sectionType==="commitments"&&Ne.content.images)return{...Te,images:Ne.content.images};if(Te.sectionType==="complete_kit"&&Ne.content.image)return{...Te,images:[Ne.content.image]};if(Te.sectionType==="marketplace_logos"&&Ne.content.logos)return{...Te,images:Ne.content.logos};if(Te.sectionType==="nefol_collection"&&Ne.content.image)return{...Te,images:[(ee=>{if(!ee)return"";if(/^https?:\/\//i.test(ee))return ee;if(ee.startsWith("/")){const le=window.location.hostname;return le==="thenefol.com"||le==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}${ee}`:`${window.location.protocol}//${window.location.host}${ee}`}return ee})(Ne.content.image)]};if(Te.sectionType==="forever_favorites"&&Ne.content.images){const ht=M=>{if(!M)return"";if(/^https?:\/\//i.test(M))return M;if(M.startsWith("/")){const J=window.location.hostname;return J==="thenefol.com"||J==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}${M}`:`${window.location.protocol}//${window.location.host}${M}`}return M},ee=Array.isArray(Ne.content.images)?Ne.content.images:[],le=(Ge=Ne.content.luxurySkincare)==null?void 0:Ge.image,de=(nt=Ne.content.naturalBeauty)==null?void 0:nt.image,ge=[];le&&ge.push(le),de&&ge.push(de);const Ee=ee.length>0?ee:ge;return{...Te,images:Ee.map(ht)}}if(Te.sectionType==="natural_beauty"&&Ne.content.image)return{...Te,images:[(ee=>{if(!ee)return"";if(/^https?:\/\//i.test(ee))return ee;if(ee.startsWith("/")){const le=window.location.hostname;return le==="thenefol.com"||le==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}${ee}`:`${window.location.protocol}//${window.location.host}${ee}`}return ee})(Ne.content.image)]};if(Te.sectionType==="whatsappsubscription"&&Ne.content){const ht=ge=>{if(!ge)return"";if(/^https?:\/\//i.test(ge))return ge;if(ge.startsWith("/")){const Ee=window.location.hostname;return Ee==="thenefol.com"||Ee==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}${ge}`:`${window.location.protocol}//${window.location.host}${ge}`}return ge},ee=Ne.content.image?ht(Ne.content.image):"",le=Ne.content.logo?ht(Ne.content.logo):"",de=[];return ee&&de.push(ee),le&&de.push(le),(Ne.content.heading||Ne.content.description||Ne.content.footer||Ne.content.logoName)&&st({heading:Ne.content.heading||"Join The Nefol Circle",description:Ne.content.description||"Stay ahead with exclusive style drops, member-only offers, and insider fashion updates.",footer:Ne.content.footer||"By subscribing, you agree to receive WhatsApp messages from Nefol.",logoName:Ne.content.logoName||"NEFL"}),{...Te,images:de}}}return Te}),...Pe].sort((Te,Ne)=>(Te.orderIndex||0)-(Ne.orderIndex||0));r($e)}catch(me){console.error("Failed to load sections:",me),r(he)}finally{n(!1)}},[]);b.useEffect(()=>{St()},[St]);const fe=he=>he.type.startsWith("video/")||/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(he.name),ae=he=>({hero_banner:1.25,nefol_collection:1.7777777777777777,natural_beauty:1.7777777777777777,forever_favorites:1.3333333333333333,complete_kit:1.7777777777777777})[he]||null,Be=async(he,me,be,ye)=>{const Pe=fe(he);if(!Pe&&he.type.startsWith("image/")&&!ye){z({file:he,sectionId:me,index:be}),V(!0);return}try{u(nt=>({...nt,[me]:!0}));const Re=await Dr(he,ar),$e=s.find(nt=>nt.id===me);if(!$e)return;const Te=[...$e.images];be!==void 0&&be<Te.length?Te[be]=Re:Te.push(Re);const Ne=Te.slice(0,$e.imageCount);let Ge;if(me==="top_media_carousel"){const nt=$e.mediaItems||[],ee={url:Re,type:Pe?"video":"image",timing:Ae.autoPlayDelay};be!==void 0&&be<nt.length?(Ge=[...nt],Ge[be]={...nt[be],...ee}):Ge=[...nt,ee],Ge=Ge.slice(0,$e.imageCount)}r(nt=>nt.map(ht=>ht.id===me?{...ht,images:Ne,mediaItems:Ge||ht.mediaItems}:ht)),await _t(me,Re,be,Ne,Ge),t("success",Pe?"Video uploaded successfully":"Image uploaded successfully")}catch(Re){console.error("Upload failed:",Re);const $e=(Re==null?void 0:Re.message)||(fe(he)?"Failed to upload video":"Failed to upload image");t("error",$e)}finally{u(Re=>({...Re,[me]:!1}))}},Ct=async he=>{try{u(Ge=>({...Ge,[R]:!0}));const me=Q?Q.name.replace(/\.[^/.]+$/,".jpg"):`cropped-thumbnail-${Date.now()}.jpg`,be=new File([he],me,{type:"image/jpeg"}),ye=await Dr(be,ar),Pe=s.find(Ge=>Ge.id===R);if(!Pe)return;const Re=!Q&&H!==void 0&&Pe.images[H]&&/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(Pe.images[H]),$e=[...Pe.images];Re||(H!==void 0&&H<$e.length?$e[H]=ye:$e.push(ye));const Te=$e.slice(0,Pe.imageCount);let Ne;if(R==="top_media_carousel"){const Ge=Pe.mediaItems||[],nt=Re||Pe.images[H||0]&&/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(Pe.images[H||0]);H!==void 0&&H<Ge.length?(Ne=[...Ge],Ne[H]={...Ge[H],url:Re||nt?Ge[H].url:ye,thumbnail:Re||nt?ye:void 0}):(Ne=[...Ge],nt?Ne.push({url:Pe.images[H||Ge.length]||ye,type:"video",timing:Ae.autoPlayDelay,thumbnail:Re?ye:void 0}):Ne.push({url:ye,type:"image",timing:Ae.autoPlayDelay})),Ne=Ne.slice(0,Pe.imageCount)}r(Ge=>Ge.map(nt=>nt.id===R?{...nt,images:Te,mediaItems:Ne||nt.mediaItems}:nt)),await _t(R,ye,H,Te,Ne),t("success",Re?"Video thumbnail cropped and uploaded successfully":"Image cropped and uploaded successfully"),k.startsWith("blob:")&&URL.revokeObjectURL(k),S(!1),_(""),D(null)}catch(me){console.error("Crop upload failed:",me),t("error","Failed to upload cropped image")}finally{u(me=>({...me,[R]:!1}))}},ct=()=>{k&&URL.revokeObjectURL(k),S(!1),_(""),P(""),L(void 0),W(1),D(null)},Tt=async he=>{if(I(he),V(!1),U){const{file:me,sectionId:be,index:ye}=U;if(he){const Pe=URL.createObjectURL(me);_(Pe),P(be),L(ye),W(he.ratio),D(me),S(!0)}else try{u(Ne=>({...Ne,[be]:!0}));const Pe=await Dr(me,ar),Re=s.find(Ne=>Ne.id===be);if(!Re)return;const $e=[...Re.images];ye!==void 0&&ye<$e.length?$e[ye]=Pe:$e.push(Pe);const Te=$e.slice(0,Re.imageCount);r(Ne=>Ne.map(Ge=>Ge.id===be?{...Ge,images:Te}:Ge)),await _t(be,Pe,ye,Te),t("success","Image uploaded successfully")}catch(Pe){console.error("Upload failed:",Pe),t("error",(Pe==null?void 0:Pe.message)||"Failed to upload image")}finally{u(Pe=>({...Pe,[be]:!1}))}z(null)}},_t=async(he,me,be,ye,Pe)=>{var $e,Te,Ne,Ge,nt,ht,ee,le,de,ge,Ee,M,J,E,C,B,G,Z,se,oe,ce,ie,ue,we,Fe,je,Ce,Ue,mt,it,Et,Ps,Xe,yt;const Re=s.find(wt=>wt.id===he);if(Re)try{const wt=lt=>{if(!lt)return"";if(lt.startsWith("/"))return lt;try{return new URL(lt).pathname}catch{return lt}},Lt=(ye||Re.images).map(wt);let Ke={};if(Re.sectionType==="hero_banner"){const lt=s.find(rr=>rr.id==="hero_banner");Ke={title:"Hero Banner",subtitle:"NATURAL BEAUTY",description:"infused with premium natural ingredients",buttonText:"SHOP NOW",buttonLink:"/shop",images:Lt,videos:Lt.filter(rr=>/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(rr)),settings:(lt==null?void 0:lt.settings)||_e}}else if(Re.sectionType==="top_media_carousel"){const lt=s.find(Ze=>Ze.id==="top_media_carousel"),zr=(Pe||(lt==null?void 0:lt.mediaItems)||Lt.map(Ze=>({url:Ze,type:/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(Ze)?"video":"image",timing:Ae.autoPlayDelay}))).map(Ze=>({...Ze,url:wt(Ze.url),thumbnail:Ze.thumbnail?wt(Ze.thumbnail):void 0})),ze=Lt.filter(Ze=>/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(Ze)),We=Lt.filter(Ze=>!/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(Ze));Ke={title:"Top Media Carousel",images:Lt,videos:ze,media:Lt.map(Ze=>({url:wt(Ze),type:/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(Ze)?"video":"image"})),mediaItems:zr,settings:(lt==null?void 0:lt.settings)||Ae}}else if(Re.sectionType==="scrolling_text_banner")Ke={text:He||""};else if(Re.sectionType==="shop_categories"){const zr=(await(await fetch(`${ar}/cms/sections/home`)).json()).find(ft=>ft.section_type==="shop_categories"),We={body_category:"Body",face_category:"Face",hair_category:"Hair",combos_category:"Combos"}[he],Ve=(ft=>{if(!ft||ft.startsWith("/"))return ft;if(ft.includes("/uploads/")){const Cr=ft.match(/\/uploads\/[^?]+/);if(Cr)return Cr[0]}try{return new URL(ft).pathname}catch{return ft}})(me);if(zr&&zr.content&&zr.content.categories){const ft=zr.content.categories.map(Cr=>Cr.name===We?{...Cr,image:Ve}:Cr);Ke={...zr.content,categories:ft}}else{const ft={Body:"/body",Face:"/face",Hair:"/hair",Combos:"/combos"},Cr={Body:"/IMAGES/body.jpg",Face:"/IMAGES/face.jpg",Hair:"/IMAGES/hair.jpg",Combos:"/IMAGES/combo.jpg"};Ke={title:"SHOP BY CATEGORY",categories:[{name:"Body",image:he==="body_category"?Ve:Cr.Body,link:ft.Body},{name:"Face",image:he==="face_category"?Ve:Cr.Face,link:ft.Face},{name:"Hair",image:he==="hair_category"?Ve:Cr.Hair,link:ft.Hair},{name:"Combos",image:he==="combos_category"?Ve:Cr.Combos,link:ft.Combos}]}}}else if(Re.sectionType==="commitments")Ke={title:"THOUGHTFUL COMMITMENTS",description:"We are committed to providing you with the safest and most effective natural skincare products.",images:Lt};else if(Re.sectionType==="complete_kit")Ke={title:"THE COMPLETE KIT",description:"Get the full Nefol experience in one curated bundle",buttonText:"View Kit",buttonLink:"/combos",image:wt(me)};else if(Re.sectionType==="marketplace_logos")Ke={title:"AVAILABLE ON",logos:Lt};else if(Re.sectionType==="nefol_collection"){const rr=(Ve=>{if(!Ve||Ve.startsWith("/"))return Ve;if(Ve.includes("/uploads/")){const ft=Ve.match(/\/uploads\/[^?]+/);if(ft)return ft[0]}try{return new URL(Ve).pathname}catch{return Ve}})(me),We=(await(await fetch(`${ar}/cms/sections/home`)).json()).find(Ve=>Ve.section_type==="nefol_collection"),Ze=rr||(($e=We==null?void 0:We.content)==null?void 0:$e.image)||"";Ke={title:((Te=We==null?void 0:We.content)==null?void 0:Te.title)||"NEFOL COLLECTION",subtitle:((Ne=We==null?void 0:We.content)==null?void 0:Ne.subtitle)||"ELEVATE YOUR SKINCARE WITH",description:((Ge=We==null?void 0:We.content)==null?void 0:Ge.description)||"Our premium collection combines the best of nature and science to deliver exceptional results for your skin.",buttonText:((nt=We==null?void 0:We.content)==null?void 0:nt.buttonText)||"SHOP NOW",buttonLink:((ht=We==null?void 0:We.content)==null?void 0:ht.buttonLink)||"/shop",image:wt(Ze)}}else if(Re.sectionType==="forever_favorites"){const lt=Ze=>{if(!Ze||Ze.startsWith("/"))return Ze;if(Ze.includes("/uploads/")){const Ve=Ze.match(/\/uploads\/[^?]+/);if(Ve)return Ve[0]}try{return new URL(Ze).pathname}catch{return Ze}},ze=(await(await fetch(`${ar}/cms/sections/home`)).json()).find(Ze=>Ze.section_type==="forever_favorites");let We=Lt.length>0?Lt.map(lt):[];if(We.length===0&&(ze!=null&&ze.content)){const Ze=ze.content.images||[],Ve=(ee=ze.content.luxurySkincare)==null?void 0:ee.image,ft=(le=ze.content.naturalBeauty)==null?void 0:le.image;Ze.length>0?We=Ze.map(lt):(Ve||ft)&&(We=[Ve,ft].filter(Boolean).map(lt))}Ke={title:((de=ze==null?void 0:ze.content)==null?void 0:de.title)||"FOREVER FAVORITES",description:((ge=ze==null?void 0:ze.content)==null?void 0:ge.description)||"Discover our most loved products that have become staples in skincare routines worldwide.",images:We,luxurySkincare:{title:((M=(Ee=ze==null?void 0:ze.content)==null?void 0:Ee.luxurySkincare)==null?void 0:M.title)||"LUXURY SKINCARE",buttonText:((E=(J=ze==null?void 0:ze.content)==null?void 0:J.luxurySkincare)==null?void 0:E.buttonText)||"SHOP NOW",image:wt(We[0]||((B=(C=ze==null?void 0:ze.content)==null?void 0:C.luxurySkincare)==null?void 0:B.image)||"")},naturalBeauty:{title:((Z=(G=ze==null?void 0:ze.content)==null?void 0:G.naturalBeauty)==null?void 0:Z.title)||"NATURAL BEAUTY",buttonText:((oe=(se=ze==null?void 0:ze.content)==null?void 0:se.naturalBeauty)==null?void 0:oe.buttonText)||"SHOP NOW",image:wt(We[1]||((ie=(ce=ze==null?void 0:ze.content)==null?void 0:ce.naturalBeauty)==null?void 0:ie.image)||"")}}}else if(Re.sectionType==="natural_beauty"){const rr=(Ve=>{if(!Ve||Ve.startsWith("/"))return Ve;if(Ve.includes("/uploads/")){const ft=Ve.match(/\/uploads\/[^?]+/);if(ft)return ft[0]}try{return new URL(Ve).pathname}catch{return Ve}})(me),We=(await(await fetch(`${ar}/cms/sections/home`)).json()).find(Ve=>Ve.section_type==="natural_beauty"),Ze=rr||((ue=We==null?void 0:We.content)==null?void 0:ue.image)||"";Ke={title:((we=We==null?void 0:We.content)==null?void 0:we.title)||"NATURAL BEAUTY",subtitle:((Fe=We==null?void 0:We.content)==null?void 0:Fe.subtitle)||"ELEVATE YOUR SKIN WITH",description:((je=We==null?void 0:We.content)==null?void 0:je.description)||"infused with premium natural ingredients",buttonText:((Ce=We==null?void 0:We.content)==null?void 0:Ce.buttonText)||"SHOP NOW",buttonLink:((Ue=We==null?void 0:We.content)==null?void 0:Ue.buttonLink)||"/shop",image:wt(Ze)}}else if(Re.sectionType==="whatsappsubscription"){const lt=Ve=>{if(!Ve)return"";if(Ve.startsWith("/"))return Ve;if(Ve.includes("/uploads/")){const ft=Ve.match(/\/uploads\/[^?]+/);if(ft)return ft[0]}try{return new URL(Ve).pathname}catch{if(Ve.includes("/uploads/")){const ft=Ve.match(/\/uploads\/[^?]+/);if(ft)return ft[0]}return Ve}},ze=(await(await fetch(`${ar}/cms/sections/home`)).json()).find(Ve=>Ve.section_type==="whatsappsubscription");let We=((mt=ze==null?void 0:ze.content)==null?void 0:mt.image)||"",Ze=((it=ze==null?void 0:ze.content)==null?void 0:it.logo)||"";if(ye&&ye.length>0)be===0||be===void 0&&ye.length>=1?(We=lt(ye[0]),ye.length>1?Ze=lt(ye[1]):(Et=ze==null?void 0:ze.content)!=null&&Et.logo&&(Ze=ze.content.logo)):be===1||be===void 0&&ye.length===2?(Ze=lt(ye[1]||ye[ye.length-1]),ye.length>0?We=lt(ye[0]):(Ps=ze==null?void 0:ze.content)!=null&&Ps.image&&(We=ze.content.image)):(ye[0]&&(We=lt(ye[0])),ye[1]&&(Ze=lt(ye[1])));else if(me){const Ve=lt(me);be===1?(Ze=Ve,We=((Xe=ze==null?void 0:ze.content)==null?void 0:Xe.image)||""):(We=Ve,Ze=((yt=ze==null?void 0:ze.content)==null?void 0:yt.logo)||"")}Ke={image:wt(We),logo:wt(Ze),heading:ve.heading,description:ve.description,footer:ve.footer,logoName:ve.logoName}}else Re.sectionType.startsWith("custom_")&&(Ke={title:Re.name,description:Re.description,images:Lt});const Ja={scrolling_text_banner:"Scrolling Text Banner",top_media_carousel:"Top Media Carousel (Above Hero)",hero_banner:"Hero Banner (Top Slider)",body_category:"Body Category",face_category:"Face Category",hair_category:"Hair Category",combos_category:"Combos Category",commitments:"Certifications/Commitments",complete_kit:"Complete Kit Banner",marketplace_logos:"Marketplace Logos",nefol_collection:"Nefol Collection",forever_favorites:"Forever Favorites",natural_beauty:"Natural Beauty",whatsappsubscription:"WhatsApp Subscription"}[Re.sectionType]||Re.name;if(!(await fetch(`${ar}/cms/sections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page_slug:"home",section_type:Re.sectionType,title:Ja,content:Ke,order_index:Re.orderIndex||0,is_active:!0})})).ok)throw new Error("Failed to save to CMS")}catch(wt){throw console.error("Failed to save section:",wt),wt}},dt=async()=>{const he=s.find(me=>me.id==="hero_banner");if(he){r(me=>me.map(be=>be.id==="hero_banner"?{...be,settings:_e}:be));try{await _t("hero_banner",he.images[0]||"",void 0,he.images),t("success","Hero settings saved successfully"),x(!1)}catch{t("error","Failed to save hero settings")}}},ut=async(he,me)=>{const be=s.find(Re=>Re.id===he);if(!be)return;const ye=be.images.filter((Re,$e)=>$e!==me);let Pe;he==="top_media_carousel"&&be.mediaItems&&(Pe=be.mediaItems.filter((Re,$e)=>$e!==me)),r(Re=>Re.map($e=>$e.id===he?{...$e,images:ye,mediaItems:Pe||$e.mediaItems}:$e));try{await _t(he,ye[0]||"",void 0,ye,Pe),t("success","Media removed")}catch{t("error","Failed to update CMS")}},pe=async(he,me,be)=>{const ye=s.find(Re=>Re.id===he);if(!ye||he!=="top_media_carousel"||!ye.mediaItems)return;const Pe=[...ye.mediaItems];me<Pe.length&&(Pe[me]={...Pe[me],timing:be}),r(Re=>Re.map($e=>$e.id===he?{...$e,mediaItems:Pe}:$e));try{await _t(he,ye.images[0]||"",void 0,ye.images,Pe),t("success","Timing updated successfully")}catch{t("error","Failed to update timing")}},Me=he=>new Promise((me,be)=>{const ye=document.createElement("video");ye.crossOrigin="anonymous",ye.src=he,ye.currentTime=.1,ye.onloadeddata=()=>{ye.onseeked=()=>{const Pe=document.createElement("canvas");Pe.width=ye.videoWidth,Pe.height=ye.videoHeight;const Re=Pe.getContext("2d");if(Re){Re.drawImage(ye,0,0);const $e=Pe.toDataURL("image/jpeg");me($e)}else be(new Error("Failed to get canvas context"))},ye.currentTime=.1},ye.onerror=()=>{be(new Error("Failed to load video"))}}),Je=async(he,me)=>{const be=s.find(Pe=>Pe.id===he);if(!be||!be.images[me])return;const ye=be.images[me];if(!/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(ye)){t("error","Selected item is not a video");return}try{const Pe=await Me(ye);_(Pe),P(he),L(me),W(16/9),D(null),S(!0)}catch(Pe){console.error("Failed to extract video frame:",Pe),t("error","Failed to extract video frame. Please try again.")}},jt=(he,me)=>{const be=s.find(Pe=>Pe.id===he);if(!be||!be.images[me])return;const ye=be.images[me];if(!/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(ye)){t("error","Selected item is not a video");return}w(ye),P(he),L(me),W(16/9),T(!0)},at=async he=>{try{u(Te=>({...Te,[R]:!0}));const me=new File([he],`cropped-video-${Date.now()}.webm`,{type:"video/webm"}),be=await Dr(me,ar),ye=s.find(Te=>Te.id===R);if(!ye)return;const Pe=[...ye.images];H!==void 0&&H<Pe.length?Pe[H]=be:Pe.push(be);const Re=Pe.slice(0,ye.imageCount);let $e;if(R==="top_media_carousel"){const Te=ye.mediaItems||[];H!==void 0&&H<Te.length?($e=[...Te],$e[H]={...Te[H],url:be,type:"video"}):($e=[...Te],$e.push({url:be,type:"video",timing:Ae.autoPlayDelay})),$e=$e.slice(0,ye.imageCount)}r(Te=>Te.map(Ne=>Ne.id===R?{...Ne,images:Re,mediaItems:$e||Ne.mediaItems}:Ne)),await _t(R,be,H,Re,$e),t("success","Video cropped and uploaded successfully"),T(!1),w(""),P(""),L(void 0)}catch(me){console.error("Video crop upload failed:",me),t("error","Failed to upload cropped video")}finally{u(me=>({...me,[R]:!1}))}},Yt=()=>{T(!1),w(""),P(""),L(void 0)},ia=(he,me)=>{he.preventDefault(),he.stopPropagation(),c(me)},Sa=he=>{he.preventDefault(),he.stopPropagation(),c(null)},qa=async(he,me)=>{he.preventDefault(),he.stopPropagation(),c(null);const be=Array.from(he.dataTransfer.files).filter(ye=>ye.type.startsWith("image/")||ye.type.startsWith("video/")||/\.(mp4|webm|ogg|mov|avi|jpg|jpeg|png|gif|webp)(\?|$)/i.test(ye.name));if(be.length===0){t("error","Please drop image or video files only");return}for(const ye of be)fe(ye)?await Be(ye,me,void 0,!0):await Be(ye,me)},Ur=(he,me)=>{Array.from(he.target.files||[]).forEach(ye=>{fe(ye)?Be(ye,me,void 0,!0):Be(ye,me)}),he.target.value=""};return a?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"text-lg",children:"Loading homepage layout..."})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Homepage Layout Manager"}),e.jsx("p",{className:"text-sm font-light tracking-wide mt-2",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Drag and drop images to different sections or click to upload"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>v(!0),className:"btn-primary flex items-center gap-2",children:[e.jsx(rs,{className:"w-5 h-5"}),"Create New Section"]}),e.jsxs("button",{onClick:()=>f(!p),className:"btn-secondary flex items-center gap-2",children:[e.jsx(ot,{className:"w-5 h-5"}),p?"Edit Mode":"Preview Mode"]}),e.jsxs("button",{onClick:St,className:"btn-secondary flex items-center gap-2",children:[e.jsx(vr,{className:"w-5 h-5"}),"Refresh"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:s.map(he=>e.jsxs("div",{onDragOver:me=>ia(me,he.id),onDragLeave:Sa,onDrop:me=>qa(me,he.id),className:`border-2 rounded-lg p-6 transition-all ${o===he.id?"border-blue-500 bg-blue-50 border-dashed":"border-gray-200 hover:border-gray-300"} ${d[he.id]?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[he.name,he.isCustom&&e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-green-100 text-green-800 rounded",children:"Custom"})]}),(he.id==="hero_banner"||he.id==="top_media_carousel")&&e.jsx("button",{onClick:()=>{he.id==="hero_banner"?x(!g):m(!h)},className:"p-1.5 hover:bg-gray-100 rounded transition-colors",title:"Animation & Design Settings",children:e.jsx(ws,{className:"w-4 h-4 text-blue-600"})}),he.isCustom&&e.jsx("button",{onClick:async()=>{if(confirm(`Are you sure you want to delete "${he.name}"?`))try{const ye=(await(await fetch(`${ar}/cms/sections/home`)).json()).find(Pe=>Pe.section_type===he.sectionType);if(ye)if((await fetch(`${ar}/cms/sections/${ye.id}`,{method:"DELETE"})).ok)t("success","Section deleted successfully"),await St();else throw new Error("Failed to delete")}catch(me){console.error("Failed to delete section:",me),t("error","Failed to delete section")}},className:"p-1.5 hover:bg-red-100 rounded transition-colors",title:"Delete Section",children:e.jsx(Mt,{className:"w-4 h-4 text-red-600"})})]}),e.jsx("p",{className:"text-sm text-gray-600",children:he.description}),he.id!=="scrolling_text_banner"&&e.jsxs("span",{className:"inline-block mt-2 px-2 py-1 text-xs bg-gray-100 rounded",children:["Max ",he.imageCount," image",he.imageCount>1?"s":""]})]}),he.id!=="scrolling_text_banner"&&e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:he.id==="hero_banner"||he.id==="top_media_carousel"?"image/*,video/*":"image/*",multiple:he.imageCount>1,onChange:me=>Ur(me,he.id),className:"hidden",disabled:d[he.id]}),e.jsx("div",{className:"p-2 hover:bg-gray-100 rounded transition-colors",children:e.jsx(Bn,{className:"w-5 h-5 text-gray-600"})})]})]}),he.id==="scrolling_text_banner"&&e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-br from-yellow-50 to-orange-50 rounded-lg border border-yellow-200",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scrolling Text (Offers, Promotions, etc.)"}),e.jsx("textarea",{value:He,onChange:me=>Le(me.target.value),placeholder:"Enter text to display in the scrolling banner. You can add multiple items separated by commas or new lines. Example: 'Free Shipping on Orders Above 500', 'Buy 2 Get 1 Free', 'New Arrivals - Shop Now!'",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 resize-y min-h-[100px]",rows:4}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"This text will scroll continuously 24/7 on the homepage"}),e.jsxs("button",{onClick:async()=>{try{if(!s.find(be=>be.id==="scrolling_text_banner"))return;await _t("scrolling_text_banner","",void 0,[]),t("success","Scrolling text saved successfully")}catch{t("error","Failed to save scrolling text")}},className:"flex items-center gap-2 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:[e.jsx(Ms,{className:"w-4 h-4"}),"Save Text"]})]})]}),he.id==="whatsappsubscription"&&e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-br from-green-50 to-blue-50 rounded-lg border border-green-200",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"WhatsApp Subscription Modal Content"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Heading"}),e.jsx("input",{type:"text",value:ve.heading,onChange:me=>st({...ve,heading:me.target.value}),placeholder:"Join The Nefol Circle",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Description"}),e.jsx("textarea",{value:ve.description,onChange:me=>st({...ve,description:me.target.value}),placeholder:"Stay ahead with exclusive style drops, member-only offers, and insider fashion updates.",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-y min-h-[80px]",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Footer Text"}),e.jsx("input",{type:"text",value:ve.footer,onChange:me=>st({...ve,footer:me.target.value}),placeholder:"By subscribing, you agree to receive WhatsApp messages from Nefol.",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Logo Name"}),e.jsx("input",{type:"text",value:ve.logoName,onChange:me=>st({...ve,logoName:me.target.value}),placeholder:"NEFL",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Product Image"}),he.images[0]?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:he.images[0],alt:"Product",className:"w-full h-32 object-contain rounded-lg border border-gray-200"}),e.jsx("button",{onClick:()=>ut(he.id,0),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 hover:opacity-100 transition-opacity",children:e.jsx(Zt,{className:"w-4 h-4"})})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:me=>{var ye;const be=(ye=me.target.files)==null?void 0:ye[0];be&&Be(be,he.id,0,!0)},className:"hidden"}),e.jsx("div",{className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center hover:border-green-500 hover:bg-green-50 transition-colors",children:e.jsx(Bn,{className:"w-6 h-6 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Logo Image"}),he.images[1]?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:he.images[1],alt:"Logo",className:"w-full h-32 object-contain rounded-lg border border-gray-200"}),e.jsx("button",{onClick:()=>ut(he.id,1),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 hover:opacity-100 transition-opacity",children:e.jsx(Zt,{className:"w-4 h-4"})})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:me=>{var ye;const be=(ye=me.target.files)==null?void 0:ye[0];be&&Be(be,he.id,1,!0)},className:"hidden"}),e.jsx("div",{className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center hover:border-green-500 hover:bg-green-50 transition-colors",children:e.jsx(Bn,{className:"w-6 h-6 text-gray-400"})})]})]})]})}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Edit the text content, upload product image and logo for the WhatsApp subscription modal"}),e.jsxs("button",{onClick:async()=>{try{const me=s.find(be=>be.id==="whatsappsubscription");if(!me)return;await _t("whatsappsubscription",me.images[0]||"",void 0,me.images),t("success","WhatsApp subscription content saved successfully")}catch{t("error","Failed to save WhatsApp subscription content")}},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Ms,{className:"w-4 h-4"}),"Save Content"]})]})]}),he.id==="top_media_carousel"&&h&&e.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gu,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold text-blue-900",children:"Animation & Design Settings"})]}),e.jsx("button",{onClick:()=>m(!1),className:"p-1 hover:bg-blue-200 rounded transition-colors",children:e.jsx(Zt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Animation Type"}),e.jsxs("select",{value:Ae.animationType,onChange:me=>Ie({...Ae,animationType:me.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"fade",children:"Fade"}),e.jsx("option",{value:"slide",children:"Slide"}),e.jsx("option",{value:"zoom",children:"Zoom"}),e.jsx("option",{value:"cube",children:"Cube 3D"}),e.jsx("option",{value:"flip",children:"Flip"}),e.jsx("option",{value:"coverflow",children:"Coverflow"}),e.jsx("option",{value:"cards",children:"Cards"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Design Style"}),e.jsxs("select",{value:Ae.designStyle,onChange:me=>Ie({...Ae,designStyle:me.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"modern",children:"Modern"}),e.jsx("option",{value:"classic",children:"Classic"}),e.jsx("option",{value:"minimal",children:"Minimal"}),e.jsx("option",{value:"gradient",children:"Gradient"}),e.jsx("option",{value:"dark",children:"Dark Theme"}),e.jsx("option",{value:"colorful",children:"Colorful"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Transition Duration: ",Ae.transitionDuration,"ms"]}),e.jsx("input",{type:"range",min:"300",max:"3000",step:"100",value:Ae.transitionDuration,onChange:me=>Ie({...Ae,transitionDuration:parseInt(me.target.value)}),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"Fast (300ms)"}),e.jsx("span",{children:"Slow (3000ms)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Auto-play Delay: ",Ae.autoPlayDelay/1e3,"s"]}),e.jsx("input",{type:"range",min:"2000",max:"15000",step:"500",value:Ae.autoPlayDelay,onChange:me=>Ie({...Ae,autoPlayDelay:parseInt(me.target.value)}),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"2s"}),e.jsx("span",{children:"15s"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Ae.autoPlay,onChange:me=>Ie({...Ae,autoPlay:me.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Auto-play"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Ae.showDots,onChange:me=>Ie({...Ae,showDots:me.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Show Navigation Dots"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Ae.showArrows,onChange:me=>Ie({...Ae,showArrows:me.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Show Arrow Buttons"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Ae.loop,onChange:me=>Ie({...Ae,loop:me.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Loop Slides"})]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{const me=s.find(be=>be.id==="top_media_carousel");me!=null&&me.settings&&Ie(me.settings),m(!1)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:async()=>{const me=s.find(be=>be.id==="top_media_carousel");if(me){r(be=>be.map(ye=>ye.id==="top_media_carousel"?{...ye,settings:Ae}:ye));try{await _t("top_media_carousel",me.images[0]||"",void 0,me.images),t("success","Top Media Carousel settings saved successfully"),m(!1)}catch{t("error","Failed to save top media carousel settings")}}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),"Save Settings"]})]})]}),he.id==="hero_banner"&&g&&e.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gu,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold text-blue-900",children:"Animation & Design Settings"})]}),e.jsx("button",{onClick:()=>x(!1),className:"p-1 hover:bg-blue-200 rounded transition-colors",children:e.jsx(Zt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Animation Type"}),e.jsxs("select",{value:_e.animationType,onChange:me=>X({..._e,animationType:me.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"fade",children:"Fade"}),e.jsx("option",{value:"slide",children:"Slide"}),e.jsx("option",{value:"zoom",children:"Zoom"}),e.jsx("option",{value:"cube",children:"Cube 3D"}),e.jsx("option",{value:"flip",children:"Flip"}),e.jsx("option",{value:"coverflow",children:"Coverflow"}),e.jsx("option",{value:"cards",children:"Cards"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Design Style"}),e.jsxs("select",{value:_e.designStyle,onChange:me=>X({..._e,designStyle:me.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"modern",children:"Modern"}),e.jsx("option",{value:"classic",children:"Classic"}),e.jsx("option",{value:"minimal",children:"Minimal"}),e.jsx("option",{value:"gradient",children:"Gradient"}),e.jsx("option",{value:"dark",children:"Dark Theme"}),e.jsx("option",{value:"colorful",children:"Colorful"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Transition Duration: ",_e.transitionDuration,"ms"]}),e.jsx("input",{type:"range",min:"300",max:"3000",step:"100",value:_e.transitionDuration,onChange:me=>X({..._e,transitionDuration:parseInt(me.target.value)}),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"Fast (300ms)"}),e.jsx("span",{children:"Slow (3000ms)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Auto-play Delay: ",_e.autoPlayDelay/1e3,"s"]}),e.jsx("input",{type:"range",min:"2000",max:"15000",step:"500",value:_e.autoPlayDelay,onChange:me=>X({..._e,autoPlayDelay:parseInt(me.target.value)}),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"2s"}),e.jsx("span",{children:"15s"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:_e.autoPlay,onChange:me=>X({..._e,autoPlay:me.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Auto-play"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:_e.showDots,onChange:me=>X({..._e,showDots:me.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Show Navigation Dots"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:_e.showArrows,onChange:me=>X({..._e,showArrows:me.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Show Arrow Buttons"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:_e.loop,onChange:me=>X({..._e,loop:me.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Loop Slides"})]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{const me=s.find(be=>be.id==="hero_banner");me!=null&&me.settings&&X(me.settings),x(!1)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:dt,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),"Save Settings"]})]})]}),he.images.length===0?e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(Kn,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Drag and drop ",he.id==="hero_banner"||he.id==="top_media_carousel"?"images or videos":"images"," here"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"or click the upload button above"})]}):e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:[he.images.map((me,be)=>{const ye=me.toLowerCase(),Pe=/\.(mp4|webm|ogg|mov|avi)(\?|$)/i.test(me),Re=me.includes("/uploads/"),$e=Pe||Re&&(ye.includes("video")||ye.includes("mp4")||ye.includes("webm")||ye.includes("mov")),Te=he.id==="top_media_carousel"&&he.mediaItems?he.mediaItems[be]:null,Ne=(Te==null?void 0:Te.timing)||(he.id==="top_media_carousel"?Ae.autoPlayDelay:void 0);return(Y==null?void 0:Y.sectionId)===he.id&&(Y==null||Y.index),e.jsxs("div",{className:"relative group",children:[$e?e.jsx("video",{src:me,className:"w-full h-32 object-cover rounded-lg border border-gray-200",controls:!1,muted:!0,playsInline:!0,poster:Te==null?void 0:Te.thumbnail,children:"Your browser does not support the video tag."}):e.jsx("img",{src:me,alt:`${he.name} ${be+1}`,className:`w-full object-cover rounded-lg border border-gray-200 ${he.id==="hero_banner"?"h-40":"h-32"}`,style:he.id==="hero_banner"?{aspectRatio:"5/4"}:{}}),$e&&e.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 bg-black bg-opacity-70 text-white text-xs rounded",children:"Video"}),he.id==="top_media_carousel"&&Ne&&e.jsxs("div",{className:"absolute bottom-2 right-2 px-2 py-1 bg-blue-600 bg-opacity-90 text-white text-xs rounded flex items-center gap-1",children:[e.jsx(cs,{className:"w-3 h-3"}),Ne/1e3,"s"]}),!p&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ut(he.id,be),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity z-10",children:e.jsx(Zt,{className:"w-4 h-4"})}),e.jsx("div",{className:"absolute top-2 left-2 flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:$e?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>jt(he.id,be),className:"p-1 bg-green-500 text-white rounded-full",title:"Crop Video",children:e.jsx(zu,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Je(he.id,be),className:"p-1 bg-blue-500 text-white rounded-full",title:"Crop Video Thumbnail",children:e.jsx(Kn,{className:"w-4 h-4"})})]}):e.jsx("button",{onClick:()=>{_(me),P(he.id),L(be);const Ge=ae(he.id)||1;W(Ge),D(null),S(!0)},className:"p-1 bg-green-500 text-white rounded-full",title:"Crop Image",children:e.jsx(zu,{className:"w-4 h-4"})})}),he.id==="top_media_carousel"&&e.jsx("button",{onClick:()=>{K({sectionId:he.id,index:be}),q(Ne||Ae.autoPlayDelay)},className:"absolute bottom-2 left-2 p-1 bg-purple-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity z-10",title:"Set Timing",children:e.jsx(cs,{className:"w-4 h-4"})}),e.jsxs("label",{className:`absolute cursor-pointer ${he.id==="top_media_carousel"?"bottom-2 right-2":"bottom-2 left-2"}`,children:[e.jsx("input",{type:"file",accept:he.id==="hero_banner"||he.id==="top_media_carousel"?"image/*,video/*":"image/*",onChange:Ge=>{var ht;const nt=(ht=Ge.target.files)==null?void 0:ht[0];nt&&(fe(nt)?Be(nt,he.id,be,!0):Be(nt,he.id,be))},className:"hidden"}),e.jsx("div",{className:"p-1 bg-blue-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Bn,{className:"w-3 h-3"})})]})]})]},be)}),he.images.length<he.imageCount&&!p&&e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:he.id==="hero_banner"||he.id==="top_media_carousel"?"image/*,video/*":"image/*",multiple:he.id==="hero_banner"||he.id==="top_media_carousel",onChange:me=>Ur(me,he.id),className:"hidden"}),e.jsx("div",{className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center hover:border-blue-500 hover:bg-blue-50 transition-colors",children:e.jsx(Bn,{className:"w-6 h-6 text-gray-400"})})]})]}),d[he.id]&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 text-blue-600",children:[e.jsx(vr,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Uploading..."})]})})]},he.id))}),e.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How to use:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"Drag images or videos from your computer directly onto any section"}),e.jsx("li",{children:"Or click the upload icon to browse and select files"}),e.jsx("li",{children:"Top Media Carousel and Hero Banner support up to 30 images and videos"}),e.jsx("li",{children:"Videos should be in MP4, WebM, OGG, MOV, or AVI format (max 100MB)"}),e.jsx("li",{children:'Click "Create New Section" to add custom sections to your homepage'}),e.jsx("li",{children:"Hover over media to replace or remove them"}),e.jsx("li",{children:"Changes are saved automatically to the CMS"}),e.jsx("li",{children:"Use Preview Mode to see how it looks without edit controls"})]})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Create New Section"}),e.jsx("button",{onClick:()=>{v(!1),xe({name:"",description:"",sectionType:"",imageCount:5,type:"gallery"})},className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(Zt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section Name *"}),e.jsx("input",{type:"text",value:re.name,onChange:he=>xe({...re,name:he.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Featured Products, Special Offers"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:re.description,onChange:he=>xe({...re,description:he.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Brief description of this section"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section Type (Unique ID) *"}),e.jsx("input",{type:"text",value:re.sectionType,onChange:he=>{const me=he.target.value.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"");xe({...re,sectionType:`custom_${me}`})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"featured-products (will become: custom_featured_products)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only lowercase letters, numbers, and underscores"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Images/Videos"}),e.jsx("input",{type:"number",value:re.imageCount,onChange:he=>xe({...re,imageCount:parseInt(he.target.value)||5}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"1",max:"50"})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[e.jsx("button",{onClick:()=>{v(!1),xe({name:"",description:"",sectionType:"",imageCount:5,type:"gallery"})},className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:async()=>{if(!re.name||!re.sectionType){t("error","Please fill in all required fields");return}try{if((await fetch(`${ar}/cms/sections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page_slug:"home",section_type:re.sectionType||`custom_${re.name.toLowerCase().replace(/\s+/g,"_")}`,title:re.name,content:{title:re.name,description:re.description,images:[]},order_index:s.length,is_active:!0})})).ok)t("success","Section created successfully"),v(!1),xe({name:"",description:"",sectionType:"",imageCount:5,type:"gallery"}),await St();else throw new Error("Failed to create section")}catch(he){console.error("Failed to create section:",he),t("error","Failed to create section")}},className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),"Create Section"]})]})]})]})}),F&&U&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Choose Image Size"}),(()=>{const he=s.find(be=>be.id===U.sectionId),me=ae(U.sectionId);if(me){const be=me===1.25?"5:4":me===1.7777777777777777?"16:9":me===1.3333333333333333?"4:3":me===.8?"4:5":"1:1";return e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Recommended for ",he==null?void 0:he.name,": ",be]})}return null})()]}),e.jsx("button",{onClick:()=>{V(!1),z(null),I(null)},className:"p-2 hover:bg-gray-100 rounded transition-colors",children:e.jsx(Zt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-2 mb-4 max-h-[60vh] overflow-y-auto",children:[e.jsxs("button",{onClick:()=>Tt(null),className:"w-full px-4 py-3 text-left border border-gray-300 rounded-lg hover:bg-blue-50 hover:border-blue-500 transition-colors",children:[e.jsx("div",{className:"font-medium",children:"Free (No Crop)"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Upload image as-is without cropping"})]}),(()=>{const he=ae(U.sectionId);return[{name:"Square (1:1)",ratio:1,desc:"Perfect for profile images and thumbnails"},{name:"Landscape (16:9)",ratio:16/9,desc:"Widescreen format for banners"},{name:"Portrait (4:5)",ratio:4/5,desc:"Vertical format for mobile"},{name:"Hero Banner (5:4)",ratio:5/4,desc:"Standard hero banner format"},{name:"Standard (4:3)",ratio:4/3,desc:"Classic photo format"}].map(be=>{const ye=he&&Math.abs(be.ratio-he)<.01;return e.jsxs("button",{onClick:()=>Tt(be),className:`w-full px-4 py-3 text-left border rounded-lg transition-colors ${ye?"border-blue-500 bg-blue-50 hover:bg-blue-100":"border-gray-300 hover:bg-blue-50 hover:border-blue-500"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:be.name}),ye&&e.jsx("span",{className:"text-xs bg-blue-500 text-white px-2 py-0.5 rounded",children:"Recommended"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:be.desc})]},be.name)})})()]})]})}),N&&k&&e.jsx(Ej,{imageUrl:k,aspectRatio:O,onCrop:Ct,onCancel:ct}),A&&y&&e.jsx(Y8,{videoUrl:y,aspectRatio:O,onCrop:at,onCancel:Yt}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Set Media Timing"}),e.jsx("button",{onClick:()=>{K(null),q(7e3)},className:"p-2 hover:bg-gray-100 rounded transition-colors",children:e.jsx(Zt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Display Duration: ",(ne/1e3).toFixed(1),"s"]}),e.jsx("input",{type:"range",min:"1000",max:"30000",step:"500",value:ne,onChange:he=>q(parseInt(he.target.value)),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"1s"}),e.jsx("span",{children:"30s"})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[e.jsx("button",{onClick:()=>{K(null),q(7e3)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:async()=>{Y&&(await pe(Y.sectionId,Y.index,ne),K(null),q(7e3))},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),"Save Timing"]})]})]})]})})]})}const Q8=()=>{if(typeof window<"u"){const t=window.location.hostname;if(t==="thenefol.com"||t==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"};function Z8(){const{notify:t}=hr(),[s,r]=b.useState("offers"),[a,n]=b.useState([]),[i,l]=b.useState([]),[o,c]=b.useState([]),[d,u]=b.useState(!1),[p,f]=b.useState(!0),[g,x]=b.useState(null),[h,m]=b.useState(null),[j,v]=b.useState(!1),N=Q8();b.useEffect(()=>{S(),s==="recommendation_posts"?T():A()},[s]);const S=async()=>{try{f(!0),console.log(" Loading products from API:",`${N}/products`);const w=await fetch(`${N}/products?_=${Date.now()}`,{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(!w.ok)throw new Error(`HTTP error! status: ${w.status}`);const R=await w.json();console.log(" Raw API response:",typeof R,Array.isArray(R)?`Array with ${R.length} items`:"Object");let P=[];Array.isArray(R)?(P=R,console.log(" Response is array:",P.length)):R&&R.success&&Array.isArray(R.data)?(P=R.data,console.log(" Response has success.data:",P.length)):R&&Array.isArray(R.data)?(P=R.data,console.log(" Response has data array:",P.length)):console.warn(" Unexpected response format:",R);const H=P.filter(L=>L&&L.id&&L.title).map(L=>({id:L.id,title:L.title||"",slug:L.slug||"",list_image:L.list_image||L.listImage||"",price:L.price||""}));console.log(` Valid products: ${H.length}`),c(H),H.length===0&&console.warn(" No valid products found after filtering")}catch(w){console.error(" Failed to load products:",w),t("error","Failed to load products. Please check the console for details."),c([])}finally{f(!1)}},A=async()=>{try{u(!0);const R=await(await fetch(`${N}/collections?type=${s}`)).json();R.success&&n(R.data||[])}catch(w){console.error("Failed to load collections:",w),t("error","Failed to load collections")}finally{u(!1)}},T=async()=>{try{u(!0);const R=await(await fetch(`${N}/recommendation-posts`)).json();R.success&&l(R.data||[])}catch(w){console.error("Failed to load recommendation posts:",w),t("error","Failed to load recommendation posts")}finally{u(!1)}},k=async w=>{try{const R=localStorage.getItem("auth_token"),P=localStorage.getItem("role")||"admin",H=localStorage.getItem("permissions")||"orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update",L=g!=null&&g.id?`${N}/${s==="recommendation_posts"?"recommendation-posts":"collections"}/${g.id}`:`${N}/${s==="recommendation_posts"?"recommendation-posts":"collections"}`,O=g!=null&&g.id?"PUT":"POST",Q=await(await fetch(L,{method:O,headers:{"Content-Type":"application/json","x-user-role":P,"x-user-permissions":H,...R&&{Authorization:`Bearer ${R}`}},body:JSON.stringify(w)})).json();Q.success?(t("success",g!=null&&g.id?"Updated successfully":"Created successfully"),v(!1),x(null),s==="recommendation_posts"?T():A()):t("error",Q.message||"Failed to save")}catch(R){console.error("Failed to save:",R),t("error","Failed to save")}},_=async()=>{if(h)try{const w=localStorage.getItem("auth_token"),R=localStorage.getItem("role")||"admin",P=localStorage.getItem("permissions")||"orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update",H=h.type==="post"?`${N}/recommendation-posts/${h.id}`:`${N}/collections/${h.id}`,O=await(await fetch(H,{method:"DELETE",headers:{"x-user-role":R,"x-user-permissions":P,...w&&{Authorization:`Bearer ${w}`}}})).json();O.success?(t("success","Deleted successfully"),m(null),s==="recommendation_posts"?T():A()):t("error",O.message||"Failed to delete")}catch(w){console.error("Failed to delete:",w),t("error","Failed to delete")}},y=[{id:"offers",label:"Offers",icon:""},{id:"new_arrivals",label:"New Arrivals",icon:""},{id:"best_sellers",label:"Best Sellers",icon:""},{id:"recommendations",label:"Recommendations",icon:""},{id:"recommendation_posts",label:"Recommendation Posts",icon:""}];return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Product Collections"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage product collections and recommendations"})]}),e.jsxs("button",{onClick:()=>{x(null),v(!0)},className:"btn-primary",children:["Add ",s==="recommendation_posts"?"Recommendation Post":"Item"]})]}),e.jsx("div",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:y.map(w=>e.jsxs("button",{onClick:()=>r(w.id),className:`whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium transition-colors ${s===w.id?"":"border-transparent"}`,style:s===w.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx("span",{className:"mr-2",children:w.icon}),w.label]},w.id))})}),s!=="recommendation_posts"&&e.jsx(e9,{collections:a,loading:d,onEdit:w=>{x(w),v(!0)},onDelete:w=>m({id:w,type:"collection"}),onTogglePublish:async(w,R)=>{try{const P=localStorage.getItem("auth_token"),H=localStorage.getItem("role")||"admin",L=localStorage.getItem("permissions")||"orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update";(await(await fetch(`${N}/collections/${w}`,{method:"PUT",headers:{"Content-Type":"application/json","x-user-role":H,"x-user-permissions":L,...P&&{Authorization:`Bearer ${P}`}},body:JSON.stringify({is_published:!R})})).json()).success&&(t("success","Updated successfully"),A())}catch{t("error","Failed to update")}}}),s==="recommendation_posts"&&e.jsx(t9,{posts:i,loading:d,onEdit:w=>{x(w),v(!0)},onDelete:w=>m({id:w,type:"post"}),onTogglePublish:async(w,R)=>{try{const P=localStorage.getItem("auth_token"),H=localStorage.getItem("role")||"admin",L=localStorage.getItem("permissions")||"orders:read,orders:update,shipping:read,shipping:update,invoices:read,products:update";(await(await fetch(`${N}/recommendation-posts/${w}`,{method:"PUT",headers:{"Content-Type":"application/json","x-user-role":H,"x-user-permissions":L,...P&&{Authorization:`Bearer ${P}`}},body:JSON.stringify({is_published:!R})})).json()).success&&(t("success","Updated successfully"),T())}catch{t("error","Failed to update")}}}),j&&e.jsx(s9,{type:s,editing:g,products:o,productsLoading:p,onClose:()=>{v(!1),x(null)},onSave:k}),h&&e.jsx(za,{open:!0,onClose:()=>m(null),onConfirm:_,title:"Delete Item",description:"Are you sure you want to delete this item? This action cannot be undone."})]})}function e9({collections:t,loading:s,onEdit:r,onDelete:a,onTogglePublish:n}){const l=(()=>{if(typeof window<"u"){const c=window.location.hostname;if(c==="thenefol.com"||c==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),o=c=>{if(!c)return"";if(/^https?:\/\//i.test(c))return c;const d=l.replace(/\/$/,""),u=c.startsWith("/")?c:`/${c}`;return`${d}${u}`};return s?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):t.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No items found"}):e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(c=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[(c.product_image||c.image_url)&&e.jsx("img",{src:o(c.product_image||c.image_url||""),alt:c.product_title||"",className:"h-12 w-12 rounded object-cover mr-3",style:{aspectRatio:"1/1"},onError:d=>{const u=d.currentTarget;u.style.display="none"}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:c.product_title||c.title||"No Product"}),c.product_id&&e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",c.product_id]})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:c.title||"-"}),c.subtitle&&e.jsx("div",{className:"text-sm text-gray-500",children:c.subtitle})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:c.code||"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>n(c.id,c.is_published),className:`px-2 py-1 rounded text-xs font-medium ${c.is_published?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:c.is_published?"Published":"Draft"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.order_index}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>r(c),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>a(c.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},c.id))})]})})}function t9({posts:t,loading:s,onEdit:r,onDelete:a,onTogglePublish:n}){return s?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):t.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No posts found"}):e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Products"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Published"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(i=>{var l,o;return e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:i.title}),i.content&&e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:i.content})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[((l=i.products)==null?void 0:l.length)||((o=i.product_ids)==null?void 0:o.length)||0," products"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>n(i.id,i.is_published),className:`px-2 py-1 rounded text-xs font-medium ${i.is_published?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:i.is_published?"Published":"Draft"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.published_at?new Date(i.published_at).toLocaleDateString():"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>r(i),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>a(i.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},i.id)})})]})})}function s9({type:t,editing:s,products:r,productsLoading:a,onClose:n,onSave:i}){var S,A;const{notify:l}=hr(),o=t==="recommendation_posts",c=!!s,[d,u]=b.useState(!1),[p,f]=b.useState(null),x=(()=>{if(typeof window<"u"){const T=window.location.hostname;if(T==="thenefol.com"||T==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),h=T=>{if(!T)return"";if(/^https?:\/\//i.test(T))return T;const k=x.replace(/\/$/,""),_=T.startsWith("/")?T:`/${T}`;return`${k}${_}`},[m,j]=b.useState(()=>{if(s)if(o){const T=s;return{title:T.title||"",content:T.content||"",image_url:T.image_url||"",product_ids:T.product_ids||[],is_published:T.is_published||!1,order_index:T.order_index||0}}else{const T=s;return{collection_type:T.collection_type,product_id:T.product_id||"",title:T.title||"",subtitle:T.subtitle||"",description:T.description||"",image_url:T.image_url||"",code:T.code||"",expiry_date:T.expiry_date||"",discount_percent:T.discount_percent||"",discount_amount:T.discount_amount||"",is_featured:T.is_featured||!1,is_published:T.is_published||!1,order_index:T.order_index||0}}return{collection_type:t,product_id:"",title:"",subtitle:"",description:"",image_url:"",code:"",expiry_date:"",discount_percent:"",discount_amount:"",is_featured:!1,is_published:!1,order_index:0,...o&&{title:"",content:"",image_url:"",product_ids:[],is_published:!1,order_index:0}}});b.useEffect(()=>{if(m.image_url){const T=/^https?:\/\//i.test(m.image_url)?m.image_url:h(m.image_url);f(T),console.log(" Image preview updated:",{image_url:m.image_url,previewUrl:T})}else f(null)},[m.image_url]);const v=async T=>{var _;const k=(_=T.target.files)==null?void 0:_[0];if(k){if(!k.type.startsWith("image/")){l("error","Please select an image file");return}if(k.size>5*1024*1024){l("error","Image size must be less than 5MB");return}try{u(!0);const y=await Dr(k,x),w=y.replace(/^https?:\/\/[^/]+/,"");console.log(" Uploaded image:",{absoluteUrl:y,relativePath:w}),j({...m,image_url:w}),f(y),l("success","Image uploaded successfully")}catch(y){console.error("Upload failed:",y),l("error","Failed to upload image")}finally{u(!1)}}},N=T=>{T.preventDefault();const k={...m};k.image_url&&(/^https?:\/\//i.test(k.image_url)?k.image_url=k.image_url.replace(/^https?:\/\/[^/]+/,""):k.image_url.startsWith("/")||(k.image_url=`/${k.image_url}`)),o?(k.product_ids=Array.isArray(k.product_ids)?k.product_ids:[],k.order_index=parseInt(k.order_index)||0):(k.product_id=k.product_id?parseInt(k.product_id):null,k.discount_percent=k.discount_percent?parseFloat(k.discount_percent):null,k.discount_amount=k.discount_amount?parseFloat(k.discount_amount):null,k.order_index=parseInt(k.order_index)||0),console.log(" Saving collection with data:",{...k,image_url:k.image_url}),i(k)};return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold",children:[c?"Edit":"Add"," ",o?"Recommendation Post":"Collection Item"]}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[!o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product *"}),e.jsxs("select",{value:m.product_id||"",onChange:T=>j({...m,product_id:T.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,disabled:a,children:[e.jsx("option",{value:"",children:a?"Loading products...":"Select Product"}),a?e.jsx("option",{disabled:!0,children:"Loading products..."}):r.length===0?e.jsx("option",{disabled:!0,children:"No products available"}):r.map(T=>e.jsxs("option",{value:T.id,children:[T.title," ",T.price?`- ${T.price}`:""]},T.id))]}),a&&e.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Loading products from server..."}),!a&&r.length===0&&e.jsxs("p",{className:"mt-1 text-sm text-red-500",children:["No products available. Please add products first in the Products page.",e.jsx("button",{type:"button",onClick:()=>window.open("/admin/products","_blank"),className:"ml-2 text-blue-600 hover:underline",children:"Go to Products"})]}),!a&&r.length>0&&e.jsxs("p",{className:"mt-1 text-sm text-green-600",children:[r.length," product(s) available"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{type:"text",value:m.title,onChange:T=>j({...m,title:T.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subtitle"}),e.jsx("input",{type:"text",value:m.subtitle,onChange:T=>j({...m,subtitle:T.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:m.description,onChange:T=>j({...m,description:T.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Code"}),e.jsx("input",{type:"text",value:m.code,onChange:T=>j({...m,code:T.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Expiry Date"}),e.jsx("input",{type:"date",value:m.expiry_date,onChange:T=>j({...m,expiry_date:T.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Discount %"}),e.jsx("input",{type:"number",step:"0.01",value:m.discount_percent,onChange:T=>j({...m,discount_percent:T.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Discount Amount"}),e.jsx("input",{type:"number",step:"0.01",value:m.discount_amount,onChange:T=>j({...m,discount_amount:T.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]})]}),o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title *"}),e.jsx("input",{type:"text",required:!0,value:m.title,onChange:T=>j({...m,title:T.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Content"}),e.jsx("textarea",{value:m.content,onChange:T=>j({...m,content:T.target.value}),rows:5,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Products"}),e.jsx("select",{multiple:!0,value:((S=m.product_ids)==null?void 0:S.map(String))||[],onChange:T=>{const k=Array.from(T.target.selectedOptions,_=>parseInt(_.value));j({...m,product_ids:k})},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",size:5,children:r.length===0?e.jsx("option",{disabled:!0,children:"Loading products..."}):r.map(T=>e.jsxs("option",{value:T.id,children:[T.title," ",T.price?`- ${T.price}`:""]},T.id))}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Hold Ctrl/Cmd to select multiple products"}),((A=m.product_ids)==null?void 0:A.length)>0&&e.jsxs("p",{className:"mt-1 text-sm text-blue-600",children:["Selected: ",m.product_ids.length," product(s)"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Image"}),e.jsxs("div",{className:"mt-1 space-y-3",children:[p&&e.jsxs("div",{className:"relative w-full bg-gray-100 rounded-lg p-2",children:[e.jsx("img",{src:p,alt:"Preview",className:"w-full h-auto rounded-lg border border-gray-300 object-contain",style:{maxHeight:"256px",width:"auto",margin:"0 auto",display:"block"},onError:T=>{console.error(" Image preview failed to load:",p);const k=T.currentTarget;k.style.display="none",l("error","Failed to load image preview")},onLoad:()=>{console.log(" Image preview loaded:",p)}}),e.jsx("button",{type:"button",onClick:()=>{j({...m,image_url:""}),f(null)},className:"absolute top-4 right-4 bg-red-500 text-white rounded-full p-1.5 hover:bg-red-600 shadow-lg",title:"Remove image",children:""})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"flex-1 cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:v,disabled:d,className:"hidden"}),e.jsx("div",{className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsx("span",{className:"text-sm text-gray-600",children:"Uploading..."}):e.jsx("span",{className:"text-sm text-gray-700",children:" Upload Image"})})]}),e.jsx("span",{className:"text-sm text-gray-500",children:"or"}),e.jsx("input",{type:"url",value:m.image_url||"",onChange:T=>{const k=T.target.value;if(j({...m,image_url:k}),k){const _=/^https?:\/\//i.test(k)?k:h(k);f(_)}else f(null)},placeholder:"Enter image URL (e.g., /uploads/image.jpg or http://...)",className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Upload an image or enter a URL. Recommended: 1200x800px or similar aspect ratio"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Order Index"}),e.jsx("input",{type:"number",value:m.order_index,onChange:T=>j({...m,order_index:T.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-6",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:m.is_featured||!1,onChange:T=>j({...m,is_featured:T.target.checked}),className:"mr-2"}),"Featured"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:m.is_published,onChange:T=>j({...m,is_published:T.target.checked}),className:"mr-2"}),"Published"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d||!o&&!m.product_id,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Uploading...":c?"Update":"Create"})]})]})]})})}function r9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState(""),[c,d]=b.useState("all"),[u,p]=b.useState("cart"),[f,g]=b.useState(null),[x,h]=b.useState(null),[m,j]=b.useState(!1);b.useEffect(()=>{v()},[]);const v=async()=>{try{i(!0);const[y,w]=await Promise.all([fetch("/api/admin/cart/items"),fetch("/api/admin/checkout/sessions")]);if(y.ok){const R=await y.json();s(R.items||[])}if(w.ok){const R=await w.json();a(R.sessions||[])}}catch(y){console.error("Error fetching cart/checkout data:",y)}finally{i(!1)}},N=t.filter(y=>y.product_name.toLowerCase().includes(l.toLowerCase())||y.user_name.toLowerCase().includes(l.toLowerCase())||y.user_email.toLowerCase().includes(l.toLowerCase())),S=r.filter(y=>{const w=y.user_name.toLowerCase().includes(l.toLowerCase())||y.user_email.toLowerCase().includes(l.toLowerCase())||y.session_id.toLowerCase().includes(l.toLowerCase()),R=c==="all"||y.status===c;return w&&R}),A=async(y,w)=>{try{(await fetch(`/api/admin/cart/items/${y}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantity:w})})).ok?s(t.map(P=>P.id===y?{...P,quantity:w,total_price:P.price*w}:P)):alert("Failed to update cart item quantity")}catch(R){console.error("Error updating cart item:",R),alert("Error updating cart item")}},T=async y=>{if(confirm("Are you sure you want to remove this item from cart?"))try{(await fetch(`/api/admin/cart/items/${y}`,{method:"DELETE"})).ok?s(t.filter(R=>R.id!==y)):alert("Failed to remove cart item")}catch(w){console.error("Error removing cart item:",w),alert("Error removing cart item")}},k=async(y,w)=>{try{(await fetch(`/api/admin/checkout/sessions/${y}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:w})})).ok?a(P=>P.map(H=>H.id===y?{...H,status:w}:H)):alert("Failed to update session status")}catch(R){console.error("Error updating session status:",R),alert("Error updating session status")}},_=y=>{switch(y){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"abandoned":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"expired":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Cart & Checkout Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage user carts and checkout sessions"})]}),e.jsx("div",{children:e.jsx("div",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"cart",label:"Cart Items",icon:Xs},{id:"checkout",label:"Checkout Sessions",icon:ni}].map(y=>e.jsxs("button",{onClick:()=>p(y.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm transition-colors ${u===y.id?"":"border-transparent"}`,style:u===y.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx(y.icon,{className:"h-4 w-4 mr-2"}),y.label]},y.id))})})}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search cart/checkout data...",value:l,onChange:y=>o(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})}),u==="checkout"&&e.jsxs("select",{value:c,onChange:y=>d(y.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"abandoned",children:"Abandoned"}),e.jsx("option",{value:"expired",children:"Expired"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(Xs,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Cart Items"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(ni,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Checkout Sessions"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(cs,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending Sessions"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r.filter(y=>y.status==="pending").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(fa,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Cart Value"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:["",t.reduce((y,w)=>y+w.total_price,0).toLocaleString()]})]})]})})]}),u==="cart"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Added"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:N.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-lg object-cover",src:y.product_image||"/placeholder-product.png",alt:y.product_name})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:y.product_name}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",y.product_id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:y.user_name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:y.user_email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>A(y.id,Math.max(1,y.quantity-1)),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"-"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white min-w-[2rem] text-center",children:y.quantity}),e.jsx("button",{onClick:()=>A(y.id,y.quantity+1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"+"})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["",y.price.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["",y.total_price.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(y.added_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{g(y),j(!0)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(ot,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>T(y.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Mt,{className:"h-4 w-4"})})]})})]},y.id))})]})})}),u==="checkout"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Session"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Items"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:S.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:y.session_id}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",y.id]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:y.user_name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:y.user_email})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["",y.total_amount.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:y.items_count}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_(y.status)}`,children:y.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(y.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{h(y),j(!0)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(ot,{className:"h-4 w-4"})}),y.status==="pending"&&e.jsx("button",{onClick:()=>k(y.id,"completed"),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:"Complete"})]})})]},y.id))})]})})}),m&&(f||x)&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:f?"Cart Item Details":"Checkout Session Details"}),e.jsx("div",{className:"space-y-4",children:f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Product"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:f.product_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"User"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[f.user_name," (",f.user_email,")"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Quantity"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:f.quantity})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Unit Price"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:["",f.price.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Price"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:["",f.total_price.toLocaleString()]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Added At"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(f.added_at).toLocaleString()})]})]}):x?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Session ID"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:x.session_id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"User"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[x.user_name," (",x.user_email,")"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Amount"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:["",x.total_amount.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Items Count"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:x.items_count})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_(x.status)}`,children:x.status})]})]}),x.payment_method&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Payment Method"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:x.payment_method})]}),x.shipping_address&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Shipping Address"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:x.shipping_address})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Created At"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(x.created_at).toLocaleString()})]}),x.completed_at&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Completed At"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(x.completed_at).toLocaleString()})]})]}):null}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>{j(!1),g(null),h(null)},className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Close"})})]})})})]})}function a9(){const[t,s]=b.useState([]),[r,a]=b.useState(null),[n,i]=b.useState(!0),[l,o]=b.useState("all"),[c,d]=b.useState(1),[u,p]=b.useState(1),[f,g]=b.useState(""),[x,h]=b.useState(""),[m,j]=b.useState(!1),[v,N]=b.useState("view"),[S,A]=b.useState(""),[T,k]=b.useState("date"),[_,y]=b.useState("desc"),[w,R]=b.useState({total:0,pending:0,approved:0,rejected:0}),[P,H]=b.useState({commission_percentage:15,is_active:!0}),[L,O]=b.useState(!1),[W,Q]=b.useState(!1),[D,F]=b.useState("applications"),[V,te]=b.useState([]),[I,U]=b.useState(!1),[z,Y]=b.useState(null),[K,ne]=b.useState("");b.useEffect(()=>{q(),re()},[l,c,T,_]),b.useEffect(()=>{D==="referrals"&&ve()},[D]),b.useEffect(()=>{const fe=setTimeout(()=>{S!==""&&q()},500);return()=>clearTimeout(fe)},[S]);const q=async()=>{try{i(!0);const fe=new URLSearchParams({page:c.toString(),limit:"10",sort:T,order:_});l!=="all"&&fe.append("status",l),S.trim()&&fe.append("search",S.trim());const ae=await fetch(`/api/admin/affiliate-applications?${fe}`),Be=await ae.json();ae.ok&&Be.applications?(s(Be.applications),p(Be.pagination.pages),R({total:Be.pagination.total,pending:Be.applications.filter(Ct=>Ct.status==="pending").length,approved:Be.applications.filter(Ct=>Ct.status==="approved").length,rejected:Be.applications.filter(Ct=>Ct.status==="rejected").length})):(console.error("Failed to fetch applications:",Be.error||"Unknown error"),s([]),p(0),R({total:0,pending:0,approved:0,rejected:0}))}catch(fe){console.error("Error fetching applications:",fe),alert("Failed to load applications. Please check your connection and try again.")}finally{i(!1)}},re=async()=>{try{const fe=await fetch("/api/admin/affiliate-commission-settings"),ae=await fe.json();fe.ok&&ae.commission_percentage!==void 0&&H(ae)}catch(fe){console.error("Error fetching commission settings:",fe)}},xe=async()=>{try{Q(!0);const fe=await fetch("/api/admin/affiliate-commission-settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)}),ae=await fe.json();fe.ok&&ae.commission_percentage!==void 0?(alert("Commission settings updated successfully!"),O(!1),H(ae),window.io&&window.io.emit("commission_settings_updated",ae)):alert("Failed to update commission settings: "+(ae.error||"Unknown error"))}catch(fe){console.error("Error updating commission settings:",fe),alert("Error updating commission settings")}finally{Q(!1)}},_e=async()=>{if(r)try{const fe=await fetch(`/api/admin/affiliate-applications/${r.id}/approve`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminNotes:f})}),ae=await fe.json();fe.ok&&ae.application?(alert(`Application approved! Verification code: ${ae.verificationCode}`),j(!1),g(""),q()):alert("Failed to approve application: "+(ae.error||"Unknown error"))}catch(fe){console.error("Error approving application:",fe),alert("Error approving application")}},X=async()=>{if(!r||!x.trim()){alert("Please provide a rejection reason");return}try{const fe=await fetch(`/api/admin/affiliate-applications/${r.id}/reject`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({rejectionReason:x})}),ae=await fe.json();fe.ok&&ae.id?(alert("Application rejected"),j(!1),h(""),q()):alert("Failed to reject application: "+(ae.error||"Unknown error"))}catch(fe){console.error("Error rejecting application:",fe),alert("Error rejecting application")}},Ae=(fe,ae)=>{a(fe),N(ae),j(!0),g(""),h("")},Ie=fe=>{switch(fe){case"approved":return e.jsx(Vt,{className:"h-5 w-5 text-green-500"});case"rejected":return e.jsx(ts,{className:"h-5 w-5 text-red-500"});default:return e.jsx(cs,{className:"h-5 w-5 text-yellow-500"})}},He=fe=>{switch(fe){case"approved":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"}},Le=fe=>new Date(fe).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),ve=async()=>{try{U(!0);const fe=await fetch("/api/admin/affiliate-referral-analytics"),ae=await fe.json();fe.ok&&ae.analytics?te(ae.analytics):(console.error("Failed to fetch referral analytics:",ae.error||"Unknown error"),te([]))}catch(fe){console.error("Error fetching referral analytics:",fe),te([])}finally{U(!1)}},st=V.filter(fe=>{var Be,Ct,ct,Tt;if(!K.trim())return!0;const ae=K.toLowerCase();return((Be=fe.name)==null?void 0:Be.toLowerCase().includes(ae))||((Ct=fe.email)==null?void 0:Ct.toLowerCase().includes(ae))||((ct=fe.id)==null?void 0:ct.toString().includes(ae))||((Tt=fe.phone)==null?void 0:Tt.includes(ae))}),St=fe=>{Y(z===fe?null:fe)};return e.jsxs("div",{className:"min-h-screen",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)",backgroundColor:"var(--arctic-blue-background)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsx("div",{className:"metric-card border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Affiliate Program Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage affiliate applications, approvals, and partner accounts"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>F("applications"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${D==="applications"?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Applications"}),e.jsx("button",{onClick:()=>F("referrals"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${D==="referrals"?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Referral Analytics"})]})})]})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[e.jsx(p4,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),L?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:P.commission_percentage,onChange:fe=>H(ae=>({...ae,commission_percentage:parseFloat(fe.target.value)||0})),className:"w-20 px-2 py-1 text-sm border border-blue-300 dark:border-blue-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"}),e.jsx("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:"%"}),e.jsx("button",{onClick:xe,disabled:W,className:"p-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 disabled:opacity-50",title:"Save changes",children:e.jsx(Ms,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>O(!1),className:"p-1 text-gray-600 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",title:"Cancel",children:e.jsx(ts,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:["Commission: ",P.commission_percentage,"%"]}),e.jsx("button",{onClick:()=>O(!0),className:"p-1 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-800 rounded",title:"Edit commission percentage",children:e.jsx(mr,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"flex items-center gap-3",children:D==="applications"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:q,disabled:n,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[e.jsx(vr,{className:`h-4 w-4 ${n?"animate-spin":""}`}),"Refresh"]}),e.jsxs("button",{className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(wa,{className:"h-4 w-4"}),"Export"]})]}):e.jsxs("button",{onClick:ve,disabled:I,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[e.jsx(vr,{className:`h-4 w-4 ${I?"animate-spin":""}`}),"Refresh Analytics"]})})]})}),e.jsx("div",{className:"p-6",children:D==="referrals"?e.jsxs("div",{children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by affiliate name, email, ID, or phone...",value:K,onChange:fe=>ne(fe.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})}),I?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-12 shadow-sm border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(vr,{className:"h-8 w-8 animate-spin mx-auto text-blue-600 dark:text-blue-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading referral analytics..."})]}):st.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-12 shadow-sm border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(No,{className:"h-8 w-8 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:K?"No affiliates found matching your search":"No affiliate data available"})]}):e.jsx("div",{className:"space-y-4",children:st.map(fe=>{var ae,Be,Ct,ct,Tt,_t;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"p-6 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",onClick:()=>St(fe.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:fe.name||"Unknown"}),e.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:["ID: ",fe.id]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${fe.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-400"}`,children:fe.status||"unverified"})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ss,{className:"h-4 w-4"}),fe.email]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(pa,{className:"h-4 w-4"}),fe.phone]}),fe.platform&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Jn,{className:"h-4 w-4"}),fe.platform]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((ae=fe.stats)==null?void 0:ae.total_referrals)||0}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Referrals"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:((Be=fe.stats)==null?void 0:Be.confirmed_referrals)||0}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Confirmed"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:((Ct=fe.stats)==null?void 0:Ct.unique_customers)||0}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Customers"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:["",((Tt=(ct=fe.stats)==null?void 0:ct.total_earnings)==null?void 0:Tt.toFixed(2))||"0.00"]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Earnings"})]}),z===fe.id?e.jsx(um,{className:"h-5 w-5 text-gray-400"}):e.jsx(dm,{className:"h-5 w-5 text-gray-400"})]})]})}),z===fe.id&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6 bg-gray-50 dark:bg-gray-900/50",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Pt,{className:"h-5 w-5"}),"Referrals (",((_t=fe.referrals)==null?void 0:_t.length)||0,")"]}),fe.referrals&&fe.referrals.length>0?e.jsx("div",{className:"space-y-4",children:fe.referrals.map((dt,ut)=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:dt.customer_name||"Unknown Customer"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",dt.customer_email,")"]})]}),dt.order_number&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Order: ",dt.order_number]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:["Date: ",Le(dt.referral_date||dt.order_date)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:["",parseFloat(dt.commission_earned||0).toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Commission"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Order Total: ",parseFloat(dt.order_total||dt.order_total_amount||0).toFixed(2)]})]})]}),dt.order_items&&Array.isArray(dt.order_items)&&dt.order_items.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-1",children:[e.jsx(fa,{className:"h-4 w-4"}),"Products:"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:dt.order_items.map((pe,Me)=>e.jsxs("div",{className:"text-sm bg-gray-50 dark:bg-gray-700/50 rounded p-2",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:pe.title||pe.name||"Unknown Product"}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Qty: ",pe.quantity||0,"  ",parseFloat(pe.price||0).toFixed(2)]})]},Me))})]})]},ut))}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No referrals yet"})]}),fe.products&&fe.products.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(A4,{className:"h-5 w-5"}),"All Products Sold (",fe.products.length,")"]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Product"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Customer"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Order"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Qty"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:fe.products.map((dt,ut)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:dt.product_name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:dt.customer_name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:dt.order_number}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:dt.quantity}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:["",parseFloat(dt.price||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:Le(dt.referral_date)})]},ut))})]})})})]})]})]},fe.id)})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Applications"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:w.total}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"All time applications"})]}),e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-full",children:e.jsx(Pt,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:w.pending}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Awaiting approval"})]}),e.jsx("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/20 rounded-full",children:e.jsx(cs,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:w.approved}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Active partners"})]}),e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-full",children:e.jsx(Vt,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:w.rejected}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Not approved"})]}),e.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/20 rounded-full",children:e.jsx(ts,{className:"h-6 w-6 text-red-600 dark:text-red-400"})})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or platform...",value:S,onChange:fe=>A(fe.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ll,{className:"h-4 w-4 text-gray-400"}),e.jsxs("select",{value:l,onChange:fe=>o(fe.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"h-4 w-4 text-gray-400"}),e.jsxs("select",{value:T,onChange:fe=>k(fe.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"status",children:"Sort by Status"})]})]}),e.jsx("button",{onClick:()=>y(_==="asc"?"desc":"asc"),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:`Sort ${_==="asc"?"Descending":"Ascending"}`,children:_==="asc"?"":""})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Applicant"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Platform"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Followers"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Applied"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(vr,{className:"h-4 w-4 animate-spin"}),"Loading applications..."]})})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(No,{className:"h-8 w-8 text-gray-400"}),"No applications found",S&&e.jsx("p",{className:"text-sm",children:"Try adjusting your search criteria"})]})})}):t.map(fe=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:fe.name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:fe.email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:fe.phone})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:fe.platform})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:fe.followers})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${He(fe.status)}`,children:[Ie(fe.status),fe.status]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:Le(fe.application_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Ae(fe,"view"),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(ot,{className:"h-4 w-4"})}),fe.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Ae(fe,"approve"),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:e.jsx(Vt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Ae(fe,"reject"),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(ts,{className:"h-4 w-4"})})]})]})})]},fe.id))})]})}),u>1&&e.jsx("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Page ",c," of ",u]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>d(Math.max(1,c-1)),disabled:c===1,className:"px-3 py-1 text-sm border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>d(Math.min(u,c+1)),disabled:c===u,className:"px-3 py-1 text-sm border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]}),m&&r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:[v==="view"&&"Application Details",v==="approve"&&"Approve Application",v==="reject"&&"Reject Application"]}),e.jsx("button",{onClick:()=>j(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:e.jsx(ts,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pt,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Name:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.name})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ss,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Email:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pa,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Phone:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.phone})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Social Media Profiles"}),e.jsxs("div",{className:"space-y-3",children:[r.instagram&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_b,{className:"h-4 w-4 text-pink-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Instagram:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.instagram})]}),r.youtube&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Rb,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"YouTube:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.youtube})]}),r.facebook&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Cb,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Facebook:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.facebook})]}),r.snapchat&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fs,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Snapchat:"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.snapchat})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Address"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xm,{className:"h-4 w-4 text-slate-500"}),e.jsxs("span",{className:"text-sm text-slate-900 dark:text-slate-100",children:[r.house_number,", ",r.street,r.building&&`, ${r.building}`,r.apartment&&`, ${r.apartment}`,e.jsx("br",{}),r.road,", ",r.city,e.jsx("br",{}),r.pincode,", ",r.state]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Experience"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-700 p-3 rounded-lg",children:r.experience})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Why Join Nefol?"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-700 p-3 rounded-lg",children:r.why_join})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Platform:"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.platform})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Followers:"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.followers})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Expected Sales:"}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:r.expected_sales})]})]}),v==="approve"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Admin Notes (Optional)"}),e.jsx("textarea",{value:f,onChange:fe=>g(fe.target.value),rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",placeholder:"Add any notes for the affiliate partner..."})]}),v==="reject"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Rejection Reason *"}),e.jsx("textarea",{value:x,onChange:fe=>h(fe.target.value),rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",placeholder:"Please provide a reason for rejection...",required:!0})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),v==="approve"&&e.jsx("button",{onClick:_e,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Approve Application"}),v==="reject"&&e.jsx("button",{onClick:X,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Reject Application"})]})]})})})]})})]})}function n9(){const[t,s]=b.useState([]),[r,a]=b.useState(null),[n,i]=b.useState(!0),[l,o]=b.useState("pending"),[c,d]=b.useState(1),[u,p]=b.useState(1),[f,g]=b.useState(""),[x,h]=b.useState(""),[m,j]=b.useState(!1),[v,N]=b.useState("view"),[S,A]=b.useState(null),[T,k]=b.useState(new Set),[_,y]=b.useState(""),[w,R]=b.useState("date"),[P,H]=b.useState("desc"),[L,O]=b.useState(new Set),[W,Q]=b.useState({total:0,pending:0,approved:0,rejected:0});b.useEffect(()=>{D()},[l,c,w,P]),b.useEffect(()=>{const q=setTimeout(()=>{_!==""&&D()},500);return()=>clearTimeout(q)},[_]);const D=async()=>{try{i(!0);const q=new URLSearchParams({page:c.toString(),limit:"10",sort:w,order:P});l!=="all"&&q.append("status",l),_.trim()&&q.append("search",_.trim());const re=await fetch(`/api/admin/affiliate-applications?${q}`),xe=await re.json();re.ok&&xe.applications?(s(xe.applications),p(xe.pagination.pages),Q({total:xe.pagination.total,pending:xe.applications.filter(_e=>_e.status==="pending").length,approved:xe.applications.filter(_e=>_e.status==="approved").length,rejected:xe.applications.filter(_e=>_e.status==="rejected").length})):(console.error("Failed to fetch applications:",xe.message),s([]),p(0),Q({total:0,pending:0,approved:0,rejected:0}))}catch(q){console.error("Error fetching applications:",q),alert("Failed to load applications. Please check your connection and try again.")}finally{i(!1)}},F=async()=>{var q;if(r)try{const re=await fetch(`/api/admin/affiliate-applications/${r.id}/approve`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminNotes:f})}),xe=await re.json();re.ok&&xe.message?(alert(`Application approved successfully!

Verification Code: ${((q=xe.data)==null?void 0:q.verificationCode)||"Generated"}

Copy this code and send it to the affiliate partner.`),j(!1),g(""),D()):alert(xe.error||xe.message||"Failed to approve application")}catch(re){console.error("Error approving application:",re),alert("Error approving application. Please try again.")}},V=async()=>{if(!r||!x.trim()){alert("Please provide a reason for rejection");return}try{const q=await fetch(`/api/admin/affiliate-applications/${r.id}/reject`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({rejectionReason:x})}),re=await q.json();q.ok&&re.message?(alert("Application rejected successfully!"),j(!1),h(""),D()):alert(re.error||re.message||"Failed to reject application")}catch(q){console.error("Error rejecting application:",q),alert("Error rejecting application. Please try again.")}},te=async q=>{if(confirm("Are you sure you want to regenerate the verification code? This will invalidate the current code and the affiliate partner will need to verify again with the new code."))try{A(q);const re=await fetch(`/api/admin/affiliate-applications/${q}`),xe=await re.json();if(!re.ok){alert(xe.error||"Failed to get application details");return}const _e=await fetch(`/api/admin/affiliate-partners?applicationId=${q}`),X=await _e.json();if(!_e.ok||!X.partners||X.partners.length===0){alert("Affiliate partner record not found");return}const Ae=X.partners[0].id,Ie=await fetch(`/api/admin/affiliate-partners/${Ae}/regenerate-code`,{method:"POST",headers:{"Content-Type":"application/json"}}),He=await Ie.json();Ie.ok&&He.verificationCode?(s(Le=>Le.map(ve=>ve.id===q?{...ve,verification_code:He.verificationCode}:ve)),k(Le=>new Set(Le).add(q)),setTimeout(()=>{k(Le=>{const ve=new Set(Le);return ve.delete(q),ve})},3e3),alert(`New verification code generated successfully!

New Code: ${He.verificationCode}

The code has been updated in the UI and is ready to copy.`)):alert(He.error||He.message||"Failed to regenerate verification code")}catch(re){console.error("Error regenerating verification code:",re),alert("Error regenerating verification code. Please try again.")}finally{A(null)}},I=(q,re)=>{a(q),N(re),j(!0),g(""),h("")},U=q=>{const re=new Set(L);re.has(q)?re.delete(q):re.add(q),O(re)},z=q=>{switch(q){case"approved":return e.jsx(Vt,{className:"h-5 w-5 text-green-500"});case"rejected":return e.jsx(ts,{className:"h-5 w-5 text-red-500"});case"pending":return e.jsx(cs,{className:"h-5 w-5 text-yellow-500"});default:return e.jsx(cs,{className:"h-5 w-5 text-gray-500"})}},Y=q=>{switch(q){case"approved":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}},K=q=>new Date(q).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),ne=async q=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(q),alert("Copied to clipboard!");else{const re=document.createElement("textarea");re.value=q,re.style.position="fixed",re.style.left="-999999px",re.style.top="-999999px",document.body.appendChild(re),re.focus(),re.select(),document.execCommand("copy"),re.remove(),alert("Copied to clipboard!")}}catch(re){console.error("Failed to copy: ",re),alert("Failed to copy to clipboard")}};return e.jsxs("div",{className:"min-h-screen",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)",backgroundColor:"var(--arctic-blue-background)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsx("div",{className:"metric-card border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Affiliate Requests Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Review and manage affiliate applications"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:D,disabled:n,className:"btn-secondary inline-flex items-center gap-2",children:[e.jsx(vr,{className:`h-4 w-4 ${n?"animate-spin":""}`}),"Refresh"]}),e.jsxs("button",{className:"btn-primary inline-flex items-center gap-2",children:[e.jsx(wa,{className:"h-4 w-4"}),"Export"]})]})]})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Requests"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:W.total}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"All applications"})]}),e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-full",children:e.jsx(gs,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:W.pending}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Awaiting approval"})]}),e.jsx("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/20 rounded-full",children:e.jsx(cs,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:W.approved}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Active partners"})]}),e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-full",children:e.jsx(Fb,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:W.rejected}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Not approved"})]}),e.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/20 rounded-full",children:e.jsx(M4,{className:"h-6 w-6 text-red-600 dark:text-red-400"})})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or platform...",value:_,onChange:q=>y(q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ll,{className:"h-4 w-4 text-gray-400"}),e.jsxs("select",{value:l,onChange:q=>o(q.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"h-4 w-4 text-gray-400"}),e.jsxs("select",{value:w,onChange:q=>R(q.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"status",children:"Sort by Status"})]})]}),e.jsx("button",{onClick:()=>H(P==="asc"?"desc":"asc"),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:`Sort ${P==="asc"?"Descending":"Ascending"}`,children:P==="asc"?"":""})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Applicant"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Platform"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Followers"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Applied"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(vr,{className:"h-4 w-4 animate-spin"}),"Loading applications..."]})})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(No,{className:"h-8 w-8 text-gray-400"}),"No applications found",_&&e.jsx("p",{className:"text-sm",children:"Try adjusting your search criteria"})]})})}):t.map(q=>e.jsxs(fx.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:q.name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:q.email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:q.phone})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:q.platform})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:q.followers})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${Y(q.status)}`,children:[z(q.status),q.status]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:K(q.application_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>U(q.id),className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300",title:L.has(q.id)?"Collapse Details":"Expand Details",children:L.has(q.id)?e.jsx("span",{className:"text-lg",children:""}):e.jsx("span",{className:"text-lg",children:"+"})}),e.jsx("button",{onClick:()=>I(q,"view"),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"View Details",children:e.jsx(ot,{className:"h-4 w-4"})}),q.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>I(q,"approve"),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Approve",children:e.jsx(Vt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>I(q,"reject"),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Reject",children:e.jsx(ts,{className:"h-4 w-4"})})]}),q.verification_code&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ne(q.verification_code),className:"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300",title:"Copy Verification Code",children:e.jsx(Zi,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>te(q.id),disabled:S===q.id,className:"text-orange-600 hover:text-orange-900 dark:text-orange-400 dark:hover:text-orange-300 disabled:opacity-50",title:"Regenerate Verification Code",children:e.jsx(vr,{className:`h-4 w-4 ${S===q.id?"animate-spin":""}`})})]})]})})]}),L.has(q.id)&&e.jsx("tr",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("td",{colSpan:7,className:"px-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Application Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Phone:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:q.phone})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Platform:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:q.platform})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Followers:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:q.followers})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Expected Sales:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:q.expected_sales})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Social Media & Verification"}),e.jsxs("div",{className:"space-y-2",children:[q.instagram&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Instagram:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:q.instagram})]}),q.youtube&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"YouTube:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:q.youtube})]}),q.facebook&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Facebook:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:q.facebook})]}),q.verification_code&&e.jsxs("div",{className:`mt-4 p-3 rounded-lg border transition-all duration-500 ${T.has(q.id)?"bg-blue-50 dark:bg-blue-900/20 border-blue-300 dark:border-blue-700 shadow-lg ring-2 ring-blue-200 dark:ring-blue-800":"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm font-semibold ${T.has(q.id)?"text-blue-800 dark:text-blue-200":"text-green-800 dark:text-green-200"}`,children:"Verification Code:"}),T.has(q.id)&&e.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full animate-pulse",children:"Just Updated!"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>ne(q.verification_code),className:`flex items-center gap-1 ${T.has(q.id)?"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200":"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-200"}`,children:[e.jsx(Zi,{className:"h-4 w-4"}),"Copy"]}),e.jsxs("button",{onClick:()=>te(q.id),disabled:S===q.id,className:"text-orange-600 hover:text-orange-800 dark:text-orange-400 dark:hover:text-orange-200 flex items-center gap-1 disabled:opacity-50",children:[e.jsx(vr,{className:`h-4 w-4 ${S===q.id?"animate-spin":""}`}),"Regenerate"]})]})]}),e.jsx("div",{className:`rounded p-2 border transition-colors duration-500 ${T.has(q.id)?"bg-white dark:bg-gray-800 border-blue-300 dark:border-blue-700":"bg-white dark:bg-gray-800 border-green-300 dark:border-green-700"}`,children:e.jsx("code",{className:`text-lg font-mono tracking-wider transition-colors duration-500 ${T.has(q.id)?"text-blue-900 dark:text-blue-100":"text-green-900 dark:text-green-100"}`,children:q.verification_code})}),e.jsx("p",{className:`text-xs mt-1 transition-colors duration-500 ${T.has(q.id)?"text-blue-700 dark:text-blue-300":"text-green-700 dark:text-green-300"}`,children:"Send this 20-digit code to the affiliate partner for account verification"})]}),q.admin_notes&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("span",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200",children:"Admin Notes:"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:q.admin_notes})]}),q.rejection_reason&&e.jsxs("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsx("span",{className:"text-sm font-semibold text-red-800 dark:text-red-200",children:"Rejection Reason:"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:q.rejection_reason})]})]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Address"}),e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[q.house_number,", ",q.street,q.building&&`, ${q.building}`,q.apartment&&`, ${q.apartment}`,", ",q.road,", ",q.city,", ",q.state," - ",q.pincode]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Experience"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:q.experience})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Why Join"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:q.why_join})]})]})})]})})]},q.id))})]})})}),u>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing page ",c," of ",u]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>d(Math.max(1,c-1)),disabled:c===1,className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>d(Math.min(u,c+1)),disabled:c===u,className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),m&&r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[v==="view"&&"Application Details",v==="approve"&&"Approve Application",v==="reject"&&"Reject Application"]}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(ts,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Personal Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ga,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Name:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.name})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ss,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pa,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Phone:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.phone})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xm,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Address:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[r.house_number,", ",r.street,", ",r.road,", ",r.city,", ",r.state," - ",r.pincode]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Social Media & Platform"}),e.jsxs("div",{className:"space-y-3",children:[r.instagram&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_b,{className:"h-4 w-4 text-pink-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Instagram:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.instagram})]}),r.youtube&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Rb,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"YouTube:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.youtube})]}),r.facebook&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Cb,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Facebook:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.facebook})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pt,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Followers:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.followers})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Jn,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Platform:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.platform})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Experience & Motivation"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Experience:"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:r.experience})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Why Join:"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:r.why_join})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Expected Sales:"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:r.expected_sales})]})]})]}),v==="approve"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Admin Notes (Optional)"}),e.jsx("textarea",{value:f,onChange:q=>g(q.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Add any notes for the affiliate partner..."})]}),v==="reject"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rejection Reason *"}),e.jsx("textarea",{value:x,onChange:q=>h(q.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Please provide a reason for rejection...",required:!0})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),v==="approve"&&e.jsxs("button",{onClick:F,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(Vt,{className:"h-4 w-4"}),"Approve Application"]}),v==="reject"&&e.jsxs("button",{onClick:V,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4"}),"Reject Application"]})]})]})})})]})}function i9(){const s=(()=>{if(typeof window<"u"){const S=window.location.hostname;if(S==="thenefol.com"||S==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),[r,a]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState(!1),[c,d]=b.useState(""),[u,p]=b.useState({name:"",email:"",password:""}),[f,g]=b.useState(""),x=b.useMemo(()=>({"Content-Type":"application/json","x-user-role":"admin","x-user-permissions":"users:update"}),[]),h=async()=>{try{o(!0),d("");const[S,A]=await Promise.all([fetch(`${s}/staff/users`),fetch(`${s}/staff/roles`)]),T=await S.json(),k=await A.json();a((T==null?void 0:T.data)||T||[]),i((k==null?void 0:k.data)||k||[])}catch(S){d((S==null?void 0:S.message)||"Failed to load staff")}finally{o(!1)}};b.useEffect(()=>{h()},[]);const m=async()=>{if(!u.name||!u.email||!u.password)return alert("Fill all fields");try{if(!(await fetch(`${s}/staff/users`,{method:"POST",headers:x,body:JSON.stringify(u)})).ok)throw new Error("Failed to create user");p({name:"",email:"",password:""}),await h()}catch(S){alert((S==null?void 0:S.message)||"Failed")}},j=async(S,A)=>{try{if(!(await fetch(`${s}/staff/user-roles`,{method:"POST",headers:x,body:JSON.stringify({staffId:S,roleId:A})})).ok)throw new Error("Failed to assign role");await h()}catch(T){alert((T==null?void 0:T.message)||"Failed")}},v=async S=>{if(!f)return alert("Enter new password");try{const A=await fetch(`${s}/staff/users/reset-password`,{method:"POST",headers:x,body:JSON.stringify({staffId:S,newPassword:f})}),T=await A.json();if(!A.ok)throw new Error((T==null?void 0:T.error)||"Failed to reset password");g(""),alert("Password reset")}catch(A){alert((A==null?void 0:A.message)||"Failed")}},N=async S=>{if(confirm("Disable this account?"))try{const A=await fetch(`${s}/staff/users/disable`,{method:"POST",headers:x,body:JSON.stringify({staffId:S})}),T=await A.json();if(!A.ok)throw new Error((T==null?void 0:T.error)||"Failed to disable");await h()}catch(A){alert((A==null?void 0:A.message)||"Failed")}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Staff Accounts"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage staff members and their access"})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx("input",{className:"input",placeholder:"Name",value:u.name,onChange:S=>p({...u,name:S.target.value})}),e.jsx("input",{className:"input",placeholder:"Email",value:u.email,onChange:S=>p({...u,email:S.target.value})}),e.jsx("input",{className:"input",placeholder:"Password",type:"password",value:u.password,onChange:S=>p({...u,password:S.target.value})}),e.jsx(ms,{role:"admin",children:e.jsx("button",{onClick:m,className:"btn-primary",children:"Create Staff"})})]})}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx("input",{className:"input",placeholder:"New password (for reset)",value:f,onChange:S=>g(S.target.value)}),e.jsx("span",{className:"text-xs text-gray-500",children:"Enter before clicking Reset"})]}),l?"Loading...":c?e.jsx("div",{className:"text-red-600",children:c}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pr-4",children:"Name"}),e.jsx("th",{className:"py-2 pr-4",children:"Email"}),e.jsx("th",{className:"py-2 pr-4",children:"Roles"}),e.jsx("th",{className:"py-2 pr-4",children:"Assign Role"}),e.jsx("th",{className:"py-2 pr-4",children:"Actions"})]})}),e.jsx("tbody",{children:r.map(S=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 pr-4 font-medium",children:S.name}),e.jsx("td",{className:"py-2 pr-4",children:S.email}),e.jsx("td",{className:"py-2 pr-4",children:(S.roles||[]).map(A=>A.name).join(", ")||"-"}),e.jsx("td",{className:"py-2 pr-4",children:e.jsx("div",{className:"flex gap-2 flex-wrap",children:n.map(A=>e.jsx(ms,{role:"admin",children:e.jsx("button",{onClick:()=>j(S.id,A.id),className:"btn-secondary text-xs",children:A.name})},A.id))})}),e.jsx("td",{className:"py-2 pr-4",children:e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(ms,{role:"admin",children:e.jsx("button",{onClick:()=>v(S.id),className:"btn-secondary text-xs",children:"Reset Password"})}),e.jsx(ms,{role:"admin",children:e.jsx("button",{onClick:()=>N(S.id),className:"bg-red-600 text-white px-2 py-1 text-xs rounded",children:"Disable"})})]})})]},S.id))})]})})]})]})}function l9(){const s=(()=>{if(typeof window<"u"){const h=window.location.hostname;if(h==="thenefol.com"||h==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),[r,a]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState({}),[c,d]=b.useState(!1),u=b.useMemo(()=>({"Content-Type":"application/json","x-user-role":"admin","x-user-permissions":"users:update"}),[]),p=(h,m)=>`${h}:${m}`,f=async()=>{try{d(!0);const[h,m,j]=await Promise.all([fetch(`${s}/api/staff/roles`),fetch(`${s}/api/staff/permissions`),fetch(`${s}/api/staff/role-permissions`)]),v=await h.json(),N=await m.json(),S=await j.json(),A=(v==null?void 0:v.data)||v||[],T=(N==null?void 0:N.data)||N||[];a(A),i(T);const k={},_=(S==null?void 0:S.data)||S||[];for(const y of _)y.role_id&&y.permission_id&&(k[p(y.role_id,y.permission_id)]=!0);o(k)}catch{}finally{d(!1)}};b.useEffect(()=>{f()},[]);const g=(h,m)=>{const j=p(h,m);o(v=>({...v,[j]:!v[j]}))},x=async h=>{try{const m=n.filter(N=>l[p(h,N.id)]).map(N=>N.id),j=await fetch(`${s}/api/staff/role-permissions/set`,{method:"POST",headers:u,body:JSON.stringify({roleId:h,permissionIds:m})}),v=await j.json();if(!j.ok)throw new Error((v==null?void 0:v.error)||"Failed to save");alert("Saved")}catch(m){alert((m==null?void 0:m.message)||"Failed")}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Roles & Permission Matrix"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Configure role-based access control"})]}),c?"Loading...":e.jsxs("div",{className:"overflow-x-auto metric-card",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-2 pr-4",style:{color:"var(--text-primary)"},children:"Permission"}),r.map(h=>e.jsx("th",{className:"text-left py-2 pr-4",style:{color:"var(--text-primary)"},children:h.name},h.id))]})}),e.jsx("tbody",{children:n.map(h=>e.jsxs("tr",{className:"border-t",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsx("td",{className:"py-2 pr-4 font-medium",style:{color:"var(--text-secondary)"},children:h.code}),r.map(m=>e.jsx("td",{className:"py-2 pr-4",children:e.jsx("input",{type:"checkbox",checked:!!l[p(m.id,h.id)],onChange:()=>g(m.id,h.id)})},m.id))]},h.id))})]}),e.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:r.map(h=>e.jsxs("button",{onClick:()=>x(h.id),className:"btn-secondary",children:["Save ",h.name]},h.id))})]})]})}function o9(){const s=(()=>{if(typeof window<"u"){const h=window.location.hostname;if(h==="thenefol.com"||h==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),[r,a]=b.useState([]),[n,i]=b.useState(""),[l,o]=b.useState(""),[c,d]=b.useState(""),[u,p]=b.useState(""),[f,g]=b.useState(!1),x=async()=>{try{g(!0);const h=new URLSearchParams;n&&h.set("staff_id",n),l&&h.set("action",l),c&&h.set("from",c),u&&h.set("to",u);const j=await(await fetch(`${s}/api/staff/activity?${h.toString()}`)).json();a((j==null?void 0:j.data)||j||[])}catch{a([])}finally{g(!1)}};return b.useEffect(()=>{x()},[]),e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Audit Logs"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Track all system activities and changes"})]}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[e.jsx("input",{className:"input",placeholder:"Staff ID",value:n,onChange:h=>i(h.target.value)}),e.jsx("input",{className:"input",placeholder:"Action contains",value:l,onChange:h=>o(h.target.value)}),e.jsx("input",{className:"input",type:"date",value:c,onChange:h=>d(h.target.value)}),e.jsx("input",{className:"input",type:"date",value:u,onChange:h=>p(h.target.value)}),e.jsx("button",{className:"btn-primary",onClick:x,children:"Apply Filters"})]})}),e.jsx("div",{className:"metric-card",children:f?"Loading...":e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"border-b text-xs uppercase",style:{borderColor:"var(--arctic-blue-light)",color:"var(--text-muted)"},children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pr-4",children:"Time"}),e.jsx("th",{className:"py-2 pr-4",children:"Staff"}),e.jsx("th",{className:"py-2 pr-4",children:"Action"}),e.jsx("th",{className:"py-2 pr-4",children:"Details"})]})}),e.jsx("tbody",{children:r.map(h=>e.jsxs("tr",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsx("td",{className:"py-2 pr-4",style:{color:"var(--text-secondary)"},children:new Date(h.created_at).toLocaleString()}),e.jsx("td",{className:"py-2 pr-4",style:{color:"var(--text-secondary)"},children:h.staff_id||"-"}),e.jsx("td",{className:"py-2 pr-4",style:{color:"var(--text-secondary)"},children:h.action||"-"}),e.jsx("td",{className:"py-2 pr-4",children:e.jsx("pre",{className:"text-xs whitespace-pre-wrap",style:{color:"var(--text-muted)"},children:h.details?JSON.stringify(h.details):"-"})})]},h.id))})]})})})]})}function c9(){const[t,s]=b.useState({whatsapp_token:"",whatsapp_phone_id:"",notify_phone:"",smtp_provider:"gmail",smtp_host:"",smtp_port:587,smtp_user:"",smtp_pass:"",notify_email:"",from_email:""}),[r,a]=b.useState(""),[n,i]=b.useState("Hello from Nefol Admin!"),[l,o]=b.useState(""),[c,d]=b.useState("Test Email from Nefol"),[u,p]=b.useState("This is a test email."),[f,g]=b.useState(!1),[x,h]=b.useState({email:!1,whatsapp:!1}),[m,j]=b.useState(null),v=async()=>{try{const w=await(await fetch("/api/alerts/config")).json();w!=null&&w.data&&s({...t,...w.data})}catch{}};b.useEffect(()=>{v()},[]);const N=y=>{s({...t,smtp_provider:y,...{gmail:{smtp_host:"",smtp_port:587},hostinger:{smtp_host:"smtp.hostinger.com",smtp_port:587},godaddy:{smtp_host:"smtpout.secureserver.net",smtp_port:587},custom:{smtp_host:"",smtp_port:587}}[y]})},S=async()=>{g(!0);try{const y=await fetch("/api/alerts/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),w=await y.json();if(!y.ok){j({type:"save",success:!1,message:(w==null?void 0:w.error)||"Failed to save"});return}j({type:"save",success:!0,message:"Settings saved successfully!"}),setTimeout(()=>j(null),3e3)}catch(y){j({type:"save",success:!1,message:y.message||"Failed to save"})}finally{g(!1)}},A=async()=>{if(!r){j({type:"whatsapp",success:!1,message:"Please enter a phone number"});return}h({...x,whatsapp:!0});try{const y=await fetch("/api/alerts/test/whatsapp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone_number:r,message:n})}),w=await y.json();if(!y.ok){j({type:"whatsapp",success:!1,message:(w==null?void 0:w.error)||"Failed to send"});return}j({type:"whatsapp",success:!0,message:"WhatsApp message sent successfully!"})}catch(y){j({type:"whatsapp",success:!1,message:y.message||"Failed to send"})}finally{h({...x,whatsapp:!1})}},T=async()=>{if(!l){j({type:"email",success:!1,message:"Please enter recipient email"});return}h({...x,email:!0});try{const y=await fetch("/api/alerts/test/email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:l,subject:c,text:u})}),w=await y.json();if(!y.ok){j({type:"email",success:!1,message:(w==null?void 0:w.error)||"Failed to send"});return}j({type:"email",success:!0,message:"Email sent successfully!"})}catch(y){j({type:"email",success:!1,message:y.message||"Failed to send"})}finally{h({...x,email:!1})}},_=(y=>{const w={gmail:{title:"Gmail SMTP Configuration",description:"Use your Gmail account to send emails. You need to generate an App Password.",instructions:["1. Go to your Google Account settings","2. Enable 2-Step Verification",'3. Generate an App Password for "Mail"',"4. Use your Gmail address and the App Password below"],host:"Automatically configured",port:"587 (TLS)"},hostinger:{title:"Hostinger SMTP Configuration",description:"Use your Hostinger email account to send emails.",instructions:["1. Log in to your Hostinger control panel","2. Go to Email section","3. Use your full email address (e.g., noreply@yourdomain.com)","4. Use your email account password"],host:"smtp.hostinger.com",port:"587 (TLS)"},godaddy:{title:"GoDaddy SMTP Configuration",description:"Use your GoDaddy email account to send emails.",instructions:["1. Log in to your GoDaddy account","2. Go to Email & Office Dashboard","3. Use your full email address (e.g., noreply@yourdomain.com)","4. Use your email account password"],host:"smtpout.secureserver.net",port:"587 (TLS)"},custom:{title:"Custom SMTP Configuration",description:"Configure your own SMTP server settings.",instructions:["1. Enter your SMTP server hostname","2. Enter the SMTP port (usually 587 for TLS, 465 for SSL)","3. Enter your SMTP username and password","4. Test the connection before saving"],host:"Your SMTP server",port:"587 or 465"}};return w[y]||w.custom})(t.smtp_provider||"gmail");return e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Email & WhatsApp Settings"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Configure notification and alert settings"})]})}),m&&e.jsxs("div",{className:`p-4 rounded-lg flex items-center space-x-2 ${m.success?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 border border-red-200 dark:border-red-800"}`,children:[m.success?e.jsx(Vt,{className:"h-5 w-5"}):e.jsx(No,{className:"h-5 w-5"}),e.jsx("span",{children:m.message})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ss,{className:"h-5 w-5 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Email Marketing Configuration"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Email Provider"}),e.jsxs("select",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",value:t.smtp_provider||"gmail",onChange:y=>N(y.target.value),children:[e.jsx("option",{value:"gmail",children:"Gmail"}),e.jsx("option",{value:"hostinger",children:"Hostinger"}),e.jsx("option",{value:"godaddy",children:"GoDaddy"}),e.jsx("option",{value:"custom",children:"Custom SMTP"})]})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2 mb-2",children:[e.jsx(q2,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-300 mb-1",children:_.title}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400 mb-2",children:_.description}),e.jsx("ul",{className:"text-sm text-blue-600 dark:text-blue-400 space-y-1",children:_.instructions.map((y,w)=>e.jsx("li",{children:y},w))}),e.jsxs("div",{className:"mt-3 text-sm",children:[e.jsx("span",{className:"font-medium",children:"SMTP Host:"})," ",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-2 py-1 rounded",children:_.host})," ",e.jsx("span",{className:"font-medium ml-3",children:"Port:"})," ",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-2 py-1 rounded",children:_.port})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["SMTP Host ",t.smtp_provider!=="gmail"&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:_.host,value:t.smtp_host||"",onChange:y=>s({...t,smtp_host:y.target.value}),disabled:t.smtp_provider==="gmail"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["SMTP Port ",t.smtp_provider!=="gmail"&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",type:"number",placeholder:_.port,value:t.smtp_port||587,onChange:y=>s({...t,smtp_port:Number(y.target.value)}),disabled:t.smtp_provider==="gmail"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["SMTP Username/Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"your-email@domain.com",value:t.smtp_user||"",onChange:y=>s({...t,smtp_user:y.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["SMTP Password/App Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",type:"password",placeholder:"Enter password",value:t.smtp_pass||"",onChange:y=>s({...t,smtp_pass:y.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"From Email Address"}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"noreply@yourdomain.com",value:t.from_email||"",onChange:y=>s({...t,from_email:y.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notification Email (for alerts)"}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"admin@yourdomain.com",value:t.notify_email||"",onChange:y=>s({...t,notify_email:y.target.value})})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(fs,{className:"h-5 w-5 text-green-600"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Configuration (Meta Cloud API)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"WhatsApp Phone ID"}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"WhatsApp Phone ID",value:t.whatsapp_phone_id||"",onChange:y=>s({...t,whatsapp_phone_id:y.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Access Token"}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",type:"password",placeholder:"Access Token",value:t.whatsapp_token||"",onChange:y=>s({...t,whatsapp_token:y.target.value})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Default Notify Phone (with country code)"}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"+1234567890",value:t.notify_phone||"",onChange:y=>s({...t,notify_phone:y.target.value})})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2 disabled:opacity-50",onClick:S,disabled:f,children:[e.jsx(Ms,{className:"h-5 w-5"}),e.jsx("span",{children:f?"Saving...":"Save Settings"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4 flex items-center space-x-2",children:[e.jsx(ss,{className:"h-5 w-5"}),e.jsx("span",{children:"Test Email"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Recipient Email",value:l,onChange:y=>o(y.target.value)}),e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Subject",value:c,onChange:y=>d(y.target.value)}),e.jsx("textarea",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Email Body",rows:3,value:u,onChange:y=>p(y.target.value)}),e.jsxs("button",{className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2 disabled:opacity-50",onClick:T,disabled:x.email,children:[e.jsx(ra,{className:"h-4 w-4"}),e.jsx("span",{children:x.email?"Sending...":"Send Test Email"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4 flex items-center space-x-2",children:[e.jsx(fs,{className:"h-5 w-5"}),e.jsx("span",{children:"Test WhatsApp"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Phone with country code (+1234567890)",value:r,onChange:y=>a(y.target.value)}),e.jsx("textarea",{className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Message",rows:4,value:n,onChange:y=>i(y.target.value)}),e.jsxs("button",{className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2 disabled:opacity-50",onClick:A,disabled:x.whatsapp,children:[e.jsx(ra,{className:"h-4 w-4"}),e.jsx("span",{children:x.whatsapp?"Sending...":"Send Test WhatsApp"})]})]})]})]})]})}function d9(){const{id:t}=pb(),s=ja(),[r,a]=b.useState(null),[n,i]=b.useState(!0),[l,o]=b.useState(null),[c,d]=b.useState("overview"),[u,p]=b.useState(""),[f,g]=b.useState("");b.useEffect(()=>{h()},[t]);const x=()=>{if(typeof window<"u"){const V=window.location.hostname;if(V==="thenefol.com"||V==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"},h=async()=>{try{i(!0);const V=x(),te=await fetch(`${V}/users/${t}`);if(te.ok){const I=await te.json();a(I)}else o("Failed to fetch user details")}catch{o("Failed to fetch user details")}finally{i(!1)}},m=async()=>{if(u.trim())try{const V=x();(await fetch(`${V}/users/${t}/notes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:u,note_type:"general"})})).ok&&(p(""),h())}catch(V){console.error("Failed to add note:",V)}},j=async()=>{if(f.trim())try{const V=x();(await fetch(`${V}/users/${t}/tags`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:f})})).ok&&(g(""),h())}catch(V){console.error("Failed to add tag:",V)}},v=async V=>{try{const te=x();await fetch(`${te}/users/${t}/tags`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:V})}),h()}catch(te){console.error("Failed to remove tag:",te)}},N=V=>{const I={page_view:ot,cart:Xs,order:fa,payment:ni,form_submit:gs,login:ga}[V]||On;return e.jsx(I,{className:"h-4 w-4"})},S=V=>({page_view:"text-blue-600 bg-blue-100 dark:bg-blue-900/20",cart:"text-green-600 bg-green-100 dark:bg-green-900/20",order:"text-purple-600 bg-purple-100 dark:bg-purple-900/20",payment:"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20",form_submit:"text-orange-600 bg-orange-100 dark:bg-orange-900/20",login:"text-indigo-600 bg-indigo-100 dark:bg-indigo-900/20"})[V]||"text-gray-600 bg-gray-100 dark:bg-gray-900/20",A=V=>V?new Date(V).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",T=V=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(V||0);if(n)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(l||!r)return e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{className:"text-red-600",children:l||"User not found"}),e.jsx("button",{onClick:()=>s("/admin/users"),className:"mt-4 text-blue-600",children:"Back to Users"})]});const{user:k,stats:_,addresses:y,orders:w,activities:R,sessions:P,notes:H,tags:L,cart:O,wishlist:W,activitySummary:Q,topPages:D,productInteractions:F}=r;return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s("/admin/users"),className:"p-2 hover:bg-[var(--arctic-blue-lighter)] rounded-xl transition-colors",style:{color:"var(--text-secondary)"},children:e.jsx(e2,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:k.name}),e.jsxs("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:["User ID: ",k.id]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${k.is_verified,""}`,style:k.is_verified?{backgroundColor:"#D1FAE5",color:"#059669"}:{backgroundColor:"#FEF3C7",color:"#D97706"},children:k.is_verified?"Verified":"Unverified"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:_.total_orders||0})]}),e.jsx(fa,{className:"h-8 w-8 text-purple-600"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Spent"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:T(_.total_spent)})]}),e.jsx(ko,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Page Views"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:_.total_page_views||0})]}),e.jsx(ot,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loyalty Points"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:k.loyalty_points||0})]}),e.jsx(xr,{className:"h-8 w-8 text-yellow-600"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ss,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:k.email})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pa,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:k.phone||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Mr,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Member Since"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:A(k.created_at)})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(cs,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last Seen"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:A(_.last_seen)})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:L.map(V=>e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 rounded-full text-sm",children:[e.jsx(Pb,{className:"h-3 w-3"}),V,e.jsx("button",{onClick:()=>v(V),className:"hover:text-red-600",children:""})]},V))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:f,onChange:V=>g(V.target.value),placeholder:"Add tag...",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-sm",onKeyPress:V=>V.key==="Enter"&&j()}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"Add"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Addresses"}),e.jsx("div",{className:"space-y-4",children:y.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No addresses saved"}):y.map(V=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400 uppercase",children:V.address_type}),V.is_default&&e.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-300 px-2 py-1 rounded",children:"Default"})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:V.full_name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:V.phone}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:[V.address_line1,V.address_line2&&`, ${V.address_line2}`]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[V.city,", ",V.state," ",V.postal_code]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:V.country})]},V.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Current Cart"}),e.jsx("div",{className:"space-y-2",children:O.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"Cart is empty"}):O.map(V=>e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx(Xs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"flex-1 text-gray-900 dark:text-white",children:V.product_name}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["",V.quantity]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:T(V.price)})]},V.id))})]})]}),e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"flex overflow-x-auto",children:["overview","orders","activity","sessions","notes"].map(V=>e.jsx("button",{onClick:()=>d(V),className:`px-6 py-3 text-sm font-medium capitalize whitespace-nowrap ${c===V?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:V},V))})}),e.jsxs("div",{className:"p-6",children:[c==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Activity Summary"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Q.slice(0,6).map((V,te)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${S(V.activity_type)}`,children:N(V.activity_type)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:V.activity_type}),V.activity_subtype&&e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 capitalize",children:V.activity_subtype})]})]}),e.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:V.count})]},te))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Most Viewed Pages"}),e.jsx("div",{className:"space-y-2",children:D.slice(0,5).map((V,te)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:V.page_title||V.page_url}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:V.page_url})]}),e.jsxs("div",{className:"ml-4 text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[V.view_count," views"]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:new Date(V.last_viewed).toLocaleDateString()})]})]},te))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Product Interactions"}),e.jsx("div",{className:"space-y-2",children:F.slice(0,5).map((V,te)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:V.product_name}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 capitalize",children:[V.activity_type," - ",V.activity_subtype]})]}),e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[V.interaction_count,""]})]},te))})]})]}),c==="orders"&&e.jsx("div",{className:"space-y-4",children:w.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No orders yet"}):w.map(V=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["Order #",V.order_number]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:A(V.created_at)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${V.status==="delivered"?"bg-green-100 text-green-800":V.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:V.status}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white mt-1",children:T(V.total_amount)})]})]}),e.jsx("div",{className:"space-y-2",children:V.items.map((te,I)=>e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx(fa,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"flex-1 text-gray-900 dark:text-white",children:te.product_name}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["",te.quantity]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:T(te.price)})]},I))})]},V.id))}),c==="activity"&&e.jsx("div",{className:"space-y-3",children:R.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No activities yet"}):R.map(V=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:`p-2 rounded-lg ${S(V.activity_type)}`,children:N(V.activity_type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:[V.activity_type,V.activity_subtype&&` - ${V.activity_subtype}`]}),V.page_title&&e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:V.page_title}),V.product_name&&e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[V.product_name,V.product_price&&` - ${T(V.product_price)}`]}),V.payment_amount&&e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Payment: ",T(V.payment_amount)," via ",V.payment_method]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:A(V.created_at)})]})]},V.id))}),c==="sessions"&&e.jsx("div",{className:"space-y-3",children:P.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No sessions yet"}):P.map(V=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W2,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-xs font-mono text-gray-600 dark:text-gray-400",children:[V.session_id.substring(0,12),"..."]})]}),V.ended_at?e.jsx("span",{className:"text-xs text-gray-500",children:"Ended"}):e.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"Active"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Started"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:A(V.started_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Last Activity"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:A(V.last_activity)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Device"}),e.jsxs("p",{className:"text-gray-900 dark:text-white",children:[V.device_type||"Unknown"," - ",V.browser||"Unknown"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Location"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:V.city&&V.country?`${V.city}, ${V.country}`:"Unknown"})]})]})]},V.id))}),c==="notes"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("textarea",{value:u,onChange:V=>p(V.target.value),placeholder:"Add a note about this user...",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white resize-none"}),e.jsx("button",{onClick:m,className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Note"})]}),e.jsx("div",{className:"space-y-3",children:H.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No notes yet"}):H.map(V=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(fs,{className:"h-5 w-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:V.note}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:["By ",V.admin_name||"Admin"]}),e.jsx("span",{children:""}),e.jsx("span",{children:A(V.created_at)})]})]})]})},V.id))})]})]})]})})]})]})}function u9(){var R;const{notify:t}=hr(),[s,r]=b.useState([]),[a,n]=b.useState(!1),[i,l]=b.useState(""),c=(()=>{if(typeof window<"u"){const P=window.location.hostname;if(P==="thenefol.com"||P==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),[d,u]=b.useState(""),[p,f]=b.useState(""),[g,x]=b.useState("0.5"),[h,m]=b.useState(!1),[j,v]=b.useState(null),[N,S]=b.useState(""),[A,T]=b.useState(null),k=async()=>{try{n(!0),l("");const P=await fetch(`${c}/api/shiprocket/shipments`);if(!P.ok)throw new Error(`HTTP error! status: ${P.status}`);const H=await P.json();r(Array.isArray(H)?H:[])}catch(P){console.error("Failed to load shipments:",P),l("Failed to load shipments"),r([])}finally{n(!1)}};b.useEffect(()=>{k();const P=Ye.subscribe("shipment_created",L=>{console.log("New shipment created:",L),r(O=>[L,...O])}),H=Ye.subscribe("shipment_updated",L=>{console.log("Shipment updated:",L),r(O=>O.map(W=>W.id===L.id?L:W))});return()=>{P(),H()}},[]);const _=async P=>{try{const H=await fetch(`${c}/api/shiprocket/orders/${P}/shipment`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(H.ok){const L=await H.json();console.log("Shiprocket shipment created:",L),k(),t("success","Shipment created successfully in Shiprocket!")}else{const L=await H.json().catch(()=>({})),O=(L==null?void 0:L.error)||(L==null?void 0:L.message)||"Failed to create Shiprocket shipment";l(O),t("error",O)}}catch(H){const L=(H==null?void 0:H.message)||"Failed to create Shiprocket shipment";l(L),t("error",L)}},y=async(P,H)=>{try{const L=await fetch(`${c}/api/shiprocket/shipments/${P}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:H,awb_code:`AWB${Date.now()}`,courier_name:"Shiprocket",tracking_url:`https://shiprocket.co/tracking/${P}`})});if(L.ok){const O=await L.json();console.log("Shipment status updated:",O),k(),t("success","Shipment updated")}else l("Failed to update shipment status"),t("error","Failed to update shipment status")}catch{l("Failed to update shipment status")}},w=P=>{switch(P){case"pending":return"bg-yellow-100 text-yellow-800";case"created":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Shipments"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage Shiprocket deliveries"})]}),e.jsx("button",{onClick:k,className:"btn-primary",children:"Refresh"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Pincode Serviceability"}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-2",style:{color:"var(--text-muted)"},children:"Pickup Postcode"}),e.jsx("input",{value:d,onChange:P=>u(P.target.value),placeholder:"110001",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)] w-40",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-2",style:{color:"var(--text-muted)"},children:"Delivery Postcode"}),e.jsx("input",{value:p,onChange:P=>f(P.target.value),placeholder:"560001",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)] w-40",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-2",style:{color:"var(--text-muted)"},children:"Weight (kg)"}),e.jsx("input",{type:"number",step:"0.1",value:g,onChange:P=>x(P.target.value),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)] w-28",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}})]}),e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",style:{color:"var(--text-secondary)"},children:[e.jsx("input",{type:"checkbox",checked:h,onChange:P=>m(P.target.checked)})," COD"]}),e.jsx("button",{onClick:async()=>{try{v(null);const P=new URLSearchParams({pickup_postcode:d,delivery_postcode:p,weight:g,cod:h?"1":"0"}),L=await(await fetch(`${c}/api/shiprocket/serviceability?${P.toString()}`,{headers:{"x-user-role":"admin","x-user-permissions":"shipping:read"}})).json();v(L)}catch{v({success:!1,message:"Failed to check serviceability"})}},className:"btn-primary",children:"Check Serviceability"})]}),j&&e.jsxs("div",{className:"mt-4",children:[(R=j.data)!=null&&R.available_courier_companies&&j.data.available_courier_companies.length>0?e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold mb-3 text-slate-900 dark:text-slate-100",children:["Available Couriers (",j.data.available_courier_companies.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-96 overflow-y-auto",children:j.data.available_courier_companies.map((P,H)=>e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 text-sm",children:P.courier_name}),e.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:[P.is_surface?"Surface":"Air","  ",P.city,", ",P.state]})]}),P.recommended&&e.jsx("span",{className:"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs px-2 py-1 rounded",children:"Recommended"})]}),e.jsxs("div",{className:"space-y-1.5 mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Rate:"}),e.jsxs("span",{className:"font-bold text-slate-900 dark:text-slate-100",children:["",P.rate||P.freight_charge]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Delivery:"}),e.jsx("span",{className:"text-xs font-medium text-slate-900 dark:text-slate-100",children:P.etd||`${P.estimated_delivery_days} days`})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"COD:"}),e.jsx("span",{className:`text-xs font-medium ${P.cod?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:P.cod?"Available":"Not Available"})]}),P.cod_charges>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"COD Charges:"}),e.jsxs("span",{className:"text-xs text-slate-900 dark:text-slate-100",children:["",P.cod_charges]})]}),P.rating&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Rating:"}),e.jsxs("span",{className:"text-xs font-medium text-slate-900 dark:text-slate-100",children:[" ",P.rating.toFixed(1)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tracking:"}),e.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:P.realtime_tracking||"N/A"})]}),P.cutoff_time&&e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cutoff:"}),e.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:P.cutoff_time})]})]}),P.courier_company_id===j.data.recommended_courier_company_id&&e.jsx("div",{className:"mt-2 pt-2 border-t border-slate-200 dark:border-slate-700",children:e.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded",children:" Shiprocket Recommended"})})]},H))})]}):e.jsx("div",{className:"mt-3 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"No courier companies available for this route."})}),e.jsxs("details",{className:"mt-4",children:[e.jsx("summary",{className:"text-xs text-slate-600 dark:text-slate-400 cursor-pointer hover:text-slate-900 dark:hover:text-slate-100",children:"Show Raw Response (for debugging)"}),e.jsx("pre",{className:"mt-2 text-xs bg-slate-50 dark:bg-slate-900 p-3 rounded overflow-auto max-h-64",children:JSON.stringify(j,null,2)})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3 text-slate-900 dark:text-slate-100",children:"Manifest & Pickup"}),e.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[e.jsx("button",{onClick:async()=>{try{const P=s.map(O=>Number(O.order_id)).filter(Boolean),H=await fetch(`${c}/api/shiprocket/manifest`,{method:"POST",headers:{"Content-Type":"application/json","x-user-role":"admin","x-user-permissions":"shipping:update"},body:JSON.stringify({orderIds:P})}),L=await H.json();if(!H.ok)throw new Error((L==null?void 0:L.error)||"Failed");alert(`Manifest Ready: ${L.manifest_url}`)}catch(P){alert((P==null?void 0:P.message)||"Failed to generate manifest")}},className:"px-4 py-2 bg-slate-900 text-white rounded hover:bg-slate-700",children:"Generate Manifest (All)"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-300 mb-1",children:"Pickup Date"}),e.jsx("input",{type:"date",value:N,onChange:P=>S(P.target.value),className:"border px-3 py-2 rounded w-44 dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),e.jsx("button",{onClick:async()=>{if(!N)return alert("Choose pickup date");try{const P=s.map(O=>Number(O.order_id)).filter(Boolean),H=await fetch(`${c}/api/shiprocket/pickup`,{method:"POST",headers:{"Content-Type":"application/json","x-user-role":"admin","x-user-permissions":"shipping:update"},body:JSON.stringify({pickup_date:N,orderIds:P})}),L=await H.json();if(!H.ok)throw new Error((L==null?void 0:L.error)||"Failed");alert("Pickup scheduled")}catch(P){alert((P==null?void 0:P.message)||"Failed to schedule pickup")}},className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Schedule Pickup"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3 text-slate-900 dark:text-slate-100",children:"Non-Delivery Reports (NDR)"}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{onClick:async()=>{try{const H=await(await fetch(`${c}/api/shiprocket/ndr`,{headers:{"x-user-role":"admin","x-user-permissions":"shipping:read"}})).json();T(H)}catch{T({items:[]})}},className:"px-4 py-2 bg-slate-900 text-white rounded hover:bg-slate-700",children:"Load NDRs"})}),A&&e.jsx("pre",{className:"mt-3 text-xs bg-slate-50 dark:bg-slate-900 p-3 rounded overflow-auto max-h-64",children:JSON.stringify(A,null,2)})]}),i&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:i}),a?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Loading shipments..."})}):e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"AWB Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Courier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:s.map(P=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:P.order_id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:P.customer_name||"N/A"}),e.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:P.customer_email||"N/A"})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900 dark:text-slate-100",children:["",P.total?Number(P.total).toFixed(2):"0.00"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(P.status)}`,children:P.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:P.awb_code||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:P.courier_name||"N/A"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[P.status==="pending"&&e.jsx("button",{onClick:()=>_(P.order_id),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:"Create Shipment"}),P.status==="created"&&e.jsx("button",{onClick:()=>y(P.id,"shipped"),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:"Mark Shipped"}),P.status==="shipped"&&e.jsx("button",{onClick:()=>y(P.id,"delivered"),className:"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300",children:"Mark Delivered"}),P.tracking_url&&e.jsx("a",{href:P.tracking_url,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:"Track"}),e.jsx("button",{onClick:async()=>{try{const H=await fetch(`${c}/api/shiprocket/rto/${P.id}`,{method:"POST",headers:{"x-user-role":"admin","x-user-permissions":"shipping:update"}}),L=await H.json();if(!H.ok)throw new Error((L==null?void 0:L.error)||"Failed");alert("Marked RTO"),k()}catch(H){alert((H==null?void 0:H.message)||"Failed to mark RTO")}},className:"text-red-600 hover:text-red-800 ml-2",children:"Mark RTO"})]})]},P.id))})]})})})]})}function x9(){const{orderNumber:t}=pb(),s=ja(),{notify:r}=hr(),[a,n]=b.useState(null),[i,l]=b.useState(!1),[o,c]=b.useState(""),[d,u]=b.useState(""),[p,f]=b.useState(""),[g,x]=b.useState(""),[h,m]=b.useState(""),[j,v]=b.useState(!1),[N,S]=b.useState(null),T=(()=>{if(typeof window<"u"){const O=window.location.hostname;if(O==="thenefol.com"||O==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),k=b.useMemo(()=>{const O=localStorage.getItem("auth_token");return{"Content-Type":"application/json",...O?{Authorization:`Bearer ${O}`}:{},"x-user-permissions":"orders:read,orders:update,shipping:read","x-user-role":"admin"}},[]),_=async()=>{if(t)try{l(!0),c("");const O=await fetch(`${T}/api/orders/${encodeURIComponent(t)}`,{headers:k});if(!O.ok)throw new Error("Failed to fetch order");const W=await O.json();if(n(W),u(W.status),W.id)try{const Q=await fetch(`${T}/api/shiprocket_shipments?order_id=${W.id}`,{headers:k});if(Q.ok){const D=await Q.json(),F=Array.isArray(D)?D:D.data||[];if(F.length>0){const V=F.find(I=>I.order_id===W.id)||F[0],te=V&&V.shipment_id;v(te),S(te?V:null)}else v(!1),S(null)}else v(!1),S(null)}catch{v(!1),S(null)}}catch(O){c((O==null?void 0:O.message)||"Failed to load order")}finally{l(!1)}};b.useEffect(()=>{_()},[t]);const y=async()=>{if(a)try{if(l(!0),!(await fetch(`${T}/api/orders/${a.id}`,{method:"PUT",headers:k,body:JSON.stringify({status:d,note:p})})).ok)throw new Error("Failed to update status");await _(),f(""),r("success","Order status updated")}catch(O){r("error",(O==null?void 0:O.message)||"Failed to update")}finally{l(!1)}},w=async()=>{if(!a)return;const O=g.split(",").map(Q=>Q.trim()).filter(Boolean);if(!(await fetch(`${T}/api/orders/${a.id}/tags`,{method:"POST",headers:k,body:JSON.stringify({tags:O})})).ok){r("error","Failed to update tags");return}await _(),r("success","Tags updated")},R=async()=>{var O;if(a)try{l(!0);const W=await fetch(`${T}/api/shiprocket/orders/${a.id}/shipment`,{method:"POST",headers:k});let Q={};const D=W.headers.get("content-type");if(D&&D.includes("application/json")&&(Q=await W.json()),!W.ok){const F=(Q==null?void 0:Q.error)||(Q==null?void 0:Q.message)||(Q==null?void 0:Q.details)||`Failed to create shipment (${W.status})`;throw new Error(F)}r("success","Shipment created in Shiprocket!"),(Q.shipment_id||(O=Q.shiprocket_response)!=null&&O.shipment_id)&&(v(!0),S(Q)),await _()}catch(W){r("error",(W==null?void 0:W.message)||"Failed to create shipment"),console.error("Create shipment error:",W)}finally{l(!1)}},P=async()=>{if(a)try{if(l(!0),!j||!(N!=null&&N.shipment_id)){r("error","Please create a shipment first. A shipment must be created in Shiprocket before generating an AWB.");return}const O=await fetch(`${T}/api/shiprocket/orders/${a.id}/awb`,{method:"POST",headers:k});let W={};const Q=O.headers.get("content-type");if(Q&&Q.includes("application/json")&&(W=await O.json()),!O.ok){const D=(W==null?void 0:W.error)||(W==null?void 0:W.message)||(W==null?void 0:W.details)||`Failed to create AWB (${O.status})`;throw new Error(D)}r("success","AWB created successfully"),v(!0),S(W),await _()}catch(O){const W=(O==null?void 0:O.message)||"Failed to create AWB";r("error",W),console.error("Create AWB error:",O)}finally{l(!1)}},H=async()=>{if(a)try{l(!0);const O=await fetch(`${T}/api/shiprocket/orders/${a.id}/track`,{headers:k});if(!O.ok){if(O.status===404)throw new Error("Tracking information not available. Please create a shipment first.");const Q=await O.json().catch(()=>({}));throw new Error((Q==null?void 0:Q.error)||(Q==null?void 0:Q.message)||`Failed to fetch tracking (${O.status})`)}const W=await O.json();r("info","Tracking fetched (see console)"),console.log("Tracking:",W)}catch(O){r("error",(O==null?void 0:O.message)||"Failed to fetch tracking"),console.error("View tracking error:",O)}finally{l(!1)}},L=async()=>{var W,Q;if(!a)return;const O=h.split(",").map(D=>parseInt(D.trim(),10)).filter(D=>!isNaN(D));if(O.length===0){r("error","Provide item indexes like 0,2");return}try{l(!0);const D=await fetch(`${T}/api/orders/${a.id}/split`,{method:"POST",headers:k,body:JSON.stringify({itemIndexes:O})}),F=await D.json();if(!D.ok){const V=(F==null?void 0:F.error)||(F==null?void 0:F.message)||(F==null?void 0:F.details)||`Failed to split order (${D.status})`;throw new Error(V)}r("success",`Split created: ${((W=F.split)==null?void 0:W.order_number)||((Q=F.split)==null?void 0:Q.id)}`),await _(),m("")}catch(D){r("error",(D==null?void 0:D.message)||"Failed to split order"),console.error("Split order error:",D)}finally{l(!1)}};return i&&!a?e.jsx("div",{className:"p-6",children:"Loading..."}):o?e.jsx("div",{className:"p-6 text-red-600",children:o}):a?e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:["Order #",a.order_number]}),e.jsxs("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:["Placed on ",new Date(a.created_at).toLocaleString()]})]}),e.jsx("button",{onClick:()=>s(-1),className:"btn-secondary",children:"Back"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"metric-card md:col-span-2",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Items"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-xs uppercase text-gray-500 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pr-4",children:"Product"}),e.jsx("th",{className:"py-2 pr-4",children:"SKU"}),e.jsx("th",{className:"py-2 pr-4",children:"Qty"}),e.jsx("th",{className:"py-2 pr-4",children:"Price"}),e.jsx("th",{className:"py-2 pr-4",children:"Subtotal"})]})}),e.jsx("tbody",{children:(a.items||[]).map((O,W)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 pr-4",children:O.title||O.product_id}),e.jsx("td",{className:"py-2 pr-4",children:O.sku||"-"}),e.jsx("td",{className:"py-2 pr-4",children:O.qty||1}),e.jsxs("td",{className:"py-2 pr-4",children:["",Number(O.price||0).toFixed(2)]}),e.jsxs("td",{className:"py-2 pr-4 font-medium",children:["",Number((O.qty||1)*(O.price||0)).toFixed(2)]})]},W))})]})})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["",Number(a.subtotal||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shipping"}),e.jsxs("span",{children:["",Number(a.shipping||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"GST"}),e.jsxs("span",{children:["",Number(a.tax||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["",Number(a.total||0).toFixed(2)]})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Status"}),e.jsxs("select",{value:d,onChange:O=>u(O.target.value),className:"input w-full",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsx("input",{className:"input w-full",placeholder:"Add note (optional)",value:p,onChange:O=>f(O.target.value)}),e.jsx("button",{onClick:y,className:"btn-primary w-full",children:"Update Status"}),e.jsxs("div",{className:"pt-4 border-t mt-4",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Tags (comma-separated)"}),e.jsx("input",{className:"input w-full",placeholder:"e.g. priority,vip",value:g,onChange:O=>x(O.target.value)}),e.jsx("button",{onClick:w,className:"btn-secondary w-full mt-2",children:"Update Tags"})]}),e.jsxs("div",{className:"pt-4 border-t mt-4",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Split Items (indexes)"}),e.jsx("input",{className:"input w-full",placeholder:"e.g. 0,2",value:h,onChange:O=>m(O.target.value)}),e.jsx("button",{onClick:L,className:"btn-secondary w-full mt-2",children:"Split Order"})]}),e.jsxs("div",{className:"pt-4 border-t mt-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Shipping (Shiprocket)"}),j&&N&&e.jsxs("div",{className:"mb-3 p-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded text-xs",children:[e.jsx("p",{className:"text-green-700 dark:text-green-300 font-medium",children:" Shipment Created"}),N.shipment_id&&e.jsxs("p",{className:"text-green-600 dark:text-green-400",children:["ID: ",N.shipment_id]}),N.awb_code&&e.jsxs("p",{className:"text-green-600 dark:text-green-400",children:["AWB: ",N.awb_code]})]}),!j&&e.jsx("div",{className:"mb-3 p-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded text-xs",children:e.jsx("p",{className:"text-yellow-700 dark:text-yellow-300",children:" Create a shipment first to generate AWB"})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:R,className:"btn-primary w-full",disabled:i||j,children:j?"Shipment Already Created":"Create Shipment"}),e.jsx("button",{onClick:P,className:"btn-secondary w-full",disabled:i||!j,title:j?"":"Please create a shipment first",children:"Generate AWB & Label"}),e.jsx("button",{onClick:H,className:"btn-secondary w-full",disabled:i||!j||!(N!=null&&N.awb_code),title:j?N!=null&&N.awb_code?"":"AWB not generated yet":"Please create a shipment first",children:"View Tracking"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Shipping Address"}),e.jsx("div",{className:"text-sm space-y-1",children:a.shipping_address?typeof a.shipping_address=="string"?e.jsx("p",{children:a.shipping_address}):e.jsxs(e.Fragment,{children:[a.shipping_address.firstName||a.shipping_address.first_name?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"font-semibold",children:[a.shipping_address.firstName||a.shipping_address.first_name," ",a.shipping_address.lastName||a.shipping_address.last_name]}),a.shipping_address.company&&e.jsx("p",{className:"text-xs text-gray-600",children:a.shipping_address.company})]}):e.jsx("p",{className:"font-semibold",children:a.customer_name}),e.jsx("p",{children:a.shipping_address.address||a.shipping_address.street||""}),a.shipping_address.apartment&&e.jsx("p",{children:a.shipping_address.apartment}),e.jsxs("p",{children:[a.shipping_address.city||"",", ",a.shipping_address.state||""," ",a.shipping_address.zip||""]}),e.jsx("p",{children:a.shipping_address.country||"India"}),a.shipping_address.phone&&e.jsxs("p",{children:["Phone: ",a.shipping_address.phone]}),a.shipping_address.email&&e.jsxs("p",{children:["Email: ",a.shipping_address.email]})]}):e.jsx("p",{className:"text-gray-600",children:"No shipping address available"})})]}),a.billing_address&&e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Billing Address"}),e.jsx("div",{className:"text-sm space-y-1",children:typeof a.billing_address=="string"?e.jsx("p",{children:a.billing_address}):e.jsxs(e.Fragment,{children:[a.billing_address.firstName||a.billing_address.first_name?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"font-semibold",children:[a.billing_address.firstName||a.billing_address.first_name," ",a.billing_address.lastName||a.billing_address.last_name]}),a.billing_address.company&&e.jsx("p",{className:"text-xs text-gray-600",children:a.billing_address.company})]}):e.jsx("p",{className:"font-semibold",children:a.customer_name}),e.jsx("p",{children:a.billing_address.address||a.billing_address.street||""}),a.billing_address.apartment&&e.jsx("p",{children:a.billing_address.apartment}),e.jsxs("p",{children:[a.billing_address.city||"",", ",a.billing_address.state||""," ",a.billing_address.zip||""]}),e.jsx("p",{children:a.billing_address.country||"India"})]})})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Timeline"}),e.jsx("div",{className:"space-y-3",children:(a.history||[]).length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No history."}):(a.history||[]).map(O=>e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:O.new_status}),O.old_status?e.jsxs("span",{className:"text-gray-500",children:[" (from ",O.old_status,")"]}):null,O.note?e.jsxs("span",{className:"text-gray-600",children:["  ",O.note]}):null,e.jsx("div",{className:"text-xs text-gray-500",children:new Date(O.created_at).toLocaleString()})]},O.id))})]})]}):e.jsx("div",{className:"p-6",children:"Not found"})}function m9(){var g,x;const[t,s]=b.useState(""),[r,a]=b.useState(""),[n,i]=b.useState(!1),[l,o]=b.useState(""),{login:c,isAuthenticated:d,isLoading:u}=Bo(),p=ui();if(d){const h=((x=(g=p.state)==null?void 0:g.from)==null?void 0:x.pathname)||"/admin/dashboard";return e.jsx(jo,{to:h,replace:!0})}const f=async h=>{h.preventDefault(),i(!0),o("");try{await c(t,r)||o("Invalid email or password")}catch{o("Login failed. Please try again.")}finally{i(!1)}};return u?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Nefol Admin Panel"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:"Sign in to your admin account"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:f,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:h=>s(h.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Email address"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:h=>a(h.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Password"})]})]}),l&&e.jsx("div",{className:"text-red-600 text-sm text-center",children:l}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:n,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:n?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"})})]})]})})}function h9(){var te;const{notify:t}=hr(),[s,r]=b.useState([]),[a,n]=b.useState(""),[i,l]=b.useState([]),[o,c]=b.useState(!0),[d,u]=b.useState(null),[p,f]=b.useState(null),[g,x]=b.useState(!1),[h,m]=b.useState(!1),[j,v]=b.useState(!1),[N,S]=b.useState(null),[A,T]=b.useState("pages"),_=(()=>{if(typeof window<"u"){const I=window.location.hostname;return I==="thenefol.com"||I==="www.thenefol.com"?`${window.location.protocol}//${window.location.host}/api`:"https://thenefol.com/api"}return"https://thenefol.com/api"})(),y=async()=>{try{const z=(await(await fetch(`${_}/cms/pages`)).json()).map(Y=>({id:Y.id,page_name:Y.slug,page_title:Y.title,page_subtitle:"",meta_description:Y.meta_description||"",created_at:Y.created_at,updated_at:Y.updated_at}));r(z),z.length>0&&!a&&n(z[0].page_name)}catch(I){console.error("Failed to fetch pages:",I),t("error","Failed to fetch pages")}},w=async I=>{try{const Y=(await(await fetch(`${_}/cms/sections/${I}`)).json()).map(K=>({id:K.id,page_name:I,section_key:K.section_type,section_title:K.title||K.section_type,section_type:K.section_type,content:K.content,order_index:K.order_index,is_active:K.is_active,created_at:K.created_at,updated_at:K.updated_at}));l(Y)}catch(U){console.error("Failed to fetch sections:",U),t("error","Failed to fetch sections")}};b.useEffect(()=>{y().then(()=>c(!1)),Ye.connect(),v(Ye.isConnected());const I=Ye.subscribe("cms-update",z=>{console.log(" Real-time CMS update received:",z),S(new Date),z.event.includes("page")&&y(),z.event.includes("section")&&a&&w(a)}),U=setInterval(()=>{v(Ye.isConnected())},3e3);return()=>{clearInterval(U),I()}},[]),b.useEffect(()=>{a&&w(a)},[a]);const R=async I=>{try{(await fetch(`${_}/cms/pages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:I.page_name,title:I.page_title,content:{},meta_description:I.meta_description})})).ok&&(await y(),x(!1),u(null),t("success","Page saved"))}catch(U){console.error("Failed to save page:",U),t("error","Failed to save page")}},[P,H]=b.useState(null),L=async I=>{try{await fetch(`${_}/cms/pages/${I}`,{method:"DELETE"}),await y(),a===I&&n(""),t("success","Page deleted")}catch(U){console.error("Failed to delete page:",U),t("error","Failed to delete page")}},O=async I=>{try{(await fetch(`${_}/cms/sections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page_slug:a,section_type:I.section_type,title:I.section_title,content:I.content,order_index:I.order_index,is_active:I.is_active})})).ok&&(await w(a),m(!1),f(null),t("success","Section saved"))}catch(U){console.error("Failed to save section:",U),t("error","Failed to save section")}},[W,Q]=b.useState(null),D=async I=>{try{await fetch(`${_}/cms/sections/${I}`,{method:"DELETE"}),await w(a),t("success","Section deleted")}catch(U){console.error("Failed to delete section:",U),t("error","Failed to delete section")}},F=async I=>{await O({...I,is_active:!I.is_active})},V=async(I,U)=>{const z=U==="up"?I.order_index-1:I.order_index+1,Y=i.find(K=>K.order_index===z);Y&&(await O({...I,order_index:z}),await O({...Y,order_index:I.order_index}),await w(a))};return o?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"text-lg",children:"Loading CMS..."})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Content Management System"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[j?e.jsxs(e.Fragment,{children:[e.jsx(e3,{className:"w-4 h-4",style:{color:"#059669"}}),e.jsx("span",{className:"text-sm",style:{color:"#059669"},children:"Live  Real-time updates enabled"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Q4,{className:"w-4 h-4",style:{color:"var(--text-muted)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Offline  Changes may not sync"})]}),N&&e.jsxs("span",{className:"text-xs ml-4",style:{color:"var(--text-muted)"},children:["Last update: ",N.toLocaleTimeString()]})]})]}),e.jsxs("button",{onClick:()=>{u(null),x(!0)},className:"btn-primary flex items-center gap-2",children:[e.jsx(rs,{className:"w-5 h-5"}),"New Page"]})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>T("pages"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${A==="pages"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Pages"}),e.jsx("button",{onClick:()=>T("sections"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${A==="sections"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Sections"}),e.jsxs("button",{onClick:()=>T("settings"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${A==="settings"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(ws,{className:"w-4 h-4 mr-2"}),"Settings"]})]}),A==="pages"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"CMS Pages"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(I=>e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold",children:I.page_title||I.page_name}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:I.page_name}),I.page_subtitle&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:I.page_subtitle}),I.meta_description&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:I.meta_description})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>{u(I),x(!0)},className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(qu,{className:"w-4 h-4 text-blue-600"})}),e.jsx("button",{onClick:()=>H(I.page_name),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(Mt,{className:"w-4 h-4 text-red-600"})})]})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Created: ",new Date(I.created_at).toLocaleDateString()]})]},I.id))})]}),A==="sections"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 bg-white rounded-lg shadow p-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Select Page"}),e.jsx("div",{className:"space-y-2",children:s.map(I=>e.jsx("div",{className:`p-3 rounded-lg cursor-pointer flex items-center justify-between ${a===I.page_name?"bg-blue-100 border-blue-500 border":"bg-gray-50 hover:bg-gray-100"}`,onClick:()=>n(I.page_name),children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:I.page_title||I.page_name}),e.jsx("div",{className:"text-xs text-gray-500",children:I.page_name})]})},I.id))})]}),e.jsx("div",{className:"lg:col-span-3",children:a?e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold",children:["Sections for ",((te=s.find(I=>I.page_name===a))==null?void 0:te.page_title)||a]}),e.jsxs("button",{onClick:()=>{f(null),m(!0)},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(rs,{className:"w-5 h-5"}),"Add Section"]})]}),e.jsx("div",{className:"space-y-4",children:i.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No sections yet. Add your first section to get started."}):i.map(I=>e.jsxs("div",{className:`border rounded-lg p-4 ${I.is_active?"border-gray-200":"border-gray-300 bg-gray-50 opacity-60"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:I.section_title}),e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 rounded",children:I.section_type}),!I.is_active&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded",children:"Hidden"})]}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:I.section_key})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>V(I,"up"),disabled:I.order_index===0,className:"p-1 hover:bg-gray-200 rounded disabled:opacity-30",children:e.jsx(um,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>V(I,"down"),disabled:I.order_index===i.length-1,className:"p-1 hover:bg-gray-200 rounded disabled:opacity-30",children:e.jsx(dm,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>F(I),className:"p-1 hover:bg-gray-200 rounded",children:I.is_active?e.jsx(ot,{className:"w-5 h-5 text-green-600"}):e.jsx(Wu,{className:"w-5 h-5 text-gray-400"})}),e.jsx("button",{onClick:()=>{f(I),m(!0)},className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(qu,{className:"w-5 h-5 text-blue-600"})}),e.jsx("button",{onClick:()=>Q(I.id),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(Mt,{className:"w-5 h-5 text-red-600"})})]})]}),e.jsx("div",{className:"bg-gray-50 rounded p-3 text-sm",children:e.jsx("pre",{className:"whitespace-pre-wrap font-mono text-xs",children:JSON.stringify(I.content,null,2)})})]},I.id))})]}):e.jsx("div",{className:"bg-white rounded-lg shadow p-12 text-center text-gray-500",children:"Select a page from the sidebar to view and edit its sections"})})]}),A==="settings"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"CMS Settings"}),e.jsx("div",{className:"text-center py-12 text-gray-500",children:"CMS Settings panel coming soon..."})]}),g&&e.jsx(f9,{page:d,onSave:R,onClose:()=>{x(!1),u(null)}}),h&&e.jsx(p9,{section:p,pageName:a,onSave:O,onClose:()=>{m(!1),f(null)}}),e.jsx(za,{open:!!P,onClose:()=>H(null),onConfirm:()=>{P&&L(P)},title:"Delete this page?",description:"This will remove all its sections.",confirmText:"Delete"}),e.jsx(za,{open:!!W,onClose:()=>Q(null),onConfirm:()=>{W!=null&&D(W)},title:"Delete this section?",description:"This action cannot be undone.",confirmText:"Delete"})]})}function f9({page:t,onSave:s,onClose:r}){const[a,n]=b.useState({page_name:(t==null?void 0:t.page_name)||"",page_title:(t==null?void 0:t.page_title)||"",page_subtitle:(t==null?void 0:t.page_subtitle)||"",meta_description:(t==null?void 0:t.meta_description)||""}),i=l=>{l.preventDefault(),s(a)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:t?"Edit Page":"Create New Page"}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(Zt,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Page Name (URL Slug)"}),e.jsx("input",{type:"text",value:a.page_name,onChange:l=>n({...a,page_name:l.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"home, about, contact",required:!0,disabled:!!t}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used in the URL, cannot be changed after creation"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Page Title"}),e.jsx("input",{type:"text",value:a.page_title,onChange:l=>n({...a,page_title:l.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Home Page"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Page Subtitle"}),e.jsx("input",{type:"text",value:a.page_subtitle,onChange:l=>n({...a,page_subtitle:l.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Welcome to our store"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Meta Description"}),e.jsx("textarea",{value:a.meta_description,onChange:l=>n({...a,meta_description:l.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Description for SEO"})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:r,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),"Save Page"]})]})]})]})})}function p9({section:t,pageName:s,onSave:r,onClose:a}){const[n,i]=b.useState({section_key:(t==null?void 0:t.section_key)||"",section_title:(t==null?void 0:t.section_title)||"",section_type:(t==null?void 0:t.section_type)||"text",content:t!=null&&t.content?JSON.stringify(t.content,null,2):"{}",order_index:(t==null?void 0:t.order_index)||0,is_active:(t==null?void 0:t.is_active)!==!1}),l=c=>{c.preventDefault();try{const d=JSON.parse(n.content);r({...n,content:d})}catch{alert("Invalid JSON content")}},o=["hero","text","grid","list","gallery","form","testimonials","features","pricing","cta","contact","faq","team","stats"];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:t?"Edit Section":"Create New Section"}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(Zt,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Section Key (Unique Identifier)"}),e.jsx("input",{type:"text",value:n.section_key,onChange:c=>i({...n,section_key:c.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"hero_banner, features_section",required:!0,disabled:!!t}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unique key for this section, cannot be changed after creation"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Section Title"}),e.jsx("input",{type:"text",value:n.section_title,onChange:c=>i({...n,section_title:c.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Hero Banner"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Section Type"}),e.jsx("select",{value:n.section_type,onChange:c=>i({...n,section_type:c.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:o.map(c=>e.jsx("option",{value:c,children:c},c))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Content (JSON)"}),e.jsx("textarea",{value:n.content,onChange:c=>i({...n,content:c.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 font-mono text-sm",rows:15,placeholder:'{"title": "Welcome", "description": "..."}'}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter valid JSON content for this section"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Order Index"}),e.jsx("input",{type:"number",value:n.order_index,onChange:c=>i({...n,order_index:parseInt(c.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 border rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.is_active,onChange:c=>i({...n,is_active:c.target.checked}),className:"w-4 h-4"}),e.jsx("span",{children:"Active (Visible on website)"})]})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),"Save Section"]})]})]})]})})}function g9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!1),[l,o]=b.useState("requests"),[c,d]=b.useState("all"),[u,p]=b.useState(""),[f,g]=b.useState(null),[x,h]=b.useState(!1),m=Pn(),j=async()=>{try{i(!0);const w=await(await fetch(`${m}/blog/admin/requests`)).json();s(w)}catch(y){console.error("Failed to fetch blog requests:",y)}finally{i(!1)}},v=async()=>{try{i(!0);const w=await(await fetch(`${m}/blog/admin/posts`)).json();a(w)}catch(y){console.error("Failed to fetch blog posts:",y)}finally{i(!1)}};b.useEffect(()=>{l==="requests"?j():v()},[l]);const N=async(y,w=!1)=>{try{(await fetch(`${m}/blog/admin/approve/${y}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({featured:w})})).ok&&(await j(),await v())}catch(R){console.error("Failed to approve blog request:",R)}},S=async(y,w)=>{try{(await fetch(`${m}/blog/admin/reject/${y}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:w})})).ok&&await j()}catch(R){console.error("Failed to reject blog request:",R)}},A=async y=>{if(confirm("Are you sure you want to delete this blog post?"))try{(await fetch(`${m}/blog/admin/posts/${y}`,{method:"DELETE"})).ok&&await v()}catch(w){console.error("Failed to delete blog post:",w)}},T=t.filter(y=>{const w=c==="all"||y.status===c,R=y.title.toLowerCase().includes(u.toLowerCase())||y.author_name.toLowerCase().includes(u.toLowerCase());return w&&R}),k=r.filter(y=>y.title.toLowerCase().includes(u.toLowerCase())||y.author_name.toLowerCase().includes(u.toLowerCase())),_=y=>{switch(y){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Blog Request Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage blog submissions and published posts"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"w-5 h-5",style:{color:"#D97706"}}),e.jsxs("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:[t.filter(y=>y.status==="pending").length," pending"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"w-5 h-5",style:{color:"#059669"}}),e.jsxs("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:[r.filter(y=>y.status==="approved").length," published"]})]})]})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>o("requests"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="requests"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Blog Requests"}),e.jsx("button",{onClick:()=>o("posts"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="posts"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Published Posts"})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by title or author...",value:u,onChange:y=>p(y.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),l==="requests"&&e.jsxs("select",{value:c,onChange:y=>d(y.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),n?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Loading..."})]}):e.jsx("div",{className:"space-y-4",children:l==="requests"?T.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No blog requests found"}):T.map(y=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:y.title}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${_(y.status)}`,children:y.status}),y.featured&&e.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded flex items-center gap-1",children:[e.jsx(xr,{className:"w-3 h-3"}),"Featured"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ga,{className:"w-4 h-4"}),y.author_name]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Mr,{className:"w-4 h-4"}),new Date(y.created_at).toLocaleDateString()]})]}),e.jsx("p",{className:"text-gray-700 mb-3",children:y.excerpt}),y.images&&y.images.length>0&&e.jsx("div",{className:"flex gap-2 mb-3",children:y.images.map((w,R)=>e.jsx("img",{src:`${m}${w}`,alt:`Blog image ${R+1}`,className:"w-16 h-16 object-cover rounded"},R))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{g(y),h(!0)},className:"flex items-center gap-1 px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700",children:[e.jsx(ot,{className:"w-4 h-4"}),"View"]}),y.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>N(y.id,!1),className:"flex items-center gap-1 px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:[e.jsx(Vt,{className:"w-4 h-4"}),"Approve"]}),e.jsxs("button",{onClick:()=>N(y.id,!0),className:"flex items-center gap-1 px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",children:[e.jsx(xr,{className:"w-4 h-4"}),"Featured"]}),e.jsxs("button",{onClick:()=>{const w=prompt("Reason for rejection:");w&&S(y.id,w)},className:"flex items-center gap-1 px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:[e.jsx(ts,{className:"w-4 h-4"}),"Reject"]})]})]})]}),y.rejection_reason&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"Rejection Reason:"})," ",y.rejection_reason]})})]},y.id)):k.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No published posts yet"}):k.map(y=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:y.title}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${_(y.status)}`,children:y.status}),y.featured&&e.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded flex items-center gap-1",children:[e.jsx(xr,{className:"w-3 h-3"}),"Featured"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ga,{className:"w-4 h-4"}),y.author_name]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Mr,{className:"w-4 h-4"}),new Date(y.created_at).toLocaleDateString()]})]}),e.jsx("p",{className:"text-gray-700",children:y.excerpt})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{g(y),h(!0)},className:"flex items-center gap-1 px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700",children:[e.jsx(ot,{className:"w-4 h-4"}),"View"]}),e.jsxs("button",{onClick:()=>A(y.id),className:"flex items-center gap-1 px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:[e.jsx(Mt,{className:"w-4 h-4"}),"Delete"]})]})]}),y.images&&y.images.length>0&&e.jsx("div",{className:"flex gap-2",children:y.images.map((w,R)=>e.jsx("img",{src:`${m}${w}`,alt:`Blog image ${R+1}`,className:"w-16 h-16 object-cover rounded"},R))})]},y.id))}),x&&f&&e.jsx(y9,{blog:f,onClose:()=>{h(!1),g(null)}})]})}function y9({blog:t,onClose:s}){const r=Pn();return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:t.title}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(ts,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ga,{className:"w-4 h-4"}),t.author_name," (",t.author_email,")"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Mr,{className:"w-4 h-4"}),new Date(t.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"bg-gray-50 rounded p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Excerpt:"}),e.jsx("p",{className:"text-gray-700",children:t.excerpt})]}),e.jsxs("div",{className:"bg-gray-50 rounded p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Full Content:"}),e.jsx("div",{className:"whitespace-pre-wrap text-gray-700",children:t.content})]}),t.images&&t.images.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Images:"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:t.images.map((a,n)=>e.jsx("img",{src:`${r}${a}`,alt:`Blog image ${n+1}`,className:"w-full h-32 object-cover rounded"},n))})]}),t.rejection_reason&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-4",children:[e.jsx("h3",{className:"font-semibold text-red-800 mb-2",children:"Rejection Reason:"}),e.jsx("p",{className:"text-red-700",children:t.rejection_reason})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:s,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Close"})})]})})}function b9(){const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(!1),[l,o]=b.useState(null),[c,d]=b.useState({name:"",description:"",points_per_rupee:1,referral_bonus:100,vip_threshold:1e3,status:"active"});b.useEffect(()=>{u()},[]);const u=async()=>{try{a(!0);const g=await et.getLoyaltyPrograms();s(g)}catch(g){console.error("Failed to fetch loyalty programs:",g)}finally{a(!1)}},p=async g=>{g.preventDefault();try{l?await et.updateLoyaltyProgram(l,c):await et.createLoyaltyProgram(c),i(!1),o(null),d({name:"",description:"",points_per_rupee:1,referral_bonus:100,vip_threshold:1e3,status:"active"}),u()}catch(x){console.error("Failed to save loyalty program:",x)}},f=g=>{d({name:g.name,description:g.description||"",points_per_rupee:g.points_per_rupee??1,referral_bonus:g.referral_bonus??0,vip_threshold:g.vip_threshold??0,status:g.status||"active"}),o(g.id),i(!0)};return e.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Loyalty Program"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage customer loyalty programs and rewards"})]}),e.jsxs("button",{onClick:()=>{i(!n),n||o(null)},className:"btn-primary inline-flex items-center",children:[e.jsx(rs,{className:"h-4 w-4 mr-2"})," ",n?"Close":"Add Program"]})]}),n&&e.jsxs("form",{onSubmit:p,className:"bg-white dark:bg-slate-800 rounded-lg p-4 shadow space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-300 mb-1",children:"Name"}),e.jsx("input",{value:c.name,onChange:g=>d({...c,name:g.target.value}),className:"w-full px-3 py-2 border rounded-md bg-slate-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-300 mb-1",children:"Points per  (rupee)"}),e.jsx("input",{type:"number",step:"0.01",value:c.points_per_rupee,onChange:g=>d({...c,points_per_rupee:Number(g.target.value)}),className:"w-full px-3 py-2 border rounded-md bg-slate-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-300 mb-1",children:"Referral Bonus (points)"}),e.jsx("input",{type:"number",value:c.referral_bonus,onChange:g=>d({...c,referral_bonus:Number(g.target.value)}),className:"w-full px-3 py-2 border rounded-md bg-slate-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-300 mb-1",children:"VIP Threshold (points)"}),e.jsx("input",{type:"number",value:c.vip_threshold,onChange:g=>d({...c,vip_threshold:Number(g.target.value)}),className:"w-full px-3 py-2 border rounded-md bg-slate-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-300 mb-1",children:"Description"}),e.jsx("textarea",{value:c.description,onChange:g=>d({...c,description:g.target.value}),className:"w-full px-3 py-2 border rounded-md bg-slate-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-300 mb-1",children:"Status"}),e.jsxs("select",{value:c.status,onChange:g=>d({...c,status:g.target.value}),className:"w-full px-3 py-2 border rounded-md bg-slate-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"active",children:"active"}),e.jsx("option",{value:"inactive",children:"inactive"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",className:"px-4 py-2 rounded-md bg-green-600 text-white hover:bg-green-700",children:[l?"Update":"Create"," Program"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Configured Programs"})}),e.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:r?e.jsx("div",{className:"p-4 text-slate-600 dark:text-slate-300",children:"Loading..."}):t.length===0?e.jsx("div",{className:"p-4 text-slate-600 dark:text-slate-300",children:"No programs configured."}):t.map(g=>e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:g.name}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Points/: ",g.points_per_rupee??1,"  Referral Bonus: ",g.referral_bonus??0,"  VIP Threshold: ",g.vip_threshold??0,"  Status: ",g.status]})]}),e.jsxs("button",{onClick:()=>f(g),className:"inline-flex items-center px-3 py-2 rounded-md bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600",children:[e.jsx(mr,{className:"h-4 w-4 mr-2"})," Edit"]})]},g.id))})]})]})}const wc=t=>`${t} coins`;function v9(){const[t,s]=b.useState(null),[r,a]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState(!0),[c,d]=b.useState(""),[u,p]=b.useState(!1),[f,g]=b.useState(0);b.useEffect(()=>{x()},[]);const x=async()=>{try{o(!0),d("");const[v,N,S]=await Promise.all([et.getCashbackWallet().catch(()=>null),et.getCashbackOffers().catch(()=>[]),et.getCashbackTransactions().catch(()=>[])]);v&&s(v),a(Array.isArray(N)?N:[]),i(Array.isArray(S)?S:[])}catch(v){console.error("Failed to load cashback data:",v),d("Failed to load cashback data")}finally{o(!1)}},h=v=>{switch(v){case"pending":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"approved":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"credited":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"expired":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},m=v=>{switch(v){case"pending":return e.jsx(cs,{className:"h-4 w-4"});case"approved":return e.jsx(Vt,{className:"h-4 w-4"});case"credited":return e.jsx(Vt,{className:"h-4 w-4"});case"expired":return e.jsx(ts,{className:"h-4 w-4"});default:return e.jsx(cs,{className:"h-4 w-4"})}},j=async()=>{if(!t||f>t.availableBalance){alert("Insufficient balance");return}if(f<100){alert("Minimum redemption amount is 100");return}try{await et.redeemCashback({amount:f}),alert(`Cashback redemption request submitted for ${f}`),p(!1),g(0),await x()}catch(v){alert("Redemption failed. Please try again."),console.error("Redemption error:",v)}};return l?e.jsx("div",{className:"max-w-6xl mx-auto p-6 flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading cashback data..."})]})}):c?e.jsx("div",{className:"max-w-6xl mx-auto p-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:[c,e.jsx("button",{onClick:x,className:"ml-4 underline",children:"Retry"})]})}):t?e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Nefol Coins Program"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Earn coins on every purchase and redeem them for future orders"})]}),e.jsx("button",{onClick:x,className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Refresh"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Available Coins"}),e.jsx("p",{className:"text-3xl font-bold",children:wc(t.availableBalance)})]}),e.jsx(Db,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Earned"}),e.jsx("p",{className:"text-3xl font-bold",children:wc(t.totalEarned)})]}),e.jsx(zt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Pending"}),e.jsx("p",{className:"text-3xl font-bold",children:wc(t.pendingAmount)})]}),e.jsx(cs,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Used"}),e.jsx("p",{className:"text-3xl font-bold",children:wc(t.usedAmount)})]}),e.jsx(ni,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Redeem Points"}),e.jsx("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Redeem Now"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Next Payout"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(t.nextPayoutDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Payout Method"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:t.payoutMethod})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Minimum Redemption"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"100"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Active Cashback Offers"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(v=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:v.title}),e.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs rounded-full",children:[v.cashbackPercentage,"% Cashback"]})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-3",children:v.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Min Order:"}),e.jsxs("span",{className:"font-semibold",children:["",v.minOrderValue]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Max Cashback:"}),e.jsxs("span",{className:"font-semibold",children:["",v.maxCashback]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Valid Until:"}),e.jsx("span",{className:"font-semibold",children:new Date(v.validUntil).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded-full",children:v.category}),e.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Shop Now"})]})]},v.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Cashback Calculator"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Order Value ()"}),e.jsx("input",{type:"number",placeholder:"Enter order value",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Select Offer"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{children:"Skincare Essentials (5%)"}),e.jsx("option",{children:"Premium Products (8%)"}),e.jsx("option",{children:"First Time Buyer (10%)"}),e.jsx("option",{children:"Bundle Offers (12%)"})]})]})]}),e.jsx("div",{className:"mt-4 p-4 bg-green-50 dark:bg-green-900 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-green-800 dark:text-green-200 font-semibold",children:"Estimated Cashback:"}),e.jsx("span",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:"150"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Transaction History"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Order Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Cashback"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:n.map(v=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:v.orderId}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:v.productName}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:["",v.orderValue]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:["",v.amount]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${h(v.status)}`,children:[m(v.status),e.jsx("span",{className:"ml-1",children:v.status})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:new Date(v.date).toLocaleDateString()})]},v.id))})]})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"How Cashback Works"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Shop & Earn"}),e.jsx("p",{className:"text-sm opacity-90",children:"Make purchases and automatically earn cashback based on active offers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Cashback Processing"}),e.jsx("p",{className:"text-sm opacity-90",children:"Your cashback is processed within 24-48 hours after order confirmation"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Redeem & Save"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use your cashback balance to get discounts on future purchases"})]})]})]}),u&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Redeem Cashback"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Available Balance: ",t.availableBalance]}),e.jsx("input",{type:"number",value:f,onChange:v=>g(Number(v.target.value)),placeholder:"Enter amount to redeem",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Payout Method"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{children:"Bank Transfer"}),e.jsx("option",{children:"UPI"}),e.jsx("option",{children:"Wallet Credit"})]})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>p(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:j,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Redeem"})]})]})})]}):e.jsx("div",{className:"max-w-6xl mx-auto p-6",children:e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No cashback data available"})})}function j9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState({isEnabled:!0,allowWelcome:!0,allowPromotional:!0,allowTransactional:!0,allowCart:!0,quietHours:{enabled:!0,start:"22:00",end:"08:00"},frequencyLimit:{enabled:!0,maxPerDay:3}}),[c,d]=b.useState(!0),[u,p]=b.useState(""),[f,g]=b.useState(!1),[x,h]=b.useState(!1),[m,j]=b.useState(!1),[v,N]=b.useState(!1),[S,A]=b.useState(!1),[T,k]=b.useState(null),[_,y]=b.useState("welcome"),[w,R]=b.useState({title:"",message:"",audience:"all"}),[P,H]=b.useState({name:"",category:"",type:"welcome",title:"",message:"",isCustom:!0}),[L,O]=b.useState({name:"",trigger:"",condition:"",action:"",notificationType:"welcome",isActive:!0}),[W,Q]=b.useState("all"),[D,F]=b.useState("all"),[V,te]=b.useState("");b.useEffect(()=>{I()},[]);const I=async()=>{try{d(!0),p("");const ae=[{id:"1",title:"Welcome to Nefol!",message:"Welcome to Nefol! Enjoy 10% off your first order with code WELCOME10",status:"sent",type:"welcome",audience:"all",sentDate:new Date().toISOString(),recipients:1523,deliveryRate:98.5,openRate:87.2,clickRate:23.4,conversionRate:12.5,revenue:45678},{id:"2",title:"Your Cart is Waiting!",message:"You have items in your cart! Complete your purchase now and save 15%",status:"sent",type:"add_to_cart",audience:"cart_abandoners",sentDate:new Date().toISOString(),recipients:842,deliveryRate:97.8,openRate:65.3,clickRate:31.2,conversionRate:18.9,revenue:32145},{id:"3",title:"Order Confirmed!",message:"Your order #12345 has been confirmed and is being processed",status:"sent",type:"purchase",audience:"purchasers",sentDate:new Date().toISOString(),recipients:1205,deliveryRate:99.2,openRate:92.1,clickRate:15.3,conversionRate:8.7,revenue:28934},{id:"4",title:"Share Your Experience!",message:"How was your purchase? We'd love to hear from you!",status:"sent",type:"review",audience:"recent_purchasers",sentDate:new Date().toISOString(),recipients:589,deliveryRate:96.5,openRate:52.3,clickRate:28.7,conversionRate:12.4,revenue:12567}],Be=[{id:"1",name:"Welcome Message",category:"Onboarding",type:"welcome",title:"Welcome to Nefol!",message:"Welcome to Nefol! Enjoy {{discount}}% off your first order with code {{code}}",isCustom:!1},{id:"2",name:"Add to Cart Reminder",category:"Abandoned Cart",type:"add_to_cart",title:"Your Cart is Waiting!",message:"You have {{item_count}} items in your cart! Complete your purchase now",isCustom:!1},{id:"3",name:"Order Confirmation",category:"Transactional",type:"purchase",title:"Order Confirmed!",message:"Your order #{{order_number}} has been confirmed and is being processed",isCustom:!1},{id:"4",name:"Review Request",category:"Engagement",type:"review",title:"Share Your Experience!",message:"How was your purchase of {{product_name}}? We'd love to hear from you!",isCustom:!1},{id:"5",name:"Promotion Alert",category:"Marketing",type:"promotion",title:"Special Offer Inside!",message:"{{product_name}} is now {{discount}}% off! Limited time only",isCustom:!1},{id:"6",name:"Order Cancellation",category:"Transactional",type:"cancellation",title:"Order Cancelled",message:"Your order #{{order_number}} has been cancelled as requested",isCustom:!1},{id:"7",name:"Product Back in Stock",category:"Product Updates",type:"push",title:"Back in Stock!",message:"{{product_name}} is back in stock! Order now before it's gone",isCustom:!1}];s(ae),a(Be),i([])}catch(ae){console.error("Failed to load WhatsApp data:",ae),p("Failed to load WhatsApp notification data")}finally{d(!1)}},U=t.filter(ae=>{const Be=W==="all"||ae.status===W,Ct=D==="all"||ae.type===D,ct=V===""||ae.title.toLowerCase().includes(V.toLowerCase())||ae.message.toLowerCase().includes(V.toLowerCase());return Be&&Ct&&ct}),z={totalNotifications:U.length,totalRecipients:U.reduce((ae,Be)=>ae+Be.recipients,0),averageDeliveryRate:U.length>0?U.reduce((ae,Be)=>ae+Be.deliveryRate,0)/U.length:0,totalRevenue:U.reduce((ae,Be)=>ae+Be.revenue,0)},Y=ae=>{switch(ae){case"draft":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";case"scheduled":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"sent":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"paused":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},K=ae=>{switch(ae){case"welcome":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"add_to_cart":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"purchase":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"review":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"promotion":return"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200";case"cancellation":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"push":return"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},ne=ae=>{switch(ae){case"welcome":return e.jsx(ss,{className:"h-5 w-5"});case"add_to_cart":return e.jsx(Xs,{className:"h-5 w-5"});case"purchase":return e.jsx(fa,{className:"h-5 w-5"});case"review":return e.jsx(xr,{className:"h-5 w-5"});case"promotion":return e.jsx(Pb,{className:"h-5 w-5"});case"cancellation":return e.jsx(ts,{className:"h-5 w-5"});case"push":return e.jsx(Ra,{className:"h-5 w-5"});default:return e.jsx(vn,{className:"h-5 w-5"})}},q=ae=>{switch(ae){case"welcome":return"Welcome";case"add_to_cart":return"Add to Cart";case"purchase":return"Purchase";case"review":return"Review";case"promotion":return"Promotion";case"cancellation":return"Cancellation";case"push":return"Push Update";default:return ae}},re=ae=>{y(ae.type),R({title:ae.title,message:ae.message,audience:"all"}),g(!0)},xe=ae=>{alert(`Preview: ${ae.title}

${ae.message}`)},_e=ae=>{k(ae),j(!0)},X=ae=>{y(ae.type),R({title:ae.title,message:ae.message,audience:ae.audience}),g(!0)},Ae=ae=>{confirm("Are you sure you want to delete this notification?")&&(s(t.filter(Be=>Be.id!==ae)),alert("Notification deleted successfully!"))},Ie=()=>{if(!w.title||!w.message){alert("Please fill in all required fields");return}const ae={id:Date.now().toString(),title:w.title,message:w.message,status:"sent",type:_,audience:w.audience,sentDate:new Date().toISOString(),recipients:0,deliveryRate:0,openRate:0,clickRate:0,conversionRate:0,revenue:0};s([ae,...t]),g(!1),R({title:"",message:"",audience:"all"}),alert("WhatsApp notification sent successfully!")},He=()=>{alert("Settings saved successfully!"),h(!1)},Le=()=>{if(!P.name||!P.title||!P.message){alert("Please fill in all required fields");return}const ae={id:Date.now().toString(),...P,category:P.category||"Custom"};a([...r,ae]),N(!1),H({name:"",category:"",type:"welcome",title:"",message:"",isCustom:!0}),alert("Template created successfully!")},ve=()=>{if(!L.name||!L.trigger||!L.action){alert("Please fill in all required fields");return}const ae={id:Date.now().toString(),...L,messagesSent:0,conversionRate:0};i([...n,ae]),A(!1),O({name:"",trigger:"",condition:"",action:"",notificationType:"welcome",isActive:!0}),alert("Automation created successfully!")},st=ae=>{confirm("Are you sure you want to delete this template?")&&(a(r.filter(Be=>Be.id!==ae)),alert("Template deleted successfully!"))},St=ae=>{confirm("Are you sure you want to delete this automation?")&&(i(n.filter(Be=>Be.id!==ae)),alert("Automation deleted successfully!"))},fe=ae=>{i(n.map(Be=>Be.id===ae?{...Be,isActive:!Be.isActive}:Be))};return c?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading WhatsApp notifications..."})]})})}):u?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:u})]}),e.jsx("button",{onClick:I,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"WhatsApp Notifications"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage WhatsApp notifications for your customers - Add to Cart, Purchase, Review, Promotions, Cancellations, Welcome, and more"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:I,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:()=>h(!0),className:"btn-secondary flex items-center space-x-2",children:[e.jsx(ws,{className:"h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{onClick:()=>{g(!0),R({title:"",message:"",audience:"all"})},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Send Notification"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Notifications"}),e.jsx("p",{className:"text-3xl font-bold",children:z.totalNotifications})]}),e.jsx(vn,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Recipients"}),e.jsx("p",{className:"text-3xl font-bold",children:z.totalRecipients.toLocaleString()})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Avg Delivery Rate"}),e.jsxs("p",{className:"text-3xl font-bold",children:[z.averageDeliveryRate.toFixed(1),"%"]})]}),e.jsx(ra,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Revenue"}),e.jsxs("p",{className:"text-3xl font-bold",children:["",z.totalRevenue.toLocaleString()]})]}),e.jsx(zt,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Quick Send Notification"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:["welcome","add_to_cart","purchase","review","promotion","cancellation","push"].map(ae=>e.jsxs("button",{onClick:()=>{y(ae),R({title:"",message:"",audience:"all"}),g(!0)},className:"p-4 border-2 border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-center",children:[e.jsx("div",{className:"flex justify-center mb-2",children:ne(ae)}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:q(ae)})]},ae))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Notification Settings"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${l.isEnabled?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:l.isEnabled?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Allowed Types"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Welcome"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Add to Cart"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Purchase"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Review"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Meta Integration"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Connected to WhatsApp Business API"}),e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-green-600",children:"Active"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Quiet Hours"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:l.quietHours.enabled?`${l.quietHours.start} - ${l.quietHours.end}`:"Disabled"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Frequency Limit"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:l.frequencyLimit.enabled?`Max ${l.frequencyLimit.maxPerDay} per day`:"No limit"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Recent Notifications"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",placeholder:"Search notifications...",value:V,onChange:ae=>te(ae.target.value),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 rounded text-sm"}),e.jsxs("select",{value:W,onChange:ae=>Q(ae.target.value),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 rounded text-sm",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"paused",children:"Paused"})]}),e.jsxs("select",{value:D,onChange:ae=>F(ae.target.value),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 rounded text-sm",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"welcome",children:"Welcome"}),e.jsx("option",{value:"add_to_cart",children:"Add to Cart"}),e.jsx("option",{value:"purchase",children:"Purchase"}),e.jsx("option",{value:"review",children:"Review"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"cancellation",children:"Cancellation"}),e.jsx("option",{value:"push",children:"Push Update"})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Notification"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Recipients"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Delivery Rate"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:U.map(ae=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[ne(ae.type),e.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-medium rounded-full ${K(ae.type)}`,children:q(ae.type)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:ae.title}),e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 max-w-xs truncate",children:ae.message})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${Y(ae.status)}`,children:ae.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:ae.recipients.toLocaleString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:[ae.deliveryRate,"%"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:["",ae.revenue.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsx("button",{onClick:()=>_e(ae),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400",title:"View Details",children:e.jsx(ot,{className:"h-4 w-4 inline"})}),e.jsx("button",{onClick:()=>X(ae),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400",title:"Edit",children:e.jsx(mr,{className:"h-4 w-4 inline"})}),e.jsx("button",{onClick:()=>Ae(ae.id),className:"text-red-600 hover:text-red-900 dark:text-red-400",title:"Delete",children:e.jsx(Mt,{className:"h-4 w-4 inline"})})]})]},ae.id))})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Templates"}),e.jsxs("button",{onClick:()=>{H({name:"",category:"",type:"welcome",title:"",message:"",isCustom:!0}),N(!0)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Template"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(ae=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:ae.name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${K(ae.type)}`,children:q(ae.type)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100 mb-1",children:ae.title}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:ae.message})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>re(ae),className:"flex-1 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Use Template"}),e.jsx("button",{onClick:()=>xe(ae),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Preview"}),e.jsx("button",{onClick:()=>st(ae.id),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},ae.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Automations"}),e.jsxs("button",{onClick:()=>{O({name:"",trigger:"",condition:"",action:"",notificationType:"welcome",isActive:!0}),A(!0)},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Automation"})]})]}),n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-4",children:"No automations yet"}),e.jsx("button",{onClick:()=>{O({name:"",trigger:"",condition:"",action:"",notificationType:"welcome",isActive:!0}),A(!0)},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Create Your First Automation"})]}):e.jsx("div",{className:"space-y-4",children:n.map(ae=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:ae.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ae.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:ae.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>fe(ae.id),className:`px-3 py-1 text-sm rounded transition-colors ${ae.isActive?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"bg-green-100 text-green-800 hover:bg-green-200"}`,children:ae.isActive?"Deactivate":"Activate"}),e.jsx("button",{onClick:()=>St(ae.id),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Trigger:"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:ae.trigger})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Condition:"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:ae.condition||"None"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Action:"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:ae.action})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Messages Sent: ",e.jsx("span",{className:"font-semibold",children:ae.messagesSent})]}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Conversion Rate: ",e.jsxs("span",{className:"font-semibold text-green-600",children:[ae.conversionRate,"%"]})]})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${K(ae.notificationType)}`,children:q(ae.notificationType)})]})]},ae.id))})]}),f&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Send WhatsApp Notification"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notification Type"}),e.jsxs("select",{value:_,onChange:ae=>y(ae.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"welcome",children:"Welcome"}),e.jsx("option",{value:"add_to_cart",children:"Add to Cart"}),e.jsx("option",{value:"purchase",children:"Purchase"}),e.jsx("option",{value:"review",children:"Review"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"cancellation",children:"Cancellation"}),e.jsx("option",{value:"push",children:"Push Update"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notification Title"}),e.jsx("input",{type:"text",value:w.title,onChange:ae=>R({...w,title:ae.target.value}),placeholder:"Enter notification title",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notification Message"}),e.jsx("textarea",{rows:4,value:w.message,onChange:ae=>R({...w,message:ae.target.value}),placeholder:"Enter notification message (max 4096 characters for WhatsApp)",maxLength:4096,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Target Audience"}),e.jsxs("select",{value:w.audience,onChange:ae=>R({...w,audience:ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"all",children:"All Customers"}),e.jsx("option",{value:"new",children:"New Customers"}),e.jsx("option",{value:"vip",children:"VIP Customers"}),e.jsx("option",{value:"cart_abandoners",children:"Cart Abandoners"}),e.jsx("option",{value:"recent_purchasers",children:"Recent Purchasers"})]})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Ie,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Send Notification"})]})]})}),m&&T&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Notification Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Type"}),e.jsx("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:q(T.type)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Status"}),e.jsx("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:T.status})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Title"}),e.jsx("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:T.title})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Message"}),e.jsx("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:T.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Recipients"}),e.jsx("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:T.recipients})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Delivery Rate"}),e.jsxs("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:[T.deliveryRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Open Rate"}),e.jsxs("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:[T.openRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Conversion Rate"}),e.jsxs("p",{className:"text-sm text-slate-900 dark:text-slate-100",children:[T.conversionRate,"%"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Revenue"}),e.jsxs("p",{className:"text-sm text-green-600",children:["",T.revenue.toLocaleString()]})]})]}),e.jsx("div",{className:"flex space-x-4 mt-6",children:e.jsx("button",{onClick:()=>j(!1),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close"})})]})}),x&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"WhatsApp Notification Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Enable WhatsApp Notifications"}),e.jsx("input",{type:"checkbox",checked:l.isEnabled,onChange:ae=>o({...l,isEnabled:ae.target.checked}),className:"rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Allow Welcome Messages"}),e.jsx("input",{type:"checkbox",checked:l.allowWelcome,onChange:ae=>o({...l,allowWelcome:ae.target.checked}),className:"rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Allow Promotional"}),e.jsx("input",{type:"checkbox",checked:l.allowPromotional,onChange:ae=>o({...l,allowPromotional:ae.target.checked}),className:"rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Allow Transactional"}),e.jsx("input",{type:"checkbox",checked:l.allowTransactional,onChange:ae=>o({...l,allowTransactional:ae.target.checked}),className:"rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Allow Cart Notifications"}),e.jsx("input",{type:"checkbox",checked:l.allowCart,onChange:ae=>o({...l,allowCart:ae.target.checked}),className:"rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Quiet Hours Start"}),e.jsx("input",{type:"time",value:l.quietHours.start,onChange:ae=>o({...l,quietHours:{...l.quietHours,start:ae.target.value}}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Quiet Hours End"}),e.jsx("input",{type:"time",value:l.quietHours.end,onChange:ae=>o({...l,quietHours:{...l.quietHours,end:ae.target.value}}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Max Notifications Per Day"}),e.jsx("input",{type:"number",value:l.frequencyLimit.maxPerDay,onChange:ae=>o({...l,frequencyLimit:{...l.frequencyLimit,maxPerDay:parseInt(ae.target.value)}}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Close"}),e.jsx("button",{onClick:He,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Settings"})]})]})}),v&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Create WhatsApp Template"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Template Name *"}),e.jsx("input",{type:"text",value:P.name,onChange:ae=>H({...P,name:ae.target.value}),placeholder:"e.g., Welcome Message",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category"}),e.jsx("input",{type:"text",value:P.category,onChange:ae=>H({...P,category:ae.target.value}),placeholder:"e.g., Onboarding, Marketing",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notification Type *"}),e.jsxs("select",{value:P.type,onChange:ae=>H({...P,type:ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"welcome",children:"Welcome"}),e.jsx("option",{value:"add_to_cart",children:"Add to Cart"}),e.jsx("option",{value:"purchase",children:"Purchase"}),e.jsx("option",{value:"review",children:"Review"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"cancellation",children:"Cancellation"}),e.jsx("option",{value:"push",children:"Push Update"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:P.title,onChange:ae=>H({...P,title:ae.target.value}),placeholder:"Enter template title",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Message *"}),e.jsx("textarea",{rows:4,value:P.message,onChange:ae=>H({...P,message:ae.target.value}),placeholder:"Enter template message (use {{variable}} for dynamic content)",maxLength:4096,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>N(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Le,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Create Template"})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Create WhatsApp Automation"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Automation Name *"}),e.jsx("input",{type:"text",value:L.name,onChange:ae=>O({...L,name:ae.target.value}),placeholder:"e.g., Welcome New Users",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Trigger *"}),e.jsxs("select",{value:L.trigger,onChange:ae=>O({...L,trigger:ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"",children:"Select a trigger..."}),e.jsx("option",{value:"user_signs_up",children:"User Signs Up"}),e.jsx("option",{value:"cart_abandoned",children:"Cart Abandoned"}),e.jsx("option",{value:"order_placed",children:"Order Placed"}),e.jsx("option",{value:"order_delivered",children:"Order Delivered"}),e.jsx("option",{value:"product_back_in_stock",children:"Product Back in Stock"}),e.jsx("option",{value:"user_inactive_7_days",children:"User Inactive for 7 Days"}),e.jsx("option",{value:"birthday",children:"Customer Birthday"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Condition (Optional)"}),e.jsx("input",{type:"text",value:L.condition,onChange:ae=>O({...L,condition:ae.target.value}),placeholder:"e.g., Only for VIP customers",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Action *"}),e.jsxs("select",{value:L.action,onChange:ae=>O({...L,action:ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"",children:"Select an action..."}),e.jsx("option",{value:"send_welcome_message",children:"Send Welcome Message"}),e.jsx("option",{value:"send_cart_reminder",children:"Send Cart Reminder"}),e.jsx("option",{value:"send_order_confirmation",children:"Send Order Confirmation"}),e.jsx("option",{value:"request_review",children:"Request Product Review"}),e.jsx("option",{value:"send_promotion",children:"Send Promotion"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notification Type *"}),e.jsxs("select",{value:L.notificationType,onChange:ae=>O({...L,notificationType:ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"welcome",children:"Welcome"}),e.jsx("option",{value:"add_to_cart",children:"Add to Cart"}),e.jsx("option",{value:"purchase",children:"Purchase"}),e.jsx("option",{value:"review",children:"Review"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"cancellation",children:"Cancellation"}),e.jsx("option",{value:"push",children:"Push Update"})]})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>A(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ve,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Create Automation"})]})]})})]})}function w9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState([]),[c,d]=b.useState(!0),[u,p]=b.useState(""),[f,g]=b.useState(null),[x,h]=b.useState(""),[m,j]=b.useState(!1),[v,N]=b.useState(!1),[S,A]=b.useState(!1),[T,k]=b.useState(!1),[_,y]=b.useState(!1),[w,R]=b.useState(""),[P,H]=b.useState(""),[L,O]=b.useState(!1),[W,Q]=b.useState(null),[D,F]=b.useState(""),[V,te]=b.useState(""),[I,U]=b.useState("Custom"),[z,Y]=b.useState(""),[K,ne]=b.useState(""),[q,re]=b.useState(!1),[xe,_e]=b.useState(""),[X,Ae]=b.useState(""),[Ie,He]=b.useState(""),[Le,ve]=b.useState(""),[st,St]=b.useState(!1);b.useEffect(()=>{fe()},[]);const fe=async()=>{try{d(!0),p("");const[pe,Me,Je]=await Promise.all([et.getWhatsAppChats().catch(()=>[]),et.getWhatsAppTemplates().catch(()=>[]),et.getWhatsAppAutomations().catch(()=>[])]),jt=Array.isArray(pe)?pe:[];s(jt),i(Array.isArray(Me)?Me:[]),o(Array.isArray(Je)?Je:[]),jt&&jt.length>0&&g(jt[0])}catch(pe){console.error("Failed to load WhatsApp data:",pe),p("Failed to load WhatsApp data")}finally{d(!1)}},ae={totalSessions:t.length,activeSessions:t.filter(pe=>pe.status==="active").length,waitingSessions:t.filter(pe=>pe.status==="waiting").length,resolvedSessions:t.filter(pe=>pe.status==="resolved").length},Be=pe=>{switch(pe){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"waiting":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"resolved":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"closed":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},Ct=pe=>{switch(pe){case"urgent":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";case"high":return"text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-200";case"medium":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},ct=()=>{x.trim()&&(console.log("Sending message:",x),h(""))},Tt=async()=>{if(!w.trim()||!P.trim()){alert("Please enter both phone number and message");return}O(!0),Q(null);try{const Me=(()=>{if(typeof window<"u"){const at=window.location.hostname;if(at==="thenefol.com"||at==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),Je=await fetch(`${Me}/api/whatsapp-chat/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:w,message:P})}),jt=await Je.json();Q(jt),Je.ok?(alert(" Message sent successfully!"),R(""),H("")):alert(` Failed to send message: ${jt.error||"Unknown error"}`)}catch(pe){console.error("Failed to send WhatsApp message:",pe),Q({error:"Network error: "+pe.message}),alert(" Network error occurred")}finally{O(!1)}},_t=async()=>{if(!D.trim()||!V.trim()){alert("Please enter template name and content");return}try{const Me=(()=>{if(typeof window<"u"){const Yt=window.location.hostname;if(Yt==="thenefol.com"||Yt==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),Je={name:D,content:V,category:I};q&&(Je.scheduled_date=z,Je.scheduled_time=K,Je.is_scheduled=!0);const jt=await fetch(`${Me}/api/whatsapp/templates`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Je)}),at=await jt.json();jt.ok?(alert(" Template created successfully!"),k(!1),F(""),te(""),U("Custom"),Y(""),ne(""),re(!1),fe()):alert(` Failed to create template: ${at.error||"Unknown error"}`)}catch(pe){console.error("Failed to create template:",pe),alert(" Network error occurred")}},dt=async()=>{if(!xe.trim()||!X.trim()){alert("Please enter automation name and trigger");return}try{const Me=(()=>{if(typeof window<"u"){const Yt=window.location.hostname;if(Yt==="thenefol.com"||Yt==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),Je={name:xe,trigger:X,action:"Send WhatsApp Message"};st&&(Je.scheduled_date=Ie,Je.scheduled_time=Le,Je.is_scheduled=!0);const jt=await fetch(`${Me}/api/whatsapp/automations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Je)}),at=await jt.json();jt.ok?(alert(" Automation created successfully!"),y(!1),_e(""),Ae(""),He(""),ve(""),St(!1),fe()):alert(` Failed to create automation: ${at.error||"Unknown error"}`)}catch(pe){console.error("Failed to create automation:",pe),alert(" Network error occurred")}},ut=pe=>{g(pe)};return c?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading WhatsApp data..."})]})})}):u?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:u})]}),e.jsx("button",{onClick:fe,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"WhatsApp Chat Support"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Manage customer conversations and provide instant support"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>A(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(ra,{className:"h-4 w-4"}),e.jsx("span",{children:"Test WhatsApp"})]}),e.jsxs("button",{onClick:fe,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:()=>j(!0),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(gs,{className:"h-4 w-4"}),e.jsx("span",{children:"Templates"})]}),e.jsxs("button",{onClick:()=>N(!0),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Automations"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Sessions"}),e.jsx("p",{className:"text-3xl font-bold",children:ae.totalSessions})]}),e.jsx(vn,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active"}),e.jsx("p",{className:"text-3xl font-bold",children:ae.activeSessions})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Waiting"}),e.jsx("p",{className:"text-3xl font-bold",children:ae.waitingSessions})]}),e.jsx(cs,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Resolved"}),e.jsx("p",{className:"text-3xl font-bold",children:ae.resolvedSessions})]}),e.jsx(Vt,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Chat Sessions"})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:t.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(vn,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No chat sessions available"})]}):t.map(pe=>e.jsxs("div",{onClick:()=>ut(pe),className:`p-4 border-b border-slate-200 dark:border-slate-700 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 ${(f==null?void 0:f.id)===pe.id?"bg-blue-50 dark:bg-blue-900":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:pe.customerName}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Be(pe.status)}`,children:pe.status}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Ct(pe.priority)}`,children:pe.priority})]})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-1",children:pe.customerPhone}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500 truncate",children:pe.lastMessage}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:pe.lastMessageTime}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:[pe.messageCount," messages"]})]}),pe.assignedAgent&&e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:["Assigned to: ",pe.assignedAgent]})]},pe.id))})]}),e.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-lg shadow-lg flex flex-col",children:f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:f.customerName}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:f.customerPhone})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:e.jsx(pa,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:e.jsx(K4,{className:"h-4 w-4"})})]})]}),f.tags&&f.tags.length>0&&e.jsx("div",{className:"flex space-x-2 mt-2",children:f.tags.map((pe,Me)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded-full",children:pe},Me))})]}),e.jsx("div",{className:"flex-1 p-4 overflow-y-auto max-h-96",children:e.jsx("div",{className:"space-y-4",children:r.map(pe=>e.jsx("div",{className:`flex ${pe.sender==="customer"?"justify-start":"justify-end"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${pe.sender==="customer"?"bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-slate-100":"bg-blue-600 text-white"}`,children:[e.jsx("p",{className:"text-sm",children:pe.message}),e.jsx("p",{className:`text-xs mt-1 ${pe.sender==="customer"?"text-slate-500 dark:text-slate-400":"text-blue-100"}`,children:pe.timestamp})]})},pe.id))})}),e.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:e.jsx(Kn,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:e.jsx(gs,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:e.jsx(Ab,{className:"h-4 w-4"})}),e.jsx("input",{type:"text",value:x,onChange:pe=>h(pe.target.value),placeholder:"Type your message...",className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",onKeyPress:pe=>pe.key==="Enter"&&ct()}),e.jsx("button",{onClick:ct,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:e.jsx(ra,{className:"h-4 w-4"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(vn,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Select a chat session to start conversation"})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Templates"}),e.jsx("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Create Template"})]}),n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(gs,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No templates available"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.map(pe=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:pe.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${pe.isApproved?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:pe.isApproved?"Approved":"Pending"})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:pe.category}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 mb-3",children:pe.content}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"flex-1 px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors",children:"Use Template"}),e.jsx("button",{className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Edit"})]})]},pe.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Automations"}),e.jsx("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Automation"})]}),l.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(rs,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No automations available"})]}):e.jsx("div",{className:"space-y-4",children:l.map(pe=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:pe.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${pe.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:pe.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Edit"}),e.jsx("button",{className:`px-3 py-1 text-sm rounded transition-colors ${pe.isActive?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"bg-green-100 text-green-800 hover:bg-green-200"}`,children:pe.isActive?"Pause":"Activate"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Trigger:"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:pe.trigger})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Condition:"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:pe.condition})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Action:"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:pe.action})]})]}),e.jsx("div",{className:"mt-3 flex items-center justify-between text-sm",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Messages Sent: ",e.jsx("span",{className:"font-semibold",children:pe.messagesSent})]}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Response Rate: ",e.jsxs("span",{className:"font-semibold text-green-600",children:[pe.responseRate,"%"]})]})]})})]},pe.id))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"WhatsApp Business Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Quick Response"}),e.jsx("p",{className:"text-sm opacity-90",children:"Respond to customer messages within 24 hours to maintain good business rating."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Use Templates"}),e.jsx("p",{className:"text-sm opacity-90",children:"Create approved templates for common messages to ensure consistency and compliance."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Personal Touch"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use customer names and personalize messages to create better engagement."})]})]})]}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Create WhatsApp Template"}),e.jsx("button",{onClick:()=>k(!1),className:"text-slate-500 hover:text-slate-700 dark:text-slate-400",children:e.jsx(ts,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Template Name"}),e.jsx("input",{type:"text",value:D,onChange:pe=>F(pe.target.value),placeholder:"e.g., Welcome Message",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Template Content"}),e.jsx("textarea",{value:V,onChange:pe=>te(pe.target.value),placeholder:"Enter your template message...",rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category"}),e.jsxs("select",{value:I,onChange:pe=>U(pe.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"Custom",children:"Custom"}),e.jsx("option",{value:"Welcome",children:"Welcome"}),e.jsx("option",{value:"Promotional",children:"Promotional"}),e.jsx("option",{value:"Transactional",children:"Transactional"}),e.jsx("option",{value:"Reminder",children:"Reminder"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"scheduleTemplate",checked:q,onChange:pe=>re(pe.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"scheduleTemplate",className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Schedule this template"})]}),q&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Scheduled Date"}),e.jsx("input",{type:"date",value:z,onChange:pe=>Y(pe.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Scheduled Time"}),e.jsx("input",{type:"time",value:K,onChange:pe=>ne(pe.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:_t,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700",children:"Create Template"}),e.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancel"})]})]})]})}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Create WhatsApp Automation"}),e.jsx("button",{onClick:()=>y(!1),className:"text-slate-500 hover:text-slate-700 dark:text-slate-400",children:e.jsx(ts,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Automation Name"}),e.jsx("input",{type:"text",value:xe,onChange:pe=>_e(pe.target.value),placeholder:"e.g., Order Confirmation",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Trigger"}),e.jsx("input",{type:"text",value:X,onChange:pe=>Ae(pe.target.value),placeholder:"e.g., When order is placed",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"scheduleAutomation",checked:st,onChange:pe=>St(pe.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"scheduleAutomation",className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Schedule this automation"})]}),st&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Scheduled Date"}),e.jsx("input",{type:"date",value:Ie,onChange:pe=>He(pe.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Scheduled Time"}),e.jsx("input",{type:"time",value:Le,onChange:pe=>ve(pe.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:dt,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700",children:"Create Automation"}),e.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancel"})]})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Test WhatsApp Message"}),e.jsx("button",{onClick:()=>A(!1),className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:e.jsx(ts,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Phone Number (with country code)"}),e.jsx("input",{type:"text",value:w,onChange:pe=>R(pe.target.value),placeholder:"917355384939",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Include country code (e.g., 91 for India, 1 for USA)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Message"}),e.jsx("textarea",{value:P,onChange:pe=>H(pe.target.value),placeholder:"Enter your test message here...",rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white"})]}),W&&e.jsx("div",{className:`p-3 rounded-lg ${W.success?"bg-green-50 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-red-50 dark:bg-red-900 text-red-800 dark:text-red-200"}`,children:e.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(W,null,2)})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:Tt,disabled:L,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors disabled:bg-slate-400 flex items-center justify-center space-x-2",children:L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Sending..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ra,{className:"h-4 w-4"}),e.jsx("span",{children:"Send Message"})]})}),e.jsx("button",{onClick:()=>{A(!1),Q(null)},className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Close"})]})]})]})})]})}function N9(){const[t,s]=b.useState("config"),[r,a]=b.useState({accessToken:"",phoneNumberId:"",businessAccountId:"",webhookUrl:"",verifyToken:""}),[n,i]=b.useState([]),[l,o]=b.useState([]),[c,d]=b.useState([]),[u,p]=b.useState(!1),[f,g]=b.useState("idle"),[x,h]=b.useState(!1),[m,j]=b.useState(!1),[v,N]=b.useState(!1),[S,A]=b.useState(""),[T,k]=b.useState(""),[_,y]=b.useState({name:"",content:"",category:"MARKETING",language:"en_US"}),[w,R]=b.useState({name:"",trigger:"",action:"",template:""}),H=(()=>{if(typeof window<"u"){const z=window.location.hostname;if(z==="thenefol.com"||z==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})();b.useEffect(()=>{L()},[]);const L=async()=>{p(!0);try{const z=await fetch(`${H}/api/whatsapp/config`);if(z.ok){const q=await z.json();q.success&&a(q.data)}const Y=await fetch(`${H}/api/whatsapp-chat/templates`);if(Y.ok){const q=await Y.json();i(Array.isArray(q)?q:[])}const K=await fetch(`${H}/api/whatsapp-chat/automations`);if(K.ok){const q=await K.json();o(Array.isArray(q)?q:[])}const ne=await fetch(`${H}/api/whatsapp-chat/sessions`);if(ne.ok){const q=await ne.json();d(Array.isArray(q)?q:[])}}catch(z){console.error("Failed to load data:",z)}finally{p(!1)}},O=async()=>{g("saving");try{(await fetch(`${H}/api/whatsapp/config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok?(g("success"),alert(" Configuration saved successfully!")):(g("error"),alert(" Failed to save configuration"))}catch{g("error"),alert(" Network error")}setTimeout(()=>g("idle"),2e3)},W=async()=>{if(!S||!T){alert("Please enter phone number and message");return}try{const z=await fetch(`${H}/api/whatsapp-chat/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:S,message:T})}),Y=await z.json();z.ok?(alert(" Message sent successfully!"),A(""),k(""),h(!1),L()):alert(` Failed: ${Y.error||"Unknown error"}`)}catch{alert(" Network error")}},Q=async()=>{if(!_.name||!_.content){alert("Please fill all fields");return}try{(await fetch(`${H}/api/whatsapp/templates`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)})).ok?(alert(" Template created!"),j(!1),y({name:"",content:"",category:"MARKETING",language:"en_US"}),L()):alert(" Failed to create template")}catch{alert(" Network error")}},D=async()=>{if(!w.name||!w.trigger){alert("Please fill all fields");return}try{(await fetch(`${H}/api/whatsapp/automations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)})).ok?(alert(" Automation created!"),N(!1),R({name:"",trigger:"",action:"",template:""}),L()):alert(" Failed to create automation")}catch{alert(" Network error")}},F=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900 border border-blue-200 dark:border-blue-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(No,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-1",children:"How to get these credentials?"}),e.jsxs("ol",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1 list-decimal list-inside",children:[e.jsxs("li",{children:["Go to ",e.jsx("a",{href:"https://developers.facebook.com",target:"_blank",className:"underline",children:"developers.facebook.com"})]}),e.jsx("li",{children:"Select your app  WhatsApp  API Setup"}),e.jsx("li",{children:"Copy Access Token and Phone Number ID"}),e.jsx("li",{children:"Paste them below and click Save"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[e.jsx(Vu,{className:"inline h-4 w-4 mr-1"}),"Access Token *"]}),e.jsx("textarea",{value:r.accessToken,onChange:z=>a({...r,accessToken:z.target.value}),placeholder:"EAAQy...",rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[e.jsx(mm,{className:"inline h-4 w-4 mr-1"}),"Phone Number ID *"]}),e.jsx("input",{type:"text",value:r.phoneNumberId,onChange:z=>a({...r,phoneNumberId:z.target.value}),placeholder:"368410443015784",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Business Account ID (Optional)"}),e.jsx("input",{type:"text",value:r.businessAccountId,onChange:z=>a({...r,businessAccountId:z.target.value}),placeholder:"353217381206675",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Webhook URL (Optional)"}),e.jsx("input",{type:"text",value:r.webhookUrl,onChange:z=>a({...r,webhookUrl:z.target.value}),placeholder:"https://yourdomain.com/webhook",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:O,disabled:f==="saving",className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:bg-slate-400 flex items-center space-x-2",children:[e.jsx(Ms,{className:"h-4 w-4"}),e.jsx("span",{children:f==="saving"?"Saving...":"Save Configuration"})]}),e.jsxs("button",{onClick:()=>h(!0),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(ra,{className:"h-4 w-4"}),e.jsx("span",{children:"Send Test Message"})]})]})]}),V=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Message Templates"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Create reusable message templates"})]}),e.jsxs("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Template"})]})]}),n.length===0?e.jsxs("div",{className:"text-center py-12 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[e.jsx(gs,{className:"h-12 w-12 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No templates yet. Create your first template!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(z=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:z.name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${z.status==="approved"?"bg-green-100 text-green-800":z.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:z.status})]}),e.jsxs("p",{className:"text-xs text-slate-500 mb-2",children:[z.category,"  ",z.language]}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 mb-3 line-clamp-3",children:z.content}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{className:"flex-1 px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:[e.jsx(ot,{className:"inline h-3 w-3 mr-1"}),"View"]}),e.jsx("button",{className:"px-3 py-1 text-sm border border-slate-300 dark:border-slate-600 rounded hover:bg-slate-50 dark:hover:bg-slate-700",children:e.jsx(mr,{className:"inline h-3 w-3"})}),e.jsx("button",{className:"px-3 py-1 text-sm border border-red-300 text-red-600 rounded hover:bg-red-50",children:e.jsx(Mt,{className:"inline h-3 w-3"})})]})]},z.id))})]}),te=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Automations"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Automate messages based on triggers"})]}),e.jsxs("button",{onClick:()=>N(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Automation"})]})]}),l.length===0?e.jsxs("div",{className:"text-center py-12 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[e.jsx(Vl,{className:"h-12 w-12 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No automations yet. Create your first automation!"})]}):e.jsx("div",{className:"space-y-4",children:l.map(z=>e.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:z.name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${z.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:z.isActive?"Active":"Inactive"})]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("strong",{children:"Trigger:"})," ",z.trigger]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("strong",{children:"Action:"})," ",z.action]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-3 py-1 text-sm border border-slate-300 dark:border-slate-600 rounded hover:bg-slate-50",children:e.jsx(mr,{className:"inline h-3 w-3"})}),e.jsx("button",{className:`px-3 py-1 text-sm rounded ${z.isActive?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:z.isActive?"Disable":"Enable"})]})]})},z.id))})]}),I=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Chat Sessions"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Recent WhatsApp conversations"})]}),c.length===0?e.jsxs("div",{className:"text-center py-12 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[e.jsx(vn,{className:"h-12 w-12 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No chat sessions yet"})]}):e.jsx("div",{className:"space-y-3",children:c.map(z=>e.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:z.customerName}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:z.customerPhone}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 mt-2",children:z.lastMessage})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs text-slate-500",children:z.lastMessageTime}),e.jsx("span",{className:`block mt-1 px-2 py-1 text-xs rounded-full ${z.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:z.status})]})]})},z.id))})]}),U=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"WhatsApp Analytics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:[e.jsx(Pt,{className:"h-8 w-8 mb-2"}),e.jsx("p",{className:"text-sm opacity-90",children:"Total Messages"}),e.jsx("p",{className:"text-3xl font-bold",children:c.length})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:[e.jsx(vn,{className:"h-8 w-8 mb-2"}),e.jsx("p",{className:"text-sm opacity-90",children:"Active Chats"}),e.jsx("p",{className:"text-3xl font-bold",children:c.filter(z=>z.status==="active").length})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:[e.jsx(gs,{className:"h-8 w-8 mb-2"}),e.jsx("p",{className:"text-sm opacity-90",children:"Templates"}),e.jsx("p",{className:"text-3xl font-bold",children:n.length})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:[e.jsx(Vl,{className:"h-8 w-8 mb-2"}),e.jsx("p",{className:"text-sm opacity-90",children:"Automations"}),e.jsx("p",{className:"text-3xl font-bold",children:l.filter(z=>z.isActive).length})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-8 text-center",children:[e.jsx(Ss,{className:"h-16 w-16 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Detailed analytics coming soon..."})]})]});return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"WhatsApp Business Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Complete WhatsApp integration - Configuration, Templates, Automations, and More"})]}),e.jsx("div",{className:"border-b",style:{borderColor:"var(--arctic-blue-light)"},children:e.jsx("div",{className:"flex space-x-8",children:[{id:"config",label:"Configuration",icon:ws},{id:"templates",label:"Templates",icon:gs},{id:"automations",label:"Automations",icon:Vl},{id:"sessions",label:"Sessions",icon:vn},{id:"analytics",label:"Analytics",icon:Ss}].map(z=>e.jsxs("button",{onClick:()=>s(z.id),className:`flex items-center space-x-2 pb-4 border-b-2 transition-colors ${t===z.id?"":"border-transparent"}`,style:t===z.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx(z.icon,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:z.label})]},z.id))})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:u?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(vr,{className:"h-12 w-12 text-slate-400 mx-auto mb-4 animate-spin"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[t==="config"&&F(),t==="templates"&&V(),t==="automations"&&te(),t==="sessions"&&I(),t==="analytics"&&U()]})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Send Test Message"}),e.jsx("button",{onClick:()=>h(!1),children:e.jsx(ts,{className:"h-6 w-6 text-slate-500"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Phone Number"}),e.jsx("input",{type:"text",value:S,onChange:z=>A(z.target.value),placeholder:"917355384939",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Message"}),e.jsx("textarea",{value:T,onChange:z=>k(z.target.value),placeholder:"Enter your message...",rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsx("button",{onClick:W,className:"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700",children:"Send Message"})]})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Create Template"}),e.jsx("button",{onClick:()=>j(!1),children:e.jsx(ts,{className:"h-6 w-6 text-slate-500"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Template Name"}),e.jsx("input",{type:"text",value:_.name,onChange:z=>y({..._,name:z.target.value}),placeholder:"welcome_message",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Content"}),e.jsx("textarea",{value:_.content,onChange:z=>y({..._,content:z.target.value}),placeholder:"Welcome to Nefol! ...",rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category"}),e.jsxs("select",{value:_.category,onChange:z=>y({..._,category:z.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"MARKETING",children:"Marketing"}),e.jsx("option",{value:"UTILITY",children:"Utility"}),e.jsx("option",{value:"AUTHENTICATION",children:"Authentication"})]})]}),e.jsx("button",{onClick:Q,className:"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700",children:"Create Template"})]})]})}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Create Automation"}),e.jsx("button",{onClick:()=>N(!1),children:e.jsx(ts,{className:"h-6 w-6 text-slate-500"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Automation Name"}),e.jsx("input",{type:"text",value:w.name,onChange:z=>R({...w,name:z.target.value}),placeholder:"Order Confirmation",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Trigger"}),e.jsxs("select",{value:w.trigger,onChange:z=>R({...w,trigger:z.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Select trigger..."}),e.jsx("option",{value:"order_placed",children:"Order Placed"}),e.jsx("option",{value:"order_shipped",children:"Order Shipped"}),e.jsx("option",{value:"order_delivered",children:"Order Delivered"}),e.jsx("option",{value:"cart_abandoned",children:"Cart Abandoned"}),e.jsx("option",{value:"user_registered",children:"User Registered"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Action"}),e.jsx("input",{type:"text",value:w.action,onChange:z=>R({...w,action:z.target.value}),placeholder:"Send WhatsApp message",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-white"})]}),e.jsx("button",{onClick:D,className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700",children:"Create Automation"})]})]})})]})}function k9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState(""),[c,d]=b.useState(null),[u,p]=b.useState(""),[f,g]=b.useState(!1),[x,h]=b.useState(""),m=b.useRef(null);b.useEffect(()=>{j()},[]);const j=async()=>{try{i(!0),o("");const _=await et.getLiveChatSessions().catch(()=>[]),y=Array.isArray(_)?_.map(w=>({id:String(w.id),customerName:w.customerName||w.customer_name||w.customerEmail||w.customer_email||"User",customerEmail:w.customerEmail||w.customer_email||"",customerPhone:w.customerPhone||w.customer_phone,status:w.status||"active",priority:w.priority||"low",assignedAgent:w.assignedAgent||w.assigned_agent,lastMessage:w.lastMessage||w.last_message||"",lastMessageTime:w.lastMessageTime||w.last_message_time||"",messageCount:Number(w.messageCount??w.message_count??0),tags:w.tags||[],notes:w.notes||"",customerLocation:w.customerLocation||w.customer_location,deviceInfo:w.deviceInfo||w.device_info,referrer:w.referrer})):[];y.length>0?(s(y),c||d(y[0])):(s([]),d(null)),a([])}catch(_){console.error("Failed to load chat data:",_),o("Failed to load chat data"),s([]),a([])}finally{i(!1)}};b.useEffect(()=>{let _,y;return(async()=>{if(!c){a([]);return}Ye.emit("live-chat:join-session",{sessionId:c.id});try{const R=await et.getLiveChatMessages(c.id),P=Array.isArray(R)?R.map(L=>({id:String(L.id),sender:L.sender,senderName:L.sender_name||"",message:L.message,timestamp:L.created_at,type:L.type||"text",isRead:!!L.is_read})):[],H=Array.from(new Map(P.map(L=>[L.id,L])).values());a(H)}catch(R){console.error("Failed to load messages",R),a([])}_=Ye.subscribe("live-chat:message",R=>{var P;if(((P=R==null?void 0:R.session_id)==null?void 0:P.toString())===c.id.toString()){const H={id:String(R.id),sender:R.sender,senderName:R.sender_name||"",message:R.message,timestamp:R.created_at,type:R.type||"text",isRead:!!R.is_read};a(L=>L.some(O=>O.id===H.id)?L:[...L,H])}}),y=Ye.subscribe("live-chat:typing",R=>{var P;((P=R==null?void 0:R.sessionId)==null?void 0:P.toString())===c.id.toString()&&g(!!R.isTyping&&R.sender==="customer")})})(),()=>{_&&_(),y&&y()}},[c]),b.useEffect(()=>{var _;(_=m.current)==null||_.scrollIntoView({behavior:"smooth"})},[r]);const v=async()=>{if(!c)return;const _=u.trim();if(_)try{await et.sendLiveChatMessage({sessionId:c.id,sender:"agent",senderName:"Admin Agent",message:_,type:"text"}),p(""),Ye.emit("live-chat:typing",{sessionId:c.id,sender:"agent",isTyping:!1})}catch(y){console.error("Failed to send message",y)}},N=_=>{d(_),p("")},S=_=>{p(_.target.value),!f&&_.target.value.length>0?(g(!0),c&&Ye.emit("live-chat:typing",{sessionId:c.id,sender:"agent",isTyping:!0})):f&&_.target.value.length===0&&(g(!1),c&&Ye.emit("live-chat:typing",{sessionId:c.id,sender:"agent",isTyping:!1}))},A=_=>{try{const y=new Date(_),R=new Date().getTime()-y.getTime(),P=Math.floor(R/6e4),H=Math.floor(P/60),L=Math.floor(H/24);return P<1?"Just now":P<60?`${P}m ago`:H<24?`${H}h ago`:L<7?`${L}d ago`:y.toLocaleDateString()}catch{return _}},T=_=>{try{return new Date(_).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}catch{return _}},k=t.filter(_=>{const y=(_.customerName||"").toLowerCase(),w=(_.customerEmail||"").toLowerCase(),R=(x||"").toLowerCase();return y.includes(R)||w.includes(R)});return n?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading live chat..."})]})}):e.jsx("div",{className:"h-screen flex flex-col bg-gray-100 dark:bg-slate-900",children:e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"w-1/3 border-r border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800 flex flex-col",children:[e.jsxs("div",{className:"p-4 bg-green-600 dark:bg-green-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h1",{className:"text-xl font-semibold text-white",children:"Chats"}),e.jsx("button",{onClick:j,className:"text-white hover:text-gray-200 transition-colors",title:"Refresh",children:e.jsx(fs,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search or start new chat",value:x,onChange:_=>h(_.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-slate-700 rounded-lg text-sm text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-400"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:k.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[e.jsx(fs,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No chat sessions found"})]}):k.map(_=>e.jsx("div",{onClick:()=>N(_),className:`p-4 border-b border-gray-200 dark:border-slate-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors ${(c==null?void 0:c.id)===_.id?"bg-gray-100 dark:bg-slate-700":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white font-semibold text-lg",children:((_.customerName||_.customerEmail||"U").charAt(0)||"U").toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:_.customerName||_.customerEmail||"User"}),_.lastMessageTime&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex-shrink-0 ml-2",children:A(_.lastMessageTime)})]}),_.customerEmail&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate mb-1",children:_.customerEmail}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:_.lastMessage||"No messages yet"}),_.status==="active"&&e.jsx("span",{className:"inline-block mt-1 w-2 h-2 bg-green-500 rounded-full"})]})]})},_.id))})]}),e.jsx("div",{className:"flex-1 flex flex-col bg-gray-50 dark:bg-slate-900",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-green-600 dark:bg-green-700 px-4 py-3 flex items-center justify-between border-b border-green-700 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-green-600 font-semibold",children:((c.customerName||c.customerEmail||"U").charAt(0)||"U").toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-white truncate",children:c.customerName||c.customerEmail||"User"}),c.customerEmail&&e.jsx("p",{className:"text-sm text-green-100 truncate",children:c.customerEmail})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-[#ECE5DD] dark:bg-slate-800",children:r.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[e.jsx(fs,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No messages yet. Start the conversation!"})]})}):e.jsxs(e.Fragment,{children:[r.map(_=>e.jsx("div",{className:`flex ${_.sender==="customer"?"justify-start":"justify-end"}`,children:e.jsxs("div",{className:`max-w-[65%] rounded-lg px-3 py-2 shadow-sm ${_.sender==="customer"?"bg-white dark:bg-slate-700 text-gray-900 dark:text-gray-100":"bg-green-500 text-white"}`,children:[_.sender==="customer"&&e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1 font-medium",children:_.senderName}),e.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:_.message}),e.jsxs("div",{className:`flex items-center justify-end gap-1 mt-1 ${_.sender==="customer"?"text-gray-500 dark:text-gray-400":"text-green-50"}`,children:[e.jsx("span",{className:"text-xs",children:T(_.timestamp)}),_.sender==="agent"&&_.isRead&&e.jsx("span",{className:"text-xs",children:""})]})]})},`${_.id}-${_.timestamp||""}`)),f&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-white dark:bg-slate-700 px-3 py-2 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),e.jsx("div",{ref:m})]})}),e.jsx("div",{className:"bg-gray-100 dark:bg-slate-800 px-4 py-3 border-t border-gray-300 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-slate-700 rounded-full transition-colors",children:e.jsx(Ab,{className:"h-5 w-5"})}),e.jsx("button",{className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-slate-700 rounded-full transition-colors",children:e.jsx(x4,{className:"h-5 w-5"})}),e.jsx("input",{type:"text",value:u,onChange:S,onKeyPress:_=>_.key==="Enter"&&v(),placeholder:"Type a message",className:"flex-1 px-4 py-2 bg-white dark:bg-slate-700 rounded-full text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500"}),u.trim()?e.jsx("button",{onClick:v,className:"p-2 bg-green-600 text-white rounded-full hover:bg-green-700 transition-colors",children:e.jsx(ra,{className:"h-5 w-5"})}):e.jsx("button",{className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-slate-700 rounded-full transition-colors",children:e.jsx(r4,{className:"h-5 w-5"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50 dark:bg-slate-900",children:e.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[e.jsx(fs,{className:"h-20 w-20 mx-auto mb-4 opacity-30"}),e.jsx("p",{className:"text-lg",children:"Select a chat to start messaging"}),e.jsx("p",{className:"text-sm mt-2",children:"Choose a conversation from the left panel"})]})})})]})})}function S9(){const[t,s]=b.useState({label:"Last 30 Days",value:"30d",days:30}),[r]=b.useState({revenue:{total:125e4,growth:15.2,monthly:[95e3,11e4,125e3,14e4,135e3,15e4],daily:[4200,3800,4500,5200,4800,5100,4900]},orders:{total:2847,growth:12.8,average:439,conversion:3.2},customers:{total:15420,new:1250,returning:14170,growth:18.5},traffic:{total:125e3,growth:8.7,sources:{organic:45e3,direct:35e3,social:25e3,paid:15e3,email:5e3}},engagement:{pageViews:45e4,bounceRate:35.2,sessionDuration:4.2,pagesPerSession:3.8},products:{topSelling:[{name:"Face Cleanser",sales:450,revenue:225e3,growth:22.5},{name:"Moisturizer",sales:380,revenue:19e4,growth:18.3},{name:"Serum",sales:320,revenue:32e4,growth:25.7},{name:"Sunscreen",sales:280,revenue:14e4,growth:15.2},{name:"Face Mask",sales:250,revenue:125e3,growth:20.1}],categories:[{name:"Skincare",sales:1200,revenue:6e5},{name:"Hair Care",sales:800,revenue:4e5},{name:"Body Care",sales:600,revenue:3e5},{name:"Accessories",sales:200,revenue:1e5}]},marketing:{email:{sent:5e4,opened:15e3,clicked:3e3,conversion:450},sms:{sent:15e3,delivered:14850,clicked:2250,conversion:180},push:{sent:25e3,opened:8750,clicked:1750,conversion:280}}}),a=[{label:"Last 7 Days",value:"7d",days:7},{label:"Last 30 Days",value:"30d",days:30},{label:"Last 90 Days",value:"90d",days:90},{label:"Last Year",value:"1y",days:365}],n=c=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(c),i=c=>new Intl.NumberFormat("en-IN").format(c),l=c=>c>0?"text-green-600":c<0?"text-red-600":"text-gray-600",o=c=>c>0?e.jsx(zt,{className:"h-4 w-4 text-green-600"}):c<0?e.jsx(zt,{className:"h-4 w-4 text-red-600 rotate-180"}):e.jsx(zt,{className:"h-4 w-4 text-gray-600"});return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Advanced Analytics Dashboard"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Comprehensive insights into your business performance"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("select",{value:t.value,onChange:c=>{const d=a.find(u=>u.value===c.target.value);d&&s(d)},className:"px-3 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"},children:a.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))}),e.jsxs("button",{className:"btn-secondary flex items-center space-x-2",children:[e.jsx(wa,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(vr,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Revenue"}),e.jsx("p",{className:"text-3xl font-bold",children:n(r.revenue.total)}),e.jsxs("div",{className:"flex items-center mt-2",children:[o(r.revenue.growth),e.jsxs("span",{className:"ml-1 text-sm",children:[r.revenue.growth>0?"+":"",r.revenue.growth,"%"]})]})]}),e.jsx(ko,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Orders"}),e.jsx("p",{className:"text-3xl font-bold",children:i(r.orders.total)}),e.jsxs("div",{className:"flex items-center mt-2",children:[o(r.orders.growth),e.jsxs("span",{className:"ml-1 text-sm",children:[r.orders.growth>0?"+":"",r.orders.growth,"%"]})]})]}),e.jsx(Xs,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Customers"}),e.jsx("p",{className:"text-3xl font-bold",children:i(r.customers.total)}),e.jsxs("div",{className:"flex items-center mt-2",children:[o(r.customers.growth),e.jsxs("span",{className:"ml-1 text-sm",children:[r.customers.growth>0?"+":"",r.customers.growth,"%"]})]})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Conversion Rate"}),e.jsxs("p",{className:"text-3xl font-bold",children:[r.orders.conversion,"%"]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(ds,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-1 text-sm",children:"Industry avg: 2.5%"})]})]}),e.jsx(ds,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Revenue Trend"}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-2",children:r.revenue.monthly.map((c,d)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"bg-blue-500 rounded-t w-8 mb-2",style:{height:`${c/Math.max(...r.revenue.monthly)*200}px`}}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:n(c)}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:["M",d+1]})]},d))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Daily Orders"}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-2",children:r.revenue.daily.map((c,d)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"bg-green-500 rounded-t w-8 mb-2",style:{height:`${c/Math.max(...r.revenue.daily)*200}px`}}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:c}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:["D",d+1]})]},d))})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Traffic Sources"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:Object.entries(r.traffic.sources).map(([c,d])=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-2 relative",children:e.jsx("div",{className:"w-full h-full rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center",children:e.jsxs("span",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:[Math.round(d/r.traffic.total*100),"%"]})})}),e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 capitalize",children:c}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[i(d)," visitors"]})]},c))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Top Selling Products"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Sales"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Growth"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:r.products.topSelling.map((c,d)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:d+1})}),e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:c.name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:i(c.sales)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:n(c.revenue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[o(c.growth),e.jsxs("span",{className:`ml-1 text-sm ${l(c.growth)}`,children:[c.growth>0?"+":"",c.growth,"%"]})]})})]},d))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Email Marketing"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Sent"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:i(r.marketing.email.sent)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Open Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[(r.marketing.email.opened/r.marketing.email.sent*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Click Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[(r.marketing.email.clicked/r.marketing.email.sent*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Conversions"}),e.jsx("span",{className:"font-semibold text-green-600",children:i(r.marketing.email.conversion)})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"SMS Marketing"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Sent"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:i(r.marketing.sms.sent)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Delivery Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[(r.marketing.sms.delivered/r.marketing.sms.sent*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Click Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[(r.marketing.sms.clicked/r.marketing.sms.sent*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Conversions"}),e.jsx("span",{className:"font-semibold text-green-600",children:i(r.marketing.sms.conversion)})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Push Notifications"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Sent"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:i(r.marketing.push.sent)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Open Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[(r.marketing.push.opened/r.marketing.push.sent*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Click Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[(r.marketing.push.clicked/r.marketing.push.sent*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Conversions"}),e.jsx("span",{className:"font-semibold text-green-600",children:i(r.marketing.push.conversion)})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Customer Breakdown"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Customers"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:i(r.customers.total)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"New Customers"}),e.jsx("span",{className:"font-semibold text-blue-600",children:i(r.customers.new)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Returning Customers"}),e.jsx("span",{className:"font-semibold text-green-600",children:i(r.customers.returning)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Customer Growth"}),e.jsxs("div",{className:"flex items-center",children:[o(r.customers.growth),e.jsxs("span",{className:`ml-1 text-sm ${l(r.customers.growth)}`,children:[r.customers.growth>0?"+":"",r.customers.growth,"%"]})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Engagement Metrics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Page Views"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:i(r.engagement.pageViews)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Bounce Rate"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[r.engagement.bounceRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Session Duration"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[r.engagement.sessionDuration,"m"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Pages per Session"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:r.engagement.pagesPerSession})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Product Categories Performance"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:r.products.categories.map((c,d)=>e.jsxs("div",{className:"text-center p-4 border border-slate-200 dark:border-slate-700 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:c.name}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Sales"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:i(c.sales)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:n(c.revenue)})]})]})]},d))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Performance Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(zt,{className:"h-6 w-6"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Revenue Growth"}),e.jsxs("p",{className:"text-sm opacity-90",children:["Your revenue has grown by ",r.revenue.growth,"% compared to last period"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(Pt,{className:"h-6 w-6"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Customer Acquisition"}),e.jsxs("p",{className:"text-sm opacity-90",children:[r.customers.new," new customers acquired this period"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(ds,{className:"h-6 w-6"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Conversion Rate"}),e.jsxs("p",{className:"text-sm opacity-90",children:[r.orders.conversion,"% conversion rate, above industry average"]})]})]})]})]})}const Xa=Pn();function C9(){var I,U,z,Y;const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState(null),[c,d]=b.useState(!1),[u,p]=b.useState(!1),[f,g]=b.useState(!1),[x,h]=b.useState(null),[m,j]=b.useState(""),[v,N]=b.useState(""),[S,A]=b.useState(null),T=[{type:"text",label:"Text Input",icon:_0},{type:"email",label:"Email",icon:ss},{type:"phone",label:"Phone",icon:pa},{type:"textarea",label:"Text Area",icon:gs},{type:"select",label:"Dropdown",icon:ws},{type:"checkbox",label:"Checkbox",icon:Fb},{type:"radio",label:"Radio Button",icon:ws},{type:"date",label:"Date Picker",icon:Mr},{type:"number",label:"Number",icon:_0},{type:"file",label:"File Upload",icon:Kn},{type:"rating",label:"Rating",icon:xr}];b.useEffect(()=>{k(),_()},[]);const k=async()=>{try{i(!0);const K=await fetch(`${Xa}/forms`);if(K.ok){const ne=await K.json(),q=ne.forms||ne||[];s(q.map(re=>({...re,fields:typeof re.fields=="string"?JSON.parse(re.fields):re.fields||[]})))}}catch(K){console.error("Error fetching forms:",K)}finally{i(!1)}},_=async()=>{try{const K=await fetch(`${Xa}/forms/submissions`);if(K.ok){const ne=await K.json();a(ne.submissions||ne||[])}}catch(K){console.error("Error fetching submissions:",K)}},y=async()=>{if(!m.trim()){alert("Please enter a form title");return}try{const K={name:m,fields:[],status:"draft"},ne=await fetch(`${Xa}/forms`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m,description:v,fields:[],settings:{},isPublished:!1})});if(ne.ok){const q=await ne.json(),re={...q,fields:typeof q.fields=="string"?JSON.parse(q.fields):q.fields||[]};s([re,...t]),o(re),d(!1),j(""),N(""),alert("Form created successfully!")}else{const q=await ne.json();alert(q.message||"Failed to create form")}}catch(K){console.error("Error creating form:",K),alert("Failed to create form")}},w=K=>{if(!l)return;const ne={id:Date.now().toString(),type:K,label:`New ${K} Field`,required:!1,options:K==="select"||K==="radio"?["Option 1","Option 2"]:void 0},q=[...l.fields||[],ne];L(q)},R=K=>{if(!l)return;const ne=l.fields.filter(q=>q.id!==K);L(ne)},P=K=>{h({...K})},H=()=>{if(!l||!x)return;const K=l.fields.map(ne=>ne.id===x.id?x:ne);L(K),h(null)},L=async K=>{if(l)try{const ne={...l,fields:K},q=await fetch(`${Xa}/forms/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ne.name,description:"",fields:K,settings:{},isPublished:ne.status==="active"})});if(q.ok){const re=await q.json(),xe={...re,fields:typeof re.fields=="string"?JSON.parse(re.fields):re.fields||[]};o(xe),s(t.map(_e=>_e.id===xe.id?xe:_e))}}catch(ne){console.error("Error updating form:",ne),alert("Failed to update form")}},O=async K=>{try{const ne=t.find(re=>re.id===K);if(!ne)return;(await fetch(`${Xa}/forms/${K}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ne.name,description:"",fields:ne.fields,settings:{},isPublished:!0})})).ok&&(await k(),alert("Form published successfully!"))}catch(ne){console.error("Error publishing form:",ne),alert("Failed to publish form")}},W=async K=>{try{const ne=t.find(re=>re.id===K);if(!ne)return;(await fetch(`${Xa}/forms/${K}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ne.name,description:"",fields:ne.fields,settings:{},isPublished:!1})})).ok&&(await k(),alert("Form unpublished successfully!"))}catch(ne){console.error("Error unpublishing form:",ne),alert("Failed to unpublish form")}},Q=async K=>{try{const ne=t.find(re=>re.id===K);if(!ne)return;(await fetch(`${Xa}/forms`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:`${ne.name} (Copy)`,description:"",fields:ne.fields,settings:{},isPublished:!1})})).ok&&(await k(),alert("Form copied successfully!"))}catch(ne){console.error("Error copying form:",ne),alert("Failed to copy form")}},D=async K=>{if(confirm("Are you sure you want to delete this form? This action cannot be undone."))try{(await fetch(`${Xa}/forms/${K}`,{method:"DELETE"})).ok&&(s(t.filter(q=>q.id!==K)),(l==null?void 0:l.id)===K&&o(null),alert("Form deleted successfully!"))}catch(ne){console.error("Error deleting form:",ne),alert("Failed to delete form")}},F=(K,ne)=>{if(!l)return;const q=[...l.fields],re=ne==="up"?K-1:K+1;re<0||re>=q.length||([q[K],q[re]]=[q[re],q[K]],L(q))},V=K=>{const ne=T.find(q=>q.type===K);return ne?ne.icon:_0},te=K=>r.filter(ne=>ne.form_id===K);return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Form Builder"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Create custom forms to collect customer data and feedback"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>g(!f),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center space-x-2",children:[e.jsx(ot,{className:"h-4 w-4"}),e.jsx("span",{children:"View Submissions"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Form"})]})]})]}),f&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"All Form Submissions"}),e.jsx("button",{onClick:()=>g(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:e.jsx(Zt,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"space-y-4",children:r.length===0?e.jsx("p",{className:"text-slate-500 text-center py-8",children:"No submissions yet"}):r.map(K=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:K.form_name||`Form #${K.form_id}`}),e.jsx("span",{className:"text-sm text-slate-500",children:new Date(K.created_at).toLocaleString()})]}),e.jsx("div",{className:"space-y-1",children:Object.entries(K.data).map(([ne,q])=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:[ne,":"]})," ",e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:String(q)})]},ne))})]},K.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Your Forms"}),t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-slate-500 mb-4",children:"No forms created yet"}),e.jsx("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Your First Form"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(K=>{var q;const ne=te(K.id);return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:K.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${K.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:K.status==="active"?"Published":"Draft"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-500 dark:text-slate-500 mb-4",children:[e.jsxs("span",{children:[ne.length," submissions"]}),e.jsxs("span",{children:[((q=K.fields)==null?void 0:q.length)||0," fields"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>o(K),className:"flex-1 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>{o(K),p(!0)},className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(ot,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Q(K.id),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(Zi,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>D(K.id),className:"px-3 py-1 border border-red-300 dark:border-red-600 text-red-700 dark:text-red-300 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},K.id)})})]}),l&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Add Field"}),e.jsx("div",{className:"space-y-2",children:T.map(K=>{const ne=K.icon;return e.jsxs("button",{onClick:()=>w(K.type),className:"w-full flex items-center space-x-3 p-3 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[e.jsx(ne,{className:"h-4 w-4 text-slate-600 dark:text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:K.label})]},K.type)})})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Form Fields: ",l.name]}),e.jsx("div",{className:"flex gap-2",children:l.status==="active"?e.jsx("button",{onClick:()=>W(l.id),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:"Unpublish"}):e.jsx("button",{onClick:()=>O(l.id),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Publish Form"})})]}),((I=l.fields)==null?void 0:I.length)===0?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg",children:[e.jsx("p",{className:"text-slate-500 mb-4",children:"No fields added yet"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Click on a field type to add it to your form"})]}):e.jsx("div",{className:"space-y-4",children:(U=l.fields)==null?void 0:U.map((K,ne)=>{const q=V(K.type);return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[e.jsx(U2,{className:"h-4 w-4 text-slate-400 cursor-move"}),e.jsx(q,{className:"h-4 w-4 text-slate-600 dark:text-slate-400"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:K.label}),K.required&&e.jsx("span",{className:"text-red-500 text-sm",children:"*"})]}),e.jsxs("div",{className:"flex space-x-2",children:[ne>0&&e.jsx("button",{onClick:()=>F(ne,"up"),className:"p-1 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400",children:e.jsx(um,{className:"h-4 w-4"})}),ne<l.fields.length-1&&e.jsx("button",{onClick:()=>F(ne,"down"),className:"p-1 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400",children:e.jsx(dm,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>P(K),className:"p-1 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400",children:e.jsx(mr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>R(K.id),className:"p-1 text-slate-600 dark:text-slate-400 hover:text-red-600 dark:hover:text-red-400",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Type: ",K.type,K.placeholder&&e.jsxs("span",{className:"ml-2",children:["Placeholder: ",K.placeholder]})]}),K.options&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Options:"}),e.jsx("ul",{className:"text-sm text-slate-500 dark:text-slate-500",children:K.options.map((re,xe)=>e.jsxs("li",{children:[" ",re]},xe))})]})]},K.id)})})]})]}),x&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Edit Field"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Label"}),e.jsx("input",{type:"text",value:x.label,onChange:K=>h({...x,label:K.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Placeholder"}),e.jsx("input",{type:"text",value:x.placeholder||"",onChange:K=>h({...x,placeholder:K.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),(x.type==="select"||x.type==="radio")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Options (one per line)"}),e.jsx("textarea",{value:((z=x.options)==null?void 0:z.join(`
`))||"",onChange:K=>h({...x,options:K.target.value.split(`
`).filter(ne=>ne.trim())}),rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:x.required,onChange:K=>h({...x,required:K.target.checked}),className:"rounded"}),e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Required"})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>h(null),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:H,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save"})]})]})}),u&&l&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Form Preview: ",l.name]}),e.jsx("button",{onClick:()=>p(!1),className:"text-2xl text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:""})]}),e.jsxs("div",{className:"space-y-4",children:[(Y=l.fields)==null?void 0:Y.map(K=>{var ne,q;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:[K.label,K.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),K.type==="text"&&e.jsx("input",{type:"text",placeholder:K.placeholder,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),K.type==="email"&&e.jsx("input",{type:"email",placeholder:K.placeholder,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),K.type==="phone"&&e.jsx("input",{type:"tel",placeholder:K.placeholder,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),K.type==="textarea"&&e.jsx("textarea",{rows:4,placeholder:K.placeholder,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),K.type==="select"&&e.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{children:"Select an option"}),(ne=K.options)==null?void 0:ne.map((re,xe)=>e.jsx("option",{value:re,children:re},xe))]}),K.type==="checkbox"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",className:"rounded"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:K.label})]}),K.type==="radio"&&e.jsx("div",{className:"space-y-2",children:(q=K.options)==null?void 0:q.map((re,xe)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:K.id,className:"rounded"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:re})]},xe))}),K.type==="date"&&e.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),K.type==="number"&&e.jsx("input",{type:"number",placeholder:K.placeholder,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),K.type==="file"&&e.jsx("input",{type:"file",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),K.type==="rating"&&e.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(re=>e.jsx("button",{className:"text-yellow-400 hover:text-yellow-500",children:e.jsx(xr,{className:"h-6 w-6"})},re))})]},K.id)}),e.jsx("button",{className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"Submit"})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Create New Form"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Form Title *"}),e.jsx("input",{type:"text",value:m,onChange:K=>j(K.target.value),placeholder:"Enter form title",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{rows:3,value:v,onChange:K=>N(K.target.value),placeholder:"Enter form description",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>{d(!1),j(""),N("")},className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:y,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Form"})]})]})})]})}const U0=Pn();function _9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState(""),[c,d]=b.useState("all"),[u,p]=b.useState("all"),[f,g]=b.useState(null),[x,h]=b.useState([]);b.useEffect(()=>{m(),j(),v()},[]);const m=async()=>{try{i(!0);const y=await fetch(`${U0}/forms/submissions`);if(y.ok){const w=await y.json();s(w.submissions||w||[])}}catch(y){console.error("Error fetching submissions:",y)}finally{i(!1)}},j=async()=>{try{const y=await fetch(`${U0}/users`);if(y.ok){const w=await y.json();a(w||[])}}catch(y){console.error("Error fetching users:",y)}},v=async()=>{try{const y=await fetch(`${U0}/forms`);if(y.ok){const w=await y.json();h(w.forms||w||[])}}catch(y){console.error("Error fetching forms:",y)}},N=y=>{const w=y.data||{},R=w.email||w.Email||"";return R&&r.find(P=>P.email.toLowerCase()===R.toLowerCase())||null},S=y=>{const w=N(y),R=y.data||{};return{user:w,name:R.name||R.Name||(w==null?void 0:w.name)||"Anonymous",email:R.email||R.Email||(w==null?void 0:w.email)||"N/A",phone:R.phone||R.Phone||(w==null?void 0:w.phone)||null}},A=t.filter(y=>{var H;const w=((H=y.form_name)==null?void 0:H.toLowerCase().includes(l.toLowerCase()))||Object.values(y.data||{}).some(L=>String(L).toLowerCase().includes(l.toLowerCase())),R=c==="all"||y.status===c,P=u==="all"||String(y.form_id)===u;return w&&R&&P}),T=async(y,w)=>{try{s(t.map(R=>R.id===y?{...R,status:w}:R))}catch(R){console.error("Error updating submission status:",R)}},k=()=>{var H;const y=[["Form Name","User Name","Email","Phone","Submission Date","Status",...Object.keys(((H=t[0])==null?void 0:H.data)||{})].join(","),...A.map(L=>{const O=S(L),W=L.data||{};return[L.form_name||`Form #${L.form_id}`,O.name,O.email,O.phone||"",new Date(L.created_at).toLocaleString(),L.status,...Object.values(W).map(Q=>`"${String(Q).replace(/"/g,'""')}"`)].join(",")})].join(`
`),w=new Blob([y],{type:"text/csv"}),R=window.URL.createObjectURL(w),P=document.createElement("a");P.href=R,P.download=`form-submissions-${new Date().toISOString().split("T")[0]}.csv`,P.click(),window.URL.revokeObjectURL(R)},_=y=>{switch(y){case"new":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300";case"read":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300";case"archived":return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300";default:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300"}};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Form Submissions"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"View and manage all form submissions from users"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:k,disabled:A.length===0,className:"btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(wa,{className:"h-4 w-4"}),e.jsx("span",{children:"Export CSV"})]}),e.jsxs("div",{className:"metric-card px-4 py-2",children:[e.jsx("div",{className:"text-sm font-medium mb-1",style:{color:"var(--text-muted)"},children:"Total Submissions"}),e.jsx("div",{className:"text-2xl font-light",style:{color:"var(--arctic-blue-primary-dark)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:t.length})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search submissions...",value:l,onChange:y=>o(y.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("select",{value:c,onChange:y=>d(y.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"read",children:"Read"}),e.jsx("option",{value:"archived",children:"Archived"})]}),e.jsxs("select",{value:u,onChange:y=>p(y.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Forms"}),x.map(y=>e.jsx("option",{value:String(y.id),children:y.name},y.id))]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:A.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(gs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No submissions found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l||c!=="all"||u!=="all"?"Try adjusting your filters":"No form submissions have been received yet"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Form"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Submitted"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:A.map(y=>{const w=S(y);return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(gs,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:y.form_name||`Form #${y.form_id}`}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ID: ",y.form_id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900/20 flex items-center justify-center",children:e.jsx(ga,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:w.name}),w.user&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["User ID: ",w.user.id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ss,{className:"h-4 w-4 text-gray-400"}),w.email]}),w.phone&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:w.phone})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mr,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:new Date(y.created_at).toLocaleDateString()})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:new Date(y.created_at).toLocaleTimeString()})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${_(y.status)}`,children:y.status||"new"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("button",{onClick:()=>g(y),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors flex items-center space-x-1",children:[e.jsx(ot,{className:"h-4 w-4"}),e.jsx("span",{children:"View"})]})})]},y.id)})})]})})}),f&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Submission Details"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:f.form_name||`Form #${f.form_id}`})]}),e.jsx("button",{onClick:()=>g(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(Zt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(ga,{className:"h-5 w-5 mr-2"}),"User Information"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(()=>{const y=S(f);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Name"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:y.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:y.email})]}),y.phone&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Phone"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:y.phone})]}),y.user&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Registered User"}),e.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:["Yes (User ID: ",y.user.id,")"]})]})]})})()})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(gs,{className:"h-5 w-5 mr-2"}),"Form Data"]}),e.jsx("div",{className:"space-y-4",children:Object.entries(f.data||{}).map(([y,w])=>["email","Email","name","Name","phone","Phone"].includes(y)?null:e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-4 last:border-0",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-2",children:y}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:typeof w=="object"?JSON.stringify(w,null,2):String(w)})]},y))})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(Mr,{className:"h-5 w-5 mr-2"}),"Submission Metadata"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Submission ID"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:["#",f.id]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),e.jsx("p",{className:"text-sm mt-1",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${_(f.status)}`,children:f.status||"new"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Submitted At"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:new Date(f.created_at).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Form ID"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:f.form_id})]})]})]}),e.jsxs("div",{className:"flex space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>{T(f.id,"read"),g(null)},className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4"}),e.jsx("span",{children:"Mark as Read"})]}),e.jsx("button",{onClick:()=>{T(f.id,"archived"),g(null)},className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Archive"}),e.jsx("button",{onClick:()=>g(null),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Close"})]})]})]})})]})}function T9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState("");b.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0),o("");const y=await et.getWorkflows().catch(()=>[]);s(Array.isArray(y)?y:[])}catch(y){console.error("Failed to load workflows data:",y),o("Failed to load workflows data")}finally{i(!1)}},[d,u]=b.useState(null),[p,f]=b.useState(!1),[g,x]=b.useState(!1),[h,m]=b.useState("workflows"),j={totalWorkflows:t.length||0,activeWorkflows:t.filter(y=>y.status==="active").length||0,totalRuns:t.reduce((y,w)=>{var R;return y+(((R=w.stats)==null?void 0:R.totalRuns)||0)},0),averageSuccessRate:t.length>0?t.reduce((y,w)=>{var R;return y+(((R=w.stats)==null?void 0:R.successRate)||0)},0)/t.length:0},v=y=>{switch(y){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"paused":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"draft":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}};if(n)return e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading workflows..."})]})})});if(l)return e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:l})]}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})});const N=y=>{switch(y){case"marketing":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"sales":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"support":return"text-purple-600 bg-purple-100 dark:bg-purple-900 dark:text-purple-200";case"retention":return"text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},S=y=>{console.log("Toggling workflow:",y),alert("Workflow status updated!")},A=y=>{u(y)},T=y=>{console.log("Deleting workflow:",y),alert("Workflow deleted successfully!")},k=y=>{console.log("Copying workflow:",y),alert("Workflow copied successfully!")},_=y=>{console.log("Using template:",y),alert("Workflow created from template!")};return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Workflow Automation"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Automate customer interactions across all channels"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>x(!0),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(ot,{className:"h-4 w-4"}),e.jsx("span",{children:"Templates"})]}),e.jsxs("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Workflow"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Workflows"}),e.jsx("p",{className:"text-3xl font-bold",children:j.totalWorkflows})]}),e.jsx(s3,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active"}),e.jsx("p",{className:"text-3xl font-bold",children:j.activeWorkflows})]}),e.jsx(Ua,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Runs"}),e.jsx("p",{className:"text-3xl font-bold",children:j.totalRuns.toLocaleString()})]}),e.jsx(Ss,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Success Rate"}),e.jsxs("p",{className:"text-3xl font-bold",children:[j.averageSuccessRate.toFixed(1),"%"]})]}),e.jsx(ds,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsxs("nav",{className:"flex space-x-8 px-6",children:[e.jsx("button",{onClick:()=>m("workflows"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${h==="workflows"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"My Workflows"}),e.jsx("button",{onClick:()=>m("templates"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${h==="templates"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"Templates"}),e.jsx("button",{onClick:()=>m("analytics"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${h==="analytics"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"Analytics"})]})}),e.jsxs("div",{className:"p-6",children:[h==="workflows"&&e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(y=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:y.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${v(y.status)}`,children:y.status})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:y.description}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Runs:"}),e.jsx("span",{className:"font-semibold",children:y.stats.totalRuns})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Success Rate:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[y.stats.successRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Last Run:"}),e.jsx("span",{className:"font-semibold",children:y.stats.lastRun})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>A(y),className:"flex-1 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>S(y.id),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:y.status==="active"?e.jsx(Sn,{className:"h-4 w-4"}):e.jsx(Ua,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>k(y.id),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(Zi,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>T(y.id),className:"px-3 py-1 border border-red-300 dark:border-red-600 text-red-700 dark:text-red-300 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},y.id))})}),h==="templates"&&e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map(y=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:y.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N(y.category)}`,children:y.category})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:y.description}),y.isPopular&&e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:"px-2 py-1 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 text-xs rounded-full",children:"Popular"})}),e.jsx("button",{onClick:()=>_(y.id),className:"w-full px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Use Template"})]},y.id))})}),h==="analytics"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Top Performing Workflows"}),e.jsx("div",{className:"space-y-3",children:t.sort((y,w)=>w.stats.successRate-y.stats.successRate).slice(0,3).map((y,w)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:w+1})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:y.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[y.stats.totalRuns," runs"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-green-600",children:[y.stats.successRate,"%"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Success Rate"})]})]},y.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Workflow Performance"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Workflows"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:j.totalWorkflows})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Active Workflows"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:j.activeWorkflows})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Runs"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:j.totalRuns.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Average Success Rate"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[j.averageSuccessRate.toFixed(1),"%"]})]})]})]})]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Workflow Automation Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Start Simple"}),e.jsx("p",{className:"text-sm opacity-90",children:"Begin with basic workflows and gradually add complexity as you learn what works."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Test Thoroughly"}),e.jsx("p",{className:"text-sm opacity-90",children:"Always test your workflows before going live to ensure they work as expected."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Monitor Performance"}),e.jsx("p",{className:"text-sm opacity-90",children:"Regularly review workflow performance and optimize based on results."})]})]})]}),p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Create New Workflow"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Workflow Name"}),e.jsx("input",{type:"text",placeholder:"Enter workflow name",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{rows:3,placeholder:"Enter workflow description",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Trigger Type"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{children:"Customer Signup"}),e.jsx("option",{children:"Order Placed"}),e.jsx("option",{children:"Cart Abandoned"}),e.jsx("option",{children:"Product Viewed"}),e.jsx("option",{children:"Email Opened"}),e.jsx("option",{children:"SMS Clicked"})]})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{f(!1),alert("Workflow created successfully!")},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Workflow"})]})]})})]})}function E9(){var O,W,Q;const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState(""),[c,d]=b.useState(null),[u,p]=b.useState(null),[f,g]=b.useState(!1),[x,h]=b.useState(!1),[m,j]=b.useState("segments"),[v,N]=b.useState({name:"",description:"",criteria:[]});b.useEffect(()=>{S(),T()},[]);const S=async()=>{try{i(!0),o("");const D=await et.getCustomerSegments().catch(()=>[]);let F=Array.isArray(D)?D:[];if(!F||F.length===0){const V=await et.getCustomerSegmentAggregates().catch(()=>[]);F=Array.isArray(V)?V:[]}s(F),a([])}catch(D){console.error("Failed to load segments data:",D),o("Failed to load segments data")}finally{i(!1)}},A=async()=>{try{o("");const D=await et.getUsers(),F=(Array.isArray(D)?D:[]).map(V=>({id:String(V.id),name:V.name,email:V.email,segment:"All",totalOrders:parseInt(String(V.total_orders||0),10)||0,totalSpent:parseFloat(String(V.total_spent||0))||0,lastOrderDate:V.last_order_date||V.member_since,location:V.city||"N/A",tags:[]}));a(F)}catch(D){console.error("Failed to load customers:",D),a([])}},T=async()=>{try{const D=await et.getAnalytics(),F=(D==null?void 0:D.overview)||null;d(F)}catch(D){console.error("Failed to load analytics:",D),d(null)}};b.useEffect(()=>{m==="customers"?A():m==="analytics"&&T()},[m]);const k={totalSegments:t.length,totalCustomers:t.reduce((D,F)=>D+F.customerCount,0),activeSegments:t.filter(D=>D.isActive).length,totalRevenue:t.reduce((D,F)=>D+F.stats.totalRevenue,0)},_=D=>{switch(D){case"equals":return"equals";case"not_equals":return"does not equal";case"contains":return"contains";case"not_contains":return"does not contain";case"greater_than":return"is greater than";case"less_than":return"is less than";case"between":return"is between";case"in":return"is in";case"not_in":return"is not in";default:return D}},y=D=>{switch(D){case"total_spent":return"Total Spent";case"total_orders":return"Total Orders";case"registration_date":return"Registration Date";case"last_order_date":return"Last Order Date";case"category_preference":return"Category Preference";case"location":return"Location";case"age":return"Age";case"gender":return"Gender";default:return D}},w=()=>{g(!0)},R=D=>{p(D),g(!0),N({name:D.name,description:D.description,criteria:D.criteria||[]})},P=D=>{D&&confirm("Delete this segment?")&&et.deleteCustomerSegment(D).then(()=>S()).catch(()=>alert("Failed to delete segment"))},H=D=>{p(D),h(!0)},L=[{id:"segments",label:"Segments",icon:ds},{id:"customers",label:"Customers",icon:Pt},{id:"analytics",label:"Analytics",icon:Ss}];return n?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading segments..."})]})})}):l?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:l})]}),e.jsx("button",{onClick:S,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Customer Segmentation"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Create targeted customer segments for personalized marketing"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:S,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(ds,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:w,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Segment"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Segments"}),e.jsx("p",{className:"text-3xl font-bold",children:k.totalSegments})]}),e.jsx(ds,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Customers"}),e.jsx("p",{className:"text-3xl font-bold",children:((c==null?void 0:c.customers)??k.totalCustomers).toLocaleString()})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active Segments"}),e.jsx("p",{className:"text-3xl font-bold",children:k.activeSegments})]}),e.jsx(zt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Revenue"}),e.jsx("p",{className:"text-3xl font-bold",children:(c==null?void 0:c.revenue)!==void 0?`${Number(c.revenue).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`:`${(k.totalRevenue/1e5).toFixed(1)}L`})]}),e.jsx(Xs,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:L.map(D=>{const F=D.icon;return e.jsxs("button",{onClick:()=>j(D.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${m===D.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{children:D.label})]},D.id)})})}),e.jsxs("div",{className:"p-6",children:[m==="segments"&&e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(D=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:D.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${D.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:D.isActive?"Active":"Inactive"})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:D.description}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Customers:"}),e.jsx("span",{className:"font-semibold",children:D.customerCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Revenue:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["",(D.stats.totalRevenue/1e5).toFixed(1),"L"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Avg Order:"}),e.jsxs("span",{className:"font-semibold",children:["",D.stats.averageOrderValue]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:D.tags.map((F,V)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded",children:F},V))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>H(D),className:"flex-1 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"View"}),e.jsx("button",{onClick:()=>R(D),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(mr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>P(D.id),className:"px-3 py-1 border border-red-300 dark:border-red-600 text-red-700 dark:text-red-300 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},D.id))})}),m==="customers"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Customer List"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{children:"All Segments"}),e.jsx("option",{children:"VIP Customers"}),e.jsx("option",{children:"New Customers"}),e.jsx("option",{children:"At-Risk Customers"}),e.jsx("option",{children:"Skincare Enthusiasts"})]}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(ll,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Segment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Orders"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Total Spent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Last Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:r.map(D=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:D.name}),e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:D.email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded-full",children:D.segment})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:D.totalOrders}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:["",D.totalSpent.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:new Date(D.lastOrderDate).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400",children:D.location}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),e.jsx("button",{className:"text-green-600 hover:text-green-900",children:"Message"})]})]},D.id))})]})})]}),m==="analytics"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Segment Performance"}),e.jsx("div",{className:"space-y-3",children:t.sort((D,F)=>F.stats.totalRevenue-D.stats.totalRevenue).slice(0,3).map((D,F)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:F+1})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:D.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[D.customerCount," customers"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-green-600",children:["",(D.stats.totalRevenue/1e5).toFixed(1),"L"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]})]},D.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Segment Analytics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Segments"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:k.totalSegments})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Active Segments"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:k.activeSegments})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Customers"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:(c==null?void 0:c.customers)??k.totalCustomers})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Revenue"}),e.jsx("span",{className:"font-semibold text-green-600",children:(c==null?void 0:c.revenue)!==void 0?`${Number(c.revenue).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`:`${(k.totalRevenue/1e5).toFixed(1)}L`})]})]})]})]})})]})]}),x&&u&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Segment Details: ",u.name]}),e.jsx("button",{onClick:()=>h(!1),className:"text-2xl text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:""})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Description"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:u.description})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Segmentation Criteria"}),e.jsx("div",{className:"space-y-2",children:u.criteria.map((D,F)=>e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:y(D.field)}),e.jsx("span",{className:"mx-2 text-slate-600 dark:text-slate-400",children:_(D.operator)}),e.jsxs("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:[D.value,D.value2&&` and ${D.value2}`]})]},F))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Segment Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u.customerCount}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Customers"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:u.stats.totalOrders}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Orders"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["",(u.stats.totalRevenue/1e5).toFixed(1),"L"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["",u.stats.averageOrderValue]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Avg Order Value"})]})]})]})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:u?"Edit Segment":"Create New Segment"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Segment Name"}),e.jsx("input",{type:"text",value:v.name,onChange:D=>N(F=>({...F,name:D.target.value})),placeholder:"Enter segment name",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{rows:3,value:v.description,onChange:D=>N(F=>({...F,description:D.target.value})),placeholder:"Enter segment description",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Criteria"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",onChange:D=>N(F=>({...F,criteria:[{field:D.target.value,operator:"greater_than",value:""}]})),value:((O=v.criteria[0])==null?void 0:O.field)||"",children:[e.jsx("option",{value:"",children:"Select field"}),e.jsx("option",{value:"total_spent",children:"Total Spent"}),e.jsx("option",{value:"total_orders",children:"Total Orders"}),e.jsx("option",{value:"registration_date",children:"Registration Date"}),e.jsx("option",{value:"last_order_date",children:"Last Order Date"}),e.jsx("option",{value:"category_preference",children:"Category Preference"})]}),e.jsxs("select",{className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",onChange:D=>N(F=>({...F,criteria:[{...F.criteria[0]||{field:"",operator:"greater_than",value:""},operator:D.target.value}]})),value:((W=v.criteria[0])==null?void 0:W.operator)||"greater_than",children:[e.jsx("option",{value:"greater_than",children:"is greater than"}),e.jsx("option",{value:"less_than",children:"is less than"}),e.jsx("option",{value:"equals",children:"equals"}),e.jsx("option",{value:"contains",children:"contains"})]}),e.jsx("input",{type:"text",placeholder:"Value",value:((Q=v.criteria[0])==null?void 0:Q.value)||"",onChange:D=>N(F=>({...F,criteria:[{...F.criteria[0]||{field:"",operator:"greater_than",value:""},value:D.target.value}]})),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>{g(!1),p(null),N({name:"",description:"",criteria:[]})},className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:async()=>{try{if(!v.name.trim())return alert("Segment name is required");const D={name:v.name.trim(),description:v.description.trim(),criteria:v.criteria,is_active:!0};u?await et.updateCustomerSegment(u.id,D):await et.createCustomerSegment(D),await S(),g(!1),p(null),N({name:"",description:"",criteria:[]})}catch{alert("Failed to save segment")}},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:u?"Update Segment":"Create Segment"})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Customer Segmentation Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Define Clear Criteria"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use specific, measurable criteria to create meaningful customer segments."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Regular Updates"}),e.jsx("p",{className:"text-sm opacity-90",children:"Regularly update segments based on changing customer behavior and preferences."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Personalized Marketing"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use segments to deliver personalized marketing messages and offers."})]})]})]})]})}function A9(){const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(""),[l]=b.useState([{name:"Awareness",events:["page_view","email_open"],color:"bg-blue-500",description:"Customer discovers your brand"},{name:"Interest",events:["product_view","email_click"],color:"bg-green-500",description:"Customer shows interest in products"},{name:"Consideration",events:["add_to_cart","sms_click"],color:"bg-yellow-500",description:"Customer considers purchasing"},{name:"Purchase",events:["purchase"],color:"bg-purple-500",description:"Customer makes a purchase"},{name:"Retention",events:["review_submit","chat_start"],color:"bg-pink-500",description:"Customer engages post-purchase"}]),[o,c]=b.useState(null),[d,u]=b.useState("journeys"),[p,f]=b.useState("7d"),[g,x]=b.useState("all"),h=async()=>{try{a(!0),i("");const A=await et.getCustomerJourneys(p,g),T=Array.isArray(A)?A:(A==null?void 0:A.data)||[];s(T)}catch(A){console.error("Error loading journeys:",A),i("Failed to load journey data"),s([])}finally{a(!1)}};b.useEffect(()=>{h()},[p,g]),b.useEffect(()=>{Ye.isConnected()||Ye.connect();const A=Ye.subscribe("user-action-update",_=>{h()}),T=Ye.subscribe("page-view-update",_=>{h()}),k=Ye.subscribe("cart-update",_=>{h()});return()=>{A(),T(),k()}},[]);const m={totalCustomers:t.length,totalEvents:t.reduce((A,T)=>A+T.totalEvents,0),totalValue:t.reduce((A,T)=>A+T.totalValue,0),activeCustomers:t.filter(A=>A.status==="active").length},j=A=>{switch(A){case"page_view":return e.jsx(ot,{className:"h-4 w-4"});case"product_view":return e.jsx(ot,{className:"h-4 w-4"});case"add_to_cart":return e.jsx(Xs,{className:"h-4 w-4"});case"purchase":return e.jsx(Xs,{className:"h-4 w-4"});case"email_open":return e.jsx(ss,{className:"h-4 w-4"});case"email_click":return e.jsx(ss,{className:"h-4 w-4"});case"sms_click":return e.jsx(fs,{className:"h-4 w-4"});case"push_click":return e.jsx(Ra,{className:"h-4 w-4"});case"chat_start":return e.jsx(fs,{className:"h-4 w-4"});case"review_submit":return e.jsx(Ui,{className:"h-4 w-4"});default:return e.jsx(cs,{className:"h-4 w-4"})}},v=A=>{switch(A){case"page_view":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"product_view":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"add_to_cart":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"purchase":return"text-purple-600 bg-purple-100 dark:bg-purple-900 dark:text-purple-200";case"email_open":return"text-indigo-600 bg-indigo-100 dark:bg-indigo-900 dark:text-indigo-200";case"email_click":return"text-indigo-600 bg-indigo-100 dark:bg-indigo-900 dark:text-indigo-200";case"sms_click":return"text-cyan-600 bg-cyan-100 dark:bg-cyan-900 dark:text-cyan-200";case"push_click":return"text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-200";case"chat_start":return"text-pink-600 bg-pink-100 dark:bg-pink-900 dark:text-pink-200";case"review_submit":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},N=A=>{switch(A){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"inactive":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"at-risk":return"text-orange-600 bg-orange-100 dark:bg-orange-900 dark:text-orange-200";case"churned":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},S=[{id:"journeys",label:"Customer Journeys",icon:xm},{id:"events",label:"Event Analytics",icon:zt},{id:"stages",label:"Journey Stages",icon:cs}];return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Customer Journey Tracking"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Track and analyze customer interactions across all touchpoints"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("select",{value:p,onChange:A=>f(A.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"1d",children:"Last 24 hours"}),e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"})]}),e.jsxs("button",{className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(wa,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Customers"}),e.jsx("p",{className:"text-3xl font-bold",children:m.totalCustomers})]}),e.jsx(ga,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Events"}),e.jsx("p",{className:"text-3xl font-bold",children:m.totalEvents})]}),e.jsx(zt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Value"}),e.jsxs("p",{className:"text-3xl font-bold",children:["",(m.totalValue/1e5).toFixed(1),"L"]})]}),e.jsx(Xs,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active Customers"}),e.jsx("p",{className:"text-3xl font-bold",children:m.activeCustomers})]}),e.jsx(Ui,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:S.map(A=>{const T=A.icon;return e.jsxs("button",{onClick:()=>u(A.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${d===A.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("span",{children:A.label})]},A.id)})})}),e.jsxs("div",{className:"p-6",children:[d==="journeys"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Customer Journeys"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{value:g,onChange:A=>x(A.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"all",children:"All Events"}),e.jsx("option",{value:"page_view",children:"Page Views"}),e.jsx("option",{value:"product_view",children:"Product Views"}),e.jsx("option",{value:"add_to_cart",children:"Add to Cart"}),e.jsx("option",{value:"purchase",children:"Purchases"}),e.jsx("option",{value:"email_open",children:"Email Opens"})]}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(ll,{className:"h-4 w-4"})})]})]}),r?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Loading journey data..."})]}):n?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-600 dark:text-red-400",children:n}),e.jsx("button",{onClick:h,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})]}):t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No journey data found for the selected time range."})}):e.jsx("div",{className:"space-y-4",children:t.map(A=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-800 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-200 font-bold",children:A.customerName.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:A.customerName}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:A.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Value"}),e.jsxs("p",{className:"font-semibold text-green-600",children:["",A.totalValue.toLocaleString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Events"}),e.jsx("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:A.totalEvents})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N(A.status)}`,children:A.status})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex space-x-4 text-sm text-slate-600 dark:text-slate-400",children:[e.jsxs("span",{children:["First seen: ",new Date(A.firstSeen).toLocaleDateString()]}),e.jsxs("span",{children:["Last seen: ",new Date(A.lastSeen).toLocaleDateString()]})]}),e.jsx("button",{onClick:()=>c(A),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"View Journey"})]}),e.jsxs("div",{className:"flex space-x-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ot,{className:"h-4 w-4 text-blue-500"}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Website: ",A.touchpoints.website]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ss,{className:"h-4 w-4 text-indigo-500"}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Email: ",A.touchpoints.email]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(fs,{className:"h-4 w-4 text-cyan-500"}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["SMS: ",A.touchpoints.sms]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ra,{className:"h-4 w-4 text-orange-500"}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Push: ",A.touchpoints.push]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(fs,{className:"h-4 w-4 text-pink-500"}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Chat: ",A.touchpoints.chat]})]})]})]},A.customerId))})]}),d==="events"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Event Analytics"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(A=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:`w-8 h-8 ${A.color} rounded-full flex items-center justify-center`,children:e.jsx("span",{className:"text-white font-bold text-sm",children:A.name.charAt(0)})}),e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:A.name})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:A.description}),e.jsx("div",{className:"space-y-2",children:A.events.map((T,k)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[j(T),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:T.replace("_"," ")})]},k))})]},A.name))})]}),d==="stages"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Journey Stage Analysis"}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Customer Journey Flow"}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Last 30 days"})]}),e.jsx("div",{className:"space-y-4",children:l.map((A,T)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-12 h-12 ${A.color} rounded-full flex items-center justify-center text-white font-bold`,children:T+1}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100",children:A.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:A.description})]})]}),T<l.length-1&&e.jsx("div",{className:"flex-1 mx-4",children:e.jsx("div",{className:"h-0.5 bg-slate-200 dark:bg-slate-700 relative",children:e.jsx("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 w-0 h-0 border-l-4 border-l-slate-300 dark:border-l-slate-600 border-t-2 border-t-transparent border-b-2 border-b-transparent"})})})]},A.name))})]})]})]})]}),o&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Journey Details: ",o.customerName]}),e.jsx("button",{onClick:()=>c(null),className:"text-2xl text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:""})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o.totalEvents}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Events"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",o.totalValue.toLocaleString()]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Value"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Math.ceil((new Date(o.lastSeen).getTime()-new Date(o.firstSeen).getTime())/(1e3*60*60*24))}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Days Active"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-3",children:"Event Timeline"}),e.jsx("div",{className:"space-y-3",children:o.events.map(A=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[e.jsx("div",{className:`p-2 rounded-full ${v(A.eventType)}`,children:j(A.eventType)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100",children:A.eventName}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:A.timestamp}),A.details.product&&e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Product: ",A.details.product]}),A.details.value&&e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Value: ",A.details.value.toLocaleString()]})]})]},A.id))})]})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Customer Journey Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Track All Touchpoints"}),e.jsx("p",{className:"text-sm opacity-90",children:"Monitor customer interactions across all channels to get a complete picture."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Identify Pain Points"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use journey data to identify where customers drop off and optimize those areas."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Personalize Experiences"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use journey insights to deliver personalized experiences at each stage."})]})]})]})]})}function F9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState([]),[l,o]=b.useState(!0),[c,d]=b.useState("");b.useEffect(()=>{u()},[]);const u=async()=>{try{o(!0),d("");const v=await et.getActionableInsights().catch(()=>[]);a(Array.isArray(v)?v:[]),s([]),i([])}catch(v){console.error("Failed to load analytics data:",v),d("Failed to load analytics data")}finally{o(!1)}},[p,f]=b.useState("overview"),[g,x]=b.useState("30d");if(l)return e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading analytics..."})]})})});if(c)return e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]}),e.jsx("button",{onClick:u,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})});const h=v=>{switch(v){case"high":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";case"medium":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},m=v=>{switch(v){case"excellent":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"good":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"average":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"poor":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},j=[{id:"overview",label:"Overview",icon:Ss},{id:"insights",label:"Actionable Insights",icon:ds},{id:"performance",label:"Performance",icon:zt}];return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Actionable Analytics"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Data-driven insights to optimize your business performance"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(zt,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("select",{value:g,onChange:v=>x(v.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]}),e.jsxs("button",{className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(wa,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.length===0?e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx(Ss,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No metrics available"})]}):t.map(v=>{const N=v.icon;return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:v.name}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:v.name==="Revenue"?`${(v.value/1e5).toFixed(1)}L`:v.name==="Conversion Rate"?`${v.value}%`:v.name==="Customer Retention"?`${v.value}%`:`${v.value}`})]}),e.jsx("div",{className:`p-3 rounded-full ${v.color.replace("text-","bg-").replace("-600","-100")} dark:bg-opacity-20`,children:e.jsx(N,{className:`h-6 w-6 ${v.color}`})})]}),e.jsxs("div",{className:"mt-4 flex items-center",children:[e.jsxs("span",{className:`text-sm font-medium ${v.trend==="up"?"text-green-600":v.trend==="down"?"text-red-600":"text-gray-600"}`,children:[v.trend==="up"?"":v.trend==="down"?"":""," ",Math.abs(v.change),"%"]}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400 ml-2",children:"vs last period"})]})]},v.id)})}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:j.map(v=>{const N=v.icon;return e.jsxs("button",{onClick:()=>f(v.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${p===v.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{children:v.label})]},v.id)})})}),e.jsxs("div",{className:"p-6",children:[p==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Business Overview"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Revenue Trends"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Monthly Revenue"}),e.jsx("span",{className:"font-semibold text-green-600",children:"2.5M"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Growth Rate"}),e.jsx("span",{className:"font-semibold text-green-600",children:"+12.5%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Target Achievement"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"95%"})]})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Customer Metrics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"New Customers"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"1,250"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Retention Rate"}),e.jsx("span",{className:"font-semibold text-green-600",children:"78.5%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Churn Rate"}),e.jsx("span",{className:"font-semibold text-red-600",children:"5.2%"})]})]})]})]})]}),p==="insights"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Actionable Insights"}),e.jsx("div",{className:"space-y-4",children:r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ds,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No insights available"})]}):r.map(v=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:v.title}),e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${h(v.impact)}`,children:[v.impact," impact"]}),e.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200",children:["Priority ",v.priority]})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-3",children:v.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Category: ",e.jsx("span",{className:"font-semibold",children:v.category})]}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:["Estimated Value: ",e.jsxs("span",{className:"font-semibold text-green-600",children:["",(v.estimatedValue/1e5).toFixed(1),"L"]})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"h-4 w-4 text-slate-400"}),e.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Recommended Action: ",v.action]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Implement"}),e.jsx("button",{className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-sm",children:"Learn More"})]})]})]},v.id))})]}),p==="performance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Performance Analysis"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Metric"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Current"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Previous"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Benchmark"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:n.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-12 text-center",children:[e.jsx(zt,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No performance data available"})]})}):n.map((v,N)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:v.metric}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:v.metric.includes("Cost")||v.metric.includes("Value")?`${v.current}`:`${v.current}%`}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:v.metric.includes("Cost")||v.metric.includes("Value")?`${v.previous}`:`${v.previous}%`}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:v.metric.includes("Cost")||v.metric.includes("Value")?`${v.benchmark}`:`${v.benchmark}%`}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${m(v.status)}`,children:v.status})})]},N))})]})})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Actionable Analytics Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Focus on Actionable Metrics"}),e.jsx("p",{className:"text-sm opacity-90",children:"Track metrics that directly impact business decisions and can be acted upon."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Set Clear Benchmarks"}),e.jsx("p",{className:"text-sm opacity-90",children:"Compare performance against industry standards and historical data."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Regular Review Cycles"}),e.jsx("p",{className:"text-sm opacity-90",children:"Schedule regular reviews to identify trends and take corrective actions."})]})]})]})]})}function P9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState("features");b.useEffect(()=>{l()},[]);const l=async()=>{try{const p=(()=>{if(typeof window<"u"){const x=window.location.hostname;if(x==="thenefol.com"||x==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),[f,g]=await Promise.all([fetch(`${p}/api/ai/features`),fetch(`${p}/api/ai/tasks`)]);if(f.ok){const x=await f.json();s(x)}if(g.ok){const x=await g.json();a(x)}}catch(u){console.error("Failed to load AI data:",u)}},o=u=>{switch(u){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"inactive":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";case"learning":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"running":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"completed":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"failed":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";case"pending":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},c=u=>{switch(u){case"high":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-200";case"medium":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},d=[{id:"features",label:"AI Features",icon:Ef},{id:"tasks",label:"AI Tasks",icon:Vl},{id:"insights",label:"AI Insights",icon:o2}];return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"AI Box"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Intelligent automation and AI-powered features for your store"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{className:"btn-secondary flex items-center space-x-2",children:[e.jsx(ws,{className:"h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(El,{className:"h-4 w-4"}),e.jsx("span",{children:"Enable AI"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active AI Features"}),e.jsx("p",{className:"text-3xl font-bold",children:t.filter(u=>u.status==="active").length})]}),e.jsx(Ef,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"AI Accuracy"}),e.jsxs("p",{className:"text-3xl font-bold",children:[t.length>0?(t.reduce((u,p)=>{var f;return u+(((f=p.metrics)==null?void 0:f.accuracy)||0)},0)/t.length).toFixed(1):"0.0","%"]})]}),e.jsx(ds,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Tasks Completed"}),e.jsx("p",{className:"text-3xl font-bold",children:r.filter(u=>u.status==="completed").length})]}),e.jsx(Vl,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Performance Boost"}),e.jsxs("p",{className:"text-3xl font-bold",children:["+",t.length>0?(t.reduce((u,p)=>{var f;return u+(((f=p.metrics)==null?void 0:f.improvement)||0)},0)/t.length).toFixed(1):"0.0","%"]})]}),e.jsx(zt,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:d.map(u=>{const p=u.icon;return e.jsxs("button",{onClick:()=>i(u.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${n===u.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx("span",{children:u.label})]},u.id)})})}),e.jsxs("div",{className:"p-6",children:[n==="features"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"AI Features"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(u=>{var p,f,g;return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:u.name}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${o(u.status)}`,children:u.status}),e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${c(u.impact)}`,children:[u.impact," impact"]})]})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:u.description}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Accuracy"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[((p=u.metrics)==null?void 0:p.accuracy)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Usage"}),e.jsxs("span",{className:"font-semibold text-blue-600",children:[((f=u.metrics)==null?void 0:f.usage)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Improvement"}),e.jsxs("span",{className:"font-semibold text-purple-600",children:["+",((g=u.metrics)==null?void 0:g.improvement)||0,"%"]})]})]}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsx("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Configure"}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:u.status==="active"?e.jsx(Sn,{className:"h-4 w-4"}):e.jsx(Ua,{className:"h-4 w-4"})})]})]},u.id)})})]}),n==="tasks"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"AI Tasks"}),e.jsx("div",{className:"space-y-4",children:r.map(u=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:u.name}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:u.description})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${o(u.status)}`,children:u.status})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Progress"}),e.jsxs("span",{className:"font-semibold",children:[u.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${u.progress}%`}})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Estimated Time"}),e.jsx("span",{className:"font-semibold",children:u.estimatedTime})]})]}),u.results&&e.jsxs("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900 rounded-lg",children:[e.jsx("h5",{className:"font-semibold text-green-800 dark:text-green-200 mb-2",children:"Results"}),e.jsx("div",{className:"space-y-1 text-sm",children:Object.entries(u.results).map(([p,f])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-green-700 dark:text-green-300",children:[p.replace(/([A-Z])/g," $1").replace(/^./,g=>g.toUpperCase()),":"]}),e.jsx("span",{className:"font-semibold text-green-800 dark:text-green-200",children:typeof f=="number"?p.includes("Increase")?`+${f}%`:f.toLocaleString():String(f)})]},p))})]})]},u.id))})]}),n==="insights"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"AI Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Performance Insights"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"AI Efficiency"}),e.jsx("span",{className:"font-semibold text-green-600",children:"94.2%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cost Reduction"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"23.5%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Time Saved"}),e.jsx("span",{className:"font-semibold text-purple-600",children:"45 hours/week"})]})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Recommendations"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Enable dynamic pricing for skincare products to increase revenue by 15%"})}),e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-800 dark:text-green-200",children:"Implement AI chatbot for customer support to reduce response time"})}),e.jsx("div",{className:"p-3 bg-purple-50 dark:bg-purple-900 rounded-lg",children:e.jsx("p",{className:"text-sm text-purple-800 dark:text-purple-200",children:"Use AI for inventory prediction to reduce stockouts by 30%"})})]})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"AI Box Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Start Small"}),e.jsx("p",{className:"text-sm opacity-90",children:"Begin with simple AI features and gradually expand to more complex automation."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Monitor Performance"}),e.jsx("p",{className:"text-sm opacity-90",children:"Regularly track AI accuracy and performance to ensure optimal results."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Continuous Learning"}),e.jsx("p",{className:"text-sm opacity-90",children:"Allow AI systems to learn from new data and improve over time."})]})]})]})]})}function D9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState("");b.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0),o("");const N=await et.getJourneyFunnels().catch(()=>[]);s([]),a([])}catch(N){console.error("Failed to load funnel data:",N),o("Failed to load funnel data")}finally{i(!1)}},[d,u]=b.useState("30d"),[p,f]=b.useState("overview"),g=t.length>0?t[0].visitors:0,x=t.length>0?t[t.length-1].conversions:0,h=g>0?x/g*100:0,m=N=>{switch(N){case"up":return"";case"down":return"";case"stable":return"";default:return""}},j=N=>{switch(N){case"up":return"text-green-600";case"down":return"text-red-600";case"stable":return"text-gray-600";default:return"text-gray-600"}},v=[{id:"overview",label:"Funnel Overview",icon:Ss},{id:"analysis",label:"Stage Analysis",icon:ds},{id:"optimization",label:"Optimization",icon:zt}];return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Customer Journey Funnel"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Track customer progression through each stage of the journey"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("select",{value:d,onChange:N=>u(N.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]}),e.jsxs("button",{className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(wa,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Visitors"}),e.jsx("p",{className:"text-3xl font-bold",children:g.toLocaleString()})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Conversions"}),e.jsx("p",{className:"text-3xl font-bold",children:x.toLocaleString()})]}),e.jsx(ds,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Overall Conversion"}),e.jsxs("p",{className:"text-3xl font-bold",children:[h.toFixed(1),"%"]})]}),e.jsx(zt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Drop-off Rate"}),e.jsxs("p",{className:"text-3xl font-bold",children:[(100-h).toFixed(1),"%"]})]}),e.jsx(Hu,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:v.map(N=>{const S=N.icon;return e.jsxs("button",{onClick:()=>f(N.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${p===N.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(S,{className:"h-4 w-4"}),e.jsx("span",{children:N.label})]},N.id)})})}),e.jsxs("div",{className:"p-6",children:[p==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Customer Journey Funnel"}),e.jsx("div",{className:"space-y-4",children:t.map((N,S)=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex items-center space-x-4 w-full",children:[e.jsx("div",{className:`w-12 h-12 ${N.color} rounded-full flex items-center justify-center text-white font-bold`,children:S+1}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:N.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:[N.visitors.toLocaleString()," visitors"]}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:[N.conversions.toLocaleString()," conversions"]}),e.jsxs("span",{className:"font-semibold text-green-600",children:[N.conversionRate,"% conversion"]})]})]}),e.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:e.jsx("div",{className:`${N.color} h-3 rounded-full transition-all duration-300`,style:{width:`${N.conversionRate}%`}})})]})]})}),S<t.length-1&&e.jsx("div",{className:"flex justify-center my-4",children:e.jsx("div",{className:"w-0.5 h-8 bg-slate-300 dark:bg-slate-600 relative",children:e.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-l-slate-300 dark:border-l-slate-600 border-t-2 border-t-transparent border-b-2 border-b-transparent"})})})]},N.id))})]}),p==="analysis"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Stage Analysis"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Stage"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Visitors"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Conversions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Conversion Rate"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Trend"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:r.map((N,S)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:N.stage}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:N.visitors.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:N.conversions.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:e.jsxs("span",{className:"font-semibold text-green-600",children:[N.conversionRate,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("span",{className:`font-semibold ${j(N.trend)}`,children:[m(N.trend)," ",N.previousRate,"%"]})})]},S))})]})})]}),p==="optimization"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Optimization Recommendations"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border border-red-200 dark:border-red-700 rounded-lg p-6 bg-red-50 dark:bg-red-900",children:[e.jsx("h4",{className:"font-semibold text-red-900 dark:text-red-100 mb-3",children:"High Drop-off: Consideration Stage"}),e.jsx("p",{className:"text-red-700 dark:text-red-300 mb-4",children:"The consideration stage has a 50% drop-off rate. Customers are losing interest before making a purchase decision."}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm text-red-700 dark:text-red-300",children:"Add product comparison tools"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ui,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm text-red-700 dark:text-red-300",children:"Implement wishlist functionality"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xs,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm text-red-700 dark:text-red-300",children:"Add urgency indicators (limited stock)"})]})]})]}),e.jsxs("div",{className:"border border-yellow-200 dark:border-yellow-700 rounded-lg p-6 bg-yellow-50 dark:bg-yellow-900",children:[e.jsx("h4",{className:"font-semibold text-yellow-900 dark:text-yellow-100 mb-3",children:"Medium Drop-off: Interest Stage"}),e.jsx("p",{className:"text-yellow-700 dark:text-yellow-300 mb-4",children:"The interest stage shows 20% drop-off. Improve engagement with better content and personalization."}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ds,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Personalize product recommendations"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(cs,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Send follow-up emails with reviews"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ss,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Add social proof and testimonials"})]})]})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Journey Funnel Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Identify Bottlenecks"}),e.jsx("p",{className:"text-sm opacity-90",children:"Focus on stages with the highest drop-off rates to maximize impact."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"A/B Test Changes"}),e.jsx("p",{className:"text-sm opacity-90",children:"Test different approaches to optimize each stage of the funnel."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Monitor Continuously"}),e.jsx("p",{className:"text-sm opacity-90",children:"Track funnel performance regularly to identify new opportunities."})]})]})]})]})}function R9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(!0),[l,o]=b.useState("");b.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0),o("");const x=await et.getPersonalizationRules().catch(()=>[]);s(Array.isArray(x)?x:[])}catch(x){console.error("Failed to load personalization data:",x),o("Failed to load personalization data")}finally{i(!1)}},[d,u]=b.useState("rules"),p=x=>{switch(x){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"inactive":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";case"testing":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-200";case"paused":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"draft":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},f=x=>{switch(x){case"product_recommendation":return e.jsx(Xs,{className:"h-4 w-4"});case"content_personalization":return e.jsx(ot,{className:"h-4 w-4"});case"pricing":return e.jsx(ds,{className:"h-4 w-4"});case"email":return e.jsx(Hu,{className:"h-4 w-4"});default:return e.jsx(El,{className:"h-4 w-4"})}},g=[{id:"rules",label:"Personalization Rules",icon:ds},{id:"campaigns",label:"Campaigns",icon:Ss},{id:"insights",label:"Insights",icon:El}];return n?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading personalization data..."})]})})}):l?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:l})]}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"AI Personalization"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Deliver personalized experiences using AI-powered insights"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:c,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(El,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{className:"btn-secondary flex items-center space-x-2",children:[e.jsx(ws,{className:"h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{className:"btn-primary flex items-center space-x-2",children:[e.jsx(El,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Rule"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active Rules"}),e.jsx("p",{className:"text-3xl font-bold",children:t.filter(x=>x.status==="active").length})]}),e.jsx(ds,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Impressions"}),e.jsx("p",{className:"text-3xl font-bold",children:t.reduce((x,h)=>x+h.performance.impressions,0).toLocaleString()})]}),e.jsx(ot,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Conversions"}),e.jsx("p",{className:"text-3xl font-bold",children:t.reduce((x,h)=>x+h.performance.conversions,0).toLocaleString()})]}),e.jsx(Hu,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Revenue Generated"}),e.jsxs("p",{className:"text-3xl font-bold",children:["",(t.reduce((x,h)=>x+h.performance.revenue,0)/1e5).toFixed(1),"L"]})]}),e.jsx(Ss,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:g.map(x=>{const h=x.icon;return e.jsxs("button",{onClick:()=>u(x.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${d===x.id?"":"border-transparent"}`,style:d===x.id?{borderColor:"var(--arctic-blue-primary)",color:"var(--arctic-blue-primary-dark)"}:{color:"var(--text-muted)"},children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx("span",{children:x.label})]},x.id)})})}),e.jsxs("div",{className:"p-6",children:[d==="rules"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Personalization Rules"}),e.jsx("div",{className:"space-y-4",children:t.map(x=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:x.name}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:x.description})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${p(x.status)}`,children:x.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Target Audience"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:x.targetAudience})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Conditions"}),e.jsx("ul",{className:"text-sm text-slate-600 dark:text-slate-400",children:x.conditions.map((h,m)=>e.jsxs("li",{children:[" ",h]},m))})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Actions"}),e.jsx("ul",{className:"text-sm text-slate-600 dark:text-slate-400",children:x.actions.map((h,m)=>e.jsxs("li",{children:[" ",h]},m))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:x.performance.impressions.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Impressions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.performance.clicks.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Clicks"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:x.performance.conversions.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Conversions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["",(x.performance.revenue/1e5).toFixed(1),"L"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Edit Rule"}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:x.status==="active"?e.jsx(Sn,{className:"h-4 w-4"}):e.jsx(Ua,{className:"h-4 w-4"})}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(Tb,{className:"h-4 w-4"})})]})]},x.id))})]}),d==="campaigns"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Personalization Campaigns"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(x=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[f(x.type),e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:x.name})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${p(x.status)}`,children:x.status})]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:["Audience: ",x.audience]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Reach"}),e.jsx("span",{className:"font-semibold text-blue-600",children:x.performance.reach.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Engagement"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[x.performance.engagement,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Conversion"}),e.jsxs("span",{className:"font-semibold text-purple-600",children:[x.performance.conversion,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"}),e.jsxs("span",{className:"font-semibold text-orange-600",children:["",(x.performance.revenue/1e5).toFixed(1),"L"]})]})]}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsx("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"View Details"}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:x.status==="active"?e.jsx(Sn,{className:"h-4 w-4"}):e.jsx(Ua,{className:"h-4 w-4"})})]})]},x.id))})]}),d==="insights"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Personalization Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Top Performing Rules"}),e.jsx("div",{className:"space-y-3",children:t.sort((x,h)=>h.performance.revenue-x.performance.revenue).slice(0,3).map((x,h)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:h+1})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100",children:x.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[x.performance.conversions," conversions"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-green-600",children:["",(x.performance.revenue/1e5).toFixed(1),"L"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]})]},x.id))})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Personalization Impact"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Revenue Increase"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"+35.2%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Conversion Rate"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"+18.7%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Customer Engagement"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"+42.1%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Average Order Value"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"+25.8%"})]})]})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"AI Personalization Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Start with Clear Goals"}),e.jsx("p",{className:"text-sm opacity-90",children:"Define specific objectives for each personalization rule to measure success effectively."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Test and Iterate"}),e.jsx("p",{className:"text-sm opacity-90",children:"Continuously test different personalization approaches and optimize based on results."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Respect Privacy"}),e.jsx("p",{className:"text-sm opacity-90",children:"Ensure personalization respects customer privacy and complies with regulations."})]})]})]})]})}function L9(){const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(""),[l,o]=b.useState("audiences"),[c,d]=b.useState(!1),[u,p]=b.useState(null);b.useEffect(()=>{f()},[]);const f=async()=>{try{a(!0),i("");const v=await et.getCustomAudiences().catch(()=>[]);s(Array.isArray(v)?v:[])}catch(v){console.error("Failed to load audiences data:",v),i("Failed to load audiences data")}finally{a(!1)}},g={totalAudiences:t.length,totalSize:t.reduce((v,N)=>v+N.size,0),activeAudiences:t.filter(v=>v.status==="active").length,totalRevenue:t.reduce((v,N)=>v+N.performance.revenue,0)},x=v=>{switch(v){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"inactive":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";case"draft":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},h=v=>{switch(v){case"equals":return"equals";case"not_equals":return"does not equal";case"contains":return"contains";case"not_contains":return"does not contain";case"greater_than":return"is greater than";case"less_than":return"is less than";case"between":return"is between";case"in":return"is in";case"not_in":return"is not in";default:return v}},m=v=>{switch(v){case"category_preference":return"Category Preference";case"total_orders":return"Total Orders";case"total_spent":return"Total Spent";case"cart_status":return"Cart Status";case"cart_value":return"Cart Value";case"registration_date":return"Registration Date";case"last_order_date":return"Last Order Date";case"location":return"Location";case"age":return"Age";case"gender":return"Gender";default:return v}},j=[{id:"audiences",label:"Custom Audiences",icon:Pt},{id:"performance",label:"Performance",icon:Ss},{id:"insights",label:"Insights",icon:zt}];return r?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading audiences..."})]})})}):n?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-100 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:n})]}),e.jsx("button",{onClick:f,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Custom Audience Targeting"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Create and manage targeted customer audiences for personalized marketing"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:f,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(ds,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Audience"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Audiences"}),e.jsx("p",{className:"text-3xl font-bold",children:g.totalAudiences})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Size"}),e.jsx("p",{className:"text-3xl font-bold",children:g.totalSize.toLocaleString()})]}),e.jsx(ds,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active Audiences"}),e.jsx("p",{className:"text-3xl font-bold",children:g.activeAudiences})]}),e.jsx(zt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Revenue Generated"}),e.jsxs("p",{className:"text-3xl font-bold",children:["",(g.totalRevenue/1e5).toFixed(1),"L"]})]}),e.jsx(Ss,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:j.map(v=>{const N=v.icon;return e.jsxs("button",{onClick:()=>o(v.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${l===v.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{children:v.label})]},v.id)})})}),e.jsxs("div",{className:"p-6",children:[l==="audiences"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Custom Audiences"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(ll,{className:"h-4 w-4"})}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(wa,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(v=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:v.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${x(v.status)}`,children:v.status})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:v.description}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Size:"}),e.jsx("span",{className:"font-semibold",children:v.size.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Engagement:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[v.performance.engagement,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Conversion:"}),e.jsxs("span",{className:"font-semibold text-blue-600",children:[v.performance.conversion,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Revenue:"}),e.jsxs("span",{className:"font-semibold text-purple-600",children:["",(v.performance.revenue/1e3).toFixed(0),"K"]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:v.tags.map((N,S)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded",children:N},S))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>p(v),className:"flex-1 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"View"}),e.jsx("button",{className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx(mr,{className:"h-4 w-4"})}),e.jsx("button",{className:"px-3 py-1 border border-red-300 dark:border-red-600 text-red-700 dark:text-red-300 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},v.id))})]}),l==="performance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Audience Performance"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Audience"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Size"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Reach"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Engagement"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Conversion"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Revenue"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:t.map(v=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:v.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:v.size.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:v.performance.reach.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:e.jsxs("span",{className:"font-semibold text-green-600",children:[v.performance.engagement,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:e.jsxs("span",{className:"font-semibold text-blue-600",children:[v.performance.conversion,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:e.jsxs("span",{className:"font-semibold text-purple-600",children:["",(v.performance.revenue/1e3).toFixed(0),"K"]})})]},v.id))})]})})]}),l==="insights"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Audience Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Top Performing Audiences"}),e.jsx("div",{className:"space-y-3",children:t.sort((v,N)=>N.performance.revenue-v.performance.revenue).slice(0,3).map((v,N)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:N+1})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100",children:v.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[v.size.toLocaleString()," members"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-green-600",children:["",(v.performance.revenue/1e3).toFixed(0),"K"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]})]},v.id))})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Audience Analytics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Audiences"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:g.totalAudiences})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Active Audiences"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:g.activeAudiences})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Members"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:g.totalSize.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Revenue"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["",(g.totalRevenue/1e5).toFixed(1),"L"]})]})]})]})]})]})]})]}),u&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Audience Details: ",u.name]}),e.jsx("button",{onClick:()=>p(null),className:"text-2xl text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:""})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Description"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:u.description})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Audience Criteria"}),e.jsx("div",{className:"space-y-2",children:u.criteria.map((v,N)=>e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:m(v.field)}),e.jsx("span",{className:"mx-2 text-slate-600 dark:text-slate-400",children:h(v.operator)}),e.jsxs("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:[v.value,v.value2&&` and ${v.value2}`]})]},N))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Performance Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u.performance.reach.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Reach"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[u.performance.engagement,"%"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Engagement"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[u.performance.conversion,"%"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Conversion"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["",(u.performance.revenue/1e3).toFixed(0),"K"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]})]})]})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Custom Audience Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Define Clear Criteria"}),e.jsx("p",{className:"text-sm opacity-90",children:"Use specific, measurable criteria to create meaningful audience segments."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Test and Optimize"}),e.jsx("p",{className:"text-sm opacity-90",children:"Continuously test audience performance and optimize targeting criteria."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Personalize Content"}),e.jsx("p",{className:"text-sm opacity-90",children:"Create personalized content and offers for each audience segment."})]})]})]})]})}function O9(){const[t]=b.useState([{id:"1",name:"Website",type:"website",status:"active",metrics:{reach:5e4,engagement:12.5,conversion:3.2,revenue:8e5},icon:n4,color:"bg-blue-500"},{id:"2",name:"Mobile App",type:"mobile",status:"active",metrics:{reach:25e3,engagement:18.3,conversion:5.7,revenue:45e4},icon:mm,color:"bg-green-500"},{id:"3",name:"Email Marketing",type:"email",status:"active",metrics:{reach:3e4,engagement:15.2,conversion:4.8,revenue:35e4},icon:ss,color:"bg-purple-500"},{id:"4",name:"SMS Marketing",type:"sms",status:"active",metrics:{reach:15e3,engagement:22.1,conversion:8.3,revenue:2e5},icon:fs,color:"bg-orange-500"},{id:"5",name:"Push Notifications",type:"push",status:"active",metrics:{reach:2e4,engagement:16.7,conversion:6.2,revenue:28e4},icon:Ra,color:"bg-pink-500"},{id:"6",name:"Live Chat",type:"chat",status:"active",metrics:{reach:8e3,engagement:45.2,conversion:12.8,revenue:15e4},icon:fs,color:"bg-cyan-500"}]),[s]=b.useState([{id:"1",name:"Holiday Sale Campaign",description:"Multi-channel holiday promotion across all touchpoints",channels:["website","mobile","email","sms","push"],status:"active",startDate:"2024-01-15",endDate:"2024-01-31",budget:1e5,performance:{impressions:15e4,clicks:25e3,conversions:3500,revenue:12e5}},{id:"2",name:"New Product Launch",description:"Launch campaign for new skincare line",channels:["website","email","push","chat"],status:"active",startDate:"2024-01-20",endDate:"2024-02-05",budget:75e3,performance:{impressions:8e4,clicks:12e3,conversions:1800,revenue:65e4}},{id:"3",name:"Customer Retention",description:"Retention campaign for at-risk customers",channels:["email","sms","push"],status:"paused",startDate:"2024-01-10",endDate:"2024-01-25",budget:5e4,performance:{impressions:4e4,clicks:6e3,conversions:900,revenue:3e5}}]),[r,a]=b.useState("overview"),n={totalChannels:t.length,activeChannels:t.filter(o=>o.status==="active").length,totalReach:t.reduce((o,c)=>o+c.metrics.reach,0),totalRevenue:t.reduce((o,c)=>o+c.metrics.revenue,0)},i=o=>{switch(o){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"inactive":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";case"maintenance":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"paused":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";case"draft":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},l=[{id:"overview",label:"Channel Overview",icon:Jn},{id:"campaigns",label:"Campaigns",icon:Ss},{id:"analytics",label:"Analytics",icon:zt}];return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Omni Channel Marketing"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Manage and optimize customer interactions across all channels"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(ws,{className:"h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(Jn,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Campaign"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Channels"}),e.jsx("p",{className:"text-3xl font-bold",children:n.totalChannels})]}),e.jsx(Jn,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active Channels"}),e.jsx("p",{className:"text-3xl font-bold",children:n.activeChannels})]}),e.jsx(Pt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Reach"}),e.jsxs("p",{className:"text-3xl font-bold",children:[(n.totalReach/1e3).toFixed(0),"K"]})]}),e.jsx(zt,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Revenue"}),e.jsxs("p",{className:"text-3xl font-bold",children:["",(n.totalRevenue/1e5).toFixed(1),"L"]})]}),e.jsx(Ss,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:l.map(o=>{const c=o.icon;return e.jsxs("button",{onClick:()=>a(o.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${r===o.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(c,{className:"h-4 w-4"}),e.jsx("span",{children:o.label})]},o.id)})})}),e.jsxs("div",{className:"p-6",children:[r==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Channel Performance"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(o=>{const c=o.icon;return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 ${o.color} rounded-full flex items-center justify-center`,children:e.jsx(c,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:o.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:o.type})]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${i(o.status)}`,children:o.status})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Reach"}),e.jsx("span",{className:"font-semibold text-blue-600",children:o.metrics.reach.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Engagement"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[o.metrics.engagement,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Conversion"}),e.jsxs("span",{className:"font-semibold text-purple-600",children:[o.metrics.conversion,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"}),e.jsxs("span",{className:"font-semibold text-orange-600",children:["",(o.metrics.revenue/1e3).toFixed(0),"K"]})]})]}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsx("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Configure"}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:o.status==="active"?e.jsx(Sn,{className:"h-4 w-4"}):e.jsx(Ua,{className:"h-4 w-4"})})]})]},o.id)})})]}),r==="campaigns"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Omni Channel Campaigns"}),e.jsx("div",{className:"space-y-4",children:s.map(o=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:o.name}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:o.description})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${i(o.status)}`,children:o.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Channels"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:o.channels.map((c,d)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded",children:c},d))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Campaign Period"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[new Date(o.startDate).toLocaleDateString()," - ",new Date(o.endDate).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Budget: ",o.budget.toLocaleString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o.performance.impressions.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Impressions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:o.performance.clicks.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Clicks"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:o.performance.conversions.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Conversions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["",(o.performance.revenue/1e5).toFixed(1),"L"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revenue"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"View Details"}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:o.status==="active"?e.jsx(Sn,{className:"h-4 w-4"}):e.jsx(Ua,{className:"h-4 w-4"})}),e.jsx("button",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Edit"})]})]},o.id))})]}),r==="analytics"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Omni Channel Analytics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Channel Performance Comparison"}),e.jsx("div",{className:"space-y-3",children:t.sort((o,c)=>c.metrics.conversion-o.metrics.conversion).slice(0,3).map((o,c)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:c+1})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-slate-900 dark:text-slate-100",children:o.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[o.metrics.reach.toLocaleString()," reach"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-green-600",children:[o.metrics.conversion,"%"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Conversion"})]})]},o.id))})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Cross-Channel Insights"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cross-Channel Engagement"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"+28.5%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Customer Journey Length"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"4.2 touchpoints"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Channel Synergy"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"High"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Attribution Accuracy"}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"92.3%"})]})]})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Omni Channel Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Consistent Experience"}),e.jsx("p",{className:"text-sm opacity-90",children:"Ensure consistent messaging and branding across all customer touchpoints."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Data Integration"}),e.jsx("p",{className:"text-sm opacity-90",children:"Integrate data from all channels to get a complete customer view."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Channel Optimization"}),e.jsx("p",{className:"text-sm opacity-90",children:"Continuously optimize each channel while maintaining cross-channel synergy."})]})]})]})]})}const z0={payment:ni,email:ss,sms:fs,push:Ra,analytics:Jn,social:mm,shipping:Xs,database:C2,ai:Eb,other:ws},W0={payment:"bg-green-500",email:"bg-blue-500",sms:"bg-purple-500",push:"bg-orange-500",analytics:"bg-indigo-500",social:"bg-pink-500",shipping:"bg-yellow-500",database:"bg-cyan-500",ai:"bg-emerald-500",other:"bg-gray-500"};function I9(){const{notify:t}=hr(),[s,r]=b.useState([]),[a,n]=b.useState(!0),[i,l]=b.useState(null),[o,c]=b.useState("overview"),[d,u]=b.useState(null),[p,f]=b.useState({}),[g,x]=b.useState(null),[h,m]=b.useState(null),[j,v]=b.useState(!1),[N,S]=b.useState({name:"",description:"",category:"other",status:"inactive",fields:[]});b.useEffect(()=>{A()},[]);const A=async()=>{try{n(!0);const F=await et.getAPIConfigurations(),te=(Array.isArray(F)?F:(F==null?void 0:F.data)||[]).map(I=>({...I,fields:I.fields||[],lastUpdated:I.lastUpdated||I.updated_at||I.created_at||new Date().toISOString()}));r(te)}catch(F){console.error("Failed to load API configurations:",F),t("error",F.message||"Failed to load API configurations")}finally{n(!1)}},T=async F=>{try{l(F.id);const V={id:F.id,name:F.name,description:F.description,category:F.category,status:F.status,fields:F.fields};if(F.id&&F.id!=="new")await et.updateAPIConfiguration(F.id,V),t("success",`${F.name} updated successfully`);else{const te=await et.createAPIConfiguration(V);t("success",`${F.name} created successfully`),te.data&&(m(null),v(!1))}await A()}catch(V){console.error("Failed to save configuration:",V),t("error",V.message||"Failed to save configuration")}finally{l(null)}},k=async F=>{if(confirm("Are you sure you want to delete this API configuration?"))try{await et.deleteAPIConfiguration(F),t("success","API configuration deleted successfully"),await A(),(d==null?void 0:d.id)===F&&u(null),(h==null?void 0:h.id)===F&&m(null)}catch(V){console.error("Failed to delete configuration:",V),t("error",V.message||"Failed to delete configuration")}},_=(F,V,te)=>{r(I=>I.map(U=>U.id===F?{...U,fields:U.fields.map(z=>z.id===V?{...z,value:te}:z)}:U)),(h==null?void 0:h.id)===F&&m(I=>I?{...I,fields:I.fields.map(U=>U.id===V?{...U,value:te}:U)}:null)},y=(F,V)=>{h&&m({...h,[F]:V})},w=()=>{S(F=>({...F,fields:[...F.fields||[],{id:`field_${Date.now()}`,name:"",label:"",type:"text",value:"",required:!1,sensitive:!1}]}))},R=(F,V)=>{S(te=>({...te,fields:(te.fields||[]).map(I=>I.id===F?{...I,...V}:I)}))},P=F=>{S(V=>({...V,fields:(V.fields||[]).filter(te=>te.id!==F)}))},H=async()=>{if(!N.name||!N.category){t("error","Name and category are required");return}try{l("new");const F={name:N.name,description:N.description||"",category:N.category,status:N.status||"inactive",fields:N.fields||[]};await et.createAPIConfiguration(F),t("success",`${N.name} created successfully`),v(!1),S({name:"",description:"",category:"other",status:"inactive",fields:[]}),await A()}catch(F){console.error("Failed to create configuration:",F),t("error",F.message||"Failed to create configuration")}finally{l(null)}},L=async(F,V="connection")=>{try{const te=await et.testAPIConfiguration(F,V);t("success",te.message||"API test completed successfully")}catch(te){t("error",te.message||"API test failed")}},O=F=>{switch(F){case"active":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-200";case"inactive":return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200";case"testing":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-200";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900 dark:text-gray-200"}},W=F=>{f(V=>({...V,[F]:!V[F]}))},Q=async(F,V)=>{try{await navigator.clipboard.writeText(F),x(V),setTimeout(()=>x(null),2e3)}catch(te){console.error("Failed to copy:",te)}},D=[{id:"overview",label:"API Overview",icon:ws},{id:"configs",label:"Configurations",icon:Vu},{id:"test",label:"Test APIs",icon:Af}];return a?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading API configurations..."})]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"API & Code Manager"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Manage all your API keys, codes, and integration settings"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Service"})]}),e.jsxs("button",{className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center space-x-2",children:[e.jsx(A2,{className:"h-4 w-4"}),e.jsx("span",{children:"Export Config"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total APIs"}),e.jsx("p",{className:"text-3xl font-bold",children:s.length})]}),e.jsx(ws,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active APIs"}),e.jsx("p",{className:"text-3xl font-bold",children:s.filter(F=>F.status==="active").length})]}),e.jsx(Vu,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Testing APIs"}),e.jsx("p",{className:"text-3xl font-bold",children:s.filter(F=>F.status==="testing").length})]}),e.jsx(Af,{className:"h-8 w-8"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Sensitive Keys"}),e.jsx("p",{className:"text-3xl font-bold",children:s.reduce((F,V)=>F+V.fields.filter(te=>te.sensitive).length,0)})]}),e.jsx(Eb,{className:"h-8 w-8"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:D.map(F=>{const V=F.icon;return e.jsxs("button",{onClick:()=>c(F.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${o===F.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx("span",{children:F.label})]},F.id)})})}),e.jsxs("div",{className:"p-6",children:[o==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"API Configurations Overview"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(F=>{const V=z0[F.category]||ws,te=W0[F.category]||"bg-gray-500";return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 ${te} rounded-full flex items-center justify-center`,children:e.jsx(V,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:F.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:F.category})]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${O(F.status)}`,children:F.status})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:F.description}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Fields:"}),e.jsx("span",{className:"font-semibold",children:F.fields.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Sensitive:"}),e.jsx("span",{className:"font-semibold text-red-600",children:F.fields.filter(I=>I.sensitive).length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Last Updated:"}),e.jsx("span",{className:"font-semibold",children:new Date(F.lastUpdated).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{m(F),u(F)},className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Configure"}),e.jsx("button",{onClick:()=>L(F.id),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-sm rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Test"}),e.jsx("button",{onClick:()=>k(F.id),className:"px-3 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900 text-sm rounded transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},F.id)})})]}),o==="configs"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"API Configuration Management"})}),e.jsx("div",{className:"space-y-6",children:s.map(F=>{const V=z0[F.category]||ws,te=W0[F.category]||"bg-gray-500",I=(h==null?void 0:h.id)===F.id,U=I?h:F;return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:`w-8 h-8 ${te} rounded-full flex items-center justify-center`,children:e.jsx(V,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex-1",children:[I?e.jsx("input",{type:"text",value:(U==null?void 0:U.name)||"",onChange:z=>y("name",z.target.value),className:"text-lg font-semibold bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded px-2 py-1 w-full"}):e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:F.name}),I?e.jsx("input",{type:"text",value:(U==null?void 0:U.description)||"",onChange:z=>y("description",z.target.value),placeholder:"Description",className:"text-sm bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded px-2 py-1 w-full mt-1"}):e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:F.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[I?e.jsxs("select",{value:(U==null?void 0:U.status)||"inactive",onChange:z=>y("status",z.target.value),className:"px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-xs",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"testing",children:"Testing"})]}):e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${O(F.status)}`,children:F.status}),I?e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>{U&&T(U)},disabled:i===F.id,className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700 transition-colors disabled:opacity-50",children:i===F.id?"Saving...":"Save"}),e.jsx("button",{onClick:()=>{m(null),A()},className:"px-3 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 text-xs rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"})]}):e.jsxs("button",{onClick:()=>m({...F}),className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors flex items-center space-x-1",children:[e.jsx(qu,{className:"h-3 w-3"}),e.jsx("span",{children:"Edit"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:((U==null?void 0:U.fields)||[]).map(z=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:[z.label,z.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:z.sensitive&&!p[z.id]||z.type==="password"?"password":"text",value:z.value,onChange:Y=>{I&&U&&_(U.id,z.id,Y.target.value)},disabled:!I,placeholder:z.placeholder,className:`w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 pr-20 ${I?"":"cursor-not-allowed opacity-60"}`}),e.jsxs("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex space-x-1",children:[z.sensitive&&e.jsx("button",{onClick:()=>W(z.id),className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:p[z.id]?e.jsx(Wu,{className:"h-4 w-4"}):e.jsx(ot,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Q(z.value,z.id),className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:g===z.id?e.jsx(md,{className:"h-4 w-4 text-green-600"}):e.jsx(Zi,{className:"h-4 w-4"})})]})]}),z.description&&e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:z.description})]},z.id))})]},F.id)})})]}),o==="test"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"API Testing & Validation"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map(F=>{const V=z0[F.category]||ws,te=W0[F.category]||"bg-gray-500";return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:`w-8 h-8 ${te} rounded-full flex items-center justify-center`,children:e.jsx(V,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:F.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Test API connectivity and authentication"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Connection Test"}),e.jsx("button",{onClick:()=>L(F.id,"connection"),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Test"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Authentication"}),e.jsx("button",{onClick:()=>L(F.id,"authentication"),className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors",children:"Validate"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Rate Limits"}),e.jsx("button",{onClick:()=>L(F.id,"rate_limits"),className:"px-3 py-1 bg-purple-600 text-white text-sm rounded hover:bg-purple-700 transition-colors",children:"Check"})]})]})]},F.id)})})]})]})]}),j&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Add New API Service"}),e.jsx("button",{onClick:()=>{v(!1),S({name:"",description:"",category:"other",status:"inactive",fields:[]})},className:"text-2xl text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:e.jsx(Zt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Service Name *"}),e.jsx("input",{type:"text",value:N.name||"",onChange:F=>S({...N,name:F.target.value}),placeholder:"e.g., Payment Gateway",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category *"}),e.jsxs("select",{value:N.category||"other",onChange:F=>S({...N,category:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",children:[e.jsx("option",{value:"payment",children:"Payment"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"sms",children:"SMS"}),e.jsx("option",{value:"push",children:"Push Notifications"}),e.jsx("option",{value:"analytics",children:"Analytics"}),e.jsx("option",{value:"social",children:"Social Media"}),e.jsx("option",{value:"shipping",children:"Shipping"}),e.jsx("option",{value:"database",children:"Database"}),e.jsx("option",{value:"ai",children:"AI Services"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{value:N.description||"",onChange:F=>S({...N,description:F.target.value}),placeholder:"Describe what this API service does",rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Status"}),e.jsxs("select",{value:N.status||"inactive",onChange:F=>S({...N,status:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"testing",children:"Testing"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"API Fields"}),e.jsxs("button",{onClick:w,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors flex items-center space-x-1",children:[e.jsx(rs,{className:"h-3 w-3"}),e.jsx("span",{children:"Add Field"})]})]}),e.jsx("div",{className:"space-y-3",children:(N.fields||[]).map((F,V)=>e.jsxs("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:F.name,onChange:te=>R(F.id,{name:te.target.value}),placeholder:"Field name (e.g., api_key)",className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700"}),e.jsx("input",{type:"text",value:F.label,onChange:te=>R(F.id,{label:te.target.value}),placeholder:"Field label (e.g., API Key)",className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("select",{value:F.type,onChange:te=>R(F.id,{type:te.target.value}),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700",children:[e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"password",children:"Password"}),e.jsx("option",{value:"url",children:"URL"}),e.jsx("option",{value:"number",children:"Number"}),e.jsx("option",{value:"textarea",children:"Textarea"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:F.required,onChange:te=>R(F.id,{required:te.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Required"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:F.sensitive,onChange:te=>R(F.id,{sensitive:te.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Sensitive"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:F.placeholder||"",onChange:te=>R(F.id,{placeholder:te.target.value}),placeholder:"Placeholder text",className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700"}),e.jsx("button",{onClick:()=>P(F.id),className:"px-3 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900 rounded transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},F.id))})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:H,disabled:i==="new",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:i==="new"?"Creating...":"Create Service"}),e.jsx("button",{onClick:()=>{v(!1),S({name:"",description:"",category:"other",status:"inactive",fields:[]})},className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancel"})]})]})]})}),d&&!j&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Configure: ",d.name]}),e.jsx("button",{onClick:()=>u(null),className:"text-2xl text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:e.jsx(Zt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4",children:e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:d.description})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.fields.map(F=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:[F.label,F.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:F.sensitive&&!p[F.id]||F.type==="password"?"password":"text",value:F.value,placeholder:F.placeholder,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 pr-20",readOnly:!0}),e.jsxs("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex space-x-1",children:[F.sensitive&&e.jsx("button",{onClick:()=>W(F.id),className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:p[F.id]?e.jsx(Wu,{className:"h-4 w-4"}):e.jsx(ot,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Q(F.value,F.id),className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:g===F.id?e.jsx(md,{className:"h-4 w-4 text-green-600"}):e.jsx(Zi,{className:"h-4 w-4"})})]})]}),F.description&&e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:F.description})]},F.id))}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{m(d),u(null)},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Edit Configuration"}),e.jsx("button",{onClick:()=>L(d.id),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Test API"})]})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"API Management Best Practices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"1"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Secure Storage"}),e.jsx("p",{className:"text-sm opacity-90",children:"Store sensitive API keys securely and never expose them in client-side code."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"2"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Regular Rotation"}),e.jsx("p",{className:"text-sm opacity-90",children:"Regularly rotate API keys and monitor usage to maintain security."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl font-bold",children:"3"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Test & Monitor"}),e.jsx("p",{className:"text-sm opacity-90",children:"Continuously test API connections and monitor performance metrics."})]})]})]})]})}const V0=[{value:"razorpay",label:"Razorpay",icon:"",color:"bg-blue-500"},{value:"phonepe",label:"PhonePe",icon:"",color:"bg-purple-500"},{value:"googlepay",label:"Google Pay",icon:"",color:"bg-blue-600"},{value:"paytm",label:"Paytm",icon:"",color:"bg-yellow-500"},{value:"navi",label:"Navi",icon:"",color:"bg-indigo-500"},{value:"bhim",label:"BHIM",icon:"",color:"bg-orange-500"},{value:"stripe",label:"Stripe",icon:"",color:"bg-purple-600"},{value:"paypal",label:"PayPal",icon:"",color:"bg-blue-700"}];function M9(){const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(!1),[l,o]=b.useState(null),[c,d]=b.useState({name:"",type:"razorpay",api_key:"",secret_key:"",webhook_url:"",merchant_id:"",processing_fee_percentage:0,processing_fee_fixed:0,min_amount:0,max_amount:999999,supported_methods:[],is_active:!0});b.useEffect(()=>{u()},[]);const u=async()=>{try{a(!0);const m=await et.getPaymentGateways();s(m)}catch(m){console.error("Failed to fetch payment gateways:",m)}finally{a(!1)}},p=async m=>{m.preventDefault();try{l?await et.updatePaymentGateway(l.id,c):await et.createPaymentGateway(c),i(!1),o(null),d({name:"",type:"razorpay",api_key:"",secret_key:"",webhook_url:"",merchant_id:"",processing_fee_percentage:0,processing_fee_fixed:0,min_amount:0,max_amount:999999,supported_methods:[],is_active:!0}),u()}catch(j){console.error("Failed to save payment gateway:",j)}},f=m=>{o(m),d({name:m.name,type:m.type,api_key:m.api_key,secret_key:m.secret_key,webhook_url:m.webhook_url,merchant_id:m.merchant_id||"",processing_fee_percentage:m.processing_fee_percentage,processing_fee_fixed:m.processing_fee_fixed,min_amount:m.min_amount,max_amount:m.max_amount,supported_methods:m.supported_methods||[],is_active:m.is_active}),i(!0)},g=async m=>{if(confirm("Are you sure you want to delete this payment gateway?"))try{await et.deletePaymentGateway(m),u()}catch(j){console.error("Failed to delete payment gateway:",j)}},x=async m=>{try{await et.updatePaymentGateway(m.id,{is_active:!m.is_active}),u()}catch(j){console.error("Failed to toggle gateway status:",j)}},h=m=>V0.find(j=>j.value===m)||V0[0];return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:"Payment Options"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Manage payment gateways and processing fees"})]}),e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 transition-colors",children:[e.jsx(rs,{className:"h-4 w-4"}),"Add Payment Gateway"]})]}),e.jsxs("div",{className:"mb-6 rounded-lg bg-blue-50 p-4 dark:bg-blue-900/20",children:[e.jsx("h3",{className:"mb-2 font-semibold text-blue-900 dark:text-blue-100",children:"Payment Rules"}),e.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[e.jsx("li",{children:" Orders below 1000: Prepaid and Postpaid options available"}),e.jsx("li",{children:" Orders above 1000: Prepaid only"}),e.jsx("li",{children:" All payment gateways support both prepaid and postpaid modes"})]})]}),r?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(m=>{var v;const j=h(m.type);return e.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${j.color} flex items-center justify-center text-white text-lg`,children:j.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:m.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:j.label})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:m.is_active?e.jsx(Vt,{className:"h-5 w-5 text-green-500"}):e.jsx(ts,{className:"h-5 w-5 text-red-500"})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Processing Fee:"}),e.jsxs("span",{className:"font-medium",children:[m.processing_fee_percentage,"% + ",m.processing_fee_fixed]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Amount Range:"}),e.jsxs("span",{className:"font-medium",children:["",m.min_amount," - ",m.max_amount]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Methods:"}),e.jsxs("span",{className:"font-medium",children:[((v=m.supported_methods)==null?void 0:v.length)||0," methods"]})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:()=>f(m),className:"flex-1 rounded-lg border border-slate-300 px-3 py-2 text-sm hover:bg-slate-50 dark:border-slate-600 dark:hover:bg-slate-700 transition-colors",children:e.jsx(mr,{className:"h-4 w-4 mx-auto"})}),e.jsx("button",{onClick:()=>x(m),className:`flex-1 rounded-lg px-3 py-2 text-sm transition-colors ${m.is_active?"bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900/20 dark:text-red-400":"bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/20 dark:text-green-400"}`,children:m.is_active?"Disable":"Enable"}),e.jsx("button",{onClick:()=>g(m.id),className:"rounded-lg border border-red-300 px-3 py-2 text-sm text-red-700 hover:bg-red-50 dark:border-red-600 dark:text-red-400 dark:hover:bg-red-900/20 transition-colors",children:e.jsx(Mt,{className:"h-4 w-4"})})]})]},m.id)})}),n&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"w-full max-w-2xl rounded-lg bg-white dark:bg-slate-800 p-6 m-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"mb-6 text-xl font-semibold text-slate-900 dark:text-slate-100",children:l?"Edit Payment Gateway":"Add Payment Gateway"}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Gateway Name"}),e.jsx("input",{type:"text",value:c.name,onChange:m=>d({...c,name:m.target.value}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Payment Type"}),e.jsx("select",{value:c.type,onChange:m=>d({...c,type:m.target.value}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",children:V0.map(m=>e.jsxs("option",{value:m.value,children:[m.icon," ",m.label]},m.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"API Key"}),e.jsx("input",{type:"text",value:c.api_key,onChange:m=>d({...c,api_key:m.target.value}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Secret Key"}),e.jsx("input",{type:"password",value:c.secret_key,onChange:m=>d({...c,secret_key:m.target.value}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Webhook URL"}),e.jsx("input",{type:"url",value:c.webhook_url,onChange:m=>d({...c,webhook_url:m.target.value}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Merchant ID (Optional)"}),e.jsx("input",{type:"text",value:c.merchant_id,onChange:m=>d({...c,merchant_id:m.target.value}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Processing Fee (%)"}),e.jsx("input",{type:"number",step:"0.01",value:c.processing_fee_percentage,onChange:m=>d({...c,processing_fee_percentage:parseFloat(m.target.value)}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fixed Fee ()"}),e.jsx("input",{type:"number",step:"0.01",value:c.processing_fee_fixed,onChange:m=>d({...c,processing_fee_fixed:parseFloat(m.target.value)}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Min Amount ()"}),e.jsx("input",{type:"number",value:c.min_amount,onChange:m=>d({...c,min_amount:parseFloat(m.target.value)}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Max Amount ()"}),e.jsx("input",{type:"number",value:c.max_amount,onChange:m=>d({...c,max_amount:parseFloat(m.target.value)}),className:"w-full rounded-lg border border-slate-300 px-3 py-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.is_active,onChange:m=>d({...c,is_active:m.target.checked}),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Active"})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 rounded-lg bg-blue-600 py-2 text-white hover:bg-blue-700 transition-colors",children:l?"Update Gateway":"Add Gateway"}),e.jsx("button",{type:"button",onClick:()=>{i(!1),o(null)},className:"flex-1 rounded-lg border border-slate-300 py-2 text-slate-700 hover:bg-slate-50 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-700 transition-colors",children:"Cancel"})]})]})]})})]})}const Gr=Pn(),B9=()=>{const[t,s]=b.useState([]),[r,a]=b.useState(!1),[n,i]=b.useState(null),[l,o]=b.useState(!1),[c,d]=b.useState(!1),[u,p]=b.useState(!1),[f,g]=b.useState(null),[x,h]=b.useState(!1),[m,j]=b.useState({autoAdvanceInterval:3e3,videoPlayDuration:3e3,animationDuration:700,animationEasing:"ease-in-out",autoPlay:!0,radius:500,blurAmount:12,minOpacity:.6,minScale:.85}),[v,N]=b.useState(!1),[S,A]=b.useState({title:"",description:"",video_url:"",redirect_url:"",price:"",size:"medium",thumbnail_url:"",is_active:!0,video_type:"local"}),[T,k]=b.useState(null),[_,y]=b.useState(null),w=async(U,z)=>{const Y=new FormData;Y.append("file",U),Y.append("type",z);const K=await fetch(`${Gr}/upload`,{method:"POST",body:Y});if(!K.ok)throw new Error("Upload failed");return(await K.json()).filename},R=(U,z)=>{var K;const Y=(K=U.target.files)==null?void 0:K[0];if(Y)if(z==="video"){if(k(Y),!_){const ne=document.createElement("video");ne.src=URL.createObjectURL(Y),ne.onloadedmetadata=()=>{const q=document.createElement("canvas");q.width=ne.videoWidth,q.height=ne.videoHeight;const re=q.getContext("2d");re&&(re.drawImage(ne,0,0),q.toBlob(xe=>{if(xe){const _e=new File([xe],"thumbnail.jpg",{type:"image/jpeg"});y(_e)}},"image/jpeg"))}}}else y(Y)},P=U=>U.includes("instagram.com")?"instagram":U.includes("facebook.com")||U.includes("fb.com")?"facebook":U.includes("youtube.com")||U.includes("youtu.be")?"youtube":U.startsWith("/")||U.includes("localhost")?"local":"url",H=async()=>{try{const U=await fetch(`${Gr}/videos`);if(U.ok){const z=await U.json();s(z)}}catch(U){console.error("Failed to fetch videos:",U)}};b.useEffect(()=>{H(),L()},[]);const L=async()=>{try{const U=await fetch(`${Gr}/carousel-settings`);if(U.ok){const z=await U.json();z&&z.length>0&&j(z[0].settings||m)}}catch(U){console.error("Failed to load carousel settings:",U);const z=localStorage.getItem("carousel-settings");if(z)try{j(JSON.parse(z))}catch(Y){console.error("Failed to parse saved settings:",Y)}}},O=async()=>{N(!0);try{if((await fetch(`${Gr}/carousel-settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:m})})).ok)localStorage.setItem("carousel-settings",JSON.stringify(m)),alert("Carousel settings saved successfully!"),h(!1);else throw new Error("Failed to save settings")}catch(U){console.error("Failed to save settings:",U),localStorage.setItem("carousel-settings",JSON.stringify(m)),alert("Settings saved to local storage!"),h(!1)}finally{N(!1)}},W=async U=>{if(U.preventDefault(),!S.title.trim()){alert("Please enter a title");return}if(!S.description.trim()){alert("Please enter a description");return}if(!S.price.trim()){alert("Please enter a price");return}if(!S.redirect_url.trim()){alert("Please enter a redirect URL");return}if(S.video_type==="local"&&!T){alert("Please select a video file for local upload");return}if(S.video_type!=="local"&&!S.video_url.trim()){alert("Please enter a video URL");return}o(!0),d(!0);try{let z=S.video_url,Y=S.thumbnail_url;T&&(z=await w(T,"video")),_&&(Y=await w(_,"thumbnail")),!z&&S.video_type==="local"&&(z="local-upload-pending");const K=T?"local":P(S.video_url),ne=n?`${Gr}/videos/${n.id}`:`${Gr}/videos`,re=await fetch(ne,{method:n?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...S,video_url:z||S.video_url,thumbnail_url:Y||S.thumbnail_url,video_type:K})});if(re.ok)await H(),a(!1),i(null),k(null),y(null),A({title:"",description:"",video_url:"",redirect_url:"",price:"",size:"medium",thumbnail_url:"",is_active:!0,video_type:"local"});else{const xe=await re.json();console.error("Server error:",xe),alert(`Failed to save video: ${xe.message||"Unknown error"}`)}}catch(z){console.error("Failed to save video:",z),alert("Failed to save video. Please try again.")}finally{o(!1),d(!1)}},Q=U=>{i(U),A({title:U.title,description:U.description,video_url:U.video_url,redirect_url:U.redirect_url,price:U.price,size:U.size,thumbnail_url:U.thumbnail_url,is_active:U.is_active,video_type:U.video_type}),a(!0)},D=async U=>{if(confirm("Are you sure you want to delete this video?"))try{(await fetch(`${Gr}/videos/${U}`,{method:"DELETE"})).ok&&await H()}catch(z){console.error("Failed to delete video:",z)}},F=async U=>{try{const z=await fetch(`${Gr}/videos/${U.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!U.is_active})});if(z.ok)await H();else{const Y=await z.text();console.error("Failed to toggle video status:",Y)}}catch(z){console.error("Failed to toggle video status:",z)}},V=U=>{if(!U.thumbnail_url){alert("No thumbnail available to crop. Please upload a thumbnail first.");return}g(U),p(!0)},te=async U=>{if(f)try{const z=new FormData;z.append("file",U,"cropped-thumbnail.jpg"),z.append("type","thumbnail");const Y=await fetch(`${Gr}/upload`,{method:"POST",body:z});if(!Y.ok){const re=await Y.text();throw console.error("Upload error:",re),new Error("Upload failed")}const ne=(await Y.json()).filename,q=await fetch(`${Gr}/videos/${f.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({thumbnail_url:ne})});if(q.ok)await H(),p(!1),g(null),alert("Thumbnail cropped and updated successfully!");else{const re=await q.text();throw console.error("Update error:",re),new Error(`Failed to update video: ${re}`)}}catch(z){console.error("Failed to crop thumbnail:",z),alert("Failed to crop thumbnail. Please try again.")}},I=U=>U.video_type==="local"?`${Pn().replace("/api","").replace("/api","")}/uploads/${U.video_url}`:U.video_url;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Video Manager"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>h(!x),className:"rounded-lg bg-gray-600 px-4 py-2 text-white hover:bg-gray-700 transition-colors flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4"}),"Carousel Settings"]}),e.jsx("button",{onClick:()=>{i(null),A({title:"",description:"",video_url:"",redirect_url:"",price:"",size:"medium",thumbnail_url:"",is_active:!0,video_type:"local"}),a(!0)},className:"rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 transition-colors",children:"Add New Video"})]})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Unlimited videos supported  Max file size: 500MB per video  Total videos: ",t.length]})]}),x&&e.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Carousel Animation Settings"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Auto-Advance Interval (ms)"}),e.jsx("input",{type:"number",min:"1000",max:"10000",step:"500",value:m.autoAdvanceInterval,onChange:U=>j({...m,autoAdvanceInterval:parseInt(U.target.value)||3e3}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Time between video changes (1000-10000ms)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Video Play Duration (ms)"}),e.jsx("input",{type:"number",min:"1000",max:"30000",step:"500",value:m.videoPlayDuration,onChange:U=>j({...m,videoPlayDuration:parseInt(U.target.value)||3e3}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"How long each video plays before next (1000-30000ms)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Animation Duration (ms)"}),e.jsx("input",{type:"number",min:"200",max:"2000",step:"100",value:m.animationDuration,onChange:U=>j({...m,animationDuration:parseInt(U.target.value)||700}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Transition speed (200-2000ms)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Animation Easing"}),e.jsxs("select",{value:m.animationEasing,onChange:U=>j({...m,animationEasing:U.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"linear",children:"Linear"}),e.jsx("option",{value:"ease",children:"Ease"}),e.jsx("option",{value:"ease-in",children:"Ease In"}),e.jsx("option",{value:"ease-out",children:"Ease Out"}),e.jsx("option",{value:"ease-in-out",children:"Ease In Out"}),e.jsx("option",{value:"cubic-bezier(0.68, -0.55, 0.265, 1.55)",children:"Bounce"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"3D Circle Radius (px)"}),e.jsx("input",{type:"number",min:"300",max:"1000",step:"50",value:m.radius,onChange:U=>j({...m,radius:parseInt(U.target.value)||500}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Distance of videos from center (300-1000px)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Side Video Blur (px)"}),e.jsx("input",{type:"number",min:"0",max:"30",step:"1",value:m.blurAmount,onChange:U=>j({...m,blurAmount:parseInt(U.target.value)||12}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Blur effect for side videos (0-30px)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Minimum Opacity"}),e.jsx("input",{type:"number",min:"0.1",max:"1",step:"0.1",value:m.minOpacity,onChange:U=>j({...m,minOpacity:parseFloat(U.target.value)||.6}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Minimum opacity for side videos (0.1-1.0)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Minimum Scale"}),e.jsx("input",{type:"number",min:"0.5",max:"1",step:"0.05",value:m.minScale,onChange:U=>j({...m,minScale:parseFloat(U.target.value)||.85}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Minimum scale for side videos (0.5-1.0)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"autoPlay",checked:m.autoPlay,onChange:U=>j({...m,autoPlay:U.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"autoPlay",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Enable Auto-Play"})]})]}),e.jsxs("div",{className:"mt-6 flex gap-4",children:[e.jsxs("button",{onClick:O,disabled:v,className:"flex items-center gap-2 rounded-lg bg-green-600 px-4 py-2 text-white hover:bg-green-700 transition-colors disabled:opacity-50",children:[e.jsx(Ms,{className:"w-4 h-4"}),v?"Saving...":"Save Settings"]}),e.jsx("button",{onClick:()=>{j({autoAdvanceInterval:3e3,videoPlayDuration:3e3,animationDuration:700,animationEasing:"ease-in-out",autoPlay:!0,radius:500,blurAmount:12,minOpacity:.6,minScale:.85})},className:"rounded-lg bg-gray-600 px-4 py-2 text-white hover:bg-gray-700 transition-colors",children:"Reset to Default"})]})]}),t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"No videos found. Add your first video!"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(U=>{var z;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"relative group",children:[U.video_type==="local"||U.video_url?e.jsx("video",{src:I(U),className:"w-full h-64 object-cover",muted:!0,playsInline:!0,onMouseEnter:Y=>{Y.target.play().catch(()=>{})},onMouseLeave:Y=>{const K=Y.target;K.pause(),K.currentTime=0}}):e.jsx("img",{src:U.thumbnail_url||"/placeholder-video.jpg",alt:U.title,className:"w-full h-64 object-cover"}),e.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${U.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:U.is_active?"Active":"Inactive"}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold bg-purple-100 text-purple-800",children:((z=U.video_type)==null?void 0:z.toUpperCase())||"URL"})]}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold bg-blue-100 text-blue-800",children:U.size.toUpperCase()})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:U.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:U.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-3",children:[e.jsxs("span",{children:[" ",U.views," views"]}),e.jsxs("span",{children:[" ",U.likes," likes"]}),e.jsx("span",{className:"font-bold text-green-600",children:U.price})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>Q(U),className:"flex-1 rounded-lg bg-blue-600 px-3 py-2 text-sm text-white hover:bg-blue-700 transition-colors",children:"Edit"}),e.jsxs("button",{onClick:()=>V(U),className:"rounded-lg bg-green-600 px-3 py-2 text-sm text-white hover:bg-green-700 transition-colors flex items-center gap-1",title:"Crop Thumbnail",children:[e.jsx(zu,{className:"w-4 h-4"}),"Crop"]}),e.jsx("button",{onClick:()=>F(U),className:`flex-1 rounded-lg px-3 py-2 text-sm text-white transition-colors ${U.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:U.is_active?"Deactivate":"Activate"}),e.jsx("button",{onClick:()=>D(U.id),className:"rounded-lg bg-gray-600 px-3 py-2 text-sm text-white hover:bg-gray-700 transition-colors",children:"Delete"})]})]})]},U.id)})}),u&&f&&f.thumbnail_url&&e.jsx(Ej,{imageUrl:f.thumbnail_url.startsWith("http")?f.thumbnail_url:`${Gr}/uploads/${f.thumbnail_url}`,aspectRatio:9/16,onCrop:te,onCancel:()=>{p(!1),g(null)}}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:n?"Edit Video":"Add New Video"}),e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title"}),e.jsx("input",{type:"text",value:S.title,onChange:U=>A({...S,title:U.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Price"}),e.jsx("input",{type:"text",value:S.price,onChange:U=>A({...S,price:U.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"1899",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:S.description,onChange:U=>A({...S,description:U.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Video Source Type"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:[{value:"local",label:"Local Upload",icon:""},{value:"instagram",label:"Instagram",icon:""},{value:"facebook",label:"Facebook",icon:""},{value:"youtube",label:"YouTube",icon:""},{value:"url",label:"Direct URL",icon:""}].map(U=>e.jsxs("button",{type:"button",onClick:()=>A({...S,video_type:U.value}),className:`p-3 rounded-lg border text-sm font-medium transition-colors ${S.video_type===U.value?"border-blue-500 bg-blue-50 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300"}`,children:[e.jsx("div",{className:"text-lg mb-1",children:U.icon}),e.jsx("div",{children:U.label})]},U.value))})]}),S.video_type==="local"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Upload Video File"}),e.jsx("input",{type:"file",accept:"video/*",onChange:U=>R(U,"video"),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!n}),T&&e.jsxs("div",{className:"mt-2 text-sm text-green-600",children:["Selected: ",T.name," (",(T.size/1024/1024).toFixed(2)," MB)"]}),e.jsx("input",{type:"hidden",value:T?"local-upload":"",onChange:()=>{}})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Video URL"}),e.jsx("input",{type:"url",value:S.video_url,onChange:U=>A({...S,video_url:U.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:S.video_type==="instagram"?"https://www.instagram.com/p/...":S.video_type==="facebook"?"https://www.facebook.com/watch/?v=VIDEO_ID":S.video_type==="youtube"?"https://www.youtube.com/watch?v=VIDEO_ID":"https://your-domain.com/video.mp4",required:!0}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[S.video_type==="instagram"&&"Paste Instagram post URL",S.video_type==="facebook"&&"Paste Facebook video URL",S.video_type==="youtube"&&"Paste YouTube video URL",S.video_type==="url"&&"Paste direct video URL"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Redirect URL"}),e.jsx("input",{type:"url",value:S.redirect_url,onChange:U=>A({...S,redirect_url:U.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://your-domain.com/product",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Thumbnail"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:U=>R(U,"thumbnail"),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),_&&e.jsxs("div",{className:"text-sm text-green-600",children:["Selected: ",_.name]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Or enter URL manually below"}),e.jsx("input",{type:"url",value:S.thumbnail_url,onChange:U=>A({...S,thumbnail_url:U.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://your-domain.com/thumbnail.jpg"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Size"}),e.jsxs("select",{value:S.size,onChange:U=>A({...S,size:U.target.value}),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"small",children:"Small (w-48 h-64)"}),e.jsx("option",{value:"medium",children:"Medium (w-56 h-72)"}),e.jsx("option",{value:"large",children:"Large (w-64 h-80)"})]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:S.is_active,onChange:U=>A({...S,is_active:U.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Active"})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"submit",disabled:l||c,className:"flex-1 rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 transition-colors disabled:opacity-50",children:l||c?"Saving...":n?"Update Video":"Add Video"}),e.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 rounded-lg bg-gray-600 px-4 py-2 text-white hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})]})})]})};function $9(){const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState(""),[l,o]=b.useState("all");b.useEffect(()=>{c();const x=window.socketService;return x&&(x.subscribe("contact_message_created",h=>{s(m=>[h,...m])}),x.subscribe("contact_message_updated",h=>{s(m=>m.map(j=>j.id===h.id?h:j))})),()=>{x&&(x.unsubscribe("contact_message_created"),x.unsubscribe("contact_message_updated"))}},[]);const c=async()=>{try{a(!0);const x=await et.getContactMessages();s(x||[])}catch(x){console.error("Failed to fetch contact messages:",x)}finally{a(!1)}},d=async(x,h)=>{try{await et.updateContactMessageStatus(x,h),s(m=>m.map(j=>j.id===x?{...j,status:h}:j))}catch(m){console.error("Failed to update message status:",m)}},u=t.filter(x=>{const h=x.name.toLowerCase().includes(n.toLowerCase())||x.email.toLowerCase().includes(n.toLowerCase())||x.message.toLowerCase().includes(n.toLowerCase()),m=l==="all"||x.status===l;return h&&m}),p=t.filter(x=>x.status==="unread").length,f=x=>{switch(x){case"unread":return"bg-blue-100 text-blue-800";case"read":return"bg-gray-100 text-gray-800";case"replied":return"bg-green-100 text-green-800";case"archived":return"bg-slate-100 text-slate-800";default:return"bg-gray-100 text-gray-800"}},g=x=>new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Contact Messages"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage and respond to customer inquiries"})]}),p>0&&e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:[e.jsx(ss,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsxs("span",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:[p," new messages"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 rounded-xl",style:{backgroundColor:"var(--arctic-blue-light)"},children:e.jsx(ss,{className:"w-6 h-6",style:{color:"var(--arctic-blue-primary)"}})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Total"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:t.length})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 rounded-xl",style:{backgroundColor:"var(--arctic-blue-light)"},children:e.jsx(cs,{className:"w-6 h-6",style:{color:"var(--arctic-blue-primary)"}})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Unread"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:p})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 rounded-xl",style:{backgroundColor:"#D1FAE5"},children:e.jsx(Vt,{className:"w-6 h-6",style:{color:"#059669"}})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Replied"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:t.filter(x=>x.status==="replied").length})]})]})}),e.jsx("div",{className:"metric-card",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 rounded-xl",style:{backgroundColor:"#E9D5FF"},children:e.jsx(ot,{className:"w-6 h-6",style:{color:"#7C3AED"}})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Read"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:t.filter(x=>x.status==="read").length})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 shadow flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search messages...",value:n,onChange:x=>i(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:l,onChange:x=>o(x.target.value),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"unread",children:"Unread"}),e.jsx("option",{value:"read",children:"Read"}),e.jsx("option",{value:"replied",children:"Replied"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),r?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Loading messages..."})]}):u.length===0?e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-12 text-center shadow",children:[e.jsx(ss,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"No messages found"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:n||l!=="all"?"Try adjusting your filters":"No contact messages yet"})]}):e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Message"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:u.map(x=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ga,{className:"w-5 h-5 text-slate-400"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:x.name})]}),e.jsxs("div",{className:"mt-1 flex items-center space-x-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx(ss,{className:"w-4 h-4"}),e.jsx("span",{children:x.email})]}),x.phone&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx(pa,{className:"w-4 h-4"}),e.jsx("span",{children:x.phone})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fs,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-slate-100 max-w-md truncate",children:x.message})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${f(x.status)}`,children:x.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-400",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Mr,{className:"w-4 h-4"}),e.jsx("span",{children:g(x.created_at)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[x.status==="unread"&&e.jsx("button",{onClick:()=>d(x.id,"read"),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900 rounded",title:"Mark as read",children:e.jsx(Vt,{className:"w-5 h-5"})}),x.status!=="replied"&&e.jsx("button",{onClick:()=>d(x.id,"replied"),className:"p-2 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900 rounded",title:"Mark as replied",children:e.jsx(Vt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>d(x.id,"archived"),className:"p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700 rounded",title:"Archive",children:e.jsx(Mt,{className:"w-5 h-5"})})]})})]},x.id))})]})})})]})}function U9(){var _;const[t,s]=b.useState([]),[r,a]=b.useState(!0),[n,i]=b.useState("all"),[l,o]=b.useState(""),[c,d]=b.useState(null),[u,p]=b.useState(!1),[f,g]=b.useState({status:"processing",transaction_id:"",admin_notes:"",rejection_reason:""});b.useEffect(()=>{h()},[n]);const x=()=>{if(typeof window<"u"){const y=window.location.hostname;if(y==="thenefol.com"||y==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"},h=async()=>{try{a(!0);const y=x(),w=await fetch(`${y}/admin/coin-withdrawals${n!=="all"?`?status=${n}`:""}`,{headers:{"Content-Type":"application/json"}});if(w.ok){const R=await w.json();s(Array.isArray(R)?R:[])}else console.error("Failed to fetch withdrawals:",w.status,w.statusText)}catch(y){console.error("Failed to fetch withdrawals:",y)}finally{a(!1)}},m=async y=>{if(y.preventDefault(),!!c)try{const w=localStorage.getItem("auth_token"),R=localStorage.getItem("role")||"admin",P=localStorage.getItem("permissions")||"",H={"Content-Type":"application/json"};w&&(H.Authorization=`Bearer ${w}`),R&&(H["x-user-role"]=R),P&&(H["x-user-permissions"]=P);const L=x(),O=await fetch(`${L}/admin/coin-withdrawals/${c.id}/process`,{method:"PUT",headers:H,body:JSON.stringify(f)});if(O.ok)alert("Withdrawal processed successfully!"),p(!1),d(null),h();else{const W=await O.json();alert(W.message||"Failed to process withdrawal")}}catch(w){console.error("Error processing withdrawal:",w),alert("Failed to process withdrawal")}},j=y=>{d(y),g({status:y.status,transaction_id:y.transaction_id||"",admin_notes:y.admin_notes||"",rejection_reason:y.rejection_reason||""}),p(!0)},v=y=>{const w={pending:"bg-yellow-100 text-yellow-800 border-yellow-300",processing:"bg-blue-100 text-blue-800 border-blue-300",completed:"bg-green-100 text-green-800 border-green-300",rejected:"bg-red-100 text-red-800 border-red-300",failed:"bg-red-100 text-red-800 border-red-300"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${w[y]||w.pending}`,children:y.charAt(0).toUpperCase()+y.slice(1)})},N=y=>{switch(y){case"completed":return e.jsx(g2,{className:"w-5 h-5 text-green-600"});case"rejected":case"failed":return e.jsx(ts,{className:"w-5 h-5 text-red-600"});case"processing":return e.jsx(X2,{className:"w-5 h-5 text-blue-600 animate-spin"});default:return e.jsx(cs,{className:"w-5 h-5 text-yellow-600"})}},S=t.filter(y=>{var w;if(l){const R=l.toLowerCase();return y.user_name.toLowerCase().includes(R)||y.user_email.toLowerCase().includes(R)||((w=y.transaction_id)==null?void 0:w.toLowerCase().includes(R))||y.id.toString().includes(R)}return!0}),A=t.filter(y=>y.status==="pending").length,T=t.reduce((y,w)=>y+(Number(w.amount)||0)/10,0),k=t.filter(y=>y.status==="pending").reduce((y,w)=>y+(Number(w.amount)||0)/10,0);return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Coin Withdrawals"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage user withdrawal requests"})]}),e.jsx("button",{className:"px-4 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:e.jsx(wa,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Total Requests"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:t.length})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Pending"}),e.jsx("p",{className:"text-2xl font-light",style:{color:"#D97706",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:A})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-light",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:["",T.toFixed(2)]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"var(--text-muted)"},children:"Pending Amount"}),e.jsxs("p",{className:"text-2xl font-light",style:{color:"#EA580C",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:["",k.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"mb-6 flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or ID...",value:l,onChange:y=>o(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),e.jsxs("select",{value:n,onChange:y=>i(y.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"failed",children:"Failed"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:S.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Db,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No withdrawal requests found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:S.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:["#",y.id]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:y.user_name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:y.user_email})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900 dark:text-gray-100",children:["",((Number(y.amount)||0)/10).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[y.withdrawal_method==="bank"?e.jsx(Sb,{className:"w-4 h-4 text-blue-600"}):e.jsx(ni,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:y.withdrawal_method==="bank"?"Bank":"UPI"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[N(y.status),v(y.status)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(y.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>j(y),className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Process"})})]},y.id))})]})})}),u&&c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Process Withdrawal"}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"User"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:c.user_name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.user_email})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Amount"}),e.jsxs("p",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:["",((Number(c.amount)||0)/10).toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[c.amount," coins"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Method"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:c.withdrawal_method==="bank"?"Bank Transfer":"UPI Transfer"})]})]}),c.withdrawal_method==="bank"&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Bank Details"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:["Account: ",c.account_holder_name]}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:["Bank: ",c.bank_name]}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:["Account Number: ****",(_=c.account_number)==null?void 0:_.slice(-4)]}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:["IFSC: ",c.ifsc_code]})]}),c.withdrawal_method==="upi"&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"UPI Details"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:["UPI ID: ",c.upi_id]})]})]}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),e.jsxs("select",{value:f.status,onChange:y=>g(w=>({...w,status:y.target.value})),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"failed",children:"Failed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Transaction ID (Optional)"}),e.jsx("input",{type:"text",value:f.transaction_id,onChange:y=>g(w=>({...w,transaction_id:y.target.value})),placeholder:"Enter transaction ID",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Admin Notes (Optional)"}),e.jsx("textarea",{value:f.admin_notes,onChange:y=>g(w=>({...w,admin_notes:y.target.value})),rows:3,placeholder:"Add notes...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),(f.status==="rejected"||f.status==="failed")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-red-700 dark:text-red-300 mb-2",children:"Rejection Reason *"}),e.jsx("textarea",{value:f.rejection_reason,onChange:y=>g(w=>({...w,rejection_reason:y.target.value})),rows:3,required:!0,placeholder:`Reason for ${f.status==="rejected"?"rejection":"failure"}...`,className:"w-full px-4 py-2 border border-red-300 dark:border-red-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Process Withdrawal"}),e.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})]})})]})}function z9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState(""),[l,o]=b.useState({name:"",values:""}),[c,d]=b.useState({});b.useEffect(()=>{(async()=>{if(n){try{const v=await(await fetch(`/api/products/${n}/variant-options`)).json();v!=null&&v.success&&Array.isArray(v.data)&&s(v.data)}catch{}try{const v=await(await fetch(`/api/products/${n}/variants`)).json();v!=null&&v.success&&Array.isArray(v.data)&&a(v.data)}catch{}}})()},[n]);const u=()=>{l.name&&l.values&&(s([...t,{name:l.name,values:l.values.split(",").map(m=>m.trim())}]),o({name:"",values:""}))},p=async()=>{const j=await(await fetch(`/api/products/${n}/variant-options`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({options:t})})).json();console.log("Options saved:",j)},f=async()=>{const j=await(await fetch(`/api/products/${n}/variants/generate`,{method:"POST"})).json();j.success&&(a(j.data),alert(`Generated ${j.data.length} variants`))},g=(m,j,v)=>{a(N=>N.map(S=>S.id===m?{...S,[j]:v}:S))},x=async m=>{const j=r.find(v=>v.id===m);j&&await fetch(`/api/variants/${m}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sku:j.sku,attributes:j.attributes,price:j.price?Number(j.price):null,mrp:j.mrp?Number(j.mrp):null,image_url:j.image_url||null,barcode:j.barcode||null,is_active:j.is_active})})},h=async m=>{const j=c[m];j&&await fetch(`/api/inventory/${n}/${m}/low-threshold`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threshold:Number(j)})})};return e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Product Variants"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage product variants with multiple sizes or colors"})]}),e.jsx("div",{className:"metric-card",style:{backgroundColor:"var(--arctic-blue-lighter)",borderColor:"var(--arctic-blue-primary)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",style:{color:"var(--arctic-blue-primary-dark)"},children:"Product Variants Page"}),e.jsxs("p",{className:"text-sm",style:{color:"var(--text-muted)",letterSpacing:"0.02em"},children:["Yeh page sirf un products ke liye hai jinke multiple variants hain (jaise: Size S, M, L ya different Colors).",e.jsx("br",{}),e.jsx("strong",{children:"Agar aapke products mein sirf ek hi size hai, to is page ki zaroorat nahi hai."}),e.jsx("br",{}),"Single-size products ko directly ",e.jsx("a",{href:"/admin/products",className:"underline font-semibold",style:{color:"var(--arctic-blue-primary-dark)"},children:"Products page"})," se manage karein."]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product ID"}),e.jsx("input",{type:"text",value:n,onChange:m=>i(m.target.value),className:"border p-2 rounded dark:bg-gray-800 dark:border-gray-600 dark:text-white",placeholder:"Enter product ID"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Variant Options"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",placeholder:"Option name (e.g., Size)",value:l.name,onChange:m=>o({...l,name:m.target.value}),className:"border p-2 rounded"}),e.jsx("input",{type:"text",placeholder:"Values (comma-separated, e.g., S, M, L)",value:l.values,onChange:m=>o({...l,values:m.target.value}),className:"border p-2 rounded"}),e.jsx("button",{onClick:u,className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Add Option"})]}),e.jsx("button",{onClick:p,className:"px-4 py-2 bg-green-500 text-white rounded",children:"Save Options"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Generated Variants"}),e.jsx("button",{onClick:f,className:"px-4 py-2 bg-purple-500 text-white rounded mb-4",children:"Generate Variants"}),e.jsx("div",{className:"space-y-3",children:r.map(m=>e.jsxs("div",{className:"border p-3 rounded space-y-2",children:[e.jsxs("div",{className:"text-sm",children:["Attributes: ",JSON.stringify(m.attributes)]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2 items-center",children:[e.jsx("input",{className:"border p-2 rounded",placeholder:"SKU",value:m.sku||"",onChange:j=>g(m.id,"sku",j.target.value)}),e.jsx("input",{className:"border p-2 rounded",placeholder:"Price",type:"number",value:m.price||"",onChange:j=>g(m.id,"price",j.target.value)}),e.jsx("input",{className:"border p-2 rounded",placeholder:"MRP",type:"number",value:m.mrp||"",onChange:j=>g(m.id,"mrp",j.target.value)}),e.jsx("input",{className:"border p-2 rounded",placeholder:"Barcode",value:m.barcode||"",onChange:j=>g(m.id,"barcode",j.target.value)}),e.jsx("input",{className:"border p-2 rounded",placeholder:"Image URL",value:m.image_url||"",onChange:j=>g(m.id,"image_url",j.target.value)}),e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:!!m.is_active,onChange:j=>g(m.id,"is_active",j.target.checked)})," Active"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>x(m.id),className:"px-3 py-2 bg-green-600 text-white rounded",children:"Save"}),e.jsx("input",{className:"border p-2 rounded w-40",placeholder:"Low stock threshold",value:c[m.id]||"",onChange:j=>d(v=>({...v,[m.id]:j.target.value}))}),e.jsx("button",{onClick:()=>h(m.id),className:"px-3 py-2 bg-indigo-600 text-white rounded",children:"Set Threshold"})]})]},m.id))})]})]})}function W9(){const{notify:t}=hr(),[s,r]=b.useState(""),[a,n]=b.useState(null),[i,l]=b.useState([]),[o,c]=b.useState({variantId:"",delta:"",reason:""}),d=async()=>{const h=await(await fetch(`/api/inventory/${s}/summary`)).json();h.success?n(h.data):t("error","Failed to fetch summary")},u=async()=>{const h=await(await fetch("/api/inventory/low-stock")).json();h.success&&l(h.data)},[p,f]=b.useState(!1),g=async()=>{const[x,h]=o.variantId.split(":");(await(await fetch(`/api/inventory/${x}/${h}/adjust`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delta:Number(o.delta),reason:o.reason||"manual"})})).json()).success?(t("success","Stock adjusted"),c({variantId:"",delta:"",reason:""}),d()):t("error","Failed to adjust stock")};return b.useEffect(()=>{u()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Inventory Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Track and manage product inventory levels"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Product Inventory Summary"}),e.jsx("input",{type:"text",value:s,onChange:x=>r(x.target.value),placeholder:"Enter product ID",className:"border p-2 rounded mr-2"}),e.jsx("button",{onClick:d,className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Fetch Summary"}),a&&e.jsxs("div",{className:"mt-4 border p-4 rounded",children:[e.jsxs("p",{children:["Available: ",a.available]}),e.jsxs("p",{children:["Total: ",a.total]}),e.jsxs("p",{children:["Low Stock Variants: ",a.low_variants]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Adjust Stock"}),e.jsx("input",{type:"text",value:o.variantId,onChange:x=>c({...o,variantId:x.target.value}),placeholder:"productId:variantId",className:"border p-2 rounded mr-2"}),e.jsx("input",{type:"number",value:o.delta,onChange:x=>c({...o,delta:x.target.value}),placeholder:"Change in quantity",className:"border p-2 rounded mr-2"}),e.jsx("input",{type:"text",value:o.reason,onChange:x=>c({...o,reason:x.target.value}),placeholder:"Reason",className:"border p-2 rounded mr-2"}),e.jsx("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-green-500 text-white rounded",children:"Adjust Stock"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Low Stock Items"}),i.length===0?e.jsx("p",{className:"text-gray-500",children:"No low stock items"}):e.jsx("div",{className:"space-y-2",children:i.map(x=>e.jsxs("div",{className:"border p-3 rounded",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"SKU:"})," ",x.sku]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Available:"})," ",x.quantity]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Threshold:"})," ",x.low_stock_threshold]})]},x.variant_id))})]})]}),e.jsx(za,{open:p,onClose:()=>f(!1),onConfirm:g,title:"Adjust stock?",description:"Please confirm updating stock levels.",confirmText:"Adjust"})]})}function V9(){const[t,s]=b.useState([]),[r,a]=b.useState([]),[n,i]=b.useState({name:"",channel:"amazon",credentials:{api_key:"",api_secret:""}}),l=async c=>{const u=await(await fetch(`/api/marketplaces/${c}/accounts`)).json();u.success&&(c==="amazon"?s(u.data):a(u.data))},o=async()=>{const c=n.channel==="amazon"?"/api/marketplaces/amazon/accounts":"/api/marketplaces/flipkart/accounts";(await(await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n.name,credentials:n.credentials})})).json()).success&&(alert("Account created successfully"),i({name:"",channel:"amazon",credentials:{api_key:"",api_secret:""}}),l(n.channel))};return b.useEffect(()=>{l("amazon"),l("flipkart")},[]),e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Marketplace Integrations"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Connect and manage marketplace accounts"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Add New Marketplace Account"}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsxs("select",{value:n.channel,onChange:c=>i({...n,channel:c.target.value}),className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"},children:[e.jsx("option",{value:"amazon",children:"Amazon"}),e.jsx("option",{value:"flipkart",children:"Flipkart"})]}),e.jsx("input",{type:"text",value:n.name,onChange:c=>i({...n,name:c.target.value}),placeholder:"Account name",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("input",{type:"text",value:n.credentials.api_key,onChange:c=>i({...n,credentials:{...n.credentials,api_key:c.target.value}}),placeholder:"API Key",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("input",{type:"text",value:n.credentials.api_secret,onChange:c=>i({...n,credentials:{...n.credentials,api_secret:c.target.value}}),placeholder:"API Secret",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("button",{onClick:o,className:"btn-primary",children:"Create Account"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Amazon Accounts"}),t.length===0?e.jsx("p",{style:{color:"var(--text-muted)"},children:"No accounts"}):e.jsx("div",{className:"space-y-3",children:t.map(c=>e.jsxs("div",{className:"border p-4 rounded-xl transition-colors hover:bg-[var(--arctic-blue-lighter)]",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsx("p",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:e.jsx("strong",{children:c.name})}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:c.is_active?"Active":"Inactive"})]},c.id))})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h3",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Flipkart Accounts"}),r.length===0?e.jsx("p",{style:{color:"var(--text-muted)"},children:"No accounts"}):e.jsx("div",{className:"space-y-3",children:r.map(c=>e.jsxs("div",{className:"border p-4 rounded-xl transition-colors hover:bg-[var(--arctic-blue-lighter)]",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsx("p",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:e.jsx("strong",{children:c.name})}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:c.is_active?"Active":"Inactive"})]},c.id))})]})]})]})}function H9(){const[t,s]=b.useState([]),[r,a]=b.useState({name:"",address:{}}),n=async()=>{const o=await(await fetch("/api/warehouses")).json();o.success&&s(o.data)},i=async()=>{(await(await fetch("/api/warehouses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json()).success&&(alert("Warehouse created"),a({name:"",address:{}}),n())};return b.useEffect(()=>{n()},[]),e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Warehouse Management"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage your warehouse locations and inventory"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Add Warehouse"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:r.name,onChange:l=>a({...r,name:l.target.value}),placeholder:"Warehouse name",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)] flex-1",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("button",{onClick:i,className:"btn-primary",children:"Create Warehouse"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"All Warehouses"}),t.length===0?e.jsx("p",{style:{color:"var(--text-muted)"},children:"No warehouses"}):e.jsx("div",{className:"space-y-3",children:t.map(l=>e.jsxs("div",{className:"border p-4 rounded-xl transition-colors hover:bg-[var(--arctic-blue-lighter)]",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsx("p",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:e.jsx("strong",{children:l.name})}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:l.is_active?"Active":"Inactive"})]},l.id))})]})]})}function G9(){const[t,s]=b.useState([]),[r,a]=b.useState({staff_id:"",opening_amount:""}),n=async()=>{const o=await(await fetch("/api/pos/transactions")).json();o.success&&s(o.data)},i=async()=>{(await(await fetch("/api/pos/sessions/open",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({staff_id:Number(r.staff_id),opening_amount:Number(r.opening_amount)})})).json()).success&&(alert("POS session opened"),a({staff_id:"",opening_amount:""}))};return b.useEffect(()=>{n()},[]),e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"POS System"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Manage point of sale transactions and sessions"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Open POS Session"}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsx("input",{type:"number",value:r.staff_id,onChange:l=>a({...r,staff_id:l.target.value}),placeholder:"Staff ID",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("input",{type:"number",value:r.opening_amount,onChange:l=>a({...r,opening_amount:l.target.value}),placeholder:"Opening amount",className:"px-4 py-2 rounded-xl border transition-all focus:outline-none focus:ring-2 focus:ring-[var(--arctic-blue-primary)]",style:{borderColor:"var(--arctic-blue-light)",backgroundColor:"var(--arctic-blue-lighter)"}}),e.jsx("button",{onClick:i,className:"btn-primary",children:"Open Session"})]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h2",{className:"text-xl font-light mb-4",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Recent Transactions"}),t.length===0?e.jsx("p",{style:{color:"var(--text-muted)"},children:"No transactions"}):e.jsx("div",{className:"space-y-3",children:t.map(l=>e.jsxs("div",{className:"border p-4 rounded-xl transition-colors hover:bg-[var(--arctic-blue-lighter)]",style:{borderColor:"var(--arctic-blue-light)"},children:[e.jsxs("p",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Transaction:"})," ",l.transaction_number]}),e.jsxs("p",{style:{color:"var(--text-secondary)"},children:[e.jsx("strong",{children:"Total:"})," ",l.total]}),e.jsxs("p",{style:{color:"var(--text-secondary)"},children:[e.jsx("strong",{children:"Method:"})," ",l.payment_method]}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:new Date(l.created_at).toLocaleString()})]},l.id))})]})]})}function q9(){const[t,s]=b.useState({page_id:"",access_token:""}),[r,a]=b.useState(null),[n,i]=b.useState([]),[l,o]=b.useState(!1),[c,d]=b.useState(null),[u,p]=b.useState({brand:"Nefol",condition:"new",availability:"in stock"}),[f,g]=b.useState(null),h=(()=>{if(typeof window<"u"){const y=window.location.hostname;if(y==="thenefol.com"||y==="www.thenefol.com")return`${window.location.protocol}//${window.location.host}/api`}return"https://thenefol.com/api"})(),m=b.useMemo(()=>({"Content-Type":"application/json"}),[]),j=async()=>{var R;const w=await(await fetch("/api/fb-shop/config",{method:"POST",headers:m,body:JSON.stringify(t)})).json();(w.success||(R=w.data)!=null&&R.success)&&alert("Configuration saved")},v=async()=>{try{o(!0);const w=await(await fetch("/api/facebook/sync-errors")).json();i((w==null?void 0:w.data)||w||[])}finally{o(!1)}},N=async()=>{try{const w=await(await fetch("/api/facebook/field-mapping")).json(),R=(w==null?void 0:w.data)||w||{};p(P=>({...P,...R}))}catch{}},S=async()=>{try{const w=await(await fetch("/api/facebook/sync/last")).json();g(w)}catch{}};b.useEffect(()=>{v(),N(),S()},[]),b.useEffect(()=>{let y;const w=async()=>{var H;if(!c)return;const P=await(await fetch(`/api/facebook/sync/status/${c}`)).json();a((P==null?void 0:P.data)||P),(H=(P==null?void 0:P.data)||P)!=null&&H.running&&(y=setTimeout(w,500))};return w(),()=>y&&clearTimeout(y)},[c]);const A=async()=>{var P;a(null),d(null);const w=await(await fetch("/api/facebook/sync-products",{method:"POST",headers:m})).json(),R=(P=(w==null?void 0:w.data)||w)==null?void 0:P.jobId;d(R)},T=async()=>{var P;a(null),d(null);const w=await(await fetch("/api/facebook/sync-stock-price",{method:"POST",headers:m,body:JSON.stringify({})})).json(),R=(P=(w==null?void 0:w.data)||w)==null?void 0:P.jobId;d(R)},k=async()=>{await fetch("/api/facebook/sync-errors/clear",{method:"POST"}),await v()},_=async()=>{const y=await fetch("/api/facebook/field-mapping",{method:"POST",headers:m,body:JSON.stringify(u)}),w=await y.json();if(!y.ok)return alert((w==null?void 0:w.error)||"Failed to save mapping");alert("Mapping saved")};return e.jsxs("div",{className:"p-6 space-y-8",style:{fontFamily:"var(--font-body-family, Inter, sans-serif)"},children:[e.jsx("style",{children:`
        :root {
          --arctic-blue-primary: #7DD3D3;
          --arctic-blue-primary-hover: #5EC4C4;
          --arctic-blue-primary-dark: #4A9FAF;
          --arctic-blue-light: #E0F5F5;
          --arctic-blue-lighter: #F0F9F9;
          --arctic-blue-background: #F4F9F9;
        }
      `}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light mb-2 tracking-[0.15em]",style:{color:"var(--text-primary)",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"FB Shop Integration"}),e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"var(--text-muted)",letterSpacing:"0.05em"},children:"Sync products with Facebook Shop"})]}),f&&e.jsxs("div",{className:"metric-card",style:{backgroundColor:"var(--arctic-blue-lighter)"},children:[e.jsx("b",{children:"Last auto-sync:"})," ",f.lastRun?new Date(f.lastRun).toLocaleString():"Never",f.result&&f.result.error&&e.jsxs("span",{className:"ml-3 text-red-700",children:["Error: ",f.result.error]})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Facebook/Instagram Shop Integration"}),e.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded",children:e.jsxs("p",{className:"text-yellow-800",children:[e.jsx("strong",{children:"Note:"})," Background sync with progress and a CSV feed are ready. Replace stubs with Graph API calls when credentials are finalized."]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 bg-white rounded border",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Configuration"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Page ID"}),e.jsx("input",{type:"text",value:t.page_id,onChange:y=>s({...t,page_id:y.target.value}),className:"border p-2 rounded w-full",placeholder:"Facebook Page ID"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Access Token"}),e.jsx("input",{type:"text",value:t.access_token,onChange:y=>s({...t,access_token:y.target.value}),className:"border p-2 rounded w-full",placeholder:"Long-lived access token"})]}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Save Configuration"}),e.jsxs("div",{className:"mt-4 text-sm",children:[e.jsx("div",{children:"Catalog Feed URL:"}),e.jsxs("a",{className:"text-blue-600 underline",href:`${h}/api/facebook/catalog.csv`,target:"_blank",rel:"noreferrer",children:[h||window.location.origin,"/api/facebook/catalog.csv"]})]})]}),e.jsxs("div",{className:"p-4 bg-white rounded border",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Sync Actions"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{onClick:A,className:"px-4 py-2 bg-slate-900 text-white rounded",children:"Sync All Products"}),e.jsx("button",{onClick:T,className:"px-4 py-2 bg-indigo-600 text-white rounded",children:"Sync Stock & Price"})]}),r&&e.jsxs("div",{className:"mt-4 p-3 bg-slate-50 rounded text-sm",children:[e.jsxs("div",{className:"mb-2",children:["Job: ",r.id," (",r.type,")"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded h-3 overflow-hidden",children:e.jsx("div",{className:"bg-green-600 h-3",style:{width:`${Math.min(100,Math.floor((r.success+r.failed)/Math.max(1,r.total)*100))}%`}})}),e.jsxs("div",{className:"mt-2",children:[r.success+r.failed,"/",r.total," processed  Success: ",r.success,"  Failed: ",r.failed," ",r.running?"(running...)":"(done)"]})]})]})]})]}),e.jsxs("div",{className:"p-4 bg-white rounded border",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Field Mapping"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Brand"}),e.jsx("input",{className:"input",value:u.brand||"",onChange:y=>p({...u,brand:y.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Condition"}),e.jsx("input",{className:"input",value:u.condition||"",onChange:y=>p({...u,condition:y.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Availability"}),e.jsx("input",{className:"input",value:u.availability||"",onChange:y=>p({...u,availability:y.target.value})})]})]}),e.jsx("button",{onClick:_,className:"mt-3 px-4 py-2 bg-slate-900 text-white rounded",children:"Save Mapping"})]}),e.jsxs("div",{className:"p-4 bg-white rounded border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"font-semibold",children:"Sync Errors"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:v,className:"px-3 py-1 border rounded",children:"Refresh"}),e.jsx("button",{onClick:k,className:"px-3 py-1 bg-red-600 text-white rounded",children:"Clear"})]})]}),l?"Loading...":e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pr-4",children:"Time"}),e.jsx("th",{className:"py-2 pr-4",children:"Product ID"}),e.jsx("th",{className:"py-2 pr-4",children:"Code"}),e.jsx("th",{className:"py-2 pr-4",children:"Message"}),e.jsx("th",{className:"py-2 pr-4",children:"Payload"})]})}),e.jsxs("tbody",{children:[n.map(y=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 pr-4",children:new Date(y.created_at).toLocaleString()}),e.jsx("td",{className:"py-2 pr-4",children:y.product_id||"-"}),e.jsx("td",{className:"py-2 pr-4",children:y.code||"-"}),e.jsx("td",{className:"py-2 pr-4",children:y.message||"-"}),e.jsx("td",{className:"py-2 pr-4",children:e.jsx("pre",{className:"whitespace-pre-wrap text-xs",children:y.payload?JSON.stringify(y.payload):"-"})})]},y.id)),n.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"py-2 pr-4",colSpan:5,children:"No errors"})})]})]})})]})]})}function J9(){const t=b.useRef(!1);return b.useEffect(()=>{if(t.current)return;t.current=!0,console.log("?? Initializing admin socket connection..."),Ye.connect();const s=Ye.subscribe("order_created",x=>{console.log("? New order created:",x),"Notification"in window&&Notification.permission==="granted"&&new Notification("New Order!",{body:`Order #${x.order_number||x.id||"N/A"} received`,icon:"/favicon.ico"})}),r=Ye.subscribe("orders_created",x=>{console.log("? Order created (batch):",x)}),a=Ye.subscribe("order_updated",x=>{console.log("?? Order updated:",x)}),n=Ye.subscribe("orders_updated",x=>{console.log("?? Order updated (batch):",x)}),i=Ye.subscribe("user_profile_updated",x=>{console.log("?? User profile updated:",x)}),l=Ye.subscribe("users_created",x=>{console.log("?? New user registered:",x)}),o=Ye.subscribe("products_created",x=>{console.log("??? Product created:",x)}),c=Ye.subscribe("products_updated",x=>{console.log("??? Product updated:",x)}),d=Ye.subscribe("products_deleted",x=>{console.log("??? Product deleted:",x)}),u=Ye.subscribe("delivery_status_updated",x=>{console.log("?? Delivery status updated:",x)}),p=Ye.subscribe("contact_message_created",x=>{console.log("?? New contact message:",x),"Notification"in window&&Notification.permission==="granted"&&new Notification("New Contact Message!",{body:`Message from ${x.name}`,icon:"/favicon.ico"})}),f=Ye.subscribe("contact_message_updated",x=>{console.log("?? Contact message updated:",x)}),g=Ye.subscribe("update",x=>{var h;x.type==="whatsapp-subscription"&&(console.log("?? New WhatsApp subscription:",x.data),"Notification"in window&&Notification.permission==="granted"&&new Notification("New WhatsApp Subscription!",{body:x.data.message||`New subscription: ${(h=x.data.subscription)==null?void 0:h.phone}`,icon:"/favicon.ico"}))});return"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission(),()=>{s(),r(),a(),n(),i(),l(),o(),c(),d(),u(),p(),f(),g()}},[]),e.jsx(Hk,{children:e.jsx(nS,{children:e.jsxs(jk,{children:[e.jsx(De,{path:"/admin/login",element:e.jsx(m9,{})}),e.jsx(De,{path:"/admin",element:e.jsx(Gk,{}),children:e.jsxs(De,{element:e.jsx(aS,{}),children:[e.jsx(De,{index:!0,element:e.jsx(jo,{to:"/admin/dashboard",replace:!0})}),e.jsx(De,{path:"dashboard",element:e.jsx(lS,{})}),e.jsx(De,{path:"products",element:e.jsx(g8,{})}),e.jsx(De,{path:"product-variants",element:e.jsx(z9,{})}),e.jsx(De,{path:"categories",element:e.jsx(xS,{})}),e.jsx(De,{path:"product-collections",element:e.jsx(Z8,{})}),e.jsx(De,{path:"inventory",element:e.jsx(W9,{})}),e.jsx(De,{path:"warehouses",element:e.jsx(H9,{})}),e.jsx(De,{path:"orders",element:e.jsx(oS,{})}),e.jsx(De,{path:"orders/:orderNumber",element:e.jsx(x9,{})}),e.jsx(De,{path:"shipments",element:e.jsx(u9,{})}),e.jsx(De,{path:"returns",element:e.jsx(O8,{})}),e.jsx(De,{path:"customers",element:e.jsx(dS,{})}),e.jsx(De,{path:"users",element:e.jsx(uS,{})}),e.jsx(De,{path:"users/:id",element:e.jsx(d9,{})}),e.jsx(De,{path:"user-profiles",element:e.jsx(H8,{})}),e.jsx(De,{path:"user-notifications",element:e.jsx(G8,{})}),e.jsx(De,{path:"contact-messages",element:e.jsx($9,{})}),e.jsx(De,{path:"invoices",element:e.jsx(F8,{})}),e.jsx(De,{path:"invoice-settings",element:e.jsx(R8,{})}),e.jsx(De,{path:"tax",element:e.jsx(L8,{})}),e.jsx(De,{path:"payment",element:e.jsx(B8,{})}),e.jsx(De,{path:"payment-options",element:e.jsx(M9,{})}),e.jsx(De,{path:"coin-withdrawals",element:e.jsx(U9,{})}),e.jsx(De,{path:"marketing",element:e.jsx(v8,{})}),e.jsx(De,{path:"meta-ads",element:e.jsx(w8,{})}),e.jsx(De,{path:"discounts",element:e.jsx(C8,{})}),e.jsx(De,{path:"whatsapp-subscriptions",element:e.jsx(S8,{})}),e.jsx(De,{path:"whatsapp-notifications",element:e.jsx(j9,{})}),e.jsx(De,{path:"whatsapp-chat",element:e.jsx(w9,{})}),e.jsx(De,{path:"whatsapp-management",element:e.jsx(N9,{})}),e.jsx(De,{path:"analytics",element:e.jsx(b8,{})}),e.jsx(De,{path:"advanced-analytics",element:e.jsx(S9,{})}),e.jsx(De,{path:"actionable-analytics",element:e.jsx(F9,{})}),e.jsx(De,{path:"journey-tracking",element:e.jsx(A9,{})}),e.jsx(De,{path:"journey-funnel",element:e.jsx(D9,{})}),e.jsx(De,{path:"loyalty-program",element:e.jsx(b9,{})}),e.jsx(De,{path:"loyalty-program-management",element:e.jsx(q8,{})}),e.jsx(De,{path:"affiliate-program",element:e.jsx(a9,{})}),e.jsx(De,{path:"affiliate-requests",element:e.jsx(n9,{})}),e.jsx(De,{path:"cashback",element:e.jsx(v9,{})}),e.jsx(De,{path:"live-chat",element:e.jsx(k9,{})}),e.jsx(De,{path:"customer-segmentation",element:e.jsx(E9,{})}),e.jsx(De,{path:"ai-box",element:e.jsx(P9,{})}),e.jsx(De,{path:"ai-personalization",element:e.jsx(R9,{})}),e.jsx(De,{path:"custom-audience",element:e.jsx(L9,{})}),e.jsx(De,{path:"cms",element:e.jsx(h9,{})}),e.jsx(De,{path:"static-pages",element:e.jsx(J8,{})}),e.jsx(De,{path:"community-management",element:e.jsx(K8,{})}),e.jsx(De,{path:"homepage-layout",element:e.jsx(X8,{})}),e.jsx(De,{path:"blog-requests",element:e.jsx(g9,{})}),e.jsx(De,{path:"video-manager",element:e.jsx(B9,{})}),e.jsx(De,{path:"cart-checkout",element:e.jsx(r9,{})}),e.jsx(De,{path:"forms",element:e.jsx(A8,{})}),e.jsx(De,{path:"form-builder",element:e.jsx(C9,{})}),e.jsx(De,{path:"form-submissions",element:e.jsx(_9,{})}),e.jsx(De,{path:"workflow-automation",element:e.jsx(T9,{})}),e.jsx(De,{path:"omni-channel",element:e.jsx(O9,{})}),e.jsx(De,{path:"api-manager",element:e.jsx(I9,{})}),e.jsx(De,{path:"marketplaces",element:e.jsx(ms,{role:"admin",children:e.jsx(V9,{})})}),e.jsx(De,{path:"facebook",element:e.jsx(_8,{})}),e.jsx(De,{path:"fb-shop",element:e.jsx(q9,{})}),e.jsx(De,{path:"store",element:e.jsx(T8,{})}),e.jsx(De,{path:"google",element:e.jsx(E8,{})}),e.jsx(De,{path:"pos",element:e.jsx(ms,{anyOf:["pos:read","pos:update"],children:e.jsx(G9,{})})}),e.jsx(De,{path:"settings",element:e.jsx(mS,{})}),e.jsx(De,{path:"system/alerts",element:e.jsx(ms,{role:"admin",children:e.jsx(c9,{})})}),e.jsx(De,{path:"system/staff",element:e.jsx(ms,{role:"admin",children:e.jsx(i9,{})})}),e.jsx(De,{path:"system/roles",element:e.jsx(ms,{role:"admin",children:e.jsx(l9,{})})}),e.jsx(De,{path:"system/audit-logs",element:e.jsx(ms,{role:"admin",children:e.jsx(o9,{})})}),e.jsx(De,{path:"account-security",element:e.jsx(z8,{})})]})}),e.jsx(De,{path:"*",element:e.jsx(jo,{to:"/admin/dashboard",replace:!0})})]})})})}const K9=Tk([{path:"/*",element:e.jsx(J9,{})}]);H0.createRoot(document.getElementById("root")).render(e.jsx(fx.StrictMode,{children:e.jsx(Ik,{router:K9})}));
