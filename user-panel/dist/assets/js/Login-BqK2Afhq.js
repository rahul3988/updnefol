import{u as e,j as t,a as s}from"./index-DHQYPLw0.js";import{r as a}from"./react-vendor-D-XgqoRR.js";import{P as l}from"./PhoneInput-BrvMkKu4.js";import{M as n,U as r,g as i,h as o,E as c,i as d}from"./ui-vendor-upD1L4Zc.js";import"./socket-vendor-CUkmNz_4.js";function u(){const[u,m]=a.useState(""),[x,p]=a.useState(""),[g,h]=a.useState(!1),[f,b]=a.useState(!1),[y,v]=a.useState(!1),[j,w]=a.useState(!1),[N,S]=a.useState(!1),[k,P]=a.useState(""),[C,T]=a.useState(0),[O,E]=a.useState(""),[q,A]=a.useState({name:"",email:"",password:"",confirmPassword:"",phone:"",address:{street:"",city:"",state:"",zip:""}}),[I,L]=a.useState("+91"),[z,W]=a.useState(!1),[D,F]=a.useState(""),{login:$,loginWithWhatsApp:M,signup:V,error:U}=e();return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white py-12 px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"max-w-md w-full space-y-8",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"mt-6 text-center text-3xl sm:text-4xl font-light tracking-[0.15em]",style:{color:"#1a1a1a",fontFamily:"var(--font-heading-family)",letterSpacing:"0.15em"},children:f?"Create your account":"Sign in to your account"}),t.jsx("p",{className:"mt-2 text-center text-sm font-light tracking-wide",style:{color:"#666",letterSpacing:"0.05em"},children:f?"Join Nefol and start your beauty journey":"Welcome back to Nefol"})]}),t.jsxs("div",{className:"mt-8 space-y-6",children:[t.jsxs("div",{className:"flex rounded-lg bg-slate-100 p-1",children:[t.jsx("button",{onClick:()=>b(!1),className:"flex-1 py-2 px-4 rounded-md text-xs font-light transition-all duration-300 tracking-[0.1em] uppercase "+(f?"text-slate-600 hover:text-slate-900":"bg-white text-slate-900 shadow-sm"),style:{letterSpacing:"0.1em"},children:"Sign In"}),t.jsx("button",{onClick:()=>b(!0),className:"flex-1 py-2 px-4 rounded-md text-xs font-light transition-all duration-300 tracking-[0.1em] uppercase "+(f?"bg-white text-slate-900 shadow-sm":"text-slate-600 hover:text-slate-900"),style:{letterSpacing:"0.1em"},children:"Sign Up"})]}),f?t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),F(""),y)if(N){if(!k||6!==k.length)return void F("Please enter a valid 6-digit OTP");if(!q.name)return void F("Please enter your name");W(!0);try{const e=`${I}${q.phone.replace(/\D/g,"")}`,t=await s.verifyOTPSignup({phone:e,otp:k,name:q.name,email:void 0,address:{street:"",city:"",state:"",zip:""}});t.token&&t.user?(localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),window.location.hash="#/user/"):F("Signup failed. Please try again.")}catch(t){F((null==t?void 0:t.message)||"Invalid OTP or signup failed. Please try again.")}finally{W(!1)}}else{if(!q.phone)return void F("Please enter your phone number");W(!0);try{const e=I.replace(/[^0-9]/g,""),t=`${e}${q.phone.replace(/\D/g,"")}`;await s.sendOTP(t),S(!0),T(600);const a=setInterval(()=>{T(e=>e<=1?(clearInterval(a),0):e-1)},1e3)}catch(t){F((null==t?void 0:t.message)||"Failed to send OTP. Please try again.")}finally{W(!1)}}else{if(q.password!==q.confirmPassword)return void F("Passwords do not match");W(!0);try{await V({name:q.name,email:q.email,password:q.password,phone:"",address:{street:"",city:"",state:"",zip:""}})?window.location.hash="#/user/":F(U||"Signup failed")}catch(t){F("Signup failed. Please try again.")}finally{W(!1)}}},className:"space-y-6",children:[t.jsxs("div",{className:"flex rounded-lg bg-slate-100 p-1 mb-4",children:[t.jsx("button",{type:"button",onClick:()=>{v(!1),S(!1),P(""),F("")},className:"flex-1 py-2 px-4 rounded-md text-xs font-light transition-all duration-300 tracking-[0.1em] uppercase "+(y?"text-slate-600 hover:text-slate-900":"bg-white text-slate-900 shadow-sm"),style:{letterSpacing:"0.1em"},children:"Email Signup"}),t.jsxs("button",{type:"button",onClick:()=>{v(!0),S(!1),P(""),F("")},className:"flex-1 py-2 px-4 rounded-md text-xs font-light transition-all duration-300 tracking-[0.1em] uppercase "+(y?"bg-white text-slate-900 shadow-sm":"text-slate-600 hover:text-slate-900"),style:{letterSpacing:"0.1em"},children:[t.jsx(n,{className:"inline-block w-3 h-3 mr-1"}),"WhatsApp OTP"]})]}),y&&t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3 mb-4",children:t.jsx("p",{className:"text-xs font-light text-blue-800",style:{letterSpacing:"0.02em"},children:N?"Enter the 6-digit OTP sent to your WhatsApp number":"Sign up quickly with WhatsApp OTP verification. No password required!"})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-light text-slate-700 mb-2 uppercase tracking-[0.1em]",style:{letterSpacing:"0.1em"},children:"Full Name"}),t.jsxs("div",{className:"relative",children:[t.jsx(r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400 z-10 pointer-events-none"}),t.jsx("input",{type:"text",required:!0,value:q.name,onChange:e=>A(t=>({...t,name:e.target.value})),className:"pl-11 w-full rounded-md border border-slate-200 bg-white pr-3 py-2.5 text-sm font-light text-slate-900 focus:outline-none focus:ring-1 focus:ring-slate-900 focus:border-slate-900 transition-all",style:{letterSpacing:"0.02em"},placeholder:"Enter your full name"})]})]}),!y&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-light text-slate-700 mb-2 uppercase tracking-[0.1em]",style:{letterSpacing:"0.1em"},children:"Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400 z-10 pointer-events-none"}),t.jsx("input",{type:"email",required:!0,value:q.email,onChange:e=>A(t=>({...t,email:e.target.value})),className:"pl-11 w-full rounded-md border border-slate-200 bg-white pr-3 py-2.5 text-sm font-light text-slate-900 focus:outline-none focus:ring-1 focus:ring-slate-900 focus:border-slate-900 transition-all",style:{letterSpacing:"0.02em"},placeholder:"Enter your email"})]})]}),y&&t.jsx("div",{children:t.jsx(l,{value:q.phone,onChange:e=>A(t=>({...t,phone:e})),onCountryCodeChange:L,defaultCountry:I,placeholder:"Enter your phone number",required:!0,showLabel:!0,label:"Phone Number",disabled:N})}),y&&N&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-light text-slate-700 mb-2 uppercase tracking-[0.1em]",style:{letterSpacing:"0.1em"},children:"Enter OTP"}),t.jsx("div",{className:"relative mb-3",children:t.jsx("input",{type:"text",required:!0,maxLength:6,value:k,onChange:e=>{const t=e.target.value.replace(/\D/g,"");P(t),F("")},className:"w-full rounded-md border border-slate-200 bg-white px-3 py-2.5 text-sm font-light text-slate-900 focus:outline-none focus:ring-1 focus:ring-slate-900 focus:border-slate-900 transition-all text-center text-2xl tracking-widest",style:{letterSpacing:"0.1em"},placeholder:"000000"})}),C>0&&t.jsxs("p",{className:"text-xs text-slate-500 mb-2 text-center",children:["OTP expires in ",Math.floor(C/60),":",(C%60).toString().padStart(2,"0")]}),t.jsx("div",{className:"text-center",children:t.jsx("button",{type:"button",onClick:()=>{S(!1),P(""),T(0),F("")},className:"text-xs text-slate-600 hover:text-slate-900 underline",children:"Resend OTP"})})]}),!y&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-light text-slate-700 mb-2 uppercase tracking-[0.1em]",style:{letterSpacing:"0.1em"},children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx(o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400 z-10 pointer-events-none"}),t.jsx("input",{type:g?"text":"password",required:!0,value:q.password,onChange:e=>A(t=>({...t,password:e.target.value})),className:"pl-11 pr-11 w-full rounded-md border border-slate-200 bg-white py-2.5 text-sm font-light text-slate-900 focus:outline-none focus:ring-1 focus:ring-slate-900 focus:border-slate-900 transition-all",style:{letterSpacing:"0.02em"},placeholder:"Create a password"}),t.jsx("button",{type:"button",onClick:()=>h(!g),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors z-10",children:g?t.jsx(c,{className:"h-5 w-5"}):t.jsx(d,{className:"h-5 w-5"})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-light text-slate-700 mb-2 uppercase tracking-[0.1em]",style:{letterSpacing:"0.1em"},children:"Confirm Password"}),t.jsxs("div",{className:"relative",children:[t.jsx(o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400 z-10 pointer-events-none"}),t.jsx("input",{type:"password",required:!0,value:q.confirmPassword,onChange:e=>A(t=>({...t,confirmPassword:e.target.value})),className:"pl-11 w-full rounded-md border border-slate-200 bg-white pr-3 py-2.5 text-sm font-light text-slate-900 focus:outline-none focus:ring-1 focus:ring-slate-900 focus:border-slate-900 transition-all",style:{letterSpacing:"0.02em"},placeholder:"Confirm your password"})]})]})]}),D&&t.jsx("div",{className:"text-slate-600 bg-slate-50 p-3 rounded-md text-sm font-light",style:{letterSpacing:"0.02em"},children:D}),t.jsx("button",{type:"submit",disabled:z,className:"w-full flex justify-center py-3 px-6 border border-transparent text-xs font-light tracking-[0.15em] uppercase text-white transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"rgb(75,151,201)",letterSpacing:"0.15em"},onMouseEnter:e=>{z||(e.currentTarget.style.backgroundColor="rgb(60,120,160)")},onMouseLeave:e=>{z||(e.currentTarget.style.backgroundColor="rgb(75,151,201)")},children:z?y&&!N?"Sending OTP...":y&&N?"Verifying...":"Creating Account...":y&&!N?"Send OTP via WhatsApp":y&&N?"Verify OTP & Sign Up":"Create Account"})]}):t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),F(""),W(!0),j)if(N){if(!k||6!==k.length)return F("Please enter a valid 6-digit OTP"),void W(!1);try{const e=`${I}${O.replace(/\D/g,"")}`;await M(e,k)?window.location.hash="#/user/":F(U||"Login failed")}catch(t){F((null==t?void 0:t.message)||"Invalid OTP or login failed. Please try again.")}finally{W(!1)}}else{if(!O)return F("Please enter your phone number"),void W(!1);try{const e=I.replace(/[^0-9]/g,""),t=`${e}${O.replace(/\D/g,"")}`;await s.sendOTPLogin(t),S(!0),T(600);const a=setInterval(()=>{T(e=>e<=1?(clearInterval(a),0):e-1)},1e3)}catch(t){F((null==t?void 0:t.message)||"Failed to send OTP. Please try again.")}finally{W(!1)}}else try{await $(u,x)?window.location.hash="#/user/":F(U||"Login failed")}catch(t){F("Login failed. Please try again.")}finally{W(!1)}},className:"space-y-6",children:[t.jsxs("div",{className:"flex rounded-lg bg-slate-100 p-1 mb-4",children:[t.jsx("button",{type:"button",onClick:()=>{w(!1),S(!1),P(""),E(""),F("")},className:"flex-1 py-2 px-4 rounded-md text-xs font-light transition-all duration-300 tracking-[0.1em] uppercase "+(j?"text-slate-600 hover:text-slate-900":"bg-white text-slate-900 shadow-sm"),style:{letterSpacing:"0.1em"},children:"Email Login"}),t.jsxs("button",{type:"button",onClick:()=>{w(!0),S(!1),P(""),m(""),p(""),F("")},className:"flex-1 py-2 px-4 rounded-md text-xs font-light transition-all duration-300 tracking-[0.1em] uppercase "+(j?"bg-white text-slate-900 shadow-sm":"text-slate-600 hover:text-slate-900"),style:{letterSpacing:"0.1em"},children:[t.jsx(n,{className:"inline-block w-3 h-3 mr-1"}),"WhatsApp Login"]})]}),j&&t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3 mb-4",children:t.jsx("p",{className:"text-xs font-light text-blue-800",style:{letterSpacing:"0.02em"},children:N?"Enter the 6-digit OTP sent to your WhatsApp number":"Login quickly with WhatsApp OTP verification. No password required!"})}),j?t.jsx(t.Fragment,{children:N?t.jsx(t.Fragment,{children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-light text-slate-700 mb-2 uppercase tracking-[0.1em]",style:{letterSpacing:"0.1em"},children:"Enter OTP"}),t.jsx("div",{className:"relative mb-3",children:t.jsx("input",{type:"text",required:!0,maxLength:6,value:k,onChange:e=>{const t=e.target.value.replace(/\D/g,"");P(t),F("")},className:"w-full rounded-md border border-slate-200 bg-white px-3 py-2.5 text-sm font-light text-slate-900 focus:outline-none focus:ring-1 focus:ring-slate-900 focus:border-slate-900 transition-all text-center text-2xl tracking-widest",style:{letterSpacing:"0.1em"},placeholder:"000000"})}),C>0&&t.jsxs("p",{className:"text-xs text-slate-500 mb-2 text-center",children:["OTP expires in ",Math.floor(C/60),":",(C%60).toString().padStart(2,"0")]}),t.jsx("div",{className:"text-center",children:t.jsx("button",{type:"button",onClick:()=>{S(!1),P(""),T(0),F("")},className:"text-xs text-slate-600 hover:text-slate-900 underline",children:"Resend OTP"})})]})}):t.jsx("div",{children:t.jsx(l,{value:O,onChange:e=>E(e),onCountryCodeChange:L,defaultCountry:I,placeholder:"Enter your phone number",required:!0,showLabel:!0,label:"Phone Number"})})}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-light text-slate-700 mb-2 uppercase tracking-[0.1em]",style:{letterSpacing:"0.1em"},children:"Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400 z-10 pointer-events-none"}),t.jsx("input",{type:"email",required:!0,value:u,onChange:e=>m(e.target.value),className:"pl-11 w-full rounded-md border border-slate-200 bg-white pr-3 py-2.5 text-sm font-light text-slate-900 focus:outline-none focus:ring-1 focus:ring-slate-900 focus:border-slate-900 transition-all",style:{letterSpacing:"0.02em"},placeholder:"Enter your email"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-light text-slate-700 mb-2 uppercase tracking-[0.1em]",style:{letterSpacing:"0.1em"},children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx(o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400 z-10 pointer-events-none"}),t.jsx("input",{type:g?"text":"password",required:!0,value:x,onChange:e=>p(e.target.value),className:"pl-11 pr-11 w-full rounded-md border border-slate-200 bg-white py-2.5 text-sm font-light text-slate-900 focus:outline-none focus:ring-1 focus:ring-slate-900 focus:border-slate-900 transition-all",style:{letterSpacing:"0.02em"},placeholder:"Enter your password"}),t.jsx("button",{type:"button",onClick:()=>h(!g),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors z-10",children:g?t.jsx(c,{className:"h-5 w-5"}):t.jsx(d,{className:"h-5 w-5"})})]}),t.jsx("div",{className:"mt-3 flex justify-end",children:t.jsx("button",{type:"button",onClick:()=>{window.location.hash="#/user/reset-password"},className:"text-xs font-light text-slate-600 hover:text-slate-900 underline tracking-[0.08em]",style:{letterSpacing:"0.08em"},children:"Forgot password?"})})]})]}),D&&t.jsx("div",{className:"text-slate-600 bg-slate-50 p-3 rounded-md text-sm font-light",style:{letterSpacing:"0.02em"},children:D}),t.jsx("button",{type:"submit",disabled:z,className:"w-full flex justify-center py-3 px-6 border border-transparent text-xs font-light tracking-[0.15em] uppercase text-white transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"rgb(75,151,201)",letterSpacing:"0.15em"},onMouseEnter:e=>{z||(e.currentTarget.style.backgroundColor="rgb(60,120,160)")},onMouseLeave:e=>{z||(e.currentTarget.style.backgroundColor="rgb(75,151,201)")},children:z?j&&!N?"Sending OTP...":j&&N?"Verifying...":"Signing In...":j&&!N?"Send OTP via WhatsApp":j&&N?"Verify OTP & Sign In":"Sign In"})]}),t.jsx("div",{className:"text-center",children:t.jsxs("p",{className:"text-sm font-light text-slate-600",style:{letterSpacing:"0.02em"},children:[f?"Already have an account?":"Don't have an account?"," ",t.jsx("button",{onClick:()=>b(!f),className:"font-light text-slate-900 hover:underline transition-all",style:{letterSpacing:"0.05em"},children:f?"Sign in":"Sign up"})]})})]})]})})}export{u as default};
