import{g as e,j as t}from"./index-isYMjZiv.js";import{r as s}from"./react-vendor-D-XgqoRR.js";import{s as a,a7 as r,O as l,D as n,an as d,at as o,a0 as i,T as c}from"./ui-vendor-9UCGEfu4.js";import"./socket-vendor-CUkmNz_4.js";function x(){const[x,m]=s.useState([]),[h,p]=s.useState(null),[g,u]=s.useState(!0),[b,j]=s.useState("30days"),[f,N]=s.useState(null);s.useEffect(()=>{k()},[]);const k=async()=>{var t,s,a,r;try{const l=localStorage.getItem("token");if(!l)return m([]),void p(null);const n=e(),d=await fetch(`${n}/api/affiliate/reports`,{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});if(d.ok){const e=await d.json();m(e.reports||[]);const l=(null==(t=e.reports)?void 0:t.length)||0,n=(null==(s=e.reports)?void 0:s.filter(e=>{const t=new Date(e.lastGenerated),s=new Date;return t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()}).length)||0,o=(null==(a=e.reports)?void 0:a.reduce((e,t)=>e+(t.downloads||0),0))||0,i=(null==(r=e.reports)?void 0:r.length)>0?e.reports[0].lastGenerated:null;p({totalReports:l,thisMonthReports:n,totalDownloads:o,lastReportDate:i})}else m([]),p(null)}catch(l){m([]),p(null)}finally{u(!1)}},v=async e=>{N(e),setTimeout(()=>{N(null),alert(`${e} report generated successfully!`)},2e3)},y=e=>{switch(e){case"earnings":return t.jsx(o,{className:"h-6 w-6 text-green-600"});case"referrals":return t.jsx(i,{className:"h-6 w-6 text-blue-600"});case"performance":return t.jsx(c,{className:"h-6 w-6 text-purple-600"});case"monthly":return t.jsx(l,{className:"h-6 w-6 text-orange-600"});default:return t.jsx(r,{className:"h-6 w-6 text-gray-600"})}};return g?t.jsx("main",{className:"py-10 dark:bg-slate-900 min-h-screen flex items-center justify-center"}):t.jsx("main",{className:"py-10 dark:bg-slate-900 min-h-screen",children:t.jsxs("div",{className:"mx-auto max-w-6xl px-4",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("button",{onClick:()=>window.location.hash="#/user/affiliate-partner",className:"flex items-center gap-2 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100 transition-colors mb-4",children:[t.jsx(a,{className:"h-4 w-4"}),"Back to Affiliate Dashboard"]}),t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Reports & Analytics"}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Generate and download detailed reports about your affiliate performance"})]})})]}),h&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[t.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Total Reports"}),t.jsx("p",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:h.totalReports})]}),t.jsx(r,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})]})}),t.jsx("div",{className:"bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"This Month"}),t.jsx("p",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:h.thisMonthReports})]}),t.jsx(l,{className:"h-8 w-8 text-green-600 dark:text-green-400"})]})}),t.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400 font-medium",children:"Total Downloads"}),t.jsx("p",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:h.totalDownloads})]}),t.jsx(n,{className:"h-8 w-8 text-purple-600 dark:text-purple-400"})]})}),t.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-orange-600 dark:text-orange-400 font-medium",children:"Last Report"}),t.jsx("p",{className:"text-lg font-bold text-orange-700 dark:text-orange-300",children:new Date(h.lastReportDate).toLocaleDateString()})]}),t.jsx(d,{className:"h-8 w-8 text-orange-600 dark:text-orange-400"})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-6 mb-8",children:[t.jsx("h2",{className:"text-xl font-semibold dark:text-slate-100 mb-4",children:"Generate New Report"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("button",{onClick:()=>v("earnings"),disabled:"earnings"===f,className:"flex flex-col items-center p-4 border border-slate-200 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors disabled:opacity-50",children:[t.jsx(o,{className:"h-8 w-8 text-green-600 mb-2"}),t.jsx("span",{className:"font-medium dark:text-slate-100",children:"Earnings Report"}),t.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Commission details"}),"earnings"===f&&t.jsx("div",{className:"mt-2"})]}),t.jsxs("button",{onClick:()=>v("referrals"),disabled:"referrals"===f,className:"flex flex-col items-center p-4 border border-slate-200 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors disabled:opacity-50",children:[t.jsx(i,{className:"h-8 w-8 text-blue-600 mb-2"}),t.jsx("span",{className:"font-medium dark:text-slate-100",children:"Referral Report"}),t.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Referral analytics"}),"referrals"===f&&t.jsx("div",{className:"mt-2"})]}),t.jsxs("button",{onClick:()=>v("performance"),disabled:"performance"===f,className:"flex flex-col items-center p-4 border border-slate-200 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors disabled:opacity-50",children:[t.jsx(c,{className:"h-8 w-8 text-purple-600 mb-2"}),t.jsx("span",{className:"font-medium dark:text-slate-100",children:"Performance Report"}),t.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Performance metrics"}),"performance"===f&&t.jsx("div",{className:"mt-2"})]}),t.jsxs("button",{onClick:()=>v("monthly"),disabled:"monthly"===f,className:"flex flex-col items-center p-4 border border-slate-200 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors disabled:opacity-50",children:[t.jsx(l,{className:"h-8 w-8 text-orange-600 mb-2"}),t.jsx("span",{className:"font-medium dark:text-slate-100",children:"Monthly Summary"}),t.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Monthly overview"}),"monthly"===f&&t.jsx("div",{className:"mt-2"})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold dark:text-slate-100",children:"Available Reports"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Period:"}),t.jsxs("select",{value:b,onChange:e=>j(e.target.value),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 rounded-lg text-sm dark:bg-slate-700 dark:text-slate-100",children:[t.jsx("option",{value:"7days",children:"Last 7 days"}),t.jsx("option",{value:"30days",children:"Last 30 days"}),t.jsx("option",{value:"90days",children:"Last 90 days"}),t.jsx("option",{value:"1year",children:"Last year"})]})]})]}),t.jsx("div",{className:"space-y-4",children:x.map(e=>t.jsxs("div",{className:"flex items-center justify-between p-4 border border-slate-200 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[y(e.type),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold dark:text-slate-100",children:e.name}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:e.description}),t.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[t.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:["Generated: ",new Date(e.lastGenerated).toLocaleDateString()]}),t.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:["Size: ",e.size]}),t.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:["Format: ",e.format]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"px-2 py-1 text-xs rounded-full "+("PDF"===e.format?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"CSV"===e.format?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"),children:e.format}),t.jsxs("button",{onClick:()=>{return e.id,t=e.name,void alert(`Downloading ${t}...`);var t},className:"flex items-center gap-2 px-3 py-1 text-white rounded-lg transition-colors text-sm",style:{backgroundColor:"rgb(75,151,201)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgb(60,120,160)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgb(75,151,201)",children:[t.jsx(n,{className:"h-3 w-3"}),"Download"]})]})]},e.id))}),0===x.length&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(r,{className:"h-16 w-16 text-slate-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold dark:text-slate-100 mb-2",children:"No Reports Available"}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Generate your first report to get started"})]})]})]})})}export{x as default};
