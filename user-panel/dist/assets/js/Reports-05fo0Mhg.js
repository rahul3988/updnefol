import{j as e}from"./index-BdN9D1iE.js";import{r as t}from"./react-vendor-D-XgqoRR.js";import{r as s,a3 as a,I as r,J as l,ak as n,aq as d,Y as o,T as i}from"./ui-vendor-BjTBABCK.js";import"./socket-vendor-CUkmNz_4.js";function c(){const[c,x]=t.useState([]),[m,h]=t.useState(null),[p,u]=t.useState(!0),[g,b]=t.useState("30days"),[j,f]=t.useState(null);t.useEffect(()=>{N()},[]);const N=async()=>{var e,t,s,a;try{const r=localStorage.getItem("token");if(!r)return x([]),void h(null);const l=await fetch("http://192.168.1.36:2000/api/affiliate/reports",{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(l.ok){const r=await l.json();x(r.reports||[]);const n=(null==(e=r.reports)?void 0:e.length)||0,d=(null==(t=r.reports)?void 0:t.filter(e=>{const t=new Date(e.lastGenerated),s=new Date;return t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()}).length)||0,o=(null==(s=r.reports)?void 0:s.reduce((e,t)=>e+(t.downloads||0),0))||0,i=(null==(a=r.reports)?void 0:a.length)>0?r.reports[0].lastGenerated:null;h({totalReports:n,thisMonthReports:d,totalDownloads:o,lastReportDate:i})}else x([]),h(null)}catch(r){x([]),h(null)}finally{u(!1)}},k=async e=>{f(e),setTimeout(()=>{f(null),alert(`${e} report generated successfully!`)},2e3)},v=t=>{switch(t){case"earnings":return e.jsx(d,{className:"h-6 w-6 text-green-600"});case"referrals":return e.jsx(o,{className:"h-6 w-6 text-blue-600"});case"performance":return e.jsx(i,{className:"h-6 w-6 text-purple-600"});case"monthly":return e.jsx(r,{className:"h-6 w-6 text-orange-600"});default:return e.jsx(a,{className:"h-6 w-6 text-gray-600"})}};return p?e.jsx("main",{className:"py-10 dark:bg-slate-900 min-h-screen flex items-center justify-center"}):e.jsx("main",{className:"py-10 dark:bg-slate-900 min-h-screen",children:e.jsxs("div",{className:"mx-auto max-w-6xl px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("button",{onClick:()=>window.location.hash="#/user/affiliate-partner",className:"flex items-center gap-2 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100 transition-colors mb-4",children:[e.jsx(s,{className:"h-4 w-4"}),"Back to Affiliate Dashboard"]}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Reports & Analytics"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Generate and download detailed reports about your affiliate performance"})]})})]}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Total Reports"}),e.jsx("p",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:m.totalReports})]}),e.jsx(a,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"This Month"}),e.jsx("p",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:m.thisMonthReports})]}),e.jsx(r,{className:"h-8 w-8 text-green-600 dark:text-green-400"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400 font-medium",children:"Total Downloads"}),e.jsx("p",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:m.totalDownloads})]}),e.jsx(l,{className:"h-8 w-8 text-purple-600 dark:text-purple-400"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-orange-600 dark:text-orange-400 font-medium",children:"Last Report"}),e.jsx("p",{className:"text-lg font-bold text-orange-700 dark:text-orange-300",children:new Date(m.lastReportDate).toLocaleDateString()})]}),e.jsx(n,{className:"h-8 w-8 text-orange-600 dark:text-orange-400"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold dark:text-slate-100 mb-4",children:"Generate New Report"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:()=>k("earnings"),disabled:"earnings"===j,className:"flex flex-col items-center p-4 border border-slate-200 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors disabled:opacity-50",children:[e.jsx(d,{className:"h-8 w-8 text-green-600 mb-2"}),e.jsx("span",{className:"font-medium dark:text-slate-100",children:"Earnings Report"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Commission details"}),"earnings"===j&&e.jsx("div",{className:"mt-2"})]}),e.jsxs("button",{onClick:()=>k("referrals"),disabled:"referrals"===j,className:"flex flex-col items-center p-4 border border-slate-200 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors disabled:opacity-50",children:[e.jsx(o,{className:"h-8 w-8 text-blue-600 mb-2"}),e.jsx("span",{className:"font-medium dark:text-slate-100",children:"Referral Report"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Referral analytics"}),"referrals"===j&&e.jsx("div",{className:"mt-2"})]}),e.jsxs("button",{onClick:()=>k("performance"),disabled:"performance"===j,className:"flex flex-col items-center p-4 border border-slate-200 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors disabled:opacity-50",children:[e.jsx(i,{className:"h-8 w-8 text-purple-600 mb-2"}),e.jsx("span",{className:"font-medium dark:text-slate-100",children:"Performance Report"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Performance metrics"}),"performance"===j&&e.jsx("div",{className:"mt-2"})]}),e.jsxs("button",{onClick:()=>k("monthly"),disabled:"monthly"===j,className:"flex flex-col items-center p-4 border border-slate-200 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors disabled:opacity-50",children:[e.jsx(r,{className:"h-8 w-8 text-orange-600 mb-2"}),e.jsx("span",{className:"font-medium dark:text-slate-100",children:"Monthly Summary"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Monthly overview"}),"monthly"===j&&e.jsx("div",{className:"mt-2"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold dark:text-slate-100",children:"Available Reports"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Period:"}),e.jsxs("select",{value:g,onChange:e=>b(e.target.value),className:"px-3 py-1 border border-slate-300 dark:border-slate-600 rounded-lg text-sm dark:bg-slate-700 dark:text-slate-100",children:[e.jsx("option",{value:"7days",children:"Last 7 days"}),e.jsx("option",{value:"30days",children:"Last 30 days"}),e.jsx("option",{value:"90days",children:"Last 90 days"}),e.jsx("option",{value:"1year",children:"Last year"})]})]})]}),e.jsx("div",{className:"space-y-4",children:c.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-slate-200 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[v(t.type),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold dark:text-slate-100",children:t.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:t.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:["Generated: ",new Date(t.lastGenerated).toLocaleDateString()]}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:["Size: ",t.size]}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:["Format: ",t.format]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded-full "+("PDF"===t.format?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"CSV"===t.format?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"),children:t.format}),e.jsxs("button",{onClick:()=>{return t.id,e=t.name,void alert(`Downloading ${e}...`);var e},className:"flex items-center gap-2 px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(l,{className:"h-3 w-3"}),"Download"]})]})]},t.id))}),0===c.length&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(a,{className:"h-16 w-16 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold dark:text-slate-100 mb-2",children:"No Reports Available"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Generate your first report to get started"})]})]})]})})}export{c as default};
