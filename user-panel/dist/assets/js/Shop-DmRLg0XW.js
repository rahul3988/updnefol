import{j as e,d as t,c as a,u as s,g as l}from"./index-9SM8fWk5.js";import{u as r}from"./useProducts-p8wASSBN.js";import{r as i}from"./react-vendor-D-XgqoRR.js";import{P as o}from"./PricingDisplay-Cen2RbhY.js";import{g as n,a as c,h as d}from"./product_reviews-C18bXWrN.js";import{u,V as m}from"./VerifiedBadge-Bn6zIeWE.js";import"./socket-vendor-CUkmNz_4.js";import"./ui-vendor-upD1L4Zc.js";const x={"fade-up":"animate-fade-in-up","fade-down":"animate-fade-in-down","fade-left":"animate-fade-in-left","fade-right":"animate-fade-in-right",fade:"animate-fade-in",zoom:"animate-zoom-in"};function h({children:t,threshold:a=.1,rootMargin:s="0px",triggerOnce:l=!0,delay:r=0,className:o="",animationType:n="fade-up"}){const{elementRef:c,isVisible:d}=function({threshold:e=.1,rootMargin:t="0px",triggerOnce:a=!0,delay:s=0}={}){const[l,r]=i.useState(!1),o=i.useRef(null);return i.useEffect(()=>{const l=o.current;if(!l)return;const i=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?(s>0?setTimeout(()=>{r(!0)},s):r(!0),a&&i.disconnect()):a||r(!1)})},{threshold:e,rootMargin:t});return i.observe(l),()=>{i.disconnect()}},[e,t,a,s]),{elementRef:o,isVisible:l,className:l?"animate-fade-in-up":"opacity-0 translate-y-8"}}({threshold:a,rootMargin:s,triggerOnce:l,delay:r}),u=d?x[n]:"opacity-0";return e.jsx("div",{ref:c,className:`transition-all duration-700 ease-out ${u} ${o}`,children:t})}function p(){const{items:x,loading:p,error:g}=r(),f=t(),{addToWishlist:v}=a(),{isAuthenticated:b}=s(),y=i.useMemo(()=>x.map(e=>e.slug||"").filter(e=>e),[x]),{stats:j}=u(y),w=null==f?void 0:f.addItem,[N,k]=i.useState([]);i.useEffect(()=>{P()},[]);const P=async()=>{try{const e=l(),t=await fetch(`${e}/api/products-csv`);if(t.ok){const e=await t.json();k(e)}}catch(e){}},S=e=>{const t=(e.category||"").toLowerCase(),a=(e.title||"").toLowerCase();return t.includes("combo")||"combo pack"===t||a.includes("combo")?"combo":t.includes("face")||"facecare"===t||a.includes("face")?"face":t.includes("hair")||"haircare"===t||a.includes("hair")?"hair":t.includes("body")||a.includes("body")?"body":"other"},C=e=>{var t,a,s,l,r,i,o;const n=null==(t=null==e?void 0:e.details)?void 0:t.websitePrice,c=null==(a=null==e?void 0:e.details)?void 0:a.mrp,d=(null==(s=null==e?void 0:e.csvProduct)?void 0:s["website price"])||(null==(l=null==e?void 0:e.csvProduct)?void 0:l["Website Price"]),u=(null==(r=null==e?void 0:e.csvProduct)?void 0:r["MRP (₹)"])||(null==(i=null==e?void 0:e.csvProduct)?void 0:i["MRP "])||(null==(o=null==e?void 0:e.csvProduct)?void 0:o.MRP),m=n||d||c||u||e.price||"0";return parseFloat(m.toString().replace(/[₹,]/g,""))||0},M=[...x].sort((e,t)=>{const a={face:1,hair:2,body:3,combo:4,other:5},s=S(e),l=S(t),r=(a[s]||5)-(a[l]||5);if(0!==r)return r;if("combo"===s&&"combo"===l){const a=C(e);return C(t)-a}return 0});return e.jsx("main",{className:"min-h-screen py-12 sm:py-16 md:py-20 overflow-x-hidden bg-white",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsx(h,{animationType:"fade-up",delay:0,children:e.jsxs("div",{className:"text-center mb-12 sm:mb-16 md:mb-20",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-light mb-6 tracking-[0.15em]",style:{color:"#1a1a1a",fontFamily:"var(--font-heading-family)",letterSpacing:"0.15em"},"data-aos":"fade-up",children:"SHOP"}),e.jsx("p",{className:"text-sm sm:text-base font-light max-w-2xl mx-auto px-4 tracking-wide",style:{color:"#666",letterSpacing:"0.05em"},"data-aos":"fade-up","data-aos-delay":"100",children:"Discover our curated collection of premium skincare and haircare essentials, crafted with nature's finest ingredients."})]})}),p&&e.jsx("div",{className:"text-center py-20",children:e.jsx("p",{className:"text-sm font-light tracking-wide",style:{color:"#999",letterSpacing:"0.1em"},children:"Loading products..."})}),g&&e.jsx("div",{className:"text-center py-20",children:e.jsx("p",{className:"text-sm font-light text-slate-600",children:g})}),M.length>0&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 sm:gap-10 md:gap-12 auto-rows-fr",children:M.map((t,a)=>e.jsx(h,{animationType:"fade-up",delay:a%4*100,children:e.jsxs("article",{className:"bg-white group overflow-hidden flex flex-col h-full transition-all duration-500","data-aos":"fade-up","data-aos-delay":a%4*100,children:[e.jsxs("div",{className:"relative overflow-hidden aspect-square mb-6 rounded-xl",children:[e.jsx("a",{href:`#/user/product/${t.slug}`,children:t.listImage&&e.jsx("img",{src:t.listImage,alt:t.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105 rounded-xl",loading:"lazy",style:{aspectRatio:"1 / 1"},onError:e=>{e.currentTarget.style.display="none"}})}),e.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10",children:e.jsx("button",{onClick:()=>{b?t.id&&(null==v||v(t.id)):window.location.hash="#/user/login"},className:"w-9 h-9 bg-white/95 backdrop-blur-sm hover:bg-white rounded-full flex items-center justify-center transition-all duration-300",style:{boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:e.jsx("svg",{className:"w-4 h-4 text-slate-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})})]}),e.jsxs("div",{className:"flex flex-col flex-grow px-2",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold tracking-wide mb-0.5 line-clamp-2 overflow-hidden",style:{color:"#1a1a1a",letterSpacing:"0.05em",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",maxHeight:"3.5rem"},children:t.title}),(()=>{var a;const s=N.find(e=>{var a;return(e.Slug||(null==(a=e["Product Name"])?void 0:a.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""))||"")===t.slug}),l=(null==s?void 0:s["Subtitle / Tagline"])||(t.details&&"object"==typeof t.details?t.details.subtitle:null)||(t.details&&"string"==typeof t.details?null==(a=JSON.parse(t.details))?void 0:a.subtitle:null);return l?e.jsx("p",{className:"text-sm text-gray-600 mb-1 line-clamp-1",style:{color:"#666"},children:l}):null})(),(()=>{const a=t.slug||"",s=j[a],l=(null==s?void 0:s.average_rating)>0?s.average_rating:n(a),r=(null==s?void 0:s.review_count)>0?s.review_count:c(a),i=(null==s?void 0:s.verified_count)>0||d(a);return l>0?e.jsxs("div",{className:"flex items-center mb-1.5",children:[e.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((t,a)=>{const s=a<Math.round(l);return e.jsx("svg",{className:"w-4 h-4 "+(s?"text-yellow-400":"text-gray-300"),fill:s?"currentColor":"none",stroke:s?"none":"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},a)})}),e.jsxs("span",{className:"text-xs sm:text-sm ml-2 font-light",style:{color:"#999"},children:[l.toFixed(1)," (",r,")"]}),i&&e.jsx(m,{size:"sm",className:"ml-1.5"})]}):e.jsx("div",{className:"mb-1.5"})})(),e.jsxs("div",{className:"mt-auto pt-0.5",children:[e.jsx("div",{className:"flex items-center justify-between mb-1.5",children:e.jsx("div",{className:"flex flex-col",children:e.jsx(o,{product:t,csvProduct:t.csvProduct})})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{if(b){if(w)try{w(t)}catch(e){}}else window.location.hash="#/user/login"},className:"flex-1 px-6 py-3 text-white text-xs font-light transition-all duration-300 tracking-[0.15em] uppercase border border-transparent hover:border-slate-900 rounded-xl",style:{backgroundColor:"rgb(75,151,201)",color:"#FFFFFF",minHeight:"44px",letterSpacing:"0.15em"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgb(60,120,160)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgb(75,151,201)"},children:"Add to Cart"}),e.jsx("a",{href:`#/user/product/${t.slug}`,className:"flex-1 px-6 py-3 text-slate-900 text-xs font-light transition-all duration-300 tracking-[0.15em] uppercase text-center flex items-center justify-center border border-slate-900 hover:bg-slate-900 hover:text-white rounded-xl",style:{minHeight:"44px",letterSpacing:"0.15em"},children:"View"})]})]})]})]})},t.slug))})]})})}export{p as default};
