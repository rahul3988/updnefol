import{d as e,p as s,h as t,j as r,i as l}from"./index-CL0St33i.js";import{r as a}from"./react-vendor-D-XgqoRR.js";import{P as i}from"./PricingDisplay-C4vMV2On.js";import{A as n}from"./AuthGuard-AJQqbntg.js";import{d as c,P as o,z as d,L as m}from"./ui-vendor-CK_V9qH3.js";import"./socket-vendor-CUkmNz_4.js";function x(){const x=e(),u=(null==x?void 0:x.items)||[],h=null==x?void 0:x.removeItem,p=null==x?void 0:x.updateQuantity,g=null==x?void 0:x.clear,j=(null==x?void 0:x.subtotal)||0;null==x||x.tax;const v=(null==x?void 0:x.total)||0,f=(null==x?void 0:x.loading)||!1,y=(null==x?void 0:x.error)||null,b=async(e,s)=>{s<1?h&&await h(e):p&&await p(e,s)};a.useEffect(()=>{u.length>0&&s.initiateCheckout(t(u))},[u.length]);const N=(e,s,t)=>{const r=l(e);return`₹${((r-r/(1+((t||"").toLowerCase().includes("hair")?.05:.18)))*s).toLocaleString()}`};return r.jsx(n,{children:r.jsx("div",{className:"min-h-screen py-12 sm:py-16 md:py-20 bg-white overflow-x-hidden",children:r.jsxs("div",{className:"mx-auto max-w-6xl px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-12 sm:mb-16",children:[r.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-light mb-6 tracking-[0.15em]",style:{color:"#1a1a1a",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.15em"},children:"Shopping Cart"}),r.jsx("p",{className:"text-sm sm:text-base font-light tracking-wide",style:{color:"#666",letterSpacing:"0.05em"},children:"Review your items and proceed to checkout"})]}),0===u.length?r.jsxs("div",{className:"text-center py-16",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("img",{src:"/IMAGES/BANNER (2).webp",alt:"Empty Cart",className:"w-32 h-32 mx-auto rounded-lg object-cover shadow-lg",onError:e=>{var s;const t=e.target;t.style.display="none",null==(s=t.nextElementSibling)||s.classList.remove("hidden")}}),r.jsx("div",{className:"hidden w-32 h-32 mx-auto bg-slate-100 rounded-lg shadow-lg flex items-center justify-center",children:r.jsx(c,{className:"h-16 w-16 text-slate-400"})})]}),r.jsx("h2",{className:"text-2xl sm:text-3xl font-light mb-6 tracking-[0.1em]",style:{color:"#1a1a1a",fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)',letterSpacing:"0.1em"},children:"Your cart is empty"}),r.jsx("p",{className:"mb-10 text-sm sm:text-base font-light tracking-wide",style:{color:"#666",letterSpacing:"0.05em"},children:"Looks like you haven't added any items to your cart yet."}),r.jsx("a",{href:"#/user/shop",className:"inline-block text-white px-8 py-4 text-xs font-light tracking-[0.15em] uppercase transition-all duration-300 border border-transparent hover:border-slate-900",style:{backgroundColor:"var(--arctic-blue-primary)",letterSpacing:"0.15em"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--arctic-blue-primary-hover)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--arctic-blue-primary)"},children:"Start Shopping"})]}):r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-xl font-semibold",style:{color:"#1B4965"},children:["Cart Items (",u.length,")"]}),r.jsx("button",{onClick:async()=>{window.confirm("Are you sure you want to clear your entire cart?")&&g&&await g()},className:"font-medium text-sm hover:underline",style:{color:"#ef4444"},children:"Clear Cart"})]}),r.jsxs("div",{className:"space-y-4",children:[f&&r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"mt-2 text-slate-600",children:"Loading cart..."})}),y&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:r.jsxs("p",{className:"text-red-600",children:["Error: ",y]})}),u.map(e=>{return r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-4 p-3 sm:p-4 border border-slate-200 rounded-lg hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:e.image||"/IMAGES/BANNER (1).webp",alt:e.title,className:"w-24 h-24 object-cover rounded-lg border shadow-sm hover:shadow-md transition-shadow",style:{borderColor:"#D0E8F2"},onError:e=>{const s=e.target;if(s.dataset.fallbackAttempted){s.style.display="none";const e=s.nextElementSibling;e&&e.classList.remove("hidden")}else if(s.dataset.fallbackAttempted="true",s.src.includes("/IMAGES/BANNER (1)."))s.src="/IMAGES/face.webp";else if(s.src.includes("/IMAGES/face."))s.src="/IMAGES/body.webp";else{s.style.display="none";const e=s.nextElementSibling;e&&e.classList.remove("hidden")}}}),r.jsx("div",{className:"hidden w-24 h-24 bg-gradient-to-br from-slate-100 to-slate-200 rounded-lg border border-slate-200 flex items-center justify-center shadow-sm",children:r.jsx(o,{className:"h-8 w-8 text-slate-400"})})]})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-lg font-semibold truncate",style:{color:"#1B4965"},children:e.title}),r.jsx("div",{className:"text-slate-600 text-sm",children:r.jsx(i,{product:e,csvProduct:void 0,className:"text-sm",inline:!0})}),r.jsxs("p",{className:"text-slate-600 text-sm",children:["Total: ",(t=e.price,a=e.quantity,`₹${(l(t)*a).toLocaleString()}`)]}),r.jsxs("p",{className:"text-slate-600 text-sm",children:["GST (",(s=e.category,(s||"").toLowerCase().includes("hair")?"5%":"18%"),"): ",N(e.price,e.quantity,e.category)]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>b(e.id||e.product_id,e.quantity-1),className:"w-8 h-8 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-600 hover:text-slate-800 transition-colors",disabled:e.quantity<=1,children:"−"}),r.jsx("span",{className:"w-12 text-center font-semibold text-slate-800",children:e.quantity}),r.jsx("button",{onClick:()=>b(e.id||e.product_id,e.quantity+1),className:"w-8 h-8 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-600 hover:text-slate-800 transition-colors",children:"+"})]}),r.jsx("button",{onClick:()=>(async e=>{window.confirm("Are you sure you want to remove this item from your cart?")&&h&&await h(e)})(e.id||e.product_id),className:"text-red-500 hover:text-red-700 p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Remove item",children:r.jsx(d,{className:"h-5 w-5"})})]},e.id||`${e.slug}-${e.product_id}`);var s,t,a})]})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 sticky top-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6",children:"Order Summary"}),r.jsx("div",{className:"space-y-4 mb-6",children:(()=>{const e=u.reduce((e,s)=>{var t,r,a;let i=null;const n=s;if(n.mrp)i=n.mrp;else if(null==(t=n.details)?void 0:t.mrp)i=n.details.mrp;else if(null==(a=null==(r=n.product)?void 0:r.details)?void 0:a.mrp)i=n.product.details.mrp;else if(n.csvProduct){const e=n.csvProduct;i=e["MRP (₹)"]||e["MRP "]||e.MRP||e.mrp||e["MRP(₹)"]||e["MRP(₹) "]}return i||(i=s.price),e+l(i||"0")*s.quantity},0),s=u.reduce((e,s)=>{var t,r,a;const i=s;let n=null;if(i.mrp)n=i.mrp;else if(null==(t=i.details)?void 0:t.mrp)n=i.details.mrp;else if(null==(a=null==(r=i.product)?void 0:r.details)?void 0:a.mrp)n=i.product.details.mrp;else if(i.csvProduct){const e=i.csvProduct;n=e["MRP (₹)"]||e["MRP "]||e.MRP||e.mrp||e["MRP(₹)"]||e["MRP(₹) "]}n||(n=s.price);const c=(l(n||"0")-l(s.price))*s.quantity;return e+Math.max(0,c)},0);return u.reduce((e,s)=>{const t=l(s.price);return e+(t-t/(1+((s.category||"").toLowerCase().includes("hair")?.05:.18)))*s.quantity},0),r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between text-slate-600",children:[r.jsx("span",{children:"MRP"}),r.jsxs("span",{children:["₹",e.toLocaleString()]})]}),s>0&&r.jsxs("div",{className:"flex justify-between text-green-600",children:[r.jsx("span",{children:"Product Discount"}),r.jsxs("span",{children:["-₹",s.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between font-medium text-slate-700",children:[r.jsxs("span",{children:["Subtotal (",u.length," items)"]}),r.jsxs("span",{children:["₹",j.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between text-slate-600",children:[r.jsx("span",{children:"Shipping Charges"}),r.jsx("span",{className:"text-green-600",children:"Free"})]}),u.some(e=>(e.category||"").toLowerCase().includes("hair"))&&r.jsxs("div",{className:"flex justify-between text-slate-600",children:[r.jsx("span",{children:"GST (5% - Hair Products, Inclusive)"}),r.jsxs("span",{children:["₹",u.reduce((e,s)=>{if((s.category||"").toLowerCase().includes("hair")){const t=l(s.price);return e+(t-t/1.05)*s.quantity}return e},0).toLocaleString()]})]}),u.some(e=>!(e.category||"").toLowerCase().includes("hair"))&&r.jsxs("div",{className:"flex justify-between text-slate-600",children:[r.jsx("span",{children:"GST (18% - Other Products, Inclusive)"}),r.jsxs("span",{children:["₹",u.reduce((e,s)=>{if(!(s.category||"").toLowerCase().includes("hair")){const t=l(s.price);return e+(t-t/1.18)*s.quantity}return e},0).toLocaleString()]})]}),r.jsx("hr",{className:"border-slate-200"}),r.jsxs("div",{className:"flex justify-between text-lg font-bold",style:{color:"#1B4965"},children:[r.jsx("span",{children:"Grand Total"}),r.jsxs("span",{children:["₹",v.toLocaleString()]})]}),r.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"* MRP includes GST"})]})})()}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("a",{href:"#/user/checkout",className:"block w-full text-white py-3 px-4 rounded-lg font-semibold text-center hover:shadow-lg transition-all duration-300 hover:scale-105",style:{backgroundColor:"#1B4965"},children:"Proceed to Checkout"}),r.jsx("a",{href:"#/user/shop",className:"block w-full py-3 px-4 rounded-lg font-semibold text-center transition-colors",style:{borderColor:"#9DB4C0",borderWidth:"1px",color:"#1B4965"},children:"Continue Shopping"})]}),r.jsx("div",{className:"mt-6 pt-6 border-t border-slate-200",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2 text-slate-500 text-sm",children:[r.jsx(m,{className:"h-4 w-4"}),r.jsx("span",{children:"Secure Checkout"})]})})]})})]})]})})})}export{x as default};
