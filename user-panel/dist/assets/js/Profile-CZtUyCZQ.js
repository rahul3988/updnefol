import{u as e,b as t,j as s,P as a,f as r,g as l}from"./index-isYMjZiv.js";import{r as d,R as n}from"./react-vendor-D-XgqoRR.js";import{P as o}from"./PhoneInput-D4gzRJss.js";import{U as i,k as c,P as x,e as m,l as u,m as h,n as p,o as b,h as g}from"./ui-vendor-9UCGEfu4.js";import"./socket-vendor-CUkmNz_4.js";function j(){const{refreshUser:j,isAuthenticated:y}=e(),[f,k]=d.useState(null),[N,v]=d.useState([]),[w,C]=d.useState([]),[S,A]=d.useState([]),[M,T]=d.useState(!0),[_,P]=d.useState("overview"),[E,z]=d.useState(!1),[L,D]=d.useState(!1),[$,q]=d.useState(!1),[I,F]=d.useState({card_number:"",expiry:"",cvv:"",name:"",type:"Visa"}),[U,O]=d.useState({street:"",city:"",state:"",zip:"",phone:"",is_default:!1}),[Y,B]=d.useState({name:"",phone:"",country_code:"+91",address:{street:"",city:"",state:"",zip:""}}),[V,G]=d.useState(!1),[J,W]=d.useState(null),R=n.useRef(null),Z=[{name:"India",code:"+91"},{name:"United States",code:"+1"},{name:"United Kingdom",code:"+44"},{name:"Canada",code:"+1"},{name:"Australia",code:"+61"},{name:"Germany",code:"+49"},{name:"France",code:"+33"},{name:"Japan",code:"+81"},{name:"China",code:"+86"},{name:"Singapore",code:"+65"},{name:"UAE",code:"+971"},{name:"Pakistan",code:"+92"},{name:"Bangladesh",code:"+880"},{name:"Sri Lanka",code:"+94"},{name:"Nepal",code:"+977"}];d.useEffect(()=>{y?(H(),K(),Q(),X()):T(!1)},[y]);const H=async()=>{try{const e=await t.user.getProfile();k(e);let s=e.phone||"",a="+91";for(const t of Z)if(s.startsWith(t.code)){a=t.code,s=s.replace(t.code,"").trim();break}B({name:e.name,phone:s,country_code:a,address:e.address||{street:"",city:"",state:"",zip:""}})}catch(e){if(e.message.includes("401")||e.message.includes("Unauthorized"))return localStorage.removeItem("token"),localStorage.removeItem("user"),void(window.location.hash="#/user/login");k({name:"User",email:"",phone:"",address:{street:"",city:"",state:"",zip:""},loyalty_points:0,total_orders:0,member_since:(new Date).toISOString()})}finally{T(!1)}},K=async()=>{try{const e=(await t.orders.getAll()).map(e=>({id:e.id.toString(),order_number:e.order_number,status:e.status,total:parseFloat(e.total),date:new Date(e.created_at).toLocaleDateString(),items:Array.isArray(e.items)?e.items:[]}));v(e)}catch(e){}},Q=async()=>{try{const e=await t.user.getSavedCards(),s=Array.isArray(e)?e:e.data||[];C(s)}catch(e){C([])}},X=async()=>{try{const e=await t.user.getAddresses();A(Array.isArray(e)?e:[])}catch(e){A([])}};if(M)return s.jsx("main",{className:"py-10 dark:bg-slate-900 min-h-screen flex items-center justify-center"});if(!y)return s.jsx("main",{className:"py-10 dark:bg-slate-900 min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-4",children:"Please Login"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"You need to be logged in to view your profile."}),s.jsx("a",{href:"#/user/login",className:"inline-block px-6 py-3 text-white rounded-lg transition-colors",style:{backgroundColor:"rgb(75,151,201)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgb(60,120,160)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgb(75,151,201)",children:"Go to Login"})]})});if(!f)return s.jsx("main",{className:"py-10 dark:bg-slate-900 min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-4",children:"Profile Not Found"}),s.jsx("a",{href:"#/user/login",className:"text-blue-600 hover:text-blue-700",children:"Go to Login"})]})});const ee=[{id:"overview",label:"Your Profile",icon:i},{id:"address",label:"Manage Address",icon:c},{id:"orders",label:"Your Orders",icon:x},{id:"wishlist",label:"Wishlist",icon:m},{id:"cards",label:"Saved Cards",icon:u},{id:"affiliate",label:"Affiliate Partner",icon:m},{id:"cash",label:"Nefol Coins",icon:u},{id:"contact",label:"contact Us",icon:h}];return s.jsxs("main",{className:"py-12 sm:py-16 md:py-20 bg-white min-h-screen",children:[s.jsxs("div",{className:"mx-auto max-w-6xl px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-12 sm:mb-16",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-light tracking-[0.15em] mb-6",style:{color:"#1a1a1a",fontFamily:"var(--font-heading-family)",letterSpacing:"0.15em"},children:"My Account"}),s.jsx("p",{className:"text-sm sm:text-base font-light tracking-wide",style:{color:"#666",letterSpacing:"0.05em"},children:"Manage your profile, orders, and preferences"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8 sm:gap-10",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white border border-slate-100 p-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsxs("div",{className:"relative mx-auto mb-4",children:[s.jsx(a,{profilePhoto:f.profile_photo,name:f.name,size:"xl",className:"mx-auto",clickable:y,onClick:()=>{var e;return y&&(null==(e=R.current)?void 0:e.click())}}),y&&s.jsx("div",{className:"mt-3",children:s.jsxs("label",{className:"cursor-pointer inline-block",children:[s.jsx("input",{ref:R,type:"file",accept:"image/*",onChange:async e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(s)if(s.type.startsWith("image/"))if(s.size>5242880)alert("File size should be less than 5MB");else{G(!0);try{const e=new FormData;e.append("file",s);const t=l(),a=await fetch(`${t}/api/upload`,{method:"POST",body:e});if(a.ok){const e=`${t}${(await a.json()).url}`,s=localStorage.getItem("token");if(!s)return void(window.location.hash="#/user/login");const r=await fetch(`${t}/api/users/profile`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({name:null==f?void 0:f.name,phone:null==f?void 0:f.phone,address:null==f?void 0:f.address,profile_photo:e})});if(r.ok){const t=await r.json();k(t),W(e),await j(),alert("Profile photo updated successfully!")}else alert("Failed to update profile photo")}else alert("Failed to upload photo")}catch(a){alert("Failed to upload photo")}finally{G(!1)}}else alert("Please select an image file")},className:"hidden",disabled:V}),s.jsx("button",{type:"button",onClick:()=>{var e;return null==(e=R.current)?void 0:e.click()},disabled:V,className:"px-3 py-1 text-xs font-light tracking-[0.1em] uppercase text-white transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"var(--arctic-blue-primary)",letterSpacing:"0.1em"},onMouseEnter:e=>{V||(e.currentTarget.style.backgroundColor="var(--arctic-blue-primary-hover)")},onMouseLeave:e=>{V||(e.currentTarget.style.backgroundColor="var(--arctic-blue-primary)")},children:V?"Uploading...":"Change Photo"})]})})]}),s.jsx("h3",{className:"text-base font-light tracking-wide",style:{color:"#1a1a1a",letterSpacing:"0.05em"},children:f.name}),s.jsx("p",{className:"text-sm font-light",style:{color:"#666"},children:f.email}),s.jsx("p",{className:"text-xs font-light",style:{color:"#999"},children:f.phone})]}),s.jsxs("nav",{className:"space-y-2",children:[ee.map(e=>{const t=e.icon;return s.jsxs("button",{onClick:()=>{"cash"===e.id?window.location.hash="#/user/nefol-coins":"affiliate"===e.id?window.location.hash="#/user/affiliate-partner":"orders"===e.id?window.location.hash="#/user/user-orders":"cards"===e.id?window.location.hash="#/user/saved-cards":"address"===e.id?window.location.hash="#/user/manage-address":"contact"===e.id?window.location.hash="#/user/contact":"wishlist"===e.id?window.location.hash="#/user/wishlist":(P(e.id),setTimeout(()=>{const e=document.getElementById("profile-content");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},100))},className:"w-full flex items-center gap-3 px-4 py-3 text-left transition-all duration-300 "+(_===e.id?"bg-slate-50 text-slate-900 border-l-2 border-slate-900":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"),style:{letterSpacing:"0.02em"},children:[s.jsx(t,{className:"h-5 w-5"}),s.jsx("span",{className:"text-sm font-light tracking-wide",style:{letterSpacing:"0.05em"},children:e.label})]},e.id)}),y?s.jsxs("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.hash="#/user/login"},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-slate-600 hover:bg-slate-50 transition-all duration-300",style:{letterSpacing:"0.02em"},children:[s.jsx(p,{className:"h-5 w-5"}),s.jsx("span",{className:"text-sm font-light tracking-wide",style:{letterSpacing:"0.05em"},children:"Logout"})]}):s.jsxs("button",{onClick:()=>window.location.hash="#/user/login",className:"w-full flex items-center gap-3 px-4 py-3 text-left text-slate-600 hover:bg-slate-50 transition-all duration-300",style:{letterSpacing:"0.02em"},children:[s.jsx(b,{className:"h-5 w-5"}),s.jsx("span",{className:"text-sm font-light tracking-wide",style:{letterSpacing:"0.05em"},children:"Login"})]})]})]})}),s.jsx("div",{className:"lg:col-span-3",id:"profile-content",children:s.jsxs("div",{className:"bg-white border border-slate-100 p-6 sm:p-8",children:["overview"===_&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-light tracking-[0.1em]",style:{color:"#1a1a1a",fontFamily:"var(--font-heading-family)",letterSpacing:"0.1em"},children:"Your Profile"}),y&&s.jsx("button",{onClick:()=>z(!E),className:"px-6 py-2.5 text-xs font-light tracking-[0.15em] uppercase text-white transition-all duration-300",style:{backgroundColor:"var(--arctic-blue-primary)",letterSpacing:"0.15em"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--arctic-blue-primary-hover)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--arctic-blue-primary)"},children:E?"Cancel":"Edit Profile"})]}),E?s.jsxs("form",{onSubmit:e=>{e.preventDefault(),(async()=>{try{const e=`${Y.country_code}${Y.phone.replace(/\D/g,"")}`,s=await t.user.updateProfile({name:Y.name,phone:e,address:Y.address});k(s),z(!1),alert("Profile updated successfully!")}catch(e){e.message.includes("401")||e.message.includes("Unauthorized")?(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.hash="#/user/login"):alert("Failed to update profile")}})()},className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Name"}),s.jsx("input",{type:"text",value:Y.name,onChange:e=>B({...Y,name:e.target.value}),className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 px-4 py-3 dark:bg-slate-700 dark:text-slate-100",required:!0})]}),s.jsx("div",{children:s.jsx(o,{value:Y.phone,onChange:e=>B({...Y,phone:e}),onCountryCodeChange:e=>B({...Y,country_code:e}),defaultCountry:Y.country_code,placeholder:"Enter phone number",required:!0,showLabel:!0,label:"Phone"})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-light text-slate-700 mb-2 uppercase tracking-[0.1em]",style:{letterSpacing:"0.1em"},children:"Address"}),s.jsx("input",{type:"text",placeholder:"Street Address",value:Y.address.street,onChange:e=>B({...Y,address:{...Y.address,street:e.target.value}}),className:"w-full rounded-md border border-slate-200 bg-white px-4 py-2.5 text-sm font-light text-slate-900 focus:outline-none focus:ring-1 focus:ring-slate-900 focus:border-slate-900 transition-all mb-3",style:{letterSpacing:"0.02em"},required:!0}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.jsx("input",{type:"text",placeholder:"City",value:Y.address.city,onChange:e=>B({...Y,address:{...Y.address,city:e.target.value}}),className:"rounded-md border border-slate-200 bg-white px-4 py-2.5 text-sm font-light text-slate-900 focus:outline-none focus:ring-1 focus:ring-slate-900 focus:border-slate-900 transition-all",style:{letterSpacing:"0.02em"},required:!0}),s.jsx("input",{type:"text",placeholder:"State",value:Y.address.state,onChange:e=>B({...Y,address:{...Y.address,state:e.target.value}}),className:"rounded-md border border-slate-200 bg-white px-4 py-2.5 text-sm font-light text-slate-900 focus:outline-none focus:ring-1 focus:ring-slate-900 focus:border-slate-900 transition-all",style:{letterSpacing:"0.02em"},required:!0}),s.jsx("input",{type:"text",placeholder:"ZIP Code",value:Y.address.zip,onChange:e=>B({...Y,address:{...Y.address,zip:e.target.value}}),className:"rounded-md border border-slate-200 bg-white px-4 py-2.5 text-sm font-light text-slate-900 focus:outline-none focus:ring-1 focus:ring-slate-900 focus:border-slate-900 transition-all",style:{letterSpacing:"0.02em"},required:!0})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{type:"submit",className:"px-6 py-3 text-xs font-light tracking-[0.15em] uppercase text-white transition-all duration-300",style:{backgroundColor:"var(--arctic-blue-primary)",letterSpacing:"0.15em"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--arctic-blue-primary-hover)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--arctic-blue-primary)"},children:"Save Changes"}),s.jsx("button",{type:"button",onClick:()=>z(!1),className:"px-6 py-3 border border-slate-900 text-slate-900 text-xs font-light tracking-[0.15em] uppercase hover:bg-slate-900 hover:text-white transition-all duration-300",style:{letterSpacing:"0.15em"},children:"Cancel"})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(i,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Name"}),s.jsx("p",{className:"font-medium dark:text-slate-100",children:f.name})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(h,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Phone"}),s.jsx("p",{className:"font-medium dark:text-slate-100",children:f.phone})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(g,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Email"}),s.jsx("p",{className:"font-medium dark:text-slate-100",children:f.email})]})]})]}),S.filter(e=>e.is_default).length>0&&s.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[s.jsx("h3",{className:"text-lg font-semibold dark:text-slate-100 mb-4",children:"Default Addresses"}),s.jsx("div",{className:"space-y-4",children:S.filter(e=>e.is_default).map(e=>s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 bg-slate-50 dark:bg-slate-700/50",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[e.name&&s.jsx("p",{className:"font-semibold dark:text-slate-100 mb-1",children:e.name}),s.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-1",children:[e.street,e.area&&`, ${e.area}`,e.landmark&&`, ${e.landmark}`]}),s.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[e.city,", ",e.state," ",e.zip]}),e.country&&s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:e.country}),e.phone&&s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:["Phone: ",e.phone]}),e.address_label&&s.jsx("span",{className:"inline-block mt-2 px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 rounded",children:e.address_label})]}),s.jsx("span",{className:"ml-4 px-2 py-1 text-xs bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 rounded font-medium",children:"Default"})]})},e.id))})]}),f.address&&(f.address.street||f.address.city||f.address.state||f.address.zip)&&s.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[s.jsx("h3",{className:"text-lg font-semibold dark:text-slate-100 mb-4",children:"Profile Address"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(c,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Address"}),s.jsx("p",{className:"font-medium dark:text-slate-100",children:`${f.address.street||""}, ${f.address.city||""}, ${f.address.state||""} ${f.address.zip||""}`.replace(/,\s*,/g,",").replace(/^,\s*|,\s*$/g,"")})]})]})]}),s.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[s.jsx("h3",{className:"text-lg font-semibold dark:text-slate-100 mb-4",children:"Account Statistics"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:f.loyalty_points??0}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Loyalty Points"})]}),s.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:f.total_orders??0}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Orders"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:f.member_since?new Date(f.member_since).toLocaleDateString():"N/A"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Member Since"})]})]})]})]})]}),"cash"===_&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold dark:text-slate-100 mb-6",children:"Nefol Coins"}),s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"mx-auto mb-6 h-24 w-24 rounded-full bg-green-100 dark:bg-green-900/20 flex items-center justify-center",children:s.jsx(u,{className:"h-12 w-12 text-green-600"})}),s.jsx("h3",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:r(0)}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Your Nefol Coins Balance"}),s.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[s.jsx("button",{className:"w-full px-6 py-3 text-white rounded-lg transition-colors",style:{backgroundColor:"rgb(75,151,201)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgb(60,120,160)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgb(75,151,201)",children:"Earn Coins"}),s.jsx("button",{className:"w-full px-6 py-3 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Coins History"})]})]})]}),"orders"===_&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold dark:text-slate-100 mb-6",children:"Your Orders"}),0===N.length?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(x,{className:"h-16 w-16 text-slate-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold dark:text-slate-100 mb-2",children:"No Orders Yet"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Start shopping to see your orders here"}),s.jsx("a",{href:"#/user/shop",className:"inline-block px-6 py-3 text-white rounded-lg transition-colors",style:{backgroundColor:"rgb(75,151,201)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgb(60,120,160)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgb(75,151,201)",children:"Start Shopping"})]}):s.jsx("div",{className:"space-y-4",children:N.map(e=>s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold dark:text-slate-100",children:["Order #",e.order_number]}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:e.date})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-semibold dark:text-slate-100",children:["₹",e.total]}),s.jsx("span",{className:"px-2 py-1 text-xs rounded-full "+("delivered"===e.status?"bg-green-100 text-green-800":"shipped"===e.status?"bg-blue-100 text-blue-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status})]})]}),s.jsx("div",{className:"space-y-2",children:e.items.map((e,t)=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"dark:text-slate-100",children:[e.name," x ",e.quantity]}),s.jsxs("span",{className:"dark:text-slate-100",children:["₹",e.price]})]},t))})]},e.id))})]}),"cards"===_&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-semibold dark:text-slate-100",children:"Saved Cards"}),y&&s.jsx("button",{onClick:()=>D(!0),className:"px-4 py-2 text-white rounded-lg transition-colors",style:{backgroundColor:"rgb(75,151,201)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgb(60,120,160)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgb(75,151,201)",children:"Add New Card"})]}),Array.isArray(w)&&0!==w.length?s.jsx("div",{className:"space-y-4",children:(Array.isArray(w)?w:[]).map(e=>s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"h-12 w-20 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:e.type})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold dark:text-slate-100",children:e.card_number}),s.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Expires ",e.expiry]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[e.is_default&&s.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"Default"}),y&&s.jsx("button",{className:"px-3 py-1 text-sm text-red-600 hover:text-red-700",children:"Remove"})]})]})},e.id))}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(u,{className:"h-16 w-16 text-slate-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold dark:text-slate-100 mb-2",children:"No Saved Cards"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Add a card for faster checkout"}),y&&s.jsx("button",{onClick:()=>D(!0),className:"px-6 py-3 text-white rounded-lg transition-colors",style:{backgroundColor:"rgb(75,151,201)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgb(60,120,160)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgb(75,151,201)",children:"Add Card"})]})]}),"address"===_&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-semibold dark:text-slate-100",children:"Manage Address"}),y&&s.jsx("button",{onClick:()=>q(!0),className:"px-4 py-2 text-white rounded-lg transition-colors",style:{backgroundColor:"rgb(75,151,201)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgb(60,120,160)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgb(75,151,201)",children:"Add New Address"})]}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-6",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold dark:text-slate-100",children:f.name}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:f.address?s.jsxs(s.Fragment,{children:[f.address.street,s.jsx("br",{}),f.address.city,", ",f.address.state," ",f.address.zip]}):"No address provided"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-2",children:f.phone})]}),y&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"px-3 py-1 text-sm",style:{color:"rgb(75,151,201)"},onMouseEnter:e=>e.currentTarget.style.color="rgb(60,120,160)",onMouseLeave:e=>e.currentTarget.style.color="rgb(75,151,201)",children:"Edit"}),s.jsx("button",{className:"px-3 py-1 text-sm text-red-600 hover:text-red-700",children:"Delete"})]})]})})]}),"contact"===_&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold dark:text-slate-100 mb-6",children:"Contact Us"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold dark:text-slate-100 mb-4",children:"Get in Touch"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(h,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium dark:text-slate-100",children:"Phone"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"+91 98765 43210"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(g,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium dark:text-slate-100",children:"Email"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"support@nefol.com"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(c,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium dark:text-slate-100",children:"Address"}),s.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:["123 Beauty Street",s.jsx("br",{}),"Mumbai, Maharashtra 400001"]})]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold dark:text-slate-100 mb-4",children:"Send Message"}),s.jsxs("form",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Subject"}),s.jsx("input",{type:"text",className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 px-4 py-3 dark:bg-slate-700 dark:text-slate-100",placeholder:"What can we help you with?"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Message"}),s.jsx("textarea",{rows:4,className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 px-4 py-3 dark:bg-slate-700 dark:text-slate-100",placeholder:"Tell us more about your inquiry..."})]}),s.jsx("button",{type:"submit",className:"w-full px-6 py-3 text-white rounded-lg transition-colors",style:{backgroundColor:"rgb(75,151,201)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgb(60,120,160)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgb(75,151,201)",children:"Send Message"})]})]})]})]})]})})]})]}),L&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold dark:text-slate-100 mb-4",children:"Add New Card"}),s.jsxs("form",{onSubmit:e=>{e.preventDefault(),(async()=>{try{if(!localStorage.getItem("token"))return void(window.location.hash="#/user/login");const e={id:Date.now().toString(),card_number:`**** **** **** ${I.card_number.slice(-4)}`,expiry:I.expiry,type:I.type,is_default:0===w.length};C([...w,e]),F({card_number:"",expiry:"",cvv:"",name:"",type:"Visa"}),D(!1),alert("Card added successfully!")}catch(e){alert("Failed to add card")}})()},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Card Number"}),s.jsx("input",{type:"text",className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 px-4 py-3 dark:bg-slate-700 dark:text-slate-100",placeholder:"1234 5678 9012 3456",value:I.card_number,onChange:e=>F({...I,card_number:e.target.value}),required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Expiry"}),s.jsx("input",{type:"text",className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 px-4 py-3 dark:bg-slate-700 dark:text-slate-100",placeholder:"MM/YY",value:I.expiry,onChange:e=>F({...I,expiry:e.target.value}),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"CVV"}),s.jsx("input",{type:"text",className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 px-4 py-3 dark:bg-slate-700 dark:text-slate-100",placeholder:"123",value:I.cvv,onChange:e=>F({...I,cvv:e.target.value}),required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Cardholder Name"}),s.jsx("input",{type:"text",className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 px-4 py-3 dark:bg-slate-700 dark:text-slate-100",placeholder:"John Doe",value:I.name,onChange:e=>F({...I,name:e.target.value}),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Card Type"}),s.jsxs("select",{className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 px-4 py-3 dark:bg-slate-700 dark:text-slate-100",value:I.type,onChange:e=>F({...I,type:e.target.value}),children:[s.jsx("option",{value:"Visa",children:"Visa"}),s.jsx("option",{value:"Mastercard",children:"Mastercard"}),s.jsx("option",{value:"American Express",children:"American Express"}),s.jsx("option",{value:"Discover",children:"Discover"})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>D(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancel"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 text-white rounded-lg",style:{backgroundColor:"rgb(75,151,201)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgb(60,120,160)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgb(75,151,201)",children:"Add Card"})]})]})]})}),$&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold dark:text-slate-100 mb-4",children:"Add New Address"}),s.jsxs("form",{onSubmit:e=>{e.preventDefault(),(async()=>{try{const e=localStorage.getItem("token");if(!e)return void(window.location.hash="#/user/login");const t={...f,address:{street:U.street,city:U.city,state:U.state,zip:U.zip},phone:U.phone||f.phone},s=l();(await fetch(`${s}/api/users/profile`,{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({name:t.name,phone:t.phone,address:t.address})})).ok?(k(t),O({street:"",city:"",state:"",zip:"",phone:"",is_default:!1}),q(!1),alert("Address updated successfully!")):alert("Failed to update address")}catch(e){alert("Failed to add address")}})()},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Street Address"}),s.jsx("input",{type:"text",className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 px-4 py-3 dark:bg-slate-700 dark:text-slate-100",placeholder:"123 Main Street",value:U.street,onChange:e=>O({...U,street:e.target.value}),required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"City"}),s.jsx("input",{type:"text",className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 px-4 py-3 dark:bg-slate-700 dark:text-slate-100",placeholder:"Mumbai",value:U.city,onChange:e=>O({...U,city:e.target.value}),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"State"}),s.jsx("input",{type:"text",className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 px-4 py-3 dark:bg-slate-700 dark:text-slate-100",placeholder:"Maharashtra",value:U.state,onChange:e=>O({...U,state:e.target.value}),required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"ZIP Code"}),s.jsx("input",{type:"text",className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 px-4 py-3 dark:bg-slate-700 dark:text-slate-100",placeholder:"400001",value:U.zip,onChange:e=>O({...U,zip:e.target.value}),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Phone"}),s.jsx("input",{type:"tel",className:"w-full rounded-lg border border-slate-300 dark:border-slate-600 px-4 py-3 dark:bg-slate-700 dark:text-slate-100",placeholder:"+91 98765 43210",value:U.phone,onChange:e=>O({...U,phone:e.target.value})})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>q(!1),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancel"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 text-white rounded-lg",style:{backgroundColor:"rgb(75,151,201)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgb(60,120,160)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgb(75,151,201)",children:"Add Address"})]})]})]})})]})}export{j as default};
