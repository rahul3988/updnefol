import{j as e,a as s}from"./index-BGPhOdHQ.js";import{r as t}from"./react-vendor-D-XgqoRR.js";import{P as a}from"./PhoneInput-DY_dlGxq.js";import"./socket-vendor-CUkmNz_4.js";import"./ui-vendor-CK_V9qH3.js";function l(){const[l,r]=t.useState("phone"),[n,o]=t.useState("+91"),[i,d]=t.useState(""),[c,m]=t.useState(""),[u,x]=t.useState(""),[p,h]=t.useState(""),[g,b]=t.useState(!1),[f,w]=t.useState(""),[y,j]=t.useState(""),[v,N]=t.useState(""),[k,P]=t.useState(""),[S,C]=t.useState(""),[q,R]=t.useState(""),[A,E]=t.useState(!1);return e.jsx("div",{className:"min-h-screen bg-white py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-10",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-light tracking-[0.15em]",style:{fontFamily:'var(--font-heading-family, "Cormorant Garamond", serif)'},children:"Reset Password"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 tracking-wide",children:"Choose how youâ€™d like to receive your password reset instructions and create a new password."})]}),e.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 p-6 bg-white shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-1",children:"Request Reset Code"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Get a 6-digit code on WhatsApp or a reset link on your email."}),e.jsxs("div",{className:"flex rounded-lg bg-slate-100 p-1 mb-4",children:[e.jsx("button",{type:"button",onClick:()=>{r("phone"),h(""),x("")},className:"flex-1 py-2 px-4 rounded-md text-xs font-light uppercase tracking-[0.1em] "+("phone"===l?"bg-white text-slate-900 shadow-sm":"text-slate-600 hover:text-slate-900"),children:"WhatsApp"}),e.jsx("button",{type:"button",onClick:()=>{r("email"),h(""),x("")},className:"flex-1 py-2 px-4 rounded-md text-xs font-light uppercase tracking-[0.1em] "+("email"===l?"bg-white text-slate-900 shadow-sm":"text-slate-600 hover:text-slate-900"),children:"Email"})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),x(""),h(""),"phone"===l&&i.trim().length<6)h("Please enter a valid phone number");else if("email"!==l||c.trim()){b(!0);try{"phone"===l?await s.requestPasswordReset({phone:`${n.replace(/[^0-9]/g,"")}${i.replace(/\D/g,"")}`}):await s.requestPasswordReset({email:c.trim()}),x("If an account exists, reset instructions have been sent.")}catch(t){h((null==t?void 0:t.message)||"Failed to request reset. Please try again.")}finally{b(!1)}}else h("Please enter a valid email address")},className:"space-y-4",children:["phone"===l?e.jsx(a,{value:i,onChange:d,onCountryCodeChange:o,defaultCountry:n,placeholder:"Enter your WhatsApp number",showLabel:!0,label:"WhatsApp Number"}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-light text-slate-600 mb-2 uppercase tracking-[0.1em]",children:"Email Address"}),e.jsx("input",{type:"email",value:c,onChange:e=>m(e.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2.5 text-sm focus:outline-none focus:ring-1 focus:ring-slate-900",placeholder:"you@example.com"})]}),p&&e.jsx("div",{className:"text-sm text-red-600",children:p}),u&&e.jsx("div",{className:"text-sm text-green-600",children:u}),e.jsx("button",{type:"submit",disabled:g,className:"w-full rounded-md bg-slate-900 text-white py-3 text-xs font-light uppercase tracking-[0.15em] disabled:opacity-50",children:g?"Sending...":"Send Reset Instructions"})]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 p-6 bg-white shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-1",children:"Set New Password"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Paste the token you received and choose a new password."}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),C(""),R(""),f.trim()&&y.trim())if(v.length<8)R("Password must be at least 8 characters");else if(v===k){E(!0);try{await s.resetPassword({email:f.trim(),token:y.trim(),newPassword:v}),C("Password reset successful! You can now sign in with your new password."),N(""),P(""),j("")}catch(t){R((null==t?void 0:t.message)||"Failed to reset password. Please check your token and try again.")}finally{E(!1)}}else R("Passwords do not match");else R("Email and token are required")},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-light text-slate-600 mb-2 uppercase tracking-[0.1em]",children:"Email Address"}),e.jsx("input",{type:"email",value:f,onChange:e=>w(e.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2.5 text-sm focus:outline-none focus:ring-1 focus:ring-slate-900",placeholder:"you@example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-light text-slate-600 mb-2 uppercase tracking-[0.1em]",children:"Reset Token"}),e.jsx("input",{type:"text",value:y,onChange:e=>j(e.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2.5 text-sm focus:outline-none focus:ring-1 focus:ring-slate-900 font-mono",placeholder:"Paste the 64-character token",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-light text-slate-600 mb-2 uppercase tracking-[0.1em]",children:"New Password"}),e.jsx("input",{type:"password",value:v,onChange:e=>N(e.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2.5 text-sm focus:outline-none focus:ring-1 focus:ring-slate-900",placeholder:"Enter new password",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-light text-slate-600 mb-2 uppercase tracking-[0.1em]",children:"Confirm Password"}),e.jsx("input",{type:"password",value:k,onChange:e=>P(e.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2.5 text-sm focus:outline-none focus:ring-1 focus:ring-slate-900",placeholder:"Re-enter new password",required:!0})]}),q&&e.jsx("div",{className:"text-sm text-red-600",children:q}),S&&e.jsx("div",{className:"text-sm text-green-600",children:S}),e.jsx("button",{type:"submit",disabled:A,className:"w-full rounded-md bg-blue-600 text-white py-3 text-xs font-light uppercase tracking-[0.15em] disabled:opacity-50",children:A?"Updating...":"Update Password"})]})]})]})]})})}export{l as default};
