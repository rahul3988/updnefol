import{j as e}from"./index-CLOjC2NB.js";import{r as t}from"./react-vendor-D-XgqoRR.js";import{af as s,c as a,p as l,e as r,ac as i,x as d,q as n}from"./ui-vendor-30WxTOTI.js";import"./socket-vendor-CUkmNz_4.js";function c(){const[c,x]=t.useState(0),[o,m]=t.useState("Bronze"),[h,j]=t.useState(0),[f,u]=t.useState([]),[p,b]=t.useState(!0);t.useEffect(()=>{N()},[]);const N=async()=>{try{const e=localStorage.getItem("token");if(!e)return void b(!1);const t=await fetch(`${window.location.protocol}//${window.location.hostname}:4000/api/loyalty/points`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(t.ok){const e=await t.json();x(e.points||0),m(e.tier||"Bronze"),j(e.nextTierPoints||0)}const s=await fetch(`${window.location.protocol}//${window.location.hostname}:4000/api/loyalty/rewards`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(s.ok){const e=await s.json();u(e)}}catch(e){x(0),m("Bronze"),j(0),u([])}finally{b(!1)}},g=t=>{switch(t){case"discount":return e.jsx(l,{className:"w-6 h-6 text-green-600 dark:text-green-400"});case"freebie":return e.jsx(n,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"});case"exclusive":return e.jsx(d,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"});default:return e.jsx(n,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})}};return e.jsx("main",{className:"py-10 dark:bg-slate-900 min-h-screen",children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h1",{className:"text-5xl font-bold text-slate-900 dark:text-slate-100 mb-6",children:"Loyalty & Rewards"}),e.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-400 max-w-3xl mx-auto",children:"Earn points with every purchase and redeem amazing rewards."})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-slate-800 dark:to-slate-800 rounded-2xl p-8 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Your Loyalty Status"}),e.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[o," Member • ",c," Points Available"]})]}),e.jsx("div",{className:`w-16 h-16 bg-gradient-to-r ${(e=>{switch(e){case"Gold":return"from-yellow-400 to-yellow-600";case"Silver":return"from-gray-400 to-gray-600";case"Bronze":return"from-orange-400 to-orange-600";default:return"from-blue-400 to-blue-600"}})(o)} rounded-full flex items-center justify-center`,children:e.jsx(s,{className:"w-8 h-8 text-white"})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Progress to Next Tier"}),e.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:[h," points to go"]})]}),e.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-600 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-500",style:{width:(1500-h)/1500*100+"%"}})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-6",children:"Available Rewards"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:f.filter(e=>!e.isRedeemed).map(t=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 dark:bg-slate-700 rounded-full flex items-center justify-center mr-4",children:g(t.type)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:t.title}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:t.description})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.points}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"points"})]})]}),t.expiryDate&&e.jsxs("div",{className:"flex items-center text-sm text-slate-600 dark:text-slate-400 mb-4",children:[e.jsx(a,{className:"w-4 h-4 mr-2"}),"Expires: ",new Date(t.expiryDate).toLocaleDateString()]}),e.jsx("button",{onClick:()=>(e=>{const t=f.find(t=>t.id===e);t&&c>=t.points?(x(c-t.points),u(f.map(t=>t.id===e?{...t,isRedeemed:!0}:t)),alert(`Reward "${t.title}" redeemed successfully!`)):alert("Insufficient points to redeem this reward.")})(t.id),disabled:c<t.points,className:"w-full py-3 rounded-lg font-semibold transition-colors "+(c>=t.points?"bg-blue-600 text-white hover:bg-blue-700":"bg-slate-300 dark:bg-slate-600 text-slate-500 dark:text-slate-400 cursor-not-allowed"),children:c>=t.points?"Redeem Now":"Insufficient Points"})]},t.id))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-6",children:"Redeemed Rewards"}),e.jsx("div",{className:"space-y-4",children:f.filter(e=>e.isRedeemed).map(t=>e.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 rounded-xl p-6 opacity-75",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-200 dark:bg-slate-600 rounded-full flex items-center justify-center mr-4",children:g(t.type)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:t.title}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:t.description})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:"Redeemed"}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[t.points," points"]})]})]})},t.id))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-slate-800 dark:to-slate-800 rounded-2xl p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-6",children:"How to Earn Points"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{className:"w-8 h-8 text-green-600 dark:text-green-400 mr-4"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Make Purchases"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Earn 1 point for every ₹10 spent"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(r,{className:"w-8 h-8 text-red-600 dark:text-red-400 mr-4"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Write Reviews"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Earn 50 points for each product review"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(i,{className:"w-8 h-8 text-blue-600 dark:text-blue-400 mr-4"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Refer Friends"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Earn 100 points for each successful referral"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400 mr-4"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Social Media"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Earn 25 points for sharing on social media"})]})]})]})]})]})})}export{c as default};
