import{d as e,p as t,h as s,j as r,i as l,r as a}from"./index-DHQYPLw0.js";import{r as n}from"./react-vendor-D-XgqoRR.js";import{P as i}from"./PricingDisplay-BhUAu90f.js";import{A as o}from"./AuthGuard-DdUM1nOK.js";import{d as c,P as d,J as m,h as x}from"./ui-vendor-upD1L4Zc.js";import"./socket-vendor-CUkmNz_4.js";function u(){const u=e(),h=(null==u?void 0:u.items)||[],p=null==u?void 0:u.removeItem,g=null==u?void 0:u.updateQuantity,j=null==u?void 0:u.clear,y=(null==u?void 0:u.subtotal)||0;null==u||u.tax;const v=(null==u?void 0:u.total)||0,b=(null==u?void 0:u.loading)||!1,f=(null==u?void 0:u.error)||null,N=async(e,t)=>{t<1?p&&await p(e):g&&await g(e,t)};n.useEffect(()=>{h.length>0&&t.initiateCheckout(s(h))},[h.length]);const w=(e,t,s)=>{const r=l(e),n=(s||"").toLowerCase().includes("hair")?.05:.18;return`₹${a((r-r/(1+n))*t).toLocaleString()}`},S=(e,t)=>{const s=l(e);return`₹${a(s*t).toLocaleString()}`};return r.jsx(o,{children:r.jsx("div",{className:"min-h-screen py-12 sm:py-16 md:py-20 bg-white overflow-x-hidden",children:r.jsxs("div",{className:"mx-auto max-w-6xl px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-12 sm:mb-16",children:[r.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-light mb-6 tracking-[0.15em]",style:{color:"#1a1a1a",fontFamily:"var(--font-heading-family)",letterSpacing:"0.15em"},children:"Shopping Cart"}),r.jsx("p",{className:"text-sm sm:text-base font-light tracking-wide",style:{color:"#666",letterSpacing:"0.05em"},children:"Review your items and proceed to checkout"})]}),0===h.length?r.jsxs("div",{className:"text-center py-16",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("img",{src:"/IMAGES/BANNER (2).webp",alt:"Empty Cart",className:"w-32 h-32 mx-auto rounded-lg object-cover shadow-lg",onError:e=>{var t;const s=e.target;s.style.display="none",null==(t=s.nextElementSibling)||t.classList.remove("hidden")}}),r.jsx("div",{className:"hidden w-32 h-32 mx-auto bg-slate-100 rounded-lg shadow-lg flex items-center justify-center",children:r.jsx(c,{className:"h-16 w-16 text-slate-400"})})]}),r.jsx("h2",{className:"text-2xl sm:text-3xl font-light mb-6 tracking-[0.1em]",style:{color:"#1a1a1a",fontFamily:"var(--font-heading-family)",letterSpacing:"0.1em"},children:"Your cart is empty"}),r.jsx("p",{className:"mb-10 text-sm sm:text-base font-light tracking-wide",style:{color:"#666",letterSpacing:"0.05em"},children:"Looks like you haven't added any items to your cart yet."}),r.jsx("a",{href:"#/user/shop",className:"inline-block text-white px-8 py-4 text-xs font-light tracking-[0.15em] uppercase transition-all duration-300 border border-transparent hover:border-slate-900",style:{backgroundColor:"var(--arctic-blue-primary)",letterSpacing:"0.15em"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--arctic-blue-primary-hover)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--arctic-blue-primary)"},children:"Start Shopping"})]}):r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-xl font-semibold",style:{color:"#1B4965"},children:["Cart Items (",h.length,")"]}),r.jsx("button",{onClick:async()=>{window.confirm("Are you sure you want to clear your entire cart?")&&j&&await j()},className:"font-medium text-sm hover:underline",style:{color:"#ef4444"},children:"Clear Cart"})]}),r.jsxs("div",{className:"space-y-4",children:[b&&r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"mt-2 text-slate-600",children:"Loading cart..."})}),f&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:r.jsxs("p",{className:"text-red-600",children:["Error: ",f]})}),h.map(e=>{return r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-4 p-3 sm:p-4 border border-slate-200 rounded-lg hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:e.image||"/IMAGES/BANNER (1).webp",alt:e.title,className:"w-24 h-24 object-cover rounded-lg border shadow-sm hover:shadow-md transition-shadow",style:{borderColor:"#D0E8F2"},onError:e=>{const t=e.target;if(t.dataset.fallbackAttempted){t.style.display="none";const e=t.nextElementSibling;e&&e.classList.remove("hidden")}else if(t.dataset.fallbackAttempted="true",t.src.includes("/IMAGES/BANNER (1)."))t.src="/IMAGES/face.webp";else if(t.src.includes("/IMAGES/face."))t.src="/IMAGES/body.webp";else{t.style.display="none";const e=t.nextElementSibling;e&&e.classList.remove("hidden")}}}),r.jsx("div",{className:"hidden w-24 h-24 bg-gradient-to-br from-slate-100 to-slate-200 rounded-lg border border-slate-200 flex items-center justify-center shadow-sm",children:r.jsx(d,{className:"h-8 w-8 text-slate-400"})})]})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-lg font-semibold truncate",style:{color:"#1B4965"},children:e.title}),r.jsx("div",{className:"text-slate-600 text-sm",children:r.jsx(i,{product:e,csvProduct:void 0,className:"text-sm",inline:!0})}),r.jsxs("p",{className:"text-slate-600 text-sm",children:["Total: ",S(e.price,e.quantity)]}),r.jsxs("p",{className:"text-slate-600 text-sm",children:["GST (",(t=e.category,(t||"").toLowerCase().includes("hair")?"5%":"18%"),"): ",w(e.price,e.quantity,e.category)]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>N(e.id||e.product_id,e.quantity-1),className:"w-8 h-8 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-600 hover:text-slate-800 transition-colors",disabled:e.quantity<=1,children:"−"}),r.jsx("span",{className:"w-12 text-center font-semibold text-slate-800",children:e.quantity}),r.jsx("button",{onClick:()=>N(e.id||e.product_id,e.quantity+1),className:"w-8 h-8 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-600 hover:text-slate-800 transition-colors",children:"+"})]}),r.jsx("button",{onClick:()=>(async e=>{window.confirm("Are you sure you want to remove this item from your cart?")&&p&&await p(e)})(e.id||e.product_id),className:"text-red-500 hover:text-red-700 p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Remove item",children:r.jsx(m,{className:"h-5 w-5"})})]},e.id||`${e.slug}-${e.product_id}`);var t})]})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 sticky top-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6",children:"Order Summary"}),r.jsx("div",{className:"space-y-4 mb-6",children:(()=>{const e=h.reduce((e,t)=>{var s,r,n;let i=null;const o=t;if(o.mrp)i=o.mrp;else if(null==(s=o.details)?void 0:s.mrp)i=o.details.mrp;else if(null==(n=null==(r=o.product)?void 0:r.details)?void 0:n.mrp)i=o.product.details.mrp;else if(o.csvProduct){const e=o.csvProduct;i=e["MRP (₹)"]||e["MRP "]||e.MRP||e.mrp||e["MRP(₹)"]||e["MRP(₹) "]}i||(i=t.price);const c=l(i||"0");return e+a(c*t.quantity)},0),t=h.reduce((e,t)=>{var s,r,n;const i=t;let o=null;if(i.mrp)o=i.mrp;else if(null==(s=i.details)?void 0:s.mrp)o=i.details.mrp;else if(null==(n=null==(r=i.product)?void 0:r.details)?void 0:n.mrp)o=i.product.details.mrp;else if(i.csvProduct){const e=i.csvProduct;o=e["MRP (₹)"]||e["MRP "]||e.MRP||e.mrp||e["MRP(₹)"]||e["MRP(₹) "]}o||(o=t.price);const c=(l(o||"0")-l(t.price))*t.quantity;return e+Math.max(0,a(c))},0);return h.reduce((e,t)=>{const s=l(t.price),r=(t.category||"").toLowerCase().includes("hair")?.05:.18;return e+a((s-s/(1+r))*t.quantity)},0),r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between text-slate-600",children:[r.jsx("span",{children:"MRP"}),r.jsxs("span",{children:["₹",a(e).toLocaleString()]})]}),t>0&&r.jsxs("div",{className:"flex justify-between text-green-600",children:[r.jsx("span",{children:"Product Discount"}),r.jsxs("span",{children:["-₹",a(t).toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between font-medium text-slate-700",children:[r.jsxs("span",{children:["Subtotal (",h.length," items)"]}),r.jsxs("span",{children:["₹",a(y).toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between text-slate-600",children:[r.jsx("span",{children:"Shipping Charges"}),r.jsx("span",{className:"text-green-600",children:"Free"})]}),h.some(e=>(e.category||"").toLowerCase().includes("hair"))&&r.jsxs("div",{className:"flex justify-between text-slate-600",children:[r.jsx("span",{children:"GST (5% - Hair Products, Inclusive)"}),r.jsxs("span",{children:["₹",a(h.reduce((e,t)=>{if((t.category||"").toLowerCase().includes("hair")){const s=l(t.price);return e+(s-s/1.05)*t.quantity}return e},0)).toLocaleString()]})]}),h.some(e=>!(e.category||"").toLowerCase().includes("hair"))&&r.jsxs("div",{className:"flex justify-between text-slate-600",children:[r.jsx("span",{children:"GST (18% - Other Products, Inclusive)"}),r.jsxs("span",{children:["₹",a(h.reduce((e,t)=>{if(!(t.category||"").toLowerCase().includes("hair")){const s=l(t.price);return e+(s-s/1.18)*t.quantity}return e},0)).toLocaleString()]})]}),r.jsx("hr",{className:"border-slate-200"}),r.jsxs("div",{className:"flex justify-between text-lg font-bold",style:{color:"#1B4965"},children:[r.jsx("span",{children:"Grand Total"}),r.jsxs("span",{children:["₹",a(v).toLocaleString()]})]}),r.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"* MRP includes GST"})]})})()}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("a",{href:"#/user/checkout",className:"block w-full text-white py-3 px-4 rounded-lg font-semibold text-center hover:shadow-lg transition-all duration-300 hover:scale-105",style:{backgroundColor:"rgb(75,151,201)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="rgb(60,120,160)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="rgb(75,151,201)",children:"Proceed to Checkout"}),r.jsx("a",{href:"#/user/shop",className:"block w-full py-3 px-4 rounded-lg font-semibold text-center transition-colors",style:{borderColor:"rgb(75,151,201)",borderWidth:"1px",color:"rgb(75,151,201)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgb(75,151,201)",e.currentTarget.style.color="white"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color="rgb(75,151,201)"},children:"Continue Shopping"})]}),r.jsx("div",{className:"mt-6 pt-6 border-t border-slate-200",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2 text-slate-500 text-sm",children:[r.jsx(x,{className:"h-4 w-4"}),r.jsx("span",{children:"Secure Checkout"})]})})]})})]})]})})})}export{u as default};
