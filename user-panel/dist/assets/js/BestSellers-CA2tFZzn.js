import{b as e,g as t,j as s}from"./index-BPtsMCXT.js";import{r as l}from"./react-vendor-D-XgqoRR.js";import{P as r}from"./PricingDisplay-C9EbLqGk.js";import"./socket-vendor-CUkmNz_4.js";import"./ui-vendor-BjTBABCK.js";function a(){const[a,o]=l.useState([]),[i,d]=l.useState(!0),[n,c]=l.useState(null);l.useEffect(()=>{m()},[]);const m=async()=>{try{d(!0),c(null);const s=await e.collections.getCollections("best_sellers",!0);if(s.success&&s.data&&s.data.length>0){const e=t(),l=t=>{if(!t)return"";if(/^https?:\/\//i.test(t))return t;return`${e.replace(/\/$/,"")}${t.startsWith("/")?t:`/${t}`}`},r=s.data.filter(e=>e.is_published&&e.product_id).map(e=>{var t,s;const r=e.image_url||e.product_image||"";return{id:e.product_id,slug:e.product_slug||"",title:e.product_title||e.title||"",category:e.product_category||"",price:e.product_price||"",listImage:l(r),list_image:l(r),total_orders:(null==(t=e.metadata)?void 0:t.total_orders)||0,details:{totalOrders:(null==(s=e.metadata)?void 0:s.total_orders)||0},order_index:e.order_index||0}});o(r)}else o([])}catch(s){c("Unable to load best sellers right now. Please try again later."),o([])}finally{d(!1)}},x=l.useMemo(()=>Array.isArray(a)?[...a].sort((e,t)=>{var s,l;const r=e.order_index??999,a=t.order_index??999;if(r!==a)return r-a;const o=e.total_orders||(null==(s=e.details)?void 0:s.totalOrders)||0;return(t.total_orders||(null==(l=t.details)?void 0:l.totalOrders)||0)-o}).slice(0,12):[],[a]);return s.jsx("main",{className:"min-h-screen bg-gradient-to-b from-white via-slate-50 to-slate-100 py-12",children:s.jsxs("div",{className:"mx-auto max-w-7xl px-4",children:[s.jsxs("header",{className:"mb-10 text-center",children:[s.jsx("span",{className:"inline-flex items-center rounded-full bg-rose-100 px-4 py-1 text-sm font-semibold text-rose-600",children:"Community Favorites"}),s.jsx("h1",{className:"mt-4 text-4xl font-bold tracking-tight text-slate-900",children:"Best Sellers"}),s.jsx("p",{className:"mx-auto mt-3 max-w-2xl text-lg text-slate-600",children:"Beauty lovers’ top picks inspired by Plum’s “Most Loved” and WOW Skin Science’s hero edits. Shop the products our community keeps coming back to."})]}),n&&s.jsx("div",{className:"mb-8 rounded-xl border border-red-200 bg-red-50 p-4 text-red-700",children:n}),0===x.length&&!i&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-lg text-slate-600",children:"No best sellers available at the moment."}),s.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Check back soon for our top picks!"})]}),s.jsx("section",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:i?Array.from({length:9}).map((e,t)=>s.jsx("div",{className:"h-80 animate-pulse rounded-3xl bg-slate-100"},t)):x.length>0?x.map(e=>{var t;return s.jsxs("article",{className:"group flex h-full flex-col overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm transition hover:-translate-y-1 hover:shadow-lg",children:[s.jsxs("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-slate-100",children:[s.jsx("img",{src:e.listImage||e.list_image||"",alt:e.title,className:"w-full h-full object-cover transition duration-700 group-hover:scale-105",style:{aspectRatio:"4/3"},onError:e=>{e.currentTarget.style.display="none"}}),s.jsx("span",{className:"absolute left-5 top-5 rounded-full bg-rose-500 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white",children:"Best Seller"})]}),s.jsxs("div",{className:"flex flex-1 flex-col p-6",children:[s.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-rose-600",children:e.category||"Bestselling Formula"}),s.jsx("h2",{className:"mt-2 text-xl font-semibold text-slate-900",children:e.title}),s.jsx("div",{className:"mt-3 text-sm text-slate-500",children:s.jsx(r,{product:e,csvProduct:e.csvProduct})}),s.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[s.jsx("button",{onClick:()=>window.location.hash=`#/user/product/${e.slug}`,className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-700 transition hover:border-slate-900 hover:text-slate-900",children:"View Details"}),s.jsx("button",{onClick:()=>window.location.hash="#/user/cart",className:"rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white transition hover:bg-slate-700",children:"Add to Bag"})]}),e.total_orders&&e.total_orders>0&&s.jsxs("div",{className:"mt-4 rounded-2xl bg-slate-100/60 p-3 text-xs text-slate-500",children:["Loved by over ",e.total_orders||(null==(t=e.details)?void 0:t.totalOrders),"+ shoppers"]})]})]},e.slug)}):null}),s.jsxs("section",{className:"mt-16 rounded-3xl border border-slate-200 bg-white p-8 shadow-sm",children:[s.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Routine Builders"}),s.jsx("p",{className:"mt-2 text-slate-600",children:"Inspired by Forest Essentials rituals & Minimalist regimens, curate a complete routine with our best sellers."}),s.jsx("div",{className:"mt-6 grid gap-4 md:grid-cols-3",children:x.slice(0,3).map(e=>{var t;return s.jsxs("button",{onClick:()=>window.location.hash=`#/user/product/${e.slug}`,className:"flex items-center gap-4 rounded-2xl border border-slate-200 bg-slate-50 p-4 text-left transition hover:border-slate-900 hover:bg-white",children:[s.jsx("img",{src:e.listImage||e.list_image||"",alt:e.title,className:"h-16 w-16 rounded-xl object-cover",onError:e=>{e.currentTarget.style.display="none"}}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-slate-900",children:e.title}),s.jsxs("p",{className:"text-xs text-slate-500",children:["Perfect as step ",(null==(t=e.category)?void 0:t.toLowerCase().includes("cleanser"))?"1":"2"," in your ritual"]})]})]},e.slug)})})]})]})})}export{a as default};
