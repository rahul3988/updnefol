import{u as e,b as a,j as s}from"./index-DrsU3FnI.js";import{r as t}from"./react-vendor-D-XgqoRR.js";import{P as l}from"./PhoneInput-C2tyOjKn.js";import{i as d,y as r,z as n,F as i,D as c}from"./ui-vendor-BjTBABCK.js";import"./socket-vendor-CUkmNz_4.js";function o(){const{isAuthenticated:o}=e(),[u,x]=t.useState([]),[m,h]=t.useState(!0),[p,b]=t.useState(!1),[y,k]=t.useState(null),[g,f]=t.useState({name:"",phone:"",country:"India",zip:"",street:"",area:"",landmark:"",city:"",state:"",address_type:"house",address_label:"",is_default:!1,delivery_instructions:"",weekend_delivery:{saturday:!1,sunday:!1},is_house_type:!1}),[j,v]=t.useState("+91"),N=[{name:"India",code:"+91"},{name:"United States",code:"+1"},{name:"United Kingdom",code:"+44"},{name:"Canada",code:"+1"},{name:"Australia",code:"+61"},{name:"Germany",code:"+49"},{name:"France",code:"+33"},{name:"Japan",code:"+81"},{name:"China",code:"+86"},{name:"Singapore",code:"+65"},{name:"UAE",code:"+971"},{name:"Pakistan",code:"+92"},{name:"Bangladesh",code:"+880"},{name:"Sri Lanka",code:"+94"},{name:"Nepal",code:"+977"}];t.useEffect(()=>{o?_():h(!1)},[o]),t.useEffect(()=>{const e=N.find(e=>e.name===g.country);e&&v(e.code)},[g.country]);const _=async()=>{try{h(!0);const e=(await a.user.getAddresses()).map(e=>({...e,weekend_delivery:"string"==typeof e.weekend_delivery?JSON.parse(e.weekend_delivery||"{}"):e.weekend_delivery||{saturday:!1,sunday:!1}}));x(e)}catch(e){x([])}finally{h(!1)}};return m?s.jsx("main",{className:"py-10 dark:bg-slate-900 min-h-screen",children:s.jsx("div",{className:"mx-auto max-w-4xl px-4",children:s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading your addresses..."})})})}):s.jsx("main",{className:"py-10 dark:bg-slate-900 min-h-screen",children:s.jsxs("div",{className:"mx-auto max-w-4xl px-4",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-green-500 to-emerald-600 mb-4",children:s.jsx(d,{className:"w-10 h-10 text-white"})}),s.jsx("h1",{className:"text-5xl font-bold text-slate-900 dark:text-slate-100 mb-4",children:"Manage Address"}),s.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-400",children:"Manage your delivery addresses"})]}),s.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>{b(!p),k(null),f({name:"",phone:"",country:"India",zip:"",street:"",area:"",landmark:"",city:"",state:"",address_type:"house",address_label:"",is_default:!1,delivery_instructions:"",weekend_delivery:{saturday:!1,sunday:!1},is_house_type:!1})},disabled:u.length>=5,className:"flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:bg-slate-400 disabled:cursor-not-allowed",children:[s.jsx(r,{className:"w-5 h-5"}),"Add New Address"]}),u.length>=5&&s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Maximum 5 addresses reached. Delete an address to add a new one."})]}),(p||y)&&s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 mb-8",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:y?"Edit Address":"Add New Address"}),s.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Fields marked with ",s.jsx("span",{className:"text-red-500 font-semibold",children:"*"})," are required"]})]}),s.jsxs("form",{onSubmit:y?async e=>{if(e.preventDefault(),y)try{await a.user.updateAddress(y.id,{name:g.name,phone:`${j}${g.phone.replace(/\D/g,"")}`,street:g.street,area:g.area,landmark:g.landmark,city:g.city,state:g.state,zip:g.zip,country:g.country,address_type:g.address_type,address_label:"other"===g.address_type?g.address_label:void 0,is_default:g.is_default,delivery_instructions:g.delivery_instructions,weekend_delivery:g.weekend_delivery,is_house_type:g.is_house_type}),await _(),k(null),b(!1),f({name:"",phone:"",country:"India",zip:"",street:"",area:"",landmark:"",city:"",state:"",address_type:"house",address_label:"",is_default:!1,delivery_instructions:"",weekend_delivery:{saturday:!1,sunday:!1},is_house_type:!1}),alert("Address updated successfully!")}catch(s){alert("Failed to update address. Please try again.")}}:async e=>{e.preventDefault();try{await a.user.createAddress({name:g.name,phone:`${j}${g.phone.replace(/\D/g,"")}`,street:g.street,area:g.area,landmark:g.landmark,city:g.city,state:g.state,zip:g.zip,country:g.country,address_type:g.address_type,address_label:"other"===g.address_type?g.address_label:void 0,is_default:g.is_default,delivery_instructions:g.delivery_instructions,weekend_delivery:g.weekend_delivery,is_house_type:g.is_house_type}),await _(),b(!1),f({name:"",phone:"",country:"India",zip:"",street:"",area:"",landmark:"",city:"",state:"",address_type:"house",address_label:"",is_default:!1,delivery_instructions:"",weekend_delivery:{saturday:!1,sunday:!1},is_house_type:!1}),alert("Address added successfully!")}catch(s){const e=s.message||"Failed to add address. Please try again.";e.includes("Maximum 5 addresses")?alert("You can only save up to 5 addresses. Please delete an existing address first."):alert(e)}},className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Country/Region ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("select",{value:g.country,onChange:e=>f({...g,country:e.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",required:!0,children:N.map(e=>s.jsxs("option",{value:e.name,children:[e.name," (",e.code,")"]},e.name))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Full name (First and Last name) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:g.name,onChange:e=>f({...g,name:e.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",placeholder:"Enter full name",required:!0})]}),s.jsx("div",{children:s.jsx(l,{value:g.phone,onChange:e=>f({...g,phone:e}),onCountryCodeChange:v,defaultCountry:j,placeholder:"Enter phone number",required:!0,showLabel:!0,label:"Mobile number"})}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Pincode ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:g.zip,onChange:e=>f({...g,zip:e.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",placeholder:"123456",pattern:"[0-9]{6}",maxLength:6,required:!0}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"6 digits [0-9] PIN code"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Flat, House no., Building, Company, Apartment ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:g.street,onChange:e=>f({...g,street:e.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",placeholder:"House/Flat No., Building Name",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Area, Street, Sector, Village"}),s.jsx("input",{type:"text",value:g.area,onChange:e=>f({...g,area:e.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",placeholder:"Area, Street, Sector, Village"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Landmark"}),s.jsx("input",{type:"text",value:g.landmark,onChange:e=>f({...g,landmark:e.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",placeholder:"E.g. near apollo hospital"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Town/City ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:g.city,onChange:e=>f({...g,city:e.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",placeholder:"City",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["State ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{value:g.state,onChange:e=>f({...g,state:e.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",required:!0,children:[s.jsx("option",{value:"",children:"Choose a state"}),["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"].map(e=>s.jsx("option",{value:e,children:e},e))]})]}),s.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("input",{type:"checkbox",id:"is_default",checked:g.is_default,onChange:e=>f({...g,is_default:e.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),s.jsx("label",{htmlFor:"is_default",className:"text-sm font-medium text-slate-700 dark:text-slate-300 cursor-pointer",children:"Make this my default address"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Delivery instructions (optional)"}),s.jsx("textarea",{value:g.delivery_instructions,onChange:e=>f({...g,delivery_instructions:e.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",rows:3,placeholder:"Add preferences, notes, access codes and more"}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Your instructions help us deliver your packages to your expectations and will be used when possible."})]}),s.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Address Type"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{value:"house",label:"House"},{value:"apartment",label:"Apartment"},{value:"business",label:"Business"},{value:"other",label:"Other"}].map(e=>s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"address_type",value:e.value,checked:g.address_type===e.value,onChange:e=>f({...g,address_type:e.target.value,address_label:""}),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:e.label})]},e.value))}),"house"===g.address_type&&s.jsxs("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Independent house, villa, or builder floor (6 AM - 11 PM delivery)"}),s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"is_house_type",checked:g.is_house_type,onChange:e=>f({...g,is_house_type:e.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),s.jsx("label",{htmlFor:"is_house_type",className:"text-xs text-slate-700 dark:text-slate-300 cursor-pointer",children:"Confirm this is an independent house, villa, or builder floor"})]})]}),"other"===g.address_type&&s.jsxs("div",{className:"mt-3",children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Address Name/Label ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:g.address_label,onChange:e=>f({...g,address_label:e.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",placeholder:"E.g. Friend's House, Relative's Place, etc.",required:"other"===g.address_type}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Please mention a name for this address to help identify it"})]})]}),s.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Can you receive deliveries at this address on weekends?"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Saturdays"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"saturday",checked:!1===g.weekend_delivery.saturday,onChange:()=>f({...g,weekend_delivery:{...g.weekend_delivery,saturday:!1}}),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"No"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"saturday",checked:!0===g.weekend_delivery.saturday,onChange:()=>f({...g,weekend_delivery:{...g.weekend_delivery,saturday:!0}}),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Yes"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Sundays"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"sunday",checked:!1===g.weekend_delivery.sunday,onChange:()=>f({...g,weekend_delivery:{...g.weekend_delivery,sunday:!1}}),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"No"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"sunday",checked:!0===g.weekend_delivery.sunday,onChange:()=>f({...g,weekend_delivery:{...g.weekend_delivery,sunday:!0}}),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Yes"})]})]})]})]})]}),s.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Do we need additional instructions to deliver to this address?"}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:"Your instructions help us deliver your packages to your expectations and will be used when possible."})]}),s.jsxs("div",{className:"flex gap-4 pt-4",children:[s.jsxs("button",{type:"submit",className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[y?"Update":"Save"," Address"]}),s.jsx("button",{type:"button",onClick:()=>{b(!1),k(null)},className:"flex-1 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200 px-6 py-3 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors font-medium",children:"Cancel"})]})]})]}),0===u.length?s.jsxs("div",{className:"text-center py-16",children:[s.jsx(d,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"No Addresses Saved"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Add an address to make checkout faster"}),s.jsx("button",{onClick:()=>b(!0),className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Add Your First Address"})]}):s.jsx("div",{className:"space-y-4",children:u.map(e=>s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6",children:s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[e.is_default&&s.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400 px-3 py-1 rounded-full mb-3",children:[s.jsx(n,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Default"})]}),s.jsxs("div",{className:"space-y-2",children:[e.name&&s.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:e.name}),s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.address_type&&s.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium rounded-md bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 capitalize",children:"other"===e.address_type&&e.address_label?e.address_label:e.address_type}),!e.is_default&&s.jsx("button",{onClick:()=>(async e=>{try{await a.user.setDefaultAddress(e),await _(),alert("Default address updated successfully!")}catch(s){alert("Failed to set default address. Please try again.")}})(e.id),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline font-medium",children:"Set as Default"})]}),s.jsxs("div",{className:"text-slate-600 dark:text-slate-400 space-y-1",children:[s.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:e.street}),e.area&&s.jsx("p",{children:e.area}),e.landmark&&s.jsxs("p",{className:"text-sm italic",children:["Near ",e.landmark]}),s.jsxs("p",{children:[e.city,", ",e.state," - ",e.zip]})]}),e.phone&&s.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:s.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[s.jsx("span",{className:"font-medium",children:"Phone:"})," ",e.phone]})})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{k(e);let a=e.phone||"",s="+91";for(const e of N)if(a.startsWith(e.code)){s=e.code,a=a.replace(e.code,"").trim().replace(/\D/g,"");break}v(s),f({name:e.name||"",phone:a,country:e.country||"India",zip:e.zip,street:e.street,area:e.area||"",landmark:e.landmark||"",city:e.city,state:e.state,address_type:e.address_type||"house",address_label:e.address_label||"",is_default:e.is_default,delivery_instructions:e.delivery_instructions||"",weekend_delivery:e.weekend_delivery||{saturday:!1,sunday:!1},is_house_type:e.is_house_type||!1}),b(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900 rounded-lg transition-colors",children:s.jsx(i,{className:"w-5 h-5"})}),!e.is_default&&s.jsx("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this address?"))try{await a.user.deleteAddress(e),await _(),alert("Address deleted successfully!")}catch(s){alert("Failed to delete address. Please try again.")}})(e.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900 rounded-lg transition-colors",children:s.jsx(c,{className:"w-5 h-5"})})]})]})},e.id))})]})})}export{o as default};
