import{j as e,g as s}from"./index-BcSM4fAK.js";import{r as t}from"./react-vendor-D-XgqoRR.js";import{r as l,J as a,U as o}from"./ui-vendor-D0H4cakl.js";import"./socket-vendor-CUkmNz_4.js";function i(){const[i,r]=t.useState(null),[c,n]=t.useState(!0),[d,m]=t.useState("");t.useEffect(()=>{(async()=>{const e=(window.location.hash||"#/").match(/^#\/user\/blog\/([^?#]+)/),t=null==e?void 0:e[1];if(!t)return m("Invalid blog post ID"),void n(!1);try{const e=s(),a=await fetch(`${e}/api/blog/posts/${t}`);if(a.ok){const s=await a.json();let t=[];if("string"==typeof s.images)try{t=JSON.parse(s.images)}catch(l){t=[]}else Array.isArray(s.images)&&(t=s.images);const o={...s,images:t.map(s=>s.startsWith("/uploads/")?`${e}${s}`:s)};r(o)}else 404===a.status?m("Blog post not found"):m("Failed to load blog post")}catch(a){m("Network error loading blog post")}finally{n(!1)}})()},[]);const x=()=>{window.location.hash="#/user/blog"};return c?e.jsx("main",{className:"min-h-screen py-10",style:{backgroundColor:"#F4F9F9"},children:e.jsx("div",{className:"mx-auto max-w-4xl px-4",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{style:{color:"#9DB4C0"},children:"Loading blog post..."})})})}):d||!i?e.jsx("main",{className:"min-h-screen py-10",style:{backgroundColor:"#F4F9F9"},children:e.jsx("div",{className:"mx-auto max-w-4xl px-4",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-600 mb-4",children:d||"Blog post not found"}),e.jsxs("button",{onClick:x,className:"inline-flex items-center gap-2 px-6 py-3 text-white font-medium transition-all duration-300 text-sm tracking-wide uppercase shadow-lg rounded-lg",style:{backgroundColor:"#1B4965"},children:[e.jsx(l,{className:"w-4 h-4"}),"Back to Blog"]})]})})}):e.jsx("main",{className:"min-h-screen py-10",style:{backgroundColor:"#F4F9F9"},children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4",children:[e.jsxs("button",{onClick:x,className:"mb-6 inline-flex items-center gap-2 text-sm font-medium transition-colors hover:opacity-80",style:{color:"#1B4965"},children:[e.jsx(l,{className:"w-4 h-4"}),"Back to Blog"]}),e.jsxs("article",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[i.images&&i.images.length>0&&e.jsxs("div",{className:"relative w-full h-96",children:[e.jsx("img",{src:i.images[0],alt:i.title,className:"w-full h-full object-cover"}),i.featured&&e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:"text-white px-3 py-1 text-xs font-medium tracking-wide uppercase rounded-full",style:{backgroundColor:"#4B97C9"},children:"FEATURED"})})]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-4 text-sm",style:{color:"#9DB4C0"},children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(a,{className:"w-4 h-4"}),(h=i.created_at,new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(o,{className:"w-4 h-4"}),i.author_name]})]}),e.jsx("h1",{className:"text-4xl font-serif mb-6",style:{color:"#1B4965"},children:i.title}),i.excerpt&&e.jsx("p",{className:"text-xl font-light mb-8 leading-relaxed",style:{color:"#9DB4C0"},children:i.excerpt}),e.jsx("div",{className:"prose prose-lg max-w-none mb-8",style:{color:"#1B4965",lineHeight:"1.8",whiteSpace:"pre-wrap"},children:i.content?i.content.includes("<")&&i.content.includes(">")?e.jsx("div",{dangerouslySetInnerHTML:{__html:i.content}}):e.jsx("p",{style:{whiteSpace:"pre-wrap"},children:i.content}):e.jsx("p",{style:{color:"#9DB4C0"},children:"No content available."})}),i.images&&i.images.length>1&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-8",children:i.images.slice(1).map((s,t)=>e.jsx("img",{src:s,alt:`${i.title} - Image ${t+2}`,className:"w-full h-64 object-cover rounded-lg"},t))}),e.jsx("div",{className:"mt-12 pt-8 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center",style:{backgroundColor:"#9DB4C0"},children:e.jsx(o,{className:"w-8 h-8",style:{color:"#1B4965"}})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",style:{color:"#1B4965"},children:i.author_name}),i.author_email&&e.jsx("p",{className:"text-sm",style:{color:"#9DB4C0"},children:i.author_email})]})]})})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("button",{onClick:x,className:"inline-flex items-center gap-2 px-8 py-4 text-white font-medium transition-all duration-300 text-sm tracking-wide uppercase shadow-lg rounded-lg",style:{backgroundColor:"#1B4965"},children:[e.jsx(l,{className:"w-4 h-4"}),"Back to All Posts"]})})]})});var h}export{i as default};
